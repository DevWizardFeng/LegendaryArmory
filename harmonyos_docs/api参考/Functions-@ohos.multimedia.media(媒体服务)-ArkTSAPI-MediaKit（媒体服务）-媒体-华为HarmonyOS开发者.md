<h1 _ngcontent-twh-c119="" class="doc-title ng-star-inserted" title="Functions"> Functions </h1>

<div _ngcontent-twh-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  </div></div></div>  <div class="tiledSection"><h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateavplayer9" device-type="phone,2in1,tablet,wearable,tv">media.createAVPlayer<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateavplayer9" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAVPlayer(callback: AsyncCallback&lt;AVPlayer&gt;): void</p> <p>创建音视频播放实例。使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li>推荐单个应用创建的音视频播放实例（即音频、视频、音视频三类相加）不超过16个。</li><li>应用需要按照实际业务需求合理使用AVPlayer对象，按需创建并及时释放，避免持有过多AVPlayer实例导致内存消耗过大，否则在一定情况下可能导致系统终止应用。</li></ul>  </div></div></div> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.3.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.3.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.3.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer">AVPlayer</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。异步返回AVPlayer实例，失败时返回null。可用于音视频播放。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.3.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Return by callback.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avPlayer</span>: media.<span class="hljs-property">AVPlayer</span>;</li><li>media.<span class="hljs-title function_">createAVPlayer</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, video: media.AVPlayer</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (video != <span class="hljs-literal">null</span>) {</li><li>    avPlayer = video;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating AVPlayer'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVPlayer, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateavplayer9-1" device-type="phone,2in1,tablet,wearable,tv">media.createAVPlayer<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateavplayer9-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAVPlayer(): Promise&lt;AVPlayer&gt;</p> <p>异步方式创建音视频播放实例。使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li>推荐单个应用创建的音视频播放实例（即音频、视频、音视频三类相加）不超过16个。</li><li>应用需要按照实际业务需求合理使用AVPlayer对象，按需创建并及时释放，避免持有过多AVPlayer实例导致内存消耗过大，否则在一定情况下可能导致系统终止应用。</li></ul>  </div></div></div> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer">AVPlayer</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。异步返回AVPlayer实例，失败时返回null。可用于音视频播放。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Return by promise.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avPlayer</span>: media.<span class="hljs-property">AVPlayer</span>;</li><li>media.<span class="hljs-title function_">createAVPlayer</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">video: media.AVPlayer</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (video != <span class="hljs-literal">null</span>) {</li><li>    avPlayer = video;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating AVPlayer'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create AVPlayer'</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVPlayer, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateavrecorder9" device-type="phone,2in1,tablet,wearable,tv">media.createAVRecorder<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateavrecorder9" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAVRecorder(callback: AsyncCallback&lt;AVRecorder&gt;): void</p> <p>创建音视频录制实例。使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>应用可创建多个音视频录制实例，但由于设备共用音频通路，一个设备仅能有一个实例进行音频录制。创建第二个实例录制音频时，将会因为音频通路冲突导致创建失败。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder">AVRecorder</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回AVRecorder实例，失败时返回null。可用于录制音视频媒体。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Return by callback.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avRecorder</span>: media.<span class="hljs-property">AVRecorder</span>;</li><li>
</li><li>media.<span class="hljs-title function_">createAVRecorder</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, recorder: media.AVRecorder</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (recorder != <span class="hljs-literal">null</span>) {</li><li>    avRecorder = recorder;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating AVRecorder'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVRecorder, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateavrecorder9-1" device-type="phone,2in1,tablet,wearable,tv">media.createAVRecorder<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateavrecorder9-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAVRecorder(): Promise&lt;AVRecorder&gt;</p> <p>创建音视频录制实例。使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>应用可创建多个音视频录制实例，但由于设备共用音频通路，一个设备仅能有一个实例进行音频录制。创建第二个实例录制音频时，将会因为音频通路冲突导致创建失败。</p>  </div></div></div> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder">AVRecorder</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回AVRecorder实例，失败时返回null。可用于录制音视频媒体。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Return by promise.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avRecorder</span>: media.<span class="hljs-property">AVRecorder</span>;</li><li>media.<span class="hljs-title function_">createAVRecorder</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">recorder: media.AVRecorder</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (recorder != <span class="hljs-literal">null</span>) {</li><li>    avRecorder = recorder;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating AVRecorder'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create AVRecorder'</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVRecorder, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateavtranscoder12" device-type="phone,2in1,tablet,tv">media.createAVTranscoder<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateavtranscoder12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>createAVTranscoder(): Promise&lt;AVTranscoder&gt;</p> <p>创建视频转码实例。使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>可创建的视频转码实例不能超过2个。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avtranscoder">AVTranscoder</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。异步返回AVTranscoder实例，失败时返回null。可用于视频转码。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Return by promise.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avTranscoder</span>: media.<span class="hljs-property">AVTranscoder</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>media.<span class="hljs-title function_">createAVTranscoder</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">transcoder: media.AVTranscoder</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (transcoder != <span class="hljs-literal">null</span>) {</li><li>    avTranscoder = transcoder;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating AVTranscoder'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create AVTranscoder'</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVTranscoder, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateavmetadataextractor11" device-type="phone,2in1,tablet,wearable,tv">media.createAVMetadataExtractor<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateavmetadataextractor11" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAVMetadataExtractor(callback: AsyncCallback&lt;AVMetadataExtractor&gt;): void</p> <p>创建AVMetadataExtractor实例。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVMetadataExtractor</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avmetadataextractor">AVMetadataExtractor</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当创建AVMetadataExtractor实例成功，err为undefined，data为获取到的AVMetadataExtractor实例，否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Returned by callback.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avMetadataExtractor</span>: media.<span class="hljs-property">AVMetadataExtractor</span>;</li><li>media.<span class="hljs-title function_">createAVMetadataExtractor</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, extractor: media.AVMetadataExtractor</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (extractor != <span class="hljs-literal">null</span>) {</li><li>    avMetadataExtractor = extractor;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating AVMetadataExtractor'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVMetadataExtractor, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateavmetadataextractor11-1" device-type="phone,2in1,tablet,wearable,tv">media.createAVMetadataExtractor<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateavmetadataextractor11-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAVMetadataExtractor(): Promise&lt;AVMetadataExtractor&gt;</p> <p>创建AVMetadataExtractor实例。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVMetadataExtractor</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avmetadataextractor">AVMetadataExtractor</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。异步返回元数据获取类对象（AVMetadataExtractor）。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Returned by promise.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avMetadataExtractor</span>: media.<span class="hljs-property">AVMetadataExtractor</span>;</li><li>media.<span class="hljs-title function_">createAVMetadataExtractor</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">extractor: media.AVMetadataExtractor</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (extractor != <span class="hljs-literal">null</span>) {</li><li>    avMetadataExtractor = extractor;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating AVMetadataExtractor'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVMetadataExtractor`</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVMetadataExtractor, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreatesoundpool10" device-type="phone,2in1,tablet,wearable,tv">media.createSoundPool<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreatesoundpool10" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createSoundPool(maxStreams: number, audioRenderInfo: audio.AudioRendererInfo, callback: AsyncCallback&lt;SoundPool&gt;): void</p> <p>创建音频池实例。使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li>API version 18以下版本，创建的SoundPool对象底层为单实例模式，一个应用进程只能够创建1个SoundPool实例。</li><li>API version 18及API version 18以上版本，创建的SoundPool对象底层为多实例模式，一个应用进程最多能够创建128个SoundPool实例。</li></ul>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">maxStreams</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">soundPool实例的最大播放的流数，设置范围为1-32的正整数。</td> </tr> <tr><td class="cellrowborder" width="25%">audioRenderInfo</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiorendererinfo8">audio.AudioRendererInfo</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">音频播放参数信息。其中audioRenderInfo中的参数usage取值为STREAM_USAGE_UNKNOWN，STREAM_USAGE_MUSIC，STREAM_USAGE_MOVIE，STREAM_USAGE_AUDIOBOOK时，SoundPool播放短音时为混音模式，不会打断其他音频播放。SoundPool支持将rendererFlags设置为1用于低时延通路播放。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool">SoundPool</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。异步返回SoundPool实例，失败时返回null。用于音频池实例的加载播放功能。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Return by callback.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  usage : audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  rendererFlags : <span class="hljs-number">0</span></li><li>};</li><li>
</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreatesoundpool10-1" device-type="phone,2in1,tablet,wearable,tv">media.createSoundPool<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreatesoundpool10-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createSoundPool(maxStreams: number, audioRenderInfo: audio.AudioRendererInfo): Promise&lt;SoundPool&gt;</p> <p>创建音频池实例。使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li>API version 18以下版本，创建的SoundPool对象底层为单实例模式，一个应用进程只能够创建1个SoundPool实例。</li><li>API version 18及API version 18以上版本，创建的SoundPool对象底层为多实例模式，一个应用进程最多能够创建128个SoundPool实例。</li></ul>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">maxStreams</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">soundPool实例的最大播放的流数，设置范围为1-32的正整数。</td> </tr> <tr><td class="cellrowborder" width="25%">audioRenderInfo</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiorendererinfo8">audio.AudioRendererInfo</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">音频播放参数信息</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool">SoundPool</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。异步返回SoundPool实例，失败时返回null。用于音频池实例的加载播放功能。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Return by promise.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  usage : audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  rendererFlags : <span class="hljs-number">0</span></li><li>};</li><li>
</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">soundpool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (soundpool_ != <span class="hljs-literal">null</span>) {</li><li>    soundPool = soundpool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating SoundPool'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create SoundPool'</span>);</li><li>  }</li><li>}, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`soundpool catchCallback, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateavscreencapturerecorder12" device-type="phone,2in1,tablet,tv">media.createAVScreenCaptureRecorder<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateavscreencapturerecorder12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>createAVScreenCaptureRecorder(): Promise&lt;AVScreenCaptureRecorder&gt;</p> <p>创建屏幕录制实例，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avscreencapturerecorder">AVScreenCaptureRecorder</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回AVScreenCaptureRecorder实例，失败时返回null。可用于进行屏幕录制。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Return by promise.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avScreenCaptureRecorder</span>: media.<span class="hljs-property">AVScreenCaptureRecorder</span>;</li><li>media.<span class="hljs-title function_">createAVScreenCaptureRecorder</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">captureRecorder: media.AVScreenCaptureRecorder</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (captureRecorder != <span class="hljs-literal">null</span>) {</li><li>    avScreenCaptureRecorder = captureRecorder;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in createAVScreenCaptureRecorder'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to createAVScreenCaptureRecorder'</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createAVScreenCaptureRecorder catchCallback, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateavimagegenerator12" device-type="phone,2in1,tablet,wearable,tv">media.createAVImageGenerator<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateavimagegenerator12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAVImageGenerator(callback: AsyncCallback&lt;AVImageGenerator&gt;): void</p> <p>创建AVImageGenerator实例。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVImageGenerator</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avimagegenerator">AVImageGenerator</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。异步返回AVImageGenerator实例，失败时返回null。可用于获取视频缩略图。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Returned by callback.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avImageGenerator</span>: media.<span class="hljs-property">AVImageGenerator</span>;</li><li>media.<span class="hljs-title function_">createAVImageGenerator</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, generator: media.AVImageGenerator</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (generator != <span class="hljs-literal">null</span>) {</li><li>    avImageGenerator = generator;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating AVImageGenerator'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVImageGenerator, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateavimagegenerator12-1" device-type="phone,2in1,tablet,wearable,tv">media.createAVImageGenerator<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateavimagegenerator12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAVImageGenerator(): Promise&lt;AVImageGenerator&gt;</p> <p>创建AVImageGenerator对象。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVImageGenerator</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avimagegenerator">AVImageGenerator</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。异步返回AVImageGenerator实例，失败时返回null。可用于获取视频缩略图。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory. Returned by promise.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avImageGenerator</span>: media.<span class="hljs-property">AVImageGenerator</span>;</li><li>media.<span class="hljs-title function_">createAVImageGenerator</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">generator: media.AVImageGenerator</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (generator != <span class="hljs-literal">null</span>) {</li><li>    avImageGenerator = generator;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating AVImageGenerator'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create AVImageGenerator'</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVImageGenerator, error message:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreatemediasourcewithurl12" device-type="phone,2in1,tablet,wearable,tv">media.createMediaSourceWithUrl<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreatemediasourcewithurl12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createMediaSourceWithUrl(url: string, headers?: Record&lt;string, string&gt;): MediaSource</p> <p>创建流媒体预下载媒体来源实例方法。</p> <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">url</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>- 流媒体预下载媒体来源url，支持的流媒体格式：HLS、HTTP-FLV、Dash、Https。</p> <p> - 本地m3u8的fd路径。</p> </td> </tr> <tr><td class="cellrowborder" width="25%">headers</td> <td class="cellrowborder" width="25%">Record&lt;string, string&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">支持流媒体预下载HttpHeader自定义。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-mediasource">MediaSource</a></td> <td class="cellrowborder" width="50%">MediaSource返回值。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">5400101</td> <td class="cellrowborder" width="50%">No memory.</td> </tr>  </tbody></table></div> </div> <p><strong>示例1：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">headers</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {<span class="hljs-string">"User-Agent"</span> : <span class="hljs-string">"User-Agent-Value"</span>};</li><li><span class="hljs-keyword">let</span> mediaSource : media.<span class="hljs-property">MediaSource</span> = media.<span class="hljs-title function_">createMediaSourceWithUrl</span>(<span class="hljs-string">"http://xxx"</span>,  headers);</li></ol></pre></div></div> <p><strong>示例2：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.MediaKit"</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">context: Context</span>){</li><li>    <span class="hljs-comment">// this.getUIContext().getHostContext();</span></li><li>    <span class="hljs-keyword">let</span> mgr = context?.<span class="hljs-property">resourceManager</span>;</li><li>    <span class="hljs-keyword">if</span> (!mgr) {</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> fileDescriptor = <span class="hljs-keyword">await</span> mgr.<span class="hljs-title function_">getRawFd</span>(<span class="hljs-string">"xxx.m3u8"</span>);</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fd</span>: <span class="hljs-built_in">string</span> = fileDescriptor.<span class="hljs-property">fd</span>.<span class="hljs-title function_">toString</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">offset</span>: <span class="hljs-built_in">string</span> = fileDescriptor.<span class="hljs-property">offset</span>.<span class="hljs-title function_">toString</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">length</span>: <span class="hljs-built_in">string</span> = fileDescriptor.<span class="hljs-property">length</span>.<span class="hljs-title function_">toString</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fdUrl</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"fd://"</span> + fd + <span class="hljs-string">"?offset="</span> + offset + <span class="hljs-string">"&amp;size="</span> + length;</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">mediaSource</span>: media.<span class="hljs-property">MediaSource</span> = media.<span class="hljs-title function_">createMediaSourceWithUrl</span>(fdUrl);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreatemediasourcewithstreamdata19" device-type="phone,2in1,tablet,wearable,tv">media.createMediaSourceWithStreamData<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreatemediasourcewithstreamdata19" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createMediaSourceWithStreamData(streams: Array&lt;MediaStream&gt;): MediaSource</p> <p>创建流媒体多码率媒体来源实例方法，当前仅支持HTTP-FLV协议格式多码率。</p> <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">streams</td> <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#mediastream19">MediaStream</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">可设置MediaStream数组，支持的流媒体格式：HTTP-FLV。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-mediasource">MediaSource</a></td> <td class="cellrowborder" width="50%">返回MediaSource，用于媒体资源设置。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> streams : <span class="hljs-title class_">Array</span>&lt;media.<span class="hljs-property">MediaStream</span>&gt; = [];</li><li>streams.<span class="hljs-title function_">push</span>({<span class="hljs-attr">url</span>: <span class="hljs-string">"http://xxx/480p.flv"</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">854</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">480</span>, <span class="hljs-attr">bitrate</span>: <span class="hljs-number">800000</span>});</li><li>streams.<span class="hljs-title function_">push</span>({<span class="hljs-attr">url</span>: <span class="hljs-string">"http://xxx/720p.flv"</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1280</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">720</span>, <span class="hljs-attr">bitrate</span>: <span class="hljs-number">2000000</span>});</li><li>streams.<span class="hljs-title function_">push</span>({<span class="hljs-attr">url</span>: <span class="hljs-string">"http://xxx/1080p.flv"</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1920</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">1080</span>, <span class="hljs-attr">bitrate</span>: <span class="hljs-number">2000000</span>});</li><li><span class="hljs-keyword">let</span> mediaSource : media.<span class="hljs-property">MediaSource</span> = media.<span class="hljs-title function_">createMediaSourceWithStreamData</span>(streams);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateaudioplayerdeprecated" device-type="phone,2in1,tablet,wearable,tv">media.createAudioPlayer<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateaudioplayerdeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAudioPlayer(): AudioPlayer</p> <p>同步方式创建音频播放实例。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreateavplayer9">createAVPlayer</a>替代。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioPlayer</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-audioplayer">AudioPlayer</a></td> <td class="cellrowborder" width="50%">返回AudioPlayer类实例，失败时返回null。可用于音频播放、暂停、停止等操作。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioPlayer</span>: media.<span class="hljs-property">AudioPlayer</span> = media.<span class="hljs-title function_">createAudioPlayer</span>();</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreatevideoplayerdeprecated" device-type="phone,2in1,tablet,wearable,tv">media.createVideoPlayer<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreatevideoplayerdeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createVideoPlayer(callback: AsyncCallback&lt;VideoPlayer&gt;): void</p> <p>异步方式创建视频播放实例，通过注册回调函数获取返回值。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 8开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreateavplayer9">createAVPlayer</a>替代。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoPlayer</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-videoplayer">VideoPlayer</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。创建VideoPlayer实例成功时，err为undefined，data为获取到的VideoPlayer实例，否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">videoPlayer</span>: media.<span class="hljs-property">VideoPlayer</span>;</li><li>media.<span class="hljs-title function_">createVideoPlayer</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, video: media.VideoPlayer</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (video != <span class="hljs-literal">null</span>) {</li><li>    videoPlayer = video;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating VideoPlayer'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create VideoPlayer, error:<span class="hljs-subst">${error}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreatevideoplayerdeprecated-1" device-type="phone,2in1,tablet,wearable,tv">media.createVideoPlayer<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreatevideoplayerdeprecated-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createVideoPlayer(): Promise&lt;VideoPlayer&gt;</p> <p>异步方式创建视频播放实例，通过Promise获取返回值。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 8开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreateavplayer9-1">createAVPlayer</a>替代。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoPlayer</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-videoplayer">VideoPlayer</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。异步返回VideoPlayer实例，失败时返回null。可用于管理和播放视频媒体。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">videoPlayer</span>: media.<span class="hljs-property">VideoPlayer</span>;</li><li>media.<span class="hljs-title function_">createVideoPlayer</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">video: media.VideoPlayer</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (video != <span class="hljs-literal">null</span>) {</li><li>    videoPlayer = video;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating VideoPlayer'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create VideoPlayer'</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create VideoPlayer, error:<span class="hljs-subst">${error}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="mediacreateaudiorecorderdeprecated" device-type="phone,2in1,tablet,wearable,tv">media.createAudioRecorder<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediacreateaudiorecorderdeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAudioRecorder(): AudioRecorder</p> <p>创建音频录制的实例来控制音频的录制。</p> <p>一台设备只允许创建一个录制实例。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreateavrecorder9">createAVRecorder</a>替代。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p> <p><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-audiorecorder">AudioRecorder</a></td> <td class="cellrowborder" width="50%">返回AudioRecorder类实例，失败时返回null。可用于录制音频媒体。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-twh-c106="" class="highlight-div"><div _ngcontent-twh-c106="" class="highlight-div-header"><div _ngcontent-twh-c106="" class="highlight-div-header-left"><div _ngcontent-twh-c106="" class="handle-button expand-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-twh-c106="" class="highlight-div-header-right"><div _ngcontent-twh-c106="" class="handle-button ai-button"></div><div _ngcontent-twh-c106="" class="handle-button line-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-twh-c106="" class="handle-button theme-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-twh-c106="" class="handle-button copy-button"><div _ngcontent-twh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-twh-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRecorder</span>: media.<span class="hljs-property">AudioRecorder</span> = media.<span class="hljs-title function_">createAudioRecorder</span>();</li></ol></pre></div></div> </div> </div> <div></div></div>