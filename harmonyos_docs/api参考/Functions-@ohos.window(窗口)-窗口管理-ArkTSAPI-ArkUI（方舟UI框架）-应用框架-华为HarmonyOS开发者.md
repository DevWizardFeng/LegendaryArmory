<h1 _ngcontent-gmn-c119="" class="doc-title ng-star-inserted" title="Functions"> Functions </h1>

<div _ngcontent-gmn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowcreatewindow9" device-type="phone,2in1,tablet,wearable,tv">window.createWindow<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowcreatewindow9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createWindow(config: Configuration, callback: AsyncCallback&lt;Window&gt;): void</p>     <p>创建子窗口或者系统窗口，使用callback异步回调。</p>     <p>非<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口" target="_blank">自由窗口</a>状态下，子窗口创建后默认是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#沉浸式布局" target="_blank">沉浸式布局</a>。</p>     <p>自由窗口状态下，子窗口参数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">decorEnabled</a>为false时，子窗口创建后为沉浸式布局；子窗口参数decorEnabled为true，子窗口创建后为非沉浸式布局。</p>     <p><strong>需要权限：</strong> ohos.permission.SYSTEM_FLOAT_WINDOW（仅当创建窗口类型为window.WindowType.TYPE_FLOAT时需要申请）</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">Configuration</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建窗口时的参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回当前创建的窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.3.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. createWindow can not work correctly due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300001</td>         <td class="cellrowborder" width="50%">Repeated operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300002</td>         <td class="cellrowborder" width="50%">This window state is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300004</td>         <td class="cellrowborder" width="50%">Unauthorized operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300006</td>         <td class="cellrowborder" width="50%">This window context is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300009</td>         <td class="cellrowborder" width="50%">The parent window is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Configuration</span> = {</li><li>      <span class="hljs-attr">name</span>: <span class="hljs-string">"test"</span>,</li><li>      <span class="hljs-attr">windowType</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowType</span>.<span class="hljs-property">TYPE_DIALOG</span>,</li><li>      <span class="hljs-attr">ctx</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span></li><li>    };</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">createWindow</span>(config, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">const</span> <span class="hljs-attr">errCode</span>: <span class="hljs-built_in">number</span> = err.<span class="hljs-property">code</span>;</li><li>        <span class="hljs-keyword">if</span> (errCode) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create the window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        windowClass = data;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating the window. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>        windowClass.<span class="hljs-title function_">resize</span>(<span class="hljs-number">500</span>, <span class="hljs-number">1000</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create the window. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowcreatewindow9-1" device-type="phone,2in1,tablet,wearable,tv">window.createWindow<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowcreatewindow9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createWindow(config: Configuration): Promise&lt;Window&gt;</p>     <p>创建子窗口或者系统窗口，使用Promise异步回调。</p>     <p>非<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口" target="_blank">自由窗口</a>状态下，子窗口创建后默认是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#沉浸式布局" target="_blank">沉浸式布局</a>。</p>     <p>自由窗口状态下，子窗口参数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">decorEnabled</a>为false时，子窗口创建后为沉浸式布局；子窗口参数decorEnabled为true，子窗口创建后为非沉浸式布局。</p>     <p><strong>需要权限：</strong> ohos.permission.SYSTEM_FLOAT_WINDOW（仅当创建窗口类型为window.WindowType.TYPE_FLOAT时需要申请）</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">Configuration</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建窗口时的参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回当前创建的窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.15.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.15.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. createWindow can not work correctly due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300001</td>         <td class="cellrowborder" width="50%">Repeated operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300002</td>         <td class="cellrowborder" width="50%">This window state is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300004</td>         <td class="cellrowborder" width="50%">Unauthorized operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300006</td>         <td class="cellrowborder" width="50%">This window context is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300009</td>         <td class="cellrowborder" width="50%">The parent window is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Configuration</span> = {</li><li>      <span class="hljs-attr">name</span>: <span class="hljs-string">"test"</span>,</li><li>      <span class="hljs-attr">windowType</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowType</span>.<span class="hljs-property">TYPE_DIALOG</span>,</li><li>      <span class="hljs-attr">ctx</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span></li><li>    };</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">createWindow</span>(config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value:<span class="hljs-variable language_">window</span>.Window</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating the window. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));</li><li>        value.<span class="hljs-title function_">resize</span>(<span class="hljs-number">500</span>, <span class="hljs-number">1000</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err:BusinessError</span>)=&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create the window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create the window. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowfindwindow9" device-type="phone,2in1,tablet,wearable,tv">window.findWindow<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowfindwindow9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>findWindow(name: string): Window</p>     <p>查找指定名称对应的窗口。</p>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口名称。查找子窗口或系统窗口时使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">Configuration</a>中的窗口名称；查找主窗口时使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#getwindowname12">getWindowName</a>获取当前实例的窗口名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a></td>         <td class="cellrowborder" width="50%">当前查找的窗口对象。如果查找指定名称对应的窗口不存在，则返回对象为空。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300002</td>         <td class="cellrowborder" width="50%">This window state is abnormal.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  windowClass = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">findWindow</span>(<span class="hljs-string">'test'</span>);</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to find the Window. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgetlastwindow9" device-type="phone,2in1,tablet,wearable,tv">window.getLastWindow<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgetlastwindow9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLastWindow(ctx: BaseContext, callback: AsyncCallback&lt;Window&gt;): void</p>     <p>获取当前应用内层级最高的子窗口，使用callback异步回调。</p>     <p>若无应用子窗口或子窗口未调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#showwindow9">showWindow()</a>进行显示，则返回应用主窗口。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">ctx</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前应用上下文信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回当前应用内层级最高的窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300002</td>         <td class="cellrowborder" width="50%">This window state is abnormal. Top window or main window is null or destroyed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300006</td>         <td class="cellrowborder" width="50%">This window context is abnormal.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onWindowStageCreate'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load content for main window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      }</li><li>      windowStage.<span class="hljs-title function_">createSubWindow</span>(<span class="hljs-string">'TestSubWindow'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">subWindow</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">storage</span>: <span class="hljs-title class_">LocalStorage</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalStorage</span>();</li><li>        subWindow.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, storage, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load content for sub window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          }</li><li>          subWindow.<span class="hljs-title function_">showWindow</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getLastWindow</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">const</span> <span class="hljs-attr">errCode</span>: <span class="hljs-built_in">number</span> = err.<span class="hljs-property">code</span>;</li><li>                <span class="hljs-keyword">if</span> (errCode) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the top window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>                  <span class="hljs-keyword">return</span>;</li><li>                }</li><li>                windowClass = data;</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in obtaining the top window. Window id: <span class="hljs-subst">${windowClass.getWindowProperties().id}</span>`</span>);</li><li>              });</li><li>            } <span class="hljs-keyword">catch</span> (exception) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the top window. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>            }</li><li>          });</li><li>        });</li><li>      });</li><li>    });</li><li>  }</li><li>  <span class="hljs-comment">//...</span></li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgetlastwindow9-1" device-type="phone,2in1,tablet,wearable,tv">window.getLastWindow<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgetlastwindow9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLastWindow(ctx: BaseContext): Promise&lt;Window&gt;</p>     <p>获取当前应用内层级最高的子窗口，使用Promise异步回调。</p>     <p>若无应用子窗口或子窗口未调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#showwindow9">showWindow()</a>进行显示，则返回应用主窗口。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">ctx</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前应用上下文信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回当前应用内层级最高的窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300002</td>         <td class="cellrowborder" width="50%">This window state is abnormal. Top window or main window is null or destroyed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300006</td>         <td class="cellrowborder" width="50%">This window context is abnormal.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onWindowStageCreate'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load content for main window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      }</li><li>      windowStage.<span class="hljs-title function_">createSubWindow</span>(<span class="hljs-string">'TestSubWindow'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">subWindow</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">storage</span>: <span class="hljs-title class_">LocalStorage</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalStorage</span>();</li><li>        subWindow.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, storage, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load content for sub window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          }</li><li>          subWindow.<span class="hljs-title function_">showWindow</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getLastWindow</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">topWindow</span>) =&gt;</span> {</li><li>                windowClass = topWindow;</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in obtaining the top window. Window id: <span class="hljs-subst">${topWindow.getWindowProperties().id}</span>`</span>);</li><li>              }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the top window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>              });</li><li>            } <span class="hljs-keyword">catch</span> (exception) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the top window. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>            }</li><li>          });</li><li>        });</li><li>      });</li><li>    });</li><li>  }</li><li>  <span class="hljs-comment">//...</span></li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowshiftappwindowfocus11" device-type="phone,2in1,tablet,wearable,tv">window.shiftAppWindowFocus<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowshiftappwindowfocus11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>shiftAppWindowFocus(sourceWindowId: number, targetWindowId: number): Promise&lt;void&gt;</p>     <p>在同应用内将窗口焦点从源窗口转移到目标窗口，仅支持应用主窗、子窗范围内的焦点转移。使用Promise异步回调。</p>     <p>目标窗口需确保具有获得焦点的能力（可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#setwindowfocusable9">setWindowFocusable()</a>设置），并确保调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#showwindow9">showWindow()</a>成功且执行完毕。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在调用shiftAppWindowFocus()前，建议确保目标窗口已调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#loadcontent9">loadContent()</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#setuicontent9">setUIContent()</a>并生效，否则可能会导致不可见窗口获取焦点，造成功能异常或影响用户体验。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sourceWindowId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源窗口id，必须是获焦状态。推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#getwindowproperties9">getWindowProperties()</a>方法获取窗口id属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">targetWindowId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标窗口id。推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#getwindowproperties9">getWindowProperties()</a>方法获取窗口id属性。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. Failed to call the API due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300002</td>         <td class="cellrowborder" width="50%">This window state is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300004</td>         <td class="cellrowborder" width="50%">Unauthorized operation.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onWindowStageCreate'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">mainWindow</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">subWindow</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">mainWindowId</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">1</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">subWindowId</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">1</span>;</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>      windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load content for main window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        }</li><li>        <span class="hljs-comment">// 获取应用主窗及ID</span></li><li>        windowStage.<span class="hljs-title function_">getMainWindow</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (data == <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to obtain the main window. Cause: The data is empty'</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>          }</li><li>          mainWindow = data;</li><li>          mainWindowId = mainWindow.<span class="hljs-title function_">getWindowProperties</span>().<span class="hljs-property">id</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining the main window'</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the main window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>
</li><li>        <span class="hljs-comment">// 创建或获取子窗及ID，此时子窗口获焦</span></li><li>        windowStage.<span class="hljs-title function_">createSubWindow</span>(<span class="hljs-string">'testSubWindow'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (data == <span class="hljs-literal">null</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to obtain the sub window. Cause: The data is empty'</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>          }</li><li>          subWindow = data;</li><li>          subWindowId = subWindow.<span class="hljs-title function_">getWindowProperties</span>().<span class="hljs-property">id</span>;</li><li>          subWindow.<span class="hljs-title function_">resize</span>(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>);</li><li>          subWindow.<span class="hljs-title function_">setUIContent</span>(<span class="hljs-string">'pages/Index'</span>);</li><li>          subWindow.<span class="hljs-title function_">showWindow</span>();</li><li>
</li><li>          <span class="hljs-comment">// 监听Window状态，确保已经就绪</span></li><li>          subWindow.<span class="hljs-title function_">on</span>(<span class="hljs-string">"windowEvent"</span>, <span class="hljs-function">(<span class="hljs-params">windowEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (windowEvent == <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowEventType</span>.<span class="hljs-property">WINDOW_ACTIVE</span>) {</li><li>              <span class="hljs-comment">// 切换焦点</span></li><li>              <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">shiftAppWindowFocus</span>(subWindowId, mainWindowId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in shifting app window focus'</span>);</li><li>              }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to shift app window focus. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>              });</li><li>            }</li><li>          });</li><li>        });</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to shift app focus. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowshiftappwindowpointerevent15" device-type="phone,2in1,tablet,wearable,tv">window.shiftAppWindowPointerEvent<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowshiftappwindowpointerevent15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>shiftAppWindowPointerEvent(sourceWindowId: number, targetWindowId: number): Promise&lt;void&gt;</p>     <p>主窗口和子窗口可正常调用，用于将鼠标输入事件从源窗口转移到目标窗口。使用Promise异步回调。</p>     <p>源窗口仅在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch#ontouch">onTouch</a>事件（事件类型必须为TouchType.Down）的回调方法中调用此接口才会有鼠标输入事件转移效果，成功调用此接口后，系统会向源窗口补发鼠标按键抬起（TouchType.Up）事件，并且向目标窗口补发鼠标按键按下（TouchType.Down）事件。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>设备行为差异：</strong> 该接口在支持并处于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口" target="_blank">自由窗口</a>状态的设备上可正常调用；在支持但不处于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口" target="_blank">自由窗口</a>状态的设备及不支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口" target="_blank">自由窗口</a>状态的设备上调用返回801错误码。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sourceWindowId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源窗口id。推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#getwindowproperties9">getWindowProperties()</a>方法获取窗口id属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">targetWindowId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标窗口id。推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#getwindowproperties9">getWindowProperties()</a>方法获取窗口id属性。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. Failed to call the API due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300002</td>         <td class="cellrowborder" width="50%">This window state is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300004</td>         <td class="cellrowborder" width="50%">Unauthorized operation.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ets/pages/Index.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Blank</span>(<span class="hljs-string">'160'</span>)</li><li>          .<span class="hljs-title function_">color</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>)</li><li>          .<span class="hljs-title function_">onTouch</span>(<span class="hljs-function">(<span class="hljs-params">event: TouchEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span> === <span class="hljs-title class_">TouchType</span>.<span class="hljs-property">Down</span>) {</li><li>              <span class="hljs-keyword">try</span> {</li><li>                <span class="hljs-keyword">let</span> sourceWindowId = <span class="hljs-number">1</span>;</li><li>                <span class="hljs-keyword">let</span> targetWindowId = <span class="hljs-number">2</span>;</li><li>                <span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">shiftAppWindowPointerEvent</span>(sourceWindowId, targetWindowId);</li><li>                promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in shifting app window pointer event'</span>);</li><li>                }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to shift app window pointer event. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>                });</li><li>              } <span class="hljs-keyword">catch</span> (exception) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to shift app pointer event. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>              }</li><li>            }</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowshiftappwindowtouchevent20" device-type="phone,2in1,tablet,wearable,tv">window.shiftAppWindowTouchEvent<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowshiftappwindowtouchevent20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>shiftAppWindowTouchEvent(sourceWindowId: number, targetWindowId: number, fingerId: number): Promise&lt;void&gt;</p>     <p>主窗口和子窗口可正常调用，用于将触屏输入事件从源窗口转移到目标窗口。使用Promise异步回调。</p>     <p>源窗口仅在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch#ontouch">onTouch</a>事件（事件类型必须为TouchType.Down）的回调方法中调用此接口才会有触屏输入事件转移效果，成功调用此接口后，系统会向源窗口补发触屏抬起（TouchType.Up）事件，并且向目标窗口补发触屏按下（TouchType.Down）事件。</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>设备行为差异：</strong> 该接口在支持并处于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口" target="_blank">自由窗口</a>状态的设备上可正常调用；在支持但不处于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口" target="_blank">自由窗口</a>状态的设备及不支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#自由窗口" target="_blank">自由窗口</a>状态的设备上调用返回801错误码。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sourceWindowId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源窗口id。推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#getwindowproperties9">getWindowProperties()</a>方法获取窗口id属性。该参数应为大于0的整数，小于等于0时会返回错误码1300016。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">targetWindowId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标窗口id。推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#getwindowproperties9">getWindowProperties()</a>方法获取窗口id属性。该参数应为大于0的整数，小于等于0时会返回错误码1300016。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">fingerId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">触屏事件的手指唯一标识符。推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch#touchevent对象说明">TouchEvent</a>对象中touches属性获取id。该参数应为大于等于0的整数，小于0时会返回错误码1300016。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. Function shiftAppWindowTouchEvent can not work correctly due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300002</td>         <td class="cellrowborder" width="50%">This window state is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300004</td>         <td class="cellrowborder" width="50%">Unauthorized operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300016</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Invalid parameter range.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// ets/pages/Index.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Blank</span>(<span class="hljs-string">'160'</span>)</li><li>          .<span class="hljs-title function_">color</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Blue</span>)</li><li>          .<span class="hljs-title function_">onTouch</span>(<span class="hljs-function">(<span class="hljs-params">event: TouchEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-comment">// 源窗口触屏事件类型必须为TouchType.Down</span></li><li>            <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span> === <span class="hljs-title class_">TouchType</span>.<span class="hljs-property">Down</span>) {</li><li>              <span class="hljs-keyword">try</span> {</li><li>                <span class="hljs-keyword">let</span> sourceWindowId = <span class="hljs-number">1</span>;</li><li>                <span class="hljs-keyword">let</span> targetWindowId = <span class="hljs-number">2</span>;</li><li>                <span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">shiftAppWindowTouchEvent</span>(sourceWindowId, targetWindowId, event.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>);</li><li>                promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in shifting app window touch event`</span>);</li><li>                }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to shift app window touch event. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>                });</li><li>              } <span class="hljs-keyword">catch</span> (exception) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to shift app touch event. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>              }</li><li>            }</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgetwindowsbycoordinate14" device-type="phone,2in1,tablet,wearable,tv">window.getWindowsByCoordinate<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgetwindowsbycoordinate14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getWindowsByCoordinate(displayId: number, windowNumber?: number, x?: number, y?: number): Promise&lt;Array&lt;Window&gt;&gt;</p>     <p>查询本应用指定坐标下的可见窗口数组，按当前窗口层级排列，层级最高的窗口对应数组下标为0，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">displayId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">查询窗口所在的displayId，该参数应为整数，传入非整数会忽略掉小数部分，可以在窗口属性<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#windowproperties">WindowProperties</a>中获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">windowNumber</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">查询的窗口数量，该参数应为大于0的整数，传入非整数会忽略掉小数部分，未设置或小于等于0返回所有满足条件的窗口。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">查询的x坐标，以屏幕左上角为原点，该参数应为非负整数，传入非整数会忽略掉小数部分，未设置或小于0返回所有可见窗口。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">查询的y坐标，以屏幕左上角为原点，该参数应为非负整数，传入非整数会忽略掉小数部分，未设置或小于0返回所有可见窗口。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回获取到的窗口对象数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. Failed to call the API due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>             </tbody></table></div>     </div>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> displayId = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getWindowsByCoordinate</span>(displayId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting windows. Data: <span class="hljs-subst">${data}</span>`</span>);</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable language_">window</span> <span class="hljs-keyword">of</span> data) {</li><li>      <span class="hljs-comment">// do something with window</span></li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get window from point. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getWindowsByCoordinate</span>(displayId, <span class="hljs-number">2</span>, <span class="hljs-number">500</span>, <span class="hljs-number">500</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting windows. Data: <span class="hljs-subst">${data}</span>`</span>);</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-variable language_">window</span> <span class="hljs-keyword">of</span> data) {</li><li>      <span class="hljs-comment">// do something with window</span></li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get window from point. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get window from point. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgetallwindowlayoutinfo15" device-type="phone,2in1,tablet,wearable,tv">window.getAllWindowLayoutInfo<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgetallwindowlayoutinfo15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllWindowLayoutInfo(displayId: number): Promise&lt;Array&lt;WindowLayoutInfo&gt;&gt;</p>     <p>获取指定屏幕上可见的窗口布局信息数组，按当前窗口层级排列，层级最高的对应数组index为0，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">displayId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要获取窗口布局信息的displayId，该参数应为整数，且为当前实际存在屏幕的displayId，可以通过窗口属性<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#windowproperties">WindowProperties</a>获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#windowlayoutinfo15">WindowLayoutInfo</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回获取到的窗口布局信息对象数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. function getAllWindowLayoutInfo can not work correctly due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>             </tbody></table></div>     </div>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> displayId = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getAllWindowLayoutInfo</span>(displayId);</li><li>  promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining all window layout info. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain all window layout info. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain all window layout info. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgetvisiblewindowinfo18" device-type="phone,2in1,tablet,wearable,tv">window.getVisibleWindowInfo<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgetvisiblewindowinfo18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getVisibleWindowInfo(): Promise&lt;Array&lt;WindowInfo&gt;&gt;</p>     <p>获取当前屏幕的可见主窗口（未退至后台的主窗口）信息。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>需要权限：</strong> ohos.permission.VISIBLE_WINDOW_INFO</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#windowinfo18">WindowInfo</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回当前可见窗口的相关信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. Function getVisibleWindowInfo can not work correctly due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getVisibleWindowInfo</span>();</li><li>  promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    data.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">windowInfo</span>=&gt;</span>{</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`left:<span class="hljs-subst">${windowInfo.rect.left}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`top:<span class="hljs-subst">${windowInfo.rect.top}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`width:<span class="hljs-subst">${windowInfo.rect.width}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`height:<span class="hljs-subst">${windowInfo.rect.height}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`windowId:<span class="hljs-subst">${windowInfo.windowId}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`windowStatusType:<span class="hljs-subst">${windowInfo.windowStatusType}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`abilityName:<span class="hljs-subst">${windowInfo.abilityName}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`bundleName:<span class="hljs-subst">${windowInfo.bundleName}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`isFocused:<span class="hljs-subst">${windowInfo.isFocused}</span>`</span>);</li><li>    })</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to getWindowInfo. Cause: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get visible window info. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgetglobalwindowmode20" device-type="phone,2in1,tablet,wearable,tv">window.getGlobalWindowMode<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgetglobalwindowmode20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getGlobalWindowMode(displayId?: number): Promise&lt;number&gt;</p>     <p>获取指定屏幕上生命周期位于前台的窗口对应的窗口模式，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">displayId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">可选的屏幕ID，用于获取对应屏幕上的窗口模式信息。该参数应为大于等于0的整数，小于0时会返回错误码1300016，不传或传值为null以及undefined则代表查询所有屏幕，传入非整数会忽略掉小数部分。如果指定的屏幕不存在，返回值为0，推荐使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#getwindowproperties9">getWindowProperties()</a>方法获取窗口所在屏幕ID属性。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回获取到的窗口模式。每一个二进制位代表一种窗口模式，当前支持的窗口模式见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-e#globalwindowmode20">GlobalWindowMode</a>，返回值为对应窗口模式值按位进行或运算的结果。比如，当前屏幕上存在全屏窗口、悬浮窗和画中画三种窗口，则返回值为0b1|0b100|0b1000 = 13。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. function getGlobalWindowMode can not work correctly due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300016</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Invalid parameter range.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> displayId = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getGlobalWindowMode</span>(displayId);</li><li>  promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in obtaining global window mode. Data: <span class="hljs-subst">${data}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain global window mode. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain global window mode. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowsetwatermarkimageforappwindows21" device-type="phone,2in1,tablet,wearable,tv">window.setWatermarkImageForAppWindows<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowsetwatermarkimageforappwindows21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setWatermarkImageForAppWindows(pixelMap: image.PixelMap | undefined): Promise&lt;void&gt;</p>     <p>设置或取消本应用进程下窗口的水印图片，使用Promise异步回调。该接口需要在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#loadcontent9">loadContent()</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window#setuicontent9">setUIContent()</a>调用生效后使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">pixelMap</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">image.PixelMap</a> | undefined</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>传入image.PixelMap表示设置水印图片，传入undefined表示取消水印显示。</p>          <p>如果图片尺寸的宽和高同时超过窗口尺寸以及屏幕尺寸的宽和高，返回错误码1300016。</p>          <p>如果图片尺寸的宽或高超过窗口尺寸的宽或高，超出窗口宽或高的部分会被裁剪。</p>          <p>如果图片尺寸的宽或高小于窗口尺寸的宽或高，小于的部分会自动重复补充。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">错误码 ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. Function setWatermarkImageForAppWindows can not to work correctly due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300016</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Invalid parameter range.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.ImageKit"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.BasicServicesKit"</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">initializationOptions</span>: image.<span class="hljs-property">InitializationOptions</span> = {</li><li>  <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>,</li><li>  <span class="hljs-attr">size</span>: {</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>,</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">6</span>,</li><li>  },</li><li>};</li><li>image.<span class="hljs-title function_">createPixelMap</span>(color, initializationOptions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in creating pixelmap."</span>);</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">setWatermarkImageForAppWindows</span>(pixelMap);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in setting watermark image."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set watermark image. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (exception) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set watermark image. Exception code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create PixelMap. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowsetstartwindowbackgroundcolor20" device-type="phone,2in1,tablet,wearable,tv">window.setStartWindowBackgroundColor<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowsetstartwindowbackgroundcolor20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setStartWindowBackgroundColor(moduleName: string, abilityName: string, color: ColorMetrics): Promise&lt;void&gt;</p>     <p>设置同一应用包名下指定moduleName、abilityName对应UIAbility的启动页背景色，使用Promise异步回调。</p>     <p>该接口对同一应用包名下的所有进程生效，例如多实例或应用分身场景。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">moduleName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要设置的UIAbility所属模块名，moduleName的长度范围为0-200字节，仅支持设置当前同一应用包名内的模块。模块名由开发者在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#配置文件标签" target="_blank">module.json5配置文件</a>中的name字段指定。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">abilityName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要设置的UIAbility名字，abilityName的长度范围为0-200字节，仅支持设置当前同一应用包名内的abilityName。UIAbility名由开发者在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/module-configuration-file#abilities标签" target="_blank">module.json5配置文件abilities标签</a>的name字段指定。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">color</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#colormetrics12">ColorMetrics</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置的启动页背景色。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.function setStartWindowBackgroundColor can not to work correctly due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300016</td>         <td class="cellrowborder" width="50%">Parameter error. Possible cause: 1. Invalid parameter range.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ColorMetrics</span>, <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">setStartWindowBackgroundColor</span>(<span class="hljs-string">"entry"</span>, <span class="hljs-string">"EntryAbility"</span>, <span class="hljs-title class_">ColorMetrics</span>.<span class="hljs-title function_">numeric</span>(<span class="hljs-number">0xff000000</span>));</li><li>  promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting the starting window color.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set the starting window color. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set the starting window color. Cause code: <span class="hljs-subst">${exception.code}</span>, message: <span class="hljs-subst">${exception.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgetallmainwindowinfo21" device-type="phone,2in1,tablet,wearable,tv">window.getAllMainWindowInfo<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgetallmainwindowinfo21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllMainWindowInfo(): Promise&lt;Array&lt;MainWindowInfo&gt;&gt;</p>     <p>获取全部主窗口信息，使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.CUSTOM_SCREEN_CAPTURE</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>设备行为差异：</strong> 该接口在2in1设备中可正常调用，在其他设备中返回801错误码。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#mainwindowinfo21">MainWindowInfo</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回主窗口信息列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. Failed to call the API due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { abilityAccessCtrl, <span class="hljs-title class_">UIAbility</span>, common, <span class="hljs-title class_">Permissions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Ability onWindowStageCreate'</span>);</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load the content. Cause: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>      }</li><li>      <span class="hljs-title function_">reqPermissionsFromUser</span>(permissions, <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in loading the content'</span>);</li><li>    });</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> windowInfoPromise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getAllMainWindowInfo</span>();</li><li>      windowInfoPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">list: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-variable language_">window</span>.MainWindowInfo&gt;</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Get all main window info success.'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Get all main window info failed. Error info: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Get all main window info failed. Cause info: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">permissions</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Permissions</span>&gt; = [<span class="hljs-string">'ohos.permission.CUSTOM_SCREEN_CAPTURE'</span>];</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">reqPermissionsFromUser</span>(<span class="hljs-params">permissions: <span class="hljs-built_in">Array</span>&lt;Permissions&gt;, context: common.UIAbilityContext</span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">atManager</span>: abilityAccessCtrl.<span class="hljs-property">AtManager</span> = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();</li><li>  atManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(context, permissions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'requestPermissionsFromUser'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">grantStatus</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = data.<span class="hljs-property">authResults</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span> = grantStatus.<span class="hljs-property">length</span>;</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {</li><li>      <span class="hljs-keyword">if</span> (grantStatus[i] === <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-comment">// 用户授权</span></li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 用户拒绝授权</span></li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request permission from user. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgetmainwindowsnapshot21" device-type="phone,2in1,tablet,wearable,tv">window.getMainWindowSnapshot<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgetmainwindowsnapshot21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getMainWindowSnapshot(windowId: Array&lt;number&gt;, config: WindowSnapshotConfiguration): Promise&lt;Array&lt;image.PixelMap | undefined&gt;&gt;</p>     <p>获取一个或多个指定windowId的主窗口截图，使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.CUSTOM_SCREEN_CAPTURE</p>     <p><strong>系统能力：</strong> SystemCapability.Window.SessionManager</p>     <p><strong>设备行为差异：</strong> 该接口在2in1设备中可正常调用，在其他设备中返回801错误码。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">windowId</td>         <td class="cellrowborder" width="25%">Array&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要获取截图的主窗口ID列表。可通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowgetallmainwindowinfo21">window.getAllMainWindowInfo()</a>获取到主窗口windowId。当windowId为null、undefined、小于0、存在重复值或数量超过512个时，返回错误码401；当windowId大于0但不存在对应窗口时，返回undefined。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#windowsnapshotconfiguration21">WindowSnapshotConfiguration</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">获取窗口截图时的配置信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">image.PixelMap</a> | undefined&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。截图的PixelMap列表，按传入的窗口ID数组的顺序排列。当窗口ID合法但无法找到对应的主窗口时，返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-window">窗口错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. Failed to call the API due to limited device capabilities.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">1300003</td>         <td class="cellrowborder" width="50%">This window manager service works abnormally.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { abilityAccessCtrl, <span class="hljs-title class_">UIAbility</span>, common, <span class="hljs-title class_">Permissions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-attr">windowStage</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowStage</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Ability onWindowStageCreate'</span>);</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load the content. Cause: JSON.stringify(err)`</span>);</li><li>      }</li><li>      <span class="hljs-title function_">reqPermissionsFromUser</span>(permissions, <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Success in loading the content'</span>);</li><li>    });</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">windowIds</span>: <span class="hljs-built_in">number</span>[] = [];</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">configs</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowSnapshotConfiguration</span> = {</li><li>        <span class="hljs-attr">useCache</span>: <span class="hljs-literal">false</span></li><li>      }</li><li>      <span class="hljs-keyword">let</span> windowInfoPromise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getAllMainWindowInfo</span>();</li><li>      windowInfoPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mainWindowInfoList: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-variable language_">window</span>.MainWindowInfo&gt;</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; mainWindowInfoList.<span class="hljs-property">length</span>; i++) {</li><li>          windowIds[i] = mainWindowInfoList[i].<span class="hljs-property">windowId</span>;</li><li>        }</li><li>        <span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getMainWindowSnapshot</span>(windowIds, configs);</li><li>        promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">list: <span class="hljs-built_in">Array</span>&lt;image.PixelMap | <span class="hljs-literal">undefined</span>&gt;</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; list.<span class="hljs-property">length</span>; i++) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Get main window snapshot, getBytesNumberPerRow: <span class="hljs-subst">${list[i]?.getBytesNumberPerRow()}</span>`</span>);</li><li>          }</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Get main window snapshot failed. Error info: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>        });</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Get all main window info failed. Error info: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Get all main window info failed. Cause info: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">permissions</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Permissions</span>&gt; = [<span class="hljs-string">'ohos.permission.CUSTOM_SCREEN_CAPTURE'</span>];</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">reqPermissionsFromUser</span>(<span class="hljs-params">permissions: <span class="hljs-built_in">Array</span>&lt;Permissions&gt;, context: common.UIAbilityContext</span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">atManager</span>: abilityAccessCtrl.<span class="hljs-property">AtManager</span> = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();</li><li>  atManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(context, permissions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'requestPermissionsFromUser'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">grantStatus</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = data.<span class="hljs-property">authResults</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span> = grantStatus.<span class="hljs-property">length</span>;</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {</li><li>      <span class="hljs-keyword">if</span> (grantStatus[i] === <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-comment">// 用户授权</span></li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 用户拒绝授权</span></li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request permission from user. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowcreatedeprecated" device-type="phone,2in1,tablet,wearable,tv">window.create<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowcreatedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>create(id: string, type: WindowType, callback: AsyncCallback&lt;Window&gt;): void</p>     <p>创建子窗口，使用callback异步回调。</p>     <p>子窗口创建后默认是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#沉浸式布局" target="_blank">沉浸式布局</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 9开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowcreatewindow9">createWindow()</a>。</p>      </div></div></div>     <p><strong>模型约束：</strong> 此接口仅可在FA模型下使用。</p>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口名字，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">Configuration</a>中的name。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-e#windowtype7">WindowType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回当前创建的子窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">'test'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowType</span>.<span class="hljs-property">TYPE_APP</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">errCode</span>: <span class="hljs-built_in">number</span> = err.<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">if</span> (errCode) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create the subWindow. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  windowClass = data;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating the subWindow. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowcreatedeprecated-1" device-type="phone,2in1,tablet,wearable,tv">window.create<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowcreatedeprecated-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>create(id: string, type: WindowType): Promise&lt;Window&gt;</p>     <p>创建子窗口，使用Promise异步回调。</p>     <p>子窗口创建后默认是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/window-terminology#沉浸式布局" target="_blank">沉浸式布局</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 9开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowcreatewindow9-1">createWindow()</a>。</p>      </div></div></div>     <p><strong>模型约束：</strong> 此接口仅可在FA模型下使用。</p>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口名字，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">Configuration</a>中的name。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-e#windowtype7">WindowType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回当前创建的子窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">'test'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowType</span>.<span class="hljs-property">TYPE_APP</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  windowClass = data;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating the subWindow. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create the subWindow. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowcreatedeprecated-2" device-type="phone,2in1,tablet,wearable,tv">window.create<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowcreatedeprecated-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>create(ctx: BaseContext, id: string, type: WindowType, callback: AsyncCallback&lt;Window&gt;): void</p>     <p>创建系统窗口，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 9开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowcreatewindow9">createWindow()</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">ctx</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前应用上下文信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口名字，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">Configuration</a>中的name。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-e#windowtype7">WindowType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回当前创建的子窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">create</span>(globalThis.<span class="hljs-title function_">getContext</span>(), <span class="hljs-string">'test'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowType</span>.<span class="hljs-property">TYPE_SYSTEM_ALERT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">errCode</span>: <span class="hljs-built_in">number</span> = err.<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">if</span> (errCode) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create the window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  windowClass = data;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating the window. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  windowClass.<span class="hljs-title function_">resetSize</span>(<span class="hljs-number">500</span>, <span class="hljs-number">1000</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowcreatedeprecated-3" device-type="phone,2in1,tablet,wearable,tv">window.create<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowcreatedeprecated-3" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>create(ctx: BaseContext, id: string, type: WindowType): Promise&lt;Window&gt;</p>     <p>创建系统窗口，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 9开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowcreatewindow9-1">createWindow()</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">ctx</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前应用上下文信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口名字，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">Configuration</a>中的name。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-e#windowtype7">WindowType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回当前创建的子窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">create</span>(globalThis.<span class="hljs-title function_">getContext</span>(), <span class="hljs-string">'test'</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">WindowType</span>.<span class="hljs-property">TYPE_SYSTEM_ALERT</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  windowClass = data;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating the window. Data:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create the Window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowfinddeprecated" device-type="phone,2in1,tablet,wearable,tv">window.find<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowfinddeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>find(id: string, callback: AsyncCallback&lt;Window&gt;): void</p>     <p>查找id所对应的窗口，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 9开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowfindwindow9">findWindow()</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口名字，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">Configuration</a>中的name。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回当前查找到的窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">find</span>(<span class="hljs-string">'test'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">errCode</span>: <span class="hljs-built_in">number</span> = err.<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">if</span> (errCode) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to find the Window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  windowClass = data;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in finding the window. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowfinddeprecated-1" device-type="phone,2in1,tablet,wearable,tv">window.find<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowfinddeprecated-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>find(id: string): Promise&lt;Window&gt;</p>     <p>查找id所对应的窗口，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 9开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowfindwindow9">findWindow()</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口名字，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#configuration9">Configuration</a>中的name。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回当前查找的窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">find</span>(<span class="hljs-string">'test'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  windowClass = data;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in finding the window. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to find the Window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgettopwindowdeprecated" device-type="phone,2in1,tablet,wearable,tv">window.getTopWindow<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgettopwindowdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTopWindow(callback: AsyncCallback&lt;Window&gt;): void</p>     <p>获取当前应用内最后显示的窗口，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowgetlastwindow9">getLastWindow()</a>。</p>      </div></div></div>     <p><strong>模型约束：</strong> 此接口仅可在FA模型下使用。</p>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回当前应用内最后显示的窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getTopWindow</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, data</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">errCode</span>: <span class="hljs-built_in">number</span> = err.<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">if</span> (errCode) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the top window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  windowClass = data;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining the top window. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgettopwindowdeprecated-1" device-type="phone,2in1,tablet,wearable,tv">window.getTopWindow<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgettopwindowdeprecated-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTopWindow(): Promise&lt;Window&gt;</p>     <p>获取当前应用内最后显示的窗口，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowgetlastwindow9-1">getLastWindow()</a>。</p>      </div></div></div>     <p><strong>模型约束：</strong> 此接口仅可在FA模型下使用。</p>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回当前应用内最后显示的窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getTopWindow</span>();</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>)=&gt;</span> {</li><li>    windowClass = data;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining the top window. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>)=&gt;</span>{</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the top window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgettopwindowdeprecated-2" device-type="phone,2in1,tablet,wearable,tv">window.getTopWindow<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgettopwindowdeprecated-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTopWindow(ctx: BaseContext, callback: AsyncCallback&lt;Window&gt;): void</p>     <p>获取当前应用内最后显示的窗口，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 8开始支持，从API version 9开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowgetlastwindow9">getLastWindow()</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">ctx</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前应用上下文信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回当前应用内最后显示的窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage:<span class="hljs-variable language_">window</span>.WindowStage</span>){</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onWindowStageCreate'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getTopWindow</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">const</span> <span class="hljs-attr">errCode</span>: <span class="hljs-built_in">number</span> = err.<span class="hljs-property">code</span>;</li><li>        <span class="hljs-keyword">if</span>(errCode){</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the top window. Cause code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span> ;</li><li>        }</li><li>        windowClass = data;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining the top window. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span>(error){</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the top window. Cause code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="windowgettopwindowdeprecated-3" device-type="phone,2in1,tablet,wearable,tv">window.getTopWindow<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="windowgettopwindowdeprecated-3" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTopWindow(ctx: BaseContext): Promise&lt;Window&gt;</p>     <p>获取当前应用内最后显示的窗口，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 8开始支持，从API version 9开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-window-f#windowgetlastwindow9-1">getLastWindow()</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.WindowManager.WindowManager.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">ctx</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前应用上下文信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-window">Window</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回当前应用内最后显示的窗口对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-gmn-c106="" class="highlight-div"><div _ngcontent-gmn-c106="" class="highlight-div-header"><div _ngcontent-gmn-c106="" class="highlight-div-header-left"><div _ngcontent-gmn-c106="" class="handle-button expand-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gmn-c106="" class="highlight-div-header-right"><div _ngcontent-gmn-c106="" class="handle-button ai-button"></div><div _ngcontent-gmn-c106="" class="handle-button line-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gmn-c106="" class="handle-button theme-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gmn-c106="" class="handle-button copy-button"><div _ngcontent-gmn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gmn-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage:<span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onWindowStageCreate'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>    <span class="hljs-keyword">let</span> promise = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getTopWindow</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>      windowClass = data;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining the top window. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the top window. Cause code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>