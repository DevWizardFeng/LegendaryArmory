<h1 _ngcontent-qcl-c119="" class="doc-title ng-star-inserted" title="GSPlugin"> GSPlugin </h1>

<div _ngcontent-qcl-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>GSPlugin类封装了与3DGS模型相关的操作，包括模型的ID和加载接口，帮助开发者实现对3DGS模型的自定义功能。</p> <p><strong>系统能力</strong>：SystemCapability.Graphics.SpatialRender</p> <p><strong>起始版本：</strong>6.0.1(21)</p> <div class="tiledSection"><h2 id="section13218152033713" device-type="phone,2in1,tablet,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13218152033713" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-qcl-c106="" class="highlight-div"><div _ngcontent-qcl-c106="" class="highlight-div-header"><div _ngcontent-qcl-c106="" class="highlight-div-header-left"><div _ngcontent-qcl-c106="" class="handle-button expand-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcl-c106="" class="highlight-div-header-right"><div _ngcontent-qcl-c106="" class="handle-button ai-button"></div><div _ngcontent-qcl-c106="" class="handle-button line-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcl-c106="" class="handle-button theme-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcl-c106="" class="handle-button copy-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { spatialRender } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.SpatialReconKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1366217481814" device-type="phone,2in1,tablet,tv">注意事项<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1366217481814" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>调用GSPlugin接口前，必须先加载对应的插件ID，否则会出现未定义的行为。</p> <div _ngcontent-qcl-c106="" class="highlight-div"><div _ngcontent-qcl-c106="" class="highlight-div-header"><div _ngcontent-qcl-c106="" class="highlight-div-header-left"><div _ngcontent-qcl-c106="" class="handle-button expand-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcl-c106="" class="highlight-div-header-right"><div _ngcontent-qcl-c106="" class="handle-button ai-button"></div><div _ngcontent-qcl-c106="" class="handle-button line-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcl-c106="" class="handle-button theme-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcl-c106="" class="handle-button copy-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { spatialRender } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.SpatialReconKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Scene</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> renderContext = <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">getDefaultRenderContext</span>();</li><li><span class="hljs-keyword">if</span> (renderContext != <span class="hljs-literal">null</span>) {</li><li>  renderContext.<span class="hljs-title function_">loadPlugin</span>(spatialRender.<span class="hljs-property">GSPlugin</span>.<span class="hljs-property">PLUGIN_ID</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section139131459153016" device-type="phone,2in1,tablet,tv">常量<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section139131459153016" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p><strong>系统能力</strong>：SystemCapability.Graphics.SpatialRender</p> <p><strong>起始版本：</strong>6.0.1(21)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.1" width="29.67703229677032%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.2" width="11.188881111888811%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.3" width="59.134086591340875%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="29.67703229677032%"><p>PLUGIN_ID</p> </td> <td class="cellrowborder" width="11.188881111888811%"><p>string</p> </td> <td class="cellrowborder" width="59.134086591340875%"><p>表示该类对应的插件ID，。</p> </td> </tr> <tr><td class="cellrowborder" width="29.67703229677032%"><p>RETRO_EFFECT_ID</p> </td> <td class="cellrowborder" width="11.188881111888811%"><p>string</p> </td> <td class="cellrowborder" width="59.134086591340875%"><p>表示复古效果对应的ID。</p> </td> </tr> <tr><td class="cellrowborder" width="29.67703229677032%"><p>COMIC_EFFECT_ID</p> </td> <td class="cellrowborder" width="11.188881111888811%"><p>string</p> </td> <td class="cellrowborder" width="59.134086591340875%"><p>表示漫画效果对应的ID。</p> </td> </tr> <tr><td class="cellrowborder" width="29.67703229677032%"><p>OBRA_DINN_EFFECT_ID</p> </td> <td class="cellrowborder" width="11.188881111888811%"><p>string</p> </td> <td class="cellrowborder" width="59.134086591340875%"><p>表示黑白bit效果对应的ID。</p> </td> </tr> <tr><td class="cellrowborder" width="29.67703229677032%"><p>COLOR_EDITING_EFFECT_ID</p> </td> <td class="cellrowborder" width="11.188881111888811%"><p>string</p> </td> <td class="cellrowborder" width="59.134086591340875%"><p>表示颜色编辑效果对应的ID。</p> </td> </tr>  </tbody></table></div> </div> <p>开发者不需要感知各ID的具体值，推荐直接使用字符串变量。</p> </div> <div class="tiledSection"><h2 id="section75951330135712" device-type="phone,2in1,tablet,tv">loadGSNode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section75951330135712" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>加载3DGS模型。</p> <p><strong>系统能力</strong>：SystemCapability.Graphics.SpatialRender</p> <p><strong>起始版本：</strong>6.0.1(21)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.2.1.5.1.1" width="13.320000000000002%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.2.1.5.1.2" width="25.319999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.2.1.5.1.3" width="7.12%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.2.1.5.1.4" width="54.24%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.320000000000002%"><p>scene</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene" target="_blank">Scene</a></p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>指定在应用界面想要显示的场景，是ArkGraphics 3D基础模块。建议通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene#load" target="_blank">Scene.load</a>来获取。</p> </td> </tr> <tr><td class="cellrowborder" width="13.320000000000002%"><p>params</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/spatial-recon-gsimport">GSImportSettings</a></p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>加载3DGS模型的设置。</p> </td> </tr> <tr><td class="cellrowborder" width="13.320000000000002%"><p>parent</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#node" target="_blank">Node</a></p> </td> <td class="cellrowborder" width="7.12%"><p>否</p> </td> <td class="cellrowborder" width="54.24%"><p>预期挂载3DGS模型的节点。如果不传，加载的3DGS模型会被挂载到Scene的根节点上</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.6.2.1.3.1.1" width="28.050000000000004%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.2.1.3.1.2" width="71.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="28.050000000000004%"><p>Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/spatial-recon-gsnode">GSNode</a>&gt;</p> </td> <td class="cellrowborder" width="71.95%"><p>通过Promise获取3DGS模型对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/spatial-recon-gsnode">GSNode</a>。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>示例：</strong></p> <div _ngcontent-qcl-c106="" class="highlight-div"><div _ngcontent-qcl-c106="" class="highlight-div-header"><div _ngcontent-qcl-c106="" class="highlight-div-header-left"><div _ngcontent-qcl-c106="" class="handle-button expand-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qcl-c106="" class="highlight-div-header-right"><div _ngcontent-qcl-c106="" class="handle-button ai-button"></div><div _ngcontent-qcl-c106="" class="handle-button line-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qcl-c106="" class="handle-button theme-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qcl-c106="" class="handle-button copy-button"><div _ngcontent-qcl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qcl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">Scene</span>, <span class="hljs-variable">RenderContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">spatialRender</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.SpatialReconKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">renderContext</span>: <span class="hljs-title class_">RenderContext</span> | <span class="hljs-title class_">null</span> = <span class="hljs-variable">Scene</span>.<span class="hljs-title function_">getDefaultRenderContext</span>();</li><li>
</li><li><span class="hljs-keyword">if</span> (<span class="hljs-variable">renderContext</span> != <span class="hljs-variable">null</span>) {</li><li>  <span class="hljs-variable">renderContext</span>.<span class="hljs-title function_">loadPlugin</span>(<span class="hljs-variable">spatialRender</span>.<span class="hljs-variable">GSPlugin</span>.<span class="hljs-variable">PLUGIN_ID</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">scene</span> = <span class="hljs-variable">Scene</span>.<span class="hljs-title function_">load</span>().<span class="hljs-title function_">then</span>(<span class="hljs-variable">async</span> (<span class="hljs-variable">scene</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">uri</span> = <span class="hljs-string">"OhosRawFile://assets/gltf/model.glb"</span>; <span class="hljs-comment">//3DGS模型的uri，根据实际情况修改</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">offset</span> = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-variable">gsNodeext</span>: <span class="hljs-title class_">spatialRender</span>.<span class="hljs-title class_">GSNode</span> = <span class="hljs-variable">await</span> <span class="hljs-variable">spatialRender</span>.<span class="hljs-variable">GSPlugin</span>.<span class="hljs-title function_">loadGSNode</span>(<span class="hljs-variable">scene</span>, {<span class="hljs-variable">uri</span>, <span class="hljs-variable">offset</span>}, <span class="hljs-variable">scene</span>.<span class="hljs-variable">root</span>);</li><li>  });</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>