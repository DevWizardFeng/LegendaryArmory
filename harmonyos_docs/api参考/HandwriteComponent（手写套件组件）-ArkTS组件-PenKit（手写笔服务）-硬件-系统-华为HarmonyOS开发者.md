<h1 _ngcontent-qur-c119="" class="doc-title ng-star-inserted" title="HandwriteComponent（手写套件组件）"> HandwriteComponent（手写套件组件） </h1>

<div _ngcontent-qur-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供手写套件组件，组件包含画布和手写工具栏，集成之后可快速实现手写能力。</p>    <p>需要提供手写画布功能入口和回调，画布将在初始化、加载和保存动作完成时触发回调，可以在回调中自定义应用的行为。</p>    <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tiledSection">     <h2 id="section978743772111" device-type="phone,tablet,2in1">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section978743772111" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-qur-c106="" class="highlight-div"><div _ngcontent-qur-c106="" class="highlight-div-header"><div _ngcontent-qur-c106="" class="highlight-div-header-left"><div _ngcontent-qur-c106="" class="handle-button expand-button"><div _ngcontent-qur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qur-c106="" class="highlight-div-header-right"><div _ngcontent-qur-c106="" class="handle-button ai-button"></div><div _ngcontent-qur-c106="" class="handle-button line-button"><div _ngcontent-qur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qur-c106="" class="handle-button theme-button"><div _ngcontent-qur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qur-c106="" class="handle-button copy-button"><div _ngcontent-qur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qur-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">HandwriteController</span></span><span class="">,</span><span class=""><span class="hljs-title class_">HandwriteComponent</span></span><span class="">, </span><span class=""><span class="hljs-title class_">PenHspInfo</span></span><span class="">, </span><span class=""><span class="hljs-title class_">PenType</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.Penkit'</span></span><span class="">;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1814143562119" device-type="phone,tablet,2in1">HandwriteComponent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1814143562119" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>装饰器类型</strong>：@Component</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数</strong>：</p>    </div>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.7.1.6.1.1" width="18.51%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.7.1.6.1.2" width="28.220000000000006%">         <p><strong>类型</strong></p></th>        <th align="left" class="cellrowborder" id="mcps1.3.7.1.6.1.3" width="14.280000000000005%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.7.1.6.1.4" width="9.23%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.7.1.6.1.5" width="29.76%">         <p><strong>说明</strong></p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="18.51%">         <p>handwriteController</p></td>        <td class="cellrowborder" width="28.220000000000006%">         <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-handwritecontroller">HandwriteController</a></p></td>        <td class="cellrowborder" width="14.280000000000005%">         <p>否</p></td>        <td class="cellrowborder" width="9.23%">         <p>否</p></td>        <td class="cellrowborder" width="29.76%">         <p>手写套件功能类实例。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="18.51%">         <p>onInit</p></td>        <td class="cellrowborder" width="28.220000000000006%">         <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecomponent#section165621850195517">InitCallback</a></p></td>        <td class="cellrowborder" width="14.280000000000005%">         <p>否</p></td>        <td class="cellrowborder" width="9.23%">         <p>是</p></td>        <td class="cellrowborder" width="29.76%">         <p>InitCallback：() =&gt; void，套件初始化的回调。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="18.51%">         <p>onScale</p></td>        <td class="cellrowborder" width="28.220000000000006%">         <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecomponent#section675202312586">ScaleCallback</a></p></td>        <td class="cellrowborder" width="14.280000000000005%">         <p>否</p></td>        <td class="cellrowborder" width="9.23%">         <p>是</p></td>        <td class="cellrowborder" width="29.76%">         <p>ScaleCallback：(scale: number) =&gt; void，画布缩放的回调。回调方法的参数是当前画布的缩放值。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="18.51%">         <p>defaultPenType</p></td>        <td class="cellrowborder" width="28.220000000000006%">         <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecomponent#section10728472378">PenType</a></p></td>        <td class="cellrowborder" width="14.280000000000005%">         <p>否</p></td>        <td class="cellrowborder" width="9.23%">         <p>是</p></td>        <td class="cellrowborder" width="29.76%">         <p>设置默认笔刷特性。支持的笔刷有</p>         <ul>          <li>钢笔 - 1</li>          <li>圆珠笔 - 2</li>          <li>铅笔 - 3</li>          <li>马克笔 - 4</li>          <li>荧光笔 - 5</li>          <li>马赛克笔 - 7</li>          <li>橡皮擦 - 8</li>          <li>套索 - 9</li>          <li>激光笔 - 10</li>         </ul>         <p><strong>起始版本</strong>：5.1.0(18)</p></td>       </tr>       <tr>        <td class="cellrowborder" width="18.51%">         <p>defaultPenInfo</p></td>        <td class="cellrowborder" width="28.220000000000006%">         <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecomponent#section13968165173413">PenHspInfo</a>[]</p></td>        <td class="cellrowborder" width="14.280000000000005%">         <p>否</p></td>        <td class="cellrowborder" width="9.23%">         <p>是</p></td>        <td class="cellrowborder" width="29.76%">         <p>设置各笔刷的默认宽度。</p>         <p><strong>起始版本</strong>：5.1.0(18)</p></td>       </tr>       <tr>        <td class="cellrowborder" width="18.51%">         <p>widthRatio</p></td>        <td class="cellrowborder" width="28.220000000000006%">         <p>number</p></td>        <td class="cellrowborder" width="14.280000000000005%">         <p>否</p></td>        <td class="cellrowborder" width="9.23%">         <p>是</p></td>        <td class="cellrowborder" width="29.76%">         <p>画布宽度占比（0-1）</p>         <p><strong>起始版本</strong>：6.0.0(20)</p></td>       </tr>       <tr>        <td class="cellrowborder" width="18.51%">         <p>heightRatio</p></td>        <td class="cellrowborder" width="28.220000000000006%">         <p>number</p></td>        <td class="cellrowborder" width="14.280000000000005%">         <p>否</p></td>        <td class="cellrowborder" width="9.23%">         <p>是</p></td>        <td class="cellrowborder" width="29.76%">         <p>画布高度占比（0-1）</p>         <p><strong>起始版本</strong>：6.0.0(20)</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection">     <h2 id="section145781313597" device-type="phone,tablet,2in1">build<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section145781313597" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>build(): void</p>     <p>struct的默认构造函数，无法直接调用此方法。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tiledSection">     <h2 id="section165621850195517" device-type="phone,tablet,2in1">InitCallback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section165621850195517" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>type InitCallback = () =&gt; void</p>     <p>套件初始化的回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>5.1.0(18)</p>    </div>    <div class="tiledSection">     <h2 id="section675202312586" device-type="phone,tablet,2in1">ScaleCallback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section675202312586" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>type ScaleCallback = (scale: number) =&gt; void</p>     <p>画布缩放的回调。回调方法的参数是当前画布的缩放值。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>5.1.0(18)</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="19.16%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="21.16%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="8.07%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="51.61%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.16%">          <p>scale</p></td>         <td class="cellrowborder" width="21.16%">          <p>number</p></td>         <td class="cellrowborder" width="8.07%">          <p>是</p></td>         <td class="cellrowborder" width="51.61%">          <p>当前画布的缩放值。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section10728472378" device-type="phone,tablet,2in1">PenType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10728472378" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>笔刷枚举类型。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>5.1.0(18)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.4.1.1" width="33.323332333233324%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.4.1.2" width="33.323332333233324%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.4.1.3" width="33.35333533353336%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>PEN</p></td>         <td class="cellrowborder" width="33.323332333233324%">          <p>1</p></td>         <td class="cellrowborder" width="33.35333533353336%">          <p>钢笔。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>BALLPOINT_PEN</p></td>         <td class="cellrowborder" width="33.323332333233324%">          <p>2</p></td>         <td class="cellrowborder" width="33.35333533353336%">          <p>圆珠笔。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>PENCIL</p></td>         <td class="cellrowborder" width="33.323332333233324%">          <p>3</p></td>         <td class="cellrowborder" width="33.35333533353336%">          <p>铅笔。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>MARKER</p></td>         <td class="cellrowborder" width="33.323332333233324%">          <p>4</p></td>         <td class="cellrowborder" width="33.35333533353336%">          <p>马克笔。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>HIGHLIGHTER_BRUSH</p></td>         <td class="cellrowborder" width="33.323332333233324%">          <p>5</p></td>         <td class="cellrowborder" width="33.35333533353336%">          <p>荧光笔。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>MOSAIC</p></td>         <td class="cellrowborder" width="33.323332333233324%">          <p>7</p></td>         <td class="cellrowborder" width="33.35333533353336%">          <p>马赛克笔。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>RUBBER</p></td>         <td class="cellrowborder" width="33.323332333233324%">          <p>8</p></td>         <td class="cellrowborder" width="33.35333533353336%">          <p>橡皮擦。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>LASSO</p></td>         <td class="cellrowborder" width="33.323332333233324%">          <p>9</p></td>         <td class="cellrowborder" width="33.35333533353336%">          <p>套索。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>LASER</p></td>         <td class="cellrowborder" width="33.323332333233324%">          <p>10</p></td>         <td class="cellrowborder" width="33.35333533353336%">          <p>激光笔</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section13968165173413" device-type="phone,tablet,2in1">PenHspInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13968165173413" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>笔刷类型及笔宽。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>5.1.0(18)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.6.1.1" width="23.119999999999997%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.6.1.2" width="23.119999999999997%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.6.1.3" width="12.49%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.6.1.4" width="15.629999999999999%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.6.1.5" width="25.64%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="23.119999999999997%">          <p>penType</p></td>         <td class="cellrowborder" width="23.119999999999997%">          <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecomponent#section10728472378">PenType</a></p></td>         <td class="cellrowborder" width="12.49%">          <p>否</p></td>         <td class="cellrowborder" width="15.629999999999999%">          <p>否</p></td>         <td class="cellrowborder" width="25.64%">          <p>笔刷类型。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="23.119999999999997%">          <p>penWidth</p></td>         <td class="cellrowborder" width="23.119999999999997%">          <p>number</p></td>         <td class="cellrowborder" width="12.49%">          <p>否</p></td>         <td class="cellrowborder" width="15.629999999999999%">          <p>否</p></td>         <td class="cellrowborder" width="25.64%">          <p>笔宽。各笔刷默认笔宽和取值范围如下：</p>          <ul>           <li>钢笔 4(2-10)</li>           <li>圆珠笔 4(2-10)</li>           <li>铅笔 8(4-20)</li>           <li>马克笔 32(16-80)</li>           <li>荧光笔 32(16-80)</li>           <li>马赛克笔 40(8-40)</li>           <li>橡皮擦 50(10-120)</li>           <li>激光笔 20(8-48)</li>          </ul></td>        </tr>             </tbody></table></div>     </div>    </div>    <p><strong>示例</strong>:</p>    <div _ngcontent-qur-c106="" class="highlight-div"><div _ngcontent-qur-c106="" class="highlight-div-header"><div _ngcontent-qur-c106="" class="highlight-div-header-left"><div _ngcontent-qur-c106="" class="handle-button expand-button"><div _ngcontent-qur-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qur-c106="" class="highlight-div-header-right"><div _ngcontent-qur-c106="" class="handle-button ai-button"></div><div _ngcontent-qur-c106="" class="handle-button line-button"><div _ngcontent-qur-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qur-c106="" class="handle-button theme-button"><div _ngcontent-qur-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qur-c106="" class="handle-button copy-button"><div _ngcontent-qur-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qur-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-variable">HandwriteController</span></span><span class="">,</span><span class=""><span class="hljs-variable">HandwriteComponent</span></span><span class="">, </span><span class=""><span class="hljs-variable">PenHspInfo</span></span><span class="">, </span><span class=""><span class="hljs-variable">PenType</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.Penkit'</span></span><span class="">;</span></li><li>
</li><li><span class="">@<span class="hljs-title function_">Entry</span></span></li><li><span class="">@<span class="hljs-title function_">Component</span></span></li><li><span class="hljs-keyword">struct</span> <span class=""><span class="hljs-title class_">HandWriteDemoComp</span> </span><span class="">{</span></li><li>  <span class=""><span class="hljs-variable">controller</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HandwriteController</span> </span><span class="">= </span><span class="hljs-variable">new</span> <span class=""><span class="hljs-title function_">HandwriteController</span></span><span class="">()</span><span class="">;</span></li><li><span class="">  <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">根据应用存储规则，获取到手写文件保存的路径，此处仅为实例参考</span></span></li><li>  <span class=""><span class="hljs-variable">initPath</span></span><span class="">: </span><span class=""><span class="hljs-title class_">string</span> </span><span class="">= </span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-title function_">getUIContext</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">()</span><span class="">?.</span><span class=""><span class="hljs-variable">filesDir</span> </span><span class="">+ </span><span class=""><span class="hljs-string">'/aa'</span></span><span class="">;</span></li><li>  <span class=""><span class="hljs-variable">penWidth</span></span><span class="">: </span><span class=""><span class="hljs-title class_">number</span> </span><span class="">= </span><span class=""><span class="hljs-number">5</span></span><span class="">;</span></li><li>  <span class=""><span class="hljs-variable">ballpointPenWidth</span></span><span class="">: </span><span class=""><span class="hljs-title class_">number</span> </span><span class="">= </span><span class=""><span class="hljs-number">6</span></span><span class="">;</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">aboutToAppear</span></span><span class="">() </span><span class="">{</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">加载时设置保存动作完成后的回调。</span></span></li><li>    <span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">controller</span></span><span class="">.</span><span class=""><span class="hljs-title function_">onLoad</span></span><span class="">(</span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">callback</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span></li><li>
</li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">手写文件内容加载完毕渲染上屏后的回调</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">通知接入用户</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">可在此处进行自定义行为</span></span></li><li>  <span class=""><span class="hljs-variable">callback</span> </span><span class="">= </span><span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义行为</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">例如文件加载完毕后展示用户操作指导</span></span></li><li>  <span class="">}</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">build</span></span><span class="">() </span><span class="">{</span></li><li>    <span class=""><span class="hljs-title function_">Row</span></span><span class="">() </span><span class="">{</span></li><li>      <span class=""><span class="hljs-title function_">Stack</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-variable">alignContent</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Alignment</span></span><span class="">.</span><span class=""><span class="hljs-title class_">TopStart</span> </span><span class="">}</span><span class="">) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-title function_">HandwriteComponent</span></span><span class="">(</span><span class="">{</span></li><li>          <span class=""><span class="hljs-variable">handwriteController</span></span><span class="">: </span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-title class_">controller</span></span><span class="">,</span></li><li>          <span class=""><span class="hljs-variable">defaultPenType</span></span><span class="">: </span><span class=""><span class="hljs-title class_">PenType</span></span><span class="">.</span><span class=""><span class="hljs-title class_">PEN</span></span><span class="">, </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">可选属性，默认笔刷</span></span></li><li>          <span class=""><span class="hljs-variable">defaultPenInfo</span></span><span class="">: </span><span class="">[</span><span class="">{ </span><span class=""><span class="hljs-variable">penType</span></span><span class="">: </span><span class=""><span class="hljs-title class_">PenType</span></span><span class="">.</span><span class=""><span class="hljs-title class_">PEN</span></span><span class="">, </span><span class=""><span class="hljs-variable">penWidth</span></span><span class="">: </span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-title class_">penWidth</span> </span><span class="">}</span><span class="">,</span></li><li>            <span class="">{ </span><span class=""><span class="hljs-variable">penType</span></span><span class="">: </span><span class=""><span class="hljs-title class_">PenType</span></span><span class="">.</span><span class=""><span class="hljs-title class_">BALLPOINT_PEN</span></span><span class="">, </span><span class=""><span class="hljs-variable">penWidth</span></span><span class="">: </span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-title class_">ballpointPenWidth</span> </span><span class="">}</span><span class="">] </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-variable">PenHspInfo</span></span><span class="">[]</span><span class="">, </span><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">可选属性，各笔刷的默认宽度</span></span></li><li>          <span class=""><span class="hljs-variable">widthRatio</span></span><span class="">: </span><span class=""><span class="hljs-number">1</span></span><span class="">,</span>   <span class="hljs-comment">//</span><span class=""><span class="hljs-comment">可选属性，</span></span><span class="hljs-comment">自定义画布大小，宽度占比（0-1）。</span></li><li>          <span class=""><span class="hljs-variable">heightRatio</span></span><span class="">: </span><span class=""><span class="hljs-number">1</span></span><span class="">,</span>  <span class="hljs-comment">//</span><span class=""><span class="hljs-comment">可选属性，</span></span><span class="hljs-comment">自定义画布大小，高度占比（0-1）。</span></li><li>          <span class=""><span class="hljs-variable">onInit</span></span><span class="">: </span><span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">画布初始化完成时的回调。此时可以调用接口加载和显示笔记内容</span></span></li><li>            <span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">controller</span></span><span class="">?.</span><span class=""><span class="hljs-title function_">load</span></span><span class="">(</span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">initPath</span></span><span class="">)</span><span class="">;</span></li><li>          <span class="">}</span><span class="">,</span></li><li>          <span class=""><span class="hljs-variable">onScale</span></span><span class="">: </span><span class="">(</span><span class=""><span class="hljs-variable">scale</span></span><span class="">: </span><span class=""><span class="hljs-title class_">number</span></span><span class="">) </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">画布缩放时的回调方法，将返回当前手写控件的缩放比例，可在此处进行自定义行为。</span></span></li><li>          <span class="">}</span></li><li><span class="">        }</span><span class="">)</span></li><li>        <span class=""><span class="hljs-title function_">Button</span></span><span class="">(</span><span class=""><span class="hljs-string">"save"</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">onClick</span></span><span class="">(</span><span class="hljs-variable">async</span> <span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>           <span class=""> <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">需根据应用存储规则，获取到手写文件保存的路径，此处仅为实例参考</span></span><span class="hljs-comment">。</span></li><li>            <span class="hljs-keyword">const</span> <span class=""><span class="hljs-variable">path</span> </span><span class="">= </span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-title function_">getUIContext</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">()</span><span class="">?.</span><span class=""><span class="hljs-variable">filesDir</span> </span><span class="">+ </span><span class=""><span class="hljs-string">'/aa'</span></span><span class="">;</span></li><li>            <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">controller</span></span><span class="">?.</span><span class=""><span class="hljs-title function_">save</span></span><span class="">(</span><span class=""><span class="hljs-variable">path</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-keyword">catch</span></span><span class="">((</span><span class=""><span class="hljs-variable">error</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Error</span></span><span class="">) </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>              <span class=""><span class="hljs-variable">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"err</span></span><span class=""><span class="hljs-string">：</span></span><span class=""><span class="hljs-string">"</span> </span><span class="">+ </span><span class=""><span class="hljs-variable">error</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span></li><li>            <span class="hljs-comment">// 获取缩略图。</span></li><li>            <span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">controller</span></span><span class="">.</span><span class=""><span class="hljs-title function_">getThumbnail</span></span><span class="">(</span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">controller</span></span><span class="">?.</span><span class=""><span class="hljs-title function_">getContentRange</span></span><span class="">())</span><span class="">?.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">((</span><span class=""><span class="hljs-variable">pixelMap</span></span><span class="">: </span><span class=""><span class="hljs-title class_">PixelMap</span></span><span class="">) </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>              <span class="hljs-keyword">if</span> <span class="">(</span><span class=""><span class="hljs-variable">pixelMap</span></span><span class="">) </span><span class="">{</span></li><li>                <span class=""><span class="hljs-variable">pixelMap</span></span><span class="">.</span><span class=""><span class="hljs-title function_">release</span></span><span class="">()</span></li><li>                <span class=""><span class="hljs-variable">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'getThumbnail success'</span></span><span class="">)</span></li><li>              <span class="">}</span></li><li><span class="">            }</span><span class="">)</span></li><li>          <span class="">}</span><span class="">)</span></li><li>      <span class="">}</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">width</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>    <span class="">}</span></li><li>    <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li></ol></pre></div></div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>HandwriteController中的方法需要放在上述示例的画布控件初始化的回调中运行或自定义的方法中运行。</p>      <p>使用前需要先<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/pen-suite#section151484318552" target="_blank">设置context信息</a>。</p>      <p>完整示例代码可参考<a href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_PenKit-Next-Easy" target="_blank">手写笔服务（ArkTS）</a>。</p>     </div></div></div>   </div>   <div></div></div>