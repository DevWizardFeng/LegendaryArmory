<h1 _ngcontent-gco-c119="" class="doc-title ng-star-inserted" title="HandwriteController (手写套件功能)"> HandwriteController (手写套件功能) </h1>

<div _ngcontent-gco-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>手写套件的主要功能入口类，包含手写能力的主要方法。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tiledSection">     <h2 id="section82301618122011" device-type="phone,tablet,2in1">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section82301618122011" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-gco-c106="" class="highlight-div"><div _ngcontent-gco-c106="" class="highlight-div-header"><div _ngcontent-gco-c106="" class="highlight-div-header-left"><div _ngcontent-gco-c106="" class="handle-button expand-button"><div _ngcontent-gco-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gco-c106="" class="highlight-div-header-right"><div _ngcontent-gco-c106="" class="handle-button ai-button"></div><div _ngcontent-gco-c106="" class="handle-button line-button"><div _ngcontent-gco-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gco-c106="" class="handle-button theme-button"><div _ngcontent-gco-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gco-c106="" class="handle-button copy-button"><div _ngcontent-gco-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gco-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HandwriteController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.Penkit'</span>;</li></ol></pre></div></div>    </div>    <p>本模块提供以下方法，完成手写内容的加载和保存等功能。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.7.1.3.1.1" width="43.120000000000005%">         <p>方法名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.7.1.3.1.2" width="56.879999999999995%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="43.120000000000005%">         <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecontroller#section81796536265">load</a></p></td>        <td class="cellrowborder" width="56.879999999999995%">         <p>从指定路径加载笔记文件。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="43.120000000000005%">         <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecontroller#section1858041418291">save</a></p></td>        <td class="cellrowborder" width="56.879999999999995%">         <p>保存手写内容。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="43.120000000000005%">         <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecontroller#section759192934316">onLoad</a></p></td>        <td class="cellrowborder" width="56.879999999999995%">         <p>加载完成时的回调接口。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="43.120000000000005%">         <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecontroller#section2152194517128">getContentRange</a></p></td>        <td class="cellrowborder" width="56.879999999999995%">         <p>获取笔迹范围。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="43.120000000000005%">         <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecontroller#section1464912012163">getThumbnail</a></p></td>        <td class="cellrowborder" width="56.879999999999995%">         <p>获取缩略图数据。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection">     <h2 id="section81796536265" device-type="phone,tablet,2in1">load<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section81796536265" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>load(path: string): void</p>     <p>从指定路径加载笔记文件，调用时机：手写套件初始化之后。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.1" width="25%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.2" width="25%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.3" width="25%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.5.1.4" width="25%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="25%">         <p>path</p></td>        <td class="cellrowborder" width="25%">         <p>string</p></td>        <td class="cellrowborder" width="25%">         <p>是</p></td>        <td class="cellrowborder" width="25%">         <p>加载文件的路径。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码</strong>：</p>    <div class="p">     以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-error-code">ArkTS API 错误码</a>。      <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.3.1.1" width="30%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.2.1.3.1.2" width="70%">          <p>错误信息（此处仅提供错误抛出的关键信息）</p></th>        </tr><tr>         <td class="cellrowborder" width="30%">          <p>1010400001</p></td>         <td class="cellrowborder" width="70%">          <p>load filed.</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <p><strong>示例</strong>：</p>    <p>具体代码示例见<a href="/consumer/cn/doc/harmonyos-references/pen-handwritecontroller#section759192934316">onLoad</a>示例。</p>    <div class="tiledSection">     <h2 id="section1858041418291" device-type="phone,tablet,2in1">save<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1858041418291" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>save(path: string): Promise&lt;void&gt;</p>     <p>保存笔记到指定路径，使用Promise异步回调。调用时机：手写套件加载完之后。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>path</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>保存文件的路径。</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>返回值</strong>:       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.3.1.1" width="28.050000000000004%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.3.1.2" width="71.95%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="28.050000000000004%">           <p>Promise&lt;void&gt;</p></td>          <td class="cellrowborder" width="71.95%">           <p>无返回结果的Promise对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-error-code">ArkTS API 错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.15.11.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.11.2.1.3.1.2" width="70%">           <p>错误信息（此处仅提供错误抛出的关键信息）</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>1010400002</p></td>          <td class="cellrowborder" width="70%">           <p>save filed.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>示例</strong>：</p>     <p>具体代码示例见<a href="/consumer/cn/doc/harmonyos-references/pen-handwritecontroller#section759192934316">onLoad</a>示例。</p>    </div>    <div class="tiledSection">     <h2 id="section759192934316" device-type="phone,tablet,2in1">onLoad<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section759192934316" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onLoad(callback: AsyncCallback&lt;string&gt;): void</p>     <p>注册回调，加载完成后将会触发此回调，使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>callback</p></td>         <td class="cellrowborder" width="25%">          <p>AsyncCallback&lt;string&gt;</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>回调函数。当加载成功时，err的message为load success；加载失败时，err的message为load failed；string为加载的路径。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-error-code">ArkTS API 错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.16.10.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.16.10.2.1.3.1.2" width="70%">           <p>错误信息（此处仅提供错误抛出的关键信息）</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>1010400001</p></td>          <td class="cellrowborder" width="70%">           <p>load filed.</p></td>         </tr>               </tbody></table></div>      </div>     </div>    </div>    <div class="tiledSection">     <h2 id="section2152194517128" device-type="phone,tablet,2in1">getContentRange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2152194517128" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getContentRange(): Rect</p>     <p>获取笔迹范围。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <div class="p">      <strong>返回值</strong>:       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.3.1.1" width="28.050000000000004%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.3.1.2" width="71.95%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="28.050000000000004%">           <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecontroller#section10728472378">Rect</a></p></td>          <td class="cellrowborder" width="71.95%">           <p>Rect信息参数，表示内容涵盖的矩形区域。</p></td>         </tr>               </tbody></table></div>      </div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1464912012163" device-type="phone,tablet,2in1">getThumbnail<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1464912012163" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getThumbnail(rect: Rect): Promise&lt;PixelMap&gt;</p>     <p>获取缩略图数据。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>rect</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/pen-handwritecontroller#section10728472378">Rect</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>Rect信息参数，表示缩略图包含的矩形区域。</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.18.9.2.1.3.1.1" width="28.050000000000004%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.18.9.2.1.3.1.2" width="71.95%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="28.050000000000004%">           <p>Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">PixelMap</a>&gt;</p></td>          <td class="cellrowborder" width="71.95%">           <p>缩略图的数据。</p></td>         </tr>               </tbody></table></div>      </div>     </div>    </div>    <div class="tiledSection">     <h2 id="section10728472378" device-type="phone,tablet,2in1">Rect<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10728472378" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>Rect信息参数，表示矩形区域。</p>     <p><strong>系统能力：</strong>SystemCapability.Stylus.Handwrite</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.1" width="33.323332333233324%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.2" width="21.71217121712171%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.3" width="44.96449644964496%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>left</p></td>         <td class="cellrowborder" width="21.71217121712171%">          <p>number</p></td>         <td class="cellrowborder" width="44.96449644964496%">          <p>矩形左侧的位置。单位：手写套件组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-handwritecomponent">HandwriteComponent</a>宽度的1/1000。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>top</p></td>         <td class="cellrowborder" width="21.71217121712171%">          <p>number</p></td>         <td class="cellrowborder" width="44.96449644964496%">          <p>矩形顶部的位置。单位：手写套件组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-handwritecomponent">HandwriteComponent</a>宽度的1/1000。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>right</p></td>         <td class="cellrowborder" width="21.71217121712171%">          <p>number</p></td>         <td class="cellrowborder" width="44.96449644964496%">          <p>矩形右侧的位置。单位：手写套件组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-handwritecomponent">HandwriteComponent</a>宽度的1/1000。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.323332333233324%">          <p>bottom</p></td>         <td class="cellrowborder" width="21.71217121712171%">          <p>number</p></td>         <td class="cellrowborder" width="44.96449644964496%">          <p>矩形底部的位置。单位：手写套件组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pen-handwritecomponent">HandwriteComponent</a>宽度的1/1000。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="p">     <strong>示例：</strong>     <div _ngcontent-gco-c106="" class="highlight-div"><div _ngcontent-gco-c106="" class="highlight-div-header"><div _ngcontent-gco-c106="" class="highlight-div-header-left"><div _ngcontent-gco-c106="" class="handle-button expand-button"><div _ngcontent-gco-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gco-c106="" class="highlight-div-header-right"><div _ngcontent-gco-c106="" class="handle-button ai-button"></div><div _ngcontent-gco-c106="" class="handle-button line-button"><div _ngcontent-gco-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gco-c106="" class="handle-button theme-button"><div _ngcontent-gco-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gco-c106="" class="handle-button copy-button"><div _ngcontent-gco-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gco-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-variable">HandwriteController</span></span><span class="">, </span><span class=""><span class="hljs-variable">HandwriteComponent</span></span><span class="">, </span><span class=""><span class="hljs-variable">PenType</span></span><span class="">, </span><span class=""><span class="hljs-variable">PenHspInfo</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.Penkit'</span></span><span class="">;</span></li><li>
</li><li><span class="">@<span class="hljs-title function_">Entry</span></span></li><li><span class="">@<span class="hljs-title function_">Component</span></span></li><li><span class="hljs-keyword">struct</span> <span class=""><span class="hljs-title class_">HandWriteDemoComp</span> </span><span class="">{</span></li><li>  <span class=""><span class="hljs-variable">controller</span></span><span class="">: </span><span class=""><span class="hljs-title class_">HandwriteController</span> </span><span class="">= </span><span class="hljs-variable">new</span> <span class=""><span class="hljs-title function_">HandwriteController</span></span><span class="">()</span><span class="">;</span></li><li><span class="">  <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">根据应用存储规则，获取到手写文件保存的路径，此处仅为实例参考</span></span></li><li>  <span class=""><span class="hljs-variable">initPath</span></span><span class="">: </span><span class=""><span class="hljs-title class_">string</span> </span><span class="">= </span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-title function_">getUIContext</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">()</span><span class="">?.</span><span class=""><span class="hljs-variable">filesDir</span> </span><span class="">+ </span><span class=""><span class="hljs-string">'/aa'</span></span><span class="">;</span></li><li>  <span class=""><span class="hljs-variable">penWidth</span></span><span class="">: </span><span class=""><span class="hljs-title class_">number</span> </span><span class="">= </span><span class=""><span class="hljs-number">5</span></span><span class="">;</span></li><li>  <span class=""><span class="hljs-variable">ballpointPenWidth</span></span><span class="">: </span><span class=""><span class="hljs-title class_">number</span> </span><span class="">= </span><span class=""><span class="hljs-number">6</span></span><span class="">;</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">aboutToAppear</span></span><span class="">() </span><span class="">{</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">加载时设置保存动作完成后的回调。</span></span></li><li>    <span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">controller</span></span><span class="">.</span><span class=""><span class="hljs-title function_">onLoad</span></span><span class="">(</span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">callback</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span></li><li>
</li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">手写文件内容加载完毕渲染上屏后的回调</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">通知接入用户</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">可在此处进行自定义行为</span></span></li><li>  <span class=""><span class="hljs-variable">callback</span> </span><span class="">= </span><span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">自定义行为</span></span><span class=""><span class="hljs-comment">,</span></span><span class=""><span class="hljs-comment">例如文件加载完毕后展示用户操作指导</span></span></li><li>  <span class="">}</span></li><li>
</li><li>  <span class=""><span class="hljs-title function_">build</span></span><span class="">() </span><span class="">{</span></li><li>    <span class=""><span class="hljs-title function_">Row</span></span><span class="">() </span><span class="">{</span></li><li>      <span class=""><span class="hljs-title function_">Stack</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-variable">alignContent</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Alignment</span></span><span class="">.</span><span class=""><span class="hljs-title class_">TopStart</span> </span><span class="">}</span><span class="">) </span><span class="">{</span></li><li>        <span class=""><span class="hljs-title function_">HandwriteComponent</span></span><span class="">(</span><span class="">{</span></li><li>          <span class=""><span class="hljs-variable">handwriteController</span></span><span class="">: </span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-title class_">controller</span></span><span class="">,</span></li><li>          <span class=""><span class="hljs-variable">defaultPenType</span></span><span class="">: </span><span class=""><span class="hljs-title class_">PenType</span></span><span class="">.</span><span class=""><span class="hljs-title class_">PEN</span></span><span class="">, </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">可选属性，默认笔刷</span></span></li><li>          <span class=""><span class="hljs-variable">defaultPenInfo</span></span><span class="">: </span><span class="">[</span><span class="">{ </span><span class=""><span class="hljs-variable">penType</span></span><span class="">: </span><span class=""><span class="hljs-title class_">PenType</span></span><span class="">.</span><span class=""><span class="hljs-title class_">PEN</span></span><span class="">, </span><span class=""><span class="hljs-variable">penWidth</span></span><span class="">: </span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-title class_">penWidth</span> </span><span class="">}</span><span class="">,</span></li><li>            <span class="">{ </span><span class=""><span class="hljs-variable">penType</span></span><span class="">: </span><span class=""><span class="hljs-title class_">PenType</span></span><span class="">.</span><span class=""><span class="hljs-title class_">BALLPOINT_PEN</span></span><span class="">, </span><span class=""><span class="hljs-variable">penWidth</span></span><span class="">: </span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-title class_">ballpointPenWidth</span> </span><span class="">}</span><span class="">] </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-variable">PenHspInfo</span></span><span class="">[]</span><span class="">, </span><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">可选属性，各笔刷的默认宽度</span></span></li><li>          <span class=""><span class="hljs-variable">widthRatio</span></span><span class="">: </span><span class=""><span class="hljs-number">1</span></span><span class="">,</span>  <span class="hljs-comment">//</span><span class=""><span class="hljs-comment">可选属性，</span></span><span class="hljs-comment">自定义画布大小，宽度占比（0-1）。</span></li><li>          <span class=""><span class="hljs-variable">heightRatio</span></span><span class="">: </span><span class=""><span class="hljs-number">1</span></span><span class="">,</span>  <span class="hljs-comment">//</span><span class=""><span class="hljs-comment">可选属性，</span></span><span class="hljs-comment">自定义画布大小，高度占比（0-1）。</span></li><li>          <span class=""><span class="hljs-variable">onInit</span></span><span class="">: </span><span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">画布初始化完成时的回调。此时可以调用接口加载和显示笔记内容</span></span></li><li>            <span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">controller</span></span><span class="">?.</span><span class=""><span class="hljs-title function_">load</span></span><span class="">(</span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">initPath</span></span><span class="">)</span><span class="">;</span></li><li>          <span class="">}</span><span class="">,</span></li><li>          <span class=""><span class="hljs-variable">onScale</span></span><span class="">: </span><span class="">(</span><span class=""><span class="hljs-variable">scale</span></span><span class="">: </span><span class=""><span class="hljs-title class_">number</span></span><span class="">) </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">画布缩放时的回调方法，将返回当前手写控件的缩放比例，可在此处进行自定义行为。</span></span></li><li>          <span class="">}</span></li><li><span class="">        }</span><span class="">)</span></li><li>        <span class=""><span class="hljs-title function_">Button</span></span><span class="">(</span><span class=""><span class="hljs-string">"save"</span></span><span class="">)</span></li><li>          <span class="">.</span><span class=""><span class="hljs-title function_">onClick</span></span><span class="">(</span><span class="hljs-variable">async</span> <span class="">() </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>            <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">需根据应用存储规则，获取到手写文件保存的路径，此处仅为实例参考。</span></span></li><li>            <span class="hljs-keyword">const</span> <span class=""><span class="hljs-variable">path</span> </span><span class="">= </span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-title function_">getUIContext</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">()</span><span class="">?.</span><span class=""><span class="hljs-variable">filesDir</span> </span><span class="">+ </span><span class=""><span class="hljs-string">'/aa'</span></span><span class="">;</span></li><li>            <span class="hljs-variable">await</span> <span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">controller</span></span><span class="">?.</span><span class=""><span class="hljs-title function_">save</span></span><span class="">(</span><span class=""><span class="hljs-variable">path</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-keyword">catch</span></span><span class="">((</span><span class=""><span class="hljs-variable">error</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Error</span></span><span class="">) </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>              <span class=""><span class="hljs-variable">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"err</span></span><span class=""><span class="hljs-string">：</span></span><span class=""><span class="hljs-string">"</span> </span><span class="">+ </span><span class=""><span class="hljs-variable">error</span></span><span class="">)</span><span class="">;</span></li><li>            <span class="">}</span><span class="">)</span></li><li>            <span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">controller</span></span><span class="">.</span><span class=""><span class="hljs-title function_">getThumbnail</span></span><span class="">(</span><span class="hljs-keyword">this</span><span class="">.</span><span class=""><span class="hljs-variable">controller</span></span><span class="">?.</span><span class=""><span class="hljs-title function_">getContentRange</span></span><span class="">())</span><span class="">?.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">((</span><span class=""><span class="hljs-variable">pixelMap</span></span><span class="">: </span><span class=""><span class="hljs-title class_">PixelMap</span></span><span class="">) </span><span class="">=</span><span class="">&gt;</span> <span class="">{</span></li><li>              <span class="hljs-keyword">if</span> <span class="">(</span><span class=""><span class="hljs-variable">pixelMap</span></span><span class="">) </span><span class="">{</span></li><li>                <span class=""><span class="hljs-variable">pixelMap</span></span><span class="">.</span><span class=""><span class="hljs-title function_">release</span></span><span class="">()</span></li><li>                <span class=""><span class="hljs-variable">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'getThumbnail success'</span></span><span class="">)</span></li><li>              <span class="">}</span></li><li><span class="">            }</span><span class="">)</span></li><li>          <span class="">}</span><span class="">)</span></li><li>      <span class="">}</span></li><li>      <span class="">.</span><span class=""><span class="hljs-title function_">width</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>    <span class="">}</span></li><li>    <span class="">.</span><span class=""><span class="hljs-title function_">height</span></span><span class="">(</span><span class=""><span class="hljs-string">'100%'</span></span><span class="">)</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li></ol></pre></div></div>    </div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>HandwriteController中的方法需要放在上述示例的画布控件初始化的回调中运行或自定义的方法中运行。</p>      <p>使用前需要先<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/pen-suite#section151484318552" target="_blank">设置context信息</a>。</p>      <p>完整示例代码可参考<a href="https://developer.huawei.com/consumer/cn/codelabsPortal/carddetails/tutorials_PenKit-Next-Easy" target="_blank">手写笔服务（ArkTS）</a>。</p>     </div></div></div>   </div>   <div></div></div>