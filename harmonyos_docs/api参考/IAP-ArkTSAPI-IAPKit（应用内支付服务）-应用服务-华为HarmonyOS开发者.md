<h1 _ngcontent-cre-c119="" class="doc-title ng-star-inserted" title="IAP"> IAP </h1>

<div _ngcontent-cre-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>本模块提供应用内支付的能力。</p>    <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p>    <p><strong>起始版本：</strong>4.0.0(10)</p>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="section41484152321" device-type="phone,tablet,2in1,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section41484152321" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 732px;">     <h2 id="section59035422210" device-type="phone,tablet,2in1,wearable,tv">ProductType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section59035422210" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>商品类型。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.4.1.1" width="27.900000000000002%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.4.1.2" width="12.43%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.4.1.3" width="59.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>CONSUMABLE</p></td>         <td class="cellrowborder" width="12.43%">          <p>0</p></td>         <td class="cellrowborder" width="59.67%">          <p>消耗型商品。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>NONCONSUMABLE</p></td>         <td class="cellrowborder" width="12.43%">          <p>1</p></td>         <td class="cellrowborder" width="59.67%">          <p>非消耗型商品。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>AUTORENEWABLE</p></td>         <td class="cellrowborder" width="12.43%">          <p>2</p></td>         <td class="cellrowborder" width="59.67%">          <p>自动续期订阅商品。</p>          <p>该属性不支持Wearable设备。</p>          <p><strong>起始版本：</strong>4.1.0(11)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>NONRENEWABLE</p></td>         <td class="cellrowborder" width="12.43%">          <p>3</p></td>         <td class="cellrowborder" width="59.67%">          <p>非续期订阅商品。</p>          <p>该属性不支持Wearable设备。</p>          <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p>          <p><strong>起始版本：</strong>5.0.2(14)</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 615px;">     <h2 id="section1389262216514" device-type="phone,tablet,2in1,wearable,tv">PurchaseQueryType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1389262216514" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>查询购买信息的类型。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.4.1.1" width="27.900000000000002%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.4.1.2" width="12.43%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.4.1.3" width="59.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>ALL</p></td>         <td class="cellrowborder" width="12.43%">          <p>0</p></td>         <td class="cellrowborder" width="59.67%">          <p>所有历史购买记录，包括消耗型商品、非消耗型商品、自动续期订阅商品和非续期订阅商品。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>UNFINISHED</p></td>         <td class="cellrowborder" width="12.43%">          <p>1</p></td>         <td class="cellrowborder" width="59.67%">          <p>已购买但未交付的消耗型商品、非消耗型商品、自动续期订阅商品和非续期订阅商品。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>CURRENT_ENTITLEMENT</p></td>         <td class="cellrowborder" width="12.43%">          <p>2</p></td>         <td class="cellrowborder" width="59.67%">          <p>已购非消耗型商品和当前生效的自动续期订阅商品。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 657px;">     <h2 id="section3468210113210" device-type="phone,tablet,2in1,wearable,tv">PeriodUnit<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3468210113210" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>自动续期订阅商品的周期单位。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.4.1.1" width="27.87%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.4.1.2" width="12.46%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.4.1.3" width="59.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="27.87%">          <p>DAY</p></td>         <td class="cellrowborder" width="12.46%">          <p>0</p></td>         <td class="cellrowborder" width="59.67%">          <p>天。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.87%">          <p>WEEK</p></td>         <td class="cellrowborder" width="12.46%">          <p>1</p></td>         <td class="cellrowborder" width="59.67%">          <p>周。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.87%">          <p>MONTH</p></td>         <td class="cellrowborder" width="12.46%">          <p>2</p></td>         <td class="cellrowborder" width="59.67%">          <p>月。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.87%">          <p>YEAR</p></td>         <td class="cellrowborder" width="12.46%">          <p>3</p></td>         <td class="cellrowborder" width="59.67%">          <p>年。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.87%">          <p>MINUTE</p></td>         <td class="cellrowborder" width="12.46%">          <p>4</p></td>         <td class="cellrowborder" width="59.67%">          <p>分（预留参数，暂未支持）。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 684px;">     <h2 id="section23427243315" device-type="phone,tablet,2in1,wearable,tv">OfferPaymentMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section23427243315" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>促销的付费方式。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.4.1.1" width="27.900000000000002%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.4.1.2" width="12.43%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.4.1.3" width="59.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>FREE_TRIAL</p></td>         <td class="cellrowborder" width="12.43%">          <p>1</p></td>         <td class="cellrowborder" width="59.67%">          <p>免费试用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>PAY_AS_YOU_GO</p></td>         <td class="cellrowborder" width="12.43%">          <p>2</p></td>         <td class="cellrowborder" width="59.67%">          <p>随用随付。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>PAY_UP_FRONT</p></td>         <td class="cellrowborder" width="12.43%">          <p>3</p></td>         <td class="cellrowborder" width="59.67%">          <p>提前支付。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>SINGLE_PROMOTION</p></td>         <td class="cellrowborder" width="12.43%">          <p>5</p></td>         <td class="cellrowborder" width="59.67%">          <p>单次优惠（暂不支持），仅适用于消耗型/非消耗型/非续期订阅商品。</p>          <p>该属性不支持Wearable、TV设备。</p>          <p><strong>元服务API：</strong>从版本5.0.5(17)开始，该接口支持在元服务中使用。</p>          <p><strong>起始版本：</strong>5.0.5(17)</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 522px;">     <h2 id="section131398372313" device-type="phone,tablet,2in1,wearable,tv">OfferType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section131398372313" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>促销类型。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.4.1.1" width="27.900000000000002%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.4.1.2" width="12.43%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.4.1.3" width="59.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>INTRODUCTORY</p></td>         <td class="cellrowborder" width="12.43%">          <p>0</p></td>         <td class="cellrowborder" width="59.67%">          <p>推介促销。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>PROMOTIONAL</p></td>         <td class="cellrowborder" width="12.43%">          <p>1</p></td>         <td class="cellrowborder" width="59.67%">          <p>优惠促销。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1527px;">     <h2 id="section1834394718429" device-type="phone,tablet,2in1,wearable,tv">IAPErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1834394718429" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>错误码枚举。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.4.1.1" width="38.61%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.4.1.2" width="14.67%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.4.1.3" width="46.72%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="38.61%">          <p>USER_CANCELED</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860000</p></td>         <td class="cellrowborder" width="46.72%">          <p>用户取消当前操作。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>SYSTEM_ERROR</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860001</p></td>         <td class="cellrowborder" width="46.72%">          <p>通用失败错误码。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>APP_NOT_AUTHORIZED</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860002</p></td>         <td class="cellrowborder" width="46.72%">          <p>应用未被授权访问接口。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>INVALID_PRODUCT</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860003</p></td>         <td class="cellrowborder" width="46.72%">          <p>无效的商品信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>FREQUENT_CALLS</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860004</p></td>         <td class="cellrowborder" width="46.72%">          <p>接口访问过频。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>NETWORK_ERROR</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860005</p></td>         <td class="cellrowborder" width="46.72%">          <p>网络连接异常。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>PRODUCT_TERRITORY_NOT_SUPPORTED</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860007</p></td>         <td class="cellrowborder" width="46.72%">          <p>商品所属的应用未在指定国家/地区上架。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>ACCOUNT_NOT_LOGGED_IN</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860050</p></td>         <td class="cellrowborder" width="46.72%">          <p>未登录华为账号。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>PRODUCT_OWNED</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860051</p></td>         <td class="cellrowborder" width="46.72%">          <p>由于已经拥有该商品，购买失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>PURCHASE_NOT_PAID</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860052</p></td>         <td class="cellrowborder" width="46.72%">          <p>由于未拥有该商品，发货失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>PURCHASE_FINISHED</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860053</p></td>         <td class="cellrowborder" width="46.72%">          <p>此次购买已经完成发货，无需重复发货。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>ACCOUNT_TERRITORY_NOT_SUPPORTED</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860054</p></td>         <td class="cellrowborder" width="46.72%">          <p>用户账号所在服务地暂不支持IAP。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>USER_NOT_ALLOWED</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860056</p></td>         <td class="cellrowborder" width="46.72%">          <p>用户交易被拒绝。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>APP_NOT_DEBUG</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860057</p></td>         <td class="cellrowborder" width="46.72%">          <p>当前应用不是debug签名的应用。</p>          <p><strong>起始版本：</strong>5.0.0(12)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>ACCOUNT_NOT_TEST</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860058</p></td>         <td class="cellrowborder" width="46.72%">          <p>华为账号不是沙盒测试账号。</p>          <p><strong>起始版本：</strong>5.0.0(12)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>INVALID_PROMOTIONAL_OFFER</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860059</p></td>         <td class="cellrowborder" width="46.72%">          <p>无效的优惠信息。</p>          <p><strong>起始版本：</strong>5.0.0(12)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>INVALID_PURCHASE_SIGNATURE</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860060</p></td>         <td class="cellrowborder" width="46.72%">          <p>无效的签名信息。</p>          <p><strong>起始版本：</strong>5.0.0(12)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>PURCHASE_ALREADY_REFUNDED</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860061</p></td>         <td class="cellrowborder" width="46.72%">          <p>商品已退款或退款中。</p>          <p><strong>元服务API：</strong>从版本5.0.3(15)开始，该接口支持在元服务中使用。</p>          <p><strong>起始版本：</strong>5.0.3(15)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="38.61%">          <p>REFUND_NOT_ALLOWED</p></td>         <td class="cellrowborder" width="14.67%">          <p>1001860062</p></td>         <td class="cellrowborder" width="46.72%">          <p>不允许退款。</p>          <p><strong>元服务API：</strong>从版本5.0.3(15)开始，该接口支持在元服务中使用。</p>          <p><strong>起始版本：</strong>5.0.3(15)</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 522px;">     <h2 id="section15231134814464" device-type="phone,tablet,2in1,wearable,tv">WindowScreenMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15231134814464" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>界面窗口模式。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.4.1.1" width="27.900000000000002%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.4.1.2" width="12.43%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.4.1.3" width="59.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>DIALOG_BOX</p></td>         <td class="cellrowborder" width="12.43%">          <p>1</p></td>         <td class="cellrowborder" width="59.67%">          <p>界面窗口弹窗模式。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>FULLSCREEN</p></td>         <td class="cellrowborder" width="12.43%">          <p>2</p></td>         <td class="cellrowborder" width="59.67%">          <p>界面窗口全屏模式。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 567px;">     <h2 id="section2762171942710" device-type="phone,tablet,2in1,wearable,tv">ProductStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2762171942710" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>商品状态枚举。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.4.1.1" width="27.900000000000002%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.4.1.2" width="12.43%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.4.1.3" width="59.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>VALID</p></td>         <td class="cellrowborder" width="12.43%">          <p>0</p></td>         <td class="cellrowborder" width="59.67%">          <p>生效状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>CANCELED</p></td>         <td class="cellrowborder" width="12.43%">          <p>1</p></td>         <td class="cellrowborder" width="59.67%">          <p>取消状态，即删除。此状态的商品不可续订，也不可订阅。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>OFFLINE</p></td>         <td class="cellrowborder" width="12.43%">          <p>3</p></td>         <td class="cellrowborder" width="59.67%">          <p>下线状态，不能订阅，但老用户仍可续订。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1821px;">     <h2 id="section192192415554" device-type="phone,tablet,2in1,wearable,tv">iap.queryEnvironmentStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section192192415554" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryEnvironmentStatus(context: common.Context): Promise&lt;void&gt;</p>     <p>查询用户登录的账号服务地是否在IAP Kit支持结算的国家/地区中。当前只支持中国境内（不包含中国香港、中国澳门、中国台湾）。</p>     <p>使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.13.9.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.9.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.9.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context" target="_blank">Context</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>上下文。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.13.10.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.10.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;void&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象。无返回结果的Promise对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.13.12.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.12.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860000</p></td>          <td class="cellrowborder" width="70%">           <p>The operation was canceled by the user.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>iap.<span class="hljs-title function_">queryEnvironmentStatus</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying environment status.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query environment status. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1664px;">     <h2 id="section9482124221520" device-type="phone,tablet,2in1,wearable,tv">iap.queryEnvironmentStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9482124221520" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryEnvironmentStatus(context: common.Context, callback: AsyncCallback&lt;void&gt;): void</p>     <p>查询用户登录的账号服务地是否在IAP Kit支持结算的国家/地区中。当前只支持中国境内（不包含中国香港、中国澳门、中国台湾）。</p>     <p>使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.14.8.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.14.8.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.14.8.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.14.8.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context" target="_blank">Context</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>上下文。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>callback</p></td>          <td class="cellrowborder" width="25%">           <p>AsyncCallback&lt;void&gt;</p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>回调函数。当用户登录的账号服务地在IAP Kit支持结算的国家/地区中时，err为undefined，否则为错误对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="30%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="70%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="30%">          <p>401</p></td>         <td class="cellrowborder" width="70%">          <p>Parameter error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860000</p></td>         <td class="cellrowborder" width="70%">          <p>The operation was canceled by the user.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860001</p></td>         <td class="cellrowborder" width="70%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860004</p></td>         <td class="cellrowborder" width="70%">          <p>Too frequent API calls.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860005</p></td>         <td class="cellrowborder" width="70%">          <p>Network connection error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860050</p></td>         <td class="cellrowborder" width="70%">          <p>The HUAWEI ID is not signed in.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860054</p></td>         <td class="cellrowborder" width="70%">          <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>iap.<span class="hljs-title function_">queryEnvironmentStatus</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-comment">// 请求失败</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query environment status. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying environment status.'</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2065px;">     <h2 id="section55531442102518" device-type="phone,tablet,2in1,wearable,tv">iap.queryProducts<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section55531442102518" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryProducts(context: common.UIAbilityContext, parameter: QueryProductsParameter): Promise&lt;Array&lt;Product&gt;&gt;</p>     <p>获取在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>上配置的商品详情信息。使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.15.8.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.8.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.8.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.8.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1033653365917">QueryProductsParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1033653365917">QueryProductsParameter</a>对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.9.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section346874219313">Product</a>&gt;&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象，返回商品详情信息。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.15.11.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.11.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860003</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid product information.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860007</p></td>          <td class="cellrowborder" width="70%">           <p>The app to which the product belongs is not released in a specified location.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">QueryProductsParameter</span> = {</li><li>  <span class="hljs-comment">// iap.ProductType.CONSUMABLE：消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONCONSUMABLE：非消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.AUTORENEWABLE：自动续期订阅商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONRENEWABLE：非续期订阅商品</span></li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span>,</li><li>  <span class="hljs-comment">// productIds中的商品需要替换成开发者在AppGallery Connect网站配置的商品</span></li><li>  <span class="hljs-attr">productIds</span>: [<span class="hljs-string">'testConsumeProduct01'</span>, <span class="hljs-string">'testConsumeProduct02'</span>]</li><li>}</li><li>iap.<span class="hljs-title function_">queryProducts</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">Array</span>&lt;iap.Product&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying products. data length: <span class="hljs-subst">${data?.length}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query products. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1987px;">     <h2 id="section43916499256" device-type="phone,tablet,2in1,wearable,tv">iap.queryProducts<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section43916499256" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryProducts(context: common.UIAbilityContext, parameter: QueryProductsParameter, callback: AsyncCallback&lt;Array&lt;Product&gt;&gt;): void</p>     <p>用于获取在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>上配置的商品详情信息。使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1033653365917">QueryProductsParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1033653365917">QueryProductsParameter</a>对象。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>callback</p></td>          <td class="cellrowborder" width="25%">           <p>AsyncCallback&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section346874219313">Product</a>&gt;&gt;</p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>回调函数。当查询成功时，err为undefined，data为获取到的Array&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section346874219313">Product</a>&gt;；否则为错误对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="30%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="70%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="30%">          <p>401</p></td>         <td class="cellrowborder" width="70%">          <p>Parameter error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860001</p></td>         <td class="cellrowborder" width="70%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860002</p></td>         <td class="cellrowborder" width="70%">          <p>The application is not authorized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860003</p></td>         <td class="cellrowborder" width="70%">          <p>Invalid product information.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860004</p></td>         <td class="cellrowborder" width="70%">          <p>Too frequent API calls.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860005</p></td>         <td class="cellrowborder" width="70%">          <p>Network connection error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860007</p></td>         <td class="cellrowborder" width="70%">          <p>The app to which the product belongs is not released in a specified location.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860050</p></td>         <td class="cellrowborder" width="70%">          <p>The HUAWEI ID is not signed in.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860054</p></td>         <td class="cellrowborder" width="70%">          <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">QueryProductsParameter</span> = {</li><li>  <span class="hljs-comment">// iap.ProductType.CONSUMABLE：消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONCONSUMABLE：非消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.AUTORENEWABLE：自动续期订阅商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONRENEWABLE：非续期订阅商品</span></li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span>,</li><li>  <span class="hljs-comment">// productIds中的商品需要替换成开发者在AppGallery Connect网站配置的商品</span></li><li>  <span class="hljs-attr">productIds</span>: [<span class="hljs-string">'testConsumeProduct01'</span>, <span class="hljs-string">'testConsumeProduct02'</span>]</li><li>}</li><li>iap.<span class="hljs-title function_">queryProducts</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">Array</span>&lt;iap.Product&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-comment">// 请求失败</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query products. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying products. data length: <span class="hljs-subst">${data?.length}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2018px;">     <h2 id="section143471555372" device-type="phone,tablet,2in1,wearable,tv">iap.queryProducts<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section143471555372" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryProducts(context: common.UIAbilityContext, productIds: string[]): Promise&lt;Array&lt;Product&gt;&gt;</p>     <p>查询在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>上配置的商品详情信息。使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.17.8.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.17.8.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.17.8.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.17.8.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>productIds</p></td>          <td class="cellrowborder" width="25%">           <p>string[]</p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>待查询商品ID列表。商品ID必须已经在当前应用中创建且唯一。</p>           <p>商品ID来源于开发者在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>中配置商品信息时设置的商品ID，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/iap-config-product" target="_blank">配置商品信息</a>。</p>           <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">             <p>一次最多可查询200个商品，商品数量较多时建议分批查询。</p>            </div></div></div></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.17.9.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.17.9.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section346874219313">Product</a>&gt;&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象，返回商品详情信息。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.17.11.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.17.11.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860003</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid product information.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860007</p></td>          <td class="cellrowborder" width="70%">           <p>The app to which the product belongs is not released in a specified location.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// productIds中的商品需要替换成开发者在AppGallery Connect网站配置的商品</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">productIds</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'testConsumeProduct01'</span>, <span class="hljs-string">'testConsumeProduct02'</span>];</li><li>iap.<span class="hljs-title function_">queryProducts</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, productIds).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">Array</span>&lt;iap.Product&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying products. data length: <span class="hljs-subst">${data?.length}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query products. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2271px;">     <h2 id="section107784425446" device-type="phone,tablet,2in1,wearable,tv">iap.purchase<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section107784425446" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>purchase(context: common.UIAbilityContext, parameter: PurchaseParameter): Promise&lt;PurchaseResult&gt;</p>     <p>创建订单，支持消耗型商品和非消耗型商品。在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>创建商品后，应用使用此接口调用华为应用内支付收银台，显示商品、价格和支付方式。</p>     <p>使用Promise异步回调。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section18798154545516">createPurchase</a>替代。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>设备行为差异：</strong>该接口在Phone、PC/2in1、Tablet设备中可正常调用，在其他设备中返回1001860001错误码。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.18.10.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.18.10.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.18.10.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.18.10.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1340120344598">PurchaseParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1340120344598">PurchaseParameter</a>对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.18.11.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.18.11.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section111613541391">PurchaseResult</a>&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象，返回购买结果。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.18.13.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.18.13.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860000</p></td>          <td class="cellrowborder" width="70%">           <p>The operation was canceled by the user.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860003</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid product information.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860007</p></td>          <td class="cellrowborder" width="70%">           <p>The app to which the product belongs is not released in a specified location.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860051</p></td>          <td class="cellrowborder" width="70%">           <p>Failed to purchase a product because the user already owns the product.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860056</p></td>          <td class="cellrowborder" width="70%">           <p>The user is not allowed to make purchase.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">PurchaseParameter</span> = {</li><li>  <span class="hljs-comment">// iap.ProductType.CONSUMABLE：消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONCONSUMABLE：非消耗型商品</span></li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span>,</li><li>  <span class="hljs-comment">// productId需要替换成开发者在AppGallery Connect网站配置商品信息时设置的“商品ID”</span></li><li>  <span class="hljs-attr">productId</span>: <span class="hljs-string">'testConsumeProduct01'</span>,</li><li>  <span class="hljs-attr">developerPayload</span>: <span class="hljs-string">'test developer payload string.'</span></li><li>}</li><li>iap.<span class="hljs-title function_">purchase</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: iap.PurchaseResult</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功  </span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in purchasing.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to purchase. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2217px;">     <h2 id="section07563539441" device-type="phone,tablet,2in1,wearable,tv">iap.purchase<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section07563539441" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>purchase(context: common.UIAbilityContext, parameter: PurchaseParameter, callback: AsyncCallback&lt;PurchaseResult&gt;): void</p>     <p>创建订单，支持消耗型商品和非消耗型商品。在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>创建商品后，使用此接口调用华为应用内支付收银台，显示商品、价格和支付方式。</p>     <p>使用callback异步回调。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section19694203910585">createPurchase</a>替代。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>设备行为差异：</strong>该接口在Phone、PC/2in1、Tablet设备中可正常调用，在其他设备中返回1001860001错误码。</p>     <p class="typescript"><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.19.10.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.19.10.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.19.10.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.19.10.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1340120344598">PurchaseParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1340120344598">PurchaseParameter</a>对象。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>callback</p></td>          <td class="cellrowborder" width="25%">           <p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section111613541391">PurchaseResult</a>&gt;</p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>回调函数。当购买成功时，err为undefined，data为获取到的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section111613541391">PurchaseResult</a>对象；否则为错误对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.19.12.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.19.12.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860000</p></td>          <td class="cellrowborder" width="70%">           <p>The operation was canceled by the user.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860003</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid product information.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860007</p></td>          <td class="cellrowborder" width="70%">           <p>The app to which the product belongs is not released in a specified location.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860051</p></td>          <td class="cellrowborder" width="70%">           <p>Failed to purchase a product because the user already owns the product.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860056</p></td>          <td class="cellrowborder" width="70%">           <p>The user is not allowed to make purchase.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">PurchaseParameter</span> = {</li><li>  <span class="hljs-comment">// iap.ProductType.CONSUMABLE：消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONCONSUMABLE：非消耗型商品</span></li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span>,</li><li>  <span class="hljs-comment">// productId需要替换成开发者在AppGallery Connect网站配置商品信息时设置的“商品ID”</span></li><li>  <span class="hljs-attr">productId</span>: <span class="hljs-string">'testConsumeProduct01'</span>,</li><li>  <span class="hljs-attr">developerPayload</span>: <span class="hljs-string">'test developer payload string.'</span></li><li>}</li><li>iap.<span class="hljs-title function_">purchase</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: iap.PurchaseResult</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-comment">// 请求失败</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to purchase. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in purchasing.'</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2381px;">     <h2 id="section18798154545516" device-type="phone,tablet,2in1,wearable,tv">iap.createPurchase<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18798154545516" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPurchase(context: common.UIAbilityContext, parameter: PurchaseParameter): Promise&lt;CreatePurchaseResult&gt;</p>     <p>发起购买，支持消耗型商品、非消耗型商品、自动续期订阅商品和非续期订阅商品。在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>创建商品后，使用此接口拉起华为应用内支付收银台，显示商品名称、商品价格等信息。</p>     <p>使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.20.9.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.20.9.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.20.9.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.20.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1340120344598">PurchaseParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1340120344598">PurchaseParameter</a>对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.20.10.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.20.10.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section193852021105111">CreatePurchaseResult</a>&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象，返回购买结果。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.20.12.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.20.12.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860000</p></td>          <td class="cellrowborder" width="70%">           <p>The operation was canceled by the user.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860003</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid product information.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860007</p></td>          <td class="cellrowborder" width="70%">           <p>The app to which the product belongs is not released in a specified location.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860051</p></td>          <td class="cellrowborder" width="70%">           <p>Failed to purchase a product because the user already owns the product.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860056</p></td>          <td class="cellrowborder" width="70%">           <p>The user is not allowed to make purchase.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860059</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid promotional offer id.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860060</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid purchase signature.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">PurchaseParameter</span> = {</li><li>  <span class="hljs-comment">// iap.ProductType.CONSUMABLE：消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONCONSUMABLE：非消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.AUTORENEWABLE：自动续期订阅商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONRENEWABLE：非续期订阅商品</span></li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">AUTORENEWABLE</span>,</li><li>  <span class="hljs-comment">// productId需要替换成开发者在AppGallery Connect网站配置商品信息时设置的“商品ID”</span></li><li>  <span class="hljs-attr">productId</span>: <span class="hljs-string">'testProduct01'</span>,</li><li>  <span class="hljs-attr">developerPayload</span>: <span class="hljs-string">'test developer payload string.'</span></li><li>}</li><li>iap.<span class="hljs-title function_">createPurchase</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: iap.CreatePurchaseResult</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating purchase. data: <span class="hljs-subst">${data.purchaseData}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create purchase. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2303px;">     <h2 id="section19694203910585" device-type="phone,tablet,2in1,wearable,tv">iap.createPurchase<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19694203910585" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPurchase(context: common.UIAbilityContext, parameter: PurchaseParameter, callback: AsyncCallback&lt;CreatePurchaseResult&gt;): void</p>     <p>发起购买，支持消耗型商品、非消耗型商品、自动续期订阅商品和非续期订阅商品。在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>创建商品后，使用此接口拉起华为应用内支付收银台，显示商品名称、价格等信息。</p>     <p>使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.21.8.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.21.8.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.21.8.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.21.8.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1340120344598">PurchaseParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1340120344598">PurchaseParameter</a>对象。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>callback</p></td>          <td class="cellrowborder" width="25%">           <p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section193852021105111">CreatePurchaseResult</a>&gt;</p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>回调函数。当购买成功时，err为undefined，data为获取到的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section193852021105111">CreatePurchaseResult</a>对象；否则为错误对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.21.10.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.21.10.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860000</p></td>          <td class="cellrowborder" width="70%">           <p>The operation was canceled by the user.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860003</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid product information.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860007</p></td>          <td class="cellrowborder" width="70%">           <p>The app to which the product belongs is not released in a specified location.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860051</p></td>          <td class="cellrowborder" width="70%">           <p>Failed to purchase a product because the user already owns the product.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860056</p></td>          <td class="cellrowborder" width="70%">           <p>The user is not allowed to make purchase.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860059</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid promotional offer id.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860060</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid purchase signature.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">PurchaseParameter</span> = {</li><li>  <span class="hljs-comment">// iap.ProductType.CONSUMABLE：消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONCONSUMABLE：非消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.AUTORENEWABLE：自动续期订阅商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONRENEWABLE：非续期订阅商品</span></li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">AUTORENEWABLE</span>,</li><li>  <span class="hljs-comment">// productId需要替换成开发者在AppGallery Connect网站配置商品信息时设置的“商品ID”</span></li><li>  <span class="hljs-attr">productId</span>: <span class="hljs-string">'testProduct01'</span>,</li><li>  <span class="hljs-attr">developerPayload</span>: <span class="hljs-string">'test developer payload string.'</span></li><li>}</li><li>iap.<span class="hljs-title function_">createPurchase</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: iap.CreatePurchaseResult</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-comment">// 请求失败</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create purchase. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating purchase. data: <span class="hljs-subst">${data.purchaseData}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2072px;">     <h2 id="section754232910168" device-type="phone,tablet,2in1,wearable,tv">iap.consumePurchase<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section754232910168" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>consumePurchase(context: common.UIAbilityContext, parameter: ConsumePurchaseParameter): Promise&lt;ConsumeResult&gt;</p>     <p>在消耗型商品支付成功后，应用需要在发放商品成功之后调用此接口对消耗型商品执行消耗操作。使用Promise异步回调。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section124751324135814">finishPurchase</a>替代。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>设备行为差异：</strong>该接口在Phone、PC/2in1、Tablet设备中可正常调用，在其他设备中返回1001860001错误码。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.22.9.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.22.9.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.22.9.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.22.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section659703618597">ConsumePurchaseParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section659703618597">ConsumePurchaseParameter</a>对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.22.10.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.22.10.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1343816549919">ConsumeResult</a>&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象，返回消耗结果。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.22.12.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.22.12.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860007</p></td>          <td class="cellrowborder" width="70%">           <p>The app to which the product belongs is not released in a specified location.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860052</p></td>          <td class="cellrowborder" width="70%">           <p>The purchase cannot be finished because the user has not paid for it.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860053</p></td>          <td class="cellrowborder" width="70%">           <p>The purchase has been finished and cannot be finished again.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">ConsumePurchaseParameter</span> = {</li><li>  <span class="hljs-attr">purchaseToken</span>: <span class="hljs-string">'***'</span>,</li><li>  <span class="hljs-attr">developerChallenge</span>: <span class="hljs-string">'developerChallenge'</span></li><li>}</li><li>iap.<span class="hljs-title function_">consumePurchase</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: iap.ConsumeResult</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in consuming purchase.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to consume purchase. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2042px;">     <h2 id="section14169026181610" device-type="phone,tablet,2in1,wearable,tv">iap.consumePurchase<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14169026181610" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>consumePurchase(context: common.UIAbilityContext, parameter: ConsumePurchaseParameter, callback: AsyncCallback&lt;ConsumeResult&gt;): void</p>     <p>在消耗型商品支付成功后，应用需要在发放商品成功之后调用此接口对消耗型商品执行消耗操作。使用callback异步回调。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section2045683917408">finishPurchase</a>替代。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>设备行为差异：</strong>该接口在Phone、PC/2in1、Tablet设备中可正常调用，在其他设备中返回1001860001错误码。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.23.9.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.23.9.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.23.9.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.23.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section659703618597">ConsumePurchaseParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section659703618597">ConsumePurchaseParameter</a>对象。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>callback</p></td>          <td class="cellrowborder" width="25%">           <p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1343816549919">ConsumeResult</a>&gt;</p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>回调函数。当消耗成功时，err为undefined，data为获取到的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1343816549919">ConsumeResult</a>对象；否则为错误对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.23.11.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.23.11.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860007</p></td>          <td class="cellrowborder" width="70%">           <p>The app to which the product belongs is not released in a specified location.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860052</p></td>          <td class="cellrowborder" width="70%">           <p>The purchase cannot be finished because the user has not paid for it.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860053</p></td>          <td class="cellrowborder" width="70%">           <p>The purchase has been finished and cannot be finished again.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">ConsumePurchaseParameter</span> = {</li><li>  <span class="hljs-attr">purchaseToken</span>: <span class="hljs-string">'***'</span>,</li><li>  <span class="hljs-attr">developerChallenge</span>: <span class="hljs-string">'developerChallenge'</span></li><li>}</li><li>iap.<span class="hljs-title function_">consumePurchase</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: iap.ConsumeResult</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-comment">// 请求失败</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to consume purchase. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in consuming purchase.'</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="section124751324135814" device-type="phone,tablet,2in1,wearable,tv">iap.finishPurchase<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section124751324135814" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>finishPurchase(context: common.UIAbilityContext, parameter: FinishPurchaseParameter): Promise&lt;void&gt;</p>     <p>应用完成已购商品的发货后，调用此接口确认发货，指明此次购买流程结束。使用Promise异步回调。</p>    </div>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>    <p><strong>起始版本：</strong>4.1.0(11)</p>    <div class="p">     <strong>参数</strong>：      <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.2.1.5.1.1" width="15%">          <p><strong>参数名</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.2.1.5.1.2" width="25%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.2.1.5.1.3" width="10%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.2.1.5.1.4" width="50%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="15%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>         <td class="cellrowborder" width="10%">          <p>是</p></td>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15%">          <p>parameter</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section103714142118">FinishPurchaseParameter</a></p></td>         <td class="cellrowborder" width="10%">          <p>是</p></td>         <td class="cellrowborder" width="50%">          <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section103714142118">FinishPurchaseParameter</a>对象。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.31.1.3.1.1" width="30%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.31.1.3.1.2" width="70%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="30%">         <p>Promise&lt;void&gt;</p></td>        <td class="cellrowborder" width="70%">         <p>Promise对象。无返回结果的Promise对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码</strong>：</p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.34.1.3.1.1" width="30%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.34.1.3.1.2" width="70%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="30%">         <p>401</p></td>        <td class="cellrowborder" width="70%">         <p>Parameter error.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860001</p></td>        <td class="cellrowborder" width="70%">         <p>System internal error.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860002</p></td>        <td class="cellrowborder" width="70%">         <p>The application is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860004</p></td>        <td class="cellrowborder" width="70%">         <p>Too frequent API calls.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860005</p></td>        <td class="cellrowborder" width="70%">         <p>Network connection error.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860050</p></td>        <td class="cellrowborder" width="70%">         <p>The HUAWEI ID is not signed in.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860052</p></td>        <td class="cellrowborder" width="70%">         <p>The purchase cannot be finished because the user has not paid for it.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860053</p></td>        <td class="cellrowborder" width="70%">         <p>The purchase has been finished and cannot be finished again.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860054</p></td>        <td class="cellrowborder" width="70%">         <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>       </tr>           </tbody></table></div>    </div>    <div class="p">     <strong>示例</strong>：     <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">finishPurchaseParam</span>: iap.<span class="hljs-property">FinishPurchaseParameter</span> = {</li><li>  <span class="hljs-comment">// iap.ProductType.CONSUMABLE：消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONCONSUMABLE：非消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.AUTORENEWABLE：自动续期订阅商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONRENEWABLE：非续期订阅商品</span></li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span>,</li><li>  <span class="hljs-attr">purchaseToken</span>: <span class="hljs-string">'***'</span>,</li><li>  <span class="hljs-attr">purchaseOrderId</span>: <span class="hljs-string">'***'</span></li><li>};</li><li>iap.<span class="hljs-title function_">finishPurchase</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, finishPurchaseParam).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in finishing purchase.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to finish purchase. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="section2045683917408" device-type="phone,tablet,2in1,wearable,tv">iap.finishPurchase<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2045683917408" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>finishPurchase(context: common.UIAbilityContext, parameter: FinishPurchaseParameter, callback: AsyncCallback&lt;void&gt;): void</p>     <p>应用完成已购商品的发货后，调用此接口确认发货，指明此次购买流程结束。使用callback异步回调。</p>    </div>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>    <p><strong>起始版本：</strong>4.1.0(11)</p>    <div class="p">     <strong>参数</strong>：      <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.2.1.5.1.1" width="15%">          <p><strong>参数名</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.2.1.5.1.2" width="25%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.2.1.5.1.3" width="10%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.2.1.5.1.4" width="50%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="15%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>         <td class="cellrowborder" width="10%">          <p>是</p></td>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15%">          <p>parameter</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section103714142118">FinishPurchaseParameter</a></p></td>         <td class="cellrowborder" width="10%">          <p>是</p></td>         <td class="cellrowborder" width="50%">          <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section103714142118">FinishPurchaseParameter</a>对象。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15%">          <p>callback</p></td>         <td class="cellrowborder" width="25%">          <p>AsyncCallback&lt;void&gt;</p></td>         <td class="cellrowborder" width="10%">          <p>是</p></td>         <td class="cellrowborder" width="50%">          <p>回调函数。当确认发货成功时，err为undefined，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <p><strong>错误码</strong>：</p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.43.1.3.1.1" width="30%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.43.1.3.1.2" width="70%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="30%">         <p>401</p></td>        <td class="cellrowborder" width="70%">         <p>Parameter error.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860001</p></td>        <td class="cellrowborder" width="70%">         <p>System internal error.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860002</p></td>        <td class="cellrowborder" width="70%">         <p>The application is not authorized.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860004</p></td>        <td class="cellrowborder" width="70%">         <p>Too frequent API calls.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860005</p></td>        <td class="cellrowborder" width="70%">         <p>Network connection error.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860050</p></td>        <td class="cellrowborder" width="70%">         <p>The HUAWEI ID is not signed in.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860052</p></td>        <td class="cellrowborder" width="70%">         <p>The purchase cannot be finished because the user has not paid for it.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860053</p></td>        <td class="cellrowborder" width="70%">         <p>The purchase has been finished and cannot be finished again.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="30%">         <p>1001860054</p></td>        <td class="cellrowborder" width="70%">         <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>       </tr>           </tbody></table></div>    </div>    <div class="p">     <strong>示例</strong>：     <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">finishPurchaseParam</span>: iap.<span class="hljs-property">FinishPurchaseParameter</span> = {</li><li>  <span class="hljs-comment">// iap.ProductType.CONSUMABLE：消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONCONSUMABLE：非消耗型商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.AUTORENEWABLE：自动续期订阅商品</span></li><li>  <span class="hljs-comment">// iap.ProductType.NONRENEWABLE：非续期订阅商品</span></li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span>,</li><li>  <span class="hljs-attr">purchaseToken</span>: <span class="hljs-string">'***'</span>,</li><li>  <span class="hljs-attr">purchaseOrderId</span>: <span class="hljs-string">'***'</span></li><li>};</li><li>iap.<span class="hljs-title function_">finishPurchase</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, finishPurchaseParam, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-comment">// 请求失败</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to finish purchase. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in finishing purchase.'</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2240px;">     <h2 id="section78016131463" device-type="phone,tablet,2in1,wearable,tv">iap.queryOwnedPurchases<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section78016131463" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryOwnedPurchases(context: common.UIAbilityContext, parameter: QueryPurchasesParameter): Promise&lt;QueryPurchasesResult&gt;</p>     <p>查询用户已订购商品的购买数据，包括消耗型商品和非消耗型商品，一次请求只能查询一种类型的商品。</p>     <ul>      <li>若查询消耗型商品，IAP仅返回用户已购未消耗的购买数据。若有购买数据返回，说明可能存在因某些异常而导致未进行发货的情况，需要应用判断是否已发货，未发货则需要进行补发货处理。开发者应用发货成功后调用<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section754232910168">consumePurchase</a>接口进行消耗。消耗成功的订单信息将不会在此接口返回，可通过<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section69451529105019">queryPurchaseRecords</a>接口获取。</li>     </ul>     <ul>      <li>若查询非消耗型商品，IAP返回用户所有已订购商品的购买数据。</li>     </ul>     <p>使用Promise异步回调。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1147122418532">queryPurchases</a>替代。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>设备行为差异：</strong>该接口在Phone、PC/2in1、Tablet设备中可正常调用，在其他设备中返回1001860001错误码。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.45.12.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.45.12.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.45.12.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.45.12.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a>对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.45.13.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.45.13.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section7249204210514">QueryPurchasesResult</a>&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象，返回查询的购买数据信息。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.45.15.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.45.15.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860003</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid product information.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860007</p></td>          <td class="cellrowborder" width="70%">           <p>The app to which the product belongs is not released in a specified location.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860053</p></td>          <td class="cellrowborder" width="70%">           <p>The purchase has been finished and cannot be finished again.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">QueryPurchasesParameter</span> = {</li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span></li><li>}</li><li>iap.<span class="hljs-title function_">queryOwnedPurchases</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: iap.QueryPurchasesResult</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying owned purchases.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query owned purchases. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2186px;">     <h2 id="section028910351969" device-type="phone,tablet,2in1,wearable,tv">iap.queryOwnedPurchases<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section028910351969" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryOwnedPurchases(context: common.UIAbilityContext, parameter: QueryPurchasesParameter, callback: AsyncCallback&lt;QueryPurchasesResult&gt;): void</p>     <p>查询用户已订购商品的购买数据，包括消耗型商品和非消耗型商品，一次请求只能查询一种类型的商品。</p>     <ul>      <li>若查询消耗型商品，IAP仅返回用户已购未消耗的购买数据。若有购买数据返回，说明可能存在因某些异常而导致未进行发货的情况，需要应用判断是否已发货，未发货则需要进行补发货处理。开发者应用发货成功后调用<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section754232910168">consumePurchase</a>接口进行消耗。消耗成功的订单信息将不会在此接口返回，可通过<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1495292925012">queryPurchaseRecords</a>接口获取。</li>     </ul>     <ul>      <li>若查询非消耗型商品，IAP返回用户所有已订购商品的购买数据。</li>     </ul>     <p>使用callback异步回调。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section11799839122114">queryPurchases</a>替代。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>设备行为差异：</strong>该接口在Phone、PC/2in1、Tablet设备中可正常调用，在其他设备中返回1001860001错误码。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.46.12.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.46.12.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.46.12.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.46.12.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a>对象。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>callback</p></td>          <td class="cellrowborder" width="25%">           <p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section7249204210514">QueryPurchasesResult</a>&gt;</p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>回调函数。当查询成功时，err为undefined，data为获取到<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section7249204210514">QueryPurchasesResult</a>对象；否则为错误对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.46.14.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.46.14.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860003</p></td>          <td class="cellrowborder" width="70%">           <p>Invalid product information.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860007</p></td>          <td class="cellrowborder" width="70%">           <p>The app to which the product belongs is not released in a specified location.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860053</p></td>          <td class="cellrowborder" width="70%">           <p>The purchase has been finished and cannot be finished again.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">QueryPurchasesParameter</span> = {</li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span></li><li>}</li><li>iap.<span class="hljs-title function_">queryOwnedPurchases</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: iap.QueryPurchasesResult</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-comment">// 请求失败</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query owned purchases. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying owned purchases.'</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1828px;">     <h2 id="section69451529105019" device-type="phone,tablet,2in1,wearable,tv">iap.queryPurchaseRecords<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section69451529105019" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryPurchaseRecords(context: common.UIAbilityContext, parameter: QueryPurchasesParameter): Promise&lt;QueryPurchasesResult&gt;</p>     <p>获取已执行过消耗操作的消耗型商品的购买数据。使用Promise异步回调。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1147122418532">queryPurchases</a>替代。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>设备行为差异：</strong>该接口在Phone、PC/2in1、Tablet设备中可正常调用，在其他设备中返回1001860001错误码。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.47.9.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.47.9.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.47.9.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.47.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a>对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.47.10.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.47.10.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section7249204210514">QueryPurchasesResult</a>&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象，返回已执行过消耗操作的消耗型商品的购买数据。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.47.12.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.47.12.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">QueryPurchasesParameter</span> = {</li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span></li><li>}</li><li>iap.<span class="hljs-title function_">queryPurchaseRecords</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: iap.QueryPurchasesResult</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying purchase records.'</span>);  </li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query purchase records. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1774px;">     <h2 id="section1495292925012" device-type="phone,tablet,2in1,wearable,tv">iap.queryPurchaseRecords<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1495292925012" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryPurchaseRecords(context: common.UIAbilityContext, parameter: QueryPurchasesParameter, callback: AsyncCallback&lt;QueryPurchasesResult&gt;): void</p>     <p>获取已执行过消耗操作的消耗型商品的购买数据。使用callback异步回调。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section11799839122114">queryPurchases</a>替代。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>设备行为差异：</strong>该接口在Phone、PC/2in1、Tablet设备中可正常调用，在其他设备中返回1001860001错误码。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.48.9.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.48.9.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.48.9.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.48.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a>对象。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>callback</p></td>          <td class="cellrowborder" width="25%">           <p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section7249204210514">QueryPurchasesResult</a>&gt;</p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>回调函数。当查询成功时，err为undefined，data为获取到<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section7249204210514">QueryPurchasesResult</a>对象；否则为错误对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.48.11.2.1.3.1.1" width="28.849999999999998%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.48.11.2.1.3.1.2" width="71.15%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="28.849999999999998%">           <p>401</p></td>          <td class="cellrowborder" width="71.15%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="28.849999999999998%">           <p>1001860001</p></td>          <td class="cellrowborder" width="71.15%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="28.849999999999998%">           <p>1001860002</p></td>          <td class="cellrowborder" width="71.15%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="28.849999999999998%">           <p>1001860004</p></td>          <td class="cellrowborder" width="71.15%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="28.849999999999998%">           <p>1001860005</p></td>          <td class="cellrowborder" width="71.15%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="28.849999999999998%">           <p>1001860050</p></td>          <td class="cellrowborder" width="71.15%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">QueryPurchasesParameter</span> = {</li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span></li><li>}</li><li>iap.<span class="hljs-title function_">queryPurchaseRecords</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: iap.QueryPurchasesResult</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-comment">// 请求失败</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query purchase records. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying purchase records.'</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1987px;">     <h2 id="section1147122418532" device-type="phone,tablet,2in1,wearable,tv">iap.queryPurchases<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1147122418532" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryPurchases(context: common.UIAbilityContext, parameter: QueryPurchasesParameter): Promise&lt;QueryPurchaseResult&gt;</p>     <p>查询已购商品的订单信息，包含 ：</p>     <ul>      <li>已购买但是未确认发货的商品的订单信息。</li>      <li>当前生效的非消耗型商品、自动续期订阅商品和非续期订阅商品。</li>     </ul>     <p>使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.49.10.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.49.10.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.49.10.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.49.10.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a>对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.49.11.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.49.11.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section820381425513">QueryPurchaseResult</a>&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象，返回已购商品的订单信息。在沙盒场景下，已发货状态的非消耗型商品订单信息将不返回。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.49.13.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.49.13.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">QueryPurchasesParameter</span> = {</li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span>,</li><li>  <span class="hljs-attr">queryType</span>: iap.<span class="hljs-property">PurchaseQueryType</span>.<span class="hljs-property">UNFINISHED</span></li><li>}</li><li>iap.<span class="hljs-title function_">queryPurchases</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: iap.QueryPurchaseResult</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying purchases. data len: <span class="hljs-subst">${data.purchaseDataList?.length}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query purchases. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1909px;">     <h2 id="section11799839122114" device-type="phone,tablet,2in1,wearable,tv">iap.queryPurchases<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11799839122114" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryPurchases(context: common.UIAbilityContext, parameter: QueryPurchasesParameter, callback: AsyncCallback&lt;QueryPurchaseResult&gt;): void</p>     <p>查询已购商品的订单信息，包含 ：</p>     <ul>      <li>已购买但是未确认发货的商品的订单信息。</li>      <li>当前生效的非消耗型商品、自动续期订阅商品和非续期订阅商品。</li>     </ul>     <p>使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.50.9.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.50.9.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.50.9.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.50.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability" target="_blank">UIAbility</a>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>parameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含请求信息的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section555872993213">QueryPurchasesParameter</a>对象。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>callback</p></td>          <td class="cellrowborder" width="25%">           <p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section820381425513">QueryPurchaseResult</a>&gt;</p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>回调函数。当查询成功时，err为undefined，data为获取到<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section820381425513">QueryPurchaseResult</a>对象；否则为错误对象。同时，在沙盒场景下，已发货状态的非消耗型商品订单信息将不返回。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.50.11.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.50.11.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">parameter</span>: iap.<span class="hljs-property">QueryPurchasesParameter</span> = {</li><li>  <span class="hljs-attr">productType</span>: iap.<span class="hljs-property">ProductType</span>.<span class="hljs-property">CONSUMABLE</span>,</li><li>  <span class="hljs-attr">queryType</span>: iap.<span class="hljs-property">PurchaseQueryType</span>.<span class="hljs-property">UNFINISHED</span></li><li>}</li><li>iap.<span class="hljs-title function_">queryPurchases</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, parameter, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: iap.QueryPurchaseResult</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-comment">// 请求失败</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query purchases. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying purchases. data len: <span class="hljs-subst">${data.purchaseDataList?.length}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2175px;">     <h2 id="section39973360502" device-type="phone,tablet,2in1,wearable,tv">iap.showManagedSubscriptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section39973360502" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>showManagedSubscriptions(context: common.Context, uiParameter: UIWindowParameter, groupId?: string): Promise&lt;void&gt;</p>     <p>跳转到订阅页或订阅详情页。使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet、2in1、TV设备设备中可正常调用，在其他设备中返回801错误码。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.51.9.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.51.9.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.51.9.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.51.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context" target="_blank">Context</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>上下文。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>uiParameter</p></td>          <td class="cellrowborder" width="25%">           <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section12131915171317">UIWindowParameter</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>包含界面窗口模式的<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section12131915171317">UIWindowParameter</a>对象。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>groupId</p></td>          <td class="cellrowborder" width="25%">           <p>string</p></td>          <td class="cellrowborder" width="10%">           <p>否</p></td>          <td class="cellrowborder" width="50%">           <p>订阅组ID，来源于开发者在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>中配置管理的订阅组，请参见<a href="https://developer.huawei.com/consumer/cn/doc/app/non-subscription-0000001958955109#section37862471018" target="_blank">新增订阅组</a>。</p>           <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">             <ul>              <li>传递groupId，跳转到订阅详情页。</li>              <li>不传递groupId，跳转到订阅页。如果用户在应用只有一条订阅数据，此时会跳转到此条订阅的订阅详情页。</li>             </ul>            </div></div></div></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.51.10.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.51.10.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;void&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象。无返回结果的Promise对象。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.51.12.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.51.12.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>801</p></td>          <td class="cellrowborder" width="70%">           <p>Capability not supported. Failed to call the API due to limited device capabilities.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">uiWindowParameter</span>: iap.<span class="hljs-property">UIWindowParameter</span> = {</li><li>  <span class="hljs-attr">windowScreenMode</span>: iap.<span class="hljs-property">WindowScreenMode</span>.<span class="hljs-property">DIALOG_BOX</span></li><li>}</li><li><span class="hljs-keyword">const</span> groupId = <span class="hljs-string">'***'</span>;</li><li>iap.<span class="hljs-title function_">showManagedSubscriptions</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, uiWindowParameter, groupId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in showing subscription page.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to show subscription page. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1828px;">     <h2 id="section634215616315" device-type="phone,tablet,2in1,wearable,tv">iap.isSandboxActivated<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section634215616315" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isSandboxActivated(context: common.Context): Promise&lt;boolean&gt;</p>     <p>检查沙盒测试能力是否生效。使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.52.8.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.52.8.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.52.8.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.52.8.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context" target="_blank">Context</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>上下文。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.52.9.2.1.3.1.1" width="30%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.52.9.2.1.3.1.2" width="70%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>Promise&lt;boolean&gt;</p></td>          <td class="cellrowborder" width="70%">           <p>Promise对象。返回true表示沙盒测试能力生效；返回false表示沙盒测试能力未生效，可根据返回的错误码检查未生效原因。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码</strong>：</p>     <div class="p">      以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。       <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.52.11.2.1.3.1.1" width="30%">           <p>错误码ID</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.52.11.2.1.3.1.2" width="70%">           <p>错误信息</p></th>         </tr><tr>          <td class="cellrowborder" width="30%">           <p>401</p></td>          <td class="cellrowborder" width="70%">           <p>Parameter error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860001</p></td>          <td class="cellrowborder" width="70%">           <p>System internal error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860002</p></td>          <td class="cellrowborder" width="70%">           <p>The application is not authorized.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860004</p></td>          <td class="cellrowborder" width="70%">           <p>Too frequent API calls.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860005</p></td>          <td class="cellrowborder" width="70%">           <p>Network connection error.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860050</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not signed in.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860054</p></td>          <td class="cellrowborder" width="70%">           <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860057</p></td>          <td class="cellrowborder" width="70%">           <p>The app provision type is not debug.</p></td>         </tr>         <tr>          <td class="cellrowborder" width="30%">           <p>1001860058</p></td>          <td class="cellrowborder" width="70%">           <p>The HUAWEI ID is not test account.</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>示例</strong>：      <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>iap.<span class="hljs-title function_">isSandboxActivated</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">isActivated: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求成功</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in checking the sandbox status. is activate: <span class="hljs-subst">${isActivated}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 请求失败</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to check the sandbox status. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2384px;">     <h2 id="section3308191561314" device-type="phone,tablet,2in1,wearable,tv">iap.createRefundRequest<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3308191561314" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createRefundRequest(context: common.Context, purchaseOrderId: string): Promise&lt;void&gt;</p>     <p>退款接口，调用此接口拉起退款流程，仅支持非游戏应用。使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.3(15)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>设备行为差异：</strong>该接口在Phone、Tablet、2in1设备中可正常调用，在其他设备中返回801错误码。</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <div class="p">      <strong>参数</strong>：       <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.53.9.2.1.5.1.1" width="15%">           <p><strong>参数名</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.53.9.2.1.5.1.2" width="25%">           <p><strong>类型</strong></p></th>          <th align="left" class="cellrowborder" id="mcps1.3.53.9.2.1.5.1.3" width="10%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.53.9.2.1.5.1.4" width="50%">           <p><strong>说明</strong></p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="15%">           <p>context</p></td>          <td class="cellrowborder" width="25%">           <p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context" target="_blank">Context</a></p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>上下文。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="15%">           <p>purchaseOrderId</p></td>          <td class="cellrowborder" width="25%">           <p>string</p></td>          <td class="cellrowborder" width="10%">           <p>是</p></td>          <td class="cellrowborder" width="50%">           <p>具体一笔订单中对应的购买订单号ID。最大长度256。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.11.1.3.1.1" width="30%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.53.11.1.3.1.2" width="70%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="30%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="70%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.14.1.3.1.1" width="30%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.53.14.1.3.1.2" width="70%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="30%">          <p>401</p></td>         <td class="cellrowborder" width="70%">          <p>Parameter error.Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>801</p></td>         <td class="cellrowborder" width="70%">          <p>Capability not supported. Failed to call the API due to limited device capabilities.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860000</p></td>         <td class="cellrowborder" width="70%">          <p>The operation was canceled by the user.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860001</p></td>         <td class="cellrowborder" width="70%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860002</p></td>         <td class="cellrowborder" width="70%">          <p>The application is not authorized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860004</p></td>         <td class="cellrowborder" width="70%">          <p>Too frequent API calls.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860005</p></td>         <td class="cellrowborder" width="70%">          <p>Network connection error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860054</p></td>         <td class="cellrowborder" width="70%">          <p>The country or region of the signed-in HUAWEI ID does not support IAP.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860061</p></td>         <td class="cellrowborder" width="70%">          <p>The purchase has been refunded or in refund.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="30%">          <p>1001860062</p></td>         <td class="cellrowborder" width="70%">          <p>Refund is not allowed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { iap } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IAPKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">IapTest</span> {</li><li>  <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">   * 拉起退款界面</span></li><li><span class="hljs-comment">   */</span></li><li>  <span class="hljs-title function_">createRefundRequest</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">context</span>: common.<span class="hljs-property">UIAbilityContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>    <span class="hljs-comment">// 调用iap.createRefundRequest拉起退款，传入context和purchaseOrderId</span></li><li>    <span class="hljs-keyword">let</span> purchaseOrderId = <span class="hljs-string">''</span>;</li><li>    iap.<span class="hljs-title function_">createRefundRequest</span>(context, purchaseOrderId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-comment">// 退款成功</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in create refund request.'</span>);</li><li>      <span class="hljs-comment">// ...</span></li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-comment">// 退款失败</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create refund request. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-comment">// ...</span></li><li>    });</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 826px;">     <h2 id="section1033653365917" device-type="phone,tablet,2in1,wearable,tv">QueryProductsParameter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1033653365917" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section55531442102518">queryProducts</a>接口的请求参数。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>productType</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section59035422210">ProductType</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>需要查询的商品类型。</p>          <ul>           <li>CONSUMABLE：消耗型商品</li>           <li>NONCONSUMABLE：非消耗型商品</li>           <li>AUTORENEWABLE：自动续期订阅商品</li>           <li>NONRENEWABLE：非续期订阅商品</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>productIds</p></td>         <td class="cellrowborder" width="21%">          <p>string[]</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>待查询商品ID列表。商品ID必须已经在当前应用中创建且唯一。</p>          <p>商品ID来源于开发者在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>中配置商品信息时设置的商品ID，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/iap-config-product" target="_blank">配置商品信息</a>。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>一次查询最多支持200个商品，商品数量较多时建议分批查询。</p>           </div></div></div></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3150px;">     <h2 id="section346874219313" device-type="phone,tablet,2in1,wearable,tv">Product<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section346874219313" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>包含单个商品详细信息。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.6.1.1" width="21%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.6.1.2" width="21%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.6.1.4" width="6.99%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.6.1.5" width="44.01%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>id</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>否</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品ID。</p>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>type</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section59035422210">ProductType</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>否</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品类型。</p>          <ul>           <li>CONSUMABLE：消耗型商品</li>           <li>NONCONSUMABLE：非消耗型商品</li>           <li>AUTORENEWABLE：自动续期订阅商品</li>           <li>NONRENEWABLE：非续期订阅商品</li>          </ul>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>name</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>否</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品名称，为配置商品信息时配置的名称。用于显示在应用内支付收银台。</p>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>description</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>否</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品描述，即配置商品信息时配置的描述信息。</p>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>price<sup>(deprecated)</sup></p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>否</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品的展示价格，包含商品币种和价格，格式为“币种+商品价格”，例如 EUR 0.15。部分国家/地区会返回“货币符号+商品价格”，例如中国境内（不包含中国香港、中国澳门、中国台湾）返回“￥0.15”。此价格含税。</p>          <ul>           <li>当商品为消耗型/非消耗型商品时，若<a href="https://developer.huawei.com/consumer/cn/doc/app/promotion-non-subscription-0000001931836332#section1429175616582" target="_blank">设置促销价格</a>，该字段为商品的促销价格，未设置则为商品原价。</li>           <li>当商品为自动续期订阅商品时，该字段为商品的原价。</li>          </ul>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>从4.1.0(11)开始废弃，建议使用localPrice替代。</p>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>localPrice</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>是</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品的展示价格，包含商品币种和价格，格式为“币种+商品价格”，例如 EUR 0.15。部分国家/地区会返回“货币符号+商品价格”，例如中国境内（不包含中国香港、中国澳门、中国台湾）返回“￥0.15”。此价格含税。可选。</p>          <ul>           <li>当商品为消耗型/非消耗型商品/非续期订阅商品，若设置促销价格，该字段为商品的促销价格，未设置则为商品原价。（促销价格能力已调整为<a href="https://developer.huawei.com/consumer/cn/doc/app/revise-non-subscription-0000001931836328" target="_blank">临时价格调整</a>，临时价格调整场景下该字段为商品原价）</li>           <li>当商品为自动续期订阅商品时，该字段为商品的原价。</li>          </ul>          <p><strong>起始版本：</strong>4.1.0(11)</p>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>microPrice</p></td>         <td class="cellrowborder" width="21%">          <p>number</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>否</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品实际价格乘以1,000,000后的微单位价格。例如某个商品实际价格是1.99美元，则该商品对应的微单位价格为：1.99*1000000=1990000。</p>          <ul>           <li>当商品为消耗型/非消耗型商品/非续期订阅商品，若设置促销价格，该字段为商品微单位促销价格，未设置则为商品微单位原价。（促销价格能力已调整为<a href="https://developer.huawei.com/consumer/cn/doc/app/revise-non-subscription-0000001931836328" target="_blank">临时价格调整</a>，临时价格调整场景下该字段为商品原价）</li>           <li>当商品为自动续期订阅商品时，该字段为商品微单位原价。</li>          </ul>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>originalLocalPrice</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>否</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品的原价，包含商品币种和价格，格式为“币种+商品价格”，例如 EUR 0.15。部分国家/地区会返回“货币符号+商品价格”，例如中国境内（不包含中国香港、中国澳门、中国台湾）返回“￥0.15”。此价格含税。</p>          <ul>           <li>当商品为消耗型/非消耗型商品或者非续期订阅商品，无论是否<a href="https://developer.huawei.com/consumer/cn/doc/app/promotion-non-subscription-0000001931836332#section1429175616582" target="_blank">设置促销价格</a>，该字段均为商品原价。</li>           <li>当商品为自动续期订阅商品时，无此字段返回，开发者无需关注。</li>          </ul>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>originalMicroPrice</p></td>         <td class="cellrowborder" width="21%">          <p>number</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>否</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品原价的微单位价格。商品原价乘以1,000,000后的微单位价格。例如某个商品原价是1.99美元，则该商品对应的微单位价格为：1.99*1000000=1990000。</p>          <ul>           <li>当商品为消耗型/非消耗型商品或者非续期订阅商品，无论是否<a href="https://developer.huawei.com/consumer/cn/doc/app/promotion-non-subscription-0000001931836332#section1429175616582" target="_blank">设置促销价格</a>，该字段均为商品微单位原价。</li>           <li>当商品为自动续期订阅商品时，无此字段返回，开发者无需关注。</li>          </ul>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>currency</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>否</p></td>         <td class="cellrowborder" width="44.01%">          <p>用于支付该商品的币种，例如CNY。</p>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>status</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section2762171942710">ProductStatus</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>是</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品状态。</p>          <p><strong>起始版本：</strong>5.0.0(12)</p>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>subscriptionInfo</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section151973366473">SubscriptionInfo</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>是</p></td>         <td class="cellrowborder" width="44.01%">          <p>自动续期订阅商品相关的信息。可选。</p>          <p><strong>起始版本：</strong>4.1.0(11)</p>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>promotionalOffers</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section446812293465">PromotionalOffer</a>[]</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>是</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品自定义人群优惠促销信息列表。</p>          <p><strong>起始版本：</strong>5.0.0(12)</p>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>jsonRepresentation</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="6.99%">          <p>是</p></td>         <td class="cellrowborder" width="44.01%">          <p>商品详细信息的原始JSON字符串。</p>          <p><strong>起始版本：</strong>4.1.0(11)</p>          <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 822px;">     <h2 id="section446812293465" device-type="phone,tablet,2in1,wearable,tv">PromotionalOffer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section446812293465" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>订阅商品支持的自定义优惠信息。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>offerId</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>优惠ID</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>paymentMode</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section23427243315">OfferPaymentMode</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>促销的付费方式</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>periodUnit</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section3468210113210">PeriodUnit</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>订阅周期单位。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>periodCount</p></td>         <td class="cellrowborder" width="21%">          <p>number</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>订阅周期数量。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>localPrice</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>显示的优惠商品价格，包含商品币种和价格，格式为“币种+商品价格”，例如 EUR 0.15。部分国家/地区会返回“货币符号+商品价格”，例如中国境内（不包含中国香港、中国澳门、中国台湾）返回“￥0.15”。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>microPrice</p></td>         <td class="cellrowborder" width="21%">          <p>number</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>显示的优惠商品实际价格乘以1,000,000后的微单位价格。例如某个商品实际价格是1.99美元，则该商品对应的微单位价格为：1.99*1000000=1990000。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 798px;">     <h2 id="section151973366473" device-type="phone,tablet,2in1,wearable,tv">SubscriptionInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section151973366473" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>订阅信息。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>periodUnit</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section3468210113210">PeriodUnit</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>订阅周期单位。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>periodCount</p></td>         <td class="cellrowborder" width="21%">          <p>number</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>订阅周期数量。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>groupId</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>订阅组ID。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>groupLevel</p></td>         <td class="cellrowborder" width="21%">          <p>number</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>商品的订阅等级。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>hasEligibilityForIntroOffer</p></td>         <td class="cellrowborder" width="21%">          <p>boolean</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>用户是否享受过推介促销。取值如下：</p>          <ul>           <li>true：已享受过</li>           <li>false：未享受过</li>           <li>其他：未获取到状态</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>introductoryOffer</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section16479185319413">SubscriptionOffer</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>促销信息。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 798px;">     <h2 id="section16479185319413" device-type="phone,tablet,2in1,wearable,tv">SubscriptionOffer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16479185319413" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>促销信息。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>paymentMode</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section23427243315">OfferPaymentMode</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>促销的付费方式。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>periodUnit</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section3468210113210">PeriodUnit</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>订阅周期单位。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>periodCount</p></td>         <td class="cellrowborder" width="21%">          <p>number</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>促销期数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>localPrice</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>促销价格，包含商品币种和价格，格式为“币种+商品价格”，例如 EUR 0.15。部分国家/地区会返回“货币符号+商品价格”，例如中国境内（不包含中国香港、中国澳门、中国台湾）返回“￥0.15”。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>microPrice</p></td>         <td class="cellrowborder" width="21%">          <p>number</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>促销价格的微单位价格。促销价格乘以1,000,000后的微单位价格。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>offerType</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section131398372313">OfferType</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>促销类型。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1937px;">     <h2 id="section1340120344598" device-type="phone,tablet,2in1,wearable,tv">PurchaseParameter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1340120344598" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section107784425446">purchase</a>接口和<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section18798154545516">createPurchase</a>接口的请求参数。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>productId</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>待支付的商品ID。商品ID来源于开发者在<a href="https://developer.huawei.com/consumer/cn/service/josp/agc/index.html" target="_blank">AppGallery Connect</a>中配置商品信息时设置的“商品ID”，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/iap-config-product" target="_blank">配置商品信息</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>productType</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section59035422210">ProductType</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>需要查询的商品类型。</p>          <ul>           <li>CONSUMABLE：消耗型商品</li>           <li>NONCONSUMABLE：非消耗型商品</li>           <li>AUTORENEWABLE：自动续期订阅商品</li>           <li>NONRENEWABLE：非续期订阅商品</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>developerPayload</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>商户侧保留信息。</p>          <p>若该字段有值，在支付成功后的回调结果中会原样返回给应用。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>该参数长度限制为[0, 256]。如超过长度限制，在支付成功后将返回被截断的数据。建议在发起请求前自行验证字段长度，避免非预期截断。</p>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>reservedInfo</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>要求JSON String格式，商户可以将额外需要传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</p>          <p>例如：</p>          <div _ngcontent-cre-c106="" class="highlight-div"><div _ngcontent-cre-c106="" class="highlight-div-header"><div _ngcontent-cre-c106="" class="highlight-div-header-left"><div _ngcontent-cre-c106="" class="handle-button expand-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cre-c106="" class="highlight-div-header-right"><div _ngcontent-cre-c106="" class="handle-button ai-button"></div><div _ngcontent-cre-c106="" class="handle-button line-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cre-c106="" class="handle-button theme-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cre-c106="" class="handle-button copy-button"><div _ngcontent-cre-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cre-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> reservedInfo <span class="hljs-operator">=</span> <span class="hljs-string">"{<span class="hljs-subst">\"</span>key1<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>value1<span class="hljs-subst">\"</span>,<span class="hljs-subst">\"</span>key2<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>value2<span class="hljs-subst">\"</span>}"</span>;</li></ol></pre></div></div>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>该字段为预留字段，可选传入，开发者暂时无需关注。</p>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>promotionalOfferId</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>优惠ID。优惠ID来源于开发者为商品<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/iap-subscription-functions#li1264912560544" target="_blank">配置优惠促销</a>时设置的促销优惠标志符。传递该字段且要生效，需同时在jwsRepresentation字段中传递促销优惠信息。</p>          <p><strong>起始版本：</strong>5.0.0(12)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>applicationUserName</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>用户账户相关联的混淆字符串，唯一标识用户。传递优惠ID场景，可以传递该字段。</p>          <p><strong>起始版本：</strong>5.0.0(12)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>jwsRepresentation</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>包含购买参数信息的JWS格式签名数据。购买参数，如优惠促销等。详细说明见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-server-subscribe-offer-sign">生成优惠签名购买参数</a>。</p>          <p><strong>起始版本：</strong>5.0.0(12)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>quantity</p></td>         <td class="cellrowborder" width="21%">          <p>number</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>购买参数。表示所购买消耗型/非续期订阅商品的数量，需满足以下限制。</p>          <ul>           <li>一次仅针对单商品类型，不支持不同类型混合</li>           <li>一次请求数量不超过10个</li>          </ul>          <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">            <p>如果开发者使用了quantity参数以支持商品的批量购买，则需要在发货时校验下单的商品数量和最终发货商品数量是否一致，避免造成漏发、多发的情况。</p>           </div></div></div>          <p><strong>元服务API：</strong>从版本5.0.3(15)开始，该接口支持在元服务中使用。</p>          <p><strong>起始版本：</strong>5.0.3(15)</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 615px;">     <h2 id="section111613541391" device-type="phone,tablet,2in1,wearable,tv">PurchaseResult<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section111613541391" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section107784425446">purchase</a>接口的返回结果。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>inAppPurchaseData</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>订单数据的JSON字符串，包含的参数请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section494862084917">InAppPurchaseData</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>signature</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>返回使用IAP私钥签署paymentData字符串生成的签名字符串。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>signatureAlgorithm</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>签名算法，固定为SHA256WithRSA/PSS。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 501px;">     <h2 id="section193852021105111" device-type="phone,tablet,2in1,wearable,tv">CreatePurchaseResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section193852021105111" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section18798154545516">createPurchase</a>接口的返回结果。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>purchaseData</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>包含支付结果的JSON字符串，包含的参数请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section650794012482">PurchaseData</a>。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 802px;">     <h2 id="section659703618597" device-type="phone,tablet,2in1,wearable,tv">ConsumePurchaseParameter<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section659703618597" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section754232910168">consumePurchase</a>接口的请求参数。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>purchaseToken</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>用户购买商品的标识，在支付完成时由IAP服务器生成。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>purchaseToken需从购买数据<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section494862084917">InAppPurchaseData</a>中获取。支付成功或者请求<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section78016131463">queryOwnedPurchases</a>接口均会返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section494862084917">InAppPurchaseData</a>的JSON字符串。</p>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>developerChallenge</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>开发者自定义的挑战字，唯一标识此次消耗请求。消耗成功后此挑战字会记录在购买数据中并返回。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>该参数长度限制为[0, 64]。</p>           </div></div></div></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 687px;">     <h2 id="section1343816549919" device-type="phone,tablet,2in1,wearable,tv">ConsumeResult<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1343816549919" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section754232910168">consumePurchase</a>接口的返回结果。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>consumedPurchaseData</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>包含消耗结果数据的JSON字符串。字符串中包含参数请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section494862084917">InAppPurchaseData</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>signature</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>使用IAP私钥签署消耗数据consumedPurchaseData生成的签名字符串。签名算法为参考signatureAlgorithm字段。</p>          <p>应用在收到此签名字符串后，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-verifying-signature">对返回结果验签</a>对consumedPurchaseData的JSON字符串进行验签。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>signatureAlgorithm</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>签名算法，固定为SHA256WithRSA/PSS。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1047px;">     <h2 id="section103714142118" device-type="phone,tablet,2in1,wearable,tv">FinishPurchaseParameter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section103714142118" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section124751324135814">finishPurchase</a>接口请求参数。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>productType</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section59035422210">ProductType</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>商品类型。</p>          <ul>           <li>CONSUMABLE：消耗型商品</li>           <li>NONCONSUMABLE：非消耗型商品</li>           <li>AUTORENEWABLE：自动续期订阅商品</li>           <li>NONRENEWABLE：非续期订阅商品</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>purchaseToken</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>购买订单中返回的购买token。</p>          <p>单次购买中与具体购买订单一一对应；订阅购买中与订阅Id一一对应。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>purchaseToken需从购买数据<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section260562820380">PurchaseOrderPayload</a>中获取。请求<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section18798154545516">createPurchase</a>或<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1147122418532">queryPurchases</a>接口均会返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section260562820380">PurchaseOrderPayload</a>。</p>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>purchaseOrderId</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>购买订单中返回的购买订单ID。最大长度256。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>purchaseOrderId需从购买数据<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section260562820380">PurchaseOrderPayload</a>中获取。请求<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section18798154545516">createPurchase</a>或<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1147122418532">queryPurchases</a>接口均会返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section260562820380">PurchaseOrderPayload</a>。</p>           </div></div></div></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1159px;">     <h2 id="section555872993213" device-type="phone,tablet,2in1,wearable,tv">QueryPurchasesParameter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section555872993213" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section78016131463">queryOwnedPurchases</a>、<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section69451529105019">queryPurchaseRecords</a>和<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1147122418532">queryPurchases</a>接口的请求参数。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.6.1.2" width="20.979999999999997%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.6.1.3" width="7.02%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>productType</p></td>         <td class="cellrowborder" width="20.979999999999997%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section59035422210">ProductType</a></p></td>         <td class="cellrowborder" width="7.02%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>需要查询的商品类型。</p>          <ul>           <li>CONSUMABLE：消耗型商品</li>           <li>NONCONSUMABLE：非消耗型商品</li>           <li>AUTORENEWABLE：自动续期订阅商品</li>           <li>NONRENEWABLE：非续期订阅商品</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>continuationToken</p></td>         <td class="cellrowborder" width="20.979999999999997%">          <p>string</p></td>         <td class="cellrowborder" width="7.02%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>支持分页查询的数据定位标志。</p>          <p>第1次查询时可以不传该参数。如果用户拥有的商品数量非常大，当响应中存在continuationToken时，应用必须对当前方法发起另一个调用，并传入本次接收到的continuationToken。如果商品仍未查完，仍需要继续发起调用，直到不再返回continuationToken，表示已经返回全部商品。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>queryType</p></td>         <td class="cellrowborder" width="20.979999999999997%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1389262216514">PurchaseQueryType</a></p></td>         <td class="cellrowborder" width="7.02%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>查询类型。默认值为UNFINISHED。</p>          <ul>           <li>ALL：消耗型商品、非消耗型商品、自动续期订阅商品和非续期订阅商品的所有购买记录。</li>           <li>UNFINISHED：已购买但未交付的消耗型商品、非消耗型商品、自动续期订阅商品和非续期订阅商品。</li>           <li>CURRENT_ENTITLEMENT：购买的非消耗型商品或当前有效的自动续期订阅商品。</li>          </ul>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section78016131463">queryOwnedPurchases</a>、<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section69451529105019">queryPurchaseRecords</a>场景无需关注此字段。</p>           </div></div></div>          <p><strong>起始版本：</strong>4.1.0(11)</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 921px;">     <h2 id="section7249204210514" device-type="phone,tablet,2in1,wearable,tv">QueryPurchasesResult<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7249204210514" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section78016131463">queryOwnedPurchases</a>和<a href="/consumer/cn/doc/harmonyos-references/iap-iap#section69451529105019">queryPurchaseRecords</a>接口的返回结果。</p>     <p><strong>废弃说明：</strong>从4.1.0(11)开始废弃。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>productList</p></td>         <td class="cellrowborder" width="21%">          <p>string[]</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>商品ID的数组。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>inAppPurchaseDataList</p></td>         <td class="cellrowborder" width="21%">          <p>string[]</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>该字段以JSON字符串的形式记录<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section494862084917">InAppPurchaseData</a>的数据，用于配合inAppSignatureList验签。每个JSON字符串包含的参数请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section494862084917">InAppPurchaseData</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>inAppSignatureList</p></td>         <td class="cellrowborder" width="21%">          <p>string[]</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>对应inAppPurchaseDataList中每一个字符串的签名字符串。过程中使用IAP私钥签署，签名算法请参考signatureAlgorithm字段。</p>          <p>应用需要对inAppPurchaseDataList中的每个JSON字符串都进行验签，验签方法请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-verifying-signature">对返回结果验签</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>continuationToken</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>支持分页查询的数据定位标志。</p>          <p>如果用户拥有的商品数量非常大，当响应中存在continuationToken时，应用必须对当前方法发起另一个调用，并传入本次接收到的continuationToken。如果商品仍未查完，仍需要继续发起调用，直到不再返回continuationToken，表示已经返回全部商品。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>signatureAlgorithm</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>签名算法，固定为SHA256WithRSA/PSS。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 642px;">     <h2 id="section820381425513" device-type="phone,tablet,2in1,wearable,tv">QueryPurchaseResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section820381425513" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section1147122418532">queryPurchases</a>接口的返回结果。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>purchaseDataList</p></td>         <td class="cellrowborder" width="21%">          <p>string[]</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iap-data-model#section650794012482">PurchaseData</a>字符串的数组。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>continuationToken</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="44%">          <p>支持分页查询的数据定位标志。</p>          <p>如果用户拥有的商品数量非常大，当响应中存在continuationToken时，应用必须对当前方法发起另一个调用，并传入本次接收到的continuationToken。如果商品仍未查完，仍需要继续发起调用，直到不再返回continuationToken，表示已经返回全部商品。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 541px;">     <h2 id="section12131915171317" device-type="phone,tablet,2in1,wearable,tv">UIWindowParameter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12131915171317" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section39973360502">iap.showManagedSubscriptions</a>接口界面窗口参数。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Payment.IAP</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>windowScreenMode</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/iap-iap#section15231134814464">WindowScreenMode</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>界面窗口模式。</p>          <ul>           <li>DIALOG_BOX：弹窗模式</li>           <li>FULLSCREEN：全屏模式</li>          </ul></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>