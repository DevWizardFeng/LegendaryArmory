<h1 _ngcontent-wfa-c119="" class="doc-title ng-star-inserted" title="IFAA"> IFAA </h1>

<div _ngcontent-wfa-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>IFAA提供移动端免密身份认证能力，实现接入IIFAA（互联网可信认证联盟）的业务免密登录，免密支付等业务场景。（注：IFAA在本文中指HarmonyOS系统免密认证模块，IIFAA在本文中指联盟及相关技术规范）</p> <p>支持的设备类型为：手机, 2in1, 平板</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <div class="tiledSection"><h2 id="section11643194565217" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11643194565217" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { ifaa } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.OnlineAuthenticationKit'</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section3953201212159" device-type="phone,2in1,tablet">getVersionSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3953201212159" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getVersionSync(): number</p> <p>该接口用于获取IFAA免密认证接口的版本号，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>number</p> </td> <td class="cellrowborder" width="50%"><p>返回IFAA免密认证的接口版本号。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span> = ifaa.<span class="hljs-title function_">getVersionSync</span>();</li><li><span class="hljs-comment">// 开发者处理res</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section107341055618" device-type="phone,2in1,tablet">getAnonymousIdSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section107341055618" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAnonymousIdSync(userToken: Uint8Array): Uint8Array</p> <p>该接口用于获取IFAA免密认证的匿名化ID，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>userToken</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>唯一标识用户的id。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="50%"><p>返回IFAA免密认证的匿名化ID。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；此处</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">getAnonIdResult</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Uint8Array</span> </span><span class="">= </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">getAnonymousIdSync</span></span><span class="">(</span><span class="">arg</span><span class="">)</span><span class="">;</span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">getAnonIdResult ....</span></span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section35755582217" device-type="phone,2in1,tablet">getAnonymousId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section35755582217" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAnonymousId(userToken: Uint8Array): Promise&lt;Uint8Array&gt;</p> <p>该接口用于获取IFAA免密认证的匿名化ID，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>userToken</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>唯一标识用户的id。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回匿名化ID。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；此处</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">getAnonIdPromise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">&gt;</span><span class=""> = </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">getAnonymousId</span></span><span class="">(</span><span class="">arg</span><span class="">)</span><span class="">;</span></li><li><span class="">getAnonIdPromise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">getAnonymousId</span></span><span class="hljs-string">."</span>);</li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">result</span></span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">getAnonymousId</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li> <span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section52081777316" device-type="phone,2in1,tablet">getAnonymousId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section52081777316" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAnonymousId(userToken: Uint8Array, callback: AsyncCallback&lt;Uint8Array&gt;): void</p> <p>该接口用于获取IFAA免密认证的匿名化ID，使用Callback异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="24.85%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="25.840000000000003%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="24.310000000000002%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.85%"><p>userToken</p> </td> <td class="cellrowborder" width="25.840000000000003%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="24.310000000000002%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>唯一标识用户的id。</p> </td> </tr> <tr><td class="cellrowborder" width="24.85%"><p>callback</p> </td> <td class="cellrowborder" width="25.840000000000003%"><p>AsyncCallback&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="24.310000000000002%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>回调函数，用于获取返回数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；此处</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">getAnonymousId</span></span><span class="">(</span><span class="">arg</span><span class="">,</span></li><li>  <span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">, </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Uint8Array</span></span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call getAnonymousId. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">getAnonymousId</span></span><span class="hljs-string">."</span>);</li><li>      <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">result</span></span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1730317551650" device-type="phone,2in1,tablet">queryStatusSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1730317551650" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>queryStatusSync(userToken: Uint8Array): boolean</p> <p>该接口用于查询IFAA免密认证的开通状态，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>userToken</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>唯一标识用户的id。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>boolean</p> </td> <td class="cellrowborder" width="50%"><p>返回IFAA免密认证的开通状态。true代表已开通，false代表未开通。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照I</span></span><span class=""><span class="hljs-comment">IFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；此处</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">status</span></span><span class="">: </span><span class=""><span class="hljs-built_in">boolean</span> </span><span class="">= </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">queryStatusSync</span></span><span class="">(</span><span class="">arg</span><span class="">)</span><span class="">;</span></li><li><span class="hljs-keyword">if</span> <span class="">(</span><span class="">status</span><span class="">) </span><span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"ifaa registered"</span></span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"ifaa deregistered"</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1063713219317" device-type="phone,2in1,tablet">queryStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1063713219317" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>queryStatus(userToken: Uint8Array): Promise&lt;boolean&gt;</p> <p>该接口用于查询IFAA免密认证的开通状态，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>userToken</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>唯一标识用户的id。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;boolean&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，true代表已开通，false代表未开通。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">promise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-built_in">boolean</span></span><span class="">&gt;</span><span class=""> = </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">queryStatus</span></span><span class="">(</span><span class="">arg</span><span class="">)</span><span class="">;</span></li><li><span class="">promise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">queryStatus</span></span><span class="hljs-string">."</span>);</li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">result</span></span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">queryStatus</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1448852918317" device-type="phone,2in1,tablet">queryStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1448852918317" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>queryStatus(userToken: Uint8Array, callback: AsyncCallback&lt;boolean&gt;): void</p> <p>该接口用于查询IFAA免密认证的开通状态，使用Callback异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="19.509999999999998%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="30.490000000000002%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>userToken</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="19.509999999999998%"><p>是</p> </td> <td class="cellrowborder" width="30.490000000000002%"><p>唯一标识用户的id。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>AsyncCallback&lt;boolean&gt;</p> </td> <td class="cellrowborder" width="19.509999999999998%"><p>是</p> </td> <td class="cellrowborder" width="30.490000000000002%"><p>回调函数，用于获取开通状态，true代表已开通，false代表未开通。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；此处</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">queryStatus</span></span><span class="">(</span><span class="">arg</span><span class="">,</span></li><li>  <span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">, </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">boolean</span></span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">queryStatus</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">queryStatus</span></span><span class="hljs-string">."</span>);</li><li>      <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">result</span></span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section52104409318" device-type="phone,2in1,tablet">register<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section52104409318" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>register(registerData: Uint8Array): Promise&lt;Uint8Array&gt;</p> <p>该接口用于开通IFAA免密认证，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="20.8%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="29.2%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>registerData</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="20.8%"><p>是</p> </td> <td class="cellrowborder" width="29.2%"><p>IIFAA服务器下发的TLV格式的开通数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回开通数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">registerPromise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">&gt;</span><span class=""> = </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">register</span></span><span class="">(</span><span class="">arg</span><span class="">)</span><span class="">;</span></li><li><span class="">registerPromise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">registerResult</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">register</span></span><span class="hljs-string">."</span>);</li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">registerResult </span></span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span><span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">register</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1022514567320" device-type="phone,2in1,tablet">register<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1022514567320" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>register(registerData: Uint8Array, callback: AsyncCallback&lt;Uint8Array&gt;): void</p> <p>该接口用于开通IFAA免密认证，使用Callback异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="22.08%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="27.92%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>registerData</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="22.08%"><p>是</p> </td> <td class="cellrowborder" width="27.92%"><p>IIFAA服务器下发的TLV格式的开通数据。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>AsyncCallback&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="22.08%"><p>是</p> </td> <td class="cellrowborder" width="27.92%"><p>回调函数，用于获取返回数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；此处</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">register</span></span><span class="">(</span><span class="">arg</span><span class="">, </span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">, </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">registerResult</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Uint8Array</span></span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-keyword">if</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">register</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">register</span></span><span class="hljs-string">."</span>);</li><li>    <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 开发者处理</span></span><span class=""><span class="hljs-comment">registerResult ....</span></span></li><li>  <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section9478154547" device-type="phone,2in1,tablet">preAuthSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9478154547" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>preAuthSync(): Uint8Array</p> <p>该接口用于获取IFAA免密认证的预认证参数，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="50%"><p>返回IFAA免密认证的预认证参数，其中存在用于后续进行生物认证时所需的挑战值（challenge）。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">preAuthResult</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Uint8Array</span> </span><span class="">= </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">preAuthSync</span></span><span class="">()</span><span class="">;</span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">preAuthResult</span></span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section152763151246" device-type="phone,2in1,tablet">preAuth<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section152763151246" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>preAuth(): Promise&lt;Uint8Array&gt;</p> <p>该接口用于获取IFAA免密认证的预认证参数，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回预认证数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">preAuthPromise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">&gt;</span><span class=""> = </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">preAuth</span></span><span class="">()</span><span class="">;</span></li><li><span class="">preAuthPromise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">preAuthResult</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">preAuth</span></span><span class="hljs-string">."</span>);</li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">preAuthResult ....</span></span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span><span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">preAuth</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li><span class="">})</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section135547221441" device-type="phone,2in1,tablet">preAuth<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section135547221441" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p class="typescript">preAuth(callback: AsyncCallback&lt;Uint8Array&gt;): void</p> <p>该接口用于获取IFAA免密认证的预认证参数，使用Callback异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="23.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="26.61%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>AsyncCallback&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="23.39%"><p>是</p> </td> <td class="cellrowborder" width="26.61%"><p>回调函数，用于获取返回预认证数据</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">preAuth</span></span><span class="">(</span></li><li><span class="">  <span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">, </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">preAuthResult</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">:</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Uint8Array</span></span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">preAuth</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">preAuth</span></span><span class="hljs-string">."</span>);</li><li>      <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">preAuthResult..</span></span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section164986291245" device-type="phone,2in1,tablet">authSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section164986291245" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>authSync(authToken: Uint8Array, authData: Uint8Array): Uint8Array</p> <p>该接口用于IFAA免密认证，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>authToken</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>用户身份认证通过的凭证（通过用户认证模块可获取，调用@ohos.userIAM.userAuth的getUserAuthInstance）。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>authData</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>IIFAA服务器下发的TLV格式的认证数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="50%"><p>返回TLV格式的认证结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者调用</span></span><span class=""><span class="hljs-comment">@ohos.userIAM.userAuth</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">getUserAuthInstance</span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">token</span></span><span class=""><span class="hljs-comment">；</span></span><span class=""><span class="hljs-comment">token</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">token </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">authResult</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Uint8Array</span> </span><span class="">= </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">authSync</span></span><span class="">(</span><span class="">token</span><span class="">, </span><span class="">arg</span><span class="">)</span><span class="">;</span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">authResult ....</span></span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section13182438548" device-type="phone,2in1,tablet">auth<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13182438548" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>auth(authToken: Uint8Array, authData: Uint8Array): Promise&lt;Uint8Array&gt;</p> <p>该接口用于IFAA免密认证，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="14.78%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="35.22%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>authToken</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="14.78%"><p>是</p> </td> <td class="cellrowborder" width="35.22%"><p>用户身份认证通过的凭证（通过用户认证模块可获取，调用@ohos.userIAM.userAuth的getUserAuthInstance）。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>authData</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="14.78%"><p>是</p> </td> <td class="cellrowborder" width="35.22%"><p>IIFAA服务器下发的TLV格式的认证数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回TLV格式的认证结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者调用</span></span><span class=""><span class="hljs-comment">@ohos.userIAM.userAuth</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">getUserAuthInstance</span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">token</span></span><span class=""><span class="hljs-comment">；</span></span><span class=""><span class="hljs-comment">token</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">token </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">authPromise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">&gt;</span><span class=""> = </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">auth</span></span><span class="">(</span><span class="">token</span><span class="">, </span><span class="">arg</span><span class="">)</span><span class="">;</span></li><li><span class="">authPromise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">authResult</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">auth</span></span><span class="hljs-string">."</span>);</li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">authResult ....</span></span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span><span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">auth</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1434245542" device-type="phone,2in1,tablet">auth<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1434245542" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>auth(authToken: Uint8Array, authData: Uint8Array, callback: AsyncCallback&lt;Uint8Array&gt;): void</p> <p>该接口用于IFAA免密认证，使用Callback异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>authToken</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>用户身份认证通过的凭证（通过用户认证模块可获取，调用@ohos.userIAM.userAuth的getUserAuthInstance）。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>authData</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>IIFAA服务器下发的TLV格式的认证数据。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>AsyncCallback&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>回调函数，用于获取返回数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者调用</span></span><span class=""><span class="hljs-comment">@ohos.userIAM.userAuth</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">getUserAuthInstance</span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">token</span></span><span class=""><span class="hljs-comment">；</span></span><span class=""><span class="hljs-comment">token</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">token </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">auth</span></span><span class="">(</span><span class="">token</span><span class="">, </span><span class="">arg</span><span class="">,</span></li><li>  <span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">, </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">authResult</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Uint8Array</span></span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">auth</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">auth</span></span><span class="hljs-string">."</span>);</li><li>      <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">authResult ....</span></span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section9272165315411" device-type="phone,2in1,tablet">deregisterSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9272165315411" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deregisterSync(deregisterData: Uint8Array): void</p> <p>该接口用于关闭IFAA免密认证，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>deregisterData</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>IIFAA服务器下发的TLV格式的关闭数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">deregisterSync</span></span><span class="">(</span><span class="">arg</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1778212494169" device-type="phone,2in1,tablet">deregister<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1778212494169" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deregister(deregisterData: Uint8Array): Promise&lt;void&gt;</p> <p>该接口用于关闭IFAA免密认证，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>deregisterData</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>IIFAA服务器下发的TLV格式的关闭数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class="hljs-comment">// 开发者需要按照IIFAA的TLV格式构造入参，并转换为Uint8Array参数；arg需要开发者替换为真实入参。</span></li><li><span class="hljs-keyword">let</span> arg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0</span>]);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">promise</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; = ifaa.<span class="hljs-title function_">deregister</span>(arg);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">()=&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing deregister."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call deregister. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section64788111717" device-type="phone,2in1,tablet">deregister<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section64788111717" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deregister(deregisterData: Uint8Array, callback: AsyncCallback&lt;void&gt;): void</p> <p>该接口用于关闭IFAA免密认证，使用Callback异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>deregisterData</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>IIFAA服务器下发的TLV格式的关闭数据。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者需要按照</span></span><span class=""><span class="hljs-comment">IIFAA的TLV</span></span><span class=""><span class="hljs-comment">格式构造入参，并转换为</span></span><span class=""><span class="hljs-comment">Uint8Array</span></span><span class=""><span class="hljs-comment">参数；此处</span></span><span class=""><span class="hljs-comment">arg</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">arg </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">deregister</span></span><span class="">(</span><span class="">arg</span><span class="">,</span></li><li>  <span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">deregister</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">deregister</span></span><span class="hljs-string">."</span>);</li><li>    <span class="">}</span></li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section11283131915711" device-type="phone,2in1,tablet">getProtocolVersionSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11283131915711" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getProtocolVersionSync(): Uint8Array</p> <p>该接口用于获取IFAA免密认证的协议版本号，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="50%"><p>返回IFAA免密认证的协议版本号。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">res</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Uint8Array</span> </span><span class="">= </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">getProtocolVersionSync</span></span><span class="">()</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1244683751715" device-type="phone,2in1,tablet">getProtocolVersion<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1244683751715" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getProtocolVersion(): Promise&lt;Uint8Array&gt;</p> <p>该接口用于获取IFAA免密认证的协议版本号，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回协议版本号。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">promise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">&gt;</span><span class=""> = </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">getProtocolVersion</span></span><span class="">()</span><span class="">;</span></li><li><span class="">promise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">getProtocolVersion</span></span><span class="hljs-string">."</span>);</li><li>  <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 开发者处理</span></span><span class=""><span class="hljs-comment">result</span></span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">getProtocolVersion</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section16704249775" device-type="phone,2in1,tablet">getProtocolVersion<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16704249775" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getProtocolVersion(callback: AsyncCallback&lt;Uint8Array&gt;): void</p> <p>该接口用于获取IFAA免密认证的协议版本号，使用Callback异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>AsyncCallback&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>回调函数，用于获取返回数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">getProtocolVersion</span></span><span class="">(</span></li><li><span class="">  <span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">, </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Uint8Array</span></span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">getProtocolVersion</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">getProtocolVersion</span></span><span class="hljs-string">."</span>);</li><li>      <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 开发者处理</span></span><span class=""><span class="hljs-comment">result</span></span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section17942105810712" device-type="phone,2in1,tablet">getSupportedCertTypesSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17942105810712" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getSupportedCertTypesSync(): Uint8Array</p> <p>该接口用于获取IFAA免密认证支持的证书格式，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="50%"><p>返回IFAA免密认证支持的证书格式。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">result</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Uint8Array</span> </span><span class="">= </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">getSupportedCertTypesSync</span></span><span class="">()</span><span class="">;</span></li><li><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">开发者处理</span></span><span class=""><span class="hljs-comment">result</span></span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section52481991280" device-type="phone,2in1,tablet">getSupportedCertTypes<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section52481991280" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getSupportedCertTypes(): Promise&lt;Uint8Array&gt;</p> <p>该接口用于获取IFAA免密认证支持的证书格式，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回支持的证书格式。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">promise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">&gt;</span><span class=""> = </span><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">getSupportedCertTypes</span></span><span class="">()</span><span class="">;</span></li><li><span class="">promise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">getSupportedCertTypes</span></span><span class="hljs-string">."</span>);</li><li>  <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 开发者处理</span></span><span class=""><span class="hljs-comment">result</span></span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">getSupportedCertTypes</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section04909228817" device-type="phone,2in1,tablet">getSupportedCertTypes<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section04909228817" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getSupportedCertTypes(callback: AsyncCallback&lt;Uint8Array&gt;): void</p> <p>该接口用于获取IFAA免密认证支持的证书格式，使用Callback异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.Ifaa</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>AsyncCallback&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>回调函数，用于获取返回数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-ifaa">IFAA免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100001</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1006100002</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-wfa-c106="" class="highlight-div"><div _ngcontent-wfa-c106="" class="highlight-div-header"><div _ngcontent-wfa-c106="" class="highlight-div-header-left"><div _ngcontent-wfa-c106="" class="handle-button expand-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wfa-c106="" class="highlight-div-header-right"><div _ngcontent-wfa-c106="" class="handle-button ai-button"></div><div _ngcontent-wfa-c106="" class="handle-button line-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wfa-c106="" class="handle-button theme-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wfa-c106="" class="handle-button copy-button"><div _ngcontent-wfa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wfa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span>;</li><li>
</li><li><span class="">ifaa</span><span class="">.</span><span class=""><span class="hljs-title function_">getSupportedCertTypes</span></span><span class="">(</span></li><li><span class="">  <span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">, </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Uint8Array</span></span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call </span><span class=""><span class="hljs-string">getSupportedCertTypes</span></span><span class="hljs-string">. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="">} </span><span class="hljs-keyword">else</span> <span class="">{</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in doing </span><span class=""><span class="hljs-string">getSupportedCertTypes</span></span><span class="hljs-string">."</span>);</li><li>      <span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 开发者处理</span></span><span class=""><span class="hljs-comment">result</span></span></li><li>    <span class="">}</span></li><li><span class="">  }</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> </div> <div></div></div>