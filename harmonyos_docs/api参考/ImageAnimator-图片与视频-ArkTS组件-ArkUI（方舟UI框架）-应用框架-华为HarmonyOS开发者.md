<h1 _ngcontent-tbg-c119="" class="doc-title ng-star-inserted" title="ImageAnimator"> ImageAnimator </h1>

<div _ngcontent-tbg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>提供帧动画组件来实现逐帧播放图片的能力，可以配置需要播放的图片列表，每张图片可以配置时长。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>该组件从API version 7开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>  </div></div></div>  <div class="tiledSection"><h2 id="子组件" device-type="phone,2in1,tablet,wearable,tv">子组件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="子组件" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>无</p> </div>  <div class="tiledSection"><h2 id="接口" device-type="phone,2in1,tablet,wearable,tv">接口<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="接口" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>ImageAnimator()</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> </div>  <div class="tiledSection"><h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>除支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-component-general-attributes">通用属性</a>外，还支持以下属性：</p> </div>  <div class="tiledSection"><h3 id="images" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">images<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="images" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>images(value: Array&lt;ImageFrameInfo&gt;)</p> <p>设置图片帧信息集合。不支持动态更新。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-imageanimator#imageframeinfo对象说明">ImageFrameInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>设置图片帧信息集合。每一帧的帧信息(ImageFrameInfo)包含图片路径、图片大小、图片位置和图片播放时长信息，详见<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-imageanimator#imageframeinfo对象说明">ImageFrameInfo</a>对象说明。</p> <p>默认值：[] </p> <p> <strong>说明：</strong> 传入数组的内容过大时，内存占用会随之升高。此内存由开发者自行控制。因此，开发者在传入数据前，请充分评估内存消耗情况，以避免内存不足等问题。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="state" device-type="phone,2in1,tablet,wearable,tv">state<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="state" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>state(value: AnimationStatus)</p> <p>控制播放状态。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#animationstatus">AnimationStatus</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>默认为初始状态，用于控制播放状态。</p> <p>默认值：AnimationStatus.Initial</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="duration" device-type="phone,2in1,tablet,wearable,tv">duration<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="duration" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>duration(value: number)</p> <p>设置播放时长。当Images中任意一帧图片设置了单独的duration后，该属性设置无效。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>播放时长。</p> <p>value为0时，不播放图片。</p> <p>value平均分配给单张图片的播放时长小于一帧时间，将导致播放异常。</p> <p>设置为负数时，取默认值。</p> <p>value的改变只会在下一次循环开始时生效。</p> <p>单位：毫秒</p> <p>默认值：1000ms</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="reverse" device-type="phone,2in1,tablet,wearable,tv">reverse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reverse" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>reverse(value: boolean)</p> <p>设置播放方向。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>播放方向。</p> <p>false表示从第1张图片播放到最后1张图片，true表示从最后1张图片播放到第1张图片。</p> <p>默认值：false</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="fixedsize" device-type="phone,2in1,tablet,wearable,tv">fixedSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fixedsize" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>fixedSize(value: boolean)</p> <p>设置图片大小是否固定为组件大小。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>设置图片大小是否固定为组件大小。 true表示图片大小与组件大小一致，此时设置图片的width 、height 、top 和left属性无效。false表示每一张图片的width 、height 、top和left属性都要单独设置。图片宽高与组件宽高不一致时，图片不会被拉伸。</p> <p>默认值：true</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="predecodedeprecated" device-type="phone,2in1,tablet,wearable,tv">preDecode<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="predecodedeprecated" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>preDecode(value: number)</p> <p>设置预解码的图片数量。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 7开始支持，从API version 9开始废弃。当前无可替代接口。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>预解码的图片数量。例如，设置为2时，播放当前页时会提前加载后面两张图片至缓存，以提升性能。</p> <p>默认值：0</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="fillmode" device-type="phone,2in1,tablet,wearable,tv">fillMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fillmode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>fillMode(value: FillMode)</p> <p>设置当前播放方向下，动画开始前和结束后的状态。动画结束后的状态由fillMode和reverse属性共同决定。例如，fillMode为Forwards表示停止时维持动画最后一个关键帧的状态，若reverse为false则维持正播的最后一帧，即最后一张图，若reverse为true则维持逆播的最后一帧，即第一张图。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#fillmode">FillMode</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>当前播放方向下，动画开始前和结束后的状态。</p> <p>默认值：FillMode.Forwards</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="iterations" device-type="phone,2in1,tablet,wearable,tv">iterations<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="iterations" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>iterations(value: number)</p> <p>设置播放次数。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>默认播放一次，设置为-1时表示无限次播放，设置为小于-1的负数时取默认值。设置为浮点数时，数值向下取整。</p> <p>默认值：1</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="monitorinvisiblearea17" device-type="phone,2in1,tablet,wearable,tv">monitorInvisibleArea<sup>17+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="monitorinvisiblearea17" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>monitorInvisibleArea(monitorInvisibleArea: boolean)</p> <p>设置组件是否通过系统<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-visible-area-change-event#onvisibleareachange">onVisibleAreaChange</a>的可见性判定，控制组件的暂停和播放。</p> <p><strong>元服务API：</strong> 从API version 17开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">monitorInvisibleArea</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>当设置为true时，组件将基于系统的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-visible-area-change-event#onvisibleareachange">onVisibleAreaChange</a>可见性判定，控制组件的暂停和播放。</p> <p> 当组件的运行状态为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#animationstatus">AnimationStatus</a>的Running时，若判定组件不可见，则自动执行暂停操作；若判定为可见，则自动恢复播放。</p> <p>默认值：false </p> <p> <strong>说明：</strong> </p> <p>当该属性由true动态修改为false时，组件将依据当前的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#animationstatus">AnimationStatus</a>状态进行处理。</p> <p> 例如，若当前状态为Running且因<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-visible-area-change-event#onvisibleareachange">onVisibleAreaChange</a>的不可见回调暂停，则在属性由true改为false后，组件会从上次暂停的位置重新开始播放。</p> <p>由该属性导致的不可见暂停和可见暂停操作不会改变用户设置的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-imageanimator#state">state</a>值。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="imageframeinfo对象说明" device-type="phone,2in1,tablet,wearable,tv">ImageFrameInfo对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imageframeinfo对象说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>图片帧信息集合。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">src</td> <td class="cellrowborder" width="20%">string | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resource">Resource</a><sup>9+</sup> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-image-common#pixelmap">PixelMap</a><sup>12+</sup></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%"><p>图片路径，图片格式为jpg、jpeg、svg、png、bmp、webp、ico和heif，从API Version9开始支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resource">Resource</a>类型的路径，从API version 12开始支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-image-common#pixelmap">PixelMap</a>类型。 </p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> </td> </tr> <tr><td class="cellrowborder" width="20%">width</td> <td class="cellrowborder" width="20%">number | string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>图片宽度。string类型支持number类型取值的字符串形式，可以附带单位，例如"2"、"2px"。</p> <p>默认值：0</p> <p>单位：vp </p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用</p> </td> </tr> <tr><td class="cellrowborder" width="20%">height</td> <td class="cellrowborder" width="20%">number | string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>图片高度。string类型支持number类型取值的字符串形式，可以附带单位，例如"2"、"2px"。</p> <p>默认值：0</p> <p>单位：vp </p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用</p> </td> </tr> <tr><td class="cellrowborder" width="20%">top</td> <td class="cellrowborder" width="20%">number | string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>图片相对于组件左上角的纵向坐标。string类型支持number类型取值的字符串形式，可以附带单位，例如"2"、"2px"。</p> <p>默认值：0</p> <p>单位：vp </p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用</p> </td> </tr> <tr><td class="cellrowborder" width="20%">left</td> <td class="cellrowborder" width="20%">number | string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>图片相对于组件左上角的横向坐标。string类型支持number类型取值的字符串形式，可以附带单位，例如"2"、"2px"。</p> <p>默认值：0</p> <p>单位：vp </p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用</p> </td> </tr> <tr><td class="cellrowborder" width="20%">duration</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>每帧图片的播放时长，单位毫秒。</p> <p>默认值：0</p> <p>不支持负数。设置为负数将导致图片在当前帧长时间停留，影响正常播放。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="事件" device-type="phone,2in1,tablet,wearable,tv">事件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="事件" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>除支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-component-general-events">通用事件</a>外，还支持以下事件：</p> </div>  <div class="tiledSection"><h3 id="onstart" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">onStart<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onstart" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onStart(event: () =&gt; void)</p> <p>状态回调，动画开始播放时触发。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">() =&gt; void</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">状态回调，动画开始播放时触发。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="onpause" device-type="phone,2in1,tablet,wearable,tv">onPause<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpause" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onPause(event: () =&gt; void)</p> <p>状态回调，动画暂停播放时触发。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">() =&gt; void</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">状态回调，动画暂停播放时触发。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="onrepeat" device-type="phone,2in1,tablet,wearable,tv">onRepeat<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onrepeat" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onRepeat(event: () =&gt; void)</p> <p>状态回调，动画重复播放时触发。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">() =&gt; void</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">状态回调，动画重复播放时触发。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oncancel" device-type="phone,2in1,tablet,wearable,tv">onCancel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncancel" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onCancel(event: () =&gt; void)</p> <p>状态回调，动画返回最初状态时触发。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">() =&gt; void</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">状态回调，动画返回最初状态时触发。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="onfinish" device-type="phone,2in1,tablet,wearable,tv">onFinish<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onfinish" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onFinish(event: () =&gt; void)</p> <p>状态回调，动画播放完成时或者停止播放时触发。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">() =&gt; void</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">状态回调，动画播放完成时或者停止播放时触发。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="示例" device-type="phone,2in1,tablet,wearable,tv">示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="示例1播放resource动画" class="firsth2">示例1（播放Resource动画）<i class="anchor-icon anchor-icon-link" anchorid="示例1播放resource动画" tips="复制节点链接"></i></h3><p>通过ImageAnimator组件播放Resource动画。</p> <div _ngcontent-tbg-c106="" class="highlight-div"><div _ngcontent-tbg-c106="" class="highlight-div-header"><div _ngcontent-tbg-c106="" class="highlight-div-header-left"><div _ngcontent-tbg-c106="" class="handle-button expand-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbg-c106="" class="highlight-div-header-right"><div _ngcontent-tbg-c106="" class="handle-button ai-button"></div><div _ngcontent-tbg-c106="" class="handle-button line-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbg-c106="" class="handle-button theme-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbg-c106="" class="handle-button copy-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageAnimatorExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">AnimationStatus</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Initial</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">reverse</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">iterations</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>      <span class="hljs-title class_">ImageAnimator</span>()</li><li>        .<span class="hljs-title function_">images</span>([</li><li>          {</li><li>            <span class="hljs-comment">// $r('app.media.img1')需要替换为开发者所需的图像资源文件。</span></li><li>            <span class="hljs-attr">src</span>: $r(<span class="hljs-string">'app.media.img1'</span>)</li><li>          },</li><li>          {</li><li>            <span class="hljs-comment">// $r('app.media.img2')需要替换为开发者所需的图像资源文件。</span></li><li>            <span class="hljs-attr">src</span>: $r(<span class="hljs-string">'app.media.img2'</span>)</li><li>          },</li><li>          {</li><li>            <span class="hljs-comment">// $r('app.media.img3')需要替换为开发者所需的图像资源文件。</span></li><li>            <span class="hljs-attr">src</span>: $r(<span class="hljs-string">'app.media.img3'</span>)</li><li>          },</li><li>          {</li><li>            <span class="hljs-comment">// $r('app.media.img4')需要替换为开发者所需的图像资源文件。</span></li><li>            <span class="hljs-attr">src</span>: $r(<span class="hljs-string">'app.media.img4'</span>)</li><li>          }</li><li>        ])</li><li>        .<span class="hljs-title function_">duration</span>(<span class="hljs-number">4000</span>)</li><li>        .<span class="hljs-title function_">state</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>)</li><li>        .<span class="hljs-title function_">reverse</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reverse</span>)</li><li>        .<span class="hljs-title function_">fillMode</span>(<span class="hljs-title class_">FillMode</span>.<span class="hljs-property">None</span>)</li><li>        .<span class="hljs-title function_">iterations</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">iterations</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">340</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">240</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">100</span> })</li><li>        .<span class="hljs-title function_">onStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Start'</span>)</li><li>        })</li><li>        .<span class="hljs-title function_">onPause</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Pause'</span>)</li><li>        })</li><li>        .<span class="hljs-title function_">onRepeat</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Repeat'</span>)</li><li>        })</li><li>        .<span class="hljs-title function_">onCancel</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Cancel'</span>)</li><li>        })</li><li>        .<span class="hljs-title function_">onFinish</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Finish'</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Stopped</span></li><li>        })</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'start'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Running</span></li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'pause'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Paused</span> <span class="hljs-comment">// 显示当前帧图片</span></li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'stop'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Stopped</span> <span class="hljs-comment">// 显示动画的起始帧图片</span></li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'reverse'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reverse</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">reverse</span></li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'once'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">iterations</span> = <span class="hljs-number">1</span></li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'infinite'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">iterations</span> = -<span class="hljs-number">1</span> <span class="hljs-comment">// 无限循环播放</span></li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>      }</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="359" originwidth="347" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115438.00127652356775136859626684635263:50001231000000:2800:06137EF23BBFABA0D1F3A2CB9566C8E2183CF886B8F71E2918DB5CC8D127D938.gif" width="347" height="359"></span></p> </div>  <div class="tiledSection"><h3 id="示例2播放pixelmap动画">示例2（播放PixelMap动画）<i class="anchor-icon anchor-icon-link" anchorid="示例2播放pixelmap动画" tips="复制节点链接"></i></h3><p>通过ImageAnimator组件播放PixelMap动画。</p> <div _ngcontent-tbg-c106="" class="highlight-div"><div _ngcontent-tbg-c106="" class="highlight-div-header"><div _ngcontent-tbg-c106="" class="highlight-div-header-left"><div _ngcontent-tbg-c106="" class="handle-button expand-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbg-c106="" class="highlight-div-header-right"><div _ngcontent-tbg-c106="" class="handle-button ai-button"></div><div _ngcontent-tbg-c106="" class="handle-button line-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbg-c106="" class="handle-button theme-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbg-c106="" class="handle-button copy-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageAnimatorExample</span> {</li><li>  <span class="hljs-attr">imagePixelMap</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">PixelMap</span>&gt; = [];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">AnimationStatus</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Initial</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">reverse</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">iterations</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">images</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">ImageFrameInfo</span>&gt; = [];</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// $r('app.media.1')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.1'</span>)));</li><li>    <span class="hljs-comment">// $r('app.media.2')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.2'</span>)));</li><li>    <span class="hljs-comment">// $r('app.media.3')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.3'</span>)));</li><li>    <span class="hljs-comment">// $r('app.media.4')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.4'</span>)));</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">images</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>[<span class="hljs-number">0</span>] });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">images</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>[<span class="hljs-number">1</span>] });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">images</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>[<span class="hljs-number">2</span>] });</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">images</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">src</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>[<span class="hljs-number">3</span>] });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>      <span class="hljs-title class_">ImageAnimator</span>()</li><li>        .<span class="hljs-title function_">images</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">images</span>)</li><li>        .<span class="hljs-title function_">duration</span>(<span class="hljs-number">2000</span>)</li><li>        .<span class="hljs-title function_">state</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>)</li><li>        .<span class="hljs-title function_">reverse</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reverse</span>)</li><li>        .<span class="hljs-title function_">fillMode</span>(<span class="hljs-title class_">FillMode</span>.<span class="hljs-property">None</span>)</li><li>        .<span class="hljs-title function_">iterations</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">iterations</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">340</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">240</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">100</span> })</li><li>        .<span class="hljs-title function_">onStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Start'</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onPause</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Pause'</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onRepeat</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Repeat'</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onCancel</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Cancel'</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onFinish</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Finish'</span>);</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Stopped</span>;</li><li>        })</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'start'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Running</span>;</li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'pause'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Paused</span>; <span class="hljs-comment">// 显示当前帧图片</span></li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'stop'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Stopped</span>; <span class="hljs-comment">// 显示动画的起始帧图片</span></li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'reverse'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">reverse</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">reverse</span>;</li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'once'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">iterations</span> = <span class="hljs-number">1</span>;</li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'infinite'</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">padding</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">iterations</span> = -<span class="hljs-number">1</span>; <span class="hljs-comment">// 无限循环播放</span></li><li>        }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>      }</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getPixmapFromMedia</span>(<span class="hljs-params">resource: Resource</span>) {</li><li>    <span class="hljs-keyword">let</span> unit8Array = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>?.<span class="hljs-title function_">getMediaContent</span>(resource.<span class="hljs-property">id</span>);</li><li>    <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(unit8Array?.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, unit8Array.<span class="hljs-property">buffer</span>.<span class="hljs-property">byteLength</span>));</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">createPixelMap</span>: image.<span class="hljs-property">PixelMap</span> = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>({</li><li>      <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span></li><li>    });</li><li>    <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">release</span>();</li><li>    <span class="hljs-keyword">return</span> createPixelMap;</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="400" originwidth="355" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115438.10316098490978987529941499575928:50001231000000:2800:4E9E5ABBD3F9E175A2F4C1BCAEDB3B97190AA09630FCA4B227AA8597ACF13623.gif" width="355" height="400"></span></p> </div>  <div class="tiledSection"><h3 id="示例3设置不可见自动停播">示例3（设置不可见自动停播）<i class="anchor-icon anchor-icon-link" anchorid="示例3设置不可见自动停播" tips="复制节点链接"></i></h3><p>通过<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-imageanimator#monitorinvisiblearea17">monitorInvisibleArea</a>属性实现了当ImageAnimator的<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-imageanimator#state">state</a>属性为AnimationStatus.Running时，控制组件在不可见时停止播放，在可见时恢复播放。</p> <div _ngcontent-tbg-c106="" class="highlight-div"><div _ngcontent-tbg-c106="" class="highlight-div-header"><div _ngcontent-tbg-c106="" class="highlight-div-header-left"><div _ngcontent-tbg-c106="" class="handle-button expand-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbg-c106="" class="highlight-div-header-right"><div _ngcontent-tbg-c106="" class="handle-button ai-button"></div><div _ngcontent-tbg-c106="" class="handle-button line-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbg-c106="" class="handle-button theme-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbg-c106="" class="handle-button copy-button"><div _ngcontent-tbg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ImageAnimatorAutoPauseTest</span> {</li><li>  <span class="hljs-attr">scroller</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">AnimationStatus</span> = <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Running</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">reverse</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">iterations</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">preCallBack</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Null'</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">TopStart</span> }) {</li><li>      <span class="hljs-title class_">Scroll</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scroller</span>) {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">ImageAnimator</span>()</li><li>            .<span class="hljs-title function_">images</span>([</li><li>              {</li><li>                <span class="hljs-comment">// $r('app.media.Clouds')需要替换为开发者所需的图像资源文件。</span></li><li>                <span class="hljs-attr">src</span>: $r(<span class="hljs-string">'app.media.Clouds'</span>)</li><li>              },</li><li>              {</li><li>                <span class="hljs-comment">// $r('app.media.landscape')需要替换为开发者所需的图像资源文件。</span></li><li>                <span class="hljs-attr">src</span>: $r(<span class="hljs-string">'app.media.landscape'</span>)</li><li>              },</li><li>              {</li><li>                <span class="hljs-comment">// $r('app.media.sky')需要替换为开发者所需的图像资源文件。</span></li><li>                <span class="hljs-attr">src</span>: $r(<span class="hljs-string">'app.media.sky'</span>)</li><li>              },</li><li>              {</li><li>                <span class="hljs-comment">// $r('app.media.mountain')需要替换为开发者所需的图像资源文件。</span></li><li>                <span class="hljs-attr">src</span>: $r(<span class="hljs-string">'app.media.mountain'</span>)</li><li>              }</li><li>            ])</li><li>            .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>            .<span class="hljs-title function_">monitorInvisibleArea</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">clip</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">duration</span>(<span class="hljs-number">4000</span>)</li><li>            .<span class="hljs-title function_">state</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>)</li><li>            .<span class="hljs-title function_">reverse</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">reverse</span>)</li><li>            .<span class="hljs-title function_">fillMode</span>(<span class="hljs-title class_">FillMode</span>.<span class="hljs-property">Forwards</span>)</li><li>            .<span class="hljs-title function_">iterations</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">iterations</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">340</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">240</span>)</li><li>            .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">100</span> })</li><li>            .<span class="hljs-title function_">onStart</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">preCallBack</span> = <span class="hljs-string">"Start"</span>;</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ImageAnimator Start'</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">onPause</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">preCallBack</span> = <span class="hljs-string">"Pause"</span>;</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ImageAnimator Pause'</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">onRepeat</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ImageAnimator Repeat'</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">onCancel</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ImageAnimator Cancel'</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">onFinish</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ImageAnimator Finish'</span>);</li><li>            })</li><li>          <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>            <span class="hljs-title class_">Text</span>(item.<span class="hljs-title function_">toString</span>())</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>              .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">15</span>)</li><li>              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>              .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>              .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>          }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>        }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">scrollable</span>(<span class="hljs-title class_">ScrollDirection</span>.<span class="hljs-property">Vertical</span>) <span class="hljs-comment">// 滚动方向纵向</span></li><li>      .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">On</span>) <span class="hljs-comment">// 滚动条常驻显示</span></li><li>      .<span class="hljs-title function_">scrollBarColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Gray</span>) <span class="hljs-comment">// 滚动条颜色</span></li><li>      .<span class="hljs-title function_">scrollBarWidth</span>(<span class="hljs-number">10</span>) <span class="hljs-comment">// 滚动条宽度</span></li><li>      .<span class="hljs-title function_">friction</span>(<span class="hljs-number">0.6</span>)</li><li>      .<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">None</span>)</li><li>      .<span class="hljs-title function_">onWillScroll</span>(<span class="hljs-function">(<span class="hljs-params">xOffset: <span class="hljs-built_in">number</span>, yOffset: <span class="hljs-built_in">number</span>, scrollState: ScrollState</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(xOffset + <span class="hljs-string">' '</span> + yOffset);</li><li>      })</li><li>      .<span class="hljs-title function_">onScrollEdge</span>(<span class="hljs-function">(<span class="hljs-params">side: Edge</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'To the edge'</span>);</li><li>      })</li><li>      .<span class="hljs-title function_">onScrollStop</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Scroll Stop'</span>);</li><li>      })</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"上次触发的回调（Pause/Start）："</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">preCallBack</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">60</span>, <span class="hljs-attr">left</span>: <span class="hljs-number">20</span> })</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xDCDCDC</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="677" originwidth="320" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115438.59716736718845809596314329805654:50001231000000:2800:DC095FEBF79A218130D1E931AB39300C8D9C30A2699F113244C52DA1ABA9F402.gif" width="320" height="677"></span></p> </div> </div> <div></div></div>