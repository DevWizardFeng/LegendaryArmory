<h1 _ngcontent-kit-c119="" class="doc-title ng-star-inserted" title="Interface (AVPlayer)"> Interface (AVPlayer) </h1>

<div _ngcontent-kit-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</li>       <li>本Interface首批接口从API version 9开始支持。</li>      </ul>     </div></div></div>    <p>播放管理类，用于管理和播放媒体资源。在调用AVPlayer的方法前，需要先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreateavplayer9">createAVPlayer()</a>构建一个AVPlayer实例。</p>    <p>应用需要按照实际业务需求合理使用AVPlayer对象，按需创建并及时释放，避免持有过多AVPlayer实例导致内存消耗过大，否则在一定情况下可能导致系统终止应用。</p>    <p>Audio/Video播放demo可参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/using-avplayer-for-playback" target="_blank">音频播放开发指导</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-playback" target="_blank">视频播放开发指导</a>。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>在使用AVPlayer实例的方法时，建议开发者注册相关回调，主动获取当前状态变化。</p>      <ul>       <li><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onstatechange9">on('stateChange')</a>：监听播放状态机AVPlayerState切换。</li>       <li><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onerror9">on('error')</a>：监听错误事件。</li>      </ul>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 8173px;">     <h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">url<sup>9+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>媒体URL，只允许在<strong>idle</strong>状态下设置。</p>          <p>支持的视频格式(mp4、mpeg-ts、mkv)。</p>          <p>支持的音频格式(m4a、aac、mp3、ogg、wav、flac、amr、ape)。</p>          <p><strong>支持路径示例</strong>：</p>          <p>1. fd类型播放：fd://xx。</p>          <p><span><img originheight="89" originwidth="179" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115200.15838897672374226208726690732528:50001231000000:2800:E8C119455801C18106959672A2652BF7F0F321D6C7E8298598B308657C765BF4.png" class="notEnlarge" width="160" height="79.55307262569832"></span></p>          <p>2. http网络播放: http://xx。</p>          <p>3. https网络播放: https://xx。</p>          <p>4. hls网络播放路径：http://xx或者https://xx。</p>          <p><strong>说明：</strong></p>          <p>- 设置网络播放路径，需<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions" target="_blank">声明权限</a>：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/permissions-for-all#ohospermissioninternet" target="_blank">ohos.permission.INTERNET</a>，相关错误码: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">201</a>。</p>          <p>- 从API version 11开始不支持webm。</p>          <p>- 将资源句柄（fd）传递给 AVPlayer 实例之后，请不要通过该资源句柄做其他读写操作，包括但不限于将同一个资源句柄传递给多个 AVPlayer / AVMetadataExtractor / AVImageGenerator / AVTranscoder。同一时间通过同一个资源句柄读写文件时存在竞争关系，将导致媒体播放器数据获取异常。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fdSrc<sup>9+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avfiledescriptor9">AVFileDescriptor</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>媒体文件描述，只允许在<strong>idle</strong>状态下设置。</p>          <p><strong>使用场景</strong>：应用中的媒体资源被连续存储在同一个文件中。</p>          <p>支持的视频格式（mp4、mpeg-ts、mkv）。</p>          <p>支持的音频格式（m4a、aac、mp3、ogg、wav、flac、amr、ape）。</p>          <p><strong>使用示例</strong>：</p>          <p>假设一个连续存储的媒体文件：</p>          <p>视频1（地址偏移：0，字节长度:100）；</p>          <p>视频2（地址偏移：101，字节长度：50）；</p>          <p>视频3（地址偏移：151，字节长度：150）；</p>          <p>1. 播放视频1：AVFileDescriptor { fd = 资源句柄; offset = 0; length = 100; }。</p>          <p>2. 播放视频2：AVFileDescriptor { fd = 资源句柄; offset = 101; length = 50; }。</p>          <p>3. 播放视频3：AVFileDescriptor { fd = 资源句柄; offset = 151; length = 150; }。</p>          <p>假设是一个独立的媒体文件: 请使用src=fd://xx。</p>          <p><strong>说明：</strong></p>          <p>从API version 11开始不支持webm。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dataSrc<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avdatasrcdescriptor10">AVDataSrcDescriptor</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>流式媒体资源描述，只允许在<strong>idle</strong>状态下设置。</p>          <p><strong>使用场景</strong>：应用播放从远端下载到本地的文件，在应用未下载完整音视频资源时，提前播放已获取的资源数据。若将已获取的资源数据写入到本地文件中，同时从本地文件中读取数据，即可实现边播边缓存的能力。</p>          <p>支持的视频格式（mp4、mpeg-ts、mkv）。</p>          <p>支持的音频格式（m4a、aac、mp3、ogg、wav、flac、amr、ape）。</p>          <p><strong>使用示例</strong>：</p>          <p>假设用户正在从远端服务器获取音视频媒体文件，希望下载到本地的同时播放已经下载好的部分：</p>          <p>1.用户需要获取媒体文件的总大小size（单位为字节），获取不到时设置为-1。</p>          <p>2.用户需要实现回调函数func用于填写数据，如果size = -1，则func形式为：func(buffer: ArrayBuffer, length: number)，此时播放器只会按照顺序获取数据；否则func形式为：func(buffer: ArrayBuffer, length: number, pos: number)，播放器会按需跳转并获取数据。</p>          <p>3.用户设置AVDataSrcDescriptor {fileSize = size, callback = func}。</p>          <p><strong>注意事项</strong>：</p>          <p>如果播放的是mp4/m4a格式用户需要保证moov字段（媒体信息字段）在mdat字段（媒体数据字段）之前，或者moov之前的字段小于10M，否则会导致解析失败无法播放。</p>          <p><strong>说明：</strong></p>          <p>从API version 11开始不支持webm。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">surfaceId<sup>9+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>视频窗口ID，默认无窗口。</p>          <p>仅支持在<strong>initialized</strong>状态下初始化。</p>          <p>初始化后可以在<strong>prepared</strong>/<strong>playing</strong>/<strong>paused</strong>/<strong>completed</strong>/<strong>stopped</strong>状态下重新设置，重新设置后视频播放将在新的窗口渲染。</p>          <p>使用场景：视频播放时的窗口渲染（纯音频播放时不涉及）。</p>          <p><strong>使用示例</strong>：</p>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#getxcomponentsurfaceid9">通过XComponent创建surfaceId</a>。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">loop<sup>9+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>视频循环播放属性，默认'false'，设置为'true'表示循环播放，动态属性。</p>          <p>只允许在<strong>prepared</strong>/<strong>playing</strong>/<strong>paused</strong>/<strong>completed</strong>状态下设置。</p>          <p>直播场景不支持loop设置。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoScaleType<sup>9+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#videoscaletype9">VideoScaleType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>视频缩放模式，默认VIDEO_SCALE_TYPE_FIT，动态属性。</p>          <p>只允许在<strong>prepared</strong>/<strong>playing</strong>/<strong>paused</strong>/<strong>completed</strong>状态下设置。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioInterruptMode<sup>9+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#interruptmode9">audio.InterruptMode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频焦点模型，默认SHARE_MODE，动态属性。</p>          <p>只允许在<strong>prepared</strong>/<strong>playing</strong>/<strong>paused</strong>/<strong>completed</strong>状态下设置。</p>          <p>在第一次调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#play9">play()</a>之前设置， 以便此后中断模式生效。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioRendererInfo<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiorendererinfo8">audio.AudioRendererInfo</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置音频渲染信息。若媒体源包含视频，则usage默认值为STREAM_USAGE_MOVIE，否则usage默认值为STREAM_USAGE_MUSIC。rendererFlags默认值为0。若默认usage不满足需求，则须主动配置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiorendererinfo8">audio.AudioRendererInfo</a>。</p>          <p>只允许在<strong>initialized</strong>状态下设置。</p>          <p>在第一次调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#prepare9">prepare()</a>之前设置，以便音频渲染器信息在之后生效。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioEffectMode<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#audioeffectmode10">audio.AudioEffectMode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置音频音效模式，默认值为EFFECT_DEFAULT，动态属性。audioRendererInfo的usage变动时会恢复为默认值，只允许在<strong>prepared</strong>/<strong>playing</strong>/<strong>paused</strong>/<strong>completed</strong>状态下设置。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">state<sup>9+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avplayerstate9">AVPlayerState</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>音视频播放的状态，全状态有效，可查询参数。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">currentTime<sup>9+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>视频的当前播放位置，单位为毫秒（ms），可查询参数。</p>          <p>返回为(-1)表示无效值，<strong>prepared</strong>/<strong>playing</strong>/<strong>paused</strong>/<strong>completed</strong>状态下有效。</p>          <p>直播场景默认返回(-1)。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">duration<sup>9+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>视频时长，单位为毫秒（ms），可查询参数。</p>          <p>返回为(-1)表示无效值，<strong>prepared</strong>/<strong>playing</strong>/<strong>paused</strong>/<strong>completed</strong>状态下有效。</p>          <p>直播场景默认返回(-1)。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">width<sup>9+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>视频宽，单位为像素（px），可查询参数。</p>          <p>返回为(0)表示无效值，<strong>prepared</strong>/<strong>playing</strong>/<strong>paused</strong>/<strong>completed</strong>状态下有效。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">height<sup>9+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>视频高，单位为像素（px），可查询参数。</p>          <p>返回为(0)表示无效值，<strong>prepared</strong>/<strong>playing</strong>/<strong>paused</strong>/<strong>completed</strong>状态下有效。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1643px;">     <h2 id="onstatechange9" device-type="phone,2in1,tablet,wearable,tv">on('stateChange')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onstatechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'stateChange', callback: OnAVPlayerStateChangeHandle): void</p>     <p>监听播放状态机AVPlayerState切换的事件。</p>     <p><strong>元服务API：</strong> 从API version 11 开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">状态机切换事件回调类型，支持的事件：'stateChange'，用户操作和系统都会触发此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onavplayerstatechangehandle12">OnAVPlayerStateChangeHandle</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">状态机切换事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'stateChange'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">state</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">reason</span>: media.<span class="hljs-property">StateChangeReason</span>) =&gt; {</li><li>    <span class="hljs-keyword">switch</span> (state) {</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'idle'</span>:</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state idle called'</span>);</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'initialized'</span>:</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'initialized prepared called'</span>);</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'prepared'</span>:</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state prepared called'</span>);</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'playing'</span>:</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state playing called'</span>);</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'paused'</span>:</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state paused called'</span>);</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'completed'</span>:</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state completed called'</span>);</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'stopped'</span>:</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state stopped called'</span>);</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'released'</span>:</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state released called'</span>);</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'error'</span>:</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state error called'</span>);</li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-attr">default</span>:</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'unknown state :'</span> + state);</li><li>        <span class="hljs-keyword">break</span>;</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 851px;">     <h2 id="offstatechange9" device-type="phone,2in1,tablet,wearable,tv">off('stateChange')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offstatechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'stateChange', callback?: OnAVPlayerStateChangeHandle): void</p>     <p>取消监听播放状态机<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avplayerstate9">AVPlayerState</a>切换的事件。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">状态机切换事件回调类型，取消注册的事件：'stateChange'</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onavplayerstatechangehandle12">OnAVPlayerStateChangeHandle</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>状态机切换事件回调方法。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'stateChange'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2307px;">     <h2 id="onerror9" device-type="phone,2in1,tablet,wearable,tv">on('error')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onerror9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'error', callback: ErrorCallback): void</p>     <p>监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer">AVPlayer</a>的错误事件，该事件仅用于错误提示，不需要用户停止播控动作。如果此时<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avplayerstate9">AVPlayerState</a>也切至error状态，用户需要通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#reset9">reset()</a>或者<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#release9">release()</a>退出播放操作。</p>     <p><strong>元服务API：</strong> 从API version 11 开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">错误事件回调类型，支持的事件：'error'，用户操作和系统都会触发此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback">ErrorCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">错误事件回调方法，使用播放器的过程中发生错误，会提供错误码ID和错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <p>在API version 9-13，针对网络、服务器等数据流异常，接口上报5400103；从API version 14开始，对应错误细化为错误码5411001-5411011。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameter check failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400101</td>         <td class="cellrowborder" width="50%">No memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400104</td>         <td class="cellrowborder" width="50%">Time out.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400106</td>         <td class="cellrowborder" width="50%">Unsupported format.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5410002</td>         <td class="cellrowborder" width="50%">Seek continuous unsupported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411001</td>         <td class="cellrowborder" width="50%">IO can not find host.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411002</td>         <td class="cellrowborder" width="50%">IO connection timeout.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411003</td>         <td class="cellrowborder" width="50%">IO network abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411004</td>         <td class="cellrowborder" width="50%">IO network unavailable.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411005</td>         <td class="cellrowborder" width="50%">IO no permission.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411006</td>         <td class="cellrowborder" width="50%">IO request denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411007</td>         <td class="cellrowborder" width="50%">IO resource not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411008</td>         <td class="cellrowborder" width="50%">IO SSL client cert needed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411009</td>         <td class="cellrowborder" width="50%">IO SSL connect fail.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411010</td>         <td class="cellrowborder" width="50%">IO SSL server cert untrusted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5411011</td>         <td class="cellrowborder" width="50%">IO unsupported request.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'error happened,and error message is :'</span> + error.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'error happened,and error code is :'</span> + error.<span class="hljs-property">code</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 923px;">     <h2 id="offerror9" device-type="phone,2in1,tablet,wearable,tv">off('error')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offerror9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'error', callback?: ErrorCallback): void</p>     <p>取消监听播放的错误事件。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">错误事件回调类型，取消注册的事件：'error'</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback">ErrorCallback</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>错误事件回调方法，使用播放器的过程中发生错误，会提供错误码ID和错误信息。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'error'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1488px;">     <h2 id="setmediasource12" device-type="phone,2in1,tablet,wearable,tv">setMediaSource<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setmediasource12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setMediaSource(src:MediaSource, strategy?: PlaybackStrategy): Promise&lt;void&gt;</p>     <p>流媒体预下载资源设置，下载url对应的流媒体数据，并暂存在内存中。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-mediasource">MediaSource</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">流媒体预下载媒体来源。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">strategy</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#playbackstrategy12">PlaybackStrategy</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">流媒体预下载播放策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> player = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">headers</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {<span class="hljs-string">"User-Agent"</span> : <span class="hljs-string">"User-Agent-Value"</span>};</li><li>  <span class="hljs-keyword">let</span> mediaSource : media.<span class="hljs-property">MediaSource</span> = media.<span class="hljs-title function_">createMediaSourceWithUrl</span>(<span class="hljs-string">"http://xxx"</span>,  headers);</li><li>  <span class="hljs-keyword">let</span> playStrategy : media.<span class="hljs-property">PlaybackStrategy</span> = {</li><li>    <span class="hljs-attr">preferredWidth</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">preferredHeight</span>: <span class="hljs-number">2</span>,</li><li>    <span class="hljs-attr">preferredBufferDuration</span>: <span class="hljs-number">3</span>,</li><li>    <span class="hljs-attr">preferredHdr</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">preferredBufferDurationForPlaying</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">thresholdForAutoQuickPlay</span>: <span class="hljs-number">5</span></li><li>  };</li><li>  player.<span class="hljs-title function_">setMediaSource</span>(mediaSource, playStrategy);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1467px;">     <h2 id="setplaybackstrategy12" device-type="phone,2in1,tablet,wearable,tv">setPlaybackStrategy<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setplaybackstrategy12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setPlaybackStrategy(strategy: PlaybackStrategy): Promise&lt;void&gt;</p>     <p>设置播放策略，只能在initialized状态下调用。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strategy</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#playbackstrategy12">PlaybackStrategy</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">播放策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Incorrect parameter types. 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> player = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> fileDescriptor = <span class="hljs-keyword">await</span> context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFd</span>(<span class="hljs-string">'xxx.mp4'</span>);</li><li>player.<span class="hljs-property">fdSrc</span> = fileDescriptor</li><li><span class="hljs-keyword">let</span> playStrategy : media.<span class="hljs-property">PlaybackStrategy</span> = {</li><li>  <span class="hljs-attr">preferredWidth</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">preferredHeight</span>: <span class="hljs-number">2</span>,</li><li>  <span class="hljs-attr">preferredBufferDuration</span>: <span class="hljs-number">3</span>,</li><li>  <span class="hljs-attr">preferredHdr</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">mutedMediaType</span>: media.<span class="hljs-property">MediaType</span>.<span class="hljs-property">MEDIA_TYPE_AUD</span>,</li><li>  <span class="hljs-attr">preferredBufferDurationForPlaying</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">thresholdForAutoQuickPlay</span>: <span class="hljs-number">5</span></li><li>};</li><li>player.<span class="hljs-title function_">setPlaybackStrategy</span>(playStrategy);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1701px;">     <h2 id="setplaybackrange18" device-type="phone,2in1,tablet,wearable,tv">setPlaybackRange<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setplaybackrange18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setPlaybackRange(startTimeMs: number, endTimeMs: number, mode?: SeekMode) : Promise&lt;void&gt;</p>     <p>设置播放区间，并通过指定的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#seekmode8">SeekMode</a>跳转到区间开始位置。设置之后，只播放音视频文件设定区间内的内容。该方法异步方式返回执行结果，通过Promise获取返回值。可在<strong>initialized</strong>/<strong>prepared</strong>/<strong>paused</strong>/<strong>stopped</strong>/<strong>completed</strong>状态下使用。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">startTimeMs</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区间开始位置，单位ms，取值[0, duration)。可以设置-1值，系统将会从0位置开始播放。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">endTimeMs</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区间结束位置，单位ms，取值(startTimeMs, duration]。可以设置-1值，系统将会播放到资源末尾。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">mode</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#seekmode8">SeekMode</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>支持SeekMode.SEEK_PREV_SYNC和SeekMode.SEEK_CLOSEST,</p>          <p>默认值: SeekMode.SEEK_PREV_SYNC。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameter check failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">setPlaybackRange</span>(<span class="hljs-number">0</span>, <span class="hljs-number">6000</span>, media.<span class="hljs-property">SeekMode</span>.<span class="hljs-property">SEEK_CLOSEST</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded setPlaybackRange'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to setPlaybackRange'</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1200px;">     <h2 id="prepare9" device-type="phone,2in1,tablet,wearable,tv">prepare<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="prepare9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>prepare(callback: AsyncCallback&lt;void&gt;): void</p>     <p>准备播放音频/视频，需在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onstatechange9">stateChange</a>事件成功触发至initialized状态后，才能调用。使用callback方式异步获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">准备播放的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400106</td>         <td class="cellrowborder" width="50%">Unsupported format. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至initialized状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">prepare</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to prepare,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in preparing'</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1244px;">     <h2 id="prepare9-1" device-type="phone,2in1,tablet,wearable,tv">prepare<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="prepare9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>prepare(): Promise&lt;void&gt;</p>     <p>准备播放音频/视频，需在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onstatechange9">stateChange</a>事件成功触发至initialized状态后，才能调用。通过Promise获取返回值。</p>     <p>如果应用使用到多个短视频频繁切换的场景，为了提升切换性能，可以考虑创建多个AVPlayer对象，提前准备下一个视频，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-smooth-switching" target="_blank">在线短视频流畅切换</a>。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">准备播放的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400106</td>         <td class="cellrowborder" width="50%">Unsupported format. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至initialized状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">prepare</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in preparing'</span>);</li><li>  }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to prepare,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1680px;">     <h2 id="setmediamuted12" device-type="phone,2in1,tablet,wearable,tv">setMediaMuted<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setmediamuted12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setMediaMuted(mediaType: MediaType, muted: boolean ): Promise&lt;void&gt;</p>     <p>设置音频静音/取消音频静音。使用Promise异步回调。</p>     <p>从API version 20开始，支持设置关闭视频画面/取消关闭视频画面。</p>     <p>只能在prepared/playing/paused/completed状态下调用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">mediaType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#mediatype8">MediaType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">播放策略。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">muted</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p><strong>API version 12-19</strong>：仅支持设置音频播放策略，表示音频是否静音播放。true为静音播放，false为取消静音播放。</p>          <p><strong>API version 20</strong>：增加支持设置视频播放策略，表示视频画面是否关闭。true为关闭画面，false为恢复画面。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameter check failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至initialized状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">prepare</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in preparing'</span>);</li><li>    avPlayer.<span class="hljs-title function_">setMediaMuted</span>(media.<span class="hljs-property">MediaType</span>.<span class="hljs-property">MEDIA_TYPE_AUD</span>, <span class="hljs-literal">true</span>);</li><li>  }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to prepare,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1145px;">     <h2 id="play9" device-type="phone,2in1,tablet,wearable,tv">play<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="play9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>play(callback: AsyncCallback&lt;void&gt;): void</p>     <p>开始播放音视频资源，只能在prepared/paused/completed状态调用。使用callback方式异步获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">开始播放的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/paused/completed状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">play</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to play,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in playing'</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1117px;">     <h2 id="play9-1" device-type="phone,2in1,tablet,wearable,tv">play<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="play9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>play(): Promise&lt;void&gt;</p>     <p>开始播放音视频资源，只能在prepared/paused/completed状态调用。通过Promise获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">开始播放的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/paused/completed状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">play</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in playing'</span>);</li><li>  }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to play,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1145px;">     <h2 id="pause9" device-type="phone,2in1,tablet,wearable,tv">pause<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pause9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause(callback: AsyncCallback&lt;void&gt;): void</p>     <p>暂停播放音视频资源，只能在playing状态调用。使用callback方式异步获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">暂停播放的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至playing状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">pause</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to pause,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in pausing'</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1117px;">     <h2 id="pause9-1" device-type="phone,2in1,tablet,wearable,tv">pause<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pause9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause(): Promise&lt;void&gt;</p>     <p>暂停播放音视频资源，只能在playing状态调用。通过Promise获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">暂停播放的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至playing状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">pause</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in pausing'</span>);</li><li>  }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to pause,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1145px;">     <h2 id="stop9" device-type="phone,2in1,tablet,wearable,tv">stop<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(callback: AsyncCallback&lt;void&gt;): void</p>     <p>停止播放音视频资源，只能在prepared/playing/paused/completed状态调用。使用callback方式异步获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">停止播放的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused/completed状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">stop</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to stop,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in stopping'</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1117px;">     <h2 id="stop9-1" device-type="phone,2in1,tablet,wearable,tv">stop<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(): Promise&lt;void&gt;</p>     <p>停止播放音视频资源，只能在prepared/playing/paused/completed状态调用。通过Promise获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">停止播放的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused/completed状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">stop</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in stopping'</span>);</li><li>  }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to stop,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1145px;">     <h2 id="reset9" device-type="phone,2in1,tablet,wearable,tv">reset<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reset9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>reset(callback: AsyncCallback&lt;void&gt;): void</p>     <p>重置播放，只能在initialized/prepared/playing/paused/completed/stopped/error状态调用。使用callback方式异步获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">重置播放的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至initialized/prepared/playing/paused/completed/stopped/error状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">reset</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to reset,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in resetting'</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1117px;">     <h2 id="reset9-1" device-type="phone,2in1,tablet,wearable,tv">reset<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reset9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>reset(): Promise&lt;void&gt;</p>     <p>重置播放，只能在initialized/prepared/playing/paused/completed/stopped/error状态调用。通过Promise获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">重置播放的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至initialized/prepared/playing/paused/completed/stopped/error状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">reset</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in resetting'</span>);</li><li>  }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to reset,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1145px;">     <h2 id="release9" device-type="phone,2in1,tablet,wearable,tv">release<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(callback: AsyncCallback&lt;void&gt;): void</p>     <p>销毁播放资源，除released状态外，均可以调用。使用callback方式异步获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">销毁播放的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发除released以外的状态才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">release</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to release,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing'</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1117px;">     <h2 id="release9-1" device-type="phone,2in1,tablet,wearable,tv">release<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(): Promise&lt;void&gt;</p>     <p>销毁播放资源，除released状态，都可以调用。通过Promise获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">销毁播放的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发除released以外的状态才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">release</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing'</span>);</li><li>  }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to release,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1265px;">     <h2 id="gettrackdescription9" device-type="phone,2in1,tablet,wearable,tv">getTrackDescription<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettrackdescription9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTrackDescription(callback: AsyncCallback&lt;Array&lt;MediaDescription&gt;&gt;): void</p>     <p>获取音视频轨道信息，可以在prepared/playing/paused状态调用。获取所有音视轨道信息，应在数据加载回调后调用。使用callback方式异步获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#mediadescription8">MediaDescription</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当获取音视频轨道信息成功，err为undefined，data为获取到的MediaDescription数组；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">getTrackDescription</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, arrList: <span class="hljs-built_in">Array</span>&lt;media.MediaDescription&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> ((arrList) != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in doing getTrackDescription'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to do getTrackDescription, error:<span class="hljs-subst">${error}</span>`</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1117px;">     <h2 id="gettrackdescription9-1" device-type="phone,2in1,tablet,wearable,tv">getTrackDescription<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettrackdescription9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTrackDescription(): Promise&lt;Array&lt;MediaDescription&gt;&gt;</p>     <p>获取音视频轨道信息，可以在prepared/playing/paused状态调用。通过Promise获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#mediadescription8">MediaDescription</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回音视频轨道信息MediaDescription数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">getTrackDescription</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">arrList: <span class="hljs-built_in">Array</span>&lt;media.MediaDescription&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting TrackDescription'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get TrackDescription, error:<span class="hljs-subst">${error}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1117px;">     <h2 id="getselectedtracks12" device-type="phone,2in1,tablet,wearable,tv">getSelectedTracks<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getselectedtracks12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSelectedTracks(): Promise&lt;Array&lt;number&gt;&gt;</p>     <p>获取已选择的音视频轨道索引，可以在prepared/playing/paused状态调用。通过Promise获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;number&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回已选择音视频轨道索引数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">getSelectedTracks</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">arrList: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting SelectedTracks'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get SelectedTracks, error:<span class="hljs-subst">${error}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1066px;">     <h2 id="getplaybackinfo12" device-type="phone,2in1,tablet,wearable,tv">getPlaybackInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getplaybackinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPlaybackInfo(): Promise&lt;PlaybackInfo&gt;</p>     <p>获取播放过程信息，可以在prepared/playing/paused状态调用。通过Promise获取返回值。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#playbackinfo12">PlaybackInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回播放器信息PlaybackInfo。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avPlayer</span>: media.<span class="hljs-property">AVPlayer</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">playbackInfo</span>: media.<span class="hljs-property">PlaybackInfo</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>media.<span class="hljs-title function_">createAVPlayer</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">player</span>: media.<span class="hljs-property">AVPlayer</span>) =&gt; {</li><li>  <span class="hljs-keyword">if</span> (player != <span class="hljs-literal">null</span>) {</li><li>    avPlayer = player;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating AVPlayer`</span>);</li><li>    <span class="hljs-keyword">if</span> (avPlayer) {</li><li>      <span class="hljs-keyword">try</span> {</li><li>        playbackInfo = <span class="hljs-keyword">await</span> avPlayer.<span class="hljs-title function_">getPlaybackInfo</span>();</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AVPlayer getPlaybackInfo = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(playbackInfo)}</span>`</span>); <span class="hljs-comment">// 打印整个PlaybackInfo的值。</span></li><li>      } <span class="hljs-keyword">catch</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error = <span class="hljs-subst">${error}</span>`</span>);</li><li>      }</li><li>    }</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVPlayer, error message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1165px;">     <h2 id="getplaybackposition18" device-type="phone,2in1,tablet,wearable,tv">getPlaybackPosition<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getplaybackposition18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPlaybackPosition(): number</p>     <p>获取当前播放位置，可以在prepared/playing/paused/completed状态调用。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">返回当前播放位置的时间，单位：毫秒（ms）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至initialized状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">prepare</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in preparing'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">playbackPosition</span>: <span class="hljs-built_in">number</span> = avPlayer.<span class="hljs-title function_">getPlaybackPosition</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AVPlayer getPlaybackPosition== <span class="hljs-subst">${playbackPosition}</span>`</span>);</li><li>  }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to prepare,error message is :'</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1776px;">     <h2 id="selecttrack12" device-type="phone,2in1,tablet,wearable,tv">selectTrack<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="selecttrack12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>selectTrack(index: number, mode?: SwitchMode): Promise&lt;void&gt;</p>     <p>使用AVPlayer播放多音视频轨资源时，选择指定轨道播放，通过Promise获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">index</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">多音视频资源的轨道索引，可通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#gettrackdescription9-1">getTrackDescription</a>接口获取当前资源的所有轨道信息<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#mediadescription8">MediaDescription</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">mode</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#switchmode12">SwitchMode</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">切换视频轨道模式，默认为SMOOTH模式，<strong>仅在DASH协议网络流视频轨切换时生效</strong>，其他场景当前暂不支持。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">选择轨道完成的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameter check failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">avPlayer</span>: media.<span class="hljs-property">AVPlayer</span> = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">audioTrackIndex</span>: <span class="hljs-title class_">Object</span> = <span class="hljs-number">0</span>;</li><li>  avPlayer.<span class="hljs-title function_">getTrackDescription</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, arrList: <span class="hljs-built_in">Array</span>&lt;media.MediaDescription&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (arrList != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arrList.<span class="hljs-property">length</span>; i++) {</li><li>        <span class="hljs-keyword">if</span> (i != <span class="hljs-number">0</span>) {</li><li>          <span class="hljs-comment">// 获取音频轨道列表。</span></li><li>          audioTrackIndex = arrList[i][media.<span class="hljs-property">MediaDescriptionKey</span>.<span class="hljs-property">MD_KEY_TRACK_INDEX</span>];</li><li>        }</li><li>      }</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get TrackDescription, error:<span class="hljs-subst">${error}</span>`</span>);</li><li>    }</li><li>  });</li><li>
</li><li>  <span class="hljs-comment">// 选择其中一个音频轨道。</span></li><li>  avPlayer.<span class="hljs-title function_">selectTrack</span>(<span class="hljs-built_in">parseInt</span>(audioTrackIndex.<span class="hljs-title function_">toString</span>()));</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1635px;">     <h2 id="deselecttrack12" device-type="phone,2in1,tablet,wearable,tv">deselectTrack<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deselecttrack12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deselectTrack(index: number): Promise&lt;void&gt;</p>     <p>使用AVPlayer播放多音轨视频时取消指定音视频轨道播放，通过Promise获取返回值。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">index</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">多音视频资源的轨道索引，来自<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#gettrackdescription9-1">getTrackDescription</a>接口所获取的轨道信息<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#mediadescription8">MediaDescription</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">取消选择曲目完成的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameter check failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avPlayer</span>: media.<span class="hljs-property">AVPlayer</span> = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioTrackIndex</span>: <span class="hljs-title class_">Object</span> = <span class="hljs-number">0</span>;</li><li>avPlayer.<span class="hljs-title function_">getTrackDescription</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, arrList: <span class="hljs-built_in">Array</span>&lt;media.MediaDescription&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (arrList != <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arrList.<span class="hljs-property">length</span>; i++) {</li><li>      <span class="hljs-keyword">if</span> (i != <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-comment">// 获取音频轨道列表。</span></li><li>        audioTrackIndex = arrList[i][media.<span class="hljs-property">MediaDescriptionKey</span>.<span class="hljs-property">MD_KEY_TRACK_INDEX</span>];</li><li>      }</li><li>    }</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get TrackDescription, error:<span class="hljs-subst">${error}</span>`</span>);</li><li>  }</li><li>});</li><li>
</li><li><span class="hljs-comment">// 选择其中一个音频轨道。</span></li><li>avPlayer.<span class="hljs-title function_">selectTrack</span>(<span class="hljs-built_in">parseInt</span>(audioTrackIndex.<span class="hljs-title function_">toString</span>()));</li><li><span class="hljs-comment">// 取消选择上次选中的音频轨道，并恢复到默认音频轨道。</span></li><li>avPlayer.<span class="hljs-title function_">deselectTrack</span>(<span class="hljs-built_in">parseInt</span>(audioTrackIndex.<span class="hljs-title function_">toString</span>()));</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1382px;">     <h2 id="setdecryptionconfig11" device-type="phone,2in1,tablet,wearable,tv">setDecryptionConfig<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setdecryptionconfig11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setDecryptionConfig(mediaKeySession: drm.MediaKeySession, secureVideoPath: boolean): void</p>     <p>设置解密配置。当收到<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onmediakeysysteminfoupdate11">mediaKeySystemInfoUpdate事件</a>时，需根据事件上报的信息创建相关配置并设置解密配置，否则无法播放。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">mediaKeySession</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-mediakeysession">drm.MediaKeySession</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">解密会话</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">secureVideoPath</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">安全视频通路，true表示选择安全视频通路，false表示选择非安全视频通路</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>关于drm模块的示例具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm">@ohos.multimedia.drm</a>。</p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 创建MediaKeySystem系统。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">keySystem</span>:drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">'com.wiseplay.drm'</span>);</li><li>  <span class="hljs-comment">// 创建MediaKeySession解密会话。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">keySession</span>:drm.<span class="hljs-property">MediaKeySession</span> = keySystem.<span class="hljs-title function_">createMediaKeySession</span>(drm.<span class="hljs-property">ContentProtectionLevel</span>.<span class="hljs-property">CONTENT_PROTECTION_LEVEL_SW_CRYPTO</span>);</li><li>  <span class="hljs-comment">// 生成许可证请求、设置许可证响应等。</span></li><li>  <span class="hljs-comment">// 安全视频通路标志。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">secureVideoPath</span>:<span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-comment">// 设置解密配置。</span></li><li>  avPlayer.<span class="hljs-title function_">setDecryptionConfig</span>(keySession, secureVideoPath);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 970px;">     <h2 id="getmediakeysysteminfos11" device-type="phone,2in1,tablet,wearable,tv">getMediaKeySystemInfos<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getmediakeysysteminfos11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getMediaKeySystemInfos(): Array&lt;drm.MediaKeySystemInfo&gt;</p>     <p>获取当前播放的媒体资源的MediaKeySystemInfo。需要在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onmediakeysysteminfoupdate11">mediaKeySystemInfoUpdate事件</a>触发成功后才能调用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-i#mediakeysysteminfo">drm.MediaKeySystemInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">MediaKeySystemInfo数组，MediaKeySystemInfo具有uuid和pssh两个属性。当返回值为undefined时，表示mediaKeySystemInfoUpdate事件未触发。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在mediaKeySystemInfoUpdate事件触发成功后才能调用。</span></li><li>  <span class="hljs-keyword">const</span> infos = avPlayer.<span class="hljs-title function_">getMediaKeySystemInfos</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'GetMediaKeySystemInfos count: '</span> + infos.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; infos.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'GetMediaKeySystemInfos uuid: '</span> + infos[i][<span class="hljs-string">"uuid"</span>]);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'GetMediaKeySystemInfos pssh: '</span> + infos[i][<span class="hljs-string">"pssh"</span>]);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1391px;">     <h2 id="seek9" device-type="phone,2in1,tablet,wearable,tv">seek<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="seek9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>seek(timeMs: number, mode?:SeekMode): void</p>     <p>跳转到指定播放位置，只能在prepared/playing/paused/completed状态调用，可以通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onseekdone9">seekDone事件</a>确认是否生效。</p>     <p>注：直播场景不支持seek。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">timeMs</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的跳转时间节点，单位毫秒（ms），取值范围为[0, <a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#属性">duration</a>]。SEEK_CONTINUOU模式可以额外取值-1，用于表示SEEK_CONTINUOUS模式结束。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">mode</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#seekmode8">SeekMode</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">基于视频I帧的跳转模式，默认为SEEK_PREV_SYNC模式，<strong>仅在视频资源播放时设置</strong>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">seekTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1000</span>;</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused/completed状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">seek</span>(seekTime, media.<span class="hljs-property">SeekMode</span>.<span class="hljs-property">SEEK_PREV_SYNC</span>);</li><li>}</li></ol></pre></div></div>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-comment">// SEEK_CONTINUOUS 可以结合Slider的onChange回调方法进行对应处理，当slideMode为Moving时，触发拖动过程的SeekContinuous。</span></li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">slideMovingTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2000</span>;</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused/completed状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">seek</span>(slideMovingTime, media.<span class="hljs-property">SeekMode</span>.<span class="hljs-property">SEEK_CONTINUOUS</span>);</li><li>
</li><li>  <span class="hljs-comment">// 当slideMode为End时，调用seek(-1, media.SeekMode.SEEK_CONTINUOUS)结束seek。</span></li><li>  avPlayer.<span class="hljs-title function_">seek</span>(-<span class="hljs-number">1</span>, media.<span class="hljs-property">SeekMode</span>.<span class="hljs-property">SEEK_CONTINUOUS</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 778px;">     <h2 id="isseekcontinuoussupported18" device-type="phone,2in1,tablet,wearable,tv">isSeekContinuousSupported<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isseekcontinuoussupported18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isSeekContinuousSupported() : boolean</p>     <p>查询媒体源是否支持以SEEK_CONTINUOUS模式<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#seekmode8">SeekMode</a>进行<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#seek9">seek</a>，在prepared/playing/paused/completed状态调用返回实际值，其余状态调用返回false。对于不支持SEEK_CONTINUOUS模式进行seek的设备，返回false。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">媒体源是否支持以SEEK_CONTINUOUS模式进行seek。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused/completed状态后才能调用。</span></li><li>  <span class="hljs-keyword">let</span> isSupported = avPlayer.<span class="hljs-title function_">isSeekContinuousSupported</span>();</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1091px;">     <h2 id="onseekdone9" device-type="phone,2in1,tablet,wearable,tv">on('seekDone')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onseekdone9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'seekDone', callback: Callback&lt;number&gt;): void</p>     <p>监听seek生效的事件。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">seek生效的事件回调类型，支持的事件：'seekDone'，除SEEK_CONTINUOUS外的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#seekmode8">SeekMode</a>每次调用seek后都会回调此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>回调函数。seek生效的事件回调方法，只会上报用户请求的time位置。</p>          <p><strong>视频播放：</strong><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#seekmode8">SeekMode</a>会造成实际跳转位置与用户设置产生偏差，精准位置需要通过currentTime获取，事件回调的time仅代表完成用户某一次请求。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'seekDone'</span>, <span class="hljs-function">(<span class="hljs-params">seekDoneTime:<span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'seekDone called,and seek time is:'</span> + seekDoneTime);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1043px;">     <h2 id="offseekdone9" device-type="phone,2in1,tablet,wearable,tv">off('seekDone')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offseekdone9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'seekDone', callback?: Callback&lt;number&gt;): void</p>     <p>取消监听seek生效的事件。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">seek生效的事件回调类型，取消注册的事件：'seekDone'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数。seek生效的事件回调方法，只会上报用户请求的time位置。</p>          <p><strong>视频播放：</strong><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#seekmode8">SeekMode</a>会造成实际跳转位置与用户设置产生偏差，精准位置需要通过currentTime获取，事件回调的time仅代表完成用户某一次请求。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'seekDone'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 782px;">     <h2 id="setspeed9" device-type="phone,2in1,tablet,wearable,tv">setSpeed<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setspeed9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSpeed(speed: PlaybackSpeed): void</p>     <p>设置倍速模式，只能在prepared/playing/paused/completed状态调用，可以通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onspeeddone9">speedDone事件</a>确认是否生效。</p>     <p>注：直播场景不支持setSpeed。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">speed</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#playbackspeed8">PlaybackSpeed</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定播放倍速模式。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused/completed状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">setSpeed</span>(media.<span class="hljs-property">PlaybackSpeed</span>.<span class="hljs-property">SPEED_FORWARD_2_00_X</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 947px;">     <h2 id="onspeeddone9" device-type="phone,2in1,tablet,wearable,tv">on('speedDone')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onspeeddone9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'speedDone', callback: Callback&lt;number&gt;): void</p>     <p>监听setSpeed生效的事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">setSpeed生效的事件回调类型，支持的事件：'speedDone'，每次调用setSpeed后都会回调此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当setSpeed成功，上报生效的倍速模式，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#playbackspeed8">PlaybackSpeed</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'speedDone'</span>, <span class="hljs-function">(<span class="hljs-params">speed:<span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'speedDone called,and speed value is:'</span> + speed);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 899px;">     <h2 id="offspeeddone9" device-type="phone,2in1,tablet,wearable,tv">off('speedDone')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offspeeddone9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'speedDone', callback?: Callback&lt;number&gt;): void</p>     <p>取消监听setSpeed生效的事件。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">setSpeed生效的事件回调类型，取消注册的事件：'speedDone'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数。当setSpeed成功，上报生效的倍速模式，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#playbackspeed8">PlaybackSpeed</a>。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'speedDone'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1148px;">     <h2 id="setplaybackrate20" device-type="phone,2in1,tablet,wearable,tv">setPlaybackRate<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setplaybackrate20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setPlaybackRate(rate: number): void</p>     <p>设置倍速模式。只能在prepared/playing/paused/completed状态调用，取值范围是[0.125, 4.0]，可以通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onplaybackratedone20">playbackRateDone</a>事件确认是否生效。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>直播场景不支持setPlaybackRate。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rate</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定播放倍速速率，取值范围为[0.125, 4.0]。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400108</td>         <td class="cellrowborder" width="50%">The parameter check failed, parameter value out of range.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed，if invalid state or live stream.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused/completed状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">setPlaybackRate</span>(<span class="hljs-number">2.0</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 995px;">     <h2 id="onplaybackratedone20" device-type="phone,2in1,tablet,wearable,tv">on('playbackRateDone')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onplaybackratedone20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'playbackRateDone', callback: OnPlaybackRateDone): void</p>     <p>监听<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#setplaybackrate20">setPlaybackRate</a>生效的事件。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">setPlaybackRate生效的事件回调类型，支持的事件：'playbackRateDone'，每次调用setPlaybackRate后都会回调此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onplaybackratedone20">OnPlaybackRateDone</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>setPlaybackRate生效的事件回调方法，上报设置后的播放速率。</p>          <p>从API version 20开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'playbackRateDone'</span>, <span class="hljs-function">(<span class="hljs-params">rate:<span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'playbackRateDone called,and rate value is:'</span> + rate);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 995px;">     <h2 id="offplaybackratedone20" device-type="phone,2in1,tablet,wearable,tv">off('playbackRateDone')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offplaybackratedone20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'playbackRateDone', callback?: OnPlaybackRateDone): void</p>     <p>取消监听<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#setplaybackrate20">setPlaybackRate</a>生效的事件。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">setPlaybackRate生效的事件回调类型，取消注册的事件：'playbackRateDone'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onplaybackratedone20">OnPlaybackRateDone</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>setPlaybackRate生效的事件回调方法，上报设置后的播放速率。如填写该参数，则仅取消注册此回调方法，否则取消注册playbackRateDone事件的所有回调方法。</p>          <p>从API version 20开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'playbackRateDone'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1046px;">     <h2 id="setbitrate9" device-type="phone,2in1,tablet,wearable,tv">setBitrate<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setbitrate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setBitrate(bitrate: number): void</p>     <p>设置比特率，以播放所指定比特率的流媒体资源，当前仅对<strong>HLS/DASH协议网络流</strong>有效。默认情况下，AVPlayer会根据网络连接速度选择合适的比特率。只能在prepared/playing/paused/completed状态调用，可以通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onbitratedone9">bitrateDone</a>事件确认是否生效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">bitrate</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定比特率，须通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onavailablebitrates9">availableBitrates</a>事件获得当前HLS/DASH协议网络流可用的比特率列表，如果用户指定的比特率不在此列表中，则播放器将从可用比特率列表中选择最接近的比特率。如果通过availableBitrates事件获得的比特率列表长度为0，则不支持指定比特率，也不会产生bitrateDone回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bitrate</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">96000</span>;</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused/completed状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">setBitrate</span>(bitrate);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 923px;">     <h2 id="onbitratedone9" device-type="phone,2in1,tablet,wearable,tv">on('bitrateDone')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onbitratedone9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'bitrateDone', callback: Callback&lt;number&gt;): void</p>     <p>监听setBitrate生效的事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">setBitrate生效的事件回调类型，支持的事件：'bitrateDone'，每次调用setBitrate后都会回调此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">setBitrate生效的事件回调方法，上报生效的比特率。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'bitrateDone'</span>, <span class="hljs-function">(<span class="hljs-params">bitrate:<span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'bitrateDone called,and bitrate value is:'</span> + bitrate);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 875px;">     <h2 id="offbitratedone9" device-type="phone,2in1,tablet,wearable,tv">off('bitrateDone')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offbitratedone9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'bitrateDone', callback?: Callback&lt;number&gt;): void</p>     <p>取消监听setBitrate生效的事件。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">setBitrate生效的事件回调类型，取消注册的事件：'bitrateDone'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>setBitrate生效的事件回调方法，上报生效的比特率。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'bitrateDone'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1019px;">     <h2 id="onavailablebitrates9" device-type="phone,2in1,tablet,wearable,tv">on('availableBitrates')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onavailablebitrates9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'availableBitrates', callback: Callback&lt;Array&lt;number&gt;&gt;): void</p>     <p>监听HLS/DASH协议网络流可用的比特率列表，只会在切换prepared状态后上报。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">HLS/DASH协议网络流可用比特率上报事件回调类型，支持的事件：'availableBitrates'，只会在prepared之后上报一次。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;number&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">HLS/DASH协议网络流可用比特率上报事件回调方法，使用数组存放支持的比特率。如果数组长度为0，则不支持指定比特率。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>  <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'availableBitrates'</span>, <span class="hljs-function">(<span class="hljs-params">bitrates: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'availableBitrates called,and availableBitrates length is:'</span> + bitrates.<span class="hljs-property">length</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 971px;">     <h2 id="offavailablebitrates9" device-type="phone,2in1,tablet,wearable,tv">off('availableBitrates')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offavailablebitrates9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'availableBitrates', callback?: Callback&lt;Array&lt;number&gt;&gt;): void</p>     <p>取消监听HLS/DASH协议网络流可用的比特率列表，调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#prepare9">prepare</a>后，上报此事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">HLS/DASH协议网络流可用比特率上报事件回调类型，取消注册的事件：'availableBitrates'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;number&gt;&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>HLS/DASH协议网络流可用比特率上报事件回调方法，使用数组存放支持的比特率。如果数组长度为0，则不支持指定比特率。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'availableBitrates'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1067px;">     <h2 id="onmediakeysysteminfoupdate11" device-type="phone,2in1,tablet,wearable,tv">on('mediaKeySystemInfoUpdate')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onmediakeysysteminfoupdate11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'mediaKeySystemInfoUpdate', callback: Callback&lt;Array&lt;drm.MediaKeySystemInfo&gt;&gt;): void</p>     <p>监听mediaKeySystemInfoUpdate事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">版权保护信息更新上报事件回调类型，支持的事件：'mediaKeySystemInfoUpdate'，当播放内容的版权保护信息更新时上报事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;drm.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-i#mediakeysysteminfo">MediaKeySystemInfo</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">版权保护信息更新上报事件回调方法，上报MediaKeySystemInfo数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'mediaKeySystemInfoUpdate'</span>, <span class="hljs-function">(<span class="hljs-params">mediaKeySystemInfo: <span class="hljs-built_in">Array</span>&lt;drm.MediaKeySystemInfo&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; mediaKeySystemInfo.<span class="hljs-property">length</span>; i++) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mediaKeySystemInfoUpdate happened uuid: '</span> + mediaKeySystemInfo[i][<span class="hljs-string">"uuid"</span>]);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'mediaKeySystemInfoUpdate happened pssh: '</span> + mediaKeySystemInfo[i][<span class="hljs-string">"pssh"</span>]);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 971px;">     <h2 id="offmediakeysysteminfoupdate11" device-type="phone,2in1,tablet,wearable,tv">off('mediaKeySystemInfoUpdate')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offmediakeysysteminfoupdate11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'mediaKeySystemInfoUpdate', callback?: Callback&lt;Array&lt;drm.MediaKeySystemInfo&gt;&gt;): void;</p>     <p>取消监听mediaKeySystemInfoUpdate事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">版权保护信息更新上报事件回调类型，取消注册的事件：'mediaKeySystemInfoUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;drm.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-i#mediakeysysteminfo">MediaKeySystemInfo</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">版权保护信息更新上报事件回调方法，上报版权保护信息数组。如填写该参数，则仅取消注册此回调方法，否则取消注册mediaKeySystemInfoUpdate事件的所有回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'mediaKeySystemInfoUpdate'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1654px;">     <h2 id="setloudnessgain21" device-type="phone,2in1,tablet,wearable,tv">setLoudnessGain<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setloudnessgain21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setLoudnessGain(loudnessGain: number): Promise&lt;void&gt;</p>     <p>设置播放器的响度。调用该接口后，响度增益立即生效。使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>当播放处于prepared/playing/paused/completed/stopped状态时，可调用该接口。</li>        <li>调用此接口时，需确保已设置音频渲染信息AVPlayer.audioRendererInfo，audioRendererInfo的usage参数必须是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage">STREAM_USAGE_MUSIC</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage">STREAM_USAGE_MOVIE</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage">STREAM_USAGE_AUDIOBOOK</a>其中之一。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">loudnessGain</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置播放器的响度值，单位为dB，响度范围为[-90.0, 24.0]。默认值为0.0dB。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise. e.g. The function is called in an incorrect state, or the stream usage of audioRendererInfo is not one of <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage">STREAM_USAGE_MUSIC</a>, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage">STREAM_USAGE_MOVIE</a> or <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage">STREAM_USAGE_AUDIOBOOK</a>.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400108</td>         <td class="cellrowborder" width="50%">Parameter check failed. Returned by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">loudnessGain</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  avPlayer.<span class="hljs-property">audioRendererInfo</span> = {</li><li>    <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MOVIE</span>,</li><li>    <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">0</span></li><li>  }</li><li>  avPlayer.<span class="hljs-title function_">setLoudnessGain</span>(loudnessGain);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 782px;">     <h2 id="setvolume9" device-type="phone,2in1,tablet,wearable,tv">setVolume<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setvolume9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setVolume(volume: number): void</p>     <p>设置媒体播放音量，只能在prepared/playing/paused/completed状态调用，可以通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onvolumechange9">volumeChange事件</a>确认是否生效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">volume</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的相对音量大小，取值范围为[0.00-1.00]，1表示最大音量，即100%。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">volume</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  avPlayer.<span class="hljs-title function_">setVolume</span>(volume);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 947px;">     <h2 id="onvolumechange9" device-type="phone,2in1,tablet,wearable,tv">on('volumeChange')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onvolumechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'volumeChange', callback: Callback&lt;number&gt;): void</p>     <p>监听setVolume生效的事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">setVolume生效的事件回调类型，支持的事件：'volumeChange'，每次调用setVolume后都会回调此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">setVolume生效的事件回调方法，上报生效的媒体音量。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'volumeChange'</span>, <span class="hljs-function">(<span class="hljs-params">vol: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'volumeChange called,and new volume is :'</span> + vol);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 899px;">     <h2 id="offvolumechange9" device-type="phone,2in1,tablet,wearable,tv">off('volumeChange')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offvolumechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'volumeChange', callback?: Callback&lt;number&gt;): void</p>     <p>取消监听setVolume生效的事件。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">setVolume生效的事件回调类型，取消注册的事件：'volumeChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>setVolume生效的事件回调方法，上报生效的媒体音量。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'volumeChange'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 923px;">     <h2 id="onendofstream9" device-type="phone,2in1,tablet,wearable,tv">on('endOfStream')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onendofstream9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'endOfStream', callback: Callback&lt;void&gt;): void</p>     <p>监听资源播放至结尾的事件；如果用户设置<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#属性">loop</a>=true，播放会跳转至开头重播；如果用户没有设置loop，会通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onstatechange9">stateChange</a>上报completed状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源播放至结尾的事件回调类型，支持的事件：'endOfStream'，当播放至结尾时会上报此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源播放至结尾的事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'endOfStream'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'endOfStream called'</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 875px;">     <h2 id="offendofstream9" device-type="phone,2in1,tablet,wearable,tv">off('endOfStream')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offendofstream9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'endOfStream', callback?: Callback&lt;void&gt;): void</p>     <p>取消监听资源播放至结尾的事件。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源播放至结尾的事件回调类型，取消注册的事件：'endOfStream'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>资源播放至结尾的事件回调方法。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'endOfStream'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1883px;">     <h2 id="ontimeupdate9" device-type="phone,2in1,tablet,wearable,tv">on('timeUpdate')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ontimeupdate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'timeUpdate', callback: Callback&lt;number&gt;): void</p>     <p>监听资源播放当前时间，单位为毫秒（ms），用于刷新进度条当前位置，默认间隔100ms时间上报，因用户操作（seek）产生的时间变化会立刻上报。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <ul>        <li>直播场景不支持timeUpdate上报。</li>        <li>操作（seek）时必须等待seekdone结束才能根据timeUpdate来更新进度条。</li>       </ul>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">时间更新的回调类型，支持的事件：'timeUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回当前时间。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例1：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'timeUpdate'</span>, <span class="hljs-function">(<span class="hljs-params">time:<span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'timeUpdate called,and new time is :'</span> + time);</li><li>  });</li><li>}</li></ol></pre></div></div>     <p><strong>示例2：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>
</li><li>  <span class="hljs-keyword">let</span> isSeeking = <span class="hljs-literal">false</span>;    <span class="hljs-comment">// 标记是否正在seek。</span></li><li>  <span class="hljs-keyword">let</span> seekTargetTime = <span class="hljs-number">0</span>;   <span class="hljs-comment">// 记录目标时间（单位：毫秒）。</span></li><li>
</li><li>  <span class="hljs-comment">// 1.监听seekDone：确认跳转完成。</span></li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'seekDone'</span>, <span class="hljs-function">(<span class="hljs-params">seekDoneTime: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'seekDone called, and seek time is: '</span> + seekDoneTime);</li><li>    isSeeking = <span class="hljs-literal">false</span>;</li><li>    seekTargetTime = seekDoneTime; <span class="hljs-comment">// 可选：记录最终定位时间。</span></li><li>  });</li><li>
</li><li>  <span class="hljs-comment">// 2.监听timeUpdate：只在seekDone后才更新进度。</span></li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'timeUpdate'</span>, <span class="hljs-function">(<span class="hljs-params">time: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// 关键逻辑：只有seekDone之后才允许更新进度条。</span></li><li>    <span class="hljs-keyword">if</span> (isSeeking) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'seek in progress, ignore timeUpdate'</span>);</li><li>      <span class="hljs-keyword">return</span>; <span class="hljs-comment">// 忽略seek期间的timeUpdate。</span></li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 真正的播放进度更新（seekDone后才生效）。</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'timeUpdate: '</span> + time + <span class="hljs-string">' ms'</span>);</li><li>    <span class="hljs-comment">// 此处进行进度条更新。</span></li><li>  });</li><li>
</li><li>  <span class="hljs-comment">// 3.模拟seek操作。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">seekTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1000</span>;</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至prepared/playing/paused/completed状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">seek</span>(seekTime, media.<span class="hljs-property">SeekMode</span>.<span class="hljs-property">SEEK_PREV_SYNC</span>); <span class="hljs-comment">// 单位：毫秒。</span></li><li>  isSeeking = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 标记正在seek。</span></li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 827px;">     <h2 id="offtimeupdate9" device-type="phone,2in1,tablet,wearable,tv">off('timeUpdate')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offtimeupdate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'timeUpdate', callback?: Callback&lt;number&gt;): void</p>     <p>取消监听资源播放当前时间。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">时间更新的回调类型，取消注册的事件：'timeUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数。返回当前时间。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'timeUpdate'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 899px;">     <h2 id="ondurationupdate9" device-type="phone,2in1,tablet,wearable,tv">on('durationUpdate')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondurationupdate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'durationUpdate', callback: Callback&lt;number&gt;): void</p>     <p>监听资源播放资源的时长，单位为毫秒（ms），用于刷新进度条长度，默认只在prepared上报一次，同时允许一些特殊码流刷新多次时长。</p>     <p>注：直播场景不支持durationUpdate上报。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.62.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">时长更新的回调类型，支持的事件：'durationUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回资源时长。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'durationUpdate'</span>, <span class="hljs-function">(<span class="hljs-params">duration: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'durationUpdate called,new duration is :'</span> + duration);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 851px;">     <h2 id="offdurationupdate9" device-type="phone,2in1,tablet,wearable,tv">off('durationUpdate')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdurationupdate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'durationUpdate', callback?: Callback&lt;number&gt;): void</p>     <p>取消监听资源播放资源的时长。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">时长更新的回调类型，取消注册的事件：'durationUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数。返回资源时长。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'durationUpdate'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 851px;">     <h2 id="onbufferingupdate9" device-type="phone,2in1,tablet,wearable,tv">on('bufferingUpdate')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onbufferingupdate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'bufferingUpdate', callback: OnBufferingUpdateHandler): void</p>     <p>订阅音视频缓存更新事件，仅网络播放支持该订阅事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">播放缓存事件回调类型，支持的事件：'bufferingUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onbufferingupdatehandler12">OnBufferingUpdateHandler</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">播放缓存事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'bufferingUpdate'</span>, <span class="hljs-function">(<span class="hljs-params">infoType: media.BufferingInfoType, value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'bufferingUpdate called,and infoType value is:'</span> + infoType + <span class="hljs-string">', value is :'</span> + value);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 803px;">     <h2 id="offbufferingupdate9" device-type="phone,2in1,tablet,wearable,tv">off('bufferingUpdate')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offbufferingupdate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'bufferingUpdate', callback?: OnBufferingUpdateHandler): void</p>     <p>取消监听音视频缓存更新事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">播放缓存事件回调类型，取消注册的事件：'bufferingUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onbufferingupdatehandler12">OnBufferingUpdateHandler</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">播放缓存事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'bufferingUpdate'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 899px;">     <h2 id="onstartrenderframe9" device-type="phone,2in1,tablet,wearable,tv">on('startRenderFrame')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onstartrenderframe9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'startRenderFrame', callback: Callback&lt;void&gt;): void</p>     <p>订阅视频播放开始首帧渲染的更新事件，仅视频播放支持该订阅事件，该事件仅代表播放服务将第一帧画面送显示模块，实际效果依赖显示服务渲染性能。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">视频播放开始首帧渲染事件回调类型，支持的事件：'startRenderFrame'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">视频播放开始首帧渲染事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'startRenderFrame'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'startRenderFrame called'</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 875px;">     <h2 id="offstartrenderframe9" device-type="phone,2in1,tablet,wearable,tv">off('startRenderFrame')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offstartrenderframe9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'startRenderFrame', callback?: Callback&lt;void&gt;): void</p>     <p>取消监听视频播放开始首帧渲染的更新事件。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">视频播放开始首帧渲染事件回调类型，取消注册的事件：'startRenderFrame'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>视频播放开始首帧渲染事件回调方法。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'startRenderFrame'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 899px;">     <h2 id="onvideosizechange9" device-type="phone,2in1,tablet,wearable,tv">on('videoSizeChange')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onvideosizechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'videoSizeChange', callback: OnVideoSizeChangeHandler): void</p>     <p>监听视频播放宽高变化事件，仅视频播放支持该订阅事件，默认只在prepared状态上报一次，但HLS协议码流会在切换分辨率时上报。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">视频播放宽高变化事件回调类型，支持的事件：'videoSizeChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onvideosizechangehandler12">OnVideoSizeChangeHandler</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">视频播放宽高变化事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'videoSizeChange'</span>, <span class="hljs-function">(<span class="hljs-params">width: <span class="hljs-built_in">number</span>, height: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'videoSizeChange called,and width is:'</span> + width + <span class="hljs-string">', height is :'</span> + height);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 875px;">     <h2 id="offvideosizechange9" device-type="phone,2in1,tablet,wearable,tv">off('videoSizeChange')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offvideosizechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'videoSizeChange', callback?: OnVideoSizeChangeHandler): void</p>     <p>取消监听视频播放宽高变化事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">视频播放宽高变化事件回调类型，取消注册的事件：'videoSizeChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onvideosizechangehandler12">OnVideoSizeChangeHandler</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>视频播放宽高变化事件回调方法。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'videoSizeChange'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 947px;">     <h2 id="onaudiointerrupt9" device-type="phone,2in1,tablet,wearable,tv">on('audioInterrupt')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onaudiointerrupt9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'audioInterrupt', callback: Callback&lt;audio.InterruptEvent&gt;): void</p>     <p>监听音频焦点变化事件，多个音视频资源同时播放时，会根据音频焦点模型<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#interruptmode9">audio.InterruptMode</a>触发此事件。应用需根据不同焦点变化事件作相应处理。具体可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/audio-playback-concurrency" target="_blank">处理音频焦点事件</a>。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频焦点变化事件回调类型，支持的事件：'audioInterrupt'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#interruptevent9">audio.InterruptEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频焦点变化事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'audioInterrupt'</span>, <span class="hljs-function">(<span class="hljs-params">info: audio.InterruptEvent</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audioInterrupt called,and InterruptEvent info is:'</span> + info);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 875px;">     <h2 id="offaudiointerrupt9" device-type="phone,2in1,tablet,wearable,tv">off('audioInterrupt')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offaudiointerrupt9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'audioInterrupt', callback?: Callback&lt;audio.InterruptEvent&gt;): void</p>     <p>取消监听音频焦点变化事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频焦点变化事件回调类型，取消注册的事件：'audioInterrupt'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#interruptevent9">audio.InterruptEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>音频焦点变化事件回调方法。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'audioInterrupt'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1214px;">     <h2 id="onaudiooutputdevicechangewithinfo11" device-type="phone,2in1,tablet,wearable,tv">on('audioOutputDeviceChangeWithInfo')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onaudiooutputdevicechangewithinfo11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'audioOutputDeviceChangeWithInfo', callback: Callback&lt;audio.AudioStreamDeviceChangeInfo&gt;): void</p>     <p>订阅监听音频流输出设备变化及原因，使用callback方式返回结果。</p>     <p>在订阅此监听时，建议参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/audio-output-device-change" target="_blank">响应输出设备变更时合理暂停</a>自行实现设备连接或者断开时的播放器行为。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.72.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'audioOutputDeviceChangeWithInfo'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiostreamdevicechangeinfo11">audio.AudioStreamDeviceChangeInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回当前音频流的输出设备描述信息及变化原因。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.72.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'audioOutputDeviceChangeWithInfo'</span>, <span class="hljs-function">(<span class="hljs-params">data: audio.AudioStreamDeviceChangeInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1070px;">     <h2 id="offaudiooutputdevicechangewithinfo11" device-type="phone,2in1,tablet,wearable,tv">off('audioOutputDeviceChangeWithInfo')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offaudiooutputdevicechangewithinfo11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'audioOutputDeviceChangeWithInfo', callback?: Callback&lt;audio.AudioStreamDeviceChangeInfo&gt;): void</p>     <p>取消订阅监听音频流输出设备变化及原因，使用callback方式返回结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.73.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'audioOutputDeviceChangeWithInfo'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiostreamdevicechangeinfo11">audio.AudioStreamDeviceChangeInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，返回当前音频流的输出设备描述信息及变化原因。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.73.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'audioOutputDeviceChangeWithInfo'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1509px;">     <h2 id="addsubtitlefromfd12" device-type="phone,2in1,tablet,wearable,tv">addSubtitleFromFd<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="addsubtitlefromfd12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>addSubtitleFromFd(fd: number, offset?: number, length?: number): Promise&lt;void&gt;</p>     <p>依据fd为视频添加外挂字幕，当前仅支持与视频资源同时设置（在avplayer设置fdSrc视频资源后设置外挂字幕）。使用Promise方式返回结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.74.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">fd</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源句柄，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#getrawfd9">resourceManager.getRawFd</a>获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">offset</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">资源偏移量，需要基于预置资源的信息输入，非法值会造成字幕频资源解析错误，默认值:0。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">资源长度，默认值为文件中从偏移量开始的剩余字节，需要基于预置资源的信息输入，非法值会造成字幕频资源解析错误，默认值:0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.74.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">添加外挂字幕addSubtitleFromFd方法的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.74.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameter check failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span></li><li>
</li><li><span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> fileDescriptor = <span class="hljs-keyword">await</span> context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFd</span>(<span class="hljs-string">'xxx.srt'</span>);</li><li>
</li><li>avPlayer.<span class="hljs-title function_">addSubtitleFromFd</span>(fileDescriptor.<span class="hljs-property">fd</span>, fileDescriptor.<span class="hljs-property">offset</span>, fileDescriptor.<span class="hljs-property">length</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;">     <h2 id="addsubtitlefromurl12" device-type="phone,2in1,tablet,wearable,tv">addSubtitleFromUrl<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="addsubtitlefromurl12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>addSubtitleFromUrl(url: string): Promise&lt;void&gt;</p>     <p>依据url为视频添加外挂字幕，当前仅支持与视频资源同时设置（在avplayer设置fdSrc视频资源后设置外挂字幕）。使用Promise方式返回结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.75.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">url</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">外挂字幕文件地址。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.75.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">添加外挂字幕addSubtitleFromUrl方法的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.75.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameter check failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fdUrl</span>:<span class="hljs-built_in">string</span> = <span class="hljs-string">'http://xxx.xxx.xxx/xx/index.srt'</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">avPlayer</span>: media.<span class="hljs-property">AVPlayer</span> = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">addSubtitleFromUrl</span>(fdUrl);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1019px;">     <h2 id="onsubtitleupdate12" device-type="phone,2in1,tablet,wearable,tv">on('subtitleUpdate')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsubtitleupdate12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'subtitleUpdate', callback: Callback&lt;SubtitleInfo&gt;): void</p>     <p>订阅获取外挂字幕的事件，当有外挂字幕时，会通过订阅的回调方法通知用户。用户只能订阅一个外挂字幕事件的回调方法，当用户重复订阅时，以最后一次订阅的回调接口为准。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.76.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'subtitleUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#subtitleinfo12">SubtitleInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">外挂字幕事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'subtitleUpdate'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">info</span>: media.<span class="hljs-property">SubtitleInfo</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (info) {</li><li>      <span class="hljs-keyword">let</span> text = (!info.<span class="hljs-property">text</span>) ? <span class="hljs-string">''</span> : info.<span class="hljs-property">text</span></li><li>      <span class="hljs-keyword">let</span> startTime = (!info.<span class="hljs-property">startTime</span>) ? <span class="hljs-number">0</span> : info.<span class="hljs-property">startTime</span></li><li>      <span class="hljs-keyword">let</span> duration = (!info.<span class="hljs-property">duration</span>) ? <span class="hljs-number">0</span> : info.<span class="hljs-property">duration</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'subtitleUpdate info: text='</span> + text + <span class="hljs-string">' startTime='</span> + startTime +<span class="hljs-string">' duration='</span> + duration);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'subtitleUpdate info is null'</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 803px;">     <h2 id="offsubtitleupdate12" device-type="phone,2in1,tablet,wearable,tv">off('subtitleUpdate')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offsubtitleupdate12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'subtitleUpdate', callback?: Callback&lt;SubtitleInfo&gt;): void</p>     <p>取消订阅获取外挂字幕的事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.77.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'subtitleUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">取消外挂字幕事件的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'subtitleUpdate'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 851px;">     <h2 id="ontrackchange12" device-type="phone,2in1,tablet,wearable,tv">on('trackChange')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ontrackchange12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'trackChange', callback: OnTrackChangeHandler): void</p>     <p>订阅获取轨道变更的事件，当播放的轨道变更时，会通过订阅的回调方法通知用户。用户只能订阅一个轨道变更事件的回调方法，当用户重复订阅时，以最后一次订阅的回调接口为准。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.78.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'trackChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#ontrackchangehandler12">OnTrackChangeHandler</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">轨道变更事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'trackChange'</span>, <span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span>, isSelect: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'trackChange info: index='</span> + index + <span class="hljs-string">' isSelect='</span> + isSelect);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 803px;">     <h2 id="offtrackchange12" device-type="phone,2in1,tablet,wearable,tv">off('trackChange')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offtrackchange12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'trackChange', callback?: OnTrackChangeHandler): void</p>     <p>取消订阅获取轨道变更的事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.79.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'trackChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#ontrackchangehandler12">OnTrackChangeHandler</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">取消轨道变更事件的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'trackChange'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1067px;">     <h2 id="ontrackinfoupdate12" device-type="phone,2in1,tablet,wearable,tv">on('trackInfoUpdate')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ontrackinfoupdate12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'trackInfoUpdate', callback: Callback&lt;Array&lt;MediaDescription&gt;&gt;): void</p>     <p>订阅获取轨道信息更新的事件，当播放的轨道有更新时，会通过订阅的回调方法通知用户。用户只能订阅一个轨道变更事件的回调方法，当用户重复订阅时，以最后一次订阅的回调接口为准。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.80.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'trackInfoUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#mediadescription8">MediaDescription</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">轨道信息更新事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'trackInfoUpdate'</span>, <span class="hljs-function">(<span class="hljs-params">info: <span class="hljs-built_in">Array</span>&lt;media.MediaDescription&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (info) {</li><li>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; info.<span class="hljs-property">length</span>; i++) {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">propertyIndex</span>: <span class="hljs-title class_">Object</span> = info[i][media.<span class="hljs-property">MediaDescriptionKey</span>.<span class="hljs-property">MD_KEY_TRACK_INDEX</span>];</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">propertyType</span>: <span class="hljs-title class_">Object</span> = info[i][media.<span class="hljs-property">MediaDescriptionKey</span>.<span class="hljs-property">MD_KEY_TRACK_TYPE</span>];</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'track info: index='</span> + propertyIndex + <span class="hljs-string">' tracktype='</span> + propertyType);</li><li>      }</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'track info is null'</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 803px;">     <h2 id="offtrackinfoupdate12" device-type="phone,2in1,tablet,wearable,tv">off('trackInfoUpdate')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offtrackinfoupdate12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'trackInfoUpdate', callback?: Callback&lt;Array&lt;MediaDescription&gt;&gt;): void</p>     <p>取消订阅获取轨道变更的事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.81.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'trackInfoUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#mediadescription8">MediaDescription</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">取消轨道信息更新事件的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'trackInfoUpdate'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 803px;">     <h2 id="onamplitudeupdate13" device-type="phone,2in1,tablet,wearable,tv">on('amplitudeUpdate')<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onamplitudeupdate13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'amplitudeUpdate', callback: Callback&lt;Array&lt;number&gt;&gt;): void</p>     <p>订阅音频最大电平值，音频资源播放时定时上报。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'amplitudeUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;number&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频最大电平值更新事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'amplitudeUpdate'</span>, <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`amplitudeUpdate called,and amplitudeUpdate = <span class="hljs-subst">${value}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 755px;">     <h2 id="offamplitudeupdate13" device-type="phone,2in1,tablet,wearable,tv">off('amplitudeUpdate')<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offamplitudeupdate13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'amplitudeUpdate', callback?: Callback&lt;Array&lt;number&gt;&gt;): void</p>     <p>取消订阅获取音频最大电平值事件。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'amplitudeUpdate'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;number&gt;&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">取消音频最大电平值更新事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'amplitudeUpdate'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1328px;">     <h2 id="onseimessagereceived18" device-type="phone,2in1,tablet,wearable,tv">on('seiMessageReceived')<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onseimessagereceived18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'seiMessageReceived', payloadTypes: Array&lt;number&gt;, callback: OnSeiMessageHandle): void</p>     <p>订阅获取SEI信息事件，仅适用于HTTP-FLV直播，视频流中包含SEI信息时上报。需在prepare之前订阅，当用户重复订阅时，以最后一次订阅的回调接口为准。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'seiMessageReceived'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">payloadTypes</td>         <td class="cellrowborder" width="25%">Array&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">SEI信息的订阅负载类型数组。当前仅支持负载类型为5，即payloadType = 5。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onseimessagehandle18">OnSeiMessageHandle</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于监听SEI信息事件的回调函数，接收订阅的负载类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>
</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'seiMessageReceived'</span>, [<span class="hljs-number">5</span>], <span class="hljs-function">(<span class="hljs-params">messages: <span class="hljs-built_in">Array</span>&lt;media.SeiMessage&gt;, playbackPosition?: <span class="hljs-built_in">number</span></span>) =&gt;</span></li><li>  {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'seiMessageReceived playbackPosition '</span> + playbackPosition);</li><li>
</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key = <span class="hljs-number">0</span>; key &lt; messages.<span class="hljs-property">length</span>; key++) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'seiMessageReceived messages payloadType '</span> + messages[key].<span class="hljs-property">payloadType</span> + <span class="hljs-string">' payload size '</span> + messages[key].<span class="hljs-property">payload</span>.<span class="hljs-property">byteLength</span>);</li><li>
</li><li>      <span class="hljs-keyword">let</span> textDecoder = util.<span class="hljs-property">TextDecoder</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">"utf-8"</span>,{<span class="hljs-attr">ignoreBOM</span>: <span class="hljs-literal">true</span>});</li><li>      <span class="hljs-keyword">let</span> ab = messages[key]?.<span class="hljs-property">payload</span>?.<span class="hljs-title function_">slice</span>(<span class="hljs-number">16</span>, messages[key].<span class="hljs-property">payload</span>.<span class="hljs-property">byteLength</span>);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(ab);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">retStr</span>: <span class="hljs-built_in">string</span> = textDecoder.<span class="hljs-title function_">decodeToString</span>(result);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'seiMessageReceived messages payload '</span> + retStr);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 872px;">     <h2 id="offseimessagereceived18" device-type="phone,2in1,tablet,wearable,tv">off('seiMessageReceived')<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offseimessagereceived18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'seiMessageReceived', payloadTypes?: Array&lt;number&gt;, callback?: OnSeiMessageHandle): void</p>     <p>取消订阅获取SEI信息事件。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'seiMessageReceived'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">payloadTypes</td>         <td class="cellrowborder" width="25%">Array&lt;number&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">SEI信息的订阅负载类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onseimessagehandle18">OnSeiMessageHandle</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">用于监听SEI信息事件的回调函数，接收订阅的负载类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'seiMessageReceived'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1378px;">     <h2 id="setsuperresolution18" device-type="phone,2in1,tablet,wearable,tv">setSuperResolution<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsuperresolution18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSuperResolution(enabled: boolean) : Promise&lt;void&gt;</p>     <p>动态开启/关闭超分算法，可在 'initialized' | 'prepared' | 'playing' | 'paused' | 'completed' | 'stopped' 状态下调用。使用Promise异步回调。</p>     <p>在调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#prepare9">prepare()</a>前先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#playbackstrategy12">PlaybackStrategy</a>使能超分。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enabled</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示是否开启超分。true表示开启超分，false表示关闭超分。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.86.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">开启/关闭超分setSuperResolution方法的Promise返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.86.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5410003</td>         <td class="cellrowborder" width="50%">Super-resolution not supported. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5410004</td>         <td class="cellrowborder" width="50%">Missing enable super-resolution feature in <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#playbackstrategy12">PlaybackStrategy</a>. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至initialized/prepared/playing/paused/completed/stopped状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">setSuperResolution</span>(<span class="hljs-literal">true</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1574px;">     <h2 id="setvideowindowsize18" device-type="phone,2in1,tablet,wearable,tv">setVideoWindowSize<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setvideowindowsize18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setVideoWindowSize(width: number, height: number) : Promise&lt;void&gt;</p>     <p>动态设置超分算法的输出分辨率。可在 'initialized' | 'prepared' | 'playing' | 'paused' | 'completed' | 'stopped' 状态下调用。使用Promise异步回调。</p>     <p>输入参数须在320x320~1920x1080范围内，单位为像素。</p>     <p>在调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#prepare9">prepare()</a>前先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#playbackstrategy12">PlaybackStrategy</a>使能超分。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.87.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">width</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">超分算法的目标输出视频宽度，取值范围为[320-1920]，单位为像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">height</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">超分算法的目标输出视频高度，取值范围为[320-1080]，单位为像素。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.87.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.87.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5410003</td>         <td class="cellrowborder" width="50%">Super-resolution not supported. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5410004</td>         <td class="cellrowborder" width="50%">Missing enable super-resolution feature in <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#playbackstrategy12">PlaybackStrategy</a>. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  <span class="hljs-comment">// 此处仅为示意，实际开发中需要在stateChange事件成功触发至initialized/prepared/playing/paused/completed/stopped状态后才能调用。</span></li><li>  avPlayer.<span class="hljs-title function_">setVideoWindowSize</span>(<span class="hljs-number">1920</span>, <span class="hljs-number">1080</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 899px;">     <h2 id="onsuperresolutionchanged18" device-type="phone,2in1,tablet,wearable,tv">on('superResolutionChanged')<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsuperresolutionchanged18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type:'superResolutionChanged', callback: OnSuperResolutionChanged): void</p>     <p>订阅监听超分算法开启/关闭事件。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.88.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'superResolutionChanged'，当超分算法开启/关闭状态变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onsuperresolutionchanged-18">OnSuperResolutionChanged</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">超分开关事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'superResolutionChanged'</span>, <span class="hljs-function">(<span class="hljs-params">enabled: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'superResolutionChanged called, and enabled is:'</span> + enabled);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 851px;">     <h2 id="offsuperresolutionchanged18" device-type="phone,2in1,tablet,wearable,tv">off('superResolutionChanged')<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offsuperresolutionchanged18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type:'superResolutionChanged', callback?: OnSuperResolutionChanged): void</p>     <p>取消监听超分算法开启/关闭事件。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.89.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为：'superResolutionChanged'，当超分算法开启/关闭状态变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onsuperresolutionchanged-18">OnSuperResolutionChanged</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">超分开关事件回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kit-c106="" class="highlight-div"><div _ngcontent-kit-c106="" class="highlight-div-header"><div _ngcontent-kit-c106="" class="highlight-div-header-left"><div _ngcontent-kit-c106="" class="handle-button expand-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kit-c106="" class="highlight-div-header-right"><div _ngcontent-kit-c106="" class="handle-button ai-button"></div><div _ngcontent-kit-c106="" class="handle-button line-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kit-c106="" class="handle-button theme-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kit-c106="" class="handle-button copy-button"><div _ngcontent-kit-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kit-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>){</li><li>  <span class="hljs-keyword">let</span> avPlayer = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  avPlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'superResolutionChanged'</span>);</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>