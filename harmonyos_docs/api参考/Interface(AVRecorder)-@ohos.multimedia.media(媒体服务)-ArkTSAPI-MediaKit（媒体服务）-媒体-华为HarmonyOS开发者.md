<h1 _ngcontent-cfx-c119="" class="doc-title ng-star-inserted" title="Interface (AVRecorder)"> Interface (AVRecorder) </h1>

<div _ngcontent-cfx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</li>       <li>本Interface首批接口从API version 9开始支持。</li>      </ul>     </div></div></div>    <p>音视频录制管理类，用于音视频媒体录制。在调用AVRecorder的方法前，需要先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreateavrecorder9">createAVRecorder()</a>构建一个AVRecorder实例。</p>    <p>音视频录制demo可参考：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/using-avrecorder-for-recording" target="_blank">音频录制开发指导</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-recording" target="_blank">视频录制开发指导</a>。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>使用相机进行视频录制时，需要与相机模块配合，相机模块接口的使用详情见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-camera">相机管理</a>。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">state9+</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avrecorderstate9">AVRecorderState</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>音视频录制的状态。</p>          <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="prepare9" device-type="phone,2in1,tablet,wearable,tv">prepare<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="prepare9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>prepare(config: AVRecorderConfig, callback: AsyncCallback&lt;void&gt;): void</p>     <p>音视频录制的参数设置。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.MICROPHONE</p>     <p>不涉及音频录制时，可以不需要获取ohos.permission.MICROPHONE权限。</p>     <p>使用相机视频录制还需要与相机模块配合，相机模块接口的使用详情见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-camera">相机管理</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderconfig9">AVRecorderConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">配置音视频录制的相关参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当prepare方法成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 配置参数以实际硬件设备支持的范围为准。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avRecorderProfile</span>: media.<span class="hljs-property">AVRecorderProfile</span> = {</li><li>  audioBitrate : <span class="hljs-number">48000</span>,</li><li>  audioChannels : <span class="hljs-number">2</span>,</li><li>  audioCodec : media.<span class="hljs-property">CodecMimeType</span>.<span class="hljs-property">AUDIO_AAC</span>,</li><li>  audioSampleRate : <span class="hljs-number">48000</span>,</li><li>  fileFormat : media.<span class="hljs-property">ContainerFormatType</span>.<span class="hljs-property">CFT_MPEG_4</span>,</li><li>  videoBitrate : <span class="hljs-number">2000000</span>,</li><li>  videoCodec : media.<span class="hljs-property">CodecMimeType</span>.<span class="hljs-property">VIDEO_AVC</span>,</li><li>  videoFrameWidth : <span class="hljs-number">640</span>,</li><li>  videoFrameHeight : <span class="hljs-number">480</span>,</li><li>  videoFrameRate : <span class="hljs-number">30</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">videoMetaData</span>: media.<span class="hljs-property">AVMetadata</span> = {</li><li>  <span class="hljs-attr">videoOrientation</span>: <span class="hljs-string">'0'</span> <span class="hljs-comment">// 合理值0、90、180、270，非合理值prepare接口报错。</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avRecorderConfig</span>: media.<span class="hljs-property">AVRecorderConfig</span> = {</li><li>  audioSourceType : media.<span class="hljs-property">AudioSourceType</span>.<span class="hljs-property">AUDIO_SOURCE_TYPE_MIC</span>,</li><li>  videoSourceType : media.<span class="hljs-property">VideoSourceType</span>.<span class="hljs-property">VIDEO_SOURCE_TYPE_SURFACE_YUV</span>,</li><li>  profile : avRecorderProfile,</li><li>  url : <span class="hljs-string">'fd://'</span>, <span class="hljs-comment">// 文件需先由调用者创建，赋予读写权限，将文件fd传给此参数，eg.fd://45</span></li><li>  <span class="hljs-attr">metadata</span>: videoMetaData,</li><li>  location : { latitude : <span class="hljs-number">30</span>, longitude : <span class="hljs-number">130</span> }</li><li>};</li><li>
</li><li>avRecorder.<span class="hljs-title function_">prepare</span>(avRecorderConfig, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to prepare and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in preparing'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="prepare9-1" device-type="phone,2in1,tablet,wearable,tv">prepare<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="prepare9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>prepare(config: AVRecorderConfig): Promise&lt;void&gt;</p>     <p>音视频录制的参数设置。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.MICROPHONE</p>     <p>不涉及音频录制时，可以不需要获取ohos.permission.MICROPHONE权限。</p>     <p>使用相机视频录制还需要与相机模块配合，相机模块接口的使用详情见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-camera">相机管理</a>。</p>     <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderconfig9">AVRecorderConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">配置音视频录制的相关参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.15.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.15.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 配置参数以实际硬件设备支持的范围为准。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avRecorderProfile</span>: media.<span class="hljs-property">AVRecorderProfile</span> = {</li><li>  audioBitrate : <span class="hljs-number">48000</span>,</li><li>  audioChannels : <span class="hljs-number">2</span>,</li><li>  audioCodec : media.<span class="hljs-property">CodecMimeType</span>.<span class="hljs-property">AUDIO_AAC</span>,</li><li>  audioSampleRate : <span class="hljs-number">48000</span>,</li><li>  fileFormat : media.<span class="hljs-property">ContainerFormatType</span>.<span class="hljs-property">CFT_MPEG_4</span>,</li><li>  videoBitrate : <span class="hljs-number">2000000</span>,</li><li>  videoCodec : media.<span class="hljs-property">CodecMimeType</span>.<span class="hljs-property">VIDEO_AVC</span>,</li><li>  videoFrameWidth : <span class="hljs-number">640</span>,</li><li>  videoFrameHeight : <span class="hljs-number">480</span>,</li><li>  videoFrameRate : <span class="hljs-number">30</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">videoMetaData</span>: media.<span class="hljs-property">AVMetadata</span> = {</li><li>  <span class="hljs-attr">videoOrientation</span>: <span class="hljs-string">'0'</span> <span class="hljs-comment">// 合理值0、90、180、270，非合理值prepare接口报错。</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avRecorderConfig</span>: media.<span class="hljs-property">AVRecorderConfig</span> = {</li><li>  audioSourceType : media.<span class="hljs-property">AudioSourceType</span>.<span class="hljs-property">AUDIO_SOURCE_TYPE_MIC</span>,</li><li>  videoSourceType : media.<span class="hljs-property">VideoSourceType</span>.<span class="hljs-property">VIDEO_SOURCE_TYPE_SURFACE_YUV</span>,</li><li>  profile : avRecorderProfile,</li><li>  url : <span class="hljs-string">'fd://'</span>,  <span class="hljs-comment">// 文件需先由调用者创建，赋予读写权限，将文件fd传给此参数，eg.fd://45</span></li><li>  metadata : videoMetaData,</li><li>  location : { latitude : <span class="hljs-number">30</span>, longitude : <span class="hljs-number">130</span> }</li><li>};</li><li>
</li><li>avRecorder.<span class="hljs-title function_">prepare</span>(avRecorderConfig).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in preparing'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to prepare and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getinputsurface9" device-type="phone,2in1,tablet,wearable,tv">getInputSurface<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getinputsurface9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getInputSurface(callback: AsyncCallback&lt;string&gt;): void</p>     <p>获得录制需要的surface。使用callback异步回调。</p>     <p>开发者从此surface中获取surfaceBuffer，填入相应的视频数据。</p>     <p>应当注意，填入的视频数据需要携带时间戳（单位ns）和buffersize。时间戳的起始时间请以系统启动时间为基准。</p>     <p>需在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9">prepare()</a>事件成功触发后，才能调用getInputSurface()方法。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取surface成功，err为undefined，data为获取到的surfaceId，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">surfaceID</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// 该surfaceID用于传递给相机接口创造videoOutput。</span></li><li>
</li><li>avRecorder.<span class="hljs-title function_">getInputSurface</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, surfaceId: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to do getInputSurface and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in doing getInputSurface'</span>);</li><li>    surfaceID = surfaceId;</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getinputsurface9-1" device-type="phone,2in1,tablet,wearable,tv">getInputSurface<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getinputsurface9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getInputSurface(): Promise&lt;string&gt;</p>     <p>获得录制需要的surface。使用Promise异步回调。</p>     <p>开发者从此surface中获取surfaceBuffer，填入相应的视频数据。</p>     <p>应当注意，填入的视频数据需要携带时间戳（单位ns）和buffersize。时间戳的起始时间请以系统启动时间为基准。</p>     <p>需在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9-1">prepare()</a>事件成功触发后，才能调用getInputSurface方法。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回surface中获取的surfaceBuffer。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">surfaceID</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// 该surfaceID用于传递给相机接口创造videoOutput。</span></li><li>
</li><li>avRecorder.<span class="hljs-title function_">getInputSurface</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">surfaceId: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting InputSurface'</span>);</li><li>  surfaceID = surfaceId;</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get InputSurface and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="updaterotation12" device-type="phone,2in1,tablet,wearable,tv">updateRotation<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="updaterotation12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>updateRotation(rotation: number): Promise&lt;void&gt;</p>     <p>更新视频旋转角度。使用Promise异步回调。</p>     <p>当且仅当<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9-1">prepare()</a>事件成功触发后，且在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#start9">start()</a>之前，才能调用updateRotation方法。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rotation</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">旋转角度，取值仅支持0、90、180、270度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> rotation = <span class="hljs-number">90</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">updateRotation</span>(rotation).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in doing updateRotation'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to do updateRotation and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="setwillmutewheninterrupted20" device-type="phone,2in1,tablet,wearable,tv">setWillMuteWhenInterrupted<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setwillmutewheninterrupted20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setWillMuteWhenInterrupted(muteWhenInterrupted: boolean): Promise&lt;void&gt;</p>     <p>设置当前录制音频流是否启用静音打断模式。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">muteWhenInterrupted</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置当前录制音频流是否启用静音打断模式, true表示启用，false表示不启用，保持为默认打断模式。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">setWillMuteWhenInterrupted</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in doing setWillMuteWhenInterrupted'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to do setWillMuteWhenInterrupted and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="start9" device-type="phone,2in1,tablet,wearable,tv">start<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(callback: AsyncCallback&lt;void&gt;): void</p>     <p>开始视频录制。使用callback异步回调。</p>     <p>纯音频录制需在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9">prepare()</a>事件成功触发后，才能调用start方法。纯视频录制，音视频录制需在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#getinputsurface9">getInputSurface()</a>事件成功触发后，才能调用start方法。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当开始录制视频成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">start</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start AVRecorder and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in starting AVRecorder'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="start9-1" device-type="phone,2in1,tablet,wearable,tv">start<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(): Promise&lt;void&gt;</p>     <p>开始视频录制。使用Promise异步回调。</p>     <p>纯音频录制需在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9-1">prepare()</a>事件成功触发后，才能调用start方法。纯视频录制，音视频录制需在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#getinputsurface9-1">getInputSurface()</a>事件成功触发后，才能调用start方法。</p>     <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">start</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in starting AVRecorder'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start AVRecorder and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="pause9" device-type="phone,2in1,tablet,wearable,tv">pause<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pause9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause(callback: AsyncCallback&lt;void&gt;): void</p>     <p>暂停视频录制。使用callback异步回调。</p>     <p>需要<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#start9">start()</a>事件成功触发后，才能调用pause方法，可以通过调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#resume9">resume()</a>接口来恢复录制。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当暂停视频录制成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">pause</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to pause AVRecorder and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in pausing'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="pause9-1" device-type="phone,2in1,tablet,wearable,tv">pause<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pause9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause(): Promise&lt;void&gt;</p>     <p>暂停视频录制。使用Promise异步回调。</p>     <p>需要<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#start9-1">start()</a>事件成功触发后，才能调用pause方法，可以通过调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#resume9-1">resume()</a>接口来恢复录制。</p>     <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">pause</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in pausing'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to pause AVRecorder and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="resume9" device-type="phone,2in1,tablet,wearable,tv">resume<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resume9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>resume(callback: AsyncCallback&lt;void&gt;): void</p>     <p>恢复视频录制。使用callback异步回调。</p>     <p>需要在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#pause9">pause()</a>事件成功触发后，才能调用resume方法。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当恢复视频录制成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">resume</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to resume AVRecorder and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in resuming AVRecorder'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="resume9-1" device-type="phone,2in1,tablet,wearable,tv">resume<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resume9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>resume(): Promise&lt;void&gt;</p>     <p>恢复视频录制。使用Promise异步回调。</p>     <p>需要在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#pause9-1">pause()</a>事件成功触发后，才能调用resume方法。</p>     <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">resume</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in resuming AVRecorder'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to resume AVRecorder failed and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="stop9" device-type="phone,2in1,tablet,wearable,tv">stop<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(callback: AsyncCallback&lt;void&gt;): void</p>     <p>停止视频录制。使用callback异步回调。</p>     <p>需要在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#start9">start()</a>或<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#pause9">pause()</a>事件成功触发后，才能调用stop方法。</p>     <p>纯音频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9">prepare()</a>接口才能重新录制。纯视频录制，音视频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9">prepare()</a>和<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#getinputsurface9">getInputSurface()</a>接口才能重新录制。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当停止视频录制成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">stop</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to stop AVRecorder and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in stopping AVRecorder'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="stop9-1" device-type="phone,2in1,tablet,wearable,tv">stop<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(): Promise&lt;void&gt;</p>     <p>停止视频录制。使用Promise异步回调。</p>     <p>需要在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#start9-1">start()</a>或<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#pause9-1">pause()</a>事件成功触发后，才能调用stop方法。</p>     <p>纯音频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9-1">prepare()</a>接口才能重新录制。纯视频录制，音视频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9-1">prepare()</a>和<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#getinputsurface9-1">getInputSurface()</a>接口才能重新录制。</p>     <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">stop</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in stopping AVRecorder'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to stop AVRecorder and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="reset9" device-type="phone,2in1,tablet,wearable,tv">reset<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reset9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>reset(callback: AsyncCallback&lt;void&gt;): void</p>     <p>重置音视频录制。使用callback异步回调。</p>     <p>纯音频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9">prepare()</a>接口才能重新录制。纯视频录制，音视频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9">prepare()</a>和<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#getinputsurface9">getInputSurface()</a>接口才能重新录制。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当重置音视频录制成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">reset</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to reset AVRecorder and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in resetting AVRecorder'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="reset9-1" device-type="phone,2in1,tablet,wearable,tv">reset<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reset9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>reset(): Promise&lt;void&gt;</p>     <p>重置音视频录制。使用Promise异步回调。</p>     <p>纯音频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9-1">prepare()</a>接口才能重新录制。纯视频录制，音视频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9-1">prepare()</a>和<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#getinputsurface9-1">getInputSurface()</a>接口才能重新录制。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">reset</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in resetting AVRecorder'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to reset AVRecorder and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="release9" device-type="phone,2in1,tablet,wearable,tv">release<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(callback: AsyncCallback&lt;void&gt;): void</p>     <p>释放音视频录制资源。使用callback异步回调。</p>     <p>释放音视频录制资源之后，该AVRecorder实例不能再进行任何操作。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当释放音视频录制资源成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">release</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to release AVRecorder and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing AVRecorder'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="release9-1" device-type="phone,2in1,tablet,wearable,tv">release<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(): Promise&lt;void&gt;</p>     <p>释放音视频录制资源。使用Promise异步回调。</p>     <p>释放音视频录制资源之后，该AVRecorder实例不能再进行任何操作。</p>     <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">release</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing AVRecorder'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to release AVRecorder and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getcurrentaudiocapturerinfo11" device-type="phone,2in1,tablet,wearable,tv">getCurrentAudioCapturerInfo<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcurrentaudiocapturerinfo11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCurrentAudioCapturerInfo(callback: AsyncCallback&lt;audio.AudioCapturerChangeInfo&gt;): void</p>     <p>获取当前音频采集参数。使用callback异步回调。</p>     <p>在prepare()成功触发后，才能调用此方法。在stop()成功触发后，调用此方法会报错。</p>     <p><strong>系统能力</strong>：SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiocapturerchangeinfo9">audio.AudioCapturerChangeInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取音频采集参数成功时，err为undefined，data为获取到的audio.AudioCapturerChangeInfo，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">I/O error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">currentCapturerInfo</span>: audio.<span class="hljs-property">AudioCapturerChangeInfo</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">getCurrentAudioCapturerInfo</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, capturerInfo: audio.AudioCapturerChangeInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get CurrentAudioCapturerInfo and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting CurrentAudioCapturerInfo'</span>);</li><li>    currentCapturerInfo = capturerInfo;</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getcurrentaudiocapturerinfo11-1" device-type="phone,2in1,tablet,wearable,tv">getCurrentAudioCapturerInfo<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcurrentaudiocapturerinfo11-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCurrentAudioCapturerInfo(): Promise&lt;audio.AudioCapturerChangeInfo&gt;</p>     <p>获取当前音频采集参数。使用Promise异步回调。</p>     <p>在prepare()成功触发后，才能调用此方法。在stop()成功触发后，调用此方法会报错。</p>     <p><strong>系统能力</strong>：SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiocapturerchangeinfo9">audio.AudioCapturerChangeInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回获取的当前音频采集参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">I/O error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">currentCapturerInfo</span>: audio.<span class="hljs-property">AudioCapturerChangeInfo</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">getCurrentAudioCapturerInfo</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">capturerInfo: audio.AudioCapturerChangeInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting CurrentAudioCapturerInfo'</span>);</li><li>  currentCapturerInfo = capturerInfo;</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get CurrentAudioCapturerInfo and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getaudiocapturermaxamplitude11" device-type="phone,2in1,tablet,wearable,tv">getAudioCapturerMaxAmplitude<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getaudiocapturermaxamplitude11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAudioCapturerMaxAmplitude(callback: AsyncCallback&lt;number&gt;): void</p>     <p>获取当前音频最大振幅。使用callback异步回调。</p>     <p>在prepare()成功触发后，才能调用此方法。在stop()成功触发后，调用此方法会报错。</p>     <p>调用接口时，获取到的返回值是上一次获取最大振幅的时刻到当前这段区间内的音频最大振幅。例如，在1s时获取了一次最大振幅，到2s时再获取到的最大振幅是1-2s这个区间里面的最大值。</p>     <p><strong>系统能力</strong>：SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。获取当前音频最大振幅成功时，err为undefined，data为获取到的最大振幅，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">maxAmplitude</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">getAudioCapturerMaxAmplitude</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, amplitude: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get AudioCapturerMaxAmplitude and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting AudioCapturerMaxAmplitude'</span>);</li><li>    maxAmplitude = amplitude;</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getaudiocapturermaxamplitude11-1" device-type="phone,2in1,tablet,wearable,tv">getAudioCapturerMaxAmplitude<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getaudiocapturermaxamplitude11-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAudioCapturerMaxAmplitude(): Promise&lt;number&gt;</p>     <p>获取当前音频最大振幅。使用Promise异步回调。</p>     <p>在prepare()成功触发后，才能调用此方法。在stop()成功触发后，调用此方法会报错。</p>     <p>调用接口时，获取到的返回值是上一次获取最大振幅的时刻到当前这段区间内的音频最大振幅。例如，在1s时获取了一次最大振幅，到2s时再获取到的最大振幅是1-2s这个区间里面的最大值。</p>     <p><strong>系统能力</strong>：SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回获取的当前音频最大振幅。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">maxAmplitude</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">getAudioCapturerMaxAmplitude</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">amplitude: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting AudioCapturerMaxAmplitude'</span>);</li><li>  maxAmplitude = amplitude;</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get AudioCapturerMaxAmplitude and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getavailableencoder11" device-type="phone,2in1,tablet,wearable,tv">getAvailableEncoder<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavailableencoder11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAvailableEncoder(callback: AsyncCallback&lt;Array&lt;EncoderInfo&gt;&gt;): void</p>     <p>获取可用的编码器参数。使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#encoderinfo11">EncoderInfo</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。获取可用的编码器参数成功时，err为undefined，data为获取到的编码器参数，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">encoderInfo</span>: media.<span class="hljs-property">EncoderInfo</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">getAvailableEncoder</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, info: media.EncoderInfo[]</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get AvailableEncoder and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting AvailableEncoder'</span>);</li><li>    <span class="hljs-keyword">if</span> (info.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>      encoderInfo = info[<span class="hljs-number">0</span>];</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'No available encoder'</span>);</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getavailableencoder11-1" device-type="phone,2in1,tablet,wearable,tv">getAvailableEncoder<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavailableencoder11-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAvailableEncoder(): Promise&lt;Array&lt;EncoderInfo&gt;&gt;</p>     <p>获取可用的编码器参数。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#encoderinfo11">EncoderInfo</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回获取的可用的编码器参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">encoderInfo</span>: media.<span class="hljs-property">EncoderInfo</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">getAvailableEncoder</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">info: media.EncoderInfo[]</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting AvailableEncoder'</span>);</li><li>    <span class="hljs-keyword">if</span> (info.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>      encoderInfo = info[<span class="hljs-number">0</span>];</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'No available encoder'</span>);</li><li>    }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get AvailableEncoder and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getavrecorderconfig11" device-type="phone,2in1,tablet,wearable,tv">getAVRecorderConfig<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavrecorderconfig11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVRecorderConfig(callback: AsyncCallback&lt;AVRecorderConfig&gt;): void</p>     <p>获取实时的配置参数。使用callback异步回调。</p>     <p>只能在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9">prepare()</a>接口调用后调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderconfig9">AVRecorderConfig</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。获取实时配置的参数成功时，err为undefined，data为获取到的配置参数，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avConfig</span>: media.<span class="hljs-property">AVRecorderConfig</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">getAVRecorderConfig</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, config: media.AVRecorderConfig</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get avConfig and error is: Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting AVRecorderConfig'</span>);</li><li>    avConfig = config;</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getavrecorderconfig11-1" device-type="phone,2in1,tablet,wearable,tv">getAVRecorderConfig<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavrecorderconfig11-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVRecorderConfig(): Promise&lt;AVRecorderConfig&gt;;</p>     <p>获取实时的配置参数。使用Promise异步回调。</p>     <p>只能在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9-1">prepare()</a>接口调用后调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderconfig9">AVRecorderConfig</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回实时配置参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avConfig</span>: media.<span class="hljs-property">AVRecorderConfig</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">getAVRecorderConfig</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">config: media.AVRecorderConfig</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting AVRecorderConfig'</span>);</li><li>  avConfig = config;</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get AVRecorderConfig and error is: Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onstatechange9" device-type="phone,2in1,tablet,wearable,tv">on('stateChange')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onstatechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'stateChange', callback: OnAVRecorderStateChangeHandler): void</p>     <p>订阅录制状态机AVRecorderState切换的事件，当AVRecorderState状态机发生变化时，会通过订阅的回调方法通知用户。用户只能订阅一个状态机切换事件的回调方法，当用户重复订阅时，以最后一次订阅的回调接口为准。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">状态机切换事件回调类型，支持的事件：'stateChange'，用户操作和系统都会触发此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onavrecorderstatechangehandler12">OnAVRecorderStateChangeHandler</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回状态机切换事件。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'stateChange'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">state</span>: media.<span class="hljs-property">AVRecorderState</span>, <span class="hljs-attr">reason</span>: media.<span class="hljs-property">StateChangeReason</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'case state has changed, new state is: '</span> + state + <span class="hljs-string">', and reason is: '</span> + reason);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offstatechange9" device-type="phone,2in1,tablet,wearable,tv">off('stateChange')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offstatechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'stateChange', callback?: OnAVRecorderStateChangeHandler): void</p>     <p>取消订阅播放状态机<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avrecorderstate9">AVRecorderState</a>切换的事件。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">状态机切换事件回调类型，支持的事件：'stateChange'，用户操作和系统都会触发此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#onavrecorderstatechangehandler12">OnAVRecorderStateChangeHandler</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，返回状态机切换事件。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avRecorder.<span class="hljs-title function_">off</span>(<span class="hljs-string">'stateChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onerror9" device-type="phone,2in1,tablet,wearable,tv">on('error')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onerror9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'error', callback: ErrorCallback): void</p>     <p>订阅AVRecorder的错误事件，该事件仅用于错误提示，不需要用户停止播控动作。如果此时<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avrecorderstate9">AVRecorderState</a>也切至error状态，用户需要通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#reset9">reset()</a>或者<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#release9">release()</a>退出录制操作。使用callback异步回调。</p>     <p>用户只能订阅一个错误事件的回调方法，当用户重复订阅时，以最后一次订阅的回调接口为准。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>录制错误事件回调类型'error'。</p>          <p>- 'error'：录制过程中发生错误，触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback">ErrorCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回录制错误事件。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400101</td>         <td class="cellrowborder" width="50%">No memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">I/O error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400104</td>         <td class="cellrowborder" width="50%">Time out.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400106</td>         <td class="cellrowborder" width="50%">Unsupported format.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400107</td>         <td class="cellrowborder" width="50%">Audio interrupted.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`case avRecorder.on(error) called. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offerror9" device-type="phone,2in1,tablet,wearable,tv">off('error')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offerror9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'error', callback?: ErrorCallback): void</p>     <p>取消订阅录制错误事件，取消后不再接收到AVRecorder的错误事件。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>录制错误事件回调类型'error'。</p>          <p>- 'error'：录制过程中发生错误，触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback">ErrorCallback</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，返回录制错误事件。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avRecorder.<span class="hljs-title function_">off</span>(<span class="hljs-string">'error'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onaudiocapturerchange11" device-type="phone,2in1,tablet,wearable,tv">on('audioCapturerChange')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onaudiocapturerchange11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'audioCapturerChange', callback: Callback&lt;audio.AudioCapturerChangeInfo&gt;): void</p>     <p>订阅录音配置变化的回调，任意录音配置的变化会触发变化后的录音配置全量信息回调。使用callback异步回调。</p>     <p>当用户重复订阅时，以最后一次订阅的回调接口为准。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">录音配置变化的回调类型，支持的事件：'audioCapturerChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiocapturerchangeinfo9">audio.AudioCapturerChangeInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回变化后的录音配置全量信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capturerChangeInfo</span>: audio.<span class="hljs-property">AudioCapturerChangeInfo</span>;</li><li>
</li><li>avRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'audioCapturerChange'</span>,  <span class="hljs-function">(<span class="hljs-params">audioCapturerChangeInfo: audio.AudioCapturerChangeInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audioCapturerChange called'</span>);</li><li>  capturerChangeInfo = audioCapturerChangeInfo;</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offaudiocapturerchange11" device-type="phone,2in1,tablet,wearable,tv">off('audioCapturerChange')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offaudiocapturerchange11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'audioCapturerChange', callback?: Callback&lt;audio.AudioCapturerChangeInfo&gt;): void</p>     <p>取消订阅录音变化的回调事件。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">录音配置变化的回调类型，支持的事件：'audioCapturerChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiocapturerchangeinfo9">audio.AudioCapturerChangeInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，返回变化后的录音配置全量信息。</p>          <p>从API version 12开始支持此参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avRecorder.<span class="hljs-title function_">off</span>(<span class="hljs-string">'audioCapturerChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onphotoassetavailable12" device-type="phone,2in1,tablet,wearable,tv">on('photoAssetAvailable')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onphotoassetavailable12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'photoAssetAvailable', callback: Callback&lt;photoAccessHelper.PhotoAsset&gt;): void</p>     <p>订阅媒体资源回调事件，当<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#filegenerationmode12">FileGenerationMode</a>枚举设置为系统创建媒体文件时，会在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#stop9">stop</a>操作结束后把<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoasset">PhotoAsset</a>对象回调给应用。使用callback异步回调。</p>     <p>当用户重复订阅时，以最后一次订阅的回调接口为准。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">录像资源的回调类型，支持的事件：'photoAssetAvailable'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoasset">photoAccessHelper.PhotoAsset</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回系统创建的资源文件对应的PhotoAsset对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-title function_">constructor</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span> = context; <span class="hljs-comment">// this.getUIContext().getHostContext();</span></li><li>}</li><li>
</li><li><span class="hljs-comment">// 例：处理photoAsset回调，保存video。</span></li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveVideo</span>(<span class="hljs-params">asset: photoAccessHelper.PhotoAsset</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"saveVideo called"</span>);</li><li>  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'context is undefined'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> phAccessHelper = photoAccessHelper.<span class="hljs-title function_">getPhotoAccessHelper</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">assetChangeRequest</span>: photoAccessHelper.<span class="hljs-property">MediaAssetChangeRequest</span> = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">MediaAssetChangeRequest</span>(asset);</li><li>    assetChangeRequest.<span class="hljs-title function_">saveCameraPhoto</span>();</li><li>    <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">applyChanges</span>(assetChangeRequest);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'apply saveVideo successfully'</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`apply saveVideo failed with error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li><li><span class="hljs-comment">// 注册photoAsset监听。</span></li><li>avRecorder.<span class="hljs-title function_">on</span>(<span class="hljs-string">'photoAssetAvailable'</span>,  <span class="hljs-function">(<span class="hljs-params">asset: photoAccessHelper.PhotoAsset</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'photoAssetAvailable called'</span>);</li><li>  <span class="hljs-keyword">if</span> (asset != <span class="hljs-literal">undefined</span>) {</li><li>    photoAsset = asset;</li><li>    <span class="hljs-comment">// 处理photoAsset回调。</span></li><li>    <span class="hljs-comment">// 例：this.saveVideo(asset);</span></li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'photoAsset is undefined'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offphotoassetavailable12" device-type="phone,2in1,tablet,wearable,tv">off('photoAssetAvailable')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offphotoassetavailable12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'photoAssetAvailable', callback?: Callback&lt;photoAccessHelper.PhotoAsset&gt;): void</p>     <p>取消订阅媒体资源的回调类型。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">录音配置变化的回调类型，支持的事件：'photoAssetAvailable'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoasset">photoAccessHelper.PhotoAsset</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，返回系统创建的资源文件对应的PhotoAsset对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-cfx-c106="" class="highlight-div"><div _ngcontent-cfx-c106="" class="highlight-div-header"><div _ngcontent-cfx-c106="" class="highlight-div-header-left"><div _ngcontent-cfx-c106="" class="handle-button expand-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-cfx-c106="" class="highlight-div-header-right"><div _ngcontent-cfx-c106="" class="handle-button ai-button"></div><div _ngcontent-cfx-c106="" class="handle-button line-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-cfx-c106="" class="handle-button theme-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-cfx-c106="" class="handle-button copy-button"><div _ngcontent-cfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-cfx-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avRecorder.<span class="hljs-title function_">off</span>(<span class="hljs-string">'photoAssetAvailable'</span>);</li></ol></pre></div></div>    </div>   </div>   <div></div></div>