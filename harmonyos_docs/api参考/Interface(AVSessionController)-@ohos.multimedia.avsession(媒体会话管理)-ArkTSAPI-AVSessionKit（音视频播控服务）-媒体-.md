<h1 _ngcontent-tsw-c119="" class="doc-title ng-star-inserted" title="Interface (AVSessionController)"> Interface (AVSessionController) </h1>

<div _ngcontent-tsw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>本模块首批接口从API version 9开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</li>       <li>本Interface首批接口从API version 10开始支持。</li>      </ul>     </div></div></div>    <p>AVSessionController控制器可查看会话ID，并可完成对会话发送命令及事件，获取会话元数据，播放状态信息等操作。</p>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { avSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1358px;">     <h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">sessionId<sup>10+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">AVSessionController对象唯一的会话标识。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { avSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"createNewSession"</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title class_">AVSessionController</span>?: avSession.<span class="hljs-property">AVSessionController</span>;</li><li>  <span class="hljs-keyword">private</span> currentAVSession?: avSession.<span class="hljs-property">AVSession</span>;</li><li>  context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>
</li><li>    avSession.<span class="hljs-title function_">createAVSession</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>(), <span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span>, <span class="hljs-string">"audio"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>: avSession.<span class="hljs-property">AVSession</span>) =&gt; {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentAVSession</span> = data;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentAVSession</span>.<span class="hljs-property">sessionId</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">AVSessionController</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentAVSession</span>.<span class="hljs-title function_">getController</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'CreateAVSession :  SUCCESS :sessionId = ${this.sessionId}'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CreateController BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'AVSession Demo'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1135px;">     <h2 id="getavplaybackstate10" device-type="phone,2in1,tablet,wearable,tv">getAVPlaybackState<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavplaybackstate10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVPlaybackState(callback: AsyncCallback&lt;AVPlaybackState&gt;): void</p>     <p>获取当前的远端播放状态。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avplaybackstate10">AVPlaybackState</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回远端播放状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getAVPlaybackState</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, state: avSession.AVPlaybackState</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAVPlaybackState BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAVPlaybackState : SUCCESS'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1131px;">     <h2 id="getavplaybackstate10-1" device-type="phone,2in1,tablet,wearable,tv">getAVPlaybackState<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavplaybackstate10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVPlaybackState(): Promise&lt;AVPlaybackState&gt;</p>     <p>获取当前的远端播放状态。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avplaybackstate10">AVPlaybackState</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回远端播放状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getAVPlaybackState</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">state: avSession.AVPlaybackState</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAVPlaybackState : SUCCESS'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAVPlaybackState BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1131px;">     <h2 id="getavmetadata10" device-type="phone,2in1,tablet,wearable,tv">getAVMetadata<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavmetadata10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVMetadata(): Promise&lt;AVMetadata&gt;</p>     <p>获取会话元数据。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avmetadata10">AVMetadata</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回会话元数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getAVMetadata</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">metadata: avSession.AVMetadata</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetAVMetadata : SUCCESS : assetId : <span class="hljs-subst">${metadata.assetId}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetAVMetadata BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1135px;">     <h2 id="getavmetadata10-1" device-type="phone,2in1,tablet,wearable,tv">getAVMetadata<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavmetadata10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVMetadata(callback: AsyncCallback&lt;AVMetadata&gt;): void</p>     <p>获取会话元数据。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avmetadata10">AVMetadata</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回会话元数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getAVMetadata</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, metadata: avSession.AVMetadata</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetAVMetadata BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetAVMetadata : SUCCESS : assetId : <span class="hljs-subst">${metadata.assetId}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1131px;">     <h2 id="getavqueuetitle10" device-type="phone,2in1,tablet,wearable,tv">getAVQueueTitle<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavqueuetitle10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVQueueTitle(): Promise&lt;string&gt;</p>     <p>获取当前会话播放列表的名称。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回播放列表名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getAVQueueTitle</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetAVQueueTitle : SUCCESS : title : <span class="hljs-subst">${title}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetAVQueueTitle BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1135px;">     <h2 id="getavqueuetitle10-1" device-type="phone,2in1,tablet,wearable,tv">getAVQueueTitle<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavqueuetitle10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVQueueTitle(callback: AsyncCallback&lt;string&gt;): void</p>     <p>获取当前播放列表的名称。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回播放列表名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getAVQueueTitle</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, title: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetAVQueueTitle BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetAVQueueTitle : SUCCESS : title : <span class="hljs-subst">${title}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1131px;">     <h2 id="getavqueueitems10" device-type="phone,2in1,tablet,wearable,tv">getAVQueueItems<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavqueueitems10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVQueueItems(): Promise&lt;Array&lt;AVQueueItem&gt;&gt;</p>     <p>获取当前会话播放列表相关信息。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10">AVQueueItem</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回播放列表队列。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getAVQueueItems</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">items: avSession.AVQueueItem[]</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetAVQueueItems : SUCCESS : length : <span class="hljs-subst">${items.length}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetAVQueueItems BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1135px;">     <h2 id="getavqueueitems10-1" device-type="phone,2in1,tablet,wearable,tv">getAVQueueItems<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavqueueitems10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVQueueItems(callback: AsyncCallback&lt;Array&lt;AVQueueItem&gt;&gt;): void</p>     <p>获取当前播放列表相关信息。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10">AVQueueItem</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回播放列表队列。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getAVQueueItems</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, items: avSession.AVQueueItem[]</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetAVQueueItems BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetAVQueueItems : SUCCESS : length : <span class="hljs-subst">${items.length}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1457px;">     <h2 id="skiptoqueueitem10" device-type="phone,2in1,tablet,wearable,tv">skipToQueueItem<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="skiptoqueueitem10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>skipToQueueItem(itemId: number): Promise&lt;void&gt;</p>     <p>设置指定播放列表单项的ID，发送给session端处理，session端可以选择对这个单项歌曲进行播放。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">itemId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">播放列表单项的ID值，用以表示选中的播放列表单项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。当播放列表单项ID设置成功，无返回结果，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> queueItemId = <span class="hljs-number">0</span>;</li><li>avsessionController.<span class="hljs-title function_">skipToQueueItem</span>(queueItemId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'SkipToQueueItem successfully'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`SkipToQueueItem BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1355px;">     <h2 id="skiptoqueueitem10-1" device-type="phone,2in1,tablet,wearable,tv">skipToQueueItem<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="skiptoqueueitem10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>skipToQueueItem(itemId: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>设置指定播放列表单项的ID，发送给session端处理，session端可以选择对这个单项歌曲进行播放。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">itemId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">播放列表单项的ID值，用以表示选中的播放列表单项。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当播放状态设置成功，err为undefined，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> queueItemId = <span class="hljs-number">0</span>;</li><li>avsessionController.<span class="hljs-title function_">skipToQueueItem</span>(queueItemId, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`SkipToQueueItem BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'SkipToQueueItem successfully'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1076px;">     <h2 id="getoutputdevice10" device-type="phone,2in1,tablet,wearable,tv">getOutputDevice<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getoutputdevice10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getOutputDevice(): Promise&lt;OutputDeviceInfo&gt;</p>     <p>获取播放设备信息。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#outputdeviceinfo10">OutputDeviceInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回播放设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getOutputDevice</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">deviceInfo: avSession.OutputDeviceInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'GetOutputDevice : SUCCESS'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetOutputDevice BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1080px;">     <h2 id="getoutputdevice10-1" device-type="phone,2in1,tablet,wearable,tv">getOutputDevice<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getoutputdevice10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getOutputDevice(callback: AsyncCallback&lt;OutputDeviceInfo&gt;): void</p>     <p>获取播放设备信息。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#outputdeviceinfo10">OutputDeviceInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回播放设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getOutputDevice</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, deviceInfo: avSession.OutputDeviceInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetOutputDevice BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'GetOutputDevice : SUCCESS'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1615px;">     <h2 id="sendavkeyevent10" device-type="phone,2in1,tablet,wearable,tv">sendAVKeyEvent<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendavkeyevent10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>sendAVKeyEvent(event: KeyEvent): Promise&lt;void&gt;</p>     <p>发送按键事件到控制器对应的会话。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-keyevent">KeyEvent</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">按键事件。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600105</td>         <td class="cellrowborder" width="50%">Invalid session command.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600106</td>         <td class="cellrowborder" width="50%">The session is not activated.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。当事件发送成功，无返回结果，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Key</span>, <span class="hljs-title class_">KeyEvent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.InputKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keyItem</span>: <span class="hljs-title class_">Key</span> = {<span class="hljs-attr">code</span>:<span class="hljs-number">0x49</span>, <span class="hljs-attr">pressedTime</span>:<span class="hljs-number">2</span>, <span class="hljs-attr">deviceId</span>:<span class="hljs-number">0</span>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">event</span>:<span class="hljs-title class_">KeyEvent</span> = {<span class="hljs-attr">id</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">deviceId</span>:<span class="hljs-number">0</span>, <span class="hljs-attr">actionTime</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">screenId</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">windowId</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">action</span>:<span class="hljs-number">2</span>, <span class="hljs-attr">key</span>:keyItem, <span class="hljs-attr">unicodeChar</span>:<span class="hljs-number">0</span>, <span class="hljs-attr">keys</span>:[keyItem], <span class="hljs-attr">ctrlKey</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">altKey</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">shiftKey</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">logoKey</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">fnKey</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">capsLock</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">numLock</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">scrollLock</span>:<span class="hljs-literal">false</span>};</li><li>
</li><li>
</li><li>avsessionController.<span class="hljs-title function_">sendAVKeyEvent</span>(event).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'SendAVKeyEvent Successfully'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`SendAVKeyEvent BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1465px;">     <h2 id="sendavkeyevent10-1" device-type="phone,2in1,tablet,wearable,tv">sendAVKeyEvent<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendavkeyevent10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>sendAVKeyEvent(event: KeyEvent, callback: AsyncCallback&lt;void&gt;): void</p>     <p>发送按键事件到会话。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-keyevent">KeyEvent</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">按键事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当事件发送成功，err为undefined，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600105</td>         <td class="cellrowborder" width="50%">Invalid session command.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">600106</td>         <td class="cellrowborder" width="50%">The session is not activated.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Key</span>, <span class="hljs-title class_">KeyEvent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.InputKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keyItem</span>: <span class="hljs-title class_">Key</span> = {<span class="hljs-attr">code</span>:<span class="hljs-number">0x49</span>, <span class="hljs-attr">pressedTime</span>:<span class="hljs-number">2</span>, <span class="hljs-attr">deviceId</span>:<span class="hljs-number">0</span>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">event</span>:<span class="hljs-title class_">KeyEvent</span> = {<span class="hljs-attr">id</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">deviceId</span>:<span class="hljs-number">0</span>, <span class="hljs-attr">actionTime</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">screenId</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">windowId</span>:<span class="hljs-number">1</span>, <span class="hljs-attr">action</span>:<span class="hljs-number">2</span>, <span class="hljs-attr">key</span>:keyItem, <span class="hljs-attr">unicodeChar</span>:<span class="hljs-number">0</span>, <span class="hljs-attr">keys</span>:[keyItem], <span class="hljs-attr">ctrlKey</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">altKey</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">shiftKey</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">logoKey</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">fnKey</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">capsLock</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">numLock</span>:<span class="hljs-literal">false</span>, <span class="hljs-attr">scrollLock</span>:<span class="hljs-literal">false</span>};</li><li>avsessionController.<span class="hljs-title function_">sendAVKeyEvent</span>(event, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`SendAVKeyEvent BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'SendAVKeyEvent Successfully'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1179px;">     <h2 id="getlaunchability10" device-type="phone,2in1,tablet,wearable,tv">getLaunchAbility<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getlaunchability10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLaunchAbility(): Promise&lt;WantAgent&gt;</p>     <p>获取应用在会话中保存的WantAgent对象。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent">WantAgent</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#setlaunchability10">setLaunchAbility</a>保存的对象，包括应用的相关属性信息，如bundleName，abilityName，deviceId等。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getLaunchAbility</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">agent: <span class="hljs-built_in">object</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetLaunchAbility : SUCCESS : wantAgent : <span class="hljs-subst">${agent}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetLaunchAbility BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1207px;">     <h2 id="getlaunchability10-1" device-type="phone,2in1,tablet,wearable,tv">getLaunchAbility<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getlaunchability10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLaunchAbility(callback: AsyncCallback&lt;WantAgent&gt;): void</p>     <p>获取应用在会话中保存的WantAgent对象。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent">WantAgent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#setlaunchability10">setLaunchAbility</a>保存的对象，包括应用的相关属性信息，如bundleName，abilityName，deviceId等。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getLaunchAbility</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, agent: <span class="hljs-built_in">object</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetLaunchAbility BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetLaunchAbility : SUCCESS : wantAgent : <span class="hljs-subst">${agent}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 932px;">     <h2 id="getrealplaybackpositionsync10" device-type="phone,2in1,tablet,wearable,tv">getRealPlaybackPositionSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getrealplaybackpositionsync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getRealPlaybackPositionSync(): number</p>     <p>获取当前播放位置。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">时间节点，毫秒数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">time</span>: <span class="hljs-built_in">number</span> = avsessionController.<span class="hljs-title function_">getRealPlaybackPositionSync</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;">     <h2 id="isactive10" device-type="phone,2in1,tablet,wearable,tv">isActive<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isactive10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isActive(): Promise&lt;boolean&gt;</p>     <p>获取会话是否被激活。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回会话是否为激活状态，true表示被激活，false表示禁用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">isActive</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">isActive: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`IsActive : SUCCESS : isactive : <span class="hljs-subst">${isActive}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`IsActive BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1159px;">     <h2 id="isactive10-1" device-type="phone,2in1,tablet,wearable,tv">isActive<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isactive10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isActive(callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>判断会话是否被激活。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回会话是否为激活状态，true表示被激活，false表示禁用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">isActive</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, isActive: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`IsActive BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`IsActive : SUCCESS : isactive : <span class="hljs-subst">${isActive}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1100px;">     <h2 id="destroy10" device-type="phone,2in1,tablet,wearable,tv">destroy<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="destroy10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>destroy(): Promise&lt;void&gt;</p>     <p>销毁当前控制器，销毁后当前控制器不可再用。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。当控制器销毁成功，无返回结果，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">destroy</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Destroy : SUCCESS '</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Destroy BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1104px;">     <h2 id="destroy10-1" device-type="phone,2in1,tablet,wearable,tv">destroy<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="destroy10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>destroy(callback: AsyncCallback&lt;void&gt;): void</p>     <p>销毁当前控制器，销毁后当前控制器不可再用。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当控制器销毁成功，err为undefined，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">destroy</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Destroy BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Destroy : SUCCESS '</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1131px;">     <h2 id="getvalidcommands10" device-type="phone,2in1,tablet,wearable,tv">getValidCommands<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getvalidcommands10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getValidCommands(): Promise&lt;Array&lt;AVControlCommandType&gt;&gt;</p>     <p>获取会话支持的有效命令。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-t#avcontrolcommandtype10">AVControlCommandType</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回有效命令的集合。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getValidCommands</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">validCommands: avSession.AVControlCommandType[]</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetValidCommands : SUCCESS : size : <span class="hljs-subst">${validCommands.length}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetValidCommands BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1135px;">     <h2 id="getvalidcommands10-1" device-type="phone,2in1,tablet,wearable,tv">getValidCommands<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getvalidcommands10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getValidCommands(callback: AsyncCallback&lt;Array&lt;AVControlCommandType&gt;&gt;): void</p>     <p>获取会话支持的有效命令。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-t#avcontrolcommandtype10">AVControlCommandType</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回有效命令的集合。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getValidCommands</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, validCommands: avSession.AVControlCommandType[]</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetValidCommands BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetValidCommands : SUCCESS : size : <span class="hljs-subst">${validCommands.length}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1714px;">     <h2 id="sendcontrolcommand10" device-type="phone,2in1,tablet,wearable,tv">sendControlCommand<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendcontrolcommand10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>sendControlCommand(command: AVControlCommand): Promise&lt;void&gt;</p>     <p>通过控制器发送命令到其对应的会话。结果通过Promise异步回调方式返回。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>媒体控制方在使用sendControlCommand命令前，需要确保控制对应的媒体会话注册了对应的监听，注册媒体会话相关监听的方法请参见接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#onplay10">on'play'</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#onpause10">on'pause'</a>等。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">command</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avcontrolcommand10">AVControlCommand</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">会话的相关命令和命令相关参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。当命令发送成功，无返回结果，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600105</td>         <td class="cellrowborder" width="50%">Invalid session command.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600106</td>         <td class="cellrowborder" width="50%">The session is not activated.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600107</td>         <td class="cellrowborder" width="50%">Too many commands or events.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avCommand</span>: avSession.<span class="hljs-property">AVControlCommand</span> = {<span class="hljs-attr">command</span>:<span class="hljs-string">'play'</span>};</li><li>avsessionController.<span class="hljs-title function_">sendControlCommand</span>(avCommand).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'SendControlCommand successfully'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`SendControlCommand BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1612px;">     <h2 id="sendcontrolcommand10-1" device-type="phone,2in1,tablet,wearable,tv">sendControlCommand<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendcontrolcommand10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>sendControlCommand(command: AVControlCommand, callback: AsyncCallback&lt;void&gt;): void</p>     <p>通过会话控制器发送命令到其对应的会话。结果通过callback异步回调方式返回。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>媒体控制方在使用sendControlCommand命令前，需要确保控制对应的媒体会话注册了对应的监听，注册媒体会话相关监听的方法请参见接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#onplay10">on'play'</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-avsession#onpause10">on'pause'</a>等。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">command</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avcontrolcommand10">AVControlCommand</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">会话的相关命令和命令相关参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当命令发送成功，err为undefined，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600105</td>         <td class="cellrowborder" width="50%">Invalid session command.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600106</td>         <td class="cellrowborder" width="50%">The session is not activated.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600107</td>         <td class="cellrowborder" width="50%">Too many commands or events.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avCommand</span>: avSession.<span class="hljs-property">AVControlCommand</span> = {<span class="hljs-attr">command</span>:<span class="hljs-string">'play'</span>};</li><li>avsessionController.<span class="hljs-title function_">sendControlCommand</span>(avCommand, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`SendControlCommand BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'SendControlCommand successfully'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2136px;">     <h2 id="sendcommoncommand10" device-type="phone,2in1,tablet,wearable,tv">sendCommonCommand<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendcommoncommand10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>sendCommonCommand(command: string, args: Record&lt;string, Object&gt;): Promise&lt;void&gt;</p>     <p>通过会话控制器发送自定义控制命令到其对应的会话。结果通过Promise异步回调方式返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">command</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要设置的自定义控制命令的名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Record&lt;string, Object&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>需要传递的控制命令键值对。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前的版本args的参数类型为：{[key: string]: Object}。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>参数args支持的数据类型有：字符串、数字、布尔、对象、数组和文件描述符等，详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">@ohos.app.ability.Want(Want)</a>。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。当命令发送成功，无返回结果，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600105</td>         <td class="cellrowborder" width="50%">Invalid session command.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600106</td>         <td class="cellrowborder" width="50%">The session is not activated.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600107</td>         <td class="cellrowborder" width="50%">Too many commands or events.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { avSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"createNewSession"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">controller</span>:avSession.<span class="hljs-property">AVSessionController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>avSession.<span class="hljs-title function_">createAVSession</span>(context, tag, <span class="hljs-string">"audio"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>:avSession.<span class="hljs-property">AVSession</span>)=&gt; {</li><li>  currentAVSession = data;</li><li>  sessionId = currentAVSession.<span class="hljs-property">sessionId</span>;</li><li>  controller = <span class="hljs-keyword">await</span> currentAVSession.<span class="hljs-title function_">getController</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`CreateAVSession : SUCCESS :sessionId = <span class="hljs-subst">${sessionId}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CreateAVSession BusinessError:code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>});</li><li><span class="hljs-keyword">let</span> commandName = <span class="hljs-string">"my_command"</span>;</li><li><span class="hljs-keyword">if</span> (controller !== <span class="hljs-literal">undefined</span>) {</li><li>  (controller <span class="hljs-keyword">as</span> avSession.<span class="hljs-property">AVSessionController</span>).<span class="hljs-title function_">sendCommonCommand</span>(commandName, {command : <span class="hljs-string">"This is my command"</span>}).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'SendCommonCommand successfully'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`SendCommonCommand BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1986px;">     <h2 id="sendcommoncommand10-1" device-type="phone,2in1,tablet,wearable,tv">sendCommonCommand<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendcommoncommand10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>sendCommonCommand(command: string, args: Record&lt;string, Object&gt;, callback: AsyncCallback&lt;void&gt;): void</p>     <p>通过会话控制器发送自定义命令到其对应的会话。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">command</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要设置的自定义控制命令的名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Record&lt;string, Object&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>需要传递的控制命令键值对。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前的版本args的参数类型为：{[key: string]: Object}。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当命令发送成功，err为undefined，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>参数args支持的数据类型有：字符串、数字、布尔、对象、数组和文件描述符等，详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">@ohos.app.ability.Want(Want)</a>。</p>      </div></div></div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600105</td>         <td class="cellrowborder" width="50%">Invalid session command.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600106</td>         <td class="cellrowborder" width="50%">The session is not activated.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600107</td>         <td class="cellrowborder" width="50%">Too many commands or events.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { avSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>;</li><li>          </li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"createNewSession"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">controller</span>:avSession.<span class="hljs-property">AVSessionController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>avSession.<span class="hljs-title function_">createAVSession</span>(context, tag, <span class="hljs-string">"audio"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>:avSession.<span class="hljs-property">AVSession</span>)=&gt; {</li><li>  currentAVSession = data;</li><li>  sessionId = currentAVSession.<span class="hljs-property">sessionId</span>;</li><li>  controller = <span class="hljs-keyword">await</span> currentAVSession.<span class="hljs-title function_">getController</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`CreateAVSession : SUCCESS :sessionId = <span class="hljs-subst">${sessionId}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CreateAVSession BusinessError:code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>});</li><li><span class="hljs-keyword">let</span> commandName = <span class="hljs-string">"my_command"</span>;</li><li><span class="hljs-keyword">if</span> (controller !== <span class="hljs-literal">undefined</span>) {</li><li>  (controller <span class="hljs-keyword">as</span> avSession.<span class="hljs-property">AVSessionController</span>).<span class="hljs-title function_">sendCommonCommand</span>(commandName, {command : <span class="hljs-string">"This is my command"</span>}, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`SendCommonCommand BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2194px;">     <h2 id="sendcustomdata20" device-type="phone,2in1,tablet,tv">sendCustomData<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendcustomdata20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>sendCustomData(data: Record&lt;string, Object&gt;): Promise&lt;void&gt;</p>     <p>发送私有数据到远端设备。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.AVCast</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">data</td>         <td class="cellrowborder" width="25%">Record&lt;string, Object&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用程序填充的自定义数据。服务端仅解析key为'customData'，且Object为string类型的对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.You are advised to:1.Scheduled retry.2.Destroy the current session or session controller and re-create it.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { avSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"createNewSession"</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: avSession.<span class="hljs-property">AVSessionController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">private</span> currentAVSession?: avSession.<span class="hljs-property">AVSession</span>;</li><li>  context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    avSession.<span class="hljs-title function_">createAVSession</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>(), <span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span>, <span class="hljs-string">"audio"</span>)</li><li>      .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>: avSession.<span class="hljs-property">AVSession</span>) =&gt; {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentAVSession</span> = data;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentAVSession</span>.<span class="hljs-property">sessionId</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentAVSession</span>.<span class="hljs-title function_">getController</span>();</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`CreateAVSession : SUCCESS :sessionId = <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.sessionId}</span>`</span>);</li><li>      })</li><li>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CreateAVSession BusinessError:code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>      });</li><li>
</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> !== <span class="hljs-literal">undefined</span>) {</li><li>      (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> <span class="hljs-keyword">as</span> avSession.<span class="hljs-property">AVSessionController</span>).<span class="hljs-title function_">sendCustomData</span>({ <span class="hljs-attr">customData</span>: <span class="hljs-string">"This is my data"</span> })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'AVSession Demo'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2177px;">     <h2 id="getextras10" device-type="phone,2in1,tablet,wearable,tv">getExtras<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getextras10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getExtras(): Promise&lt;Record&lt;string, Object&gt;&gt;</p>     <p>获取媒体提供方设置的自定义媒体数据包。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Record&lt;string, Object&gt;&gt;</td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回媒体提供方设置的自定义媒体数据包，数据包的内容与setExtras设置的内容完全一致。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前的版本其返回值类型为：Promise&lt;{[key: string]: Object}&gt;。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600105</td>         <td class="cellrowborder" width="50%">Invalid session command.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600107</td>         <td class="cellrowborder" width="50%">Too many commands or events.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { avSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"createNewSession"</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: avSession.<span class="hljs-property">AVSessionController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">private</span> currentAVSession?: avSession.<span class="hljs-property">AVSession</span>;</li><li>  context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>
</li><li>    avSession.<span class="hljs-title function_">createAVSession</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>(), <span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span>, <span class="hljs-string">"audio"</span>)</li><li>      .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>: avSession.<span class="hljs-property">AVSession</span>) =&gt; {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentAVSession</span> = data;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentAVSession</span>.<span class="hljs-property">sessionId</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentAVSession</span>.<span class="hljs-title function_">getController</span>();</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`CreateAVSession : SUCCESS :sessionId = <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.sessionId}</span>`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CreateAVSession BusinessError:code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>    });</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> !== <span class="hljs-literal">undefined</span>) {</li><li>      (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> <span class="hljs-keyword">as</span> avSession.<span class="hljs-property">AVSessionController</span>).<span class="hljs-title function_">getExtras</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">extras</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getExtras : SUCCESS : <span class="hljs-subst">${extras}</span>`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getExtras BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'AVSession Demo'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1749px;">     <h2 id="getextras10-1" device-type="phone,2in1,tablet,wearable,tv">getExtras<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getextras10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getExtras(callback: AsyncCallback&lt;Record&lt;string, Object&gt;&gt;): void</p>     <p>获取媒体提供方设置的自定义媒体数据包。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Record&lt;string, Object&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>回调函数，返回媒体提供方设置的自定义媒体数据包，数据包的内容与setExtras设置的内容完全一致。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前的版本callback的参数类型为：AsyncCallback&lt;{[key: string]: Object}&gt;。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600105</td>         <td class="cellrowborder" width="50%">Invalid session command.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600107</td>         <td class="cellrowborder" width="50%">Too many commands or events.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { avSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"createNewSession"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">controller</span>:avSession.<span class="hljs-property">AVSessionController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>avSession.<span class="hljs-title function_">createAVSession</span>(context, tag, <span class="hljs-string">"audio"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>:avSession.<span class="hljs-property">AVSession</span>)=&gt; {</li><li>  currentAVSession = data;</li><li>  sessionId = currentAVSession.<span class="hljs-property">sessionId</span>;</li><li>  controller = <span class="hljs-keyword">await</span> currentAVSession.<span class="hljs-title function_">getController</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`CreateAVSession : SUCCESS :sessionId = <span class="hljs-subst">${sessionId}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CreateAVSession BusinessError:code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>});</li><li><span class="hljs-keyword">if</span> (controller !== <span class="hljs-literal">undefined</span>) {</li><li>  (controller <span class="hljs-keyword">as</span> avSession.<span class="hljs-property">AVSessionController</span>).<span class="hljs-title function_">getExtras</span>(<span class="hljs-function">(<span class="hljs-params">err, extras</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getExtras BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getExtras : SUCCESS : <span class="hljs-subst">${extras}</span>`</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2057px;">     <h2 id="getextraswithevent18" device-type="phone,2in1,tablet,wearable,tv">getExtrasWithEvent<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getextraswithevent18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getExtrasWithEvent(extraEvent: string): Promise&lt;ExtraInfo&gt;</p>     <p>根据远端分布式事件类型，获取远端分布式媒体提供方设置的自定义媒体数据包。结果通过Promise异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">extraEvent</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>远端分布式事件类型。</p>          <p>当前支持的事件类型包括：</p>          <p>'AUDIO_GET_VOLUME'：获取远端设备音量，</p>          <p>'AUDIO_GET_AVAILABLE_DEVICES'：获取远端所有可连接设备，</p>          <p>'AUDIO_GET_PREFERRED_OUTPUT_DEVICE_FOR_RENDERER_INFO'：获取远端实际发声设备。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-t#extrainfo18">ExtraInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回远端分布式媒体提供方设置的自定义媒体数据包。</p>          <p>参数ExtraInfo支持的数据类型有：字符串、数字、布尔、对象、数组和文件描述符等，详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">@ohos.app.ability.Want(Want)</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600105</td>         <td class="cellrowborder" width="50%">Invalid session command.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">controller</span>: avSession.<span class="hljs-property">AVSessionController</span> | <span class="hljs-title class_">ESObject</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COMMON_COMMAND_STRING_1</span> = <span class="hljs-string">'AUDIO_GET_VOLUME'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COMMON_COMMAND_STRING_2</span> = <span class="hljs-string">'AUDIO_GET_AVAILABLE_DEVICES'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">COMMON_COMMAND_STRING_3</span> = <span class="hljs-string">'AUDIO_GET_PREFERRED_OUTPUT_DEVICE_FOR_RENDERER_INFO'</span>;</li><li><span class="hljs-keyword">if</span> (controller !== <span class="hljs-literal">undefined</span>) {</li><li>  controller.<span class="hljs-title function_">getExtrasWithEvent</span>(<span class="hljs-variable constant_">COMMON_COMMAND_STRING_1</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${[COMMON_COMMAND_STRING_1]}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getExtrasWithEvent failed with err: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>
</li><li>  controller.<span class="hljs-title function_">getExtrasWithEvent</span>(<span class="hljs-variable constant_">COMMON_COMMAND_STRING_2</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${[COMMON_COMMAND_STRING_2]}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getExtrasWithEvent failed with err: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>
</li><li>  controller.<span class="hljs-title function_">getExtrasWithEvent</span>(<span class="hljs-variable constant_">COMMON_COMMAND_STRING_3</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${[COMMON_COMMAND_STRING_3]}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getExtrasWithEvent failed with err: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1578px;">     <h2 id="onmetadatachange10" device-type="phone,2in1,tablet,wearable,tv">on('metadataChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onmetadatachange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'metadataChange', filter: Array&lt;string&gt; | 'all', callback: (data: AVMetadata) =&gt; void): void</p>     <p>设置元数据变化的监听事件。</p>     <p>每个指令支持注册多个回调，如果需要只执行最新监听，需要先注销旧的监听，否则新旧监听都会触发回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>事件回调类型，支持事件'metadataChange'：当元数据需要更新时，触发该事件。</p>          <p>需要更新表示对应属性值被重新设置过，不论新值与旧值是否相同。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">filter</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;|'all'</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>'all'表示关注通话状态所有字段变化；Array&lt;string&gt;表示关注Array中的字段变化。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前filter参数类型为：Array&lt;keyof AVMetadata&gt; | 'all'。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(data: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avmetadata10">AVMetadata</a>) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，参数data是需要更新的元数据。只包含需要更新的元数据属性，不代表当前全量的元数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'metadataChange'</span>, <span class="hljs-string">'all'</span>, <span class="hljs-function">(<span class="hljs-params">metadata: avSession.AVMetadata</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on metadataChange assetId : <span class="hljs-subst">${metadata.assetId}</span>`</span>);</li><li>});</li><li>
</li><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'metadataChange'</span>, [<span class="hljs-string">'assetId'</span>, <span class="hljs-string">'title'</span>, <span class="hljs-string">'description'</span>], <span class="hljs-function">(<span class="hljs-params">metadata: avSession.AVMetadata</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on metadataChange assetId : <span class="hljs-subst">${metadata.assetId}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1125px;">     <h2 id="offmetadatachange10" device-type="phone,2in1,tablet,wearable,tv">off('metadataChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offmetadatachange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'metadataChange', callback?: (data: AVMetadata) =&gt; void)</p>     <p>取消元数据变化事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'metadataChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(data: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avmetadata10">AVMetadata</a>) =&gt; void</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，参数data是需要更新的元数据。只包含需要更新的元数据属性，并不代表当前全量的元数据。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消所有相关会话的事件监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'metadataChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1626px;">     <h2 id="onplaybackstatechange10" device-type="phone,2in1,tablet,wearable,tv">on('playbackStateChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onplaybackstatechange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'playbackStateChange', filter: Array&lt;string&gt; | 'all', callback: (state: AVPlaybackState) =&gt; void): void</p>     <p>设置播放状态变化的监听事件。</p>     <p>每个指令支持注册多个回调，如果需要只执行最新监听，需要先注销旧的监听，否则新旧监听都会触发回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>事件回调类型，支持事件'playbackStateChange'，当播放状态需要更新时，触发该事件。</p>          <p>需要更新表示对应属性值被重新设置过，不论新值与旧值是否相同。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">filter</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;|'all'</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>'all'表示关注播放状态所有字段更新。</p>          <p>Array&lt;string&gt; 表示关注Array中的字段更新。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前filter参数类型为：Array&lt;keyof AVPlaybackstate&gt; | 'all'。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(state: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avplaybackstate10">AVPlaybackState</a>) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，参数state是需要更新的播放状态。只包含需要更新的播放状态属性，并不代表当前全量的播放状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'playbackStateChange'</span>, <span class="hljs-string">'all'</span>, <span class="hljs-function">(<span class="hljs-params">playbackState: avSession.AVPlaybackState</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on playbackStateChange state : <span class="hljs-subst">${playbackState.state}</span>`</span>);</li><li>});</li><li>
</li><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'playbackStateChange'</span>, [<span class="hljs-string">'state'</span>, <span class="hljs-string">'speed'</span>, <span class="hljs-string">'loopMode'</span>], <span class="hljs-function">(<span class="hljs-params">playbackState: avSession.AVPlaybackState</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on playbackStateChange state : <span class="hljs-subst">${playbackState.state}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1173px;">     <h2 id="offplaybackstatechange10" device-type="phone,2in1,tablet,wearable,tv">off('playbackStateChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offplaybackstatechange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'playbackStateChange', callback?: (state: AVPlaybackState) =&gt; void)</p>     <p>取消播放状态变化事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'playbackStateChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(state: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avplaybackstate10">AVPlaybackState</a>) =&gt; void</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，参数state是需要更新的播放状态。只包含需要更新的播放状态属性，并不代表当前全量的播放状态。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消所有相关会话的事件监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'playbackStateChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1561px;">     <h2 id="oncallmetadatachange11" device-type="phone,2in1,tablet,wearable,tv">on('callMetadataChange')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncallmetadatachange11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'callMetadataChange', filter: Array&lt;string&gt; | 'all', callback: Callback&lt;CallMetadata&gt;): void</p>     <p>设置通话元数据变化的监听事件。</p>     <p>每个指令支持注册多个回调，如果需要只执行最新监听，需要先注销旧的监听，否则新旧监听都会触发回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件'callMetadataChange'：当通话元数据变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">filter</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;|'all'</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>'all'表示关注通话元数据所有字段变化；Array&lt;string&gt; 表示关注Array中的字段变化。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前filter参数类型为：Array&lt;keyof CallMetadata&gt; | 'all'。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#callmetadata11">CallMetadata</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，参数callmetadata是变化后的通话元数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'callMetadataChange'</span>, <span class="hljs-string">'all'</span>, <span class="hljs-function">(<span class="hljs-params">callmetadata: avSession.CallMetadata</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on callMetadataChange state : <span class="hljs-subst">${callmetadata.name}</span>`</span>);</li><li>});</li><li>
</li><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'callMetadataChange'</span>, [<span class="hljs-string">'name'</span>], <span class="hljs-function">(<span class="hljs-params">callmetadata: avSession.CallMetadata</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on callMetadataChange state : <span class="hljs-subst">${callmetadata.name}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1156px;">     <h2 id="offcallmetadatachange11" device-type="phone,2in1,tablet,wearable,tv">off('callMetadataChange')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offcallmetadatachange11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'callMetadataChange', callback?: Callback&lt;CallMetadata&gt;): void</p>     <p>取消设置通话元数据变化事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'callMetadataChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#callmetadata11">CallMetadata</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，参数calldata是变化后的通话原数据。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消所有相关会话的事件监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'callMetadataChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1537px;">     <h2 id="oncallstatechange11" device-type="phone,2in1,tablet,wearable,tv">on('callStateChange')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncallstatechange11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'callStateChange', filter: Array&lt;string&gt; | 'all', callback: Callback&lt;AVCallState&gt;): void</p>     <p>设置通话状态变化的监听事件。</p>     <p>每个指令支持注册多个回调，如果需要只执行最新监听，需要先注销旧的监听，否则新旧监听都会触发回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件'callStateChange'：当通话状态变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">filter</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;|'all'</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>'all' 表示关注通话状态所有字段变化；Array&lt;string&gt;表示关注Array中的字段变化。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前filter参数类型为：Array&lt;keyof AVCallState&gt; | 'all'。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avcallstate11">AVCallState</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，参数callstate是变化后的通话状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified.2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'callStateChange'</span>, <span class="hljs-string">'all'</span>, <span class="hljs-function">(<span class="hljs-params">callstate: avSession.AVCallState</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on callStateChange state : <span class="hljs-subst">${callstate.state}</span>`</span>);</li><li>});</li><li>
</li><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'callStateChange'</span>, [<span class="hljs-string">'state'</span>], <span class="hljs-function">(<span class="hljs-params">callstate: avSession.AVCallState</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on callStateChange state : <span class="hljs-subst">${callstate.state}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1156px;">     <h2 id="offcallstatechange11" device-type="phone,2in1,tablet,wearable,tv">off('callStateChange')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offcallstatechange11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'callStateChange', callback?: Callback&lt;AVCallState&gt;): void</p>     <p>取消设置通话状态变化事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'callStateChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avcallstate11">AVCallState</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，参数callstate是变化后的通话状态。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消所有相关会话的事件监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'callMetadataChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1173px;">     <h2 id="onsessiondestroy10" device-type="phone,2in1,tablet,wearable,tv">on('sessionDestroy')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsessiondestroy10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'sessionDestroy', callback: () =&gt; void): void</p>     <p>会话销毁的监听事件。</p>     <p>每个指令支持注册多个回调，如果需要只执行最新监听，需要先注销旧的监听，否则新旧监听都会触发回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件'sessionDestroy'：当检测到会话销毁时，触发该事件）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">() =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当监听事件注册成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'sessionDestroy'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'on sessionDestroy : SUCCESS '</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1101px;">     <h2 id="offsessiondestroy10" device-type="phone,2in1,tablet,wearable,tv">off('sessionDestroy')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offsessiondestroy10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'sessionDestroy', callback?: () =&gt; void): void</p>     <p>取消监听会话的销毁事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'sessionDestroy'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">() =&gt; void</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数。当监听事件取消成功，err为undefined，否则返回错误对象。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消所有相关会话的事件监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'sessionDestroy'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1173px;">     <h2 id="onactivestatechange10" device-type="phone,2in1,tablet,wearable,tv">on('activeStateChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onactivestatechange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'activeStateChange', callback: (isActive: boolean) =&gt; void): void</p>     <p>会话的激活状态的监听事件。</p>     <p>每个指令支持注册多个回调，如果需要只执行最新监听，需要先注销旧的监听，否则新旧监听都会触发回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件'activeStateChange'：当检测到会话的激活状态发生改变时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(isActive: boolean) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。参数isActive表示会话是否被激活。true表示被激活，false表示禁用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'activeStateChange'</span>, <span class="hljs-function">(<span class="hljs-params">isActive: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on activeStateChange : SUCCESS : isActive <span class="hljs-subst">${isActive}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1101px;">     <h2 id="offactivestatechange10" device-type="phone,2in1,tablet,wearable,tv">off('activeStateChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offactivestatechange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'activeStateChange', callback?: (isActive: boolean) =&gt; void): void</p>     <p>取消监听会话激活状态变化事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'activeStateChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(isActive: boolean) =&gt; void</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数。参数isActive表示会话是否被激活。true表示被激活，false表示禁用。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消所有相关会话的事件监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'activeStateChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1197px;">     <h2 id="onvalidcommandchange10" device-type="phone,2in1,tablet,wearable,tv">on('validCommandChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onvalidcommandchange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'validCommandChange', callback: (commands: Array&lt;AVControlCommandType&gt;) =&gt; void): void</p>     <p>会话支持的有效命令变化监听事件。</p>     <p>每个指令支持注册多个回调，如果需要只执行最新监听，需要先注销旧的监听，否则新旧监听都会触发回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件'validCommandChange'：当检测到会话的合法命令发生改变时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(commands: Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-t#avcontrolcommandtype10">AVControlCommandType</a>&gt;) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。参数commands是有效命令的集合。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'validCommandChange'</span>, <span class="hljs-function">(<span class="hljs-params">validCommands: avSession.AVControlCommandType[]</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`validCommandChange : SUCCESS : size : <span class="hljs-subst">${validCommands.length}</span>`</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`validCommandChange : SUCCESS : validCommands : <span class="hljs-subst">${validCommands.values()}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1101px;">     <h2 id="offvalidcommandchange10" device-type="phone,2in1,tablet,wearable,tv">off('validCommandChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offvalidcommandchange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'validCommandChange', callback?: (commands: Array&lt;AVControlCommandType&gt;) =&gt; void): void</p>     <p>取消监听会话有效命令变化事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'validCommandChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(commands: Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-t#avcontrolcommandtype10">AVControlCommandType</a>&gt;) =&gt; void</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数。参数commands是有效命令的集合。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消所有相关会话的事件监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'validCommandChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1252px;">     <h2 id="onoutputdevicechange10" device-type="phone,2in1,tablet,wearable,tv">on('outputDeviceChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onoutputdevicechange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'outputDeviceChange', callback: (state: ConnectionState, device: OutputDeviceInfo) =&gt; void): void</p>     <p>设置播放设备变化的监听事件。</p>     <p>每个指令支持注册多个回调，如果需要只执行最新监听，需要先注销旧的监听，否则新旧监听都会触发回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件为'outputDeviceChange'：当播放设备变化时，触发该事件）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(state: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-e#connectionstate10">ConnectionState</a>, device: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#outputdeviceinfo10">OutputDeviceInfo</a>) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，参数device是设备相关信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'outputDeviceChange'</span>, <span class="hljs-function">(<span class="hljs-params">state: avSession.ConnectionState, device: avSession.OutputDeviceInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`on outputDeviceChange state: <span class="hljs-subst">${state}</span>, device : <span class="hljs-subst">${device}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1180px;">     <h2 id="offoutputdevicechange10" device-type="phone,2in1,tablet,wearable,tv">off('outputDeviceChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offoutputdevicechange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'outputDeviceChange', callback?: (state: ConnectionState, device: OutputDeviceInfo) =&gt; void): void</p>     <p>取消监听分布式设备变化事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'outputDeviceChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(state: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-e#connectionstate10">ConnectionState</a>, device: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#outputdeviceinfo10">OutputDeviceInfo</a>) =&gt; void</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，参数device是设备相关信息。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消所有相关会话的事件监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'outputDeviceChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1677px;">     <h2 id="onsessionevent10" device-type="phone,2in1,tablet,wearable,tv">on('sessionEvent')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsessionevent10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'sessionEvent', callback: (sessionEvent: string, args: Record&lt;String, Object&gt;) =&gt; void): void</p>     <p>媒体控制器设置会话自定义事件变化的监听器。</p>     <p>每个指令支持注册多个回调，如果需要只执行最新监听，需要先注销旧的监听，否则新旧监听都会触发回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件'sessionEvent'：当会话事件变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(sessionEvent: string, args: Record&lt;String, Object&gt;) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>回调函数，sessionEvent为变化的会话事件名，args为事件的参数。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前的版本callback的参数类型为：(sessionEvent: string, args: {[key: string]: Object}) =&gt; void。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { avSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>;</li><li>       </li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"createNewSession"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">controller</span>:avSession.<span class="hljs-property">AVSessionController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>avSession.<span class="hljs-title function_">createAVSession</span>(context, tag, <span class="hljs-string">"audio"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>:avSession.<span class="hljs-property">AVSession</span>)=&gt; {</li><li>  currentAVSession = data;</li><li>  sessionId = currentAVSession.<span class="hljs-property">sessionId</span>;</li><li>  controller = <span class="hljs-keyword">await</span> currentAVSession.<span class="hljs-title function_">getController</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`CreateAVSession : SUCCESS :sessionId = <span class="hljs-subst">${sessionId}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CreateAVSession BusinessError:code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>});</li><li><span class="hljs-keyword">if</span> (controller !== <span class="hljs-literal">undefined</span>) {</li><li>  (controller <span class="hljs-keyword">as</span> avSession.<span class="hljs-property">AVSessionController</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">'sessionEvent'</span>, <span class="hljs-function">(<span class="hljs-params">sessionEvent, args</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`OnSessionEvent, sessionEvent is <span class="hljs-subst">${sessionEvent}</span>, args: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(args)}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1173px;">     <h2 id="offsessionevent10" device-type="phone,2in1,tablet,wearable,tv">off('sessionEvent')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offsessionevent10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'sessionEvent', callback?: (sessionEvent: string, args: Record&lt;String, Object&gt;) =&gt; void): void</p>     <p>取消会话事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'sessionEvent'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">sessionEvent: string, args: Record&lt;String, Object&gt; =&gt; void</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，参数sessionEvent是变化的事件名，args为事件的参数。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前的版本callback的参数类型为：(sessionEvent: string, args: {[key: string]: Object}) =&gt; void。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'sessionEvent'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1252px;">     <h2 id="onqueueitemschange10" device-type="phone,2in1,tablet,wearable,tv">on('queueItemsChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onqueueitemschange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'queueItemsChange', callback: (items: Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10">AVQueueItem</a>&gt;) =&gt; void): void</p>     <p>媒体控制器设置会话自定义播放列表变化的监听器。</p>     <p>每个指令支持注册多个回调，如果需要只执行最新监听，需要先注销旧的监听，否则新旧监听都会触发回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件'queueItemsChange'：当session修改播放列表时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(items: Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10">AVQueueItem</a>&gt;) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，items为变化的播放列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'queueItemsChange'</span>, <span class="hljs-function">(<span class="hljs-params">items: avSession.AVQueueItem[]</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`OnQueueItemsChange, items length is <span class="hljs-subst">${items.length}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1156px;">     <h2 id="offqueueitemschange10" device-type="phone,2in1,tablet,wearable,tv">off('queueItemsChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offqueueitemschange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'queueItemsChange', callback?: (items: Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10">AVQueueItem</a>&gt;) =&gt; void): void</p>     <p>取消播放列表变化事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'queueItemsChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(items: Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10">AVQueueItem</a>&gt;) =&gt; void</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，参数items是变化的播放列表。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消所有相关会话的事件监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'queueItemsChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1180px;">     <h2 id="onqueuetitlechange10" device-type="phone,2in1,tablet,wearable,tv">on('queueTitleChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onqueuetitlechange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'queueTitleChange', callback: (title: string) =&gt; void): void</p>     <p>媒体控制器设置会话自定义播放列表的名称变化的监听器。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件'queueTitleChange'：当session修改播放列表名称时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(title: string) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，title为变化的播放列表名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">on</span>(<span class="hljs-string">'queueTitleChange'</span>, <span class="hljs-function">(<span class="hljs-params">title: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`queueTitleChange, title is <span class="hljs-subst">${title}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1156px;">     <h2 id="offqueuetitlechange10" device-type="phone,2in1,tablet,wearable,tv">off('queueTitleChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offqueuetitlechange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'queueTitleChange', callback?: (title: string) =&gt; void): void</p>     <p>取消播放列表名称变化事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'queueTitleChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(title: string) =&gt; void</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数，参数items是变化的播放列表名称。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消所有相关会话的事件监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">parameter check failed. 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'queueTitleChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1677px;">     <h2 id="onextraschange10" device-type="phone,2in1,tablet,wearable,tv">on('extrasChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onextraschange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'extrasChange', callback: (extras: Record&lt;string, Object&gt;) =&gt; void): void</p>     <p>媒体控制器设置自定义媒体数据包事件变化的监听器。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件'extrasChange'：当媒体提供方设置自定义媒体数据包时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(extras: Record&lt;string, Object&gt;) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>回调函数，extras为媒体提供方新设置的自定义媒体数据包，该自定义媒体数据包与dispatchSessionEvent方法设置的数据包完全一致。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前的版本callback的参数类型为：(extras: {[key: string]: Object}) =&gt; void。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { avSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"createNewSession"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">controller</span>:avSession.<span class="hljs-property">AVSessionController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>avSession.<span class="hljs-title function_">createAVSession</span>(context, tag, <span class="hljs-string">"audio"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>:avSession.<span class="hljs-property">AVSession</span>)=&gt; {</li><li>  currentAVSession = data;</li><li>  sessionId = currentAVSession.<span class="hljs-property">sessionId</span>;</li><li>  controller = <span class="hljs-keyword">await</span> currentAVSession.<span class="hljs-title function_">getController</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`CreateAVSession : SUCCESS :sessionId = <span class="hljs-subst">${sessionId}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CreateAVSession BusinessError:code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>});</li><li><span class="hljs-keyword">if</span> (controller !== <span class="hljs-literal">undefined</span>) {</li><li>  (controller <span class="hljs-keyword">as</span> avSession.<span class="hljs-property">AVSessionController</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">'extrasChange'</span>, <span class="hljs-function">(<span class="hljs-params">extras</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Caught extrasChange event,the new extra is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(extras)}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1197px;">     <h2 id="offextraschange10" device-type="phone,2in1,tablet,wearable,tv">off('extrasChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offextraschange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'extrasChange', callback?: (extras: Record&lt;string, Object&gt;) =&gt; void): void</p>     <p>取消自定义媒体数据包变化事件监听。指定callback，可取消对应监听；未指定callback，取消所有事件监听。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持事件'extrasChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(extras: Record&lt;string, Object&gt;) =&gt; void</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>注册监听事件时的回调函数。</p>          <p>该参数为可选参数，若不填写该参数，则认为取消会话所有与此事件相关的监听。</p>          <p>API version 20开始发生兼容变更，在API version 19及之前的版本callback的参数类型为：(extras: {[key: string]: Object}) =&gt; void。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'extrasChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1485px;">     <h2 id="oncustomdatachange20" device-type="phone,2in1,tablet,tv">on('customDataChange')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncustomdatachange20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>on(type: 'customDataChange', callback: Callback&lt;Record&lt;string, Object&gt;&gt;): void</p>     <p>注册从远程设备发送的自定义数据的监听器。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.AVCast</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持事件'customDataChange'，当媒体提供方发送自定义数据时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Record&lt;string, Object&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，用于接收自定义数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.60.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { avSession } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AVSessionKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"createNewSession"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">controller</span>:avSession.<span class="hljs-property">AVSessionController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>avSession.<span class="hljs-title function_">createAVSession</span>(context, tag, <span class="hljs-string">"audio"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>:avSession.<span class="hljs-property">AVSession</span>)=&gt; {</li><li>  currentAVSession = data;</li><li>  sessionId = currentAVSession.<span class="hljs-property">sessionId</span>;</li><li>  controller = <span class="hljs-keyword">await</span> currentAVSession.<span class="hljs-title function_">getController</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`CreateAVSession : SUCCESS :sessionId = <span class="hljs-subst">${sessionId}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`CreateAVSession BusinessError:code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>});</li><li><span class="hljs-keyword">if</span> (controller !== <span class="hljs-literal">undefined</span>) {</li><li>  (controller <span class="hljs-keyword">as</span> avSession.<span class="hljs-property">AVSessionController</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">'customDataChange'</span>, <span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Caught customDataChange event,the new callback is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(callback)}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1101px;">     <h2 id="offcustomdatachange20" device-type="phone,2in1,tablet,tv">off('customDataChange')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offcustomdatachange20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>off(type: 'customDataChange', callback?: Callback&lt;Record&lt;string, Object&gt;&gt;): void</p>     <p>取消自定义数据监听。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.AVCast</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消对应的监听事件，支持的事件是'customDataChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Record&lt;string, Object&gt;&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">注册监听事件时的回调函数。该参数为可选参数，若不填写该参数，则认为取消会话所有与此事件相关的监听。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>avsessionController.<span class="hljs-title function_">off</span>(<span class="hljs-string">'customDataChange'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;">     <h2 id="getavplaybackstatesync10" device-type="phone,2in1,tablet,wearable,tv">getAVPlaybackStateSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavplaybackstatesync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVPlaybackStateSync(): AVPlaybackState;</p>     <p>使用同步方法获取当前会话的播放状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avplaybackstate10">AVPlaybackState</a></td>         <td class="cellrowborder" width="50%">当前会话的播放状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">playbackState</span>: avSession.<span class="hljs-property">AVPlaybackState</span> = avsessionController.<span class="hljs-title function_">getAVPlaybackStateSync</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAVPlaybackStateSync error, error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;">     <h2 id="getavmetadatasync10" device-type="phone,2in1,tablet,wearable,tv">getAVMetadataSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavmetadatasync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVMetadataSync(): AVMetadata</p>     <p>使用同步方法获取会话元数据。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avmetadata10">AVMetadata</a></td>         <td class="cellrowborder" width="50%">会话元数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">metaData</span>: avSession.<span class="hljs-property">AVMetadata</span> = avsessionController.<span class="hljs-title function_">getAVMetadataSync</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAVMetadataSync error, error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1083px;">     <h2 id="getavcallstate11" device-type="phone,2in1,tablet,wearable,tv">getAVCallState<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavcallstate11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVCallState(): Promise&lt;AVCallState&gt;</p>     <p>获取通话状态数据。结果通过Promise异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avcallstate11">AVCallState</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回通话状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.64.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getAVCallState</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">callstate: avSession.AVCallState</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getAVCallState : SUCCESS : state : <span class="hljs-subst">${callstate.state}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAVCallState BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1135px;">     <h2 id="getavcallstate11-1" device-type="phone,2in1,tablet,wearable,tv">getAVCallState<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavcallstate11-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVCallState(callback: AsyncCallback&lt;AVCallState&gt;): void</p>     <p>获取通话状态数据。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avcallstate11">AVCallState</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回通话状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.65.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getAVCallState</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, callstate: avSession.AVCallState</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAVCallState BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getAVCallState : SUCCESS : state : <span class="hljs-subst">${callstate.state}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1083px;">     <h2 id="getcallmetadata11" device-type="phone,2in1,tablet,wearable,tv">getCallMetadata<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcallmetadata11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCallMetadata(): Promise&lt;CallMetadata&gt;</p>     <p>获取通话会话的元数据。结果通过Promise异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#callmetadata11">CallMetadata</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回会话元数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.66.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getCallMetadata</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">calldata: avSession.CallMetadata</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getCallMetadata : SUCCESS : name : <span class="hljs-subst">${calldata.name}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getCallMetadata BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1135px;">     <h2 id="getcallmetadata11-1" device-type="phone,2in1,tablet,wearable,tv">getCallMetadata<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcallmetadata11-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCallMetadata(callback: AsyncCallback&lt;CallMetadata&gt;): void</p>     <p>获取通话会话的元数据。结果通过callback异步回调方式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.67.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#callmetadata11">CallMetadata</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回会话元数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.67.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>avsessionController.<span class="hljs-title function_">getCallMetadata</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, calldata: avSession.CallMetadata</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getCallMetadata BusinessError: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getCallMetadata : SUCCESS : name : <span class="hljs-subst">${calldata.name}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;">     <h2 id="getavqueuetitlesync10" device-type="phone,2in1,tablet,wearable,tv">getAVQueueTitleSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavqueuetitlesync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVQueueTitleSync(): string</p>     <p>使用同步方法获取当前会话播放列表的名称。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">当前会话播放列表名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.68.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">currentQueueTitle</span>: <span class="hljs-built_in">string</span> = avsessionController.<span class="hljs-title function_">getAVQueueTitleSync</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAVQueueTitleSync error, error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;">     <h2 id="getavqueueitemssync10" device-type="phone,2in1,tablet,wearable,tv">getAVQueueItemsSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavqueueitemssync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAVQueueItemsSync(): Array&lt;AVQueueItem&gt;</p>     <p>使用同步方法获取当前会话播放列表相关信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#avqueueitem10">AVQueueItem</a>&gt;</td>         <td class="cellrowborder" width="50%">当前会话播放列表队列。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.69.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">currentQueueItems</span>: <span class="hljs-title class_">Array</span>&lt;avSession.<span class="hljs-property">AVQueueItem</span>&gt; = avsessionController.<span class="hljs-title function_">getAVQueueItemsSync</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAVQueueItemsSync error, error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1100px;">     <h2 id="getoutputdevicesync10" device-type="phone,2in1,tablet,wearable,tv">getOutputDeviceSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getoutputdevicesync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getOutputDeviceSync(): OutputDeviceInfo</p>     <p>使用同步方法获取当前输出设备信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-i#outputdeviceinfo10">OutputDeviceInfo</a></td>         <td class="cellrowborder" width="50%">当前输出设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.70.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">currentOutputDevice</span>: avSession.<span class="hljs-property">OutputDeviceInfo</span> = avsessionController.<span class="hljs-title function_">getOutputDeviceSync</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getOutputDeviceSync error, error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;">     <h2 id="isactivesync10" device-type="phone,2in1,tablet,wearable,tv">isActiveSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isactivesync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isActiveSync(): boolean</p>     <p>使用同步方法判断会话是否被激活。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">会话是否为激活状态，true表示被激活，false表示禁用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.71.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">isActive</span>: <span class="hljs-built_in">boolean</span> = avsessionController.<span class="hljs-title function_">isActiveSync</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`isActiveSync error, error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;">     <h2 id="getvalidcommandssync10" device-type="phone,2in1,tablet,wearable,tv">getValidCommandsSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getvalidcommandssync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getValidCommandsSync(): Array&lt;AVControlCommandType&gt;</p>     <p>使用同步方法获取会话支持的有效命令。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AVSession.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.72.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-avsession-t#avcontrolcommandtype10">AVControlCommandType</a>&gt;</td>         <td class="cellrowborder" width="50%">会话支持的有效命令的集合。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-avsession">媒体会话管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.72.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">6600101</td>         <td class="cellrowborder" width="50%">Session service exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600102</td>         <td class="cellrowborder" width="50%">The session does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6600103</td>         <td class="cellrowborder" width="50%">The session controller does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tsw-c106="" class="highlight-div"><div _ngcontent-tsw-c106="" class="highlight-div-header"><div _ngcontent-tsw-c106="" class="highlight-div-header-left"><div _ngcontent-tsw-c106="" class="handle-button expand-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tsw-c106="" class="highlight-div-header-right"><div _ngcontent-tsw-c106="" class="handle-button ai-button"></div><div _ngcontent-tsw-c106="" class="handle-button line-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tsw-c106="" class="handle-button theme-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tsw-c106="" class="handle-button copy-button"><div _ngcontent-tsw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tsw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">validCommands</span>: <span class="hljs-title class_">Array</span>&lt;avSession.<span class="hljs-property">AVControlCommandType</span>&gt; = avsessionController.<span class="hljs-title function_">getValidCommandsSync</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getValidCommandsSync error, error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>