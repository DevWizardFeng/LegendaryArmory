<h1 _ngcontent-ptf-c119="" class="doc-title ng-star-inserted" title="Interface (AudioRoutingManager)"> Interface (AudioRoutingManager) </h1>

<div _ngcontent-ptf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>音频路由管理。</p>    <p>在使用AudioRoutingManager的接口之前，需先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-audiomanager#getroutingmanager9">getRoutingManager</a>获取AudioRoutingManager实例。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>本模块首批接口从API version 7开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</li>       <li>本Interface首批接口从API version 9开始支持。</li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getdevices9" device-type="phone,2in1,tablet,wearable,tv">getDevices<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdevices9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDevices(deviceFlag: DeviceFlag, callback: AsyncCallback&lt;AudioDeviceDescriptors&gt;): void</p>     <p>获取音频设备列表。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceFlag</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#deviceflag">DeviceFlag</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频设备类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取音频设备列表成功，err为undefined，data为获取到的音频设备列表；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">getDevices</span>(audio.<span class="hljs-property">DeviceFlag</span>.<span class="hljs-property">OUTPUT_DEVICES_FLAG</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, audioDeviceDescriptors: audio.AudioDeviceDescriptors</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get devices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting devices, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getdevices9-1" device-type="phone,2in1,tablet,wearable,tv">getDevices<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdevices9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDevices(deviceFlag: DeviceFlag): Promise&lt;AudioDeviceDescriptors&gt;</p>     <p>获取音频设备列表。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceFlag</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#deviceflag">DeviceFlag</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频设备类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回设备列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">getDevices</span>(audio.<span class="hljs-property">DeviceFlag</span>.<span class="hljs-property">OUTPUT_DEVICES_FLAG</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">audioDeviceDescriptors: audio.AudioDeviceDescriptors</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting devices, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get devices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getdevicessync10" device-type="phone,2in1,tablet,wearable,tv">getDevicesSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdevicessync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDevicesSync(deviceFlag: DeviceFlag): AudioDeviceDescriptors</p>     <p>获取音频设备列表。同步返回结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceFlag</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#deviceflag">DeviceFlag</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频设备类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a></td>         <td class="cellrowborder" width="50%">返回设备列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> audioDeviceDescriptors = audioRoutingManager.<span class="hljs-title function_">getDevicesSync</span>(audio.<span class="hljs-property">DeviceFlag</span>.<span class="hljs-property">OUTPUT_DEVICES_FLAG</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting devices, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get devices. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="ismicblockdetectionsupported13" device-type="phone,2in1,tablet,wearable,tv">isMicBlockDetectionSupported<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ismicblockdetectionsupported13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isMicBlockDetectionSupported(): Promise&lt;boolean&gt;</p>     <p>获取当前设备是否支持麦克风状态检测。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回true表示支持；返回false表示不支持。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRoutingManager.<span class="hljs-title function_">isMicBlockDetectionSupported</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Query whether microphone block detection is supported on current device result is <span class="hljs-subst">${value}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onmicblockstatuschanged13" device-type="phone,2in1,tablet,wearable,tv">on('micBlockStatusChanged')<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onmicblockstatuschanged13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'micBlockStatusChanged', callback: Callback&lt;DeviceBlockStatusInfo&gt;): void</p>     <p>监听麦克风堵塞状态变化事件。使用callback异步回调。</p>     <p>使用此功能前，请查询设备是否支持检测。应用在使用麦克风录音时，若麦克风堵塞状态发生变化，将触发该事件。目前此检测功能仅支持麦克风位于本地设备上。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'micBlockStatusChanged'，当麦克风堵塞状态发生变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#deviceblockstatusinfo13">DeviceBlockStatusInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回麦克风被堵塞状态和设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 在使用此功能之前，应先查询当前设备是否支持检测。</span></li><li>audioRoutingManager.<span class="hljs-title function_">isMicBlockDetectionSupported</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Query whether microphone block detection is supported on current device result is <span class="hljs-subst">${value}</span>.`</span>);</li><li>  <span class="hljs-keyword">if</span> (value) {</li><li>    audioRoutingManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'micBlockStatusChanged'</span>, <span class="hljs-function">(<span class="hljs-params">micBlockStatusChanged: audio.DeviceBlockStatusInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`block status : <span class="hljs-subst">${micBlockStatusChanged.blockStatus}</span> `</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offmicblockstatuschanged13" device-type="phone,2in1,tablet,wearable,tv">off('micBlockStatusChanged')<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offmicblockstatuschanged13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'micBlockStatusChanged', callback?: Callback&lt;DeviceBlockStatusInfo&gt;): void</p>     <p>取消监听麦克风堵塞状态变化事件。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'micBlockStatusChanged'，当取消监听音频麦克风是否被堵塞变化事件时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#deviceblockstatusinfo13">DeviceBlockStatusInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，返回麦克风被堵塞状态和设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 取消该事件的所有监听。</span></li><li>audioRoutingManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'micBlockStatusChanged'</span>);</li><li>
</li><li><span class="hljs-comment">// 同一监听事件中，on方法和off方法传入callback参数一致，off方法取消对应on方法订阅的监听。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">micBlockStatusCallback</span> = (<span class="hljs-params">micBlockStatusChanged: audio.DeviceBlockStatusInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`block status : <span class="hljs-subst">${micBlockStatusChanged.blockStatus}</span> `</span>);</li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'micBlockStatusChanged'</span>, micBlockStatusCallback);</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'micBlockStatusChanged'</span>, micBlockStatusCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="ondevicechange9" device-type="phone,2in1,tablet,wearable,tv">on('deviceChange')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondevicechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'deviceChange', deviceFlag: DeviceFlag, callback: Callback&lt;DeviceChangeAction&gt;): void</p>     <p>监听音频设备连接状态变化事件（当音频设备连接状态发生变化时触发）。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'deviceChange'，当音频设备连接状态发生变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">deviceFlag</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#deviceflag">DeviceFlag</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频设备类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#devicechangeaction">DeviceChangeAction</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回设备更新详情。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRoutingManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'deviceChange'</span>, audio.<span class="hljs-property">DeviceFlag</span>.<span class="hljs-property">OUTPUT_DEVICES_FLAG</span>, <span class="hljs-function">(<span class="hljs-params">deviceChanged: audio.DeviceChangeAction</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change type : '</span> + deviceChanged.<span class="hljs-property">type</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device descriptor size : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change descriptor : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>[<span class="hljs-number">0</span>].<span class="hljs-property">deviceRole</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change descriptor : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>[<span class="hljs-number">0</span>].<span class="hljs-property">deviceType</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offdevicechange9" device-type="phone,2in1,tablet,wearable,tv">off('deviceChange')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdevicechange9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'deviceChange', callback?: Callback&lt;DeviceChangeAction&gt;): void</p>     <p>取消监听音频设备连接状态变化事件。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'deviceChange'，当取消监听音频设备连接变化事件时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#devicechangeaction">DeviceChangeAction</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，返回设备更新详情。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 取消该事件的所有监听。</span></li><li>audioRoutingManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'deviceChange'</span>);</li><li>
</li><li><span class="hljs-comment">// 同一监听事件中，on方法和off方法传入callback参数一致，off方法取消对应on方法订阅的监听。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">deviceChangeCallback</span> = (<span class="hljs-params">deviceChanged: audio.DeviceChangeAction</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change type : '</span> + deviceChanged.<span class="hljs-property">type</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device descriptor size : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change descriptor : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>[<span class="hljs-number">0</span>].<span class="hljs-property">deviceRole</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change descriptor : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>[<span class="hljs-number">0</span>].<span class="hljs-property">deviceType</span>);</li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'deviceChange'</span>, audio.<span class="hljs-property">DeviceFlag</span>.<span class="hljs-property">OUTPUT_DEVICES_FLAG</span>, deviceChangeCallback);</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'deviceChange'</span>, deviceChangeCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="setcommunicationdevice9" device-type="phone,2in1,tablet,wearable,tv">setCommunicationDevice<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setcommunicationdevice9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setCommunicationDevice(deviceType: CommunicationDeviceType, active: boolean, callback: AsyncCallback&lt;void&gt;): void</p>     <p>设置通信设备激活状态。使用callback异步回调。</p>     <p>该接口由于功能设计变化，将在后续版本废弃，不建议开发者使用。</p>     <p>推荐使用AVSession提供的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/using-switch-call-devices" target="_blank">设备切换组件</a>，实现通话设备切换。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Communication</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#communicationdevicetype9">CommunicationDeviceType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频设备类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">active</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">是否设置设备为激活状态。true表示激活，false表示未激活。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当设置通信设备激活状态成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">setCommunicationDevice</span>(audio.<span class="hljs-property">CommunicationDeviceType</span>.<span class="hljs-property">SPEAKER</span>, <span class="hljs-literal">true</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set the active status of the device. <span class="hljs-subst">${err}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback invoked to indicate that the device is set to the active status.'</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getavailabledevices12" device-type="phone,2in1,tablet,wearable,tv">getAvailableDevices<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavailabledevices12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAvailableDevices(deviceUsage: DeviceUsage): AudioDeviceDescriptors</p>     <p>获取音频可选设备列表。同步返回结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceUsage</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#deviceusage12">DeviceUsage</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频设备类型（根据用途分类）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a></td>         <td class="cellrowborder" width="50%">返回设备列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: audio.<span class="hljs-property">AudioDeviceDescriptors</span> = audioRoutingManager.<span class="hljs-title function_">getAvailableDevices</span>(audio.<span class="hljs-property">DeviceUsage</span>.<span class="hljs-property">MEDIA_OUTPUT_DEVICES</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in doing getAvailableDevices.'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to getAvailableDevices. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onavailabledevicechange12" device-type="phone,2in1,tablet,wearable,tv">on('availableDeviceChange')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onavailabledevicechange12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'availableDeviceChange', deviceUsage: DeviceUsage, callback: Callback&lt;DeviceChangeAction&gt;): void</p>     <p>监听音频可选设备连接状态变化事件（当音频可选设备连接状态发生变化时触发）。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'availableDeviceChange'，当音频可选设备连接状态发生变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">deviceUsage</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#deviceusage12">DeviceUsage</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频设备类型（根据用途分类）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#devicechangeaction">DeviceChangeAction</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回设备更新详情。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRoutingManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'availableDeviceChange'</span>, audio.<span class="hljs-property">DeviceUsage</span>.<span class="hljs-property">MEDIA_OUTPUT_DEVICES</span>, <span class="hljs-function">(<span class="hljs-params">deviceChanged: audio.DeviceChangeAction</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change type : '</span> + deviceChanged.<span class="hljs-property">type</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device descriptor size : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change descriptor : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>[<span class="hljs-number">0</span>].<span class="hljs-property">deviceRole</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change descriptor : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>[<span class="hljs-number">0</span>].<span class="hljs-property">deviceType</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offavailabledevicechange12" device-type="phone,2in1,tablet,wearable,tv">off('availableDeviceChange')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offavailabledevicechange12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'availableDeviceChange', callback?: Callback&lt;DeviceChangeAction&gt;): void</p>     <p>取消监听音频可选设备连接状态变化事件。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'availableDeviceChange'，当取消监听音频可选设备连接变化事件时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#devicechangeaction">DeviceChangeAction</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，返回可选设备更新详情。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 取消该事件的所有监听。</span></li><li>audioRoutingManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'availableDeviceChange'</span>);</li><li>
</li><li><span class="hljs-comment">// 同一监听事件中，on方法和off方法传入callback参数一致，off方法取消对应on方法订阅的监听。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">availableDeviceChangeCallback</span> = (<span class="hljs-params">deviceChanged: audio.DeviceChangeAction</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change type : '</span> + deviceChanged.<span class="hljs-property">type</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device descriptor size : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change descriptor : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>[<span class="hljs-number">0</span>].<span class="hljs-property">deviceRole</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device change descriptor : '</span> + deviceChanged.<span class="hljs-property">deviceDescriptors</span>[<span class="hljs-number">0</span>].<span class="hljs-property">deviceType</span>);</li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'availableDeviceChange'</span>, audio.<span class="hljs-property">DeviceUsage</span>.<span class="hljs-property">MEDIA_OUTPUT_DEVICES</span>, availableDeviceChangeCallback);</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'availableDeviceChange'</span>, availableDeviceChangeCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="setcommunicationdevice9-1" device-type="phone,2in1,tablet,wearable,tv">setCommunicationDevice<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setcommunicationdevice9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setCommunicationDevice(deviceType: CommunicationDeviceType, active: boolean): Promise&lt;void&gt;</p>     <p>设置通信设备激活状态。使用Promise异步回调。</p>     <p>该接口由于功能设计变化，将在后续版本废弃，不建议开发者使用。</p>     <p>推荐开发者使用AVSession提供的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/using-switch-call-devices" target="_blank">设备切换组件</a>，实现通话设备切换。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Communication</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#communicationdevicetype9">CommunicationDeviceType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">活跃音频设备类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">active</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">是否设置设备为激活状态。true表示激活，false表示未激活。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRoutingManager.<span class="hljs-title function_">setCommunicationDevice</span>(audio.<span class="hljs-property">CommunicationDeviceType</span>.<span class="hljs-property">SPEAKER</span>, <span class="hljs-literal">true</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Promise returned to indicate that the device is set to the active status.'</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="iscommunicationdeviceactive9" device-type="phone,2in1,tablet,wearable,tv">isCommunicationDeviceActive<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="iscommunicationdeviceactive9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isCommunicationDeviceActive(deviceType: CommunicationDeviceType, callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>获取指定通信设备的激活状态。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Communication</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#communicationdevicetype9">CommunicationDeviceType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">活跃音频设备类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取指定通信设备的激活状态成功，err为undefined，data为true表示激活，false表示未激活；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">isCommunicationDeviceActive</span>(audio.<span class="hljs-property">CommunicationDeviceType</span>.<span class="hljs-property">SPEAKER</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, value: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the active status of the device. <span class="hljs-subst">${err}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Callback invoked to indicate that the active status of the device is obtained.'</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="iscommunicationdeviceactive9-1" device-type="phone,2in1,tablet,wearable,tv">isCommunicationDeviceActive<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="iscommunicationdeviceactive9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isCommunicationDeviceActive(deviceType: CommunicationDeviceType): Promise&lt;boolean&gt;</p>     <p>获取指定通信设备的激活状态。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Communication</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#communicationdevicetype9">CommunicationDeviceType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">活跃音频设备类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回true表示设备已激活；返回false表示设备未激活。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioRoutingManager.<span class="hljs-title function_">isCommunicationDeviceActive</span>(audio.<span class="hljs-property">CommunicationDeviceType</span>.<span class="hljs-property">SPEAKER</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Promise returned to indicate that the active status of the device is obtained <span class="hljs-subst">${value}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="iscommunicationdeviceactivesync10" device-type="phone,2in1,tablet,wearable,tv">isCommunicationDeviceActiveSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="iscommunicationdeviceactivesync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isCommunicationDeviceActiveSync(deviceType: CommunicationDeviceType): boolean</p>     <p>获取指定通信设备的激活状态。同步返回结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Communication</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#communicationdevicetype9">CommunicationDeviceType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">活跃音频设备类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">设备是否处于激活状态。true表示处于激活状态，false表示处于未激活状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">boolean</span> = audioRoutingManager.<span class="hljs-title function_">isCommunicationDeviceActiveSync</span>(audio.<span class="hljs-property">CommunicationDeviceType</span>.<span class="hljs-property">SPEAKER</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Indicate that the active status of the device is obtained <span class="hljs-subst">${value}</span>.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the active status of the device <span class="hljs-subst">${error}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getpreferoutputdeviceforrendererinfo10" device-type="phone,2in1,tablet,wearable,tv">getPreferOutputDeviceForRendererInfo<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpreferoutputdeviceforrendererinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferOutputDeviceForRendererInfo(rendererInfo: AudioRendererInfo, callback: AsyncCallback&lt;AudioDeviceDescriptors&gt;): void</p>     <p>根据音频信息，返回优先级最高的输出设备。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rendererInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiorendererinfo8">AudioRendererInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频渲染器信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取优先级最高的输出设备成功，err为undefined，data为获取到的优先级最高的输出设备信息；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800301</td>         <td class="cellrowborder" width="50%">System error. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>, <span class="hljs-comment">// 音频流使用类型：音乐。根据业务场景配置，参考StreamUsage。</span></li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 音频渲染器标志。</span></li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">getPreferOutputDeviceForRendererInfo</span>(rendererInfo, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, audioDeviceDescriptors: audio.AudioDeviceDescriptors</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get prefer output device for renderer info. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting prefer output device for renderer info, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getpreferoutputdeviceforrendererinfo10-1" device-type="phone,2in1,tablet,wearable,tv">getPreferOutputDeviceForRendererInfo<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpreferoutputdeviceforrendererinfo10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferOutputDeviceForRendererInfo(rendererInfo: AudioRendererInfo): Promise&lt;AudioDeviceDescriptors&gt;</p>     <p>根据音频信息，返回优先级最高的输出设备。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rendererInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiorendererinfo8">AudioRendererInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频渲染器信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回优先级最高的输出设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800301</td>         <td class="cellrowborder" width="50%">System error. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>, <span class="hljs-comment">// 音频流使用类型：音乐。根据业务场景配置，参考StreamUsage。</span></li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 音频渲染器标志。</span></li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">getPreferOutputDeviceForRendererInfo</span>(rendererInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">audioDeviceDescriptors: audio.AudioDeviceDescriptors</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting prefer output device for renderer info, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get prefer output device for renderer info. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getpreferredoutputdeviceforrendererinfosync10" device-type="phone,2in1,tablet,wearable,tv">getPreferredOutputDeviceForRendererInfoSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpreferredoutputdeviceforrendererinfosync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferredOutputDeviceForRendererInfoSync(rendererInfo: AudioRendererInfo): AudioDeviceDescriptors</p>     <p>根据音频信息，返回优先级最高的输出设备。同步返回结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rendererInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiorendererinfo8">AudioRendererInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频渲染器信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a></td>         <td class="cellrowborder" width="50%">返回优先级最高的输出设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>, <span class="hljs-comment">// 音频流使用类型：音乐。根据业务场景配置，参考StreamUsage。</span></li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 音频渲染器标志。</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> audioDeviceDescriptors = audioRoutingManager.<span class="hljs-title function_">getPreferredOutputDeviceForRendererInfoSync</span>(rendererInfo);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting prefer output device for renderer info, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get prefer output device for renderer info. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onpreferoutputdevicechangeforrendererinfo10" device-type="phone,2in1,tablet,wearable,tv">on('preferOutputDeviceChangeForRendererInfo')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpreferoutputdevicechangeforrendererinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'preferOutputDeviceChangeForRendererInfo', rendererInfo: AudioRendererInfo, callback: Callback&lt;AudioDeviceDescriptors&gt;): void</p>     <p>监听最高优先级输出设备变化事件（当最高优先级输出设备发生变化时触发）。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'preferOutputDeviceChangeForRendererInfo'，当最高优先级输出设备发生变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">rendererInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiorendererinfo8">AudioRendererInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频渲染器信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回优先级最高的输出设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>, <span class="hljs-comment">// 音频流使用类型：音乐。根据业务场景配置，参考StreamUsage。</span></li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 音频渲染器标志。</span></li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'preferOutputDeviceChangeForRendererInfo'</span>, rendererInfo, <span class="hljs-function">(<span class="hljs-params">audioDeviceDescriptors: audio.AudioDeviceDescriptors</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in using on function, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offpreferoutputdevicechangeforrendererinfo10" device-type="phone,2in1,tablet,wearable,tv">off('preferOutputDeviceChangeForRendererInfo')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offpreferoutputdevicechangeforrendererinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'preferOutputDeviceChangeForRendererInfo', callback?: Callback&lt;AudioDeviceDescriptors&gt;): void</p>     <p>取消监听最高优先级输出音频设备变化事件。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'preferOutputDeviceChangeForRendererInfo'，当取消监听最高优先级输出音频设备变化事件时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，返回优先级最高的输出设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 同一监听事件中，on方法和off方法传入callback参数一致，off方法取消对应on方法订阅的监听。</span></li><li><span class="hljs-comment">// 当订阅了多个该事件的监听时，可通过 audioRoutingManager.off('preferOutputDeviceChangeForRendererInfo'); 取消该事件的所有监听。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">preferOutputDeviceChangeForRendererInfoCallback</span> = (<span class="hljs-params">audioDeviceDescriptors: audio.AudioDeviceDescriptors</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in using on or off function, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">rendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>, <span class="hljs-comment">// 音频流使用类型：音乐。根据业务场景配置，参考StreamUsage。</span></li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 音频渲染器标志。</span></li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'preferOutputDeviceChangeForRendererInfo'</span>, rendererInfo, preferOutputDeviceChangeForRendererInfoCallback);</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'preferOutputDeviceChangeForRendererInfo'</span>, preferOutputDeviceChangeForRendererInfoCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getpreferredinputdeviceforcapturerinfo10" device-type="phone,2in1,tablet,wearable,tv">getPreferredInputDeviceForCapturerInfo<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpreferredinputdeviceforcapturerinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferredInputDeviceForCapturerInfo(capturerInfo: AudioCapturerInfo, callback: AsyncCallback&lt;AudioDeviceDescriptors&gt;): void</p>     <p>根据音频信息，返回优先级最高的输入设备。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">capturerInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiocapturerinfo8">AudioCapturerInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频采集器信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取优先级最高的输入设备成功，err为undefined，data为获取到的优先级最高的输入设备信息；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800301</td>         <td class="cellrowborder" width="50%">System error. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capturerInfo</span>: audio.<span class="hljs-property">AudioCapturerInfo</span> = {</li><li>  <span class="hljs-attr">source</span>: audio.<span class="hljs-property">SourceType</span>.<span class="hljs-property">SOURCE_TYPE_MIC</span>, <span class="hljs-comment">// 音源类型：Mic音频源。根据业务场景配置，参考SourceType。</span></li><li>  <span class="hljs-attr">capturerFlags</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 音频采集器标志。</span></li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">getPreferredInputDeviceForCapturerInfo</span>(capturerInfo, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, audioDeviceDescriptors: audio.AudioDeviceDescriptors</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get preferred input device for capturer info. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting preferred input device for capturer info, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getpreferredinputdeviceforcapturerinfo10-1" device-type="phone,2in1,tablet,wearable,tv">getPreferredInputDeviceForCapturerInfo<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpreferredinputdeviceforcapturerinfo10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferredInputDeviceForCapturerInfo(capturerInfo: AudioCapturerInfo): Promise&lt;AudioDeviceDescriptors&gt;</p>     <p>根据音频信息，返回优先级最高的输入设备。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">capturerInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiocapturerinfo8">AudioCapturerInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频采集器信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回优先级最高的输入设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800301</td>         <td class="cellrowborder" width="50%">System error. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capturerInfo</span>: audio.<span class="hljs-property">AudioCapturerInfo</span> = {</li><li>  <span class="hljs-attr">source</span>: audio.<span class="hljs-property">SourceType</span>.<span class="hljs-property">SOURCE_TYPE_MIC</span>, <span class="hljs-comment">// 音源类型：Mic音频源。根据业务场景配置，参考SourceType。</span></li><li>  <span class="hljs-attr">capturerFlags</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 音频采集器标志。</span></li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">getPreferredInputDeviceForCapturerInfo</span>(capturerInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">audioDeviceDescriptors: audio.AudioDeviceDescriptors</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting preferred input device for capturer info, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get preferred input device for capturer info. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getpreferredinputdeviceforcapturerinfosync10" device-type="phone,2in1,tablet,wearable,tv">getPreferredInputDeviceForCapturerInfoSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpreferredinputdeviceforcapturerinfosync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferredInputDeviceForCapturerInfoSync(capturerInfo: AudioCapturerInfo): AudioDeviceDescriptors</p>     <p>根据音频信息，返回优先级最高的输入设备。同步返回结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">capturerInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiocapturerinfo8">AudioCapturerInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频采集器信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a></td>         <td class="cellrowborder" width="50%">返回优先级最高的输入设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capturerInfo</span>: audio.<span class="hljs-property">AudioCapturerInfo</span> = {</li><li>  <span class="hljs-attr">source</span>: audio.<span class="hljs-property">SourceType</span>.<span class="hljs-property">SOURCE_TYPE_MIC</span>, <span class="hljs-comment">// 音源类型：Mic音频源。根据业务场景配置，参考SourceType。</span></li><li>  <span class="hljs-attr">capturerFlags</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 音频采集器标志。</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> audioDeviceDescriptors = audioRoutingManager.<span class="hljs-title function_">getPreferredInputDeviceForCapturerInfoSync</span>(capturerInfo);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting preferred input device for capturer info, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get preferred input device for capturer info. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onpreferredinputdevicechangeforcapturerinfo10" device-type="phone,2in1,tablet,wearable,tv">on('preferredInputDeviceChangeForCapturerInfo')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpreferredinputdevicechangeforcapturerinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'preferredInputDeviceChangeForCapturerInfo', capturerInfo: AudioCapturerInfo, callback: Callback&lt;AudioDeviceDescriptors&gt;): void</p>     <p>监听最高优先级输入设备变化事件（当最高优先级输入设备发生变化时触发）。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'preferredInputDeviceChangeForCapturerInfo'，当最高优先级输入设备发生变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">capturerInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#audiocapturerinfo8">AudioCapturerInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频采集器信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回优先级最高的输入设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capturerInfo</span>: audio.<span class="hljs-property">AudioCapturerInfo</span> = {</li><li>  <span class="hljs-attr">source</span>: audio.<span class="hljs-property">SourceType</span>.<span class="hljs-property">SOURCE_TYPE_MIC</span>, <span class="hljs-comment">// 音源类型：Mic音频源。根据业务场景配置，参考SourceType。</span></li><li>  <span class="hljs-attr">capturerFlags</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 音频采集器标志。</span></li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'preferredInputDeviceChangeForCapturerInfo'</span>, capturerInfo, <span class="hljs-function">(<span class="hljs-params">audioDeviceDescriptors: audio.AudioDeviceDescriptors</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in using on function, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offpreferredinputdevicechangeforcapturerinfo10" device-type="phone,2in1,tablet,wearable,tv">off('preferredInputDeviceChangeForCapturerInfo')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offpreferredinputdevicechangeforcapturerinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'preferredInputDeviceChangeForCapturerInfo', callback?: Callback&lt;AudioDeviceDescriptors&gt;): void</p>     <p>取消监听最高优先级输入音频设备变化事件。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Device</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'preferredInputDeviceChangeForCapturerInfo'，当取消监听最高优先级输入音频设备变化事件时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-t#audiodevicedescriptors">AudioDeviceDescriptors</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，返回优先级最高的输入设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-audio">Audio错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6800101</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ptf-c106="" class="highlight-div"><div _ngcontent-ptf-c106="" class="highlight-div-header"><div _ngcontent-ptf-c106="" class="highlight-div-header-left"><div _ngcontent-ptf-c106="" class="handle-button expand-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ptf-c106="" class="highlight-div-header-right"><div _ngcontent-ptf-c106="" class="handle-button ai-button"></div><div _ngcontent-ptf-c106="" class="handle-button line-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ptf-c106="" class="handle-button theme-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ptf-c106="" class="handle-button copy-button"><div _ngcontent-ptf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ptf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 同一监听事件中，on方法和off方法传入callback参数一致，off方法取消对应on方法订阅的监听。</span></li><li><span class="hljs-comment">// 当订阅了多个该事件的监听时，可通过 audioRoutingManager.off('preferredInputDeviceChangeForCapturerInfo'); 取消该事件的所有监听。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">preferredInputDeviceChangeForCapturerInfoCallback</span> = (<span class="hljs-params">audioDeviceDescriptors: audio.AudioDeviceDescriptors</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in using on or off function, AudioDeviceDescriptors: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(audioDeviceDescriptors)}</span>.`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capturerInfo</span>: audio.<span class="hljs-property">AudioCapturerInfo</span> = {</li><li>  <span class="hljs-attr">source</span>: audio.<span class="hljs-property">SourceType</span>.<span class="hljs-property">SOURCE_TYPE_MIC</span>, <span class="hljs-comment">// 音源类型：Mic音频源。根据业务场景配置，参考SourceType。</span></li><li>  <span class="hljs-attr">capturerFlags</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// 音频采集器标志。</span></li><li>};</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'preferredInputDeviceChangeForCapturerInfo'</span>, capturerInfo, preferredInputDeviceChangeForCapturerInfoCallback);</li><li>
</li><li>audioRoutingManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'preferredInputDeviceChangeForCapturerInfo'</span>, preferredInputDeviceChangeForCapturerInfoCallback);</li></ol></pre></div></div>    </div>   </div>   <div></div></div>