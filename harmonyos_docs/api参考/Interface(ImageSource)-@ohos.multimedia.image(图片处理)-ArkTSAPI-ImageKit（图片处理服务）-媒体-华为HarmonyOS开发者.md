<h1 _ngcontent-oth-c119="" class="doc-title ng-star-inserted" title="Interface (ImageSource)"> Interface (ImageSource) </h1>

<div _ngcontent-oth-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <p>ImageSource类，用于获取图片相关信息。在调用ImageSource的方法前，需要先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreateimagesource">createImageSource</a>构建一个ImageSource实例。</p>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">supportedFormats</td>         <td class="cellrowborder" width="20%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">支持的图片格式，包括：png、jpeg、bmp、gif、webp、dng、heic<sup>12+</sup>（不同硬件设备支持情况不同）。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="getimageinfo" device-type="phone,2in1,tablet,wearable,tv">getImageInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageinfo" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageInfo(index: number, callback: AsyncCallback&lt;ImageInfo&gt;): void</p>     <p>获取指定序号的图片信息。使用callback异步回调。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">index</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建ImageSource时的序号。默认值为0，表示第一张图片。当取值为N时，表示第N+1张图片。单帧图片场景中index取值只能为0，动图等多帧图片场景中index的取值范围为：0~（帧数-1）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#imageinfo">ImageInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取图片信息成功，err为undefined，data为获取到的图片信息；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageInfo</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">getImageInfo</span>(<span class="hljs-number">0</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, imageInfo: image.ImageInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the image information.code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining the image information.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getimageinfo-1" device-type="phone,2in1,tablet,wearable,tv">getImageInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageinfo-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageInfo(callback: AsyncCallback&lt;ImageInfo&gt;): void</p>     <p>获取图片信息。使用callback异步回调。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#imageinfo">ImageInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取图片信息成功，err为undefined，data为获取到的图片信息；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageInfo</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">getImageInfo</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, imageInfo: image.ImageInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the image information.code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining the image information.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getimageinfo-2" device-type="phone,2in1,tablet,wearable,tv">getImageInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageinfo-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageInfo(index?: number): Promise&lt;ImageInfo&gt;</p>     <p>获取图片信息。使用Promise异步回调。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">index</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">创建ImageSource时的序号。默认值为0，表示第一张图片。当取值为N时，表示第N+1张图片。单帧图片场景中index取值只能为0，动图等多帧图片场景中index的取值范围为：0~（帧数-1）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#imageinfo">ImageInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回获取到的图片信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageInfo</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">getImageInfo</span>(<span class="hljs-number">0</span>)</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">imageInfo: image.ImageInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining the image information.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the image information.code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getimageinfosync12" device-type="phone,2in1,tablet,wearable,tv">getImageInfoSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageinfosync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageInfoSync(index?: number): ImageInfo</p>     <p>获取指定序号的图片信息，使用同步形式返回图片信息。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该方法为同步方法，调用时会阻塞当前线程，不建议在主线程中调用，否则可能导致应用卡顿、掉帧或响应延迟。具体场景参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/time-consuming-task-overview" target="_blank">耗时任务并发场景简介</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">index</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">创建ImageSource时的序号。默认值为0，表示第一张图片。当取值为N时，表示第N+1张图片。单帧图片场景中index取值只能为0，动图等多帧图片场景中index的取值范围为：0~（帧数-1）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#imageinfo">ImageInfo</a></td>         <td class="cellrowborder" width="50%">同步返回获取到的图片信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageInfoSync</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-comment">// 此处'test.jpg'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">filePath</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(filePath);</li><li>  <span class="hljs-keyword">let</span> imageInfo = imageSource.<span class="hljs-title function_">getImageInfoSync</span>(<span class="hljs-number">0</span>);</li><li>  <span class="hljs-keyword">if</span> (imageInfo == <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to obtain the image information.'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining the image information.'</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'imageInfo.size.height:'</span> + imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">height</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'imageInfo.size.width:'</span> + imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">width</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getimageproperty11" device-type="phone,2in1,tablet,wearable,tv">getImageProperty<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageproperty11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageProperty(key:PropertyKey, options?: ImagePropertyOptions): Promise&lt;string&gt;</p>     <p>获取图片中给定索引处图像的指定属性键的值。用Promise异步回调。</p>     <p>该接口仅支持JPEG、PNG和HEIF<sup>12+</sup>（不同硬件设备支持情况不同）文件，且需要包含exif信息。其中可以通过supportedFormats属性查询是否支持HEIF格式的exif读写。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#propertykey7">PropertyKey</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#imagepropertyoptions11">ImagePropertyOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">图片属性，包括图片序号与默认属性值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回图片属性值，如获取失败则返回属性默认值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes:1.Mandatory parameters are left unspecified;2.Incorrect parameter types;3.Parameter verification failed;</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">The image data is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980110</td>         <td class="cellrowborder" width="50%">The image source data is incorrect.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">The image source data is incomplete.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980112</td>         <td class="cellrowborder" width="50%">The image format does not match.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980113</td>         <td class="cellrowborder" width="50%">Unknown image format.The image data provided is not in a recognized or supported format, or it may be corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980118</td>         <td class="cellrowborder" width="50%">Failed to create the image plugin.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980122</td>         <td class="cellrowborder" width="50%">Failed to decode the image header.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980123</td>         <td class="cellrowborder" width="50%">The image does not support EXIF decoding.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980135</td>         <td class="cellrowborder" width="50%">The EXIF value is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageProperty</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: image.<span class="hljs-property">ImagePropertyOptions</span> = { <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">defaultValue</span>: <span class="hljs-string">'9999'</span> }</li><li>  imageSourceObj.<span class="hljs-title function_">getImageProperty</span>(image.<span class="hljs-property">PropertyKey</span>.<span class="hljs-property">BITS_PER_SAMPLE</span>, options)</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting the value of the specified attribute key of the image.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get the value of the specified attribute key of the image, error.code <span class="hljs-subst">${error.code}</span>, error.message <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getimageproperties12" device-type="phone,2in1,tablet,wearable,tv">getImageProperties<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageproperties12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageProperties(key: Array&lt;PropertyKey&gt;): Promise&lt;Record&lt;PropertyKey, string|null&gt;&gt;</p>     <p>批量获取图片中的指定属性键的值。使用Promise异步回调。</p>     <p>该接口仅支持JPEG、PNG和HEIF（不同硬件设备支持情况不同）文件，且需要包含exif信息。其中可以通过supportedFormats属性查询是否支持HEIF格式的exif读写。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#propertykey7">PropertyKey</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性名的数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Record&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#propertykey7">PropertyKey</a>, string | null&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回图片属性值，如获取失败则返回null。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes:1.Mandatory parameters are left unspecified;2.Incorrect parameter types;3.Parameter verification failed;</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980110</td>         <td class="cellrowborder" width="50%">The image source data is incorrect.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980113</td>         <td class="cellrowborder" width="50%">Unknown image format.The image data provided is not in a recognized or supported format, or it may be corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980116</td>         <td class="cellrowborder" width="50%">Failed to decode the image.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageProperties</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">let</span> key = [image.<span class="hljs-property">PropertyKey</span>.<span class="hljs-property">IMAGE_WIDTH</span>, image.<span class="hljs-property">PropertyKey</span>.<span class="hljs-property">IMAGE_LENGTH</span>];</li><li>  imageSourceObj.<span class="hljs-title function_">getImageProperties</span>(key).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getimagepropertysync20" device-type="phone,2in1,tablet,wearable,tv">getImagePropertySync<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimagepropertysync20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImagePropertySync(key:PropertyKey): string</p>     <p>获取图片exif指定属性键的值，使用同步形式返回结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>该方法仅支持JPEG、PNG和HEIF（不同硬件设备支持情况不同）文件，且需要包含exif信息。</p></li>        <li>         <p>exif信息是图片的元数据，包含拍摄时间、相机型号、光圈、焦距、ISO等。</p></li>        <li>         <p>该方法为同步方法，调用时会阻塞当前线程，不建议在主线程中调用，否则可能导致应用卡顿、掉帧或响应延迟。具体场景参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/time-consuming-task-overview" target="_blank">耗时任务并发场景简介</a>。</p></li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#propertykey7">PropertyKey</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性名。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回图片exif中指定属性键的值（如获取失败则返回属性默认值），各个数据值作用请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#propertykey7">PropertyKey</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">7700101</td>         <td class="cellrowborder" width="50%">Bad source. e.g.,1. Image has invalid width or height. 2. Image source incomplete. 3. Read image data failed. 4. Codec create failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700102</td>         <td class="cellrowborder" width="50%">Unsupported MIME type.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700202</td>         <td class="cellrowborder" width="50%">Unsupported metadata. For example, key is not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImagePropertySync</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-keyword">let</span> resourceMgr = context.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">if</span> (resourceMgr == <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> fd = resourceMgr.<span class="hljs-title function_">getRawFdSync</span>(<span class="hljs-string">"example.jpg"</span>);</li><li>
</li><li>  <span class="hljs-keyword">const</span> imageSourceObj = image.<span class="hljs-title function_">createImageSource</span>(fd);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getImagePropertySync"</span>);</li><li>  <span class="hljs-keyword">let</span> bits_per_sample = imageSourceObj.<span class="hljs-title function_">getImagePropertySync</span>(image.<span class="hljs-property">PropertyKey</span>.<span class="hljs-property">BITS_PER_SAMPLE</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"bits_per_sample : "</span> + bits_per_sample);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="modifyimageproperty11" device-type="phone,2in1,tablet,wearable,tv">modifyImageProperty<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="modifyimageproperty11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>modifyImageProperty(key: PropertyKey, value: string): Promise&lt;void&gt;</p>     <p>通过指定的键修改图片属性的值。使用Promise异步回调。</p>     <p>该接口仅支持JPEG、PNG和HEIF<sup>12+</sup>（不同硬件设备支持情况不同）文件，且需要包含exif信息。其中可以通过supportedFormats属性查询是否支持HEIF格式的exif读写。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>调用modifyImageProperty修改属性会改变属性字节长度，使用buffer创建的ImageSource调用modifyImageProperty会导致buffer内容覆盖，目前buffer创建的ImageSource不支持调用此接口，请改用fd或path创建的ImageSource。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#propertykey7">PropertyKey</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">属性值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes:1.Mandatory parameters are left unspecified;2.Incorrect parameter types;</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980123</td>         <td class="cellrowborder" width="50%">The image does not support EXIF decoding.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980133</td>         <td class="cellrowborder" width="50%">The EXIF data is out of range.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980135</td>         <td class="cellrowborder" width="50%">The EXIF value is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980146</td>         <td class="cellrowborder" width="50%">The EXIF data failed to be written to the file.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ModifyImageProperty</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">modifyImageProperty</span>(image.<span class="hljs-property">PropertyKey</span>.<span class="hljs-property">IMAGE_WIDTH</span>, <span class="hljs-string">"120"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    imageSourceObj.<span class="hljs-title function_">getImageProperty</span>(image.<span class="hljs-property">PropertyKey</span>.<span class="hljs-property">IMAGE_WIDTH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">width: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ImageWidth is :<span class="hljs-subst">${width}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get the Image Width, error.code <span class="hljs-subst">${error.code}</span>, error.message <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to modify the Image Width, error.code <span class="hljs-subst">${error.code}</span>, error.message <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="modifyimageproperties12" device-type="phone,2in1,tablet,wearable,tv">modifyImageProperties<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="modifyimageproperties12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>modifyImageProperties(records: Record&lt;PropertyKey, string|null&gt;): Promise&lt;void&gt;</p>     <p>批量通过指定的键修改图片属性的值。使用Promise异步回调。</p>     <p>该接口仅支持JPEG、PNG和HEIF（不同硬件设备支持情况不同）文件，且需要包含exif信息。其中可以通过supportedFormats属性查询是否支持HEIF格式的exif读写。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>调用modifyImageProperties修改属性会改变属性字节长度，使用buffer创建的ImageSource调用modifyImageProperties会导致buffer内容覆盖，目前buffer创建的ImageSource不支持调用此接口，请改用fd或path创建的ImageSource。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">records</td>         <td class="cellrowborder" width="25%">Record&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#propertykey7">PropertyKey</a>, string | null&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">包含图片属性名和属性值的数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes:1.Mandatory parameters are left unspecified;2.Incorrect parameter types;3.Parameter verification failed;</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980123</td>         <td class="cellrowborder" width="50%">The image does not support EXIF decoding.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980135</td>         <td class="cellrowborder" width="50%">The EXIF value is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980146</td>         <td class="cellrowborder" width="50%">The EXIF data failed to be written to the file.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ModifyImageProperties</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">keyValues</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">PropertyKey</span>, <span class="hljs-built_in">string</span>|<span class="hljs-literal">null</span>&gt; = {</li><li>    [image.<span class="hljs-property">PropertyKey</span>.<span class="hljs-property">IMAGE_WIDTH</span>] : <span class="hljs-string">"1024"</span>,</li><li>    [image.<span class="hljs-property">PropertyKey</span>.<span class="hljs-property">IMAGE_LENGTH</span>] : <span class="hljs-string">"1024"</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> checkKey = [image.<span class="hljs-property">PropertyKey</span>.<span class="hljs-property">IMAGE_WIDTH</span>, image.<span class="hljs-property">PropertyKey</span>.<span class="hljs-property">IMAGE_LENGTH</span>];</li><li>  imageSourceObj.<span class="hljs-title function_">modifyImageProperties</span>(keyValues).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    imageSourceObj.<span class="hljs-title function_">getImageProperties</span>(checkKey).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Image Width and Image Height:<span class="hljs-subst">${data}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to modify the Image Width and Image Height, error.code <span class="hljs-subst">${err.code}</span>, error.message <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to modify the Image Width and Image Height, error.code <span class="hljs-subst">${err.code}</span>, error.message <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="updatedata9" device-type="phone,2in1,tablet,wearable,tv">updateData<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="updatedata9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>updateData(buf: ArrayBuffer, isFinished: boolean, offset: number, length: number): Promise&lt;void&gt;</p>     <p>更新增量数据。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">存放增量数据的buffer。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">isFinished</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示数据更新完成，当前buffer内存放最后一段数据；false表示数据还未更新完成，需要继续更新。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">offset</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">即当前buffer中的数据首地址，相对于整个图片文件首地址的偏移量。单位：字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前buffer的长度。单位：字节。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UpdateDatay</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">array</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  imageSourceObj.<span class="hljs-title function_">updateData</span>(array, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in updating data.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update data.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="updatedata9-1" device-type="phone,2in1,tablet,wearable,tv">updateData<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="updatedata9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>updateData(buf: ArrayBuffer, isFinished: boolean, offset: number, length: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>更新增量数据。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">存放增量数据的buffer。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">isFinished</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示数据更新完成，当前buffer内存放最后一段数据；false表示数据还未更新完成，需要继续更新。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">offset</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">即当前buffer中的数据首地址，相对于整个图片文件首地址的偏移量。单位：字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前buffer的长度。单位：字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当更新增量数据成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UpdateDatay</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">array</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  imageSourceObj.<span class="hljs-title function_">updateData</span>(array, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update data.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in updating data.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpicture13" device-type="phone,2in1,tablet,wearable,tv">createPicture<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpicture13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPicture(options?: DecodingOptionsForPicture): Promise&lt;Picture&gt;</p>     <p>通过图片解码参数创建Picture对象。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#decodingoptionsforpicture13">DecodingOptionsForPicture</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">解码参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-picture">Picture</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回Picture。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes: 1.Mandatory parameters are left unspecified.2.Incorrect parameter types; 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700301</td>         <td class="cellrowborder" width="50%">Failed to decode image.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePicture</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: image.<span class="hljs-property">DecodingOptionsForPicture</span> = {</li><li>    <span class="hljs-attr">desiredAuxiliaryPictures</span>: [image.<span class="hljs-property">AuxiliaryPictureType</span>.<span class="hljs-property">GAINMAP</span>] <span class="hljs-comment">// GAINMAP为需要解码的辅助图类型。</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pictureObj</span>: image.<span class="hljs-property">Picture</span> = <span class="hljs-keyword">await</span> imageSourceObj.<span class="hljs-title function_">createPicture</span>(options);</li><li>  <span class="hljs-keyword">if</span> (pictureObj != <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Create picture succeeded'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Create picture failed'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpictureatindex20" device-type="phone,2in1,tablet,wearable,tv">createPictureAtIndex<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpictureatindex20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPictureAtIndex(index: number): Promise&lt;Picture&gt;</p>     <p>通过指定序号的图片（目前仅支持GIF格式）创建Picture对象。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">index</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">解码图片序号。图片序号有效的取值范围为：[0，帧数-1]。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-picture">Picture</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回Picture。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">7700101</td>         <td class="cellrowborder" width="50%">Bad source.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700102</td>         <td class="cellrowborder" width="50%">Unsupported MIME type.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700103</td>         <td class="cellrowborder" width="50%">Image too large.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700203</td>         <td class="cellrowborder" width="50%">Unsupported options. For example, index is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700301</td>         <td class="cellrowborder" width="50%">Decoding failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePictures</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">frameCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-keyword">await</span> imageSourceObj.<span class="hljs-title function_">getFrameCount</span>();</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; frameCount; index++) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">pictureObj</span>: image.<span class="hljs-property">Picture</span> = <span class="hljs-keyword">await</span> imageSourceObj.<span class="hljs-title function_">createPictureAtIndex</span>(index);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Create picture succeeded for frame: '</span> + index);</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Create picture failed for frame: '</span> + index);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpixelmap7" device-type="phone,2in1,tablet,wearable,tv">createPixelMap<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpixelmap7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMap(options?: DecodingOptions): Promise&lt;PixelMap&gt;</p>     <p>通过图片解码参数创建PixelMap对象。</p>     <p>从API version 15开始，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#createpixelmapusingallocator15">createPixelMapUsingAllocator</a>，该接口可以指定输出pixelMap的内存类型<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#allocatortype15">AllocatorType</a>，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-allocator-type" target="_blank">申请图片解码内存(ArkTS)</a>。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#decodingoptions7">DecodingOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">解码参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMap</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">createPixelMap</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap object through image decoding parameters.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelMap object through image decoding parameters, error.code <span class="hljs-subst">${error.code}</span>, error.message <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpixelmap7-1" device-type="phone,2in1,tablet,wearable,tv">createPixelMap<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpixelmap7-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMap(callback: AsyncCallback&lt;PixelMap&gt;): void</p>     <p>通过默认参数创建PixelMap对象。使用callback异步回调。</p>     <p>从API version 15开始，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#createpixelmapusingallocator15">createPixelMapUsingAllocator</a>，该接口可以指定输出pixelMap的内存类型<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#allocatortype15">AllocatorType</a>，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-allocator-type" target="_blank">申请图片解码内存(ArkTS)</a>。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当创建PixelMap对象成功，err为undefined，data为获取到的PixelMap对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMap</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">createPixelMap</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, pixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelMap.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap object.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpixelmap7-2" device-type="phone,2in1,tablet,wearable,tv">createPixelMap<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpixelmap7-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMap(options: DecodingOptions, callback: AsyncCallback&lt;PixelMap&gt;): void</p>     <p>通过图片解码参数创建PixelMap对象。</p>     <p>从API version 15开始，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#createpixelmapusingallocator15">createPixelMapUsingAllocator</a>，该接口可以指定输出pixelMap的内存类型<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#allocatortype15">AllocatorType</a>，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-allocator-type" target="_blank">申请图片解码内存(ArkTS)</a>。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#decodingoptions7">DecodingOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">解码参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当创建PixelMap对象成功，err为undefined，data为获取到的PixelMap对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMap</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">decodingOptions</span>: image.<span class="hljs-property">DecodingOptions</span> = {</li><li>    <span class="hljs-attr">sampleSize</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">desiredSize</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">2</span> },</li><li>    <span class="hljs-attr">rotate</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>,</li><li>    <span class="hljs-attr">desiredRegion</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> },</li><li>    <span class="hljs-comment">// 若解码接口同时传入了desiredSize参数与desiredRegion参数，需进一步传入cropAndScaleStrategy参数指定缩放与裁剪的先后顺序，推荐设置CROP_FIRST。</span></li><li>    <span class="hljs-attr">cropAndScaleStrategy</span>: image.<span class="hljs-property">CropAndScaleStrategy</span>.<span class="hljs-property">CROP_FIRST</span>,</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">0</span></li><li>  };</li><li>  imageSourceObj.<span class="hljs-title function_">createPixelMap</span>(decodingOptions, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, pixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelMap.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap object.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpixelmapsync12" device-type="phone,2in1,tablet,wearable,tv">createPixelMapSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpixelmapsync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapSync(options?: DecodingOptions): PixelMap</p>     <p>通过图片解码参数同步创建PixelMap对象。</p>     <p>从API version 15开始，推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#createpixelmapusingallocatorsync15">createPixelMapUsingAllocatorSync</a>，该接口可以指定输出pixelMap的内存类型<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#allocatortype15">AllocatorType</a>，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-allocator-type" target="_blank">申请图片解码内存(ArkTS)</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该方法为同步方法，调用时会阻塞当前线程，不建议在主线程中调用，否则可能导致应用卡顿、掉帧或响应延迟。具体场景参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/time-consuming-task-overview" target="_blank">耗时任务并发场景简介</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#decodingoptions7">DecodingOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">解码参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">用于同步返回创建结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapSync</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-comment">// 此处'test.jpg'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">filePath</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(filePath);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">decodingOptions</span>: image.<span class="hljs-property">DecodingOptions</span> = {</li><li>    <span class="hljs-attr">sampleSize</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">desiredSize</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">2</span> },</li><li>    <span class="hljs-attr">rotate</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>,</li><li>    <span class="hljs-attr">desiredRegion</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> },</li><li>    <span class="hljs-comment">// 若解码接口同时传入了desiredSize参数与desiredRegion参数，需进一步传入cropAndScaleStrategy参数指定缩放与裁剪的先后顺序，推荐设置CROP_FIRST。</span></li><li>    <span class="hljs-attr">cropAndScaleStrategy</span>: image.<span class="hljs-property">CropAndScaleStrategy</span>.<span class="hljs-property">CROP_FIRST</span>,</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">0</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> pixelmap = imageSource.<span class="hljs-title function_">createPixelMapSync</span>(decodingOptions);</li><li>  <span class="hljs-keyword">if</span> (pixelmap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap object.'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create pixelMap.'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpixelmaplist10" device-type="phone,2in1,tablet,wearable,tv">createPixelMapList<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpixelmaplist10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapList(options?: DecodingOptions): Promise&lt;Array&lt;PixelMap&gt;&gt;</p>     <p>通过图片解码参数创建PixelMap数组。针对动图如Gif、Webp，此接口返回每帧图片数据；针对静态图，此接口返回唯一的一帧图片数据。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>此接口会一次性解码全部帧，当帧数过多或单帧图像过大时，会占用较大内存，造成系统内存紧张，此种情况推荐使用Image组件显示动图，Image组件采用逐帧解码，占用内存比此接口少。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#decodingoptions7">DecodingOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">解码参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">异步返回PixelMap数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980099</td>         <td class="cellrowborder" width="50%">The shared memory data is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980101</td>         <td class="cellrowborder" width="50%">The image data is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">The image data is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980106</td>         <td class="cellrowborder" width="50%">The image data is too large. This status code is thrown when an error occurs during the process of checking size.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980109</td>         <td class="cellrowborder" width="50%">Failed to crop the image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">The image source data is incomplete.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980116</td>         <td class="cellrowborder" width="50%">Failed to decode the image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980118</td>         <td class="cellrowborder" width="50%">Failed to create the image plugin.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980137</td>         <td class="cellrowborder" width="50%">Invalid media operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980173</td>         <td class="cellrowborder" width="50%">The DMA memory does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980174</td>         <td class="cellrowborder" width="50%">The DMA memory data is abnormal.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapList</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">decodeOpts</span>: image.<span class="hljs-property">DecodingOptions</span> = {</li><li>    <span class="hljs-attr">sampleSize</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">desiredSize</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">198</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">202</span> },</li><li>    <span class="hljs-attr">rotate</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>,</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  };</li><li>  imageSourceObj.<span class="hljs-title function_">createPixelMapList</span>(decodeOpts).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelMapList: <span class="hljs-built_in">Array</span>&lt;image.PixelMap&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMapList object.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelMapList object, error code is <span class="hljs-subst">${err}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpixelmaplist10-1" device-type="phone,2in1,tablet,wearable,tv">createPixelMapList<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpixelmaplist10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapList(callback: AsyncCallback&lt;Array&lt;PixelMap&gt;&gt;): void</p>     <p>通过默认参数创建PixelMap数组。使用callback异步回调。</p>     <p>该接口针对动图如Gif、Webp，此接口返回每帧图片数据；针对静态图，此接口返回唯一的一帧图片数据。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>此接口会一次性解码全部帧，当帧数过多或单帧图像过大时，会占用较大内存，造成系统内存紧张，此种情况推荐使用Image组件显示动图，Image组件采用逐帧解码，占用内存比此接口少。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当创建PixelMap对象数组成功，err为undefined，data为获取到的PixelMap对象数组；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980099</td>         <td class="cellrowborder" width="50%">The shared memory data is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980101</td>         <td class="cellrowborder" width="50%">The image data is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">The image data is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980106</td>         <td class="cellrowborder" width="50%">The image data is too large. This status code is thrown when an error occurs during the process of checking size.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980109</td>         <td class="cellrowborder" width="50%">Failed to crop the image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">The image source data is incomplete.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980116</td>         <td class="cellrowborder" width="50%">Failed to decode the image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980118</td>         <td class="cellrowborder" width="50%">Failed to create the image plugin.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980137</td>         <td class="cellrowborder" width="50%">Invalid media operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980173</td>         <td class="cellrowborder" width="50%">The DMA memory does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980174</td>         <td class="cellrowborder" width="50%">The DMA memory data is abnormal.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapList</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">createPixelMapList</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, pixelMapList: <span class="hljs-built_in">Array</span>&lt;image.PixelMap&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelMapList object, error code is <span class="hljs-subst">${err}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMapList object.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpixelmaplist10-2" device-type="phone,2in1,tablet,wearable,tv">createPixelMapList<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpixelmaplist10-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapList(options: DecodingOptions, callback: AsyncCallback&lt;Array&lt;PixelMap&gt;&gt;): void</p>     <p>通过图片解码参数创建PixelMap数组。使用callback异步回调。</p>     <p>该接口针对动图如Gif、Webp，此接口返回每帧图片数据；针对静态图，此接口返回唯一的一帧图片数据。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>此接口会一次性解码全部帧，当帧数过多或单帧图像过大时，会占用较大内存，造成系统内存紧张，此种情况推荐使用Image组件显示动图，Image组件采用逐帧解码，占用内存比此接口少。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#decodingoptions7">DecodingOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">解码参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当创建PixelMap对象数组成功，err为undefined，data为获取到的PixelMap对象数组；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980099</td>         <td class="cellrowborder" width="50%">The shared memory data is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980101</td>         <td class="cellrowborder" width="50%">The image data is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">The image data is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980106</td>         <td class="cellrowborder" width="50%">The image data is too large. This status code is thrown when an error occurs during the process of checking size.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980109</td>         <td class="cellrowborder" width="50%">Failed to crop the image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">The image source data is incomplete.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980116</td>         <td class="cellrowborder" width="50%">Failed to decode the image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980118</td>         <td class="cellrowborder" width="50%">Failed to create the image plugin.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980137</td>         <td class="cellrowborder" width="50%">Invalid media operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980173</td>         <td class="cellrowborder" width="50%">The DMA memory does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980174</td>         <td class="cellrowborder" width="50%">The DMA memory data is abnormal.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapList</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">decodeOpts</span>: image.<span class="hljs-property">DecodingOptions</span> = {</li><li>    <span class="hljs-attr">sampleSize</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">desiredSize</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">198</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">202</span> },</li><li>    <span class="hljs-attr">rotate</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>,</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  };</li><li>  imageSourceObj.<span class="hljs-title function_">createPixelMapList</span>(decodeOpts, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, pixelMapList: <span class="hljs-built_in">Array</span>&lt;image.PixelMap&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelMapList object, error code is <span class="hljs-subst">${err}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMapList object.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpixelmapusingallocator15" device-type="phone,2in1,tablet,wearable,tv">createPixelMapUsingAllocator<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpixelmapusingallocator15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapUsingAllocator(options?: DecodingOptions, allocatorType?: AllocatorType): Promise&lt;PixelMap&gt;</p>     <p>使用指定的分配器根据图像解码参数异步创建PixelMap对象。使用Promise异步回调。接口使用详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-allocator-type" target="_blank">申请图片解码内存(ArkTS)</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#decodingoptions7">DecodingOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">解码参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">allocatorType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#allocatortype15">AllocatorType</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">用于图像解码的内存类型。默认值为AllocatorType.AUTO。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types;3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700101</td>         <td class="cellrowborder" width="50%">Bad source. e.g.,1. Image has invalid width or height. 2. Image source incomplete. 3. Read image data failed. 4. Codec create failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700102</td>         <td class="cellrowborder" width="50%">Unsupported mimetype.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700103</td>         <td class="cellrowborder" width="50%">Image too large. This status code is thrown when an error occurs during the process of checking size.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700201</td>         <td class="cellrowborder" width="50%">Unsupported allocator type, e.g., use share memory to decode a HDR image as only DMA supported hdr metadata.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700203</td>         <td class="cellrowborder" width="50%">Unsupported options, e.g., cannot convert image into desired pixel format.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700301</td>         <td class="cellrowborder" width="50%">Failed to decode image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700302</td>         <td class="cellrowborder" width="50%">Failed to allocate memory.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapUsingAllocator</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-comment">// 此处'test.jpg'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">filePath</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(filePath);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">decodingOptions</span>: image.<span class="hljs-property">DecodingOptions</span> = {</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">desiredSize</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">3072</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">4096</span> },</li><li>    <span class="hljs-attr">rotate</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>,</li><li>    <span class="hljs-attr">desiredRegion</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">3072</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">4096</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> },</li><li>    <span class="hljs-comment">// 若解码接口同时传入了desiredSize参数与desiredRegion参数，需进一步传入cropAndScaleStrategy参数指定缩放与裁剪的先后顺序，推荐设置CROP_FIRST。</span></li><li>    <span class="hljs-attr">cropAndScaleStrategy</span>: image.<span class="hljs-property">CropAndScaleStrategy</span>.<span class="hljs-property">CROP_FIRST</span>,</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">0</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> pixelmap = imageSource.<span class="hljs-title function_">createPixelMapUsingAllocator</span>(decodingOptions, image.<span class="hljs-property">AllocatorType</span>.<span class="hljs-property">AUTO</span>);</li><li>  <span class="hljs-keyword">if</span> (pixelmap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap object.'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create pixelMap.'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createpixelmapusingallocatorsync15" device-type="phone,2in1,tablet,wearable,tv">createPixelMapUsingAllocatorSync<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpixelmapusingallocatorsync15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapUsingAllocatorSync(options?: DecodingOptions, allocatorType?: AllocatorType): PixelMap</p>     <p>根据指定的分配器同步创建一个基于图像解码参数的PixelMap对象。接口使用详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-allocator-type" target="_blank">申请图片解码内存(ArkTS)</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该方法为同步方法，调用时会阻塞当前线程，不建议在主线程中调用，否则可能导致应用卡顿、掉帧或响应延迟。具体场景参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/time-consuming-task-overview" target="_blank">耗时任务并发场景简介</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#decodingoptions7">DecodingOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">解码参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">allocatorType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#allocatortype15">AllocatorType</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">用于图像解码的内存类型。默认值为AllocatorType.AUTO。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">用于同步返回创建结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types;3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700101</td>         <td class="cellrowborder" width="50%">Bad source. e.g.,1. Image has invalid width or height. 2. Image source incomplete. 3. Read image data failed. 4. Codec create failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700102</td>         <td class="cellrowborder" width="50%">Unsupported mimetype.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700103</td>         <td class="cellrowborder" width="50%">Image too large. This status code is thrown when an error occurs during the process of checking size.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700201</td>         <td class="cellrowborder" width="50%">Unsupported allocator type, e.g., use share memory to decode a HDR image as only DMA supported hdr metadata.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700203</td>         <td class="cellrowborder" width="50%">Unsupported options, e.g., cannot convert image into desired pixel format.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700301</td>         <td class="cellrowborder" width="50%">Failed to decode image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7700302</td>         <td class="cellrowborder" width="50%">Failed to allocate memory.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapUsingAllocator</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-comment">// 此处'test.jpg'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">filePath</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(filePath);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">decodingOptions</span>: image.<span class="hljs-property">DecodingOptions</span> = {</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">desiredSize</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">3072</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">4096</span> },</li><li>    <span class="hljs-attr">rotate</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>,</li><li>    <span class="hljs-attr">desiredRegion</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">3072</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">4096</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> },</li><li>    <span class="hljs-comment">// 若解码接口同时传入了desiredSize参数与desiredRegion参数，需进一步传入cropAndScaleStrategy参数指定缩放与裁剪的先后顺序，推荐设置CROP_FIRST。</span></li><li>    <span class="hljs-attr">cropAndScaleStrategy</span>: image.<span class="hljs-property">CropAndScaleStrategy</span>.<span class="hljs-property">CROP_FIRST</span>,</li><li>    <span class="hljs-attr">index</span>: <span class="hljs-number">0</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> pixelmap = imageSource.<span class="hljs-title function_">createPixelMapUsingAllocatorSync</span>(decodingOptions, image.<span class="hljs-property">AllocatorType</span>.<span class="hljs-property">AUTO</span>);</li><li>  <span class="hljs-keyword">if</span> (pixelmap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap object.'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create pixelMap.'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getdelaytimelist10" device-type="phone,2in1,tablet,wearable,tv">getDelayTimeList<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdelaytimelist10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDelayTimeList(callback: AsyncCallback&lt;Array&lt;number&gt;&gt;): void</p>     <p>获取图像延迟时间数组。使用callback异步回调。此接口仅用于gif图片和webp图片。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;number&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当获取图像延迟时间数组成功，err为undefined，data为获取到的图像延时时间数组；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980110</td>         <td class="cellrowborder" width="50%">The image source data is incorrect.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">The image source data is incomplete.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980116</td>         <td class="cellrowborder" width="50%">Failed to decode the image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980118</td>         <td class="cellrowborder" width="50%">Failed to create the image plugin.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980122</td>         <td class="cellrowborder" width="50%">Failed to decode the image header.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980149</td>         <td class="cellrowborder" width="50%">Invalid MIME type for the image source.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetDelayTimeList</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">getDelayTimeList</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, delayTimes: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get delayTimes object.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting delayTimes object.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getdelaytimelist10-1" device-type="phone,2in1,tablet,wearable,tv">getDelayTimeList<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdelaytimelist10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDelayTimeList(): Promise&lt;Array&lt;number&gt;&gt;</p>     <p>获取图像延迟时间数组。使用Promise异步回调。此接口仅用于gif图片和webp图片。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;number&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回延迟时间数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980110</td>         <td class="cellrowborder" width="50%">The image source data is incorrect.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">The image source data is incomplete.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980116</td>         <td class="cellrowborder" width="50%">Failed to decode the image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980118</td>         <td class="cellrowborder" width="50%">Failed to create the image plugin.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980122</td>         <td class="cellrowborder" width="50%">Failed to decode the image header.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980149</td>         <td class="cellrowborder" width="50%">Invalid MIME type for the image source.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetDelayTimeList</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">getDelayTimeList</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">delayTimes: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting delayTimes object.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get delayTimes object.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getframecount10" device-type="phone,2in1,tablet,wearable,tv">getFrameCount<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getframecount10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getFrameCount(callback: AsyncCallback&lt;number&gt;): void</p>     <p>获取图像帧数。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当获取图像帧数成功，err为undefined，data为获取到的图像帧数；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">The image source data is incomplete.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980112</td>         <td class="cellrowborder" width="50%">The image format does not match.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980113</td>         <td class="cellrowborder" width="50%">Unknown image format.The image data provided is not in a recognized or supported format, or it may be corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980116</td>         <td class="cellrowborder" width="50%">Failed to decode the image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980118</td>         <td class="cellrowborder" width="50%">Failed to create the image plugin.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980122</td>         <td class="cellrowborder" width="50%">Failed to decode the image header.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980137</td>         <td class="cellrowborder" width="50%">Invalid media operation.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetFrameCount</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">getFrameCount</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, frameCount: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get frame count.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting frame count.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getframecount10-1" device-type="phone,2in1,tablet,wearable,tv">getFrameCount<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getframecount10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getFrameCount(): Promise&lt;number&gt;</p>     <p>获取图像帧数。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回图像帧数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">The image source data is incomplete.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980112</td>         <td class="cellrowborder" width="50%">The image format does not match.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980113</td>         <td class="cellrowborder" width="50%">Unknown image format.The image data provided is not in a recognized or supported format, or it may be corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980116</td>         <td class="cellrowborder" width="50%">Failed to decode the image.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980118</td>         <td class="cellrowborder" width="50%">Failed to create the image plugin.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980122</td>         <td class="cellrowborder" width="50%">Failed to decode the image header.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980137</td>         <td class="cellrowborder" width="50%">Invalid media operation.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetFrameCount</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">getFrameCount</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">frameCount: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting frame count.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get frame count.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getdisposaltypelist12" device-type="phone,2in1,tablet,wearable,tv">getDisposalTypeList<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdisposaltypelist12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDisposalTypeList(): Promise&lt;Array&lt;number&gt;&gt;</p>     <p>获取图像帧过渡模式数组。使用Promise异步回调。此接口仅用于gif图片。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;number&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回帧过渡模式数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980101</td>         <td class="cellrowborder" width="50%">The image data is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980137</td>         <td class="cellrowborder" width="50%">Invalid media operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980149</td>         <td class="cellrowborder" width="50%">Invalid MIME type for the image source.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetDisposalTypeList</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">getDisposalTypeList</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">disposalTypes: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">number</span>&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting disposalTypes object.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get disposalTypes object.code <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="release" device-type="phone,2in1,tablet,wearable,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(callback: AsyncCallback&lt;void&gt;): void</p>     <p>释放ImageSource实例。使用callback异步回调。</p>     <p>ArkTS有内存回收机制，ImageSource对象不调用release方法，内存最终也会由系统统一释放。但图片使用的内存往往较大，为尽快释放内存，建议应用在使用完成后主动调用release方法提前释放内存。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当资源释放成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Release</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">release</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to release the image source instance.code <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing the image source instance.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="release-1" device-type="phone,2in1,tablet,wearable,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(): Promise&lt;void&gt;</p>     <p>释放ImageSource实例。使用Promise异步回调。</p>     <p>ArkTS有内存回收机制，ImageSource对象不调用release方法，内存最终也会由系统统一释放。但图片使用的内存往往较大，为尽快释放内存，建议应用在使用完成后主动调用release方法提前释放内存。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Release</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">release</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing the image source instance.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to release the image source instance.code <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getimagepropertydeprecated" device-type="phone,2in1,tablet,wearable,tv">getImageProperty<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimagepropertydeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageProperty(key:string, options?: GetImagePropertyOptions): Promise&lt;string&gt;</p>     <p>获取图片中给定索引处图像的指定属性键的值。使用Promise异步回调。</p>     <p>该接口仅支持JPEG、PNG和HEIF<sup>12+</sup>（不同硬件设备支持情况不同）文件，且需要包含exif信息。其中可以通过supportedFormats属性查询是否支持HEIF格式的exif读写。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 11废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#getimageproperty11">getImageProperty</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#getimagepropertyoptionsdeprecated">GetImagePropertyOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">图片属性，包括图片序号与默认属性值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回图片属性值，如获取失败则返回属性默认值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageProperty</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">getImageProperty</span>(<span class="hljs-string">"BitsPerSample"</span>)</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting the value of the specified attribute key of the image.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get the value of the specified attribute key of the image, error.code <span class="hljs-subst">${error.code}</span>, error.message <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getimagepropertydeprecated-1" device-type="phone,2in1,tablet,wearable,tv">getImageProperty<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimagepropertydeprecated-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageProperty(key:string, callback: AsyncCallback&lt;string&gt;): void</p>     <p>获取图片中给定索引处图像的指定属性键的值。使用callback异步回调。</p>     <p>该接口仅支持JPEG、PNG和HEIF<sup>12+</sup>（不同硬件设备支持情况不同）文件，且需要包含exif信息。其中可以通过supportedFormats属性查询是否支持HEIF格式的exif读写。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 11废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#getimageproperty11">getImageProperty</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当获取图片属性值成功，err为undefined，data为获取到的图片属性值；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageProperty</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">getImageProperty</span>(<span class="hljs-string">"BitsPerSample"</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to get the value of the specified attribute key of the image.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting the value of the specified attribute key of the image.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getimagepropertydeprecated-2" device-type="phone,2in1,tablet,wearable,tv">getImageProperty<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimagepropertydeprecated-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageProperty(key:string, options: GetImagePropertyOptions, callback: AsyncCallback&lt;string&gt;): void</p>     <p>获取图片指定属性键的值。使用callback异步回调。</p>     <p>该接口仅支持JPEG、PNG和HEIF<sup>12+</sup>（不同硬件设备支持情况不同）文件，且需要包含exif信息。其中可以通过supportedFormats属性查询是否支持HEIF格式的exif读写。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 11废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#getimageproperty11">getImageProperty</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#getimagepropertyoptionsdeprecated">GetImagePropertyOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性，包括图片序号与默认属性值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当获取图片属性值成功，err为undefined，data为获取到的图片属性值；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageProperty</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">property</span>: image.<span class="hljs-property">GetImagePropertyOptions</span> = { <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">defaultValue</span>: <span class="hljs-string">'9999'</span> }</li><li>  imageSourceObj.<span class="hljs-title function_">getImageProperty</span>(<span class="hljs-string">"BitsPerSample"</span>, property, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to get the value of the specified attribute key of the image.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting the value of the specified attribute key of the image.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="modifyimagepropertydeprecated" device-type="phone,2in1,tablet,wearable,tv">modifyImageProperty<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="modifyimagepropertydeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>modifyImageProperty(key: string, value: string): Promise&lt;void&gt;</p>     <p>通过指定的键修改图片属性的值。使用Promise异步回调。</p>     <p>该接口仅支持JPEG、PNG和HEIF<sup>12+</sup>（不同硬件设备支持情况不同）文件，且需要包含exif信息。其中可以通过supportedFormats属性查询是否支持HEIF格式的exif读写。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>调用modifyImageProperty修改属性会改变属性字节长度，使用buffer创建的ImageSource调用modifyImageProperty会导致buffer内容覆盖，目前buffer创建的ImageSource不支持调用此接口，请改用fd或path创建的ImageSource。</p>       <p>从API version 9开始支持，从API version 11废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#modifyimageproperty11">modifyImageProperty</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">属性值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ModifyImageProperty</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">modifyImageProperty</span>(<span class="hljs-string">"ImageWidth"</span>, <span class="hljs-string">"120"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    imageSourceObj.<span class="hljs-title function_">getImageProperty</span>(<span class="hljs-string">"ImageWidth"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">width: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ImageWidth is :<span class="hljs-subst">${width}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get the Image Width, error.code <span class="hljs-subst">${error.code}</span>, error.message <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to modify the Image Width, error.code <span class="hljs-subst">${error.code}</span>, error.message <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="modifyimagepropertydeprecated-1" device-type="phone,2in1,tablet,wearable,tv">modifyImageProperty<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="modifyimagepropertydeprecated-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>modifyImageProperty(key: string, value: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>通过指定的键修改图片属性的值。使用callback异步回调。</p>     <p>仅支持JPEG、PNG和HEIF<sup>12+</sup>（不同硬件设备支持情况不同）文件，且需要包含exif信息。其中可以通过supportedFormats属性查询是否支持HEIF格式的exif读写。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>调用modifyImageProperty修改属性会改变属性字节长度，使用buffer创建的ImageSource调用modifyImageProperty会导致buffer内容覆盖，目前buffer创建的ImageSource不支持调用此接口，请改用fd或path创建的ImageSource。</p>       <p>从API version 9开始支持，从API version 11废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#modifyimageproperty11">modifyImageProperty</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">属性值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当修改图片属性值成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-oth-c106="" class="highlight-div"><div _ngcontent-oth-c106="" class="highlight-div-header"><div _ngcontent-oth-c106="" class="highlight-div-header-left"><div _ngcontent-oth-c106="" class="handle-button expand-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-oth-c106="" class="highlight-div-header-right"><div _ngcontent-oth-c106="" class="handle-button ai-button"></div><div _ngcontent-oth-c106="" class="handle-button line-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-oth-c106="" class="handle-button theme-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-oth-c106="" class="handle-button copy-button"><div _ngcontent-oth-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-oth-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ModifyImageProperty</span>(<span class="hljs-params">imageSourceObj : image.ImageSource</span>) {</li><li>  imageSourceObj.<span class="hljs-title function_">modifyImageProperty</span>(<span class="hljs-string">"ImageWidth"</span>, <span class="hljs-string">"120"</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to modify the Image Width.code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in modifying the Image Width.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>