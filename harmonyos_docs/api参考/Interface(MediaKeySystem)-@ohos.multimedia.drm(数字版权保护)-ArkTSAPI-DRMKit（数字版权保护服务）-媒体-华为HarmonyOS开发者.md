<h1 _ngcontent-ydi-c119="" class="doc-title ng-star-inserted" title="Interface (MediaKeySystem)"> Interface (MediaKeySystem) </h1>

<div _ngcontent-ydi-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>本模块首批接口从API version 11开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  </div></div></div> <p>支持MediaKeySystem实例管理、设备证书申请与处理、会话创建、离线媒体密钥管理、获取DRM度量记录、设备属性等。在调用MediaKeySystem方法之前，必须使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-f#drmcreatemediakeysystem">createMediaKeySystem</a>创建一个MediaKeySystem实例。</p>  <div class="tiledSection"><h2 id="导入模块" device-type="phone,2in1,tablet,wearable">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="setconfigurationstring" device-type="phone,2in1,tablet,wearable">setConfigurationString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setconfigurationstring" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>setConfigurationString(configName: string, value: string): void</p> <p>设置字符串类型的配置信息。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">configName</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">配置属性名，不能为空，属性名参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-e#predefinedconfigname">PreDefinedConfigName</a>，具体支持的属性名由设备上DRM解决方案决定。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">配置属性值。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">The parameter check failed. Possibly because: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  mediaKeySystem.<span class="hljs-title function_">setConfigurationString</span>(<span class="hljs-string">"stringConfigName"</span>, <span class="hljs-string">"stringConfigValue"</span>); <span class="hljs-comment">// 确保stringConfigName是可配置的。</span></li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`setConfigurationString ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="getconfigurationstring" device-type="phone,2in1,tablet,wearable">getConfigurationString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getconfigurationstring" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getConfigurationString(configName: string): string</p> <p>获取字符串类型的配置属性值。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">configName</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">配置属性名，不能为空，属性名参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-e#predefinedconfigname">PreDefinedConfigName</a>，具体支持的属性名由设备上DRM解决方案决定。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">string</td> <td class="cellrowborder" width="50%">返回字符串类型的配置属性值。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.5.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">The parameter check failed. Possibly because: 1.Mandatory parameters are left unspecified. 2.Parameter verification failed, the param's length is zero or too big(exceeds 4096 Bytes).</td> </tr> <tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">configValue</span>: <span class="hljs-built_in">string</span> = mediaKeySystem.<span class="hljs-title function_">getConfigurationString</span>(<span class="hljs-string">"vendor"</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getConfigurationString ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="setconfigurationbytearray" device-type="phone,2in1,tablet,wearable">setConfigurationByteArray<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setconfigurationbytearray" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>setConfigurationByteArray(configName: string, value: Uint8Array): void</p> <p>设置数组类型的配置信息。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">configName</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">配置属性名，不能为空，属性名参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-e#predefinedconfigname">PreDefinedConfigName</a>，具体支持的属性名由设备上DRM解决方案决定。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">数组类型的配置属性值，具体属性值由设备上DRM解决方案决定。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">The parameter check failed. Possibly because: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors.</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-comment">// 按实际需求填写configValue属性值，请按实际值传入。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">configValue</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>]);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需确认当前DRM解决方案的byteArrayConfigName属性是可配置的。</span></li><li>  mediaKeySystem.<span class="hljs-title function_">setConfigurationByteArray</span>(<span class="hljs-string">"byteArrayConfigName"</span>, configValue);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`setConfigurationByteArray ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="getconfigurationbytearray" device-type="phone,2in1,tablet,wearable">getConfigurationByteArray<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getconfigurationbytearray" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getConfigurationByteArray(configName: string): Uint8Array</p> <p>获取数组类型的配置信息。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">configName</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">配置属性名，不能为空，属性名参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-e#predefinedconfigname">PreDefinedConfigName</a>，具体支持的属性名由设备上DRM解决方案决定。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Uint8Array</td> <td class="cellrowborder" width="50%">数组类型的配置属性值。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">The parameter check failed. Possibly because: 1.Mandatory parameters are left unspecified. 2.Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">configValue</span>: <span class="hljs-title class_">Uint8Array</span> = mediaKeySystem.<span class="hljs-title function_">getConfigurationByteArray</span>(<span class="hljs-string">"deviceUniqueId"</span>); <span class="hljs-comment">// 确保deviceUniqueId属性是存在的。</span></li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getConfigurationByteArray ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="getstatistics" device-type="phone,2in1,tablet,wearable">getStatistics<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getstatistics" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getStatistics(): StatisticKeyValue[]</p> <p>获取性能度量记录。其中包括当前会话数、插件版本信息、每个会话最大三次解密耗时、解密次数和解密失败次数。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-i#statistickeyvalue">StatisticKeyValue[]</a></td> <td class="cellrowborder" width="50%">度量记录。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">statisticKeyValue</span>: drm.<span class="hljs-property">StatisticKeyValue</span>[] = mediaKeySystem.<span class="hljs-title function_">getStatistics</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getConfigurationByteArray ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="getmaxcontentprotectionlevel" device-type="phone,2in1,tablet,wearable">getMaxContentProtectionLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getmaxcontentprotectionlevel" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getMaxContentProtectionLevel(): ContentProtectionLevel</p> <p>获取当前DRM解决方案支持的最大内容保护级别。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-e#contentprotectionlevel">ContentProtectionLevel</a></td> <td class="cellrowborder" width="50%">返回设备支持的最大内容保护级别。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">maxLevel</span>: drm.<span class="hljs-property">ContentProtectionLevel</span> = mediaKeySystem.<span class="hljs-title function_">getMaxContentProtectionLevel</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getConfigurationByteArray ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="generatekeysystemrequest" device-type="phone,2in1,tablet,wearable">generateKeySystemRequest<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="generatekeysystemrequest" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>generateKeySystemRequest(): Promise&lt;ProvisionRequest&gt;</p> <p>生成获取mediaKeySystem设备证书的请求。使用Promise异步回调。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-i#provisionrequest">ProvisionRequest</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象，mediaKeySystem设备证书的请求。设备上如果已存在设备证书，会返回失败。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-comment">// 设备上已有设备证书的情况下不需要调用。</span></li><li>mediaKeySystem.<span class="hljs-title function_">generateKeySystemRequest</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">ProvisionRequest: drm.ProvisionRequest</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"generateKeySystemRequest"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`generateKeySystemRequest: ERROR: <span class="hljs-subst">${err}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="processkeysystemresponse" device-type="phone,2in1,tablet,wearable">processKeySystemResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="processkeysystemresponse" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>processKeySystemResponse(response: Uint8Array): Promise&lt;void&gt;</p> <p>处理获得的设备证书请求的响应。使用Promise异步回调。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">response</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">设备证书响应。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">The parameter check failed. Possibly because: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-comment">// keySystemResponse是从DRM服务获取的设备证书响应，请按实际值传入；</span></li><li><span class="hljs-keyword">let</span> keySystemResponse = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>]);</li><li>mediaKeySystem.<span class="hljs-title function_">processKeySystemResponse</span>(keySystemResponse).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"processKeySystemResponse"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`processKeySystemResponse: ERROR: <span class="hljs-subst">${err}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="getcertificatestatus" device-type="phone,2in1,tablet,wearable">getCertificateStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcertificatestatus" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getCertificateStatus():CertificateStatus</p> <p>获取设备证书状态值。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-e#certificatestatus">CertificateStatus</a></td> <td class="cellrowborder" width="50%">设备证书状态值。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">certificateStatus</span>: drm.<span class="hljs-property">CertificateStatus</span> = mediaKeySystem.<span class="hljs-title function_">getCertificateStatus</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getCertificateStatus ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="onkeysystemrequired" device-type="phone,2in1,tablet,wearable">on('keySystemRequired')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onkeysystemrequired" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>on(type: 'keySystemRequired', callback: (eventInfo: EventInfo) =&gt; void): void</p> <p>监听设备证书请求事件，获取事件信息。使用callback异步回调。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">事件类型，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-f#drmcreatemediakeysystem">createMediaKeySystem</a>成功创建MediaKeySystem实例后可监听，需要设备证书时触发该事件。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">(eventInfo: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-i#eventinfo">EventInfo</a>) =&gt; void</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回事件信息。只要有该事件返回就证明需请求设备证书。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">The parameter check failed. Possibly because: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td> </tr> <tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li>mediaKeySystem.<span class="hljs-title function_">on</span>(<span class="hljs-string">'keySystemRequired'</span>, <span class="hljs-function">(<span class="hljs-params">eventInfo: drm.EventInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'keySystemRequired '</span> + <span class="hljs-string">'extra: '</span> + eventInfo.<span class="hljs-property">extraInfo</span> + <span class="hljs-string">'data: '</span> + eventInfo.<span class="hljs-property">info</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="offkeysystemrequired" device-type="phone,2in1,tablet,wearable">off('keySystemRequired')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offkeysystemrequired" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>off(type: 'keySystemRequired', callback?: (eventInfo: EventInfo) =&gt; void): void</p> <p>注销设备证书请求事件的监听。使用callback异步回调。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件类型，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-f#drmcreatemediakeysystem">createMediaKeySystem</a>成功创建MediaKeySystem实例后可监听。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">(eventInfo: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-i#eventinfo">EventInfo</a>) =&gt; void</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">回调函数，返回事件信息。可选。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">The parameter check failed. Possibly because: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td> </tr> <tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li>mediaKeySystem.<span class="hljs-title function_">off</span>(<span class="hljs-string">'keySystemRequired'</span>);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="createmediakeysession" device-type="phone,2in1,tablet,wearable">createMediaKeySession<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createmediakeysession" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>createMediaKeySession(level: ContentProtectionLevel): MediaKeySession</p> <p>创建指定内容保护级别的MediaKeySession实例。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">level</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-e#contentprotectionlevel">ContentProtectionLevel</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">内容保护级别。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-mediakeysession">MediaKeySession</a></td> <td class="cellrowborder" width="50%">MediaKeySession实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">The parameter check failed. Possibly because: 1.Mandatory parameters are left unspecified. 2.The param level exceeds reasonable range, please use value in ContentProtectionLevel.</td> </tr> <tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700104</td> <td class="cellrowborder" width="50%">Meet max MediaKeySession num limit</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySession</span>: drm.<span class="hljs-property">MediaKeySession</span> = mediaKeySystem.<span class="hljs-title function_">createMediaKeySession</span>(drm.<span class="hljs-property">ContentProtectionLevel</span>.<span class="hljs-property">CONTENT_PROTECTION_LEVEL_SW_CRYPTO</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createMediaKeySession ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="createmediakeysession-1" device-type="phone,2in1,tablet,wearable">createMediaKeySession<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createmediakeysession-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>createMediaKeySession(): MediaKeySession</p> <p>创建DRM解决方案默认内容保护级别的MediaKeySession实例。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-mediakeysession">MediaKeySession</a></td> <td class="cellrowborder" width="50%">MediaKeySession实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700104</td> <td class="cellrowborder" width="50%">Meet max MediaKeySession num limit</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySession</span>: drm.<span class="hljs-property">MediaKeySession</span> = mediaKeySystem.<span class="hljs-title function_">createMediaKeySession</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createMediaKeySession ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="getofflinemediakeyids" device-type="phone,2in1,tablet,wearable">getOfflineMediaKeyIds<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getofflinemediakeyids" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getOfflineMediaKeyIds(): Uint8Array[]</p> <p>获取离线媒体密钥标识列表。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Uint8Array[]</td> <td class="cellrowborder" width="50%">离线媒体密钥标识列表。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">offlineMediaKeyIds</span>: <span class="hljs-title class_">Uint8Array</span>[] = mediaKeySystem.<span class="hljs-title function_">getOfflineMediaKeyIds</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getOfflineMediaKeyIds ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="getofflinemediakeystatus" device-type="phone,2in1,tablet,wearable">getOfflineMediaKeyStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getofflinemediakeystatus" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getOfflineMediaKeyStatus(mediaKeyId: Uint8Array): OfflineMediaKeyStatus</p> <p>获取指定离线媒体密钥标识的媒体密钥的状态值。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">mediaKeyId</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">离线媒体密钥标识。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-drm-e#offlinemediakeystatus">OfflineMediaKeyStatus</a></td> <td class="cellrowborder" width="50%">离线媒体密钥状态值。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">The parameter check failed. Possibly because: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-comment">// mediaKeyId是processMediaKeyResponse或getOfflineMediaKeyIds接口返回的媒体密钥标识，请按实际值传入。</span></li><li><span class="hljs-keyword">let</span> mediaKeyId = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>]);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">configValue</span>: drm.<span class="hljs-property">OfflineMediaKeyStatus</span> = mediaKeySystem.<span class="hljs-title function_">getOfflineMediaKeyStatus</span>(mediaKeyId);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getOfflineMediaKeyStatus ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="clearofflinemediakeys" device-type="phone,2in1,tablet,wearable">clearOfflineMediaKeys<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearofflinemediakeys" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>clearOfflineMediaKeys(mediaKeyId: Uint8Array): void</p> <p>删除指定媒体密钥标识的离线媒体密钥。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">mediaKeyId</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">离线媒体密钥标识。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">The parameter check failed.Possibly because: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td> </tr> <tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-comment">// mediaKeyId是processMediaKeyResponse或getOfflineMediaKeyIds接口返回的媒体密钥标识，请按实际值传入。</span></li><li><span class="hljs-keyword">let</span> mediaKeyId = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>]);</li><li><span class="hljs-keyword">try</span> {</li><li>  mediaKeySystem.<span class="hljs-title function_">clearOfflineMediaKeys</span>(mediaKeyId);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`clearOfflineMediaKeys ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="destroy" device-type="phone,2in1,tablet,wearable">destroy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="destroy" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>destroy(): void</p> <p>销毁MediaKeySystem实例。</p> <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Drm.Core</p> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drm">DRM错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">24700101</td> <td class="cellrowborder" width="50%">All unknown errors</td> </tr> <tr><td class="cellrowborder" width="50%">24700201</td> <td class="cellrowborder" width="50%">Fatal service error, for example, service died</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ydi-c106="" class="highlight-div"><div _ngcontent-ydi-c106="" class="highlight-div-header"><div _ngcontent-ydi-c106="" class="highlight-div-header-left"><div _ngcontent-ydi-c106="" class="handle-button expand-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ydi-c106="" class="highlight-div-header-right"><div _ngcontent-ydi-c106="" class="handle-button ai-button"></div><div _ngcontent-ydi-c106="" class="handle-button line-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ydi-c106="" class="handle-button theme-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ydi-c106="" class="handle-button copy-button"><div _ngcontent-ydi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ydi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { drm } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DrmKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaKeySystem</span>: drm.<span class="hljs-property">MediaKeySystem</span> = drm.<span class="hljs-title function_">createMediaKeySystem</span>(<span class="hljs-string">"com.wiseplay.drm"</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  mediaKeySystem.<span class="hljs-title function_">destroy</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mediaKeySystem destroy ERROR: <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>