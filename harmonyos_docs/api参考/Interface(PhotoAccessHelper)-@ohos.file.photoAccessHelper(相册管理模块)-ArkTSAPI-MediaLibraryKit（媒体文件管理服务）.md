<h1 _ngcontent-toj-c119="" class="doc-title ng-star-inserted" title="Interface (PhotoAccessHelper)"> Interface (PhotoAccessHelper) </h1>

<div _ngcontent-toj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 10开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getassets" device-type="phone,2in1,tablet,tv">getAssets<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getassets" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getAssets(options: FetchOptions, callback: AsyncCallback&lt;FetchResult&lt;PhotoAsset&gt;&gt;): void</p>     <p>获取图片和视频资源，使用callback方式返回结果。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>需要权限</strong>：ohos.permission.READ_IMAGEVIDEO</p>     <p>通过picker的方式调用该接口来查询指定uri对应的图片或视频资源，不需要申请'ohos.permission.READ_IMAGEVIDEO'权限，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-photoviewpicker#指定uri获取图片或视频资源" target="_blank">开发指南</a>。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#fetchoptions">FetchOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片和视频检索选项。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult">FetchResult</a>&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoasset">PhotoAsset</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">callback返回图片和视频检索结果集。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>在API version 13及之前的版本，无相关权限返回错误码13900012；从API version 14开始，无相关权限返回错误码201。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.3.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAssets'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>
</li><li>  phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions, <span class="hljs-keyword">async</span> (err, fetchResult) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (fetchResult !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'fetchResult success'</span>);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>      <span class="hljs-keyword">if</span> (photoAsset !== <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'photoAsset.displayName : '</span> + photoAsset.<span class="hljs-property">displayName</span>);</li><li>      }</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`fetchResult fail with error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getassets-1" device-type="phone,2in1,tablet,tv">getAssets<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getassets-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getAssets(options: FetchOptions): Promise&lt;FetchResult&lt;PhotoAsset&gt;&gt;</p>     <p>获取图片和视频资源，使用Promise方式返回结果。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>需要权限</strong>：ohos.permission.READ_IMAGEVIDEO</p>     <p>通过picker的方式调用该接口来查询指定uri对应的图片或视频资源，不需要申请'ohos.permission.READ_IMAGEVIDEO'权限，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-photoviewpicker#指定uri获取图片或视频资源" target="_blank">开发指南</a>。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#fetchoptions">FetchOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片和视频检索选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult">FetchResult</a>&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoasset">PhotoAsset</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回图片和视频数据结果集。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>在API version 13及之前的版本，无相关权限返回错误码13900012；从API version 14开始，无相关权限返回错误码201。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.15.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.15.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAssets'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions);</li><li>    <span class="hljs-keyword">if</span> (fetchResult !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'fetchResult success'</span>);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>      <span class="hljs-keyword">if</span> (photoAsset !== <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'photoAsset.displayName :'</span> + photoAsset.<span class="hljs-property">displayName</span>);</li><li>      }</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAssets failed, error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getburstassets12" device-type="phone,2in1,tablet,tv">getBurstAssets<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getburstassets12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getBurstAssets(burstKey: string, options: FetchOptions): Promise&lt;FetchResult&lt;PhotoAsset&gt;&gt;</p>     <p>获取连拍照片资源，使用Promise方式返回结果。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>需要权限</strong>：ohos.permission.READ_IMAGEVIDEO</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">burstKey</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">一组连拍照片的唯一标识：uuid(可传入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#photokeys">PhotoKeys</a>的BURST_KEY)。字符串长度为36。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#fetchoptions">FetchOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">连拍照片检索选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult">FetchResult</a>&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoasset">PhotoAsset</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回连拍照片数据结果集。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">Internal system error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getBurstAssets'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>  <span class="hljs-comment">// burstKey为36位的uuid，可以根据photoAccessHelper.PhotoKeys获取。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">burstKey</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"e719d696-09fa-44f8-8e9e-ec3f215aa62a"</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; = <span class="hljs-keyword">await</span></li><li>      phAccessHelper.<span class="hljs-title function_">getBurstAssets</span>(burstKey, fetchOptions);</li><li>    <span class="hljs-keyword">if</span> (fetchResult !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'fetchResult success'</span>);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>      <span class="hljs-keyword">if</span> (photoAsset !== <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'photoAsset.displayName :'</span> + photoAsset.<span class="hljs-property">displayName</span>);</li><li>      }</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getBurstAssets failed, error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createasset" device-type="phone,2in1,tablet,tv">createAsset<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createasset" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>createAsset(photoType: PhotoType, extension: string, options: CreateOptions, callback: AsyncCallback&lt;string&gt;): void</p>     <p>指定文件类型、后缀和创建选项，创建图片或视频资源。使用callback方式返回结果。</p>     <p>在未申请相册管理模块权限'ohos.permission.WRITE_IMAGEVIDEO'时，可以使用安全控件或授权弹窗的方式创建媒体资源，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-savebutton" target="_blank">开发指南</a>。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>需要权限</strong>：ohos.permission.WRITE_IMAGEVIDEO</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">photoType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#phototype">PhotoType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的文件类型，IMAGE或者VIDEO类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">extension</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件名后缀参数，例如：'jpg'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#createoptions">CreateOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>创建选项，当前仅支持'title'，例如{title: 'testPhoto'}。</p>          <p><strong>注意：</strong></p>          <p>传入'subtype'选项，配置不生效，仅支持保存DEFAULT类型图片。</p>          <p>文件名中不允许出现非法英文字符，包括： . .. \ / : * ? " ' ` &lt; &gt; | { } [ ]</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">callback返回创建的图片和视频的uri。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>在API version 13及之前的版本，无相关权限返回错误码13900012；从API version 14开始，无相关权限返回错误码201。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createAssetDemo'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">photoType</span>: photoAccessHelper.<span class="hljs-property">PhotoType</span> = photoAccessHelper.<span class="hljs-property">PhotoType</span>.<span class="hljs-property">IMAGE</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">extension</span>:<span class="hljs-built_in">string</span> = <span class="hljs-string">'jpg'</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: photoAccessHelper.<span class="hljs-property">CreateOptions</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'testPhoto'</span></li><li>  }</li><li>  phAccessHelper.<span class="hljs-title function_">createAsset</span>(photoType, extension, options, <span class="hljs-function">(<span class="hljs-params">err, uri</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (uri !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createAsset uri'</span> + uri);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createAsset successfully'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createAsset failed, error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createasset-1" device-type="phone,2in1,tablet,tv">createAsset<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createasset-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>createAsset(photoType: PhotoType, extension: string, callback: AsyncCallback&lt;string&gt;): void</p>     <p>指定文件类型和后缀，创建图片或视频资源，使用callback方式返回结果。</p>     <p>在未申请相册管理模块权限'ohos.permission.WRITE_IMAGEVIDEO'时，可以使用安全控件或授权弹窗的方式创建媒体资源，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-savebutton" target="_blank">开发指南</a>。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>需要权限</strong>：ohos.permission.WRITE_IMAGEVIDEO</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">photoType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#phototype">PhotoType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的文件类型，IMAGE或者VIDEO类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">extension</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件名后缀参数，例如：'jpg'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">callback返回创建的图片和视频的uri。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>在API version 13及之前的版本，无相关权限返回错误码13900012；从API version 14开始，无相关权限返回错误码201。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createAssetDemo'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">photoType</span>: photoAccessHelper.<span class="hljs-property">PhotoType</span> = photoAccessHelper.<span class="hljs-property">PhotoType</span>.<span class="hljs-property">IMAGE</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">extension</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'jpg'</span>;</li><li>  phAccessHelper.<span class="hljs-title function_">createAsset</span>(photoType, extension, <span class="hljs-function">(<span class="hljs-params">err, uri</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (uri !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createAsset uri'</span> + uri);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createAsset successfully'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createAsset failed, error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createasset-2" device-type="phone,2in1,tablet,tv">createAsset<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createasset-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>createAsset(photoType: PhotoType, extension: string, options?: CreateOptions): Promise&lt;string&gt;</p>     <p>指定文件类型、后缀和创建选项，创建图片或视频资源，以Promise方式返回结果。</p>     <p>在未申请相册管理模块权限'ohos.permission.WRITE_IMAGEVIDEO'时，可以使用安全控件或授权弹窗的方式创建媒体资源，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-savebutton" target="_blank">开发指南</a>。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>需要权限</strong>：ohos.permission.WRITE_IMAGEVIDEO</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">photoType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#phototype">PhotoType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的文件类型，IMAGE或者VIDEO类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">extension</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件名后缀参数，例如：'jpg'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#createoptions">CreateOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>创建选项，当前仅支持'title'，例如{title: 'testPhoto'}。</p>          <p><strong>注意：</strong></p>          <p>传入'subtype'选项，配置不生效，仅支持保存DEFAULT类型图片。</p>          <p>文件名中不允许出现非法英文字符，包括： . .. \ / : * ? " ' ` &lt; &gt; | { } [ ]</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回创建的图片和视频的uri。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>在API version 13及之前的版本，无相关权限返回错误码13900012；从API version 14开始，无相关权限返回错误码201。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.15.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.15.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createAssetDemo'</span>);</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">photoType</span>: photoAccessHelper.<span class="hljs-property">PhotoType</span> = photoAccessHelper.<span class="hljs-property">PhotoType</span>.<span class="hljs-property">IMAGE</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">extension</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'jpg'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: photoAccessHelper.<span class="hljs-property">CreateOptions</span> = {</li><li>      <span class="hljs-attr">title</span>: <span class="hljs-string">'testPhoto'</span></li><li>    }</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">createAsset</span>(photoType, extension, options);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createAsset uri'</span> + uri);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createAsset successfully'</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createAsset failed, error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getalbums" device-type="phone,2in1,tablet,tv">getAlbums<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getalbums" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getAlbums(type: AlbumType, subtype: AlbumSubtype, options: FetchOptions, callback: AsyncCallback&lt;FetchResult&lt;Album&gt;&gt;): void</p>     <p>根据检索选项和相册类型获取相册，使用callback方式返回结果。</p>     <p>获取相册前，确保相册已存在。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>需要权限</strong>：ohos.permission.READ_IMAGEVIDEO</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#albumtype">AlbumType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">相册类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">subtype</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#albumsubtype">AlbumSubtype</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">相册子类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#fetchoptions">FetchOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">检索选项。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult">FetchResult</a>&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-album">Album</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">callback返回获取相册的结果集。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>在API version 13及之前的版本，无相关权限返回错误码13900012；从API version 14开始，无相关权限返回错误码201。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-comment">// 示例代码中为获取相册名为newAlbumName的相册。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAlbumsDemo'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  predicates.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'album_name'</span>, <span class="hljs-string">'newAlbumName'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>  phAccessHelper.<span class="hljs-title function_">getAlbums</span>(photoAccessHelper.<span class="hljs-property">AlbumType</span>.<span class="hljs-property">USER</span>, photoAccessHelper.<span class="hljs-property">AlbumSubtype</span>.<span class="hljs-property">USER_GENERIC</span>, fetchOptions, <span class="hljs-keyword">async</span> (err, fetchResult) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAlbumsCallback failed with err: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (fetchResult === <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAlbumsCallback fetchResult is undefined'</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> album = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAlbumsCallback successfully, albumName: '</span> + album.<span class="hljs-property">albumName</span>);</li><li>    fetchResult.<span class="hljs-title function_">close</span>();</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getalbums-1" device-type="phone,2in1,tablet,tv">getAlbums<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getalbums-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getAlbums(type: AlbumType, subtype: AlbumSubtype, callback: AsyncCallback&lt;FetchResult&lt;Album&gt;&gt;): void</p>     <p>根据相册类型获取相册，使用callback方式返回结果。</p>     <p>获取相册前需先保证相册存在。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>需要权限</strong>：ohos.permission.READ_IMAGEVIDEO</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#albumtype">AlbumType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">相册类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">subtype</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#albumsubtype">AlbumSubtype</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">相册子类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult">FetchResult</a>&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-album">Album</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">callback返回获取相册的结果集。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>在API version 13及之前的版本，无相关权限返回错误码13900012；从API version 14开始，无相关权限返回错误码201。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-comment">// 示例代码中为获取系统相册VIDEO，默认已预置。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAlbumsDemo'</span>);</li><li>  phAccessHelper.<span class="hljs-title function_">getAlbums</span>(photoAccessHelper.<span class="hljs-property">AlbumType</span>.<span class="hljs-property">SYSTEM</span>, photoAccessHelper.<span class="hljs-property">AlbumSubtype</span>.<span class="hljs-property">VIDEO</span>, <span class="hljs-keyword">async</span> (err, fetchResult) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAlbumsCallback failed with err: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (fetchResult === <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAlbumsCallback fetchResult is undefined'</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">album</span>: photoAccessHelper.<span class="hljs-property">Album</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAlbumsCallback successfully, albumUri: '</span> + album.<span class="hljs-property">albumUri</span>);</li><li>    fetchResult.<span class="hljs-title function_">close</span>();</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getalbums-2" device-type="phone,2in1,tablet,tv">getAlbums<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getalbums-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getAlbums(type: AlbumType, subtype: AlbumSubtype, options?: FetchOptions): Promise&lt;FetchResult&lt;Album&gt;&gt;</p>     <p>根据检索选项和相册类型获取相册，使用Promise方式返回结果。</p>     <p>在获取相册之前，确保相册已存在。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>需要权限</strong>：ohos.permission.READ_IMAGEVIDEO</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#albumtype">AlbumType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">相册类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">subtype</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#albumsubtype">AlbumSubtype</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">相册子类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#fetchoptions">FetchOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">检索选项，不填时默认根据相册类型检索。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-fetchresult">FetchResult</a>&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-album">Album</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回获取相册的结果集。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>错误码13900012，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation" target="_blank">开发准备</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-comment">// 示例代码中为获取相册名为newAlbumName的相册。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAlbumsDemo'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  predicates.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'album_name'</span>, <span class="hljs-string">'newAlbumName'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>  phAccessHelper.<span class="hljs-title function_">getAlbums</span>(photoAccessHelper.<span class="hljs-property">AlbumType</span>.<span class="hljs-property">USER</span>, photoAccessHelper.<span class="hljs-property">AlbumSubtype</span>.<span class="hljs-property">USER_GENERIC</span>, fetchOptions).<span class="hljs-title function_">then</span>( <span class="hljs-keyword">async</span> (fetchResult) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (fetchResult === <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAlbumsPromise fetchResult is undefined'</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">album</span>: photoAccessHelper.<span class="hljs-property">Album</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAlbumsPromise successfully, albumName: '</span> + album.<span class="hljs-property">albumName</span>);</li><li>    fetchResult.<span class="hljs-title function_">close</span>();</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAlbumsPromise failed with err: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="registerchange" device-type="phone,2in1,tablet,tv">registerChange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="registerchange" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>registerChange(uri: string, forChildUris: boolean, callback: Callback&lt;ChangeData&gt;) : void</p>     <p>注册指定uri的监听，并通过callback方式返回异步结果。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">PhotoAsset的uri, Album的uri或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#defaultchangeuri">DefaultChangeUri</a>的值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">forChildUris</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">是否模糊监听。uri为相册uri时：forChildUris为true，能监听到相册中文件的变化。如果是false，只能监听相册本身变化；uri为photoAsset时：forChildUris为true、false没有区别；uri为DefaultChangeUri时：forChildUris必须为true，如果为false将找不到该uri，收不到任何消息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#changedata">ChangeData</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">返回要监听的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#changedata">ChangeData</a>。注：uri可以注册多个不同的callback监听，<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#unregisterchange">unRegisterChange</a>可以关闭该uri所有监听，也可以关闭指定callback的监听。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>错误码13900012，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation" target="_blank">开发准备</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper, context: Context</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'registerChangeDemo'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>  <span class="hljs-keyword">if</span> (photoAsset !== <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'photoAsset.displayName : '</span> + photoAsset.<span class="hljs-property">displayName</span>);</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback1</span> = (<span class="hljs-params">changeData: photoAccessHelper.ChangeData</span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback1 success, changData: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(changeData));</li><li>    <span class="hljs-comment">//file had changed, do something.</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback2</span> = (<span class="hljs-params">changeData: photoAccessHelper.ChangeData</span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback2 success, changData: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(changeData));</li><li>    <span class="hljs-comment">//file had changed, do something.</span></li><li>  }</li><li>  <span class="hljs-comment">// 注册onCallback1监听。</span></li><li>  phAccessHelper.<span class="hljs-title function_">registerChange</span>(photoAsset.<span class="hljs-property">uri</span>, <span class="hljs-literal">false</span>, onCallback1);</li><li>  <span class="hljs-comment">// 注册onCallback2监听。</span></li><li>  phAccessHelper.<span class="hljs-title function_">registerChange</span>(photoAsset.<span class="hljs-property">uri</span>, <span class="hljs-literal">false</span>, onCallback2);</li><li>
</li><li>  <span class="hljs-keyword">await</span> photoAccessHelper.<span class="hljs-property">MediaAssetChangeRequest</span>.<span class="hljs-title function_">deleteAssets</span>(context, [photoAsset]);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="unregisterchange" device-type="phone,2in1,tablet,tv">unRegisterChange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unregisterchange" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>unRegisterChange(uri: string, callback?: Callback&lt;ChangeData&gt;): void</p>     <p>取消指定uri的监听，一个uri可以注册多个监听，存在多个callback监听时，可以取消指定注册的callback的监听；不指定callback时取消该uri的所有监听。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">PhotoAsset的uri, Album的uri或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#defaultchangeuri">DefaultChangeUri</a>的值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#changedata">ChangeData</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">取消<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#registerchange">registerChange</a>注册时的callback的监听，不填时，取消该uri的所有监听。注：off指定注册的callback后不会进入此回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>错误码13900012，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation" target="_blank">开发准备</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper, context: Context</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'offDemo'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">photoAsset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>  <span class="hljs-keyword">if</span> (photoAsset !== <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'photoAsset.displayName : '</span> + photoAsset.<span class="hljs-property">displayName</span>);</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback1</span> = (<span class="hljs-params">changeData: photoAccessHelper.ChangeData</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback1 on'</span>);</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback2</span> = (<span class="hljs-params">changeData: photoAccessHelper.ChangeData</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback2 on'</span>);</li><li>  }</li><li>  <span class="hljs-comment">// 注册onCallback1监听。</span></li><li>  phAccessHelper.<span class="hljs-title function_">registerChange</span>(photoAsset.<span class="hljs-property">uri</span>, <span class="hljs-literal">false</span>, onCallback1);</li><li>  <span class="hljs-comment">// 注册onCallback2监听。</span></li><li>  phAccessHelper.<span class="hljs-title function_">registerChange</span>(photoAsset.<span class="hljs-property">uri</span>, <span class="hljs-literal">false</span>, onCallback2);</li><li>  <span class="hljs-comment">// 关闭onCallback1监听，onCallback2 继续监听。</span></li><li>  phAccessHelper.<span class="hljs-title function_">unRegisterChange</span>(photoAsset.<span class="hljs-property">uri</span>, onCallback1);</li><li>  <span class="hljs-keyword">await</span> photoAccessHelper.<span class="hljs-property">MediaAssetChangeRequest</span>.<span class="hljs-title function_">deleteAssets</span>(context, [photoAsset]);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applychanges11" device-type="phone,2in1,tablet,tv">applyChanges<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applychanges11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>applyChanges(mediaChangeRequest: MediaChangeRequest): Promise&lt;void&gt;</p>     <p>提交媒体变更请求，使用Promise方式返回结果。</p>     <p><strong>需要权限</strong>：ohos.permission.WRITE_IMAGEVIDEO</p>     <p>在未申请相册管理模块权限'ohos.permission.WRITE_IMAGEVIDEO'时，可以使用安全控件或授权弹窗的方式创建媒体资源，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-savebutton" target="_blank">开发指南</a>。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">mediaChangeRequest</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#mediachangerequest11">MediaChangeRequest</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">媒体变更请求，支持资产变更请求和相册变更请求。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回void。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>该接口依赖于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#mediachangerequest11">MediaChangeRequest</a>对象，详细代码示例请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/kts-apis-photoaccesshelper-mediaassetchangerequest">MediaAssetChangeRequest</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/kts-apis-photoaccesshelper-mediaalbumchangerequest">MediaAlbumChangeRequest</a>中的接口示例。</p>    </div>    <div class="tiledSection">     <h2 id="release" device-type="phone,2in1,tablet,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>release(callback: AsyncCallback&lt;void&gt;): void</p>     <p>释放PhotoAccessHelper实例，使用callback方式返回结果。</p>     <p>当后续不需要使用PhotoAccessHelper实例中的方法时调用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调表示成功还是失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'releaseDemo'</span>);</li><li>  phAccessHelper.<span class="hljs-title function_">release</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`release failed. error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'release ok.'</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="release-1" device-type="phone,2in1,tablet,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>release(): Promise&lt;void&gt;</p>     <p>释放PhotoAccessHelper实例，使用Promise方式返回结果。</p>     <p>当后续不需要使用PhotoAccessHelper 实例中的方法时调用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回void。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'releaseDemo'</span>);</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">release</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'release ok.'</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`release failed. error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="showassetscreationdialog12" device-type="phone,2in1,tablet,tv">showAssetsCreationDialog<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="showassetscreationdialog12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>showAssetsCreationDialog(srcFileUris: Array&lt;string&gt;, photoCreationConfigs: Array&lt;PhotoCreationConfig&gt;): Promise&lt;Array&lt;string&gt;&gt;</p>     <p>调用接口显示保存确认弹窗。如果用户同意保存，将返回一个已创建并授予保存权限的URI列表（此列表永久生效），应用可使用这些URI写入图片或视频。如果用户拒绝保存，将返回一个空列表。</p>     <p>弹框需显示应用名称，但无法直接获取。因此，调用此接口时，请确保module.json5文件中的abilities标签已配置label和icon项。需要注意的是，图标不受abilities标签中的icon项影响，不支持修改。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当传入uri为沙箱路径时，可正常保存图片/视频，但无界面预览。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">srcFileUris</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>需保存到媒体库中的图片/视频文件对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/user-file-uri-intro#媒体文件uri" target="_blank">媒体库uri</a>。</p>          <p><strong>注意：</strong></p>          <p>- 一次弹窗最多保存100张图片。</p>          <p>- 仅支持处理图片、视频uri。</p>          <p>- 不支持手动拼接的uri，需调用接口获取，获取方式参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/user-file-uri-intro#媒体文件uri获取方式" target="_blank">媒体文件uri获取方式</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">photoCreationConfigs</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#photocreationconfig12">PhotoCreationConfig</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>保存图片或视频到媒体库的配置，包括文件名等，与srcFileUris保持一一对应。</p>          <p><strong>注意：</strong></p>          <p>传入'subtype'选项，配置项不生效，仅支持保存DEFAULT类型图片。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;string&gt;&gt;</td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回给应用的媒体库文件uri列表。uri已对应用授权，支持应用写入数据。如果生成uri异常，则返回批量创建错误码。</p>          <p>返回-3006表示不允许出现非法字符；返回-2004表示图片类型和后缀不符；返回-203表示文件操作异常。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">Internal system error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ShowAssetsCreationDialogDemo.'</span>);</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 获取需要保存到媒体库的位于应用沙箱的图片/视频uri。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">srcFileUris</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [</li><li>      <span class="hljs-string">'file://fileUriDemo1'</span> <span class="hljs-comment">// 实际场景请使用真实的uri。</span></li><li>    ];</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">photoCreationConfigs</span>: <span class="hljs-title class_">Array</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoCreationConfig</span>&gt; = [</li><li>      {</li><li>        <span class="hljs-attr">title</span>: <span class="hljs-string">'test2'</span>, <span class="hljs-comment">// 可选。</span></li><li>        <span class="hljs-attr">fileNameExtension</span>: <span class="hljs-string">'jpg'</span>,</li><li>        <span class="hljs-attr">photoType</span>: photoAccessHelper.<span class="hljs-property">PhotoType</span>.<span class="hljs-property">IMAGE</span>,</li><li>        <span class="hljs-attr">subtype</span>: photoAccessHelper.<span class="hljs-property">PhotoSubtype</span>.<span class="hljs-property">DEFAULT</span>, <span class="hljs-comment">// 可选。</span></li><li>      }</li><li>    ];</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">desFileUris</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">showAssetsCreationDialog</span>(srcFileUris, photoCreationConfigs);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'showAssetsCreationDialog success, data is '</span> + desFileUris);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'showAssetsCreationDialog failed, errCode is '</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">', errMsg is '</span> + err.<span class="hljs-property">message</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createassetwithshorttermpermission12" device-type="phone,2in1,tablet,tv">createAssetWithShortTermPermission<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createassetwithshorttermpermission12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>createAssetWithShortTermPermission(photoCreationConfig: PhotoCreationConfig): Promise&lt;string&gt;</p>     <p>接口提供给应用调用，支持首次调用后拉起保存确认弹框。在用户同意保存后返回已创建并授予保存权限的uri，支持应用使用uri写入图片/视频；</p>     <p>在用户"同意"后的5min之内，同一个应用再次调用接口，支持无需弹框确认自动返回已授权的uri给应用，支持应用保存图片/视频。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>需要权限：</strong> ohos.permission.SHORT_TERM_WRITE_IMAGEVIDEO</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">photoCreationConfig</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#photocreationconfig12">PhotoCreationConfig</a>;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>保存图片/视频到媒体库的配置，包括保存的文件名等。</p>          <p><strong>注意：</strong></p>          <p>传入'subtype'选项，配置项不生效，仅支持保存DEFAULT类型图片。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回给应用的媒体库文件uri。uri已对应用授权，支持应用写入数据。如果生成uri异常，则返回批量创建错误码。</p>          <p>返回-3006表示不允许出现非法字符；返回-2004表示图片类型和后缀不符；返回-203表示文件操作异常。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">Internal system error</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createAssetWithShortTermPermissionDemo.'</span>);</li><li>    </li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">photoCreationConfig</span>: photoAccessHelper.<span class="hljs-property">PhotoCreationConfig</span> = {</li><li>            <span class="hljs-attr">title</span>: <span class="hljs-string">'123456'</span>,</li><li>            <span class="hljs-attr">fileNameExtension</span>: <span class="hljs-string">'jpg'</span>,</li><li>            <span class="hljs-attr">photoType</span>: photoAccessHelper.<span class="hljs-property">PhotoType</span>.<span class="hljs-property">IMAGE</span>,</li><li>            <span class="hljs-attr">subtype</span>: photoAccessHelper.<span class="hljs-property">PhotoSubtype</span>.<span class="hljs-property">DEFAULT</span>,</li><li>        };</li><li>
</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">resultUri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">createAssetWithShortTermPermission</span>(photoCreationConfig);</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">resultFile</span>: fileIo.<span class="hljs-property">File</span> = fileIo.<span class="hljs-title function_">openSync</span>(resultUri, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span>);</li><li>        <span class="hljs-comment">// 实际场景请使用真实的uri和文件大小。</span></li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">srcFile</span>:  fileIo.<span class="hljs-property">File</span> = fileIo.<span class="hljs-title function_">openSync</span>(<span class="hljs-string">"file://test.jpg"</span>, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">bufSize</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2000000</span>;</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">readSize</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>        <span class="hljs-keyword">let</span> buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(bufSize);</li><li>        <span class="hljs-keyword">let</span> readLen = fileIo.<span class="hljs-title function_">readSync</span>(srcFile.<span class="hljs-property">fd</span>, buf, {</li><li>            <span class="hljs-attr">offset</span>: readSize,</li><li>            <span class="hljs-attr">length</span>: bufSize</li><li>        });</li><li>        <span class="hljs-keyword">if</span> (readLen &gt; <span class="hljs-number">0</span>) {</li><li>            readSize += readLen;</li><li>            fileIo.<span class="hljs-title function_">writeSync</span>(resultFile.<span class="hljs-property">fd</span>, buf, { <span class="hljs-attr">length</span>: readLen });</li><li>        }</li><li>        fileIo.<span class="hljs-title function_">closeSync</span>(srcFile);</li><li>        fileIo.<span class="hljs-title function_">closeSync</span>(resultFile);</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'createAssetWithShortTermPermission failed, errCode is '</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">', errMsg is '</span> + err.<span class="hljs-property">message</span>);</li><li>    }</li><li>    </li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="requestphotourisreadpermission14" device-type="phone,2in1,tablet,tv">requestPhotoUrisReadPermission<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestphotourisreadpermission14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>requestPhotoUrisReadPermission(srcFileUris: Array&lt;string&gt;): Promise&lt;Array&lt;string&gt;&gt;</p>     <p>从HarmonyOS 3.1/4.0进入HarmonyOS 5.0时，调用接口给未授权的uri进行授权，返回已创建并授予保存权限的uri列表。</p>     <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">srcFileUris</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>需进行授权的图片/视频文件对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/user-file-uri-intro#媒体文件uri" target="_blank">媒体库uri</a>。</p>          <p><strong>注意：</strong></p>          <p>仅支持处理图片、视频uri，且最大数量限制为100个。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;string&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回已授权的uri列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">Internal system error</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper, context: Context</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'requestPhotoUrisReadPermissionDemo.'</span>);</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 获取需要进行授权的图片/视频uri。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">srcFileUris</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [</li><li>      <span class="hljs-string">'file://fileUriDemo1'</span> <span class="hljs-comment">// 实际场景请使用真实的uri。</span></li><li>    ];</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">desFileUris</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">requestPhotoUrisReadPermission</span>(srcFileUris);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'requestPhotoUrisReadPermission success, data is '</span> + desFileUris);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'requestPhotoUrisReadPermission failed, errCode is '</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">', errMsg is '</span> + err.<span class="hljs-property">message</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getsupportedphotoformats18" device-type="phone,2in1,tablet,tv">getSupportedPhotoFormats<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsupportedphotoformats18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getSupportedPhotoFormats(photoType: PhotoType): Promise&lt;Array&lt;string&gt;&gt;</p>     <p>接口提供给应用调用，获取媒体库支持的图片或者视频后缀列表。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">photoType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-e#phototype">PhotoType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">媒体文件类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;string&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回支持的图片或者视频后缀列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">Internal system error. It is recommended to retry and check the logs.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper, photoTypeNumber: <span class="hljs-built_in">number</span></span>){</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getSupportedPhotoFormatsDemo.'</span>);</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">outputText</span>: <span class="hljs-built_in">string</span>;</li><li>    <span class="hljs-keyword">if</span> (photoTypeNumber !== photoAccessHelper.<span class="hljs-property">PhotoType</span>.<span class="hljs-property">IMAGE</span> &amp;&amp; photoTypeNumber !== photoAccessHelper.<span class="hljs-property">PhotoType</span>.<span class="hljs-property">VIDEO</span>) {</li><li>      outputText = <span class="hljs-string">'Does not support querying formats other than images or videos'</span>;</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    outputText = <span class="hljs-string">'The supported types are:\n'</span>;</li><li>    <span class="hljs-keyword">let</span> imageFormat  = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getSupportedPhotoFormats</span>(photoAccessHelper.<span class="hljs-property">PhotoType</span>.<span class="hljs-property">IMAGE</span>);</li><li>    <span class="hljs-keyword">let</span> result = <span class="hljs-string">""</span>;</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; imageFormat.<span class="hljs-property">length</span>; i++) {</li><li>      result += imageFormat[i];</li><li>      <span class="hljs-keyword">if</span> (i !== imageFormat.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>        result += <span class="hljs-string">', '</span>;</li><li>      }</li><li>    }</li><li>    outputText += result;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getSupportedPhotoFormats success, data is '</span> + outputText);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getSupportedPhotoFormats failed, errCode is'</span>, error);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onphotochange20" device-type="phone,2in1,tablet,tv">on('photoChange')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onphotochange20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>on(type: 'photoChange', callback: Callback&lt;PhotoAssetChangeInfos&gt;): void</p>     <p>注册'photoChange'监听媒体资产，并通过callback方式返回资产变化结果，可以注册多个callback。</p>     <p><strong>需要权限</strong>：ohos.permission.READ_IMAGEVIDEO</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册监听媒体资产，取值为'photoChange'。注册完成后，有资产发生变化时，通过callback返回变更信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#photoassetchangeinfos20">PhotoAssetChangeInfos</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>返回变更的媒体资产信息<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#photoassetchangeinfos20">PhotoAssetChangeInfos</a>。</p>          <p><strong>注意：</strong></p>          <p>该接口可以注册多个不同的callback监听，<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#offphotochange20">off('photoChange')</a>既可以关闭所有监听，也可以关闭指定callback监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-medialibrary">媒体库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">23800151</td>         <td class="cellrowborder" width="50%">          <p>The scenario parameter verification fails.</p>          <p>Possible causes: 1. The type is not fixed at 'photoChange'; 2. The same callback is registered repeatedly.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">23800301</td>         <td class="cellrowborder" width="50%">          <p>Internal system error. You are advised to retry and check the logs.</p>          <p>Possible causes: 1. The database is corrupted. 2. The file system is abnormal. 3. The IPC request timed out.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback1</span> = (<span class="hljs-params">changeData: photoAccessHelper.PhotoAssetChangeInfos</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback1 success, changData: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(changeData));</li><li>  <span class="hljs-comment">// file had changed, do something.</span></li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback2</span> = (<span class="hljs-params">changeData: photoAccessHelper.PhotoAssetChangeInfos</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback2 success, changData: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(changeData));</li><li>  <span class="hljs-comment">// file had changed, do something.</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper, context: Context</span>){</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onPhotoChangeDemo.'</span>);</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 注册onCallback1监听。</span></li><li>    phAccessHelper.<span class="hljs-title function_">on</span>(<span class="hljs-string">'photoChange'</span>, onCallback1);</li><li>    <span class="hljs-comment">// 注册onCallback2监听。</span></li><li>    phAccessHelper.<span class="hljs-title function_">on</span>(<span class="hljs-string">'photoChange'</span>, onCallback2);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'onPhotoChangeDemo failed, errCode is'</span>, error);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offphotochange20" device-type="phone,2in1,tablet,tv">off('photoChange')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offphotochange20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>off(type: 'photoChange', callback?: Callback&lt;PhotoAssetChangeInfos&gt;): void</p>     <p>取消对'photoChange'媒体资产的监听。存在多个callback监听时，可以取消指定注册的callback监听；不指定callback时取消所有监听。</p>     <p><strong>需要权限</strong>：ohos.permission.READ_IMAGEVIDEO</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消监听媒体资产，取值为'photoChange'。取消监听后，有资产发生变化时，不再通过callback返回变更信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#photoassetchangeinfos20">PhotoAssetChangeInfos</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>取消<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#onphotochange20">on('photoChange')</a>注册时指定的callback监听；不填时，则取消对'photoChange'的所有监听。</p>          <p><strong>注意：</strong></p>          <p>取消注册的callback后，有资产发生变化时，不会进入此回调。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-medialibrary">媒体库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">23800151</td>         <td class="cellrowborder" width="50%">          <p>The scenario parameter verification fails.</p>          <p>Possible causes: 1. The type is not fixed at 'photoChange'; 2. The same callback is unregistered repeatedly.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">23800301</td>         <td class="cellrowborder" width="50%">          <p>Internal system error. You are advised to retry and check the logs.</p>          <p>Possible causes: 1. The database is corrupted. 2. The file system is abnormal. 3. The IPC request timed out.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback1</span> = (<span class="hljs-params">changeData: photoAccessHelper.PhotoAssetChangeInfos</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback1 success, changData: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(changeData));</li><li>  <span class="hljs-comment">// file had changed, do something.</span></li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback2</span> = (<span class="hljs-params">changeData: photoAccessHelper.PhotoAssetChangeInfos</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback2 success, changData: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(changeData));</li><li>  <span class="hljs-comment">// file had changed, do something.</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper, context: Context</span>){</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'offPhotoChangeDemo.'</span>);</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 注册onCallback1监听。</span></li><li>    phAccessHelper.<span class="hljs-title function_">on</span>(<span class="hljs-string">'photoChange'</span>, onCallback1);</li><li>    <span class="hljs-comment">// 注册onCallback2监听。</span></li><li>    phAccessHelper.<span class="hljs-title function_">on</span>(<span class="hljs-string">'photoChange'</span>, onCallback2);</li><li>
</li><li>    <span class="hljs-comment">// 关闭onCallback1监听，onCallback2继续监听。</span></li><li>    phAccessHelper.<span class="hljs-title function_">off</span>(<span class="hljs-string">'photoChange'</span>, onCallback1);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'offPhotoChangeDemo failed, errCode is'</span>, error);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onphotoalbumchange20" device-type="phone,2in1,tablet,tv">on('photoAlbumChange')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onphotoalbumchange20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>on(type: 'photoAlbumChange', callback: Callback&lt;AlbumChangeInfos&gt;): void</p>     <p>注册'photoAlbumChange'监听相册，并通过callback方式返回相册变化结果，可以注册多个callback。</p>     <p><strong>需要权限</strong>：ohos.permission.READ_IMAGEVIDEO</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册监听相册，取值为'photoAlbumChange'。注册完成后，有相册发生变化时，通过callback返回变更信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#albumchangeinfos20">AlbumChangeInfos</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>返回变更的相册信息<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#albumchangeinfos20">AlbumChangeInfos</a>。</p>          <p><strong>注意：</strong></p>          <p>该接口可以注册多个不同的callback监听，<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#offphotoalbumchange20">off('photoAlbumChange')</a>既可以关闭所有监听，也可以关闭指定callback监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-medialibrary">媒体库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">23800151</td>         <td class="cellrowborder" width="50%">          <p>The scenario parameter verification fails.</p>          <p>Possible causes: 1. The type is not fixed at 'photoAlbumChange'; 2. The same callback is registered repeatedly.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">23800301</td>         <td class="cellrowborder" width="50%">          <p>Internal system error. You are advised to retry and check the logs.</p>          <p>Possible causes: 1. The database is corrupted. 2. The file system is abnormal. 3. The IPC request timed out.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback1</span> = (<span class="hljs-params">changeData: photoAccessHelper.AlbumChangeInfos</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback1 success, changData: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(changeData));</li><li>  <span class="hljs-comment">// file had changed, do something.</span></li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback2</span> = (<span class="hljs-params">changeData: photoAccessHelper.AlbumChangeInfos</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback2 success, changData: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(changeData));</li><li>  <span class="hljs-comment">// file had changed, do something.</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper, context: Context</span>){</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onPhotoAlbumChangeDemo.'</span>);</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 注册onCallback1监听。</span></li><li>    phAccessHelper.<span class="hljs-title function_">on</span>(<span class="hljs-string">'photoAlbumChange'</span>, onCallback1);</li><li>    <span class="hljs-comment">// 注册onCallback2监听。</span></li><li>    phAccessHelper.<span class="hljs-title function_">on</span>(<span class="hljs-string">'photoAlbumChange'</span>, onCallback2);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'onPhotoAlbumChangeDemo failed, errCode is'</span>, error);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="offphotoalbumchange20" device-type="phone,2in1,tablet,tv">off('photoAlbumChange')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offphotoalbumchange20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>off(type: 'photoAlbumChange', callback?: Callback&lt;AlbumChangeInfos&gt;): void</p>     <p>取消对'photoAlbumChange'相册的监听。存在多个callback监听时，可以取消指定注册的callback监听；不指定callback时取消所有监听。</p>     <p><strong>需要权限</strong>：ohos.permission.READ_IMAGEVIDEO</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消监听相册，取值为'photoAlbumChange'。取消监听后，有相册发生变化时，不再通过callback返回变更信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-i#albumchangeinfos20">AlbumChangeInfos</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>取消<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-photoaccesshelper#onphotoalbumchange20">on('photoAlbumChange')</a>注册时指定的callback监听；不填时，则取消对'photoAlbumChange'的所有监听。</p>          <p><strong>注意：</strong></p>          <p>取消注册的callback后，有相册发生变化时，不会进入此回调。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-medialibrary">媒体库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">23800151</td>         <td class="cellrowborder" width="50%">          <p>The scenario parameter verification fails.</p>          <p>Possible causes: 1. The type is not fixed at 'photoAlbumChange'; 2. The same callback is unregistered repeatedly.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">23800301</td>         <td class="cellrowborder" width="50%">          <p>Internal system error. You are advised to retry and check the logs.</p>          <p>Possible causes: 1. The database is corrupted. 2. The file system is abnormal. 3. The IPC request timed out.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback1</span> = (<span class="hljs-params">changeData: photoAccessHelper.AlbumChangeInfos</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback1 success, changData: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(changeData));</li><li>  <span class="hljs-comment">// file had changed, do something.</span></li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback2</span> = (<span class="hljs-params">changeData: photoAccessHelper.AlbumChangeInfos</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onCallback2 success, changData: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(changeData));</li><li>  <span class="hljs-comment">// file had changed, do something.</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper, context: Context</span>){</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onPhotoAlbumChangeDemo.'</span>);</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 注册onCallback1监听。</span></li><li>    phAccessHelper.<span class="hljs-title function_">on</span>(<span class="hljs-string">'photoAlbumChange'</span>, onCallback1);</li><li>    <span class="hljs-comment">// 注册onCallback2监听。</span></li><li>    phAccessHelper.<span class="hljs-title function_">on</span>(<span class="hljs-string">'photoAlbumChange'</span>, onCallback2);</li><li>
</li><li>    <span class="hljs-comment">// 关闭onCallback1监听，onCallback2继续监听。</span></li><li>    phAccessHelper.<span class="hljs-title function_">off</span>(<span class="hljs-string">'photoAlbumChange'</span>, onCallback1);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'onPhotoAlbumChangeDemo failed, errCode is'</span>, error);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getphotopickercomponentdefaultalbumname20" device-type="phone,2in1,tablet,tv">getPhotoPickerComponentDefaultAlbumName<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getphotopickercomponentdefaultalbumname20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getPhotoPickerComponentDefaultAlbumName(): Promise&lt;string&gt;</p>     <p>应用使用PhotoPickerComponent组件选择照片时，支持调用API获取组件默认显示相册的相册名字符串。跟随当前系统语言，支持返回当前语言的相册名。使用Promise异步回调。</p>     <p><strong>元服务API</strong>： 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回默认相册的相册名。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">23800301</td>         <td class="cellrowborder" width="50%">Internal system error. It is recommended to retry and check the logs. Possible causes: 1. The IPC request timed out. 2. system running error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> {photoAccessHelper} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getPhotoPickerComponentDefaultAlbumNameDemo'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">phAccessHelper</span>: photoAccessHelper.<span class="hljs-property">PhotoAccessHelper</span> = photoAccessHelper.<span class="hljs-title function_">getPhotoAccessHelper</span>(context);</li><li>
</li><li>  phAccessHelper.<span class="hljs-title function_">getPhotoPickerComponentDefaultAlbumName</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">defaultAlbumName</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getPhotoPickerComponentDefaultAlbumName success, defaultAlbumName is '</span> + defaultAlbumName);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getPhotoPickerComponentDefaultAlbumName failed with error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createdeleterequestdeprecated" device-type="phone,2in1,tablet,tv">createDeleteRequest<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createdeleterequestdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>createDeleteRequest(uriList: Array&lt;string&gt;, callback: AsyncCallback&lt;void&gt;): void</p>     <p>创建一个弹出框来删除照片，删除的文件进入到回收站，使用callback方式返回结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 10开始支持，从API version 11开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/kts-apis-photoaccesshelper-mediaassetchangerequest#deleteassets11-1">MediaAssetChangeRequest.deleteAssets</a>替代。</p>      </div></div></div>     <p><strong>需要权限</strong>：ohos.permission.WRITE_IMAGEVIDEO</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uriList</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待删除的媒体文件uri数组，最大删除数量300。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">callback返回void。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>错误码13900012，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation" target="_blank">开发准备</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createDeleteRequestDemo'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">asset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>    <span class="hljs-keyword">if</span> (asset === <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'asset not exist'</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    phAccessHelper.<span class="hljs-title function_">createDeleteRequest</span>([asset.<span class="hljs-property">uri</span>], <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err === <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createDeleteRequest successfully'</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createDeleteRequest failed with error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      }</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`fetch failed, error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="createdeleterequestdeprecated-1" device-type="phone,2in1,tablet,tv">createDeleteRequest<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createdeleterequestdeprecated-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>createDeleteRequest(uriList: Array&lt;string&gt;): Promise&lt;void&gt;</p>     <p>创建一个弹出框来删除照片，删除的文件进入到回收站，使用Promise方式返回结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 10开始支持，从API version 11开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/kts-apis-photoaccesshelper-mediaassetchangerequest#deleteassets11-1">MediaAssetChangeRequest.deleteAssets</a>替代。</p>      </div></div></div>     <p><strong>需要权限</strong>：ohos.permission.WRITE_IMAGEVIDEO</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uriList</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待删除的媒体文件uri数组，最大删除数量300。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回void。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>接口抛出错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理错误码</a>。</p>     <p>错误码13900012，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/photoaccesshelper-preparation" target="_blank">开发准备</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000011</td>         <td class="cellrowborder" width="50%">System inner fail.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>phAccessHelper的创建请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-f#photoaccesshelpergetphotoaccesshelper">photoAccessHelper.getPhotoAccessHelper</a>的示例使用。</p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataSharePredicates } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">phAccessHelper: photoAccessHelper.PhotoAccessHelper</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createDeleteRequestDemo'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">predicates</span>: dataSharePredicates.<span class="hljs-property">DataSharePredicates</span> = <span class="hljs-keyword">new</span> dataSharePredicates.<span class="hljs-title class_">DataSharePredicates</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchOptions</span>: photoAccessHelper.<span class="hljs-property">FetchOptions</span> = {</li><li>    <span class="hljs-attr">fetchColumns</span>: [],</li><li>    <span class="hljs-attr">predicates</span>: predicates</li><li>  };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fetchResult</span>: photoAccessHelper.<span class="hljs-property">FetchResult</span>&lt;photoAccessHelper.<span class="hljs-property">PhotoAsset</span>&gt; = <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">getAssets</span>(fetchOptions);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">asset</span>: photoAccessHelper.<span class="hljs-property">PhotoAsset</span> = <span class="hljs-keyword">await</span> fetchResult.<span class="hljs-title function_">getFirstObject</span>();</li><li>    <span class="hljs-keyword">if</span> (asset === <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'asset not exist'</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">await</span> phAccessHelper.<span class="hljs-title function_">createDeleteRequest</span>([asset.<span class="hljs-property">uri</span>]);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createDeleteRequest successfully'</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createDeleteRequest failed with error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="getrecentphotoinfo20" device-type="phone,2in1,tablet,tv">getRecentPhotoInfo<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getrecentphotoinfo20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getRecentPhotoInfo(options?: RecentPhotoOptions): Promise&lt;RecentPhotoInfo&gt;</p>     <p>应用使用RecentPhotoComponent组件查看最近图片时，支持调用API获取最近图片信息。使用Promise异步回调。</p>     <p><strong>元服务API</strong>： 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.PhotoAccessHelper.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-class#recentphotooptions20">RecentPhotoOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>最近图片配置选项参数。若无此参数，则按照时间找到最近图片。</p>          <p>该参数在配置的情况下，需与RecentPhotoComponent组件中的options配置相同才可以查到一样的图片，否则可能存在接口能查到最近图片，组件没查到最近图片的情况。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-photoaccesshelper-class#recentphotoinfo20">RecentPhotoInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回最近图片信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-toj-c106="" class="highlight-div"><div _ngcontent-toj-c106="" class="highlight-div-header"><div _ngcontent-toj-c106="" class="highlight-div-header-left"><div _ngcontent-toj-c106="" class="handle-button expand-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-toj-c106="" class="highlight-div-header-right"><div _ngcontent-toj-c106="" class="handle-button ai-button"></div><div _ngcontent-toj-c106="" class="handle-button line-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-toj-c106="" class="handle-button theme-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-toj-c106="" class="handle-button copy-button"><div _ngcontent-toj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-toj-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { photoAccessHelper, <span class="hljs-title class_">PhotoSource</span>, <span class="hljs-title class_">RecentPhotoOptions</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getRecentPhotoInfoDemo'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">phAccessHelper</span>: photoAccessHelper.<span class="hljs-property">PhotoAccessHelper</span> = photoAccessHelper.<span class="hljs-title function_">getPhotoAccessHelper</span>(context);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">recentPhotoOptions</span>: <span class="hljs-title class_">RecentPhotoOptions</span> = {</li><li>    <span class="hljs-attr">period</span>: <span class="hljs-number">60</span> * <span class="hljs-number">60</span>,</li><li>    <span class="hljs-title class_">MIMEType</span>: photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_VIDEO_TYPE</span>,</li><li>    <span class="hljs-attr">photoSource</span>: <span class="hljs-title class_">PhotoSource</span>.<span class="hljs-property">ALL</span></li><li>  }</li><li>
</li><li>  phAccessHelper.<span class="hljs-title function_">getRecentPhotoInfo</span>(recentPhotoOptions).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">recentPhotoInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getRecentPhotoInfo success, recentPhotoInfo is '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(recentPhotoInfo));</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getRecentPhotoInfo failed with error: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>