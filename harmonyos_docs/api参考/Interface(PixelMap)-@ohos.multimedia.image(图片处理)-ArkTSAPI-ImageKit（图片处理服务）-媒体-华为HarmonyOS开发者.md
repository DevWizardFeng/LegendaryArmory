<h1 _ngcontent-rfs-c119="" class="doc-title ng-star-inserted" title="Interface (PixelMap)"> Interface (PixelMap) </h1>

<div _ngcontent-rfs-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</li>       <li>本Interface首批接口从API version 7开始支持。</li>      </ul>     </div></div></div>    <p>图像像素类，用于读取或写入图像数据以及获取图像信息。在调用PixelMap的方法前，需要先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreatepixelmap8">createPixelMap</a>创建一个PixelMap实例。目前pixelmap序列化大小最大128MB，超过会送显失败。大小计算方式为(宽*高*每像素占用字节数)。</p>    <p>从API version 11开始，PixelMap支持通过worker跨线程调用。当PixelMap通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-worker">Worker</a>跨线程后，原线程的PixelMap的所有接口均不能调用，否则将报错501 服务器不具备完成请求的功能。</p>    <p>在调用PixelMap的方法前，需要先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreatepixelmap8">image.createPixelMap</a>构建一个PixelMap对象。</p>    <p>开发元服务请通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource">ImageSource</a>构建PixelMap对象。</p>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 858px;">     <h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">isEditable<sup>7+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>图像像素是否可被编辑。true表示可被编辑，false表示不可被编辑。为false时，图像的渲染和传输性能更好。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>          <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">isStrideAlignment<sup>11+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">图像的行数据是否已进行内存对齐。true表示已进行内存对齐，每行数据的末尾可能有空白字节填充以满足对齐要求；false表示未进行内存对齐，每行数据紧密排列，末尾无空白字节填充。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1217px;">     <h2 id="readpixelstobuffer7" device-type="phone,2in1,tablet,wearable,tv">readPixelsToBuffer<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readpixelstobuffer7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readPixelsToBuffer(dst: ArrayBuffer): Promise&lt;void&gt;</p>     <p>按照PixelMap的像素格式，读取PixelMap的图像像素数据，并写入缓冲区中。使用Promise异步回调。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dst</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓冲区，函数执行结束后获取的图像像素数据写入到该内存区域内。缓冲区大小由<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap#getpixelbytesnumber7">getPixelBytesNumber</a>接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ReadPixelsToBuffer</span>(<span class="hljs-params">pixelMap : image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">readBuffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixelsToBuffer</span>(readBuffer).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in reading image pixel data.'</span>); <span class="hljs-comment">// 符合条件则进入。</span></li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to read image pixel data. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);<span class="hljs-comment">// 不符合条件则进入。</span></li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1235px;">     <h2 id="readpixelstobuffer7-1" device-type="phone,2in1,tablet,wearable,tv">readPixelsToBuffer<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readpixelstobuffer7-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readPixelsToBuffer(dst: ArrayBuffer, callback: AsyncCallback&lt;void&gt;): void</p>     <p>按照PixelMap的像素格式，读取PixelMap的图像像素数据，并写入缓冲区中，使用callback形式返回。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dst</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓冲区，函数执行结束后获取的图像像素数据写入到该内存区域内。缓冲区大小由<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap#getpixelbytesnumber7">getPixelBytesNumber</a>接口获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当读取像素数据到ArrayBuffer成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ReadPixelsToBuffer</span>(<span class="hljs-params">pixelMap : image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">readBuffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixelsToBuffer</span>(readBuffer, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, res: <span class="hljs-built_in">void</span></span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span>(error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to read image pixel data. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);<span class="hljs-comment">// 不符合条件则进入。</span></li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in reading image pixel data.'</span>);  <span class="hljs-comment">// 符合条件则进入。</span></li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1248px;">     <h2 id="readpixelstobuffersync12" device-type="phone,2in1,tablet,wearable,tv">readPixelsToBufferSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readpixelstobuffersync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readPixelsToBufferSync(dst: ArrayBuffer): void</p>     <p>按照PixelMap的像素格式，读取PixelMap的图像像素数据，并写入缓冲区中，同步返回结果。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dst</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓冲区，函数执行结束后获取的图像像素数据写入到该内存区域内。缓冲区大小由<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap#getpixelbytesnumber7">getPixelBytesNumber</a>接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ReadPixelsToBufferSync</span>(<span class="hljs-params">pixelMap : image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> bufferSize = pixelMap.<span class="hljs-title function_">getPixelBytesNumber</span>();</li><li>  <span class="hljs-keyword">const</span> readBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(bufferSize);</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixelsToBufferSync</span>(readBuffer);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1841px;">     <h2 id="readpixels7" device-type="phone,2in1,tablet,wearable,tv">readPixels<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readpixels7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readPixels(area: PositionArea): Promise&lt;void&gt;</p>     <p>固定按照BGRA_8888格式，读取PixelMap指定区域内的图像像素数据，并写入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.pixels缓冲区中，该区域由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.region指定。使用Promise异步回调。</p>     <p>可用公式计算PositionArea需要申请的内存大小。</p>     <p>YUV的区域计算公式：读取区域（region.size{width * height}）* 1.5 （1倍的Y分量+0.25倍U分量+0.25倍V分量）</p>     <p>RGBA的区域计算公式：读取区域（region.size{width * height}）* 4 （1倍的R分量+1倍G分量+1倍B分量+1倍A分量）</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">area</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域大小，根据区域读取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ReadPixelsRGBA</span>(<span class="hljs-params">pixelMap : image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>), <span class="hljs-comment">// 8为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixels</span>(area).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in reading the image data in the area.'</span>); <span class="hljs-comment">// 符合条件则进入。</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'RGBA data is '</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>));</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to read the image data in the area. code is "</span>, error);<span class="hljs-comment">// 不符合条件则进入。</span></li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ReadPixelsYUV</span>(<span class="hljs-params">pixelMap : image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">6</span>),  <span class="hljs-comment">// 6为需要创建的像素buffer大小，取值为：height * width *1.5。</span></li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixels</span>(area).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in reading the image data in the area.'</span>); <span class="hljs-comment">// 符合条件则进入。</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'YUV data is '</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>));</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to read the image data in the area. code is "</span>, error);<span class="hljs-comment">// 不符合条件则进入。</span></li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1931px;">     <h2 id="readpixels7-1" device-type="phone,2in1,tablet,wearable,tv">readPixels<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readpixels7-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readPixels(area: PositionArea, callback: AsyncCallback&lt;void&gt;): void</p>     <p>固定按照BGRA_8888格式，读取PixelMap指定区域内的图像像素数据，并写入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.pixels缓冲区中，该区域由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.region指定，使用callback形式返回。</p>     <p>可用公式计算PositionArea需要申请的内存大小。</p>     <p>YUV的区域计算公式：读取区域（region.size{width * height}）* 1.5 （1倍的Y分量+0.25倍U分量+0.25倍V分量）</p>     <p>RGBA的区域计算公式：读取区域（region.size{width * height}）* 4 （1倍的R分量+1倍G分量+1倍B分量+1倍A分量）</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">area</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域大小，根据区域读取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当读取区域内的图片数据成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ReadPixelsRGBA</span>(<span class="hljs-params">pixelMap : image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>), <span class="hljs-comment">// 8为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixels</span>(area, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to read pixelmap from the specified area. code is "</span>, error);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in reading pixelmap from the specified area.'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'RGBA data is '</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>));</li><li>      }</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ReadPixelsYUV</span>(<span class="hljs-params">pixelMap : image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">6</span>), <span class="hljs-comment">// 6为需要创建的像素buffer大小，取值为：height * width *1.5。</span></li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixels</span>(area, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to read pixelmap from the specified area. code is "</span>, error);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in reading pixelmap from the specified area.'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'YUV data is '</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>));</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1224px;">     <h2 id="readpixelssync12" device-type="phone,2in1,tablet,wearable,tv">readPixelsSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readpixelssync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readPixelsSync(area: PositionArea): void</p>     <p>固定按照BGRA_8888格式，读取PixelMap指定区域内的图像像素数据，并写入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.pixels缓冲区中，该区域由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.region指定，同步返回结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">area</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域大小，根据区域读取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ReadPixelsSync</span>(<span class="hljs-params">pixelMap : image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> area : image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>),</li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixelsSync</span>(area);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1985px;">     <h2 id="writepixels7" device-type="phone,2in1,tablet,wearable,tv">writePixels<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writepixels7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>writePixels(area: PositionArea): Promise&lt;void&gt;</p>     <p>固定按照BGRA_8888格式，读取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.pixels缓冲区中的图像像素数据，并写入PixelMap指定区域内，该区域由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.region指定。使用Promise异步回调。</p>     <p>可用公式计算PositionArea需要申请的内存大小。</p>     <p>YUV的区域计算公式：读取区域（region.size{width * height}）* 1.5 （1倍的Y分量+0.25倍U分量+0.25倍V分量）</p>     <p>RGBA的区域计算公式：读取区域（region.size{width * height}）* 4 （1倍的R分量+1倍G分量+1倍B分量+1倍A分量）</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">area</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域，根据区域写入。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">WritePixelsRGBA</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>), <span class="hljs-comment">// 8为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writePixels</span>(area).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in writing pixelmap into the specified area.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to write pixelmap into the specified area. code is "</span>, error);</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">WritePixelsYUV</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">6</span>), <span class="hljs-comment">// 6为需要创建的像素buffer大小，取值为：height * width *1.5。</span></li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>, <span class="hljs-comment">// PixelMap为yuv格式时，writePixels函数不使用该变量。</span></li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writePixels</span>(area).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in writing pixelmap into the specified area.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to write pixelmap into the specified area. code is "</span>, error);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2003px;">     <h2 id="writepixels7-1" device-type="phone,2in1,tablet,wearable,tv">writePixels<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writepixels7-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>writePixels(area: PositionArea, callback: AsyncCallback&lt;void&gt;): void</p>     <p>固定按照BGRA_8888格式，读取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.pixels缓冲区中的图像像素数据，并写入PixelMap指定区域内，该区域由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.region指定，使用callback形式返回。</p>     <p>可用公式计算PositionArea需要申请的内存大小。</p>     <p>YUV的区域计算公式：读取区域（region.size{width * height}）* 1.5 （1倍的Y分量+0.25倍U分量+0.25倍V分量）</p>     <p>RGBA的区域计算公式：读取区域（region.size{width * height}）* 4 （1倍的R分量+1倍G分量+1倍B分量+1倍A分量）</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">area</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域，根据区域写入。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当写入成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">WritePixelsRGBA</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = { <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>), <span class="hljs-comment">// 8为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writePixels</span>(area, <span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to write pixelmap into the specified area. code is "</span>, error);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in writing pixelmap into the specified area.'</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">WritePixelsYUV</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = { <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">6</span>), <span class="hljs-comment">// 6为需要创建的像素buffer大小，取值为：height * width * 1.5。</span></li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>, <span class="hljs-comment">// PixelMap为yuv格式时，writePixels函数不使用该变量。</span></li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writePixels</span>(area, <span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to write pixelmap into the specified area. code is "</span>, error);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in writing pixelmap into the specified area.'</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1368px;">     <h2 id="writepixelssync12" device-type="phone,2in1,tablet,wearable,tv">writePixelsSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writepixelssync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>writePixelsSync(area: PositionArea): void</p>     <p>固定按照BGRA_8888格式，读取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.pixels缓冲区中的图像像素数据，并写入PixelMap指定区域内，该区域由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a>.region指定，同步返回结果。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">area</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">PositionArea</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域，根据区域写入。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">WritePixelsSync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>),</li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writePixelsSync</span>(area);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1313px;">     <h2 id="writebuffertopixels7" device-type="phone,2in1,tablet,wearable,tv">writeBufferToPixels<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writebuffertopixels7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>writeBufferToPixels(src: ArrayBuffer): Promise&lt;void&gt;</p>     <p>按照PixelMap的像素格式，读取缓冲区中的图像像素数据，并写入PixelMap。使用Promise异步回调。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓冲区，函数执行时会将该缓冲区中的图像像素数据写入到PixelMap。缓冲区大小由<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap#getpixelbytesnumber7">getPixelBytesNumber</a>接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">WriteBufferToPixels</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writeBufferToPixels</span>(color).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in writing data from a buffer to a PixelMap."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to write data from a buffer to a PixelMap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1331px;">     <h2 id="writebuffertopixels7-1" device-type="phone,2in1,tablet,wearable,tv">writeBufferToPixels<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writebuffertopixels7-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>writeBufferToPixels(src: ArrayBuffer, callback: AsyncCallback&lt;void&gt;): void</p>     <p>按照PixelMap的像素格式，读取缓冲区中的图像像素数据，并写入PixelMap，使用callback形式返回。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓冲区，函数执行时会将该缓冲区中的图像像素数据写入到PixelMap。缓冲区大小由<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap#getpixelbytesnumber7">getPixelBytesNumber</a>接口获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当缓冲区中的图像像素数据写入PixelMap成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">WriteBufferToPixels</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>);  <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writeBufferToPixels</span>(color, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to write data from a buffer to a PixelMap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in writing data from a buffer to a PixelMap."</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1272px;">     <h2 id="writebuffertopixelssync12" device-type="phone,2in1,tablet,wearable,tv">writeBufferToPixelsSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writebuffertopixelssync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>writeBufferToPixelsSync(src: ArrayBuffer): void</p>     <p>按照PixelMap的像素格式，读取缓冲区中的图像像素数据，并写入PixelMap，同步返回结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓冲区，函数执行时会将该缓冲区中的图像像素数据写入到PixelMap。缓冲区大小由<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap#getpixelbytesnumber7">getPixelBytesNumber</a>接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">WriteBufferToPixelsSync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> color : <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>);  <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> bufferArr : <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writeBufferToPixelsSync</span>(color);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 994px;">     <h2 id="getimageinfo7" device-type="phone,2in1,tablet,wearable,tv">getImageInfo<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageinfo7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageInfo(): Promise&lt;ImageInfo&gt;</p>     <p>获取图像像素信息。使用Promise异步回调。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#imageinfo">ImageInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回图像像素信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageInfo</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">getImageInfo</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">imageInfo: image.ImageInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (imageInfo != <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in obtaining the image pixel map information <span class="hljs-subst">${imageInfo.size.height}</span>`</span>);</li><li>      }</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the image pixel map information. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1094px;">     <h2 id="getimageinfo7-1" device-type="phone,2in1,tablet,wearable,tv">getImageInfo<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageinfo7-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageInfo(callback: AsyncCallback&lt;ImageInfo&gt;): void</p>     <p>获取图像像素信息，使用callback形式返回获取的图像像素信息。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#imageinfo">ImageInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取图像像素信息成功，err为undefined，data为获取到的图像像素信息；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例:</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageInfoSync</span>(<span class="hljs-params">pixelMap : image.PixelMap</span>){</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">getImageInfo</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, imageInfo: image.ImageInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the image pixel map information. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in obtaining the image pixel map information <span class="hljs-subst">${imageInfo.size.height}</span>`</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1069px;">     <h2 id="getimageinfosync12" device-type="phone,2in1,tablet,wearable,tv">getImageInfoSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageinfosync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageInfoSync(): ImageInfo</p>     <p>以同步方法获取图像像素信息。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#imageinfo">ImageInfo</a></td>         <td class="cellrowborder" width="50%">图像像素信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageInfoSync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">let</span> imageInfo : image.<span class="hljs-property">ImageInfo</span> = pixelMap.<span class="hljs-title function_">getImageInfoSync</span>();</li><li>    <span class="hljs-keyword">return</span> imageInfo;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 754px;">     <h2 id="getbytesnumberperrow7" device-type="phone,2in1,tablet,wearable,tv">getBytesNumberPerRow<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getbytesnumberperrow7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getBytesNumberPerRow(): number</p>     <p>获取图像像素每行字节数。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">图像像素的行字节数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">GetBytesNumberPerRow</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">rowCount</span>: <span class="hljs-built_in">number</span> = pixelMap.<span class="hljs-title function_">getBytesNumberPerRow</span>();</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 754px;">     <h2 id="getpixelbytesnumber7" device-type="phone,2in1,tablet,wearable,tv">getPixelBytesNumber<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpixelbytesnumber7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPixelBytesNumber(): number</p>     <p>获取图像像素的总字节数。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">图像像素的总字节数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">GetPixelBytesNumber</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelBytesNumber</span>: <span class="hljs-built_in">number</span> = pixelMap.<span class="hljs-title function_">getPixelBytesNumber</span>();</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 754px;">     <h2 id="getdensity9" device-type="phone,2in1,tablet,wearable,tv">getDensity<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdensity9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDensity():number</p>     <p>获取当前图像像素的密度。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">图像像素的密度，单位为ppi。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">GetDensity</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">getDensity</span>: <span class="hljs-built_in">number</span> = pixelMap.<span class="hljs-title function_">getDensity</span>();</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1139px;">     <h2 id="opacity9" device-type="phone,2in1,tablet,wearable,tv">opacity<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="opacity9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>opacity(rate: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>通过设置透明比率来让PixelMap达到对应的透明效果，yuv图片不支持设置透明度，使用callback形式返回。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rate</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">透明比率的值，取值范围是(0,1]。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当设置透明比率成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Opacity</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">rate</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0.5</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">opacity</span>(rate, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set opacity. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in setting opacity."</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1145px;">     <h2 id="opacity9-1" device-type="phone,2in1,tablet,wearable,tv">opacity<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="opacity9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>opacity(rate: number): Promise&lt;void&gt;</p>     <p>通过设置透明比率来让PixelMap达到对应的透明效果，yuv图片不支持设置透明度。使用Promise异步回调。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rate</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">透明比率的值，取值范围是(0,1]。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Opacity</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">rate</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0.5</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">opacity</span>(rate).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting opacity.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set opacity. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1104px;">     <h2 id="opacitysync12" device-type="phone,2in1,tablet,wearable,tv">opacitySync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="opacitysync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>opacitySync(rate: number): void</p>     <p>设置PixelMap的透明比率，yuv图片不支持设置透明度，初始化PixelMap并同步返回结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rate</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">透明比率的值，取值范围是(0,1]。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">OpacitySync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> rate : <span class="hljs-built_in">number</span> = <span class="hljs-number">0.5</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">opacitySync</span>(rate);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 970px;">     <h2 id="createalphapixelmap9" device-type="phone,2in1,tablet,wearable,tv">createAlphaPixelmap<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createalphapixelmap9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAlphaPixelmap(): Promise&lt;PixelMap&gt;</p>     <p>根据Alpha通道的信息，来生成一个仅包含Alpha通道信息的pixelmap，可用于阴影效果，yuv格式不支持此接口。使用Promise异步回调。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateAlphaPixelmap</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">createAlphaPixelmap</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">alphaPixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating alpha pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create alpha pixelmap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1094px;">     <h2 id="createalphapixelmap9-1" device-type="phone,2in1,tablet,wearable,tv">createAlphaPixelmap<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createalphapixelmap9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAlphaPixelmap(callback: AsyncCallback&lt;PixelMap&gt;): void</p>     <p>根据Alpha通道的信息，来生成一个仅包含Alpha通道信息的pixelmap，可用于阴影效果，yuv格式不支持此接口，使用callback形式返回。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当创建PixelMap成功，err为undefined，data为获取到的PixelMap对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateAlphaPixelmap</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">createAlphaPixelmap</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, alphaPixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (alphaPixelMap == <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain new pixel map. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in obtaining new pixel map.'</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1124px;">     <h2 id="createalphapixelmapsync12" device-type="phone,2in1,tablet,wearable,tv">createAlphaPixelmapSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createalphapixelmapsync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAlphaPixelmapSync(): PixelMap</p>     <p>根据Alpha通道的信息，生成一个仅包含Alpha通道信息的PixelMap，可用于阴影效果，yuv格式不支持此接口，同步返回PixelMap类型的结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateAlphaPixelmapSync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">let</span> pixelmap : image.<span class="hljs-property">PixelMap</span> = pixelMap.<span class="hljs-title function_">createAlphaPixelmapSync</span>();</li><li>    <span class="hljs-keyword">return</span> pixelmap;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1332px;">     <h2 id="scale9" device-type="phone,2in1,tablet,wearable,tv">scale<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scale9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scale(x: number, y: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>根据输入的宽高的缩放倍数对图片进行缩放，使用callback形式返回。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>建议宽高的缩放倍数取非负数，否则会产生翻转效果。</li>        <li>宽高的缩放倍数 = 缩放后的图片宽高 / 缩放前的图片宽高。</li>       </ol>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">宽度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">高度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当对图片进行缩放成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Scale</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">scale</span>(scaleX, scaleY, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to scale pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in scaling pixelmap."</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1338px;">     <h2 id="scale9-1" device-type="phone,2in1,tablet,wearable,tv">scale<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scale9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scale(x: number, y: number): Promise&lt;void&gt;</p>     <p>根据输入的宽高的缩放倍数对图片进行缩放。使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>建议宽高的缩放倍数取非负数，否则会产生翻转效果。</li>        <li>宽高的缩放倍数 = 缩放后的图片宽高 / 缩放前的图片宽高。</li>       </ol>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">宽度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">高度的缩放倍数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Scale</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">scale</span>(scaleX, scaleY).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in scaling pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to scale pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1297px;">     <h2 id="scalesync12" device-type="phone,2in1,tablet,wearable,tv">scaleSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scalesync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scaleSync(x: number, y: number): void</p>     <p>根据输入的宽高的缩放倍数对图片进行缩放，同步返回结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>建议宽高的缩放倍数取非负数，否则会产生翻转效果。</li>        <li>宽高的缩放倍数 = 缩放后的图片宽高 / 缩放前的图片宽高。</li>       </ol>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">宽度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">高度的缩放倍数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ScaleSync</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">scaleSync</span>(scaleX, scaleY);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1705px;">     <h2 id="scale12" device-type="phone,2in1,tablet,wearable,tv">scale<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scale12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scale(x: number, y: number, level: AntiAliasingLevel): Promise&lt;void&gt;</p>     <p>根据指定的缩放算法和输入的宽高的缩放倍数对图片进行缩放。使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>建议宽高的缩放倍数取非负数，否则会产生翻转效果。</li>        <li>宽高的缩放倍数 = 缩放后的图片宽高 / 缩放前的图片宽高。</li>       </ol>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">宽度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">高度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#antialiasinglevel12">AntiAliasingLevel</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">采用的缩放算法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ScaleSync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">scale</span>(scaleX, scaleY, image.<span class="hljs-property">AntiAliasingLevel</span>.<span class="hljs-property">LOW</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in scaling pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to scale pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1342px;">     <h2 id="scalesync12-1" device-type="phone,2in1,tablet,wearable,tv">scaleSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scalesync12-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scaleSync(x: number, y: number, level: AntiAliasingLevel): void</p>     <p>根据指定的缩放算法和输入的宽高的缩放倍数对图片进行缩放，同步返回结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>建议宽高的缩放倍数取非负数，否则会产生翻转效果。</li>        <li>宽高的缩放倍数 = 缩放后的图片宽高 / 缩放前的图片宽高。</li>       </ol>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">宽度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">高度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#antialiasinglevel12">AntiAliasingLevel</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">采用的缩放算法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ScaleSync</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">scaleSync</span>(scaleX, scaleY, image.<span class="hljs-property">AntiAliasingLevel</span>.<span class="hljs-property">LOW</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1461px;">     <h2 id="createscaledpixelmap18" device-type="phone,2in1,tablet,wearable,tv">createScaledPixelMap<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createscaledpixelmap18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createScaledPixelMap(x: number, y: number, level?: AntiAliasingLevel): Promise&lt;PixelMap&gt;</p>     <p>根据指定的缩放算法和输入的宽高的缩放倍数，创建一个新的缩放后的图片。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">宽度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">高度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#antialiasinglevel12">AntiAliasingLevel</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">采用的缩放算法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateScaledPixelMap</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>      pixelMap.<span class="hljs-title function_">createScaledPixelMap</span>(scaleX, scaleY, image.<span class="hljs-property">AntiAliasingLevel</span>.<span class="hljs-property">LOW</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">scaledPixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating scaledPixelMap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create scaledPixelMap. Error code is <span class="hljs-subst">${error.code}</span>, error message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1317px;">     <h2 id="createscaledpixelmapsync18" device-type="phone,2in1,tablet,wearable,tv">createScaledPixelMapSync<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createscaledpixelmapsync18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createScaledPixelMapSync(x: number, y: number, level?: AntiAliasingLevel): PixelMap</p>     <p>根据指定的缩放算法和输入的宽高的缩放倍数，创建一个新的缩放后的图片，同步返回结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">宽度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">高度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#antialiasinglevel12">AntiAliasingLevel</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">采用的缩放算法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateScaledPixelMapSync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">let</span> scaledPixelMap = pixelMap.<span class="hljs-title function_">createScaledPixelMapSync</span>(scaleX, scaleY, image.<span class="hljs-property">AntiAliasingLevel</span>.<span class="hljs-property">LOW</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1385px;">     <h2 id="clone18" device-type="phone,2in1,tablet,wearable,tv">clone<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clone18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clone(): Promise&lt;PixelMap&gt;</p>     <p>拷贝一份当前Pixelmap对象。使用Promise异步回调。</p>     <p><strong>系统能力：</strong>: SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource unavailable.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980102</td>         <td class="cellrowborder" width="50%">Image malloc abnormal. This status code is thrown when an error occurs during the process of copying data.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">Image YUV And ASTC types are not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980104</td>         <td class="cellrowborder" width="50%">Image initialization abnormal. This status code is thrown when an error occurs during the process of creating empty pixelmap.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980106</td>         <td class="cellrowborder" width="50%">The image data is too large. This status code is thrown when an error occurs during the process of checking size.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Clone</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">clone</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">clonePixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded clone pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to clone pixelmap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1409px;">     <h2 id="clonesync18" device-type="phone,2in1,tablet,wearable,tv">cloneSync<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clonesync18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cloneSync(): PixelMap</p>     <p>拷贝一份当前Pixelmap对象, 同步返回结果。</p>     <p><strong>系统能力：</strong>: SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource unavailable.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980102</td>         <td class="cellrowborder" width="50%">Image malloc abnormal. This status code is thrown when an error occurs during the process of copying data.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">Image YUV And ASTC types are not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980104</td>         <td class="cellrowborder" width="50%">Image initialization abnormal. This status code is thrown when an error occurs during the process of creating empty pixelmap.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980106</td>         <td class="cellrowborder" width="50%">The image data is too large. This status code is thrown when an error occurs during the process of checking size.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CloneSync</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">clonedPixelMap</span>:image.<span class="hljs-property">PixelMap</span> = pixelMap.<span class="hljs-title function_">cloneSync</span>();</li><li>    } <span class="hljs-keyword">catch</span>(e) {</li><li>      <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`clone pixelmap error. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1256px;">     <h2 id="translate9" device-type="phone,2in1,tablet,wearable,tv">translate<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="translate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>translate(x: number, y: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>根据输入的坐标对图片进行位置变换，使用callback形式返回。</p>     <p>translate后的图片尺寸改变为：width+X ，height+Y，建议translate后的图片尺寸宽高不要超过屏幕的宽高。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域横坐标。单位：像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域纵坐标。单位：像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当对图片进行位置变换成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Translate</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">translateX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">50.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">translateY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">translate</span>(translateX, translateY, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to translate pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in translating pixelmap."</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1238px;">     <h2 id="translate9-1" device-type="phone,2in1,tablet,wearable,tv">translate<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="translate9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>translate(x: number, y: number): Promise&lt;void&gt;</p>     <p>根据输入的坐标对图片进行位置变换。使用Promise异步回调。</p>     <p>translate后的图片尺寸改变为：width+X ，height+Y，建议translate后的图片尺寸宽高不要超过屏幕的宽高。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域横坐标。单位：像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域纵坐标。单位：像素。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Translate</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">translateX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">50.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">translateY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">translate</span>(translateX, translateY).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in translating pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to translate pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1197px;">     <h2 id="translatesync12" device-type="phone,2in1,tablet,wearable,tv">translateSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="translatesync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>translateSync(x: number, y: number): void</p>     <p>根据输入的坐标对图片进行位置变换，同步返回结果。</p>     <p>translate后的图片尺寸改变为：width+X ，height+Y，建议translate后的图片尺寸宽高不要超过屏幕的宽高。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域横坐标。单位：像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域纵坐标。单位：像素。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">TranslateSync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> translateX : <span class="hljs-built_in">number</span> = <span class="hljs-number">50.0</span>;</li><li>  <span class="hljs-keyword">let</span> translateY : <span class="hljs-built_in">number</span> = <span class="hljs-number">10.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">translateSync</span>(translateX, translateY);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1263px;">     <h2 id="rotate9" device-type="phone,2in1,tablet,wearable,tv">rotate<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rotate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rotate(angle: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>根据输入的角度对图片进行旋转，使用callback形式返回。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>图片旋转的角度取值范围：0-360。超出取值范围时，根据圆周360度自动矫正。例如，-100度与260度效果相同。</li>        <li>如果图片旋转的角度不是90的整数倍，旋转后图片的尺寸会发生改变。</li>       </ol>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">angle</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片旋转的角度。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当对图片进行旋转成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Rotate</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">angle</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">90.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">rotate</span>(angle, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to rotate pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in rotating pixelmap."</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1269px;">     <h2 id="rotate9-1" device-type="phone,2in1,tablet,wearable,tv">rotate<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rotate9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rotate(angle: number): Promise&lt;void&gt;</p>     <p>根据输入的角度对图片进行旋转。使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>图片旋转的角度取值范围：0-360。超出取值范围时，根据圆周360度自动矫正。例如，-100度与260度效果相同。</li>        <li>如果图片旋转的角度不是90的整数倍，旋转后图片的尺寸会发生改变。</li>       </ol>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">angle</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片旋转的角度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Rotate</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">angle</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">90.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">rotate</span>(angle).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in rotating pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to rotate pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1228px;">     <h2 id="rotatesync12" device-type="phone,2in1,tablet,wearable,tv">rotateSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rotatesync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rotateSync(angle: number): void</p>     <p>根据输入的角度对图片进行旋转，同步返回结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>图片旋转的角度取值范围：0-360。超出取值范围时，根据圆周360度自动矫正。例如，-100度与260度效果相同。</li>        <li>如果图片旋转的角度不是90的整数倍，旋转后图片的尺寸会发生改变。</li>       </ol>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">angle</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片旋转的角度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">RotateSync</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> angle : <span class="hljs-built_in">number</span> = <span class="hljs-number">90.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">rotateSync</span>(angle);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1232px;">     <h2 id="flip9" device-type="phone,2in1,tablet,wearable,tv">flip<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="flip9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>flip(horizontal: boolean, vertical: boolean, callback: AsyncCallback&lt;void&gt;): void</p>     <p>根据输入的条件对图片进行翻转，使用callback形式返回。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">horizontal</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示进行水平翻转，false表示不进行水平翻转。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">vertical</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示进行垂直翻转，false表示不进行垂直翻转。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当对图片翻转成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Flip</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">horizontal</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">vertical</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">flip</span>(horizontal, vertical, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to flip pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flipping pixelmap."</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1238px;">     <h2 id="flip9-1" device-type="phone,2in1,tablet,wearable,tv">flip<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="flip9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>flip(horizontal: boolean, vertical: boolean): Promise&lt;void&gt;</p>     <p>根据输入的条件对图片进行翻转。使用Promise异步回调。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">horizontal</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示进行水平翻转，false表示不进行水平翻转。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">vertical</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示进行垂直翻转，false表示不进行垂直翻转。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Flip</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">horizontal</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">vertical</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">flip</span>(horizontal, vertical).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in flipping pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to flip pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1245px;">     <h2 id="flipsync12" device-type="phone,2in1,tablet,wearable,tv">flipSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="flipsync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>flipSync(horizontal: boolean, vertical: boolean): void</p>     <p>根据输入的条件对图片进行翻转并同步返回结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">horizontal</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示进行水平翻转，false表示不进行水平翻转。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">vertical</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示进行垂直翻转，false表示不进行垂直翻转。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">FlipSync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> horizontal : <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-keyword">let</span> vertical : <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">flipSync</span>(horizontal, vertical);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1139px;">     <h2 id="crop9" device-type="phone,2in1,tablet,wearable,tv">crop<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="crop9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>crop(region: Region, callback: AsyncCallback&lt;void&gt;): void</p>     <p>根据输入的尺寸对图片进行裁剪，使用callback形式返回。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">region</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">Region</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">裁剪的尺寸。取值范围不能超过图片的宽高。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当对图片进行裁剪成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Crop</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">region</span>: image.<span class="hljs-property">Region</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> } };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">crop</span>(region, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to crop pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in cropping pixelmap."</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1169px;">     <h2 id="crop9-1" device-type="phone,2in1,tablet,wearable,tv">crop<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="crop9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>crop(region: Region): Promise&lt;void&gt;</p>     <p>根据输入的尺寸对图片进行裁剪。使用Promise异步回调。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">region</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">Region</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">裁剪的尺寸。取值范围不能超过图片的宽高。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Crop</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">region</span>: image.<span class="hljs-property">Region</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> } };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">crop</span>(region).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in cropping pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to crop pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>
</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1152px;">     <h2 id="cropsync12" device-type="phone,2in1,tablet,wearable,tv">cropSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cropsync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cropSync(region: Region): void</p>     <p>根据输入的尺寸裁剪图片。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">region</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">Region</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">裁剪的尺寸。取值范围不能超过图片的宽高。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CropSync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> region : image.<span class="hljs-property">Region</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> } };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">cropSync</span>(region);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1083px;">     <h2 id="getcolorspace10" device-type="phone,2in1,tablet,wearable,tv">getColorSpace<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcolorspace10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getColorSpace(): colorSpaceManager.ColorSpaceManager</p>     <p>获取图像广色域信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-colorspacemanager#colorspacemanager">colorSpaceManager.ColorSpaceManager</a></td>         <td class="cellrowborder" width="50%">图像广色域信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980101</td>         <td class="cellrowborder" width="50%">If the image data abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">If the image data unsupport.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">If the image parameter invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">GetColorSpace</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">let</span> csm = pixelMap.<span class="hljs-title function_">getColorSpace</span>();</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1080px;">     <h2 id="setcolorspace10" device-type="phone,2in1,tablet,wearable,tv">setColorSpace<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setcolorspace10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setColorSpace(colorSpace: colorSpaceManager.ColorSpaceManager): void</p>     <p>设置图像广色域信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">colorSpace</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-colorspacemanager#colorspacemanager">colorSpaceManager.ColorSpaceManager</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像广色域信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">The image source data is incomplete.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">If the image parameter invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { colorSpaceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">SetColorSpace</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> colorSpaceName = colorSpaceManager.<span class="hljs-property">ColorSpace</span>.<span class="hljs-property">SRGB</span>; <span class="hljs-comment">// colorSpaceManager.ColorSpace该对象当前仅支持2in1/PC设备使用。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">csm</span>: colorSpaceManager.<span class="hljs-property">ColorSpaceManager</span> = colorSpaceManager.<span class="hljs-title function_">create</span>(colorSpaceName);</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">setColorSpace</span>(csm);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1715px;">     <h2 id="applycolorspace11" device-type="phone,2in1,tablet,wearable,tv">applyColorSpace<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applycolorspace11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>applyColorSpace(targetColorSpace: colorSpaceManager.ColorSpaceManager, callback: AsyncCallback&lt;void&gt;): void</p>     <p>根据输入的目标色彩空间对图像像素颜色进行色彩空间转换，使用callback形式返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">targetColorSpace</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-colorspacemanager#colorspacemanager">colorSpaceManager.ColorSpaceManager</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标色彩空间，支持SRGB、DCI_P3、DISPLAY_P3、ADOBE_RGB_1998。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当对图像像素颜色进行色彩空间转换成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980104</td>         <td class="cellrowborder" width="50%">Failed to initialize the internal object.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980108</td>         <td class="cellrowborder" width="50%">Failed to convert the color space.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { colorSpaceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ApplyColorSpace</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> colorSpaceName = colorSpaceManager.<span class="hljs-property">ColorSpace</span>.<span class="hljs-property">SRGB</span>; <span class="hljs-comment">// colorSpaceManager.ColorSpace该对象当前仅支持2in1/PC设备使用。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">targetColorSpace</span>: colorSpaceManager.<span class="hljs-property">ColorSpaceManager</span> = colorSpaceManager.<span class="hljs-title function_">create</span>(colorSpaceName);</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      pixelMap.<span class="hljs-title function_">applyColorSpace</span>(targetColorSpace, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ApplyColorSpace failed. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded ApplyColorSpace."</span>);</li><li>        }</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to apply color space for pixelmap object, error code is <span class="hljs-subst">${error}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in applying color space for pixelmap object.'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1577px;">     <h2 id="applycolorspace11-1" device-type="phone,2in1,tablet,wearable,tv">applyColorSpace<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applycolorspace11-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>applyColorSpace(targetColorSpace: colorSpaceManager.ColorSpaceManager): Promise&lt;void&gt;</p>     <p>根据输入的目标色彩空间对图像像素颜色进行色彩空间转换。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">targetColorSpace</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-colorspacemanager#colorspacemanager">colorSpaceManager.ColorSpaceManager</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标色彩空间，支持SRGB、DCI_P3、DISPLAY_P3、ADOBE_RGB_1998。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980104</td>         <td class="cellrowborder" width="50%">Failed to initialize the internal object.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980108</td>         <td class="cellrowborder" width="50%">Failed to convert the color space.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { colorSpaceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ApplyColorSpace</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> colorSpaceName = colorSpaceManager.<span class="hljs-property">ColorSpace</span>.<span class="hljs-property">SRGB</span>; <span class="hljs-comment">// colorSpaceManager.ColorSpace该对象当前仅支持2in1/PC设备使用。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">targetColorSpace</span>: colorSpaceManager.<span class="hljs-property">ColorSpaceManager</span> = colorSpaceManager.<span class="hljs-title function_">create</span>(colorSpaceName);</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>      pixelMap.<span class="hljs-title function_">applyColorSpace</span>(targetColorSpace).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in applying color space for pixelmap object.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to apply color space for pixelmap object, error code is <span class="hljs-subst">${error}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1333px;">     <h2 id="tosdr12" device-type="phone,2in1,tablet,wearable,tv">toSdr<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="tosdr12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>toSdr(): Promise&lt;void&gt;</p>     <p>将HDR的图像内容转换为SDR的图像内容。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980137</td>         <td class="cellrowborder" width="50%">Invalid image operation.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ToSdr</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-comment">// 此处'app.media.startIcon'需要替换为本地hdr图片。</span></li><li>  <span class="hljs-keyword">let</span> img = context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getMediaContentSync</span>($r(<span class="hljs-string">'app.media.startIcon'</span>).<span class="hljs-property">id</span>);</li><li>  <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(img.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>));</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">decodingOptions</span>: image.<span class="hljs-property">DecodingOptions</span> = {</li><li>    <span class="hljs-attr">desiredDynamicRange</span>: image.<span class="hljs-property">DecodingDynamicRange</span>.<span class="hljs-property">AUTO</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> pixelmap = imageSource.<span class="hljs-title function_">createPixelMapSync</span>(decodingOptions);</li><li>  <span class="hljs-keyword">if</span> (pixelmap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap object.'</span>);</li><li>    pixelmap.<span class="hljs-title function_">toSdr</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-keyword">let</span> imageInfo = pixelmap.<span class="hljs-title function_">getImageInfoSync</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"after toSdr ,imageInfo isHdr:"</span> + imageInfo.<span class="hljs-property">isHdr</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set sdr. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create pixelMap.'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1697px;">     <h2 id="getmetadata12" device-type="phone,2in1,tablet,wearable,tv">getMetadata<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getmetadata12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getMetadata(key: HdrMetadataKey): HdrMetadataValue</p>     <p>从PixelMap中获取元数据。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#hdrmetadatakey12">HdrMetadataKey</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">HDR元数据的关键字，可用于查询对应值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-t#hdrmetadatavalue12">HdrMetadataValue</a></td>         <td class="cellrowborder" width="50%">返回元数据的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource unavailable.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980173</td>         <td class="cellrowborder" width="50%">The DMA memory does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980302</td>         <td class="cellrowborder" width="50%">Memory copy failed. Possibly caused by invalid metadata value.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetMetadata</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-comment">// 此处'app.media.startIcon'需要替换为本地hdr图片。</span></li><li>  <span class="hljs-keyword">let</span> img = context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getMediaContentSync</span>($r(<span class="hljs-string">'app.media.startIcon'</span>).<span class="hljs-property">id</span>);</li><li>  <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(img.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>));</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">decodingOptions</span>: image.<span class="hljs-property">DecodingOptions</span> = {</li><li>    <span class="hljs-attr">desiredDynamicRange</span>: image.<span class="hljs-property">DecodingDynamicRange</span>.<span class="hljs-property">AUTO</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> pixelmap = imageSource.<span class="hljs-title function_">createPixelMapSync</span>(decodingOptions);</li><li>  <span class="hljs-keyword">if</span> (pixelmap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap object.'</span>);</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> staticMetadata = pixelmap.<span class="hljs-title function_">getMetadata</span>(image.<span class="hljs-property">HdrMetadataKey</span>.<span class="hljs-property">HDR_STATIC_METADATA</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getMetadata:<span class="hljs-subst">${staticMetadata}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'pixelmap create failed'</span> + e);</li><li>    }</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create pixelMap.'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1790px;">     <h2 id="setmetadata12" device-type="phone,2in1,tablet,wearable,tv">setMetadata<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setmetadata12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setMetadata(key: HdrMetadataKey, value: HdrMetadataValue): Promise&lt;void&gt;</p>     <p>设置PixelMap元数据。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#hdrmetadatakey12">HdrMetadataKey</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">HDR元数据的关键字，用于设置对应值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-t#hdrmetadatavalue12">HdrMetadataValue</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">元数据的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource unavailable.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980173</td>         <td class="cellrowborder" width="50%">The DMA memory does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980302</td>         <td class="cellrowborder" width="50%">Memory copy failed. Possibly caused by invalid metadata value.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>创建DMA_ALLOC内存的PixelMap方法请参考: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/image-allocator-type#系统默认的内存分配方式" target="_blank">系统默认的内存分配方式</a>。</p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> {image} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">SetMetadata</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>) { <span class="hljs-comment">// 入参pixelMap内存类型需为DMA_ALLOC内存类型，其创建方法请参考上方链接。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">staticMetadata</span>: image.<span class="hljs-property">HdrStaticMetadata</span> = {</li><li>    <span class="hljs-attr">displayPrimariesX</span>: [<span class="hljs-number">1.1</span>, <span class="hljs-number">1.1</span>, <span class="hljs-number">1.1</span>],</li><li>    <span class="hljs-attr">displayPrimariesY</span>: [<span class="hljs-number">1.2</span>, <span class="hljs-number">1.2</span>, <span class="hljs-number">1.2</span>],</li><li>    <span class="hljs-attr">whitePointX</span>: <span class="hljs-number">1.1</span>,</li><li>    <span class="hljs-attr">whitePointY</span>: <span class="hljs-number">1.2</span>,</li><li>    <span class="hljs-attr">maxLuminance</span>: <span class="hljs-number">2.1</span>,</li><li>    <span class="hljs-attr">minLuminance</span>: <span class="hljs-number">1.0</span>,</li><li>    <span class="hljs-attr">maxContentLightLevel</span>: <span class="hljs-number">2.1</span>,</li><li>    <span class="hljs-attr">maxFrameAverageLightLevel</span>: <span class="hljs-number">2.1</span>,</li><li>  };</li><li>  pixelMap.<span class="hljs-title function_">setMetadata</span>(image.<span class="hljs-property">HdrMetadataKey</span>.<span class="hljs-property">HDR_STATIC_METADATA</span>, staticMetadata).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting pixelMap metadata.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to set the metadata.code "</span>, error);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1889px;">     <h2 id="settransferdetached12" device-type="phone,2in1,tablet,wearable,tv">setTransferDetached<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="settransferdetached12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setTransferDetached(detached: boolean): void</p>     <p>pixelmap在跨线程传输时，断开原线程的引用。适用于需立即释放pixelmap的场景。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">detached</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示断开原线程引用，false表示不断开原线程引用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.60.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { taskpool } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-comment">// 子线程方法。</span></li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadPixelMap</span>(<span class="hljs-params">rawFileDescriptor: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">PixelMap</span>&gt; {</li><li>  <span class="hljs-comment">// 创建imageSource。</span></li><li>  <span class="hljs-keyword">const</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(rawFileDescriptor);</li><li>  <span class="hljs-comment">// 创建pixelMap。</span></li><li>  <span class="hljs-keyword">const</span> pixelMap = imageSource.<span class="hljs-title function_">createPixelMapSync</span>();</li><li>  <span class="hljs-comment">// 释放imageSource。</span></li><li>  imageSource.<span class="hljs-title function_">release</span>();</li><li>  <span class="hljs-comment">// 使pixelMap在跨线程传输完成后，断开原线程的引用。</span></li><li>  pixelMap.<span class="hljs-title function_">setTransferDetached</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-comment">// 返回pixelMap给主线程。</span></li><li>  <span class="hljs-keyword">return</span> pixelMap;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Demo</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">pixelMap</span>: <span class="hljs-title class_">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-comment">// 主线程方法。</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">loadImageFromThread</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>    <span class="hljs-keyword">const</span> resourceMgr = context.<span class="hljs-property">resourceManager</span>;</li><li>    <span class="hljs-comment">// 此处‘example.jpg’仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>    resourceMgr.<span class="hljs-title function_">getRawFd</span>(<span class="hljs-string">'example.jpg'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">rawFileDescriptor</span> =&gt;</span> {</li><li>      taskpool.<span class="hljs-title function_">execute</span>(loadPixelMap, rawFileDescriptor).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">pixelMap</span> =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (pixelMap) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span> = pixelMap <span class="hljs-keyword">as</span> <span class="hljs-title class_">PixelMap</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Succeeded in creating pixelMap.'</span>);</li><li>          <span class="hljs-comment">// 主线程释放pixelMap。由于子线程返回pixelMap时已调用setTransferDetached，所以此处能够立即释放pixelMap。</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span>.<span class="hljs-title function_">release</span>();</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to create pixelMap.'</span>);</li><li>        }</li><li>      });</li><li>    });</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2136px;">     <h2 id="marshalling10" device-type="phone,2in1,tablet,wearable,tv">marshalling<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="marshalling10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>marshalling(sequence: rpc.MessageSequence): void</p>     <p>将PixelMap序列化后写入MessageSequence。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sequence</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-rpc#messagesequence9">rpc.MessageSequence</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">新创建的MessageSequence。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980097</td>         <td class="cellrowborder" width="50%">IPC error. Possible cause: 1.IPC communication failed. 2. Image upload exception. 3. Decode process exception. 4. Insufficient memory.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rpc } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IPCKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MySequence</span> <span class="hljs-keyword">implements</span> rpc.<span class="hljs-property">Parcelable</span> {</li><li>  <span class="hljs-attr">pixel_map</span>: image.<span class="hljs-property">PixelMap</span>;</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">conPixelMap : image.PixelMap</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = conPixelMap;</li><li>  }</li><li>  <span class="hljs-title function_">marshalling</span>(<span class="hljs-params">messageSequence : rpc.MessageSequence</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span>.<span class="hljs-title function_">marshalling</span>(messageSequence);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'marshalling'</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>  <span class="hljs-title function_">unmarshalling</span>(<span class="hljs-params">messageSequence : rpc.MessageSequence</span>) {</li><li>    image.<span class="hljs-title function_">createPixelMap</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>), {<span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>:<span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span>}}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelParcel: image.PixelMap</span>) =&gt;</span> {</li><li>      pixelParcel.<span class="hljs-title function_">unmarshalling</span>(messageSequence).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span>) =&gt; {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = pixelMap;</li><li>        pixelMap.<span class="hljs-title function_">getImageInfo</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">imageInfo: image.ImageInfo</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`unmarshalling information h: <span class="hljs-subst">${imageInfo.size.height}</span> w: <span class="hljs-subst">${imageInfo.size.width}</span>`</span>);</li><li>        })</li><li>      })</li><li>    });</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>}</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Marshalling</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = <span class="hljs-number">0x80</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = {</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">BGRA_8888</span>,</li><li>    <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> },</li><li>    <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">UNPREMUL</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">await</span> image.<span class="hljs-title function_">createPixelMap</span>(color, opts).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">srcPixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>    pixelMap = srcPixelMap;</li><li>  })</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-comment">// 序列化。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">parcelable</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: rpc.<span class="hljs-property">MessageSequence</span> = rpc.<span class="hljs-property">MessageSequence</span>.<span class="hljs-title function_">create</span>();</li><li>    data.<span class="hljs-title function_">writeParcelable</span>(parcelable);</li><li>
</li><li>    <span class="hljs-comment">// 反序列化rpc获取到data。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">ret</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    data.<span class="hljs-title function_">readParcelable</span>(ret);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2410px;">     <h2 id="unmarshalling10" device-type="phone,2in1,tablet,wearable,tv">unmarshalling<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unmarshalling10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unmarshalling(sequence: rpc.MessageSequence): Promise&lt;PixelMap&gt;</p>     <p>从MessageSequence中获取PixelMap，如需使用同步方式创建PixelMap可使用：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreatepixelmapfromparcel11">createPixelMapFromParcel</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sequence</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-rpc#messagesequence9">rpc.MessageSequence</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">保存有PixelMap信息的MessageSequence。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980097</td>         <td class="cellrowborder" width="50%">IPC error. Possible cause: 1.IPC communication failed. 2. Image upload exception. 3. Decode process exception. 4. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rpc } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IPCKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MySequence</span> <span class="hljs-keyword">implements</span> rpc.<span class="hljs-property">Parcelable</span> {</li><li>  <span class="hljs-attr">pixel_map</span>: image.<span class="hljs-property">PixelMap</span>;</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">conPixelMap: image.PixelMap</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = conPixelMap;</li><li>  }</li><li>  <span class="hljs-title function_">marshalling</span>(<span class="hljs-params">messageSequence: rpc.MessageSequence</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span>.<span class="hljs-title function_">marshalling</span>(messageSequence);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'marshalling'</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>  <span class="hljs-title function_">unmarshalling</span>(<span class="hljs-params">messageSequence: rpc.MessageSequence</span>) {</li><li>    image.<span class="hljs-title function_">createPixelMap</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>), {<span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>:<span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span>}}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelParcel : image.PixelMap</span>) =&gt;</span> {</li><li>      pixelParcel.<span class="hljs-title function_">unmarshalling</span>(messageSequence).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (pixelMap : image.<span class="hljs-property">PixelMap</span>) =&gt; {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = pixelMap;</li><li>        pixelMap.<span class="hljs-title function_">getImageInfo</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">imageInfo : image.ImageInfo</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`unmarshalling information h: <span class="hljs-subst">${imageInfo.size.height}</span> w: <span class="hljs-subst">${imageInfo.size.width}</span>`</span>);</li><li>        })</li><li>      })</li><li>    });</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>}</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Unmarshalling</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = <span class="hljs-number">0x80</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = {</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">BGRA_8888</span>,</li><li>    <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> },</li><li>    <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">UNPREMUL</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">await</span> image.<span class="hljs-title function_">createPixelMap</span>(color, opts).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">srcPixelMap : image.PixelMap</span>) =&gt;</span> {</li><li>    pixelMap = srcPixelMap;</li><li>  })</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-comment">// 序列化。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">parcelable</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    <span class="hljs-keyword">let</span> data : rpc.<span class="hljs-property">MessageSequence</span> = rpc.<span class="hljs-property">MessageSequence</span>.<span class="hljs-title function_">create</span>();</li><li>    data.<span class="hljs-title function_">writeParcelable</span>(parcelable);</li><li>
</li><li>    <span class="hljs-comment">// 反序列化rpc获取到data。</span></li><li>    <span class="hljs-keyword">let</span> ret : <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    data.<span class="hljs-title function_">readParcelable</span>(ret);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1134px;">     <h2 id="release7" device-type="phone,2in1,tablet,wearable,tv">release<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(): Promise&lt;void&gt;</p>     <p>释放PixelMap对象。释放后，任何访问该对象内部数据的方法调用将会失败。使用Promise异步回调。</p>     <p>ArkTS有内存回收机制，PixelMap对象不调用release方法，内存最终也会由系统统一释放。但图片使用的内存往往较大，为尽快释放内存，建议应用在使用完成后主动调用release方法提前释放内存。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>释放指的是ArkTS对象释放与之关联的native对象的管理权。仅当所有管理该native对象的ArkTS对象都被释放时，native对象占用的内存才会被回收。</p>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Release</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">await</span> pixelMap.<span class="hljs-title function_">release</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing pixelmap object.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to release pixelmap object. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1258px;">     <h2 id="release7-1" device-type="phone,2in1,tablet,wearable,tv">release<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release7-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(callback: AsyncCallback&lt;void&gt;): void</p>     <p>释放PixelMap对象。释放后，任何访问该对象内部数据的方法调用将会失败。使用callback形式返回释放结果。</p>     <p>ArkTS有内存回收机制，PixelMap对象不调用release方法，内存最终也会由系统统一释放。但图片使用的内存往往较大，为尽快释放内存，建议应用在使用完成后主动调用release方法提前释放内存。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>释放指的是ArkTS对象释放与之关联的native对象的管理权。仅当所有管理该native对象的ArkTS对象都被释放时，native对象占用的内存才会被回收。</p>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.64.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当对PixelMap对象释放成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Release</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">release</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to release pixelmap object. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing pixelmap object.'</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2012px;">     <h2 id="convertpixelformat12" device-type="phone,2in1,tablet,wearable,tv">convertPixelFormat<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="convertpixelformat12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>convertPixelFormat(targetPixelFormat: PixelMapFormat): Promise&lt;void&gt;</p>     <p>YUV和RGB类型互转，目前仅支持NV12/NV21与RGB888/RGBA8888/RGB565/BGRA8888/RGBAF16互转，YCRCB_P010/YCBCR_P010与RGBA1010102互转。</p>     <p>从API18开始，可用于ASTC_4x4类型转为RGBA_8888类型，目前仅支持ASTC_4x4转为RGBA_8888。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>仅在ASTC_4x4格式的图像需要进行像素访问时，建议调用此接口将ASTC_4x4类型转为RGBA_8888类型。由于使用ASTC_4x4反解为RGBA_8888时延较高，其余情况下不推荐使用。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.65.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">targetPixelFormat</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#pixelmapformat7">PixelMapFormat</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标像素格式，用于YUV和RGB类型互转，或者ASTC_4x4类型转为RGBA_8888类型。目前仅支持NV12/NV21与RGB888/RGBA8888/RGB565/BGRA8888/RGBAF16互转，YCRCB_P010/YCBCR_P010与RGBA1010102互转，ASTC_4x4转为RGBA_8888。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.65.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.65.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">The image source data is incomplete.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid input parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980178</td>         <td class="cellrowborder" width="50%">Failed to create the pixelmap.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980274</td>         <td class="cellrowborder" width="50%">The conversion failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980276</td>         <td class="cellrowborder" width="50%">The type to be converted is an unsupported target pixel format</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ConvertPixelFormat</span>(<span class="hljs-params">pixelMap: image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-comment">// 设置目标像素格式为NV12。</span></li><li>    <span class="hljs-keyword">let</span> targetPixelFormat = image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">NV12</span>;</li><li>    pixelMap.<span class="hljs-title function_">convertPixelFormat</span>(targetPixelFormat).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-comment">// pixelMap转换成NV12格式成功。</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'PixelMapFormat convert Succeeded'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-comment">// pixelMap转换成NV12格式失败。</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`PixelMapFormat convert Failed. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1375px;">     <h2 id="setmemorynamesync13" device-type="phone,2in1,tablet,wearable,tv">setMemoryNameSync<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setmemorynamesync13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setMemoryNameSync(name: string): void</p>     <p>设置PixelMap内存标识符。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">pixelmap内存标识符，只允许DMA和ASHMEM内存形式的pixelmap设置。DMA内存设置名字长度取值范围为[1, 255]，ASHMEM内存设置名字长度取值范围为[1, 244]，单位字节。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.66.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.The length of the input parameter is too long. 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource unavailable.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980286</td>         <td class="cellrowborder" width="50%">Memory format not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rfs-c106="" class="highlight-div"><div _ngcontent-rfs-c106="" class="highlight-div-header"><div _ngcontent-rfs-c106="" class="highlight-div-header-left"><div _ngcontent-rfs-c106="" class="handle-button expand-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rfs-c106="" class="highlight-div-header-right"><div _ngcontent-rfs-c106="" class="handle-button ai-button"></div><div _ngcontent-rfs-c106="" class="handle-button line-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rfs-c106="" class="handle-button theme-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rfs-c106="" class="handle-button copy-button"><div _ngcontent-rfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rfs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">SetMemoryNameSync</span>(<span class="hljs-params">pixelMap:image.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      pixelMap.<span class="hljs-title function_">setMemoryNameSync</span>(<span class="hljs-string">"PixelMapName Test"</span>);</li><li>    } <span class="hljs-keyword">catch</span>(e) {</li><li>      <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`setMemoryNameSync error. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>