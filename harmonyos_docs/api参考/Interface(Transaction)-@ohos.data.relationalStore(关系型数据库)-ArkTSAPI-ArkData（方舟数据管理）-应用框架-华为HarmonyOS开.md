<h1 _ngcontent-nuk-c119="" class="doc-title ng-star-inserted" title="Interface (Transaction)"> Interface (Transaction) </h1>

<div _ngcontent-nuk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>提供以事务方式管理数据库的方法。事务对象是通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#createtransaction14">createTransaction</a>接口创建的，不同事务对象之间的操作是隔离的，不同类型事务的区别见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-e#transactiontype14">TransactionType</a> 。</p>    <p>当前关系型数据库同一时刻仅支持一个写事务，所以如果当前<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore">RdbStore</a>存在写事务未释放，创建IMMEDIATE或EXCLUSIVE事务会返回14800024错误码。如果是创建的DEFERRED事务，则可能在首次使用DEFERRED事务调用写操作时返回14800024错误码。通过IMMEDIATE或EXCLUSIVE创建写事务或者DEFERRED事务升级到写事务之后，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore">RdbStore</a>的写操作也会返回14800024错误码。</p>    <p>当事务并发量较高且写事务持续时间较长时，返回14800024错误码的次数可能会变多，开发者可以通过减少事务占用时长减少14800024出现的次数，也可以通过重试的方式处理14800024错误码。</p>    <p>在使用以下API前，请先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#createtransaction14">createTransaction</a>方法获取Transaction实例，再通过此实例调用对应方法。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>        <p>本模块首批接口从API version 9开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p></li>       <li>        <p>本Interface首批接口从API version 14开始支持。</p></li>      </ul>     </div></div></div>    <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>    <p><strong>示例：</strong></p>    <p>示例代码中this.context定义见Stage模型的应用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p>    <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">store</span>: relationalStore.<span class="hljs-property">RdbStore</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">STORE_CONFIG</span>: relationalStore.<span class="hljs-property">StoreConfig</span> = {</li><li>      <span class="hljs-attr">name</span>: <span class="hljs-string">'RdbTest.db'</span>,</li><li>      <span class="hljs-attr">securityLevel</span>: relationalStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>    };</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> rdbStore = <span class="hljs-keyword">await</span> relationalStore.<span class="hljs-title function_">getRdbStore</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-variable constant_">STORE_CONFIG</span>);</li><li>      store = rdbStore;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Get RdbStore successfully.'</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Get RdbStore failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">executeSql</span>(<span class="hljs-string">'CREATE TABLE IF NOT EXISTS EMPLOYEE (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT NOT NULL, AGE INTEGER, SALARY REAL, CODES BLOB, IDENTITY UNLIMITED INT, ASSETDATA ASSET, ASSETSDATA ASSETS, FLOATARRAY floatvector(128))'</span>);</li><li>      store.<span class="hljs-title function_">createTransaction</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">transaction</span>: relationalStore.<span class="hljs-property">Transaction</span>) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`createTransaction success`</span>);</li><li>        <span class="hljs-comment">// 成功获取到事务对象后执行后续操作</span></li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { relationalStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="commit14" device-type="phone,2in1,tablet,wearable,tv">commit<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="commit14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>commit(): Promise&lt;void&gt;</p>     <p>提交已执行的SQL语句，使用Promise异步回调。如果是使用异步接口执行sql语句，请确保异步接口执行完成之后再调用commit接口，否则可能会丢失SQL操作。调用commit接口之后，该Transaction对象及创建的ResultSet对象都将被关闭。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">execute</span>(<span class="hljs-string">'CREATE TABLE IF NOT EXISTS test (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, age INTEGER, salary REAL)'</span>);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`execute sql failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="rollback14" device-type="phone,2in1,tablet,wearable,tv">rollback<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rollback14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rollback(): Promise&lt;void&gt;</p>     <p>回滚已经执行的SQL语句，使用Promise异步回调。调用rollback接口之后，该Transaction对象及创建的ResultSet对象都会被关闭。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">execute</span>(<span class="hljs-string">'DELETE FROM TEST WHERE age = ? OR age = ?'</span>, [<span class="hljs-string">'18'</span>, <span class="hljs-string">'20'</span>]);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`execute sql failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="insert14" device-type="phone,2in1,tablet,wearable,tv">insert<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="insert14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>insert(table: string, values: ValuesBucket, conflict?: ConflictResolution): Promise&lt;number&gt;</p>     <p>向目标表中插入一行数据，使用Promise异步回调。由于共享内存的大小限制为2MB，因此单条数据的大小也必须严格小于2MB。如果单条数据超过此限制，在后续通过RdbStore的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#query">query</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#querysql">querySql</a>接口获取ResultSet后，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset#getvalue12">getValue</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset#getstring">getString</a>等get方法时将无法成功获取数据，并可能导致操作失败或抛出异常。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">table</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的目标表名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">values</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuesbucket">ValuesBucket</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要插入到表中的数据行。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">conflict</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-e#conflictresolution10">ConflictResolution</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定冲突解决模式。默认值是relationalStore.ConflictResolution.ON_CONFLICT_NONE。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。如果操作成功，返回行ID；否则返回-1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket1</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Lisa'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">18</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">100.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])</li><li>};</li><li>
</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> rowId = <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">insert</span>(<span class="hljs-string">'EMPLOYEE'</span>, valueBucket1, relationalStore.<span class="hljs-property">ConflictResolution</span>.<span class="hljs-property">ON_CONFLICT_REPLACE</span>);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Insert is successful, rowId = <span class="hljs-subst">${rowId}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Insert is failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="insertsync14" device-type="phone,2in1,tablet,wearable,tv">insertSync<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="insertsync14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>insertSync(table: string, values: ValuesBucket | sendableRelationalStore.ValuesBucket, conflict?: ConflictResolution): number</p>     <p>向目标表中插入一行数据。由于共享内存的大小限制为2MB，因此单条数据的大小也必须严格小于2MB。如果单条数据超过此限制，在后续通过RdbStore的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#query">query</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#querysql">querySql</a>接口获取ResultSet后，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset#getvalue12">getValue</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset#getstring">getString</a>等get方法时将无法成功获取数据，并可能导致操作失败或抛出异常。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">table</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的目标表名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">values</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuesbucket">ValuesBucket</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-sendablerelationalstore#valuesbucket">sendableRelationalStore.ValuesBucket</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要插入到表中的数据行。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">conflict</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-e#conflictresolution10">ConflictResolution</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定冲突解决模式。默认值是relationalStore.ConflictResolution.ON_CONFLICT_NONE。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">如果操作成功，返回行ID；否则返回-1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> value5 = <span class="hljs-string">'Lisa'</span>;</li><li><span class="hljs-keyword">let</span> value6 = <span class="hljs-number">18</span>;</li><li><span class="hljs-keyword">let</span> value7 = <span class="hljs-number">100.5</span>;</li><li><span class="hljs-keyword">let</span> value8 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]);</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket2</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: value5,</li><li>  <span class="hljs-attr">AGE</span>: value6,</li><li>  <span class="hljs-attr">SALARY</span>: value7,</li><li>  <span class="hljs-attr">CODES</span>: value8</li><li>};</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">rowId</span>: <span class="hljs-built_in">number</span> = transaction.<span class="hljs-title function_">insertSync</span>(</li><li>        <span class="hljs-string">'EMPLOYEE'</span>,</li><li>        valueBucket2,</li><li>        relationalStore.<span class="hljs-property">ConflictResolution</span>.<span class="hljs-property">ON_CONFLICT_REPLACE</span></li><li>      );</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Insert is successful, rowId = <span class="hljs-subst">${rowId}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Insert is failed, code is <span class="hljs-subst">${e.code}</span>,message is <span class="hljs-subst">${e.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="batchinsert14" device-type="phone,2in1,tablet,wearable,tv">batchInsert<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="batchinsert14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>batchInsert(table: string, values: Array&lt;ValuesBucket&gt;): Promise&lt;number&gt;</p>     <p>向目标表中插入一组数据，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">table</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的目标表名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">values</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuesbucket">ValuesBucket</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要插入到表中的一组数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。如果操作成功，返回插入的数据个数，否则返回-1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket3</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Lisa'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">18</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">100.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])</li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket4</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Jack'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">19</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">101.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>])</li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket5</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Tom'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">20</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">102.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>])</li><li>};</li><li>
</li><li><span class="hljs-keyword">let</span> valueBuckets = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(valueBucket3, valueBucket4, valueBucket5);</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> insertNum = <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">batchInsert</span>(<span class="hljs-string">'EMPLOYEE'</span>, valueBuckets);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`batchInsert is successful, the number of values that were inserted = <span class="hljs-subst">${insertNum}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`batchInsert is failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="batchinsertsync14" device-type="phone,2in1,tablet,wearable,tv">batchInsertSync<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="batchinsertsync14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>batchInsertSync(table: string, values: Array&lt;ValuesBucket&gt;): number</p>     <p>向目标表中插入一组数据。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">table</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的目标表名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">values</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuesbucket">ValuesBucket</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要插入到表中的一组数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">如果操作成功，返回插入的数据个数，否则返回-1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket6</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Lisa'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">18</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">100.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])</li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket7</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Jack'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">19</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">101.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>])</li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket8</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Tom'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">20</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">102.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>])</li><li>};</li><li>
</li><li><span class="hljs-keyword">let</span> valueBuckets2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(valueBucket6, valueBucket7, valueBucket8);</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">insertNum</span>: <span class="hljs-built_in">number</span> = (transaction <span class="hljs-keyword">as</span> relationalStore.<span class="hljs-property">Transaction</span>).<span class="hljs-title function_">batchInsertSync</span>(<span class="hljs-string">'EMPLOYEE'</span>, valueBuckets2);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`batchInsert is successful, the number of values that were inserted = <span class="hljs-subst">${insertNum}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`batchInsert is failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="batchinsertwithconflictresolution18" device-type="phone,2in1,tablet,wearable,tv">batchInsertWithConflictResolution<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="batchinsertwithconflictresolution18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>batchInsertWithConflictResolution(table: string, values: Array&lt;ValuesBucket&gt;, conflict: ConflictResolution): Promise&lt;number&gt;</p>     <p>向目标表中插入一组数据，可以通过conflict参数指定冲突解决模式<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-e#conflictresolution10">ConflictResolution</a>，使用Promise异步回调。</p>     <p>单次插入参数的最大数量限制为32766，超出上限会返回14800000错误码。参数数量计算方式为插入数据条数乘以插入数据的所有字段的并集大小。</p>     <p>例如：插入数据的所有字段的并集大小为10，则最多可以插入3276条数据（3276*10=32760）。</p>     <p>请确保在调用接口时遵守此限制，以避免因参数数量过多而导致错误。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">table</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的目标表名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">values</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuesbucket">ValuesBucket</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要插入到表中的一组数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">conflict</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-e#conflictresolution10">ConflictResolution</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定冲突解决模式。如果是ON_CONFLICT_ROLLBACK模式，当发生冲突时会回滚整个事务。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。如果操作成功，返回插入的数据个数，否则返回-1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.14.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.14.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800022</td>         <td class="cellrowborder" width="50%">SQLite: Callback routine requested an abort.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800032</td>         <td class="cellrowborder" width="50%">SQLite: Abort due to constraint violation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800034</td>         <td class="cellrowborder" width="50%">SQLite: Library used incorrectly.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket9</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Lisa'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">18</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">100.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])</li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucketA</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Jack'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">19</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">101.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>])</li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucketB</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Tom'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">20</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">102.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>])</li><li>};</li><li>
</li><li><span class="hljs-keyword">let</span> valueBuckets3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(valueBucket9, valueBucketA, valueBucketB);</li><li>
</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> insertNum = <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">batchInsertWithConflictResolution</span>(</li><li>        <span class="hljs-string">'EMPLOYEE'</span>,</li><li>        valueBuckets3,</li><li>        relationalStore.<span class="hljs-property">ConflictResolution</span>.<span class="hljs-property">ON_CONFLICT_REPLACE</span></li><li>      );</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`batchInsert is successful, the number of values that were inserted = <span class="hljs-subst">${insertNum}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`batchInsert is failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="batchinsertwithconflictresolutionsync18" device-type="phone,2in1,tablet,wearable,tv">batchInsertWithConflictResolutionSync<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="batchinsertwithconflictresolutionsync18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>batchInsertWithConflictResolutionSync(table: string, values: Array&lt;ValuesBucket&gt;, conflict: ConflictResolution): number</p>     <p>向目标表中插入一组数据，可以通过conflict参数指定冲突解决模式<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-e#conflictresolution10">ConflictResolution</a>。</p>     <p>单次插入参数的最大数量限制为32766，超出上限会返回14800000错误码。参数数量计算方式为插入数据条数乘以插入数据的所有字段的并集大小。</p>     <p>例如：插入数据的所有字段的并集大小为10，则最多可以插入3276条数据（3276*10=32760）。</p>     <p>请确保在调用接口时遵守此限制，以避免因参数数量过多而导致错误。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">table</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的目标表名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">values</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuesbucket">ValuesBucket</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要插入到表中的一组数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">conflict</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-e#conflictresolution10">ConflictResolution</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定冲突解决模式。如果是ON_CONFLICT_ROLLBACK模式，当发生冲突时会回滚整个事务。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">如果操作成功，返回插入的数据个数，否则返回-1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.14.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.14.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800022</td>         <td class="cellrowborder" width="50%">SQLite: Callback routine requested an abort.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800032</td>         <td class="cellrowborder" width="50%">SQLite: Abort due to constraint violation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800034</td>         <td class="cellrowborder" width="50%">SQLite: Library used incorrectly.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucketC</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Lisa'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">18</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">100.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])</li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucketD</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Jack'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">19</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">101.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>])</li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucketE</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Tom'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">20</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">102.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>])</li><li>};</li><li>
</li><li><span class="hljs-keyword">let</span> valueBuckets4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(valueBucketC, valueBucketD, valueBucketE);</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> insertNum = transaction.<span class="hljs-title function_">batchInsertWithConflictResolutionSync</span>(</li><li>        <span class="hljs-string">'EMPLOYEE'</span>,</li><li>        valueBuckets4,</li><li>        relationalStore.<span class="hljs-property">ConflictResolution</span>.<span class="hljs-property">ON_CONFLICT_REPLACE</span></li><li>      );</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`batchInsert is successful, the number of values that were inserted = <span class="hljs-subst">${insertNum}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`batchInsert is failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="update14" device-type="phone,2in1,tablet,wearable,tv">update<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="update14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>update(values: ValuesBucket, predicates: RdbPredicates, conflict?: ConflictResolution): Promise&lt;number&gt;</p>     <p>根据RdbPredicates的指定实例对象更新数据库中的数据，使用Promise异步回调。由于共享内存的大小限制为2MB，因此单条数据的大小也必须严格小于2MB。如果单条数据超过此限制，在后续通过RdbStore的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#query">query</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#querysql">querySql</a>接口获取ResultSet后，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset#getvalue12">getValue</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset#getstring">getString</a>等get方法时将无法成功获取数据，并可能导致操作失败或抛出异常。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">values</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuesbucket">ValuesBucket</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">values指示数据库中要更新的数据行。键值对与数据库表的列名相关联。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">predicates</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbpredicates">RdbPredicates</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">RdbPredicates的实例对象指定的更新条件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">conflict</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-e#conflictresolution10">ConflictResolution</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定冲突解决模式。默认值是relationalStore.ConflictResolution.ON_CONFLICT_NONE。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">指定的Promise回调方法。返回受影响的行数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucketF</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Rose'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">22</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">200.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])</li><li>};</li><li><span class="hljs-keyword">let</span> predicates = <span class="hljs-keyword">new</span> relationalStore.<span class="hljs-title class_">RdbPredicates</span>(<span class="hljs-string">'EMPLOYEE'</span>);</li><li>predicates.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'NAME'</span>, <span class="hljs-string">'Lisa'</span>);</li><li>
</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> rows = <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">update</span>(valueBucketF, predicates, relationalStore.<span class="hljs-property">ConflictResolution</span>.<span class="hljs-property">ON_CONFLICT_REPLACE</span>);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Updated row count: <span class="hljs-subst">${rows}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Updated failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="updatesync14" device-type="phone,2in1,tablet,wearable,tv">updateSync<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="updatesync14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>updateSync(values: ValuesBucket, predicates: RdbPredicates, conflict?: ConflictResolution): number</p>     <p>根据RdbPredicates的指定实例对象更新数据库中的数据。由于共享内存的大小限制为2MB，因此单条数据的大小也必须严格小于2MB。如果单条数据超过此限制，在后续通过RdbStore的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#query">query</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#querysql">querySql</a>接口获取ResultSet后，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset#getvalue12">getValue</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset#getstring">getString</a>等get方法时将无法成功获取数据，并可能导致操作失败或抛出异常。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">values</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuesbucket">ValuesBucket</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">values指示数据库中要更新的数据行。键值对与数据库表的列名相关联。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">predicates</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbpredicates">RdbPredicates</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">RdbPredicates的实例对象指定的更新条件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">conflict</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-e#conflictresolution10">ConflictResolution</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定冲突解决模式。默认值是relationalStore.ConflictResolution.ON_CONFLICT_NONE。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">返回受影响的行数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucketG</span>: relationalStore.<span class="hljs-property">ValuesBucket</span> = {</li><li>  <span class="hljs-attr">NAME</span>: <span class="hljs-string">'Rose'</span>,</li><li>  <span class="hljs-attr">AGE</span>: <span class="hljs-number">22</span>,</li><li>  <span class="hljs-attr">SALARY</span>: <span class="hljs-number">200.5</span>,</li><li>  <span class="hljs-attr">CODES</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])</li><li>};</li><li><span class="hljs-keyword">let</span> predicates1 = <span class="hljs-keyword">new</span> relationalStore.<span class="hljs-title class_">RdbPredicates</span>(<span class="hljs-string">'EMPLOYEE'</span>);</li><li>predicates1.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'NAME'</span>, <span class="hljs-string">'Lisa'</span>);</li><li>
</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> rows = transaction.<span class="hljs-title function_">updateSync</span>(valueBucketG, predicates1, relationalStore.<span class="hljs-property">ConflictResolution</span>.<span class="hljs-property">ON_CONFLICT_REPLACE</span>);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Updated row count: <span class="hljs-subst">${rows}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Updated failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="delete14" device-type="phone,2in1,tablet,wearable,tv">delete<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(predicates: RdbPredicates):Promise&lt;number&gt;</p>     <p>根据RdbPredicates的指定实例对象从数据库中删除数据，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">predicates</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbpredicates">RdbPredicates</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">RdbPredicates的实例对象指定的删除条件。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回受影响的行数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> predicates2 = <span class="hljs-keyword">new</span> relationalStore.<span class="hljs-title class_">RdbPredicates</span>(<span class="hljs-string">'EMPLOYEE'</span>);</li><li>predicates2.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'NAME'</span>, <span class="hljs-string">'Lisa'</span>);</li><li>
</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> rows = <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">delete</span>(predicates2);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Delete rows: <span class="hljs-subst">${rows}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Delete failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="deletesync14" device-type="phone,2in1,tablet,wearable,tv">deleteSync<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletesync14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteSync(predicates: RdbPredicates): number</p>     <p>根据RdbPredicates的指定实例对象从数据库中删除数据。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">predicates</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbpredicates">RdbPredicates</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">RdbPredicates的实例对象指定的删除条件。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">返回受影响的行数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> predicates3 = <span class="hljs-keyword">new</span> relationalStore.<span class="hljs-title class_">RdbPredicates</span>(<span class="hljs-string">'EMPLOYEE'</span>);</li><li>predicates3.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'NAME'</span>, <span class="hljs-string">'Lisa'</span>);</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> rows = transaction.<span class="hljs-title function_">deleteSync</span>(predicates3);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Delete rows: <span class="hljs-subst">${rows}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Delete failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="query14" device-type="phone,2in1,tablet,wearable,tv">query<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="query14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>query(predicates: RdbPredicates, columns?: Array&lt;string&gt;): Promise&lt;ResultSet&gt;</p>     <p>根据指定条件查询数据库中的数据，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">predicates</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbpredicates">RdbPredicates</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">RdbPredicates的实例对象指定的查询条件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">columns</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">表示要查询的列。如果值为空，则查询应用于所有列。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset">ResultSet</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。如果操作成功，则返回ResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> predicates4 = <span class="hljs-keyword">new</span> relationalStore.<span class="hljs-title class_">RdbPredicates</span>(<span class="hljs-string">'EMPLOYEE'</span>);</li><li>predicates4.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'NAME'</span>, <span class="hljs-string">'Rose'</span>);</li><li>
</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> resultSet = <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">query</span>(predicates4, [<span class="hljs-string">'ID'</span>, <span class="hljs-string">'NAME'</span>, <span class="hljs-string">'AGE'</span>, <span class="hljs-string">'SALARY'</span>, <span class="hljs-string">'CODES'</span>]);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ResultSet column names: <span class="hljs-subst">${resultSet.columnNames}</span>, column count: <span class="hljs-subst">${resultSet.columnCount}</span>`</span>);</li><li>      <span class="hljs-comment">// resultSet是一个数据集合的游标，默认指向第-1个记录，有效的数据从0开始。</span></li><li>      <span class="hljs-keyword">while</span> (resultSet.<span class="hljs-title function_">goToNextRow</span>()) {</li><li>        <span class="hljs-keyword">const</span> id = resultSet.<span class="hljs-title function_">getLong</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'ID'</span>));</li><li>        <span class="hljs-keyword">const</span> name = resultSet.<span class="hljs-title function_">getString</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'NAME'</span>));</li><li>        <span class="hljs-keyword">const</span> age = resultSet.<span class="hljs-title function_">getLong</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'AGE'</span>));</li><li>        <span class="hljs-keyword">const</span> salary = resultSet.<span class="hljs-title function_">getDouble</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'SALARY'</span>));</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`id=<span class="hljs-subst">${id}</span>, name=<span class="hljs-subst">${name}</span>, age=<span class="hljs-subst">${age}</span>, salary=<span class="hljs-subst">${salary}</span>`</span>);</li><li>      }</li><li>      <span class="hljs-comment">// 释放数据集的内存，若不释放可能会引起fd泄露与内存泄露</span></li><li>      resultSet.<span class="hljs-title function_">close</span>();</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Query failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="querysync14" device-type="phone,2in1,tablet,wearable,tv">querySync<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="querysync14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>querySync(predicates: RdbPredicates, columns?: Array&lt;string&gt;): ResultSet</p>     <p>根据指定条件查询数据库中的数据。对query同步接口获得的resultSet进行操作时，若逻辑复杂且循环次数过多，可能造成freeze问题，建议将此步骤放到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-taskpool">taskpool</a>线程中执行。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">predicates</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbpredicates">RdbPredicates</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">RdbPredicates的实例对象指定的查询条件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">columns</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">表示要查询的列。如果值为空，则查询应用于所有列。默认值为空。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset">ResultSet</a></td>         <td class="cellrowborder" width="50%">如果操作成功，则返回ResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> predicates5 = <span class="hljs-keyword">new</span> relationalStore.<span class="hljs-title class_">RdbPredicates</span>(<span class="hljs-string">'EMPLOYEE'</span>);</li><li>predicates5.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">'NAME'</span>, <span class="hljs-string">'Rose'</span>);</li><li>
</li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> resultSet = transaction.<span class="hljs-title function_">querySync</span>(predicates5, [<span class="hljs-string">'ID'</span>, <span class="hljs-string">'NAME'</span>, <span class="hljs-string">'AGE'</span>, <span class="hljs-string">'SALARY'</span>, <span class="hljs-string">'CODES'</span>]);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ResultSet column names: <span class="hljs-subst">${resultSet.columnNames}</span>, column count: <span class="hljs-subst">${resultSet.columnCount}</span>`</span>);</li><li>      <span class="hljs-comment">// resultSet是一个数据集合的游标，默认指向第-1个记录，有效的数据从0开始。</span></li><li>      <span class="hljs-keyword">while</span> (resultSet.<span class="hljs-title function_">goToNextRow</span>()) {</li><li>        <span class="hljs-keyword">const</span> id = resultSet.<span class="hljs-title function_">getLong</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'ID'</span>));</li><li>        <span class="hljs-keyword">const</span> name = resultSet.<span class="hljs-title function_">getString</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'NAME'</span>));</li><li>        <span class="hljs-keyword">const</span> age = resultSet.<span class="hljs-title function_">getLong</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'AGE'</span>));</li><li>        <span class="hljs-keyword">const</span> salary = resultSet.<span class="hljs-title function_">getDouble</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'SALARY'</span>));</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`id=<span class="hljs-subst">${id}</span>, name=<span class="hljs-subst">${name}</span>, age=<span class="hljs-subst">${age}</span>, salary=<span class="hljs-subst">${salary}</span>`</span>);</li><li>      }</li><li>      <span class="hljs-comment">// 释放数据集的内存，若不释放可能会引起fd泄露与内存泄露</span></li><li>      resultSet.<span class="hljs-title function_">close</span>();</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Query failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="querysql14" device-type="phone,2in1,tablet,wearable,tv">querySql<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="querysql14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>querySql(sql: string, args?: Array&lt;ValueType&gt;): Promise&lt;ResultSet&gt;</p>     <p>根据指定SQL语句查询数据库中的数据，SQL语句中的各种表达式和操作符之间的关系操作符号不超过1000个，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sql</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定要执行的SQL语句。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuetype">ValueType</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">SQL语句中参数的值。该值与sql参数语句中的占位符相对应。当sql参数语句完整时，该参数不填。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset">ResultSet</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。如果操作成功，则返回ResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> resultSet = <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">querySql</span>(<span class="hljs-string">"SELECT * FROM EMPLOYEE CROSS JOIN BOOK WHERE BOOK.NAME = 'sanguo'"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ResultSet column names: <span class="hljs-subst">${resultSet.columnNames}</span>, column count: <span class="hljs-subst">${resultSet.columnCount}</span>`</span>);</li><li>      <span class="hljs-comment">// resultSet是一个数据集合的游标，默认指向第-1个记录，有效的数据从0开始。</span></li><li>      <span class="hljs-keyword">while</span> (resultSet.<span class="hljs-title function_">goToNextRow</span>()) {</li><li>        <span class="hljs-keyword">const</span> id = resultSet.<span class="hljs-title function_">getLong</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'ID'</span>));</li><li>        <span class="hljs-keyword">const</span> name = resultSet.<span class="hljs-title function_">getString</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'NAME'</span>));</li><li>        <span class="hljs-keyword">const</span> age = resultSet.<span class="hljs-title function_">getLong</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'AGE'</span>));</li><li>        <span class="hljs-keyword">const</span> salary = resultSet.<span class="hljs-title function_">getDouble</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'SALARY'</span>));</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`id=<span class="hljs-subst">${id}</span>, name=<span class="hljs-subst">${name}</span>, age=<span class="hljs-subst">${age}</span>, salary=<span class="hljs-subst">${salary}</span>`</span>);</li><li>      }</li><li>      <span class="hljs-comment">// 释放数据集的内存，若不释放可能会引起fd泄露与内存泄露</span></li><li>      resultSet.<span class="hljs-title function_">close</span>();</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Query failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="querysqlsync14" device-type="phone,2in1,tablet,wearable,tv">querySqlSync<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="querysqlsync14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>querySqlSync(sql: string, args?: Array&lt;ValueType&gt;): ResultSet</p>     <p>根据指定SQL语句查询数据库中的数据，SQL语句中的各种表达式和操作符之间的关系操作符号不超过1000个。对query同步接口获得的resultSet进行操作时，若逻辑复杂且循环次数过多，可能造成freeze问题，建议将此步骤放到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-taskpool">taskpool</a>线程中执行。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sql</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定要执行的SQL语句。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuetype">ValueType</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">SQL语句中参数的值。该值与sql参数语句中的占位符相对应。当sql参数语句完整时，该参数不填。默认值为空。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset">ResultSet</a></td>         <td class="cellrowborder" width="50%">如果操作成功，则返回ResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> resultSet = transaction.<span class="hljs-title function_">querySqlSync</span>(<span class="hljs-string">"SELECT * FROM EMPLOYEE CROSS JOIN BOOK WHERE BOOK.NAME = 'sanguo'"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ResultSet column names: <span class="hljs-subst">${resultSet.columnNames}</span>, column count: <span class="hljs-subst">${resultSet.columnCount}</span>`</span>);</li><li>      <span class="hljs-comment">// resultSet是一个数据集合的游标，默认指向第-1个记录，有效的数据从0开始。</span></li><li>      <span class="hljs-keyword">while</span> (resultSet.<span class="hljs-title function_">goToNextRow</span>()) {</li><li>        <span class="hljs-keyword">const</span> id = resultSet.<span class="hljs-title function_">getLong</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'ID'</span>));</li><li>        <span class="hljs-keyword">const</span> name = resultSet.<span class="hljs-title function_">getString</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'NAME'</span>));</li><li>        <span class="hljs-keyword">const</span> age = resultSet.<span class="hljs-title function_">getLong</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'AGE'</span>));</li><li>        <span class="hljs-keyword">const</span> salary = resultSet.<span class="hljs-title function_">getDouble</span>(resultSet.<span class="hljs-title function_">getColumnIndex</span>(<span class="hljs-string">'SALARY'</span>));</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`id=<span class="hljs-subst">${id}</span>, name=<span class="hljs-subst">${name}</span>, age=<span class="hljs-subst">${age}</span>, salary=<span class="hljs-subst">${salary}</span>`</span>);</li><li>      }</li><li>      <span class="hljs-comment">// 释放数据集的内存，若不释放可能会引起fd泄露与内存泄露</span></li><li>      resultSet.<span class="hljs-title function_">close</span>();</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Query failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="execute14" device-type="phone,2in1,tablet,wearable,tv">execute<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="execute14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>execute(sql: string, args?: Array&lt;ValueType&gt;): Promise&lt;ValueType&gt;</p>     <p>执行包含指定参数的SQL语句，语句中的各种表达式和操作符之间的关系操作符号不超过1000个，返回值类型为ValueType，使用Promise异步回调。</p>     <p>该接口支持执行增删改操作，支持执行PRAGMA语法的sql，支持对表的操作（建表、删表、修改表），返回结果类型由执行具体sql的结果决定。</p>     <p>此接口不支持执行查询、附加数据库和事务操作，查询可以使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-transaction#querysql14">querySql</a>、<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-transaction#query14">query</a>接口代替、附加数据库可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#attach12">attach</a>接口代替。</p>     <p>不支持分号分隔的多条语句。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sql</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定要执行的SQL语句。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuetype">ValueType</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">SQL语句中参数的值。该值与sql参数语句中的占位符相对应。当sql参数语句完整时，该参数不填。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuetype">ValueType</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回sql执行后的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.14.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.14.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported the sql(attach,begin,commit,rollback etc.).</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// 删除表中所有数据</span></li><li>      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SQL_DELETE_TABLE</span> = <span class="hljs-string">'DELETE FROM EMPLOYEE'</span>;</li><li>      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">execute</span>(<span class="hljs-variable constant_">SQL_DELETE_TABLE</span>);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`delete result: <span class="hljs-subst">${data}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`delete failed, code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="executesync14" device-type="phone,2in1,tablet,wearable,tv">executeSync<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="executesync14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>executeSync(sql: string, args?: Array&lt;ValueType&gt;): ValueType</p>     <p>执行包含指定参数的SQL语句，语句中的各种表达式和操作符之间的关系操作符号不超过1000个，返回值类型为ValueType。</p>     <p>该接口支持执行增删改操作，支持执行PRAGMA语法的sql，支持对表的操作（建表、删表、修改表），返回结果类型由执行具体sql的结果决定。</p>     <p>此接口不支持执行查询、附加数据库和事务操作，查询可以使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-transaction#querysql14">querySql</a>、<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-transaction#query14">query</a>接口代替、附加数据库可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore#attach12">attach</a>接口代替。</p>     <p>不支持分号分隔的多条语句。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sql</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定要执行的SQL语句。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuetype">ValueType</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">SQL语句中参数的值。该值与sql参数语句中的占位符相对应。该参数不填，或者填null或undefined，都认为是sql参数语句完整。默认值为空。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuetype">ValueType</a></td>         <td class="cellrowborder" width="50%">返回sql执行后的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。其中，14800011错误码处理可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.14.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.28.14.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported the sql(attach,begin,commit,rollback etc.).</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800011</td>         <td class="cellrowborder" width="50%">Failed to open the database because it is corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800014</td>         <td class="cellrowborder" width="50%">The RdbStore or ResultSet is already closed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800021</td>         <td class="cellrowborder" width="50%">SQLite: Generic error. Possible causes: Insert failed or the updated data does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800023</td>         <td class="cellrowborder" width="50%">SQLite: Access permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800024</td>         <td class="cellrowborder" width="50%">SQLite: The database file is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800025</td>         <td class="cellrowborder" width="50%">SQLite: A table in the database is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800026</td>         <td class="cellrowborder" width="50%">SQLite: The database is out of memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800027</td>         <td class="cellrowborder" width="50%">SQLite: Attempt to write a readonly database.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800028</td>         <td class="cellrowborder" width="50%">SQLite: Some kind of disk I/O error occurred.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800029</td>         <td class="cellrowborder" width="50%">SQLite: The database is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800031</td>         <td class="cellrowborder" width="50%">SQLite: TEXT or BLOB exceeds size limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800033</td>         <td class="cellrowborder" width="50%">SQLite: Data type mismatch.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nuk-c106="" class="highlight-div"><div _ngcontent-nuk-c106="" class="highlight-div-header"><div _ngcontent-nuk-c106="" class="highlight-div-header-left"><div _ngcontent-nuk-c106="" class="handle-button expand-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nuk-c106="" class="highlight-div-header-right"><div _ngcontent-nuk-c106="" class="handle-button ai-button"></div><div _ngcontent-nuk-c106="" class="handle-button line-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nuk-c106="" class="handle-button theme-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nuk-c106="" class="handle-button copy-button"><div _ngcontent-nuk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nuk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 删除表中所有数据</span></li><li><span class="hljs-keyword">if</span> (store != <span class="hljs-literal">undefined</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> transaction = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">createTransaction</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">SQL_DELETE_TABLE</span> = <span class="hljs-string">'DELETE FROM EMPLOYEE'</span>;</li><li>      <span class="hljs-keyword">let</span> data = transaction.<span class="hljs-title function_">executeSync</span>(<span class="hljs-variable constant_">SQL_DELETE_TABLE</span>);</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">commit</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`delete result: <span class="hljs-subst">${data}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-keyword">await</span> transaction.<span class="hljs-title function_">rollback</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`delete failed, code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">const</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createTransaction failed, code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>