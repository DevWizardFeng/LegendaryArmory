<h1 _ngcontent-fgi-c119="" class="doc-title ng-star-inserted" title="Interface (WebMessagePort)"> Interface (WebMessagePort) </h1>

<div _ngcontent-fgi-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>通过WebMessagePort可以进行消息的发送以及接收，发送<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webmessagetype10">WebMessageType</a>/<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-t#webmessage">WebMessage</a>类型消息给HTML5侧。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>        <p>本模块首批接口从API version 9开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p></li>       <li>        <p>本Interface首批接口从API version 9开始支持。</p></li>       <li>        <p>示例效果请以真机运行为准，当前DevEco Studio预览器不支持。</p></li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-fgi-c106="" class="highlight-div"><div _ngcontent-fgi-c106="" class="highlight-div-header"><div _ngcontent-fgi-c106="" class="highlight-div-header-left"><div _ngcontent-fgi-c106="" class="handle-button expand-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fgi-c106="" class="highlight-div-header-right"><div _ngcontent-fgi-c106="" class="handle-button ai-button"></div><div _ngcontent-fgi-c106="" class="handle-button line-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fgi-c106="" class="handle-button theme-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fgi-c106="" class="handle-button copy-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">isExtentionType<sup>10+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>创建WebMessagePort时是否指定使用扩展增强接口，<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webmessageport#postmessageeventext10">postMessageEventExt</a>、<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webmessageport#onmessageeventext10">onMessageEventExt</a>。</p>          <p>true表示使用扩展增强接口，false表示不使用扩展增强接口。</p>          <p>默认值：false。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="postmessageevent" device-type="phone,2in1,tablet,wearable,tv">postMessageEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="postmessageevent" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>postMessageEvent(message: WebMessage): void</p>     <p>发送<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-t#webmessage">WebMessage</a>类型消息给HTML5侧，必须先调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webmessageport#onmessageevent">onMessageEvent</a>，否则会发送失败。完整示例代码参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#postmessage">postMessage</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">message</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-t#webmessage">WebMessage</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要发送的消息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100010</td>         <td class="cellrowborder" width="50%">Failed to post messages through the port.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fgi-c106="" class="highlight-div"><div _ngcontent-fgi-c106="" class="highlight-div-header"><div _ngcontent-fgi-c106="" class="highlight-div-header-left"><div _ngcontent-fgi-c106="" class="handle-button expand-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fgi-c106="" class="highlight-div-header-right"><div _ngcontent-fgi-c106="" class="handle-button ai-button"></div><div _ngcontent-fgi-c106="" class="handle-button line-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fgi-c106="" class="handle-button theme-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fgi-c106="" class="handle-button copy-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">ports</span>: webview.<span class="hljs-property">WebMessagePort</span>[] = [];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'postMessageEvent'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">createWebMessagePorts</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-string">'__init_port__'</span>, [<span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>]], <span class="hljs-string">'*'</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span>[<span class="hljs-number">1</span>].<span class="hljs-title function_">postMessageEvent</span>(<span class="hljs-string">"post message from ets to html5"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="onmessageevent" device-type="phone,2in1,tablet,wearable,tv">onMessageEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onmessageevent" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onMessageEvent(callback: (result: WebMessage) =&gt; void): void</p>     <p>在应用侧的消息端口上注册回调函数，接收HTML5侧发送过来的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-t#webmessage">WebMessage</a>类型消息。完整示例代码参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#postmessage">postMessage</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(result: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-t#webmessage">WebMessage</a>) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">接收到的消息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100006</td>         <td class="cellrowborder" width="50%">Failed to register a message event for the port.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fgi-c106="" class="highlight-div"><div _ngcontent-fgi-c106="" class="highlight-div-header"><div _ngcontent-fgi-c106="" class="highlight-div-header-left"><div _ngcontent-fgi-c106="" class="handle-button expand-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fgi-c106="" class="highlight-div-header-right"><div _ngcontent-fgi-c106="" class="handle-button ai-button"></div><div _ngcontent-fgi-c106="" class="handle-button line-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fgi-c106="" class="handle-button theme-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fgi-c106="" class="handle-button copy-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">ports</span>: webview.<span class="hljs-property">WebMessagePort</span>[] = [];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'onMessageEvent'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">createWebMessagePorts</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span>[<span class="hljs-number">1</span>].<span class="hljs-title function_">onMessageEvent</span>(<span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (msg) == <span class="hljs-string">"string"</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"received string message from html5, string is:"</span> + msg);</li><li>              } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (msg) == <span class="hljs-string">"object"</span>) {</li><li>                <span class="hljs-keyword">if</span> (msg <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ArrayBuffer</span>) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"received arraybuffer from html5, length is:"</span> + msg.<span class="hljs-property">byteLength</span>);</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"not support"</span>);</li><li>                }</li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"not support"</span>);</li><li>              }</li><li>            })</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="postmessageeventext10" device-type="phone,2in1,tablet,wearable,tv">postMessageEventExt<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="postmessageeventext10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>postMessageEventExt(message: WebMessageExt): void</p>     <p>发送<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webmessagetype10">WebMessageType</a>类型消息给HTML5侧，必须先调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webmessageport#onmessageeventext10">onMessageEventExt</a>，否则会发送失败。完整示例代码参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webmessageport#onmessageeventext10">onMessageEventExt</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">message</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webmessageext">WebMessageExt</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要发送的消息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100010</td>         <td class="cellrowborder" width="50%">Failed to post messages through the port.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="onmessageeventext10" device-type="phone,2in1,tablet,wearable,tv">onMessageEventExt<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onmessageeventext10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onMessageEventExt(callback: (result: WebMessageExt) =&gt; void): void</p>     <p>在应用侧的消息端口上注册回调函数，接收HTML5侧发送过来的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webmessagetype10">WebMessageType</a>类型消息。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">(result: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webmessageext">WebMessageExt</a>) =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">接收到的消息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100006</td>         <td class="cellrowborder" width="50%">Failed to register a message event for the port.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fgi-c106="" class="highlight-div"><div _ngcontent-fgi-c106="" class="highlight-div-header"><div _ngcontent-fgi-c106="" class="highlight-div-header-left"><div _ngcontent-fgi-c106="" class="handle-button expand-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fgi-c106="" class="highlight-div-header-right"><div _ngcontent-fgi-c106="" class="handle-button ai-button"></div><div _ngcontent-fgi-c106="" class="handle-button line-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fgi-c106="" class="handle-button theme-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fgi-c106="" class="handle-button copy-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestObj</span> {</li><li>  <span class="hljs-title function_">test</span>(<span class="hljs-attr">str</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">ArrayBuffer</span> {</li><li>    <span class="hljs-keyword">let</span> buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>    <span class="hljs-keyword">let</span> buff = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buf);</li><li>
</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-property">length</span>; i++) {</li><li>      buff[i] = str.<span class="hljs-title function_">charCodeAt</span>(i);</li><li>    }</li><li>    <span class="hljs-keyword">return</span> buf;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 应用与网页互发消息的示例：使用"init_web_messageport"的通道，通过端口0在应用侧接受网页发送的消息，通过端口1在网页侧接受应用发送的消息。</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">ports</span>: webview.<span class="hljs-property">WebMessagePort</span>[] = [];</li><li>  <span class="hljs-attr">nativePort</span>: webview.<span class="hljs-property">WebMessagePort</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg2</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-attr">message</span>: webview.<span class="hljs-property">WebMessageExt</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebMessageExt</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObjtest</span>: <span class="hljs-title class_">TestObj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestObj</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'SendToH5 setString'</span>).<span class="hljs-title function_">margin</span>({</li><li>        <span class="hljs-attr">right</span>: <span class="hljs-number">800</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 使用本侧端口发送消息给HTML5</span></li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In ArkTS side send true start"</span>);</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setType</span>(<span class="hljs-number">1</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setString</span>(<span class="hljs-string">"helloFromEts"</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>.<span class="hljs-title function_">postMessageEventExt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>);</li><li>            }</li><li>          }</li><li>          <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`In ArkTS side send message catch error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'SendToH5 setNumber'</span>).<span class="hljs-title function_">margin</span>({</li><li>          <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>,</li><li>          <span class="hljs-attr">right</span>: <span class="hljs-number">800</span>,</li><li>        })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 使用本侧端口发送消息给HTML5</span></li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In ArkTS side send true start"</span>);</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setType</span>(<span class="hljs-number">2</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setNumber</span>(<span class="hljs-number">12345</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>.<span class="hljs-title function_">postMessageEventExt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>);</li><li>            }</li><li>          }</li><li>          <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`In ArkTS side send message catch error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'SendToH5 setBoolean'</span>).<span class="hljs-title function_">margin</span>({</li><li>        <span class="hljs-attr">top</span>: -<span class="hljs-number">90</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 使用本侧端口发送消息给HTML5</span></li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In ArkTS side send true start"</span>);</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setType</span>(<span class="hljs-number">3</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setBoolean</span>(<span class="hljs-literal">true</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>.<span class="hljs-title function_">postMessageEventExt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>);</li><li>            }</li><li>          }</li><li>          <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`In ArkTS side send message catch error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'SendToH5 setArrayBuffer'</span>).<span class="hljs-title function_">margin</span>({</li><li>        <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 使用本侧端口发送消息给HTML5</span></li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In ArkTS side send true start"</span>);</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setType</span>(<span class="hljs-number">4</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setArrayBuffer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObjtest</span>.<span class="hljs-title function_">test</span>(<span class="hljs-string">"Name=test&amp;Password=test"</span>));</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>.<span class="hljs-title function_">postMessageEventExt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>);</li><li>            }</li><li>          }</li><li>          <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`In ArkTS side send message catch error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'SendToH5 setArray'</span>).<span class="hljs-title function_">margin</span>({</li><li>        <span class="hljs-attr">top</span>: -<span class="hljs-number">90</span>,</li><li>        <span class="hljs-attr">left</span>: <span class="hljs-number">800</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 使用本侧端口发送消息给HTML5</span></li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In ArkTS side send true start"</span>);</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setType</span>(<span class="hljs-number">5</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setArray</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>.<span class="hljs-title function_">postMessageEventExt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>);</li><li>            }</li><li>          }</li><li>          <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`In ArkTS side send message catch error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'SendToH5 setError'</span>).<span class="hljs-title function_">margin</span>({</li><li>        <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>,</li><li>        <span class="hljs-attr">left</span>: <span class="hljs-number">800</span>,</li><li>      })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 使用本侧端口发送消息给HTML5</span></li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In ArkTS side send true start"</span>);</li><li>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReferenceError</span>(<span class="hljs-string">"ReferenceError"</span>);</li><li>          }</li><li>          <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setType</span>(<span class="hljs-number">6</span>);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">setError</span>(error);</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>.<span class="hljs-title function_">postMessageEventExt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>);</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`In ArkTS side send message catch error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In ArkTS side message onPageEnd init message channel"</span>);</li><li>          <span class="hljs-comment">// 1. 创建消息端口</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">createWebMessagePorts</span>(<span class="hljs-literal">true</span>);</li><li>          <span class="hljs-comment">// 2. 发送端口1到HTML5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-string">"init_web_messageport"</span>, [<span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span>[<span class="hljs-number">1</span>]], <span class="hljs-string">"*"</span>);</li><li>          <span class="hljs-comment">// 3. 保存端口0到本地</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>];</li><li>          <span class="hljs-comment">// 4. 设置回调函数</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">nativePort</span>.<span class="hljs-title function_">onMessageEventExt</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In ArkTS side got message"</span>);</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-keyword">type</span> = result.<span class="hljs-title function_">getType</span>();</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In ArkTS side getType:"</span> + <span class="hljs-keyword">type</span>);</li><li>              <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">type</span>) {</li><li>                <span class="hljs-keyword">case</span> webview.<span class="hljs-property">WebMessageType</span>.<span class="hljs-property">STRING</span>: {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getString</span>());</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getString:"</span> + ((result.<span class="hljs-title function_">getString</span>()));</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                }</li><li>                <span class="hljs-keyword">case</span> webview.<span class="hljs-property">WebMessageType</span>.<span class="hljs-property">NUMBER</span>: {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getNumber</span>());</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getNumber:"</span> + ((result.<span class="hljs-title function_">getNumber</span>()));</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                }</li><li>                <span class="hljs-keyword">case</span> webview.<span class="hljs-property">WebMessageType</span>.<span class="hljs-property">BOOLEAN</span>: {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getBoolean</span>());</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getBoolean:"</span> + ((result.<span class="hljs-title function_">getBoolean</span>()));</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                }</li><li>                <span class="hljs-keyword">case</span> webview.<span class="hljs-property">WebMessageType</span>.<span class="hljs-property">ARRAY_BUFFER</span>: {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getArrayBuffer</span>());</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getArrayBuffer byteLength:"</span> + ((result.<span class="hljs-title function_">getArrayBuffer</span>().<span class="hljs-property">byteLength</span>));</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                }</li><li>                <span class="hljs-keyword">case</span> webview.<span class="hljs-property">WebMessageType</span>.<span class="hljs-property">ARRAY</span>: {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getArray</span>());</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getArray:"</span> + result.<span class="hljs-title function_">getArray</span>();</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                }</li><li>                <span class="hljs-keyword">case</span> webview.<span class="hljs-property">WebMessageType</span>.<span class="hljs-property">ERROR</span>: {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getError</span>());</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getError:"</span> + result.<span class="hljs-title function_">getError</span>();</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                }</li><li>                <span class="hljs-attr">default</span>: {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"default break, type:"</span> + <span class="hljs-keyword">type</span>;</li><li>                  <span class="hljs-keyword">break</span>;</li><li>                }</li><li>              }</li><li>            }</li><li>            <span class="hljs-keyword">catch</span> (error) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>            }</li><li>          });</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-fgi-c106="" class="highlight-div"><div _ngcontent-fgi-c106="" class="highlight-div-header"><div _ngcontent-fgi-c106="" class="highlight-div-header-left"><div _ngcontent-fgi-c106="" class="handle-button expand-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fgi-c106="" class="highlight-div-header-right"><div _ngcontent-fgi-c106="" class="handle-button ai-button"></div><div _ngcontent-fgi-c106="" class="handle-button line-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fgi-c106="" class="handle-button theme-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fgi-c106="" class="handle-button copy-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fgi-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en-gb"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>WebView MessagePort Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>
</li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Html5 Send and Receive Message<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"msg"</span>&gt;</span>Receive string:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"msg2"</span>&gt;</span>Receive arraybuffer:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: 10pt; text-align: center;"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Send String"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"postStringToApp();"</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"index.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <div _ngcontent-fgi-c106="" class="highlight-div"><div _ngcontent-fgi-c106="" class="highlight-div-header"><div _ngcontent-fgi-c106="" class="highlight-div-header-left"><div _ngcontent-fgi-c106="" class="handle-button expand-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fgi-c106="" class="highlight-div-header-right"><div _ngcontent-fgi-c106="" class="handle-button ai-button"></div><div _ngcontent-fgi-c106="" class="handle-button line-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fgi-c106="" class="handle-button theme-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fgi-c106="" class="handle-button copy-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fgi-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">//index.js</span></li><li><span class="hljs-keyword">var</span> h5Port;</li><li><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {</li><li>    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">data</span> == <span class="hljs-string">'init_web_messageport'</span>) {</li><li>        <span class="hljs-keyword">if</span>(event.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>] != <span class="hljs-literal">null</span>) {</li><li>            h5Port = event.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>]; <span class="hljs-comment">// 1. 保存从ets侧发送过来的端口</span></li><li>            h5Port.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"hwd In html got message"</span>);</li><li>                <span class="hljs-comment">// 2. 接收ets侧发送过来的消息.</span></li><li>                <span class="hljs-keyword">var</span> result = event.<span class="hljs-property">data</span>;</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html got message, typeof: "</span>, <span class="hljs-title function_">typeof</span>(result));</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html got message, result: "</span>, (result));</li><li>                <span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(result) == <span class="hljs-string">"string"</span>) {</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html got message, String: "</span>, result);</li><li>                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"msg"</span>).<span class="hljs-property">innerHTML</span>  =  <span class="hljs-string">"String:"</span> + result;</li><li>                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(result) == <span class="hljs-string">"number"</span>) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html side got message, number: "</span>, result);</li><li>                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"msg"</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">"Number:"</span> + result;</li><li>                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(result) == <span class="hljs-string">"boolean"</span>) {</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html side got message, boolean: "</span>, result);</li><li>                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"msg"</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">"Boolean:"</span> + result;</li><li>                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(result) == <span class="hljs-string">"object"</span>) {</li><li>                    <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ArrayBuffer</span>) {</li><li>                        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"msg2"</span>).<span class="hljs-property">innerHTML</span>  =  <span class="hljs-string">"ArrayBuffer:"</span> + result.<span class="hljs-property">byteLength</span>;</li><li>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html got message, byteLength: "</span>, result.<span class="hljs-property">byteLength</span>);</li><li>                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) {</li><li>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html error message, err:"</span> + (result));</li><li>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html error message, typeof err:"</span> + <span class="hljs-title function_">typeof</span>(result));</li><li>                        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"msg2"</span>).<span class="hljs-property">innerHTML</span>  =  <span class="hljs-string">"Error:"</span> + result.<span class="hljs-property">name</span> + <span class="hljs-string">", msg:"</span> + result.<span class="hljs-property">message</span>;</li><li>                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>) {</li><li>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html got message, Array"</span>);</li><li>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html got message, Array length:"</span> + result.<span class="hljs-property">length</span>);</li><li>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html got message, Array[0]:"</span> + (result[<span class="hljs-number">0</span>]));</li><li>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html got message, typeof Array[0]:"</span> + <span class="hljs-title function_">typeof</span>(result[<span class="hljs-number">0</span>]));</li><li>                        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"msg2"</span>).<span class="hljs-property">innerHTML</span>  =  <span class="hljs-string">"Array len:"</span> + result.<span class="hljs-property">length</span> + <span class="hljs-string">", value:"</span> + result;</li><li>                    } <span class="hljs-keyword">else</span> {</li><li>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html got message, not any instance of support type"</span>);</li><li>                        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"msg"</span>).<span class="hljs-property">innerHTML</span>  = <span class="hljs-string">"not any instance of support type"</span>;</li><li>                    }</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html got message, not support type"</span>);</li><li>                    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"msg"</span>).<span class="hljs-property">innerHTML</span>  = <span class="hljs-string">"not support type"</span>;</li><li>                }</li><li>            }</li><li>            h5Port.<span class="hljs-property">onmessageerror</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`hwd In html Error receiving message: <span class="hljs-subst">${event}</span>`</span>);</li><li>            };</li><li>        }</li><li>    }</li><li>})</li><li>
</li><li><span class="hljs-comment">// 使用h5Port往ets侧发送String类型的消息.</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">postStringToApp</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">if</span> (h5Port) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html send string message"</span>);</li><li>        h5Port.<span class="hljs-title function_">postMessage</span>(<span class="hljs-string">"hello"</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"In html send string message end"</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"In html h5port is null, please init first"</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="close" device-type="phone,2in1,tablet,wearable,tv">close<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="close" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>close(): void</p>     <p>不需要发送消息时关闭该消息端口。在使用close前，请先使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#createwebmessageports">createWebMessagePorts</a>创建消息端口。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>示例：</strong></p>     <div _ngcontent-fgi-c106="" class="highlight-div"><div _ngcontent-fgi-c106="" class="highlight-div-header"><div _ngcontent-fgi-c106="" class="highlight-div-header-left"><div _ngcontent-fgi-c106="" class="handle-button expand-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fgi-c106="" class="highlight-div-header-right"><div _ngcontent-fgi-c106="" class="handle-button ai-button"></div><div _ngcontent-fgi-c106="" class="handle-button line-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fgi-c106="" class="handle-button theme-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fgi-c106="" class="handle-button copy-button"><div _ngcontent-fgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">msgPort</span>: webview.<span class="hljs-property">WebMessagePort</span>[] = [];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 先使用createWebMessagePorts创建端口。</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'createWebMessagePorts'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">msgPort</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">createWebMessagePorts</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"createWebMessagePorts size:"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">msgPort</span>.<span class="hljs-property">length</span>)</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'close'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">msgPort</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">msgPort</span>.<span class="hljs-property">length</span> == <span class="hljs-number">2</span>) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">msgPort</span>[<span class="hljs-number">1</span>].<span class="hljs-title function_">close</span>();</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">msgPort</span> = [];</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"msgPort is null, Please initialize first"</span>);</li><li>            }</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>