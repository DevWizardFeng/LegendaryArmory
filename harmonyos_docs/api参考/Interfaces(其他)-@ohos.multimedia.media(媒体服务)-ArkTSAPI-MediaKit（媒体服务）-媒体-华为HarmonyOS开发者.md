<h1 _ngcontent-tgw-c119="" class="doc-title ng-star-inserted" title="Interfaces (其他)"> Interfaces (其他) </h1>

<div _ngcontent-tgw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="avfiledescriptor9" device-type="phone,2in1,tablet,wearable,tv">AVFileDescriptor<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avfiledescriptor9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>音视频文件资源描述，一种特殊资源的播放方式，使用场景：应用中的音频资源被连续存储在同一个文件中，需要根据偏移量和长度进行播放。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.2.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">fd</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">资源句柄，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#getrawfd9">resourceManager.getRawFd</a>获取，也可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs#fsopen">fs.open</a>获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">offset</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">资源偏移量，默认值为0，需要基于预置资源的信息输入，非法值会造成音视频资源解析错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">length</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">资源长度，默认值为文件中从偏移量开始的剩余字节，需要基于预置资源的信息输入，非法值会造成音视频资源解析错误。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="avdatasrcdescriptor10" device-type="phone,2in1,tablet,wearable,tv">AVDataSrcDescriptor<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avdatasrcdescriptor10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>音视频文件资源描述，用于DataSource播放方式，使用场景：应用在未获取完整音视频资源时，允许用户创建播放实例并开始播放，达到提前播放的目的。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">fileSize</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">待播放文件大小（字节），-1代表大小未知。如果fileSize设置为-1，播放模式类似于直播，不能进行seek及setSpeed操作，不能设置loop属性，因此不能重新播放。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">callback</td>         <td class="cellrowborder" width="20%">(buffer: ArrayBuffer, length: number, pos?: number) =&gt; number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>用户设置的回调函数，用于填写数据。</p>          <p>- buffer: 表示被填写的内存，必选。</p>          <p>- length: 表示被填写内存的最大长度，必选。</p>          <p>- pos：表示填写的数据在资源文件中的位置，可选。当fileSize设置为-1时，该参数禁止被使用。</p>          <p>- 返回值，number类型，返回填充数据的长度。返回-1表示到达流的末尾，返回-2表示遇到不可恢复的错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="subtitleinfo12" device-type="phone,2in1,tablet,wearable,tv">SubtitleInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="subtitleinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>外挂字幕信息，使用场景：订阅外挂字幕事件，回调返回外挂字幕详细信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">text</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">字幕文本信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">startTime</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">显示当前字幕文本的开始时间（单位：毫秒）。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">duration</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">显示当前字幕文本的持续时间（单位：毫秒）。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="seimessage18" device-type="phone,2in1,tablet,wearable,tv">SeiMessage<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="seimessage18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>SEI信息内容，描述SEI信息的负载类型和数据。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">payloadType</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">SEI信息的负载类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">payload</td>         <td class="cellrowborder" width="20%">ArrayBuffer</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">SEI信息的负载数据。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="mediadescription8" device-type="phone,2in1,tablet,wearable,tv">MediaDescription<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediadescription8" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>通过key-value方式获取媒体信息。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">[key: string]</td>         <td class="cellrowborder" width="20%">Object</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">该键值对支持的key取值范围，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#mediadescriptionkey8">MediaDescriptionKey</a>；每个key值的Object类型和范围，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#mediadescriptionkey8">MediaDescriptionKey</a>对应Key值的说明。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgw-c106="" class="highlight-div"><div _ngcontent-tgw-c106="" class="highlight-div-header"><div _ngcontent-tgw-c106="" class="highlight-div-header-left"><div _ngcontent-tgw-c106="" class="handle-button expand-button"><div _ngcontent-tgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgw-c106="" class="highlight-div-header-right"><div _ngcontent-tgw-c106="" class="handle-button ai-button"></div><div _ngcontent-tgw-c106="" class="handle-button line-button"><div _ngcontent-tgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgw-c106="" class="handle-button theme-button"><div _ngcontent-tgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgw-c106="" class="handle-button copy-button"><div _ngcontent-tgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printfItemDescription</span>(<span class="hljs-params">obj: media.MediaDescription, key: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">property</span>: <span class="hljs-title class_">Object</span> = obj[key];</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio key is '</span> + key); <span class="hljs-comment">// 通过key值获取对应的value。key值具体可见MediaDescriptionKey。</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'audio value is '</span> + property); <span class="hljs-comment">//对应key值得value。其类型可为任意类型，具体key对应value的类型可参考MediaDescriptionKey。</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">avPlayer</span>: media.<span class="hljs-property">AVPlayer</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>media.<span class="hljs-title function_">createAVPlayer</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, player: media.AVPlayer</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span>(player != <span class="hljs-literal">null</span>) {</li><li>    avPlayer = player;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating AVPlayer`</span>);</li><li>    avPlayer.<span class="hljs-title function_">getTrackDescription</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, arrList: <span class="hljs-built_in">Array</span>&lt;media.MediaDescription&gt;</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (arrList != <span class="hljs-literal">null</span>) {</li><li>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arrList.<span class="hljs-property">length</span>; i++) {</li><li>          <span class="hljs-title function_">printfItemDescription</span>(arrList[i], media.<span class="hljs-property">MediaDescriptionKey</span>.<span class="hljs-property">MD_KEY_TRACK_TYPE</span>);  <span class="hljs-comment">//打印出每条轨道MD_KEY_TRACK_TYPE的值。</span></li><li>        }</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get TrackDescription, error:<span class="hljs-subst">${error}</span>`</span>);</li><li>      }</li><li>    });</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create AVPlayer, error message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="playbackinfo12" device-type="phone,2in1,tablet,wearable,tv">PlaybackInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="playbackinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>通过key-value方式获取播放信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">[key: string]</td>         <td class="cellrowborder" width="20%">Object</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>该键值对支持的key取值范围，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#playbackinfokey12">PlaybackInfoKey</a>。</p>          <p>每个key值的Object类型和范围，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#playbackinfokey12">PlaybackInfoKey</a>。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="avrecorderconfig9" device-type="phone,2in1,tablet,wearable,tv">AVRecorderConfig<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avrecorderconfig9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示音视频录制的参数设置。</p>     <p>通过audioSourceType和videoSourceType区分纯音频录制、纯视频录制或音视频录制。纯音频录制时，仅需要设置audioSourceType；纯视频录制时，仅需要设置videoSourceType；音视频录制时，audioSourceType和videoSourceType均需要设置。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">audioSourceType</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#audiosourcetype9">AudioSourceType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>选择录制的音频源类型。选择音频录制时必填。</p>          <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoSourceType</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#videosourcetype9">VideoSourceType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">选择录制的视频源类型。选择视频录制时必填。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">profile</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderprofile9">AVRecorderProfile</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>录制的profile，必要参数。</p>          <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">url</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>录制输出URL：fd://xx (fd number) <span><img originheight="89" originwidth="179" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115210.62570917278219518361544144828053:50001231000000:2800:F606D41215388D236346FBE3848B2791A6D82D6B336541A127A971069B38359C.png" class="notEnlarge" width="160" height="79.55307262569832"></span>，必要参数。</p>          <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fileGenerationMode<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#filegenerationmode12">FileGenerationMode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">创建媒体文件的模式，配合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#onphotoassetavailable12">on('photoAssetAvailable')</a>监听使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">rotation<sup>(deprecated)</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>录制的视频旋转角度，mp4格式支持0、90、180和270，默认值为0。</p>          <p>从API version 6开始支持，从API version 12开始废弃。建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avmetadata11">AVMetadata</a>.videoOrientation替代。</p>          <p>如果同时设置两个值，将会采用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avmetadata11">AVMetadata</a>.videoOrientation。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">location<sup>(deprecated)</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#location">Location</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>录制的地理位置，默认不记录地理位置信息。</p>          <p>从API version 6开始支持，从API version 12开始废弃。建议使用 <a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avmetadata11">AVMetadata</a>.location。</p>          <p>如果同时设置两个值，将会采用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avmetadata11">AVMetadata</a>.location。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">metadata<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avmetadata11">AVMetadata</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置元数据信息。详细内容请参考 <a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avmetadata11">AVMetadata</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">maxDuration<sup>18+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置录制的最大时长，单位为秒，有效值取值范围[1, 2^31-1]，无效输入会重置为最大值。录制到达设定时长后，录制会自动停止，并通过stateChange回调录制状态，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avrecorderstate9">AVRecorderState</a> = 'stopped'，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#statechangereason9">StateChangeReason</a> = BACKGROUND。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="avrecorderprofile9" device-type="phone,2in1,tablet,wearable,tv">AVRecorderProfile<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avrecorderprofile9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>音视频录制的配置文件。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">audioBitrate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频编码比特率，选择音频录制时必填。</p>          <p>支持范围：</p>          <p>- AAC编码格式支持比特率范围[32000, 500000]。</p>          <p>- G711-mulaw编码格式支持比特率大小：64000。</p>          <p>- MP3编码格式支持范围[8000, 16000, 32000, 40000, 48000, 56000, 64000, 80000, 96000, 112000, 128000, 160000, 192000, 224000, 256000, 320000]。</p>          <p>当使用MP3编码格式时，采样率和比特率的映射关系：</p>          <p>- 采样率使用16K以下时，对应比特率范围为[8000 - 64000]。</p>          <p>- 采样率使用16K~32K时对应的比特率范围为[8000, 160000]。</p>          <p>- 采样率使用32K以上时对应的比特率范围为[32000, 320000]。</p>          <p>- AMR_NB编码格式支持比特率范围[4750, 5150, 5900, 6700, 7400, 7950, 10200, 12200]。</p>          <p>- AMR_WB编码格式支持比特率范围[6600, 8850, 12650, 14250, 15850, 18250, 19850, 23050, 23850]。</p>          <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioChannels</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频采集声道数，选择音频录制时必填。</p>          <p>- AAC编码格式支持范围[1, 8]。</p>          <p>- G711-mulaw编码格式支持大小：1。</p>          <p>- MP3编码格式支持范围[1, 2]。</p>          <p>- AMR-NB和AMR-WB编码格式支持大小：1。</p>          <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioCodec</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#codecmimetype8">CodecMimeType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频编码格式，选择音频录制时必填。</p>          <p>当前支持AUDIO_AAC、AUDIO_MP3、AUDIO_G711MU、AUDIO_AMR_NB和AUDIO_AMR_WB。</p>          <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioSampleRate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频采样率，选择音频录制时必填。</p>          <p>支持范围：</p>          <p>- AAC编码支持采样率范围[8000, 11025, 12000, 16000, 22050, 24000, 32000, 44100, 48000, 64000, 88200, 96000]。</p>          <p>- G711-mulaw编码支持采样率大小：8000。</p>          <p>- MP3编码支持采样率范围[8000, 11025, 12000, 16000, 22050, 24000, 32000, 44100, 48000]。</p>          <p>- AMR_NB编码支持采样率大小：8000。</p>          <p>- AMR_WB编码支持采样率大小：16000。</p>          <p>可变比特率模式，码率仅作参考。</p>          <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fileFormat</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#containerformattype8">ContainerFormatType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>文件的容器格式，必要参数。当前支持MP4、M4A、MP3、WAV、AMR、AAC封装格式，当前AAC音频封装默认为ADTS帧头格式。不支持在MP4封装格式下使用AUDIO_MP3编码格式。</p>          <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoBitrate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频编码比特率，选择视频录制时必填，支持范围[10000, 100000000]。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoCodec</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#codecmimetype8">CodecMimeType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频编码格式，选择视频录制时必填。当前支持VIDEO_AVC和VIDEO_HEVC。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoFrameWidth</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频帧的宽，选择视频录制时必填，支持范围[176, 4096]。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoFrameHeight</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频帧的高，选择视频录制时必填，支持范围[144, 4096]。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoFrameRate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频帧率，选择视频录制时必填，推荐范围[1, 60]。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">isHdr<sup>11+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">HDR编码，选择视频录制时选填，isHdr默认为false，对应编码格式没有要求，isHdr为true时，对应的编码格式必须为video/hevc。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enableTemporalScale<sup>12+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频录制是否支持时域分层编码功能，选择视频录制时选填，enableTemporalScale默认为false。设置为true时，编码输出的码流中部分帧可以支持跳过不编码。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enableBFrame<sup>20+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>视频录制是否启用B帧编码。true表示启用B帧编码（仅在视频编码格式为H.265且设备硬件支持的情况下生效），false表示不启用B帧编码。</p>          <p>该参数为视频录制场景下的可选项，默认值为false。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="音频参数配置对照表" class="firsth2">音频参数配置对照表<i class="anchor-icon anchor-icon-link" anchorid="音频参数配置对照表" tips="复制节点链接"></i></h3>          <p>此处提供音频参数配置的对照表，每项的具体释义，可查看下述字段解释。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.6.1.1" width="20%">编码格式</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.6.1.2" width="20%">封装格式</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.6.1.3" width="20%">采样率</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.6.1.4" width="20%">比特率</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.6.1.5" width="20%">声道数</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">AUDIO_AAC</td>         <td class="cellrowborder" width="20%">MP4,M4A</td>         <td class="cellrowborder" width="20%">[8000, 11025, 12000, 16000, 22050, 24000, 32000, 44100, 48000, 64000, 88200, 96000]</td>         <td class="cellrowborder" width="20%">[32000-500000]</td>         <td class="cellrowborder" width="20%">[1-8]</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">AUDIO_MP3</td>         <td class="cellrowborder" width="20%">MP3</td>         <td class="cellrowborder" width="20%">[8000, 11025, 12000, 16000, 22050, 24000, 32000, 44100, 48000]</td>         <td class="cellrowborder" width="20%">          <p>- 采样率使用16000以下时，对应比特率范围为[8000, 16000, 32000, 40000, 48000, 56000, 64000]。</p>          <p>- 采样率使用16000~32000时对应的比特率范围为[8000, 16000, 32000, 40000, 48000, 56000, 64000, 80000, 96000, 112000, 128000, 160000]。</p>          <p>- 采样率使用32000以上时对应的比特率范围为[32000, 40000, 48000, 56000, 64000, 80000, 96000, 112000, 128000, 160000, 192000, 224000, 256000, 320000]。</p></td>         <td class="cellrowborder" width="20%">[1-2]</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">AUDIO_G711MU</td>         <td class="cellrowborder" width="20%">WAV</td>         <td class="cellrowborder" width="20%">[8000]</td>         <td class="cellrowborder" width="20%">[64000]</td>         <td class="cellrowborder" width="20%">[1]</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">AUDIO_AMR_NB<sup>18+</sup></td>         <td class="cellrowborder" width="20%">AMR</td>         <td class="cellrowborder" width="20%">[8000]</td>         <td class="cellrowborder" width="20%">[4750, 5150, 5900, 6700, 7400, 7950, 10200, 12200]</td>         <td class="cellrowborder" width="20%">[1]</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">AUDIO_AMR_WB<sup>18+</sup></td>         <td class="cellrowborder" width="20%">AMR</td>         <td class="cellrowborder" width="20%">[16000]</td>         <td class="cellrowborder" width="20%">[6600, 8850, 12650, 14250, 15850, 18250, 19850, 23050, 23850]</td>         <td class="cellrowborder" width="20%">[1]</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="location" device-type="phone,2in1,tablet,wearable,tv">Location<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="location" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>视频录制的地理位置。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">latitude</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">地理位置的纬度，取值范围为[-90, 90]。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">longitude</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">地理位置的经度，取值范围为[-180, 180]。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="encoderinfo11" device-type="phone,2in1,tablet,wearable,tv">EncoderInfo<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="encoderinfo11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>编码器和规格参数。</p>     <p>系统能力：SystemCapability.Multimedia.Media.AVRecorder</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">mimeType</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#codecmimetype8">CodecMimeType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">编码器MIME类型名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">编码器类型，audio表示音频编码器，video表示视频编码器。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">bitRate</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#range11">Range</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">比特率，包含该编码器的最大和最小值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">frameRate</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#range11">Range</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频帧率，包含帧率的最大和最小值，仅视频编码器拥有。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">width</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#range11">Range</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频帧的宽度，包含宽度的最大和最小值，仅视频编码器拥有。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">height</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#range11">Range</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频帧的高度，包含高度的最大和最小值，仅视频编码器拥有。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">channels</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#range11">Range</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">音频采集声道数，包含声道数的最大和最小值，仅音频编码器拥有。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">sampleRate</td>         <td class="cellrowborder" width="20%">Array&lt;number&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">音频采样率，包含所有可以使用的音频采样率值数组，具体数值依赖编码器类型，仅音频编码器拥有。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="range11" device-type="phone,2in1,tablet,wearable,tv">Range<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="range11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示一个类型的范围。</p>     <p>系统能力：SystemCapability.Multimedia.Media.AVRecorder</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">min</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">范围的最小值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">max</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">范围的最大值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="avtranscoderconfig12" device-type="phone,2in1,tablet,tv">AVTranscoderConfig<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avtranscoderconfig12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>表示视频转码的参数设置。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">audioBitrate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">输出音频的码率，单位为比特率（bps），支持范围[1-500000]。默认设置为48Kbps。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioCodec</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#codecmimetype8">CodecMimeType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">输出音频的编码格式，当前仅支持AAC。默认设置为AAC。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fileFormat</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#containerformattype8">ContainerFormatType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">输出视频文件的封装格式，当前视频文件仅支持MP4。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoBitrate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">输出视频的码率，单位为比特率（bps）。默认码率按输出视频的分辨率设置，[240p，480P]默认码率值为1Mbps，(480P,720P]默认码率值为2Mbps，(720P,1080P]默认码率值为4Mbps，1080P及以上默认值为8Mbps。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoCodec</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#codecmimetype8">CodecMimeType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">输出视频的编码格式，当前仅支持AVC和HEVC。若源视频编码格式为HEVC，则默认设置为HEVC，否则默认设置为AVC。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoFrameWidth</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">输出视频帧的宽，单位为像素（px），支持范围[240-3840]。默认设置为源视频帧的宽。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoFrameHeight</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">输出视频帧的高，单位为像素（px），支持范围[240-2160]。默认设置为源视频帧的高。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enableBFrame<sup>20+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>转码使能B帧编码。true表示开启B帧编码，默认为不开启B帧编码。</p>          <p>B帧视频编码相关的约束和限制可以参考文档<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-encoding-b-frame#约束和限制" target="_blank">B帧视频编码约束和限制</a>。如果当前不符合B帧视频编码的约束和限制，将忽略B帧，按不使能B帧进行编码。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="avmetadata11" device-type="phone,2in1,tablet,wearable,tv">AVMetadata<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avmetadata11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>音视频元数据，包含各个元数据字段。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVMetadataExtractor</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">album</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">专辑的标题。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">albumArtist</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">专辑的艺术家。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">artist</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的艺术家。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">author</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的作者。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dateTime</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的创建时间。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dateTimeFormat</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的创建时间，按YYYY-MM-DD HH:mm:ss格式输出。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">composer</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的作曲家。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">duration</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的时长。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">genre</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的类型或体裁。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">hasAudio</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源是否包含音频。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">hasVideo</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源是否包含视频。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">mimeType</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的mime类型。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">trackCount</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的轨道数量。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">sampleRate</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">音频的采样率，单位为赫兹（Hz）。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">title</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的标题。当前版本为只读参数。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoHeight</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频的高度，单位为像素（px）。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoWidth</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频的宽度，单位为像素（px）。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoOrientation</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频的旋转方向，单位为度（°）。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">hdrType<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#hdrtype12">HdrType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的HDR类型。不支持AVRecorder设置该属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">location<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#location">Location</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">视频的地理位置信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">customInfo<sup>12+</sup></td>         <td class="cellrowborder" width="20%">Record&lt;string, string&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">从moov.meta.list 获取的自定义参数键值映射。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">tracks<sup>20+</sup></td>         <td class="cellrowborder" width="20%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#mediadescription8">MediaDescription</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">媒体资源的轨道信息。不支持AVRecorder设置该属性。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="avmetadatatracks支持的mediadescriptionkey8说明" class="firsth2">AVMetadata.tracks支持的MediaDescriptionKey<sup>8+</sup>说明<i class="anchor-icon anchor-icon-link" anchorid="avmetadatatracks支持的mediadescriptionkey8说明" tips="复制节点链接"></i></h3>          <p>AVMetadata.tracks支持的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#mediadescriptionkey8">MediaDescriptionKey</a>的范围如下：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.4.1.3" width="33.33333333333333%">适用的轨道类型</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_TRACK_INDEX</td>         <td class="cellrowborder" width="33.33333333333333%">'track_index'</td>         <td class="cellrowborder" width="33.33333333333333%">全部</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_TRACK_TYPE</td>         <td class="cellrowborder" width="33.33333333333333%">'track_type'</td>         <td class="cellrowborder" width="33.33333333333333%">全部</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_CODEC_MIME</td>         <td class="cellrowborder" width="33.33333333333333%">'codec_mime'</td>         <td class="cellrowborder" width="33.33333333333333%">音频、视频</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_WIDTH</td>         <td class="cellrowborder" width="33.33333333333333%">'width'</td>         <td class="cellrowborder" width="33.33333333333333%">视频</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_HEIGHT</td>         <td class="cellrowborder" width="33.33333333333333%">'height'</td>         <td class="cellrowborder" width="33.33333333333333%">视频</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_FRAME_RATE</td>         <td class="cellrowborder" width="33.33333333333333%">'frame_rate'</td>         <td class="cellrowborder" width="33.33333333333333%">视频</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_AUD_CHANNEL_COUNT</td>         <td class="cellrowborder" width="33.33333333333333%">'channel_count'</td>         <td class="cellrowborder" width="33.33333333333333%">音频</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_AUD_SAMPLE_RATE</td>         <td class="cellrowborder" width="33.33333333333333%">'sample_rate'</td>         <td class="cellrowborder" width="33.33333333333333%">音频</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_HDR_TYPE<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">'hdr_type'</td>         <td class="cellrowborder" width="33.33333333333333%">视频</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_ORIGINAL_WIDTH<sup>21+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">'original_width'</td>         <td class="cellrowborder" width="33.33333333333333%">视频</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_ORIGINAL_HEIGHT<sup>21+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">'original_height'</td>         <td class="cellrowborder" width="33.33333333333333%">视频</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_BITRATE</td>         <td class="cellrowborder" width="33.33333333333333%">'bitrate'</td>         <td class="cellrowborder" width="33.33333333333333%">音频、视频（从API version 21开始，AVMetadata.tracks支持该值获取。）</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MD_KEY_AUD_SAMPLE_DEPTH<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">'sample_depth'</td>         <td class="cellrowborder" width="33.33333333333333%">音频（从API version 21开始，AVMetadata.tracks支持该值获取。）</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="pixelmapparams12" device-type="phone,2in1,tablet,wearable,tv">PixelMapParams<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pixelmapparams12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>获取视频缩略图时，输出缩略图的格式参数。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVImageGenerator</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">width</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">输出的缩略图宽度。应保证大于0且不大于原始视频宽度。否则返回的缩略图不会进行缩放。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">height</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">输出的缩略图高度。应保证大于0且不大于原始视频高度。否则返回的缩略图不会进行缩放。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="outputsize20" device-type="phone,2in1,tablet,wearable,tv">OutputSize<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="outputsize20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于获取视频缩略图时，来定义输出图像大小。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVImageGenerator</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">width</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>输出的缩略图宽度。</p>          <p>- 如果该值小于0，宽度是视频的原始宽度。</p>          <p>- 如果值为0或未分配任何值，缩放比例同高度比例。</p>          <p>- 如果宽度和高度均未分配任意值，则输出原始视频帧的宽度和高度。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">height</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>输出的缩略图高度。</p>          <p>- 如果该值小于0，高度是视频的原始高度。</p>          <p>- 如果值为0或未分配任何值，缩放比例同宽度比例。</p>          <p>- 如果宽度和高度均未分配任意值，则输出原始视频帧的宽度和高度。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="mediastream19" device-type="phone,2in1,tablet,wearable,tv">MediaStream<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediastream19" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>媒体流数据信息。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">url</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">媒体资源链接，当前仅支持http或者https。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">width</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">媒体资源视频宽像素值。未知时可以填0，此时将无法通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#playbackstrategy12">PlaybackStrategy</a>优选匹配。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">height</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">媒体资源视频高像素值。未知时可以填0，此时将无法通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#playbackstrategy12">PlaybackStrategy</a>优选匹配。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">bitrate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">媒体资源码率值，单位bps。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="mediasourceloader18" device-type="phone,2in1,tablet,wearable,tv">MediaSourceLoader<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mediasourceloader18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于定义媒体数据加载器，需要应用程序对其进行实现。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">open</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#sourceopencallback18">SourceOpenCallback</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">由应用程序实现的回调函数，用于处理资源打开请求。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">read</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#sourcereadcallback18">SourceReadCallback</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">由应用程序实现的回调函数，用于处理资源读取请求。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">close</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#sourceclosecallback18">SourceCloseCallback</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">由应用程序实现的回调函数，用于处理资源关闭请求。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgw-c106="" class="highlight-div"><div _ngcontent-tgw-c106="" class="highlight-div-header"><div _ngcontent-tgw-c106="" class="highlight-div-header-left"><div _ngcontent-tgw-c106="" class="handle-button expand-button"><div _ngcontent-tgw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgw-c106="" class="highlight-div-header-right"><div _ngcontent-tgw-c106="" class="handle-button ai-button"></div><div _ngcontent-tgw-c106="" class="handle-button line-button"><div _ngcontent-tgw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgw-c106="" class="handle-button theme-button"><div _ngcontent-tgw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgw-c106="" class="handle-button copy-button"><div _ngcontent-tgw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">HashMap</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.util.HashMap'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">headers</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {<span class="hljs-string">"User-Agent"</span> : <span class="hljs-string">"User-Agent-Value"</span>};</li><li><span class="hljs-keyword">let</span> mediaSource : media.<span class="hljs-property">MediaSource</span> = media.<span class="hljs-title function_">createMediaSourceWithUrl</span>(<span class="hljs-string">"http://xxx"</span>,  headers);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uuid</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">requests</span>: <span class="hljs-title class_">HashMap</span>&lt;<span class="hljs-built_in">number</span>, media.<span class="hljs-property">MediaSourceLoadingRequest</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediaSourceLoader</span>: media.<span class="hljs-property">MediaSourceLoader</span> = {</li><li>  <span class="hljs-attr">open</span>: <span class="hljs-function">(<span class="hljs-params">request: media.MediaSourceLoadingRequest</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Opening resource: <span class="hljs-subst">${request.url}</span>`</span>);</li><li>    <span class="hljs-comment">// 成功打开资源，返回唯一的句柄, 保证uuid和request对应。</span></li><li>    uuid += <span class="hljs-number">1</span>;</li><li>    requests.<span class="hljs-title function_">set</span>(uuid, request);</li><li>    <span class="hljs-keyword">return</span> uuid;</li><li>  },</li><li>  <span class="hljs-attr">read</span>: <span class="hljs-function">(<span class="hljs-params">uuid: <span class="hljs-built_in">number</span>, requestedOffset: <span class="hljs-built_in">number</span>, requestedLength: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Reading resource with handle <span class="hljs-subst">${uuid}</span>, offset: <span class="hljs-subst">${requestedOffset}</span>, length: <span class="hljs-subst">${requestedLength}</span>`</span>);</li><li>    <span class="hljs-comment">// 判断uuid是否合法、存储read请求，不要在read请求阻塞去推送数据和头信息。</span></li><li>  },</li><li>  <span class="hljs-attr">close</span>: <span class="hljs-function">(<span class="hljs-params">uuid: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Closing resource with handle <span class="hljs-subst">${uuid}</span>`</span>);</li><li>    <span class="hljs-comment">// 清除当前uuid相关资源。</span></li><li>    requests.<span class="hljs-title function_">remove</span>(uuid);</li><li>  }</li><li>};</li><li>
</li><li>mediaSource.<span class="hljs-title function_">setMediaResourceLoaderDelegate</span>(mediaSourceLoader);</li><li><span class="hljs-keyword">let</span> playStrategy : media.<span class="hljs-property">PlaybackStrategy</span> = {</li><li>  <span class="hljs-attr">preferredBufferDuration</span>: <span class="hljs-number">20</span>,</li><li>};</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setupPlayer</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> player = <span class="hljs-keyword">await</span> media.<span class="hljs-title function_">createAVPlayer</span>();</li><li>  player.<span class="hljs-title function_">setMediaSource</span>(mediaSource, playStrategy);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="playbackstrategy12" device-type="phone,2in1,tablet,wearable,tv">PlaybackStrategy<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="playbackstrategy12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>播放策略。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">preferredWidth</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>播放策略首选宽度，设置范围为大于0的整数，如1080，单位为像素（px）。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">preferredHeight</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>播放策略首选高度，设置范围为大于0的整数，如1920，单位为像素（px）。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">preferredBufferDuration</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>播放策略首选缓冲持续时间，单位为秒（s），取值范围[1, 20]。</p>          <p>具体使用方式可参考<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-online-video-playback-lags-practice" target="_blank">在线视频播放卡顿优化实践</a>。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">preferredHdr</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示播放策略是否为hdr。true表示是，false表示不是，默认为false。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enableSuperResolution<sup>18+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示是否使能超分功能。true表示使能超分，false表示不使能超分，默认为false。</p>          <p>若不使能超分，则后续不能调用超分相关接口。若使能超分，则超分功能默认开启，默认目标分辨率为1920x1080，单位为像素。</p>          <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">showFirstFrameOnPrepare<sup>17+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>播放策略true是Prepare之后显示视频起播首帧，false是Prepare之后不显示视频起播首帧，默认不显示。</p>          <p><strong>元服务API：</strong> 从API version 17开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">mutedMediaType</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#mediatype8">MediaType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>关闭输出的媒体类型。</p>          <p>API version 12-19，仅支持设置MediaType.MEDIA_TYPE_AUD。API version 20起，增加支持MediaType.MEDIA_TYPE_VID。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">preferredAudioLanguage<sup>13+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>播放策略首选音轨语言。dash场景下应用可按需设置。非dash场景暂不支持，建议缺省。</p>          <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">preferredSubtitleLanguage<sup>13+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>播放策略首选字幕语言。dash场景下应用可按需设置。非dash场景暂不支持，建议缺省。</p>          <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">preferredBufferDurationForPlaying<sup>18+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>播放策略首选起播缓冲水线。当起播缓冲时间超过该值，开始播放。单位为秒（s），取值范围[0, 20]。</p>          <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">thresholdForAutoQuickPlay<sup>18+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>智能追帧水线，单位为秒（s），取值应不小于2s，且需大于起播缓冲水线，默认设置为5s。</p>          <p>播放策略可以通过设置智能追帧水线来保证直播的实时性。flv直播场景下应用可按需设置，非flv直播场景暂不支持。网络状态的变化可能会导致播放器在某段时间内积压大量数据。播放器会定期检查当前播放时间与缓存中最新的帧时间戳之间的差值，当这个差值过大时，播放器将以1.2倍速开始智能追帧。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onspeeddone9">speedDone事件</a>会回调特定值100，表示智能追帧开启成功。当差值小于起播缓冲水线时，则停止追帧并恢复到正常播放速度。</p>          <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">keepDecodingOnMute<sup>20+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示在关闭视频媒体时解码器是否继续运行，用于方便快速打开媒体。目前仅支持视频。默认设置为false，表示当媒体关闭时，相应的解码器将停止运行以减少功耗。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="avscreencapturestrategy20" device-type="phone,2in1,tablet,tv">AVScreenCaptureStrategy<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avscreencapturestrategy20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>录屏策略。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">keepCaptureDuringCall</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">蜂窝通话时是否保持录屏。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enableBFrame</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>录屏是否使能B帧编码。true表示录屏文件使能B帧编码，false表示录屏文件禁用B帧编码，默认是false。</p>          <p>B帧视频编码相关的约束和限制可以参考文档<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-encoding-b-frame#约束和限制" target="_blank">B帧视频编码约束和限制</a>。如果当前不符合B帧视频编码的约束和限制，则正常录制不含B帧的视频，不会返回错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="avscreencapturerecordconfig12" device-type="phone,2in1,tablet,tv">AVScreenCaptureRecordConfig<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avscreencapturerecordconfig12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>表示录屏参数配置。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">fd</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">录制输出的文件fd。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">frameWidth</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">录屏的视频宽度，默认屏幕宽度，根据不同屏幕默认值不同，单位px。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">frameHeight</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">录屏的视频高度，默认屏幕高度，根据不同屏幕默认值不同，单位px。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">videoBitrate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">录屏的视频比特率，默认10000000。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioSampleRate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">录屏的音频采样率，内录的系统音和外录的麦克风都是用此采样率，默认48000，仅支持设置48000或16000。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioChannelCount</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">录屏的音频通道数，内录的系统音和外录的麦克风都是用此通道数，默认2声道，仅支持设置1或2声道。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioBitrate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">录屏的音频比特率，内录的系统音和外录的麦克风都是用此比特率，默认96000。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">preset</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#avscreencapturerecordpreset12">AVScreenCaptureRecordPreset</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">录屏使用的编码和封装格式，默认SCREEN_RECORD_PRESET_H264_AAC_MP4格式。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">displayId<sup>15+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">指定录屏使用的屏幕，默认主屏幕。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fillMode<sup>18+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#avscreencapturefillmode18">AVScreenCaptureFillMode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">录屏时视频流的填充模式。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">strategy<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avscreencapturestrategy20">AVScreenCaptureStrategy</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">录屏策略。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="audiorecorderconfigdeprecated" device-type="phone,2in1,tablet,wearable,tv">AudioRecorderConfig<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="audiorecorderconfigdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderconfig9">AVRecorderConfig</a>替代。</p>      </div></div></div>     <p>表示音频的录音配置。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioRecorder</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">audioEncoder</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#audioencoderdeprecated">AudioEncoder</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频编码格式，默认设置为AAC_LC。</p>          <p><strong>说明：</strong> 从API version 6开始支持，从API version 8开始废弃，建议使用audioEncoderMime替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioEncodeBitRate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频编码比特率，默认值为48000。</p>          <p><strong>说明：</strong> 从API version 6开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderprofile9">AVRecorderProfile</a>中的audioBitrate替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioSampleRate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频采集采样率，默认值为48000。</p>          <p>可变比特率模式，码率仅作参考。</p>          <p><strong>说明：</strong> 从API version 6开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderprofile9">AVRecorderProfile</a>中的audioSampleRate替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">numberOfChannels</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频采集声道数，默认值为2。</p>          <p><strong>说明：</strong> 从API version 6开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderprofile9">AVRecorderProfile</a>中的audioChannels替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">format</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#audiooutputformatdeprecated">AudioOutputFormat</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频输出封装格式，默认设置为MPEG_4。</p>          <p><strong>说明：</strong> 从API version 6开始支持，从API version 8开始废弃，建议使用fileFormat替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">location</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#location">Location</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频采集的地理位置。</p>          <p><strong>说明：</strong> 从API version 6开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avmetadata11">AVMetadata</a>中的location替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">uri</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>音频输出URI：fd://xx (fd number)</p>          <p><span><img originheight="89" originwidth="179" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115210.98385337816570781832849123485944:50001231000000:2800:11CA34CB88CE47A2BC3CDEEFF4CBA798E891B4F3A0B8663C125530420A82E805.png" class="notEnlarge" width="160" height="79.55307262569832"></span></p>          <p>文件需要由调用者创建，并赋予适当的权限。</p>          <p><strong>说明：</strong> 从API version 6开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderconfig9">AVRecorderConfig</a>中的url替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">audioEncoderMime<sup>8+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#codecmimetype8">CodecMimeType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>容器编码格式。</p>          <p><strong>说明：</strong> 从API version 8开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderprofile9">AVRecorderProfile</a>中的audioCodec替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fileFormat<sup>8+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#containerformattype8">ContainerFormatType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>音频编码格式。</p>          <p><strong>说明：</strong> 从API version 8开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#avrecorderprofile9">AVRecorderProfile</a>中的fileFormat替代。</p></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>