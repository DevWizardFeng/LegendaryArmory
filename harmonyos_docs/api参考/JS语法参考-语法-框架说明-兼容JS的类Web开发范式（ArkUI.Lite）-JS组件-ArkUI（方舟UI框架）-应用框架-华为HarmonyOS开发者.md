<h1 _ngcontent-dlg-c119="" class="doc-title ng-star-inserted" title="JS语法参考"> JS语法参考 </h1>

<div _ngcontent-dlg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>JS文件用来定义HML页面的业务逻辑，支持ECMA规范的JavaScript语言。基于JavaScript语言的动态化能力，可以使应用更加富有表现力，具备更加灵活的设计。下面讲述JS文件的编译和运行的支持情况。</p>  <div class="tiledSection"><h2 id="语法" device-type="phone,2in1,tablet,wearable,lite_wearable,tv">语法<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="语法" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span><span class="support-device-item">Lite Wearable</span></div><p>支持ES6语法。轻量级智能穿戴支持的ES6语法有限，仅支持以下ES6 语法：</p> <ol><li><p>let/const</p>  </li><li><p>arrow functions</p>  </li><li><p>class</p>  </li><li><p>default value</p>  </li><li><p>destructuring assignment</p>  </li><li><p>destructuring binding pattern</p>  </li><li><p>enhanced object initializer</p>  </li><li><p>for-of</p>  </li><li><p>rest parameter</p>  </li><li><p>template strings</p>  </li></ol> <ul><li><p>模块声明</p> <p>使用import方法引入功能模块：</p>  <div _ngcontent-dlg-c106="" class="highlight-div"><div _ngcontent-dlg-c106="" class="highlight-div-header"><div _ngcontent-dlg-c106="" class="highlight-div-header-left"><div _ngcontent-dlg-c106="" class="handle-button expand-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dlg-c106="" class="highlight-div-header-right"><div _ngcontent-dlg-c106="" class="handle-button ai-button"></div><div _ngcontent-dlg-c106="" class="handle-button line-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dlg-c106="" class="handle-button theme-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dlg-c106="" class="handle-button copy-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dlg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.router'</span>;</li></ol></pre></div></div>  </li><li><p>代码引用</p> <p>使用import方法导入js代码：</p>  <div _ngcontent-dlg-c106="" class="highlight-div"><div _ngcontent-dlg-c106="" class="highlight-div-header"><div _ngcontent-dlg-c106="" class="highlight-div-header-left"><div _ngcontent-dlg-c106="" class="handle-button expand-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dlg-c106="" class="highlight-div-header-right"><div _ngcontent-dlg-c106="" class="handle-button ai-button"></div><div _ngcontent-dlg-c106="" class="handle-button line-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dlg-c106="" class="handle-button theme-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dlg-c106="" class="handle-button copy-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dlg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> utils <span class="hljs-keyword">from</span> <span class="hljs-string">'../../common/utils.js'</span>;</li></ol></pre></div></div>  </li></ul> </div>  <div class="tiledSection"><h2 id="对象" device-type="phone,2in1,tablet,wearable,lite_wearable,tv">对象<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="对象" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span><span class="support-device-item">Lite Wearable</span></div><ul><li>页面对象 <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.1.1.4.1.1" width="33.33333333333333%">属性</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.1.1.4.1.2" width="33.33333333333333%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.1.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">data</td> <td class="cellrowborder" width="33.33333333333333%">Object/Function</td> <td class="cellrowborder" width="33.33333333333333%"><p>页面的数据模型，类型是对象或者函数，如果类型是函数，返回值必须是对象。属性名不能以$或_开头，不要使用保留字for, if, show, tid。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">$refs</td> <td class="cellrowborder" width="33.33333333333333%">Object</td> <td class="cellrowborder" width="33.33333333333333%">持有注册过ref 属性的DOM元素或子组件实例的对象。示例见<a href="/consumer/cn/doc/harmonyos-references/js-lite-framework-syntax-js#获取dom元素">获取DOM元素</a>。</td> </tr>  </tbody></table></div> </div>  </li></ul> </div>  <div class="tiledSection"><h2 id="获取dom元素" device-type="phone,2in1,tablet,wearable,lite_wearable,tv">获取DOM元素<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="获取dom元素" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span><span class="support-device-item">Lite Wearable</span></div><ol><li><p>通过$refs获取DOM元素</p>  <div _ngcontent-dlg-c106="" class="highlight-div"><div _ngcontent-dlg-c106="" class="highlight-div-header"><div _ngcontent-dlg-c106="" class="highlight-div-header-left"><div _ngcontent-dlg-c106="" class="handle-button expand-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dlg-c106="" class="highlight-div-header-right"><div _ngcontent-dlg-c106="" class="handle-button ai-button"></div><div _ngcontent-dlg-c106="" class="handle-button line-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dlg-c106="" class="handle-button theme-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dlg-c106="" class="handle-button copy-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dlg-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.hml --&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">image-animator</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"image-player"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"animator"</span> <span class="hljs-attr">images</span>=<span class="hljs-string">"{{images}}"</span> <span class="hljs-attr">duration</span>=<span class="hljs-string">"1s"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"handleClick"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">image-animator</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li></ol></pre></div></div>  <div _ngcontent-dlg-c106="" class="highlight-div"><div _ngcontent-dlg-c106="" class="highlight-div-header"><div _ngcontent-dlg-c106="" class="highlight-div-header-left"><div _ngcontent-dlg-c106="" class="handle-button expand-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dlg-c106="" class="highlight-div-header-right"><div _ngcontent-dlg-c106="" class="handle-button ai-button"></div><div _ngcontent-dlg-c106="" class="handle-button line-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dlg-c106="" class="handle-button theme-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dlg-c106="" class="handle-button copy-button"><div _ngcontent-dlg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dlg-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.js</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>  <span class="hljs-attr">data</span>: {</li><li>    <span class="hljs-attr">images</span>: [</li><li>      { <span class="hljs-attr">src</span>: <span class="hljs-string">'/common/frame1.png'</span> },</li><li>      { <span class="hljs-attr">src</span>: <span class="hljs-string">'/common/frame2.png'</span> },</li><li>      { <span class="hljs-attr">src</span>: <span class="hljs-string">'/common/frame3.png'</span> },</li><li>    ],</li><li>  },</li><li>  <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">const</span> animator = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">animator</span>; <span class="hljs-comment">// 获取ref属性为animator的DOM元素</span></li><li>    <span class="hljs-keyword">const</span> state = animator.<span class="hljs-title function_">getState</span>();</li><li>    <span class="hljs-keyword">if</span> (state === <span class="hljs-string">'paused'</span>) {</li><li>      animator.<span class="hljs-title function_">resume</span>();</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (state === <span class="hljs-string">'stopped'</span>) {</li><li>      animator.<span class="hljs-title function_">start</span>();</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      animator.<span class="hljs-title function_">pause</span>();</li><li>    }</li><li>  },</li><li>};</li></ol></pre></div></div>  </li></ol> </div> </div> <div></div></div>