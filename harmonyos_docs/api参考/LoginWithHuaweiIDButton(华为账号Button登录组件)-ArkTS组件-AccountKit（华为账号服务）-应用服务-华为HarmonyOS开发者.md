<h1 _ngcontent-afv-c119="" class="doc-title ng-star-inserted" title="LoginWithHuaweiIDButton (华为账号Button登录组件)"> LoginWithHuaweiIDButton (华为账号Button登录组件) </h1>

<div _ngcontent-afv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供LoginWithHuaweiIDButton组件，应用通过集成该组件完成华为账号登录功能。</p> <p>LoginWithHuaweiIDButton需要配合<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-component-manager">loginComponentManager</a>一起使用，用于实现华为账号登录功能。LoginWithHuaweiIDButton组件文本内容默认支持多语言。</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <div class="tiledSection"><h2 id="section16609101116259" device-type="phone,2in1,tablet,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-afv-c106="" class="highlight-div"><div _ngcontent-afv-c106="" class="highlight-div-header"><div _ngcontent-afv-c106="" class="highlight-div-header-left"><div _ngcontent-afv-c106="" class="handle-button expand-button"><div _ngcontent-afv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afv-c106="" class="highlight-div-header-right"><div _ngcontent-afv-c106="" class="handle-button ai-button"></div><div _ngcontent-afv-c106="" class="handle-button line-button"><div _ngcontent-afv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afv-c106="" class="handle-button theme-button"><div _ngcontent-afv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afv-c106="" class="handle-button copy-button"><div _ngcontent-afv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afv-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LoginWithHuaweiIDButton</span>, loginComponentManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1624716107193" device-type="phone,2in1,tablet,tv">LoginWithHuaweiIDButton<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1624716107193" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>该类为用来展示登录华为账号按钮的UI组件。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>装饰器类型：</strong>@Component</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AuthenticationServices.HuaweiID.UIComponent</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.8.1.6.1.1" width="11.93%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.6.1.2" width="20.54%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.6.1.3" width="16.82%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.6.1.4" width="17.89%"><p>装饰器类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.6.1.5" width="32.82%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="11.93%"><p>params</p> </td> <td class="cellrowborder" width="20.54%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-component-manager#section4717249182518">LoginWithHuaweiIDButtonParams</a></p> </td> <td class="cellrowborder" width="16.82%"><p>是</p> </td> <td class="cellrowborder" width="17.89%"><p>-</p> </td> <td class="cellrowborder" width="32.82%"><p>LoginWithHuaweiIDButton组件参数。</p> </td> </tr> <tr><td class="cellrowborder" width="11.93%"><p>controller</p> </td> <td class="cellrowborder" width="20.54%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-component-manager#section6921622144614">LoginWithHuaweiIDButtonController</a></p> </td> <td class="cellrowborder" width="16.82%"><p>是</p> </td> <td class="cellrowborder" width="17.89%"><p>-</p> </td> <td class="cellrowborder" width="32.82%"><p>LoginWithHuaweiIDButton组件控制器用来接收组件的点击事件。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section193571332102617" device-type="phone,2in1,tablet,tv" class="firsth2">build<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section193571332102617" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>build(): void</p> <p>用于创建<a href="/consumer/cn/doc/harmonyos-references/account-api-huawei-id-button#section1624716107193">LoginWithHuaweiIDButton</a>对象的构造函数。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.AuthenticationServices.HuaweiID.UIComponent</p> <p><strong>起始版本：</strong>4.1.0(11)</p> </div> <div class="p"><strong>示例：</strong><div _ngcontent-afv-c106="" class="highlight-div"><div _ngcontent-afv-c106="" class="highlight-div-header"><div _ngcontent-afv-c106="" class="highlight-div-header-left"><div _ngcontent-afv-c106="" class="handle-button expand-button"><div _ngcontent-afv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afv-c106="" class="highlight-div-header-right"><div _ngcontent-afv-c106="" class="handle-button ai-button"></div><div _ngcontent-afv-c106="" class="handle-button line-button"><div _ngcontent-afv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afv-c106="" class="handle-button theme-button"><div _ngcontent-afv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afv-c106="" class="handle-button copy-button"><div _ngcontent-afv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afv-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { loginComponentManager, <span class="hljs-title class_">LoginWithHuaweiIDButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">QuickLoginButtonComponent</span> {</li><li>  <span class="hljs-attr">logTag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'QuickLoginButtonComponent'</span>;</li><li>  <span class="hljs-attr">domainId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0x0000</span>;</li><li>  <span class="hljs-comment">// 参考华为账号开发指南获取匿名手机号</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">quickLoginAnonymousPhone</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-comment">// 展示用户服务协议、隐私协议和华为账号用户认证协议</span></li><li>  <span class="hljs-attr">privacyText</span>: loginComponentManager.<span class="hljs-property">PrivacyText</span>[] = [{</li><li>    <span class="hljs-attr">text</span>: <span class="hljs-string">'已阅读并同意'</span>,</li><li>    <span class="hljs-attr">type</span>: loginComponentManager.<span class="hljs-property">TextType</span>.<span class="hljs-property">PLAIN_TEXT</span></li><li>  }, {</li><li>    <span class="hljs-attr">text</span>: <span class="hljs-string">'《用户服务协议》 '</span>,</li><li>    <span class="hljs-attr">tag</span>: <span class="hljs-string">'用户服务协议'</span>,</li><li>    <span class="hljs-attr">type</span>: loginComponentManager.<span class="hljs-property">TextType</span>.<span class="hljs-property">RICH_TEXT</span></li><li>  }, {</li><li>    <span class="hljs-attr">text</span>: <span class="hljs-string">'《隐私协议》'</span>,</li><li>    <span class="hljs-attr">tag</span>: <span class="hljs-string">'隐私协议'</span>,</li><li>    <span class="hljs-attr">type</span>: loginComponentManager.<span class="hljs-property">TextType</span>.<span class="hljs-property">RICH_TEXT</span></li><li>  }, {</li><li>    <span class="hljs-attr">text</span>: <span class="hljs-string">'和'</span>,</li><li>    <span class="hljs-attr">type</span>: loginComponentManager.<span class="hljs-property">TextType</span>.<span class="hljs-property">PLAIN_TEXT</span></li><li>  }, {</li><li>    <span class="hljs-attr">text</span>: <span class="hljs-string">'《华为账号用户认证协议》'</span>,</li><li>    <span class="hljs-attr">tag</span>: <span class="hljs-string">'华为账号用户认证协议'</span>,</li><li>    <span class="hljs-attr">type</span>: loginComponentManager.<span class="hljs-property">TextType</span>.<span class="hljs-property">RICH_TEXT</span></li><li>  }];</li><li>  <span class="hljs-comment">// 构造LoginWithHuaweiIDButton组件的控制器</span></li><li>  <span class="hljs-attr">controller</span>: loginComponentManager.<span class="hljs-property">LoginWithHuaweiIDButtonController</span> =</li><li>    <span class="hljs-keyword">new</span> loginComponentManager.<span class="hljs-title class_">LoginWithHuaweiIDButtonController</span>()</li><li>      <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">       * 当应用使用自定义的登录页时，如果用户未同意协议，需要设置协议状态为NOT_ACCEPTED，当用户同意协议后再设置</span></li><li><span class="hljs-comment">       * 协议状态为ACCEPTED，才可以使用华为账号一键登录功能</span></li><li><span class="hljs-comment">       */</span></li><li>      .<span class="hljs-title function_">setAgreementStatus</span>(loginComponentManager.<span class="hljs-property">AgreementStatus</span>.<span class="hljs-property">NOT_ACCEPTED</span>)</li><li>      .<span class="hljs-title function_">onClickLoginWithHuaweiIDButton</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, response: loginComponentManager.HuaweiIDCredential</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (error) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dealAllError</span>(error);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-keyword">if</span> (response) {</li><li>          <span class="hljs-comment">// 获取到Authorization Code</span></li><li>          <span class="hljs-keyword">const</span> authorizationCode = response.<span class="hljs-property">authorizationCode</span>;</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in getting response.'</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>      })</li><li>      .<span class="hljs-title function_">onClickEvent</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, clickEvent: loginComponentManager.ClickEvent</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (error) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dealAllError</span>(error);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`onClickEvent clickEvent: <span class="hljs-subst">${clickEvent}</span>`</span>);</li><li>      });</li><li>
</li><li>  <span class="hljs-comment">// 错误处理</span></li><li>  <span class="hljs-title function_">dealAllError</span>(<span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span>): <span class="hljs-built_in">void</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to login, errorCode=<span class="hljs-subst">${error.code}</span>, errorMsg=<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-comment">// 在应用登录涉及UI交互场景下，建议按照如下错误码指导提示用户</span></li><li>    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-title class_">ErrorCode</span>.<span class="hljs-property">ERROR_CODE_LOGIN_OUT</span>) {</li><li>      <span class="hljs-comment">// 用户未登录华为账号，请登录华为账号并重试或者尝试使用其他方式登录</span></li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-title class_">ErrorCode</span>.<span class="hljs-property">ERROR_CODE_NETWORK_ERROR</span>) {</li><li>      <span class="hljs-comment">// 网络异常，请检查当前网络状态并重试或者尝试使用其他方式登录</span></li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-title class_">ErrorCode</span>.<span class="hljs-property">ERROR_CODE_INTERNAL_ERROR</span>) {</li><li>      <span class="hljs-comment">// 登录失败，请尝试使用其他方式登录</span></li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-title class_">ErrorCode</span>.<span class="hljs-property">ERROR_CODE_USER_CANCEL</span>) {</li><li>      <span class="hljs-comment">// 用户取消授权</span></li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-title class_">ErrorCode</span>.<span class="hljs-property">ERROR_CODE_SYSTEM_SERVICE</span>) {</li><li>      <span class="hljs-comment">// 系统服务异常，请稍后重试或者尝试使用其他方式登录</span></li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-title class_">ErrorCode</span>.<span class="hljs-property">ERROR_CODE_REQUEST_REFUSE</span>) {</li><li>      <span class="hljs-comment">// 重复请求，应用无需处理</span></li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">code</span> === <span class="hljs-title class_">ErrorCode</span>.<span class="hljs-property">ERROR_CODE_AGREEMENT_STATUS_NOT_ACCEPTED</span>) {</li><li>      <span class="hljs-comment">// 用户未同意协议</span></li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-comment">// 应用登录失败，请尝试使用其他方式登录</span></li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Scroll</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Column</span>() {</li><li>            <span class="hljs-comment">// 此处为示例资源，开发者可使用应用图标进行替换，以保证正常编译运行</span></li><li>            <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.app_icon'</span>))</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-number">48</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-number">48</span>)</li><li>              .<span class="hljs-title function_">draggable</span>(<span class="hljs-literal">false</span>)</li><li>              .<span class="hljs-title function_">copyOption</span>(<span class="hljs-title class_">CopyOptions</span>.<span class="hljs-property">None</span>)</li><li>              .<span class="hljs-title function_">onComplete</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'appIcon loading success'</span>);</li><li>              })</li><li>              .<span class="hljs-title function_">onError</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'appIcon loading fail'</span>);</li><li>              })</li><li>
</li><li>            <span class="hljs-title class_">Text</span>($r(<span class="hljs-string">'app.string.app_name'</span>))</li><li>              .<span class="hljs-title function_">fontFamily</span>($r(<span class="hljs-string">'sys.string.ohos_id_text_font_family_medium'</span>))</li><li>              .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)</li><li>              .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>              .<span class="hljs-title function_">maxFontSize</span>($r(<span class="hljs-string">'sys.float.ohos_id_text_size_headline8'</span>))</li><li>              .<span class="hljs-title function_">minFontSize</span>($r(<span class="hljs-string">'sys.float.ohos_id_text_size_body1'</span>))</li><li>              .<span class="hljs-title function_">maxLines</span>(<span class="hljs-number">1</span>)</li><li>              .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_text_primary'</span>))</li><li>              .<span class="hljs-title function_">constraintSize</span>({ <span class="hljs-attr">maxWidth</span>: <span class="hljs-string">'100%'</span> })</li><li>              .<span class="hljs-title function_">margin</span>({</li><li>                <span class="hljs-attr">top</span>: <span class="hljs-number">12</span>,</li><li>              })</li><li>
</li><li>            <span class="hljs-title class_">Text</span>(<span class="hljs-string">'应用描述'</span>)</li><li>              .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'sys.float.ohos_id_text_size_body2'</span>))</li><li>              .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_text_secondary'</span>))</li><li>              .<span class="hljs-title function_">fontFamily</span>($r(<span class="hljs-string">'sys.string.ohos_id_text_font_family_regular'</span>))</li><li>              .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Regular</span>)</li><li>              .<span class="hljs-title function_">constraintSize</span>({ <span class="hljs-attr">maxWidth</span>: <span class="hljs-string">'100%'</span> })</li><li>              .<span class="hljs-title function_">margin</span>({</li><li>                <span class="hljs-attr">top</span>: <span class="hljs-number">8</span>,</li><li>              })</li><li>          }.<span class="hljs-title function_">margin</span>({</li><li>            <span class="hljs-attr">top</span>: <span class="hljs-number">100</span></li><li>          })</li><li>
</li><li>          <span class="hljs-title class_">Column</span>() {</li><li>            <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">quickLoginAnonymousPhone</span>)</li><li>              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">36</span>)</li><li>              .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_text_primary'</span>))</li><li>              .<span class="hljs-title function_">fontFamily</span>($r(<span class="hljs-string">'sys.string.ohos_id_text_font_family_medium'</span>))</li><li>              .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>              .<span class="hljs-title function_">lineHeight</span>(<span class="hljs-number">48</span>)</li><li>              .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>              .<span class="hljs-title function_">maxLines</span>(<span class="hljs-number">1</span>)</li><li>              .<span class="hljs-title function_">constraintSize</span>({ <span class="hljs-attr">maxWidth</span>: <span class="hljs-string">'100%'</span>, <span class="hljs-attr">minHeight</span>: <span class="hljs-number">48</span> })</li><li>
</li><li>            <span class="hljs-title class_">Text</span>(<span class="hljs-string">'华为账号绑定号码'</span>)</li><li>              .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'sys.float.ohos_id_text_size_body2'</span>))</li><li>              .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_text_secondary'</span>))</li><li>              .<span class="hljs-title function_">fontFamily</span>($r(<span class="hljs-string">'sys.string.ohos_id_text_font_family_regular'</span>))</li><li>              .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Regular</span>)</li><li>              .<span class="hljs-title function_">lineHeight</span>(<span class="hljs-number">19</span>)</li><li>              .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>              .<span class="hljs-title function_">maxLines</span>(<span class="hljs-number">1</span>)</li><li>              .<span class="hljs-title function_">constraintSize</span>({ <span class="hljs-attr">maxWidth</span>: <span class="hljs-string">'100%'</span> })</li><li>              .<span class="hljs-title function_">margin</span>({</li><li>                <span class="hljs-attr">top</span>: <span class="hljs-number">8</span></li><li>              })</li><li>          }.<span class="hljs-title function_">margin</span>({</li><li>            <span class="hljs-attr">top</span>: <span class="hljs-number">64</span></li><li>          })</li><li>
</li><li>          <span class="hljs-title class_">Column</span>() {</li><li>            <span class="hljs-title class_">LoginWithHuaweiIDButton</span>({</li><li>              <span class="hljs-attr">params</span>: {</li><li>                <span class="hljs-comment">// LoginWithHuaweiIDButton支持的样式</span></li><li>                <span class="hljs-attr">style</span>: loginComponentManager.<span class="hljs-property">Style</span>.<span class="hljs-property">BUTTON_RED</span>,</li><li>                <span class="hljs-comment">// 账号登录按钮在登录过程中展示加载态</span></li><li>                <span class="hljs-attr">extraStyle</span>: {</li><li>                  <span class="hljs-attr">buttonStyle</span>: <span class="hljs-keyword">new</span> loginComponentManager.<span class="hljs-title class_">ButtonStyle</span>().<span class="hljs-title function_">loadingStyle</span>({</li><li>                    <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span></li><li>                  })</li><li>                },</li><li>                <span class="hljs-comment">// LoginWithHuaweiIDButton的边框圆角半径</span></li><li>                <span class="hljs-attr">borderRadius</span>: <span class="hljs-number">24</span>,</li><li>                <span class="hljs-comment">// LoginWithHuaweiIDButton支持的登录类型</span></li><li>                <span class="hljs-attr">loginType</span>: loginComponentManager.<span class="hljs-property">LoginType</span>.<span class="hljs-property">QUICK_LOGIN</span>,</li><li>                <span class="hljs-comment">// LoginWithHuaweiIDButton支持按钮的样式跟随系统深浅色模式切换</span></li><li>                <span class="hljs-attr">supportDarkMode</span>: <span class="hljs-literal">true</span></li><li>              },</li><li>              <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>            })</li><li>          }</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">margin</span>({</li><li>            <span class="hljs-attr">top</span>: <span class="hljs-number">56</span></li><li>          })</li><li>
</li><li>          <span class="hljs-title class_">Column</span>() {</li><li>            <span class="hljs-title class_">Button</span>({</li><li>              <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>,</li><li>              <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span></li><li>            }) {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'其他方式登录'</span>)</li><li>                .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_text_primary_activated'</span>))</li><li>                .<span class="hljs-title function_">fontFamily</span>($r(<span class="hljs-string">'sys.string.ohos_id_text_font_family_medium'</span>))</li><li>                .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'sys.float.ohos_id_text_size_button1'</span>))</li><li>                .<span class="hljs-title function_">focusable</span>(<span class="hljs-literal">true</span>)</li><li>                .<span class="hljs-title function_">focusOnTouch</span>(<span class="hljs-literal">true</span>)</li><li>                .<span class="hljs-title function_">textOverflow</span>({ <span class="hljs-attr">overflow</span>: <span class="hljs-title class_">TextOverflow</span>.<span class="hljs-property">Ellipsis</span> })</li><li>                .<span class="hljs-title function_">maxLines</span>(<span class="hljs-number">1</span>)</li><li>                .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">8</span> })</li><li>            }</li><li>            .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_text_primary_activated'</span>))</li><li>            .<span class="hljs-title function_">fontFamily</span>($r(<span class="hljs-string">'sys.string.ohos_id_text_font_family_medium'</span>))</li><li>            .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)</li><li>            .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_button_normal'</span>))</li><li>            .<span class="hljs-title function_">focusable</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">focusOnTouch</span>(<span class="hljs-literal">true</span>)</li><li>            .<span class="hljs-title function_">constraintSize</span>({ <span class="hljs-attr">minHeight</span>: <span class="hljs-number">40</span> })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">domainId</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">logTag</span>, <span class="hljs-string">'click optionalLoginButton.'</span>);</li><li>            })</li><li>          }.<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">16</span> })</li><li>        }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>
</li><li>        <span class="hljs-title class_">Row</span>() {</li><li>          <span class="hljs-title class_">Row</span>() {</li><li>            <span class="hljs-title class_">Checkbox</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'privacyCheckbox'</span>, <span class="hljs-attr">group</span>: <span class="hljs-string">'privacyCheckboxGroup'</span> })</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-number">24</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-number">24</span>)</li><li>              .<span class="hljs-title function_">focusable</span>(<span class="hljs-literal">true</span>)</li><li>              .<span class="hljs-title function_">focusOnTouch</span>(<span class="hljs-literal">true</span>)</li><li>              .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">0</span> })</li><li>              .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (value) {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setAgreementStatus</span>(loginComponentManager.<span class="hljs-property">AgreementStatus</span>.<span class="hljs-property">ACCEPTED</span>);</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setAgreementStatus</span>(loginComponentManager.<span class="hljs-property">AgreementStatus</span>.<span class="hljs-property">NOT_ACCEPTED</span>);</li><li>                }</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`agreementChecked: <span class="hljs-subst">${value}</span>`</span>);</li><li>              })</li><li>          }</li><li>
</li><li>          <span class="hljs-title class_">Row</span>() {</li><li>            <span class="hljs-title class_">Text</span>() {</li><li>              <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">privacyText</span>, <span class="hljs-function">(<span class="hljs-params">item: loginComponentManager.PrivacyText</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (item?.<span class="hljs-property">type</span> === loginComponentManager.<span class="hljs-property">TextType</span>.<span class="hljs-property">PLAIN_TEXT</span> &amp;&amp; item?.<span class="hljs-property">text</span>) {</li><li>                  <span class="hljs-title class_">Span</span>(item?.<span class="hljs-property">text</span>)</li><li>                    .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_text_secondary'</span>))</li><li>                    .<span class="hljs-title function_">fontFamily</span>($r(<span class="hljs-string">'sys.string.ohos_id_text_font_family_regular'</span>))</li><li>                    .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Regular</span>)</li><li>                    .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'sys.float.ohos_id_text_size_body3'</span>))</li><li>                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (item?.<span class="hljs-property">type</span> === loginComponentManager.<span class="hljs-property">TextType</span>.<span class="hljs-property">RICH_TEXT</span> &amp;&amp; item?.<span class="hljs-property">text</span>) {</li><li>                  <span class="hljs-title class_">Span</span>(item?.<span class="hljs-property">text</span>)</li><li>                    .<span class="hljs-title function_">fontColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_text_primary_activated'</span>))</li><li>                    .<span class="hljs-title function_">fontFamily</span>($r(<span class="hljs-string">'sys.string.ohos_id_text_font_family_medium'</span>))</li><li>                    .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)</li><li>                    .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'sys.float.ohos_id_text_size_body3'</span>))</li><li>                    .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                      <span class="hljs-comment">// 应用需要根据item.tag实现协议页面的跳转逻辑</span></li><li>                      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`click privacy text tag: <span class="hljs-subst">${item.tag}</span>`</span>);</li><li>                    })</li><li>                }</li><li>              }, <span class="hljs-function">(<span class="hljs-params">item: loginComponentManager.PrivacyText</span>) =&gt;</span> item.<span class="hljs-property">text</span>.<span class="hljs-title function_">toString</span>())</li><li>            }</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          }</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">12</span> })</li><li>          .<span class="hljs-title function_">layoutWeight</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">constraintSize</span>({ <span class="hljs-attr">minHeight</span>: <span class="hljs-number">24</span> })</li><li>        }</li><li>        .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Top</span>)</li><li>        .<span class="hljs-title function_">margin</span>({</li><li>          <span class="hljs-attr">top</span>: <span class="hljs-number">16</span>,</li><li>          <span class="hljs-attr">bottom</span>: <span class="hljs-number">16</span></li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">SpaceBetween</span>)</li><li>      .<span class="hljs-title function_">constraintSize</span>({ <span class="hljs-attr">minHeight</span>: <span class="hljs-string">'100%'</span> })</li><li>      .<span class="hljs-title function_">margin</span>({</li><li>        <span class="hljs-attr">left</span>: <span class="hljs-number">16</span>,</li><li>        <span class="hljs-attr">right</span>: <span class="hljs-number">16</span></li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ErrorCode</span> {</li><li>  <span class="hljs-comment">// 账号未登录</span></li><li>  <span class="hljs-variable constant_">ERROR_CODE_LOGIN_OUT</span> = <span class="hljs-number">1001502001</span>,</li><li>  <span class="hljs-comment">// 网络错误</span></li><li>  <span class="hljs-variable constant_">ERROR_CODE_NETWORK_ERROR</span> = <span class="hljs-number">1001502005</span>,</li><li>  <span class="hljs-comment">// 内部错误</span></li><li>  <span class="hljs-variable constant_">ERROR_CODE_INTERNAL_ERROR</span> = <span class="hljs-number">1001502009</span>,</li><li>  <span class="hljs-comment">// 用户取消授权</span></li><li>  <span class="hljs-variable constant_">ERROR_CODE_USER_CANCEL</span> = <span class="hljs-number">1001502012</span>,</li><li>  <span class="hljs-comment">// 系统服务异常</span></li><li>  <span class="hljs-variable constant_">ERROR_CODE_SYSTEM_SERVICE</span> = <span class="hljs-number">12300001</span>,</li><li>  <span class="hljs-comment">// 用户未同意用户协议</span></li><li>  <span class="hljs-variable constant_">ERROR_CODE_AGREEMENT_STATUS_NOT_ACCEPTED</span> = <span class="hljs-number">1005300001</span>,</li><li>  <span class="hljs-comment">// 重复请求</span></li><li>  <span class="hljs-variable constant_">ERROR_CODE_REQUEST_REFUSE</span> = <span class="hljs-number">1001500002</span></li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>