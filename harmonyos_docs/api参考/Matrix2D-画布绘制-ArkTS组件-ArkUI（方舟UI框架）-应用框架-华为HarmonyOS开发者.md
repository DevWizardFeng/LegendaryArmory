<h1 _ngcontent-ffb-c119="" class="doc-title ng-star-inserted" title="Matrix2D"> Matrix2D </h1>

<div _ngcontent-ffb-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>矩阵对象，可以对矩阵进行缩放、旋转和平移等变换。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 8 开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>  </div></div></div>  <div class="tiledSection"><h2 id="构造函数" device-type="phone,2in1,tablet,wearable,tv">构造函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="构造函数" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="constructor10" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor10" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p> <p>构造二维变换矩阵对象，默认值是属性全为0的矩阵。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> </div>  <div class="tiledSection"><h3 id="constructor12" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(unit: LengthMetricsUnit)</p> <p>构造二维变换矩阵对象，默认值是属性全为0的矩阵，支持配置Matrix2D对象的单位模式。</p> <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">unit</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-graphics#lengthmetricsunit12">LengthMetricsUnit</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>用来配置Matrix2D对象的单位模式，配置后无法动态更改，配置方法同<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-canvasrenderingcontext2d">CanvasRenderingContext2D</a>。</p> <p>异常值NaN和Infinity按默认值处理。</p> <p>默认值：DEFAULT</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">scaleX</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>水平缩放系数，取值范围无限制。</p> <p>异常值undefined按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> </td> </tr> <tr><td class="cellrowborder" width="20%">scaleY</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>垂直缩放系数，取值范围无限制。</p> <p>异常值undefined按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> </td> </tr> <tr><td class="cellrowborder" width="20%">rotateX</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>水平倾斜系数，取值范围无限制。</p> <p>异常值undefined按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> </td> </tr> <tr><td class="cellrowborder" width="20%">rotateY</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>垂直倾斜系数，取值范围无限制。</p> <p>异常值undefined按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> </td> </tr> <tr><td class="cellrowborder" width="20%">translateX</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>水平平移距离，取值范围无限制。</p> <p>异常值undefined按无效值处理，NaN和Infinity会导致Matrix2D异常。 </p> <p>默认单位：vp</p> </td> </tr> <tr><td class="cellrowborder" width="20%">translateY</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>垂直平移距离，取值范围无限制。</p> <p>异常值undefined按无效值处理，NaN和Infinity会导致Matrix2D异常。 </p> <p>默认单位：vp</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p> 可使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units#px2vpdeprecated">px2vp</a>接口进行单位转换。</p>  </div></div></div> <p><strong>示例：</strong></p> <div _ngcontent-ffb-c106="" class="highlight-div"><div _ngcontent-ffb-c106="" class="highlight-div-header"><div _ngcontent-ffb-c106="" class="highlight-div-header-left"><div _ngcontent-ffb-c106="" class="handle-button expand-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffb-c106="" class="highlight-div-header-right"><div _ngcontent-ffb-c106="" class="handle-button ai-button"></div><div _ngcontent-ffb-c106="" class="handle-button line-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffb-c106="" class="handle-button theme-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffb-c106="" class="handle-button copy-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Parameter</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">settings</span>: <span class="hljs-title class_">RenderingContextSettings</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingContextSettings</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">CanvasRenderingContext2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanvasRenderingContext2D</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">matrix</span>: <span class="hljs-title class_">Matrix2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix2D</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'240vp'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'180vp'</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffff00'</span>)</li><li>        .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">100</span>, <span class="hljs-number">20</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleX</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleY</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateX</span> = -<span class="hljs-number">0.5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateY</span> = <span class="hljs-number">0.5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateX</span> = <span class="hljs-number">10</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateY</span> = <span class="hljs-number">10</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">setTransform</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">100</span>, <span class="hljs-number">20</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="134" originwidth="179" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115621.55417268910281701256660770309134:50001231000000:2800:B18DCC2C507EA5B3EA5F71A52E767807C335AF7A5F422FB5B278DE4539C14253.png" class="notEnlarge" width="179" height="134"></span></p> </div>  <div class="tiledSection"><h2 id="方法" device-type="phone,2in1,tablet,wearable,tv">方法<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="方法" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="identity" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">identity<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="identity" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>identity(): Matrix2D</p> <p>创建单位矩阵。</p> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Matrix2D</td> <td class="cellrowborder" width="50%">单位矩阵。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ffb-c106="" class="highlight-div"><div _ngcontent-ffb-c106="" class="highlight-div-header"><div _ngcontent-ffb-c106="" class="highlight-div-header-left"><div _ngcontent-ffb-c106="" class="handle-button expand-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffb-c106="" class="highlight-div-header-right"><div _ngcontent-ffb-c106="" class="handle-button ai-button"></div><div _ngcontent-ffb-c106="" class="handle-button line-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffb-c106="" class="handle-button theme-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffb-c106="" class="handle-button copy-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Identity</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">settings</span>: <span class="hljs-title class_">RenderingContextSettings</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingContextSettings</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">CanvasRenderingContext2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanvasRenderingContext2D</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">matrix</span>: <span class="hljs-title class_">Matrix2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix2D</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'240vp'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'180vp'</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffff00'</span>)</li><li>        .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">100</span>, <span class="hljs-number">20</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-title function_">identity</span>()</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">setTransform</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="134" originwidth="179" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115621.79815131021835149040394510731500:50001231000000:2800:226A9D15B74F325A784BAB2FBD4502F24343FE13C79A9D243E96F7ECAF16E150.png" class="notEnlarge" width="179" height="134"></span></p> </div>  <div class="tiledSection"><h3 id="invert" device-type="phone,2in1,tablet,wearable,tv">invert<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="invert" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>invert(): Matrix2D</p> <p>获取当前矩阵的逆矩阵。</p> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Matrix2D</td> <td class="cellrowborder" width="50%">逆矩阵结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ffb-c106="" class="highlight-div"><div _ngcontent-ffb-c106="" class="highlight-div-header"><div _ngcontent-ffb-c106="" class="highlight-div-header-left"><div _ngcontent-ffb-c106="" class="handle-button expand-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffb-c106="" class="highlight-div-header-right"><div _ngcontent-ffb-c106="" class="handle-button ai-button"></div><div _ngcontent-ffb-c106="" class="handle-button line-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffb-c106="" class="handle-button theme-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffb-c106="" class="handle-button copy-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Invert</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">settings</span>: <span class="hljs-title class_">RenderingContextSettings</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingContextSettings</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">CanvasRenderingContext2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanvasRenderingContext2D</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">matrix</span>: <span class="hljs-title class_">Matrix2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix2D</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'240vp'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'180vp'</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffff00'</span>)</li><li>        .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">100</span>, <span class="hljs-number">110</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleX</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleY</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateX</span> = -<span class="hljs-number">0.5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateY</span> = <span class="hljs-number">0.5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateX</span> = <span class="hljs-number">10</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateY</span> = <span class="hljs-number">10</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-title function_">invert</span>()</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">setTransform</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">100</span>, <span class="hljs-number">110</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="134" originwidth="179" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115621.74200744667801804623316783924937:50001231000000:2800:37B8B25B6865DDF57568A40313ACBE297810817AB0C677C80CD8995FC02A2F37.png" class="notEnlarge" width="179" height="134"></span></p> </div>  <div class="tiledSection"><h3 id="multiplydeprecated">multiply<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-link" anchorid="multiplydeprecated" tips="复制节点链接"></i></h3><p>multiply(other?: Matrix2D): Matrix2D</p> <p>当前矩阵与目标矩阵相乘。</p> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。该接口为空接口。</p> <p>该接口从API version 10开始废弃，且无实际绘制效果，故不提供示例。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">other</td> <td class="cellrowborder" width="25%">Matrix2D</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>目标矩阵。</p> <p>异常值undefined和null按无效值处理。</p> <p>默认值：null</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Matrix2D</td> <td class="cellrowborder" width="50%">相乘结果矩阵。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="rotatedeprecated">rotate<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-link" anchorid="rotatedeprecated" tips="复制节点链接"></i></h3><p>rotate(rx?: number, ry?: number): Matrix2D</p> <p>对当前矩阵进行旋转运算。</p> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。该接口为空接口。</p> <p>该接口从API version 10开始废弃，推荐使用<a href="/consumer/cn/doc/harmonyos-references/ts-components-canvas-matrix2d#rotate10">rotate</a>。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">rx</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>旋转点的水平方向坐标，取值范围无限制。</p> <p>异常值undefined和null按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> <p>默认单位：vp</p> </td> </tr> <tr><td class="cellrowborder" width="25%">ry</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>旋转点的垂直方向坐标，取值范围无限制。</p> <p>异常值undefined和null按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> <p>默认单位：vp</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Matrix2D</td> <td class="cellrowborder" width="50%">旋转后结果矩阵对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ffb-c106="" class="highlight-div"><div _ngcontent-ffb-c106="" class="highlight-div-header"><div _ngcontent-ffb-c106="" class="highlight-div-header-left"><div _ngcontent-ffb-c106="" class="handle-button expand-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffb-c106="" class="highlight-div-header-right"><div _ngcontent-ffb-c106="" class="handle-button ai-button"></div><div _ngcontent-ffb-c106="" class="handle-button line-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffb-c106="" class="handle-button theme-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffb-c106="" class="handle-button copy-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Rotate</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">settings</span>: <span class="hljs-title class_">RenderingContextSettings</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingContextSettings</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">CanvasRenderingContext2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanvasRenderingContext2D</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">matrix</span>: <span class="hljs-title class_">Matrix2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix2D</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'240vp'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'180vp'</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffff00'</span>)</li><li>        .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">50</span>, <span class="hljs-number">110</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleX</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleY</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateX</span> = -<span class="hljs-number">0.5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateY</span> = <span class="hljs-number">0.5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateX</span> = <span class="hljs-number">10</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateY</span> = <span class="hljs-number">10</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-title function_">rotate</span>(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">setTransform</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">50</span>, <span class="hljs-number">110</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="134" originwidth="179" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115621.42892553068633886000412303433577:50001231000000:2800:8C3AB80528A47CAA59617537DD7BD793C2436CC68EDC96D5056F0FB182993A53.png" class="notEnlarge" width="179" height="134"></span></p> </div>  <div class="tiledSection"><h3 id="rotate10" device-type="phone,2in1,tablet,wearable,tv">rotate<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rotate10" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rotate(degree: number, rx?: number, ry?: number): Matrix2D</p> <p>以旋转点为中心，对当前矩阵进行右乘旋转运算。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">degree</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>旋转角度，取值范围无限制。顺时针方向为正角度，可以通过 degree * Math.PI / 180 将角度转换为弧度值。</p> <p>异常值undefined和null按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> <p>默认单位：弧度</p> </td> </tr> <tr><td class="cellrowborder" width="25%">rx</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>旋转点的水平方向坐标，取值范围无限制。</p> <p>默认单位：vp</p> <p>异常值undefined和null按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> <p>默认值：0</p> </td> </tr> <tr><td class="cellrowborder" width="25%">ry</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>旋转点的垂直方向坐标，取值范围无限制。</p> <p>默认单位：vp</p> <p>异常值undefined和null按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> <p>默认值：0</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Matrix2D</td> <td class="cellrowborder" width="50%">旋转后结果矩阵对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ffb-c106="" class="highlight-div"><div _ngcontent-ffb-c106="" class="highlight-div-header"><div _ngcontent-ffb-c106="" class="highlight-div-header-left"><div _ngcontent-ffb-c106="" class="handle-button expand-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffb-c106="" class="highlight-div-header-right"><div _ngcontent-ffb-c106="" class="handle-button ai-button"></div><div _ngcontent-ffb-c106="" class="handle-button line-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffb-c106="" class="handle-button theme-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffb-c106="" class="handle-button copy-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Rotate</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">settings</span>: <span class="hljs-title class_">RenderingContextSettings</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingContextSettings</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">CanvasRenderingContext2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanvasRenderingContext2D</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">matrix</span>: <span class="hljs-title class_">Matrix2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix2D</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'240vp'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'180vp'</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffff00'</span>)</li><li>        .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">60</span>, <span class="hljs-number">80</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleX</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleY</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateX</span> = -<span class="hljs-number">0.5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateY</span> = <span class="hljs-number">0.5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateX</span> = <span class="hljs-number">10</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateY</span> = <span class="hljs-number">10</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-title function_">rotate</span>(-<span class="hljs-number">60</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> / <span class="hljs-number">180</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">setTransform</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">60</span>, <span class="hljs-number">80</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="134" originwidth="179" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115621.35855489523705399146203395419218:50001231000000:2800:368A88639DCEBE5955C38858F014C78202135C0E45FBCC29C0B73C65DAFF5C66.png" class="notEnlarge" width="179" height="134"></span></p> </div>  <div class="tiledSection"><h3 id="translate" device-type="phone,2in1,tablet,wearable,tv">translate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="translate" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>translate(tx?: number, ty?: number): Matrix2D</p> <p>对当前矩阵进行左乘平移运算。</p> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">tx</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>水平方向平移距离，取值范围无限制。</p> <p>异常值undefined和null按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> <p>默认单位：vp</p> <p>默认值：0</p> </td> </tr> <tr><td class="cellrowborder" width="25%">ty</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>垂直方向平移距离，取值范围无限制。</p> <p>异常值undefined和null按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> <p>默认单位：vp</p> <p>默认值：0</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Matrix2D</td> <td class="cellrowborder" width="50%">平移后结果矩阵对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ffb-c106="" class="highlight-div"><div _ngcontent-ffb-c106="" class="highlight-div-header"><div _ngcontent-ffb-c106="" class="highlight-div-header-left"><div _ngcontent-ffb-c106="" class="handle-button expand-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffb-c106="" class="highlight-div-header-right"><div _ngcontent-ffb-c106="" class="handle-button ai-button"></div><div _ngcontent-ffb-c106="" class="handle-button line-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffb-c106="" class="handle-button theme-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffb-c106="" class="handle-button copy-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Translate</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">settings</span>: <span class="hljs-title class_">RenderingContextSettings</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingContextSettings</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">CanvasRenderingContext2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanvasRenderingContext2D</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">matrix</span>: <span class="hljs-title class_">Matrix2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix2D</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'240vp'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'180vp'</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffff00'</span>)</li><li>        .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">40</span>, <span class="hljs-number">20</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleX</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleY</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateX</span> = <span class="hljs-number">0</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateY</span> = <span class="hljs-number">0</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateX</span> = <span class="hljs-number">0</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateY</span> = <span class="hljs-number">0</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-title function_">translate</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">setTransform</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">40</span>, <span class="hljs-number">20</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="134" originwidth="179" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115621.16183626303628434354380357644613:50001231000000:2800:660902DE23A2E33334CDE8228A81D83C087CE39ACA5811ABF80A10ACF4CEBB56.png" class="notEnlarge" width="179" height="134"></span></p> </div>  <div class="tiledSection"><h3 id="scale" device-type="phone,2in1,tablet,wearable,tv">scale<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scale" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scale(sx?: number, sy?: number): Matrix2D</p> <p>对当前矩阵进行右乘缩放运算。</p> <p><strong>卡片能力：</strong> 从API version 9开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">参数</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">sx</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>水平缩放比例系数，取值范围无限制。</p> <p>异常值undefined和null按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> <p>默认值：1.0</p> </td> </tr> <tr><td class="cellrowborder" width="25%">sy</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>垂直缩放比例系数，取值范围无限制。</p> <p>异常值undefined和null按无效值处理，NaN和Infinity会导致Matrix2D异常。</p> <p>默认值：1.0</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Matrix2D</td> <td class="cellrowborder" width="50%">缩放结果矩阵对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ffb-c106="" class="highlight-div"><div _ngcontent-ffb-c106="" class="highlight-div-header"><div _ngcontent-ffb-c106="" class="highlight-div-header-left"><div _ngcontent-ffb-c106="" class="handle-button expand-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffb-c106="" class="highlight-div-header-right"><div _ngcontent-ffb-c106="" class="handle-button ai-button"></div><div _ngcontent-ffb-c106="" class="handle-button line-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffb-c106="" class="handle-button theme-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffb-c106="" class="handle-button copy-button"><div _ngcontent-ffb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Scale</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">settings</span>: <span class="hljs-title class_">RenderingContextSettings</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingContextSettings</span>(<span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">CanvasRenderingContext2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanvasRenderingContext2D</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">settings</span>);</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">matrix</span>: <span class="hljs-title class_">Matrix2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Matrix2D</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'240vp'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'180vp'</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#ffff00'</span>)</li><li>        .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">120</span>, <span class="hljs-number">70</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleX</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">scaleY</span> = <span class="hljs-number">1</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateX</span> = -<span class="hljs-number">0.5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">rotateY</span> = <span class="hljs-number">0.5</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateX</span> = <span class="hljs-number">10</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-property">translateY</span> = <span class="hljs-number">10</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>.<span class="hljs-title function_">scale</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">setTransform</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">matrix</span>)</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">120</span>, <span class="hljs-number">70</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>)</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="134" originwidth="179" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115621.24716505504641976635598340981314:50001231000000:2800:4158E0F63708F6088FB40473A191E96006EA0B326968F01659D3248161E06FE3.png" class="notEnlarge" width="179" height="134"></span></p> </div> </div> <div></div></div>