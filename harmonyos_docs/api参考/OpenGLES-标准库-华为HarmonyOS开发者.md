<h1 _ngcontent-jrt-c119="" class="doc-title ng-star-inserted" title="OpenGL ES"> OpenGL ES </h1>

<div _ngcontent-jrt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>OpenGL 是一种跨平台的图形 API，用于为 3D 图形处理硬件指定标准的软件接口。<a href="https://www.khronos.org/opengles/" target="_blank">OpenGL ES</a> 是 OpenGL 规范的一种形式，适用于嵌入式设备。HarmonyOS 现已支持 OpenGL ES 3.2。</p>    <div class="tiledSection">     <h2 id="支持的能力">支持的能力<i class="anchor-icon anchor-icon-link" anchorid="支持的能力" tips="复制节点链接"></i></h2>          <p>OpenGL ES 3.2</p>    </div>    <div class="tiledSection">     <h2 id="标准库中导出的符号列表">标准库中导出的符号列表<i class="anchor-icon anchor-icon-link" anchorid="标准库中导出的符号列表" tips="复制节点链接"></i></h2>          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openglesv3-symbol">native api中导出的OpenGL ES 3.2符号列表</a></p>    </div>    <div class="tiledSection">     <h2 id="引入opengl能力">引入OpenGL能力<i class="anchor-icon anchor-icon-link" anchorid="引入opengl能力" tips="复制节点链接"></i></h2>          <p>如果开发者使用OpenGL的相关能力，需要添加相关动态链接库和头文件。</p>     <p><strong>添加动态链接库</strong></p>     <p>CMakeLists.txt中添加以下lib。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="txt prettyprint linenums hljs language-plaintext" data-highlighted="yes"><ol class="linenums"><li>libace_ndk.z.so</li><li>libace_napi.z.so</li><li>libGLESv3.so</li><li>libEGL.so</li></ol></pre></div></div>     <p><strong>头文件</strong></p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ace/xcomponent/native_interface_xcomponent.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;EGL/egl.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;EGL/eglext.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;EGL/eglplatform.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;GLES3/gl3.h&gt;</span></span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="相关参考">相关参考<i class="anchor-icon anchor-icon-link" anchorid="相关参考" tips="复制节点链接"></i></h2>          <p>针对OpenGL ES的使用和相关开发，需要同步了解NDK的开发过程，以及XComponent组件等的使用。具体可参考:</p>     <ul>      <li>       <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-development-overview" target="_blank">NDK开发参考</a></p></li>      <li>       <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/napi">NodeAPI参考</a></p></li>      <li>       <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-xcomponentnode">XComponentNode参考</a></p></li>      <li>       <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent">XComponent参考</a></p></li>     </ul>    </div>    <div class="tiledSection">     <h2 id="opengl-es扩展接口">OpenGL ES扩展接口<i class="anchor-icon anchor-icon-link" anchorid="opengl-es扩展接口" tips="复制节点链接"></i></h2>          <ul>      <li>OpenGL ES扩展接口的官方参考文档：<a href="https://registry.khronos.org/OpenGL/index_es.php" target="_blank">OpenGL ES扩展接口</a></li>      <li>开发者可以调用glGetString查询芯片厂商支持的扩展接口，调用之前务必初始化上下文。具体示例如下：</li>     </ul>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="prettyprint linenums hljs language-lua" data-highlighted="yes"><ol class="linenums"><li>EGLDisplay display;</li><li>EGLConfig <span class="hljs-built_in">config</span>;</li><li>EGLContext context;</li><li>EGLSurface surface;</li><li>EGLint majorVersion;</li><li>EGLint minorVersion;</li><li>EGLNativeWindowType win;</li><li>display = eglGetDisplay(EGL_DEFAULT_DISPLAY);</li><li>eglInitialize(display, &amp;majorVersion, &amp;minorVersion);</li><li>display = eglGetDisplay(EGL_DEFAULT_DISPLAY);</li><li>eglInitialize(display, &amp;majorVersion, &amp;minorVersion);</li><li>EGLint attribs[] = {</li><li>    EGL_RENDERABLE_TYPE,</li><li>    EGL_OPENGL_ES2_BIT,</li><li>    EGL_BLUE_SIZE, <span class="hljs-number">8</span>,</li><li>    EGL_GREEN_SIZE, <span class="hljs-number">8</span>,</li><li>    EGL_RED_SIZE, <span class="hljs-number">8</span>,</li><li>    EGL_NONE</li><li>};</li><li>eglChooseConfig(display, attribs, &amp;<span class="hljs-built_in">config</span>, <span class="hljs-number">1</span>, &amp;numConfigs);</li><li>context = eglCreateContext(display, <span class="hljs-built_in">config</span>, EGL_NO_CONTEXT, NULL);</li><li>surface = eglCreatePbufferSurface(display, <span class="hljs-built_in">config</span>, NULL);</li><li>eglMakeCurrent(display, surface, surface, context);</li><li>
</li><li><span class="hljs-built_in">char</span> *strTest = new <span class="hljs-built_in">char</span>[<span class="hljs-number">1024</span>];</li><li>strTest = (<span class="hljs-built_in">char</span> *)glGetString(GL_EXTENSIONS); // 返回值strTest中会列出所有的扩展接口，并且用空格分隔开</li><li>bool isHave = strTest.<span class="hljs-built_in">find</span>(<span class="hljs-string">"GL_OES_matrix_palette"</span>) != <span class="hljs-number">-1</span> ?</li><li>    <span class="hljs-literal">true</span> :</li><li>    <span class="hljs-literal">false</span>; // 查询是否有某个扩展接口，有则isHave为<span class="hljs-literal">true</span>，没有则为<span class="hljs-literal">false</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="简单示例">简单示例<i class="anchor-icon anchor-icon-link" anchorid="简单示例" tips="复制节点链接"></i></h2>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">enableVertexAttrib</span><span class="hljs-params">(GLuint index, <span class="hljs-type">float</span> *data, <span class="hljs-type">int32_t</span> len)</span></span></li><li><span class="hljs-function"></span>{</li><li>    GLuint buffer;</li><li>    <span class="hljs-built_in">glGenBuffers</span>(<span class="hljs-number">1</span>, &amp;buffer);</li><li>    <span class="hljs-built_in">glBindBuffer</span>(GL_ARRAY_BUFFER, buffer);</li><li>    <span class="hljs-built_in">glBufferData</span>(GL_ARRAY_BUFFER, len, data, GL_STATIC_DRAW);</li><li>    <span class="hljs-built_in">glVertexAttribPointer</span>(index, TRIANGLES_POINT, GL_FLOAT, GL_FALSE, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-built_in">glEnableVertexAttribArray</span>(index);</li><li>    <span class="hljs-keyword">return</span>;</li><li>}</li><li>
</li><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">Init</span><span class="hljs-params">(<span class="hljs-type">void</span> *window, <span class="hljs-type">int32_t</span> width,  <span class="hljs-type">int32_t</span> height)</span></span></li><li><span class="hljs-function"></span>{</li><li>    EGLNativeWindowType mEglWindow;</li><li>    EGLDisplay mEGLDisplay = EGL_NO_DISPLAY;</li><li>    EGLConfig mEGLConfig = <span class="hljs-literal">nullptr</span>;</li><li>    EGLContext mEGLContext = EGL_NO_CONTEXT;</li><li>    EGLContext mSharedEGLContext = EGL_NO_CONTEXT;</li><li>    EGLSurface mEGLSurface = <span class="hljs-literal">nullptr</span>;</li><li>    EGLint configsNum;</li><li>    mEglWindow = <span class="hljs-built_in">reinterpret_cast</span>&lt;EGLNativeWindowType&gt;(window);</li><li>    </li><li>    <span class="hljs-comment">//初始化EGL Display</span></li><li>    mEGLDisplay = <span class="hljs-built_in">eglGetDisplay</span>(EGL_DEFAULT_DISPLAY);</li><li>    EGLint eglMajVers;</li><li>    EGLint eglMinVers;</li><li>    <span class="hljs-built_in">eglInitialize</span>(mEGLDisplay, &amp;eglMajVers, &amp;eglMinVers);</li><li>
</li><li>    <span class="hljs-comment">//配置EGL</span></li><li>    EGLint attribList[] = {</li><li>            EGL_SURFACE_TYPE, EGL_WINDOW_BIT, EGL_RENDERABLE_TYPE, EGL_OPENGL_ES3_BIT,</li><li>            EGL_RED_SIZE, <span class="hljs-number">8</span>,</li><li>            EGL_GREEN_SIZE, <span class="hljs-number">8</span>,</li><li>            EGL_BLUE_SIZE, <span class="hljs-number">8</span>,</li><li>            EGL_NONE</li><li>    };</li><li>    <span class="hljs-built_in">eglChooseConfig</span>(mEGLDisplay, attribList, &amp;mEGLConfig, <span class="hljs-number">1</span>, &amp;configsNum);</li><li>
</li><li>    EGLint winAttribs[] = {EGL_GL_COLORSPACE_KHR, EGL_GL_COLORSPACE_SRGB_KHR, EGL_NONE};</li><li>    </li><li>    <span class="hljs-comment">//创建EGL Surface</span></li><li>    mEGLSurface = <span class="hljs-built_in">eglCreateWindowSurface</span>(mEGLDisplay, mEGLConfig, mEglWindow, winAttribs);</li><li>    </li><li>    <span class="hljs-comment">//创建EGL Context</span></li><li>    EGLint attrib3_list[] = {</li><li>        EGL_CONTEXT_CLIENT_VERSION, <span class="hljs-number">3</span>,</li><li>    };</li><li>    mEGLContext = <span class="hljs-built_in">eglCreateContext</span>(mEGLDisplay, mEGLConfig, mSharedEGLContext, attrib3_list);</li><li>    </li><li>    <span class="hljs-comment">//绑定EGL Context和Surface</span></li><li>    <span class="hljs-built_in">eglMakeCurrent</span>(mEGLDisplay, mEGLSurface, mEGLSurface, mEGLContext);</li><li>    </li><li>    <span class="hljs-comment">// 创建着色点程序</span></li><li>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* g_vertexShader =</li><li>        <span class="hljs-string">"#version 300 es\n"</span></li><li>        <span class="hljs-string">"in vec4 a_pos;\n"</span></li><li>        <span class="hljs-string">"in vec4 a_color;\n"</span></li><li>        <span class="hljs-string">"uniform mat4 a_mx;\n"</span></li><li>        <span class="hljs-string">"uniform mat4 a_my;\n"</span></li><li>        <span class="hljs-string">"out vec4 v_color;\n"</span></li><li>        <span class="hljs-string">"void main() {\n"</span></li><li>        <span class="hljs-string">"    gl_Position = a_mx * a_my * a_pos;\n"</span></li><li>        <span class="hljs-string">"    v_color = a_color;\n"</span></li><li>        <span class="hljs-string">"}"</span>;</li><li>    </li><li>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* g_fragmentShader =</li><li>        <span class="hljs-string">"#version 300 es\n"</span></li><li>        <span class="hljs-string">"precision mediump float;\n"</span></li><li>        <span class="hljs-string">"in vec4 v_color;\n"</span></li><li>        <span class="hljs-string">"out vec4 fragColor;\n"</span></li><li>        <span class="hljs-string">"void main() {\n"</span></li><li>        <span class="hljs-string">"    fragColor = v_color;\n"</span></li><li>        <span class="hljs-string">"}"</span>;</li><li>    </li><li>    <span class="hljs-comment">// 创建顶点着色器</span></li><li>    GLuint vertexShader = <span class="hljs-built_in">glCreateShader</span>(GL_VERTEX_SHADER);</li><li>    <span class="hljs-built_in">glShaderSource</span>(vertexShader, <span class="hljs-number">1</span>, &amp;g_vertexShader, <span class="hljs-literal">nullptr</span>);</li><li>    <span class="hljs-built_in">glCompileShader</span>(vertexShader);</li><li>
</li><li>    <span class="hljs-comment">//创建片段着色器</span></li><li>    GLuint fragmentShader = <span class="hljs-built_in">glCreateShader</span>(GL_FRAGMENT_SHADER);</li><li>    <span class="hljs-built_in">glShaderSource</span>(fragmentShader, <span class="hljs-number">1</span>, &amp;g_fragmentShader, <span class="hljs-literal">nullptr</span>);</li><li>    <span class="hljs-built_in">glCompileShader</span>(fragmentShader);</li><li>
</li><li>    </li><li>    <span class="hljs-comment">//创建着色器程序</span></li><li>    mProgramHandle = <span class="hljs-built_in">glCreateProgram</span>();</li><li>    <span class="hljs-built_in">glAttachShader</span>(mProgramHandle, vertexShader);</li><li>    <span class="hljs-built_in">glAttachShader</span>(mProgramHandle, fragmentShader);</li><li>    <span class="hljs-built_in">glLinkProgram</span>(mProgramHandle);</li><li>    </li><li>    <span class="hljs-comment">//使用着色器程序</span></li><li>    <span class="hljs-built_in">glUseProgram</span>(mProgramHandle);</li><li>    </li><li>    <span class="hljs-comment">// 清理</span></li><li>    <span class="hljs-built_in">glDeleteShader</span>(vertexShader);</li><li>    <span class="hljs-built_in">glDeleteShader</span>(fragmentShader);</li><li>    </li><li>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</li><li>}</li><li>
</li><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Update</span><span class="hljs-params">(<span class="hljs-type">float</span> angleXOffset, <span class="hljs-type">float</span> angleYOffset)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-type">const</span> <span class="hljs-type">float</span> pi = <span class="hljs-number">3.141592</span>;</li><li>    </li><li>    <span class="hljs-comment">// 创建顶点位置数据数组vertexData</span></li><li>    <span class="hljs-type">float</span> g_vertexData[] = {</li><li>        <span class="hljs-number">-0.75</span>, <span class="hljs-number">-0.50</span>, <span class="hljs-number">-0.43</span>, <span class="hljs-number">0.75</span>, <span class="hljs-number">-0.50</span>, <span class="hljs-number">-0.43</span>, <span class="hljs-number">0.00</span>,  <span class="hljs-number">-0.50</span>, <span class="hljs-number">0.87</span>,  <span class="hljs-number">0.75</span>, <span class="hljs-number">-0.50</span>, <span class="hljs-number">-0.43</span>,</li><li>        <span class="hljs-number">0.00</span>,  <span class="hljs-number">-0.50</span>, <span class="hljs-number">0.87</span>,  <span class="hljs-number">0.00</span>, <span class="hljs-number">1.00</span>,  <span class="hljs-number">0.00</span>,  <span class="hljs-number">0.00</span>,  <span class="hljs-number">-0.50</span>, <span class="hljs-number">0.87</span>,  <span class="hljs-number">0.00</span>, <span class="hljs-number">1.00</span>,  <span class="hljs-number">0.00</span>,</li><li>        <span class="hljs-number">-0.75</span>, <span class="hljs-number">-0.50</span>, <span class="hljs-number">-0.43</span>, <span class="hljs-number">0.00</span>, <span class="hljs-number">1.00</span>,  <span class="hljs-number">0.00</span>,  <span class="hljs-number">-0.75</span>, <span class="hljs-number">-0.50</span>, <span class="hljs-number">-0.43</span>, <span class="hljs-number">0.75</span>, <span class="hljs-number">-0.50</span>, <span class="hljs-number">-0.43</span>,</li><li>    };</li><li>    </li><li>    <span class="hljs-comment">// 创建顶点颜色数组colorData</span></li><li>    <span class="hljs-type">float</span> g_colorData[] = {</li><li>        <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-comment">/* 红色——面1 */</span></li><li>        <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-comment">/* 红色——面2 */</span></li><li>        <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-comment">/* 红色——面3 */</span></li><li>        <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>  <span class="hljs-comment">/* 红色——面4 */</span></li><li>    };</li><li>    </li><li>    <span class="hljs-comment">// 顶点法向量数组normalData</span></li><li>    <span class="hljs-type">float</span> g_normalData[] = {</li><li>        <span class="hljs-number">0.00</span>,  <span class="hljs-number">-1.00</span>, <span class="hljs-number">0.00</span>,  <span class="hljs-number">0.00</span>,  <span class="hljs-number">-1.00</span>, <span class="hljs-number">0.00</span>,  <span class="hljs-number">0.00</span>,  <span class="hljs-number">-1.00</span>, <span class="hljs-number">0.00</span>, <span class="hljs-number">-0.83</span>, <span class="hljs-number">-0.28</span>, <span class="hljs-number">-0.48</span>,</li><li>        <span class="hljs-number">-0.83</span>, <span class="hljs-number">-0.28</span>, <span class="hljs-number">-0.48</span>, <span class="hljs-number">-0.83</span>, <span class="hljs-number">-0.28</span>, <span class="hljs-number">-0.48</span>, <span class="hljs-number">-0.83</span>, <span class="hljs-number">0.28</span>,  <span class="hljs-number">0.48</span>, <span class="hljs-number">-0.83</span>, <span class="hljs-number">0.28</span>,  <span class="hljs-number">0.48</span>,</li><li>        <span class="hljs-number">-0.83</span>, <span class="hljs-number">0.28</span>,  <span class="hljs-number">0.48</span>,  <span class="hljs-number">0.00</span>,  <span class="hljs-number">-0.28</span>, <span class="hljs-number">0.96</span>,  <span class="hljs-number">0.00</span>,  <span class="hljs-number">-0.28</span>, <span class="hljs-number">0.96</span>, <span class="hljs-number">0.00</span>,  <span class="hljs-number">-0.28</span>, <span class="hljs-number">0.96</span>,</li><li>    };</li><li>    </li><li>    <span class="hljs-comment">// 设置视口大小</span></li><li>    <span class="hljs-built_in">glViewport</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, m_width, m_height);</li><li>    </li><li>    <span class="hljs-comment">// 清除颜色缓存</span></li><li>    <span class="hljs-built_in">glClearColor</span>(<span class="hljs-number">1.0f</span>, <span class="hljs-number">1.0f</span>, <span class="hljs-number">1.0f</span>, <span class="hljs-number">1.0f</span>);</li><li>    <span class="hljs-built_in">glClear</span>(GL_COLOR_BUFFER_BIT);</li><li>    </li><li>    <span class="hljs-comment">// 获取着色器程序中变量的位置句柄</span></li><li>    GLint aPos = <span class="hljs-built_in">glGetAttribLocation</span>(mProgramHandle, <span class="hljs-string">"a_pos"</span>);</li><li>    GLint aColor = <span class="hljs-built_in">glGetAttribLocation</span>(mProgramHandle, <span class="hljs-string">"a_color"</span>);</li><li>    GLint aNormal = <span class="hljs-built_in">glGetAttribLocation</span>(mProgramHandle, <span class="hljs-string">"a_normal"</span>);</li><li>    GLint uLightColor = <span class="hljs-built_in">glGetUniformLocation</span>(mProgramHandle, <span class="hljs-string">"u_lightColor"</span>);</li><li>    GLint uLightDirection = <span class="hljs-built_in">glGetUniformLocation</span>(mProgramHandle, <span class="hljs-string">"u_lightDirection"</span>);</li><li>    GLint aMx = <span class="hljs-built_in">glGetUniformLocation</span>(mProgramHandle, <span class="hljs-string">"a_mx"</span>);</li><li>    GLint aMy = <span class="hljs-built_in">glGetUniformLocation</span>(mProgramHandle, <span class="hljs-string">"a_my"</span>);</li><li>
</li><li>    angleX = angleXOffset;</li><li>    angleY = angleYOffset;</li><li>
</li><li>    <span class="hljs-comment">// y轴旋转度</span></li><li>    <span class="hljs-type">float</span> radianY = (angleY * pi) / <span class="hljs-number">180.0</span>;</li><li>    <span class="hljs-type">float</span> cosY = <span class="hljs-built_in">cosf</span>(radianY);</li><li>    <span class="hljs-type">float</span> sinY = <span class="hljs-built_in">sinf</span>(radianY);</li><li>    <span class="hljs-type">float</span> myArr[] = {</li><li>        cosY, <span class="hljs-number">0</span>, -sinY, <span class="hljs-number">0</span>,</li><li>        <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,</li><li>        sinY, <span class="hljs-number">0</span>, cosY, <span class="hljs-number">0</span>,</li><li>        <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span></li><li>    };</li><li>
</li><li>    <span class="hljs-comment">// 向着色器传递4x4矩阵数据</span></li><li>    <span class="hljs-built_in">glUniformMatrix4fv</span>(aMy, <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>, myArr);</li><li>
</li><li>    <span class="hljs-comment">// x轴旋转度</span></li><li>    <span class="hljs-type">float</span> radianX = (angleX * pi) / <span class="hljs-number">180.0</span>;</li><li>    <span class="hljs-type">float</span> cosX = <span class="hljs-built_in">cosf</span>(radianX);</li><li>    <span class="hljs-type">float</span> sinX = <span class="hljs-built_in">sinf</span>(radianX);</li><li>    <span class="hljs-type">float</span> mxArr[] = {</li><li>        <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, cosX, -sinX, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, sinX, cosX, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span></li><li>    };</li><li>
</li><li>    <span class="hljs-built_in">glUniformMatrix4fv</span>(aMx, <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>, mxArr);</li><li>
</li><li>    <span class="hljs-comment">// 给平行光传入颜色和方向数据，RGB(1,1,1),单位向量(x,y,z)</span></li><li>    <span class="hljs-built_in">glUniform3f</span>(uLightColor, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>);</li><li>
</li><li>    <span class="hljs-comment">// 保证向量(x,y,z)的长度为1，即单位向量</span></li><li>    <span class="hljs-type">float</span> x = <span class="hljs-number">2.0</span> / <span class="hljs-built_in">sqrt</span>(<span class="hljs-number">15</span>);</li><li>    <span class="hljs-type">float</span> y = <span class="hljs-number">2.0</span> / <span class="hljs-built_in">sqrt</span>(<span class="hljs-number">15</span>);</li><li>    <span class="hljs-type">float</span> z = <span class="hljs-number">3.0</span> / <span class="hljs-built_in">sqrt</span>(<span class="hljs-number">15</span>);</li><li>
</li><li>    <span class="hljs-built_in">glUniform3f</span>(uLightDirection, x, -y, z);</li><li>
</li><li>    <span class="hljs-comment">// 创建缓冲区buffer，传入顶点位置数据g_vertexData</span></li><li>    <span class="hljs-built_in">enableVertexAttrib</span>(aPos, g_vertexData, <span class="hljs-built_in">sizeof</span>(g_vertexData));</li><li>    <span class="hljs-built_in">enableVertexAttrib</span>(aNormal, g_normalData, <span class="hljs-built_in">sizeof</span>(g_normalData));</li><li>    <span class="hljs-comment">// 创建缓冲区colorBuffer，传入顶点颜色数据g_colorData</span></li><li>    <span class="hljs-built_in">enableVertexAttrib</span>(aColor, g_colorData, <span class="hljs-built_in">sizeof</span>(g_colorData));</li><li>
</li><li>    <span class="hljs-built_in">glEnable</span>(GL_DEPTH_TEST);</li><li>
</li><li>    <span class="hljs-comment">// 绘制四棱锥</span></li><li>    <span class="hljs-built_in">glDrawArrays</span>(GL_TRIANGLES, <span class="hljs-number">0</span>, TETRAHEDRON_POINT);</li><li>    </li><li>    <span class="hljs-comment">//交换缓冲区</span></li><li>    <span class="hljs-built_in">eglSwapBuffers</span>(mEGLDisplay, mEGLSurface);</li><li>}</li></ol></pre></div></div>     <p>该示例通过EGL创建和设置整个OpenGL ES渲染环境，实现一个3D四棱锥的渲染程序，下面详细地解释下每个步骤。</p>    </div>    <div class="tiledSection">     <h3 id="使用eglgetdisplay连接渲染目标设备" class="firsth2">使用eglGetDisplay连接渲染目标设备<i class="anchor-icon anchor-icon-link" anchorid="使用eglgetdisplay连接渲染目标设备" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">EGLDisplay <span class="hljs-title">eglGetDisplay</span><span class="hljs-params">(EGLNativeDisplayType display_id)</span></span>;</li></ol></pre></div></div>     <p>eglGetDisplay是EGL库中的函数，它返回EGLDisplay对象用于表示与渲染目标设备的连接。当显示连接不可用时，将返回EGL_NO_DISPLAY表示连接不可用。</p>     <p>display_id 参数通常是一个表示显示设备的本地显示类型，EGLNativeDisplayType是为了匹配窗口显示类型，在各个平台有不同的定义。如果您只是希望使用默认的显示设备，那么您可以直接使用 EGL_DEFAULT_DISPLAY，而不需要显式地指定 display_id。</p>    </div>    <div class="tiledSection">     <h3 id="使用eglinitialize初始化egl">使用eglInitialize初始化EGL<i class="anchor-icon anchor-icon-link" anchorid="使用eglinitialize初始化egl" tips="复制节点链接"></i></h3>          <p>当成功打开连接之后则需要调用eglInitialize初始化EGL。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">EGLBoolean <span class="hljs-title">eglInitialize</span><span class="hljs-params">(EGLDisplay display,    <span class="hljs-comment">// 指定EGL显示连接</span></span></span></li><li><span class="hljs-function">                         EGLint *majorVersion,  <span class="hljs-comment">// 指定EGL实现返回的主版本号，可能为NULL</span></span></li><li><span class="hljs-function">                         EGLint *minorVersion)</span>; <span class="hljs-comment">// 指定EGL实现返回的次版本号，可能为NULL</span></li></ol></pre></div></div>     <p>这个函数用于初始化EGL内部数据结构，将返回EGL的版本号，并将其保存在majorVersion和minorVersion中。</p>     <p>如果初始化成功，则返回EGL_TRUE，否则返回EGL_FALSE。另外还可以通过EGLint eglGetError()，查询EGL的错误状态：</p>     <ul>      <li>       <p>EGL_BAD_DISPLAY：表示没有指定有效的EGLDisplay。</p></li>      <li>       <p>EGL_NOT_INITIALIZED：表示EGL不能初始化。</p></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="使用eglchooseconfig确定渲染配置">使用eglChooseConfig确定渲染配置<i class="anchor-icon anchor-icon-link" anchorid="使用eglchooseconfig确定渲染配置" tips="复制节点链接"></i></h3>          <p>EGL初始化成功之后，需要确定可用渲染表面的类型和配置，目前支持两种方法：</p>     <ul>      <li>       <p>可以指定一组需要的配置，使用eglChooseConfig使EGL推荐最佳配置。</p>       <p>当没有特殊配置需求时建议使用此种方法，因为这样更容易获得最佳配置。</p>       <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">EGLBoolean <span class="hljs-title">eglChooseConfig</span><span class="hljs-params">(EGLDisplay dpy,     <span class="hljs-comment">// EGL显示连接句柄，标识了要进行配置选择的显示连接。</span></span></span></li><li><span class="hljs-function">                    <span class="hljs-type">const</span> EGLint *attrib_list, <span class="hljs-comment">// 一个以EGL_NONE结尾的整数数组，用于指定所需配置的属性。属性列表中的每个元素都由属性名称（如EGL_RED_SIZE）和相应的属性值组成。如{EGL_RED_SIZE, 8, EGL_GREEN_SIZE, 8, EGL_BLUE_SIZE, 8, EGL_NONE}。</span></span></li><li><span class="hljs-function">                       EGLConfig *configs,     <span class="hljs-comment">// 一个用于存储选择配置的指针数组。eglChooseConfig函数将从可用配置中选择适合条件的配置，并将其存储在此数组中。</span></span></li><li><span class="hljs-function">                       EGLint config_size,     <span class="hljs-comment">// configs数组的大小</span></span></li><li><span class="hljs-function">                       EGLint *num_config)</span>;    <span class="hljs-comment">// 存储满足attrib_list需求，得到的满足需求的实际配置数量。</span></li></ol></pre></div></div>       <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 如以上代码所示这里指定所需配置的属性为</span></li><li>EGLint attribList[] = {</li><li>        EGL_SURFACE_TYPE, EGL_WINDOW_BIT, EGL_RENDERABLE_TYPE, EGL_OPENGL_ES3_BIT,  <span class="hljs-comment">// 指定了渲染类型为 OpenGL ES 3</span></li><li>        EGL_RED_SIZE, <span class="hljs-number">8</span>,    <span class="hljs-comment">// 指定红色缓冲区的位数是8位</span></li><li>        EGL_GREEN_SIZE, <span class="hljs-number">8</span>,  <span class="hljs-comment">// 指定绿色缓冲区的位数是8位</span></li><li>        EGL_BLUE_SIZE, <span class="hljs-number">8</span>,   <span class="hljs-comment">// 指定蓝色缓冲区的位数是8位</span></li><li>        EGL_NONE</li><li>};</li><li><span class="hljs-built_in">eglChooseConfig</span>(mEGLDisplay, attribList, &amp;mEGLConfig, <span class="hljs-number">1</span>, &amp;configsNum);</li></ol></pre></div></div>       <p>在调用eglChooseConfig函数后，系统将根据指定的配置属性attribList返回满足需求的EGL配置，这些配置将存储在mEGLConfig参数中。示例代码中的configsNum参数传入值为1，表明mEGLConfig数组的大小为1，即仅能保存一组可用配置。尽管此设置限制了返回配置的数量，但在大多数应用场景下已能满足基本需求。同时，configsNum参数将实际保存满足指定属性的配置总数，为开发者提供完整的可选配置数量信息。</p></li>      <li>       <p>也可以使用eglGetConfigs查询支持的所有配置，并使用eglGetConfigAttrib筛选需要的配置。</p>       <p>以下提供使用此种方法得到满足需求的配置，具体可见示例：</p>       <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;EGL/egl.h&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span></li><li><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span></li><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{</li><li>    <span class="hljs-comment">// 初始化 EGL</span></li><li>    EGLDisplay display = <span class="hljs-built_in">eglGetDisplay</span>(EGL_DEFAULT_DISPLAY);</li><li>    <span class="hljs-built_in">eglInitialize</span>(display, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>);</li><li>
</li><li>    <span class="hljs-comment">// 获取所有配置</span></li><li>    EGLint numConfigs;</li><li>    <span class="hljs-built_in">eglGetConfigs</span>(display, <span class="hljs-literal">nullptr</span>, <span class="hljs-number">0</span>, &amp;numConfigs);</li><li>    <span class="hljs-function">std::vector&lt;EGLConfig&gt; <span class="hljs-title">configs</span><span class="hljs-params">(numConfigs)</span></span>;</li><li>    <span class="hljs-built_in">eglGetConfigs</span>(display, configs.<span class="hljs-built_in">data</span>(), numConfigs, &amp;numConfigs);</li><li>
</li><li>    <span class="hljs-comment">// 选择合适的配置</span></li><li>    EGLConfig chosenConfig = <span class="hljs-literal">nullptr</span>;</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; config : configs) {</li><li>        EGLint redSize, greenSize, blueSize;</li><li>        <span class="hljs-built_in">eglGetConfigAttrib</span>(display, config, EGL_RED_SIZE, &amp;redSize);</li><li>        <span class="hljs-built_in">eglGetConfigAttrib</span>(display, config, EGL_GREEN_SIZE, &amp;greenSize);</li><li>        <span class="hljs-built_in">eglGetConfigAttrib</span>(display, config, EGL_BLUE_SIZE, &amp;blueSize);</li><li>        <span class="hljs-keyword">if</span> (redSize == <span class="hljs-number">8</span> &amp;&amp; greenSize == <span class="hljs-number">8</span> &amp;&amp; blueSize == <span class="hljs-number">6</span>) {</li><li>            chosenConfig = config;</li><li>            <span class="hljs-keyword">break</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 如果未选择配置，则打印错误信息并退出</span></li><li>    <span class="hljs-keyword">if</span> (!chosenConfig) {</li><li>        std::cerr &lt;&lt; <span class="hljs-string">"Failed to find a suitable EGL configuration."</span> &lt;&lt; std::endl;</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</li><li>}</li></ol></pre></div></div>       <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">EGLBoolean <span class="hljs-title">eglGetConfigs</span><span class="hljs-params">(EGLDisplay display, <span class="hljs-comment">// EGL显示连接句柄，标识了要进行配置选择的显示连接。</span></span></span></li><li><span class="hljs-function">                         EGLConfig *configs, <span class="hljs-comment">// 用于保存得到配置的数组</span></span></li><li><span class="hljs-function">                         EGLint config_size, <span class="hljs-comment">// configs的数组大小</span></span></li><li><span class="hljs-function">                         EGLint *num_config)</span>;<span class="hljs-comment">// 得到的EGL所有可用配置数量</span></li></ol></pre></div></div>       <p>eglGetConfigs接口有以下两种用法：</p>       <ul>        <li>当我们传递configs为nullptr时，接口会返回EGL_TRUE，并将得到的EGL所有可用配置数量保存在num_config中，这时即可根据得到的数量初始化configs来保存这些配置了，具体见如上代码。</li>        <li>当传递configs数组接受所有配置时，将得到所有配置并保存在configs，这样即可得到所有的可用配置，接下来可以根据具体需求筛选一组config保存下来。</li>       </ul>       <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 选择合适的配置</span></li><li>   EGLConfig chosenConfig = <span class="hljs-literal">nullptr</span>;</li><li>       <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; config : configs) {</li><li>           EGLint redSize, greenSize, blueSize;</li><li>           <span class="hljs-built_in">eglGetConfigAttrib</span>(display, config, EGL_RED_SIZE, &amp;redSize);</li><li>           <span class="hljs-built_in">eglGetConfigAttrib</span>(display, config, EGL_GREEN_SIZE, &amp;greenSize);</li><li>           <span class="hljs-built_in">eglGetConfigAttrib</span>(display, config, EGL_BLUE_SIZE, &amp;blueSize);</li><li>           <span class="hljs-keyword">if</span> (redSize == <span class="hljs-number">8</span> &amp;&amp; greenSize == <span class="hljs-number">8</span> &amp;&amp; blueSize == <span class="hljs-number">6</span>) {</li><li>               chosenConfig = config;</li><li>               <span class="hljs-keyword">break</span>;</li><li>           }</li><li>       }</li></ol></pre></div></div>       <p>如上所示遍历configs每个配置，使用eglGetConfigAttrib查询该配置下特定属性的值，将该值保存在第4个参数中，并判断值是否是自己需要的，如果需要则保存该配置，以待使用。调用成功则返回EGL_TRUE，调用失败则返回EGL_FALSE。 如果返回EGL_FALSE，可以使用eglGetError查询失败的原因，如果返回EGL_BAD ATTRIBUTE则attribute不是有效的属性。</p>       <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">EGLBoolean <span class="hljs-title">eglGetConfigAttrib</span><span class="hljs-params">(EGLDisplay display,     <span class="hljs-comment">//EGL 显示连接句柄，标识了要进行配置选择的显示连接</span></span></span></li><li><span class="hljs-function">                                   EGLConfig config,  <span class="hljs-comment">//EGLConfig 对象，表示要查询的 EGL 配置</span></span></li><li><span class="hljs-function">                                   EGLint attribute,  <span class="hljs-comment">//EGLint 类型的属性标识符，表示要查询的属性</span></span></li><li><span class="hljs-function">                                   EGLint *value)</span>;    <span class="hljs-comment">//指向 EGLint 类型变量的指针，用于存储查询到的属性值。</span></li></ol></pre></div></div></li>     </ul>    </div>    <div class="tiledSection">     <h3 id="使用eglcreatewindowsurface创建窗口表面">使用eglCreateWindowSurface创建窗口表面<i class="anchor-icon anchor-icon-link" anchorid="使用eglcreatewindowsurface创建窗口表面" tips="复制节点链接"></i></h3>          <p>得到符合渲染需求的EGLConfig之后，可以使用eglCreateWindowSurface创建窗口表面。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">EGLSurface <span class="hljs-title">eglCreateWindowSurface</span><span class="hljs-params">(EGLDisplay dpy,             <span class="hljs-comment">// EGLDisplay对象，表示与窗口表面关联的显示连接。</span></span></span></li><li><span class="hljs-function">                                  EGLConfig config,           <span class="hljs-comment">// EGLConfig对象，表示要创建窗口表面的EGL配置。</span></span></li><li><span class="hljs-function">                                  EGLNativeWindowType win,    <span class="hljs-comment">// EGLNativeWindowType类型的参数，表示窗口的句柄或标识符，用于与EGL表面关联。</span></span></li><li><span class="hljs-function">                                  <span class="hljs-type">const</span> EGLint *attrib_list)</span>; <span class="hljs-comment">// 指向EGL属性列表的指针，用于指定窗口表面的属性。是一个以EGL_NONE结尾的整数数组。</span></li></ol></pre></div></div>     <p>eglCreateWindowSurface接受的属性attrib_list的值如下所示：</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li>EGL_RENDER_BUFFER EGL_SINGLE_BUFFER或EGL_BACK_BUFFER</li><li>EGL_SINGLE_BUFFER <span class="hljs-comment">// 表示渲染表面将只有一个渲染缓冲区，在绘制完成后，渲染缓冲区中的内容将直接显示到屏幕上，不会进行双缓冲，可能会出现闪烁或撕裂的现象。</span></li><li>EGL_BACK_BUFFER   <span class="hljs-comment">// 表示渲染表面将具有双缓冲区，即前缓冲区和后缓冲区。在绘制完成后，渲染缓冲区中的内容首先会绘制到后缓冲区，然后通过交换缓冲区的操作将后缓冲区的内容显示到屏幕上，这样可以避免闪烁和撕裂现象。</span></li><li><span class="hljs-comment">// 默认情况下是EGL_BACK_BUFFER，当设置为null，则为默认属性。</span></li></ol></pre></div></div>     <p>eglCreateWindowSurface创建窗口表面失败的可能原因如下：</p>     <ul>      <li>       <p>EGL_BAD_MATCH：表示窗口属性与提供的 EGLConfig 不匹配。这可能是因为EGLConfig不支持渲染到窗口（即EGL_SURFACE_TYPE 属性没有设置为 EGL_WINDOW_BIT）。</p></li>      <li>       <p>EGL_BAD_CONFIG：如果提供的EGLConfig没有得到系统的支持，则会发生这种错误。</p></li>      <li>       <p>EGL_BAD_NATIVE_WINDOW：如果提供的窗口句柄无效，则会发生这种错误。</p></li>      <li>       <p>EGL_BAD_ALLOC：如果eglCreateWindowSurface无法为新的EGL窗口分配资源，或者已经有与提供的窗口关联的EGLConfig，则会发生这种错误。</p></li>     </ul>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li>EGLint attribList[] = { EGL_RENDER_BUFFER, EGL_BACK_BUFFER, EGL_NONE };</li><li>EGLSurface surface = <span class="hljs-built_in">eglCreateWindowSurface</span>(display, config, nativeWindow, attribList);</li><li><span class="hljs-keyword">if</span> (surface == EGL_NO_SURFACE) {</li><li>    <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">eglGetError</span>()) {</li><li>        <span class="hljs-keyword">case</span> EGL_BAD_MATCH:</li><li>            <span class="hljs-comment">// 检查窗口和 EGLConfig 属性以确定兼容性，或者验证 EGLConfig 是否支持渲染到窗口</span></li><li>            <span class="hljs-keyword">break</span>;</li><li>        <span class="hljs-keyword">case</span> EGL_BAD_CONFIG:</li><li>            <span class="hljs-comment">// 验证提供的 EGLConfig 是否有效</span></li><li>            <span class="hljs-keyword">break</span>;</li><li>        <span class="hljs-keyword">case</span> EGL_BAD_NATIVE_WINDOW:</li><li>            <span class="hljs-comment">// 验证提供的 EGLNativeWindow 是否有效</span></li><li>            <span class="hljs-keyword">break</span>;</li><li>        <span class="hljs-keyword">case</span> EGL_BAD_ALLOC:</li><li>            <span class="hljs-comment">// 资源不足；处理并恢复</span></li><li>            <span class="hljs-keyword">break</span>;</li><li>        <span class="hljs-keyword">default</span>:</li><li>            <span class="hljs-comment">// 处理任何其他错误</span></li><li>            <span class="hljs-keyword">break</span>;</li><li>    }</li><li>}</li></ol></pre></div></div>     <p>在使用XComponent获取nativeWindow的过程中，通常涉及以下步骤：</p>     <ol>      <li>首先需要在ArkTS 中定义XComponent并设置 XComponentController。XComponent组件用于在UI中嵌入基于OpenGL或Vulkan等图形API实现的渲染内容。       <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">XComponent</span>({</li><li>        <span class="hljs-attr">id</span>: <span class="hljs-string">'myXComponent'</span>,</li><li>        <span class="hljs-attr">type</span>: <span class="hljs-title class_">XComponentType</span>.<span class="hljs-property">SURFACE</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">xComponentController</span></li><li>    })</li><li>}</li></ol></pre></div></div></li>      <li>创建 XComponentController子类，实现回调方法：       <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyXComponentController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">XComponentController</span> {</li><li>    <span class="hljs-title function_">onSurfaceCreated</span>(<span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSurfaceCreated surfaceId: <span class="hljs-subst">${surfaceId}</span>`</span>);</li><li>        nativeRender.<span class="hljs-title class_">SetSurfaceId</span>(<span class="hljs-title class_">BigInt</span>(surfaceId));</li><li>        <span class="hljs-comment">// 之后会使用 surfaceId 关联 native window</span></li><li>    }</li><li>
</li><li>    <span class="hljs-title function_">onSurfaceChanged</span>(<span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">rect</span>: <span class="hljs-title class_">SurfaceRect</span>): <span class="hljs-built_in">void</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSurfaceChanged surfaceId: <span class="hljs-subst">${surfaceId}</span>`</span>);</li><li>    }</li><li>
</li><li>    <span class="hljs-title function_">onSurfaceDestroyed</span>(<span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSurfaceDestroyed surfaceId: <span class="hljs-subst">${surfaceId}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div></li>      <li>使用surfaceId获取NativeWindow：surfaceId是在XComponent创建过程中生成的。在onSurfaceCreated 回调中，可以使用OH_NativeWindow_CreateNativeWindowFromSurfaceId函数通过surfaceId获取nativeWindow。       <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">napi_value <span class="hljs-title">PluginManager::SetSurfaceId</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span></span></li><li><span class="hljs-function"></span>{</li><li>    <span class="hljs-type">int64_t</span> surfaceId = <span class="hljs-built_in">ParseId</span>(env, info);</li><li>    OHNativeWindow *nativeWindow;</li><li>    PluginRender *pluginRender;</li><li>    <span class="hljs-keyword">if</span> (windowMap_.<span class="hljs-built_in">find</span>(surfaceId) == windowMap_.<span class="hljs-built_in">end</span>()) {</li><li>        <span class="hljs-built_in">OH_NativeWindow_CreateNativeWindowFromSurfaceId</span>(surfaceId, &amp;nativeWindow);</li><li>        windowMap_[surfaceId] = nativeWindow;</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (pluginRenderMap_.<span class="hljs-built_in">find</span>(surfaceId) == pluginRenderMap_.<span class="hljs-built_in">end</span>()) {</li><li>        pluginRender = <span class="hljs-keyword">new</span> <span class="hljs-built_in">PluginRender</span>(surfaceId);</li><li>        pluginRenderMap_[surfaceId] = pluginRender;</li><li>    }</li><li>    pluginRender-&gt;<span class="hljs-built_in">InitNativeWindow</span>(nativeWindow);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;</li><li>}</li></ol></pre></div></div></li>     </ol>     <p>有关ArkTS XComponent 组件的使用，请参考：<a href="https://gitcode.com/openharmony/applications_app_samples/blob/master/code/BasicFeature/Native/XComponent/README_zh.md#" target="_blank">ArkTS XComponent组件使用示例</a>。</p>    </div>    <div class="tiledSection">     <h3 id="使用eglcreatecontext创建渲染上下文">使用eglCreateContext创建渲染上下文<i class="anchor-icon anchor-icon-link" anchorid="使用eglcreatecontext创建渲染上下文" tips="复制节点链接"></i></h3>          <p>eglCreateContext函数用于创建一个新的EGL上下文，并将其与特定的显示设备（display）和配置（config）关联起来。允许指定共享上下文（shareContext），以便与已经存在的OpenGL上下文共享状态信息。该函数的参数说明如下：</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">EGLContext <span class="hljs-title">eglCreateContext</span><span class="hljs-params">(EGLDisplay display,        <span class="hljs-comment">// EGLDisplay类型，表示要创建上下文的EGL显示连接。</span></span></span></li><li><span class="hljs-function">                            EGLConfig config,          <span class="hljs-comment">// EGLConfig类型，表示与上下文关联的EGL配置。</span></span></li><li><span class="hljs-function">                            EGLContext shareContext,   <span class="hljs-comment">// EGLContext类型，表示要与新创建的上下文共享状态信息的现有上下文。如果不想共享状态信息，可以传递EGL_NO_CONTEXT。</span></span></li><li><span class="hljs-function">                            <span class="hljs-type">const</span> EGLint *attribList)</span>; <span class="hljs-comment">// 指向属性列表的指针，用于指定上下文的属性。属性列表是以EGL_NONE结尾的一系列属性值对。</span></li></ol></pre></div></div>     <p>eglCreateContext 的attribList属性列表如下：</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li>EGLint attrib3_list[] = {</li><li>    EGL_CONTEXT_CLIENT_VERSION, <span class="hljs-number">3</span>, <span class="hljs-comment">//指定使用的openglES版本3相关的上下文类型</span></li><li>    EGL_NONE</li><li>};</li></ol></pre></div></div>     <p>eglCreateContext 创建渲染上下文失败的原因为EGL_BAD_CONFIG，即提供的EGLConfig无效。</p>    </div>    <div class="tiledSection">     <h3 id="使用eglmakecurrent将egl上下文与绘图表面进行关联">使用eglMakeCurrent将EGL上下文与绘图表面进行关联<i class="anchor-icon anchor-icon-link" anchorid="使用eglmakecurrent将egl上下文与绘图表面进行关联" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">EGLBoolean <span class="hljs-title">eglMakeCurrent</span><span class="hljs-params">(EGLDisplay display, <span class="hljs-comment">// EGL显示连接的句柄，用于标识渲染设备。</span></span></span></li><li><span class="hljs-function">                          EGLSurface draw,    <span class="hljs-comment">// EGL绘图表面的句柄，指定要渲染到的目标表面。</span></span></li><li><span class="hljs-function">                          EGLSurface read,    <span class="hljs-comment">// EGL读取表面的句柄，用于像素读取等操作。通常情况下，可以将其设为与 draw 相同的值。</span></span></li><li><span class="hljs-function">                          EGLContext context)</span>;<span class="hljs-comment">// 要与指定表面关联的 EGL 上下文的句柄。</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="创建并使用着色器程序">创建并使用着色器程序<i class="anchor-icon anchor-icon-link" anchorid="创建并使用着色器程序" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建顶点着色器</span></li><li>GLuint vertexShader = <span class="hljs-built_in">glCreateShader</span>(GL_VERTEX_SHADER);</li><li><span class="hljs-built_in">glShaderSource</span>(vertexShader, <span class="hljs-number">1</span>, &amp;g_vertexShader, <span class="hljs-literal">nullptr</span>);</li><li><span class="hljs-built_in">glCompileShader</span>(vertexShader);</li><li>
</li><li><span class="hljs-comment">// 创建片段着色器</span></li><li>GLuint fragmentShader = <span class="hljs-built_in">glCreateShader</span>(GL_FRAGMENT_SHADER);</li><li><span class="hljs-built_in">glShaderSource</span>(fragmentShader, <span class="hljs-number">1</span>, &amp;g_fragmentShader, <span class="hljs-literal">nullptr</span>);</li><li><span class="hljs-built_in">glCompileShader</span>(fragmentShader);</li><li>
</li><li><span class="hljs-comment">// 创建着色器程序</span></li><li>mProgramHandle = <span class="hljs-built_in">glCreateProgram</span>();</li><li><span class="hljs-built_in">glAttachShader</span>(mProgramHandle, vertexShader);</li><li><span class="hljs-built_in">glAttachShader</span>(mProgramHandle, fragmentShader);</li><li><span class="hljs-built_in">glLinkProgram</span>(mProgramHandle);</li><li>
</li><li><span class="hljs-comment">// 使用着色器程序</span></li><li><span class="hljs-built_in">glUseProgram</span>(mProgramHandle);</li></ol></pre></div></div>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">GLuint <span class="hljs-title">glCreateShader</span><span class="hljs-params">(GLenum shaderType)</span></span>;</li></ol></pre></div></div>     <p>glCreateShader用于创建一个指定类型（顶点着色器、片段着色器等）的着色器对象，并返回该对象的句柄。其中shaderType参数指定要创建的着色器类型，可以是GL_VERTEX_SHADER（顶点着色器）或 GL_FRAGMENT_SHADER（片段着色器）等。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glShaderSource</span><span class="hljs-params">(GLuint shader, GLsizei count, <span class="hljs-type">const</span> GLchar \**string, <span class="hljs-type">const</span> GLint *length)</span></span>;</li></ol></pre></div></div>     <p>glShaderSource函数用于设置着色器对象的源代码。其中各参数含义如下：</p>     <ul>      <li>shader：要设置源代码的着色器对象的标识符。</li>      <li>count：源代码字符串的数量。</li>      <li>string：指向源代码字符串的指针数组。</li>      <li>length：指向包含每个源代码字符串长度的整数数组，可以为nullptr，表示每个字符串都以null结尾。</li>     </ul>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glCompileShader</span><span class="hljs-params">(GLuint shader)</span></span>;</li></ol></pre></div></div>     <p>glCompileShader函数用于编译指定的着色器对象，其中shader参数是要编译的着色器对象的标识符。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">GLuint <span class="hljs-title">glCreateProgram</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span>;</li></ol></pre></div></div>     <p>glCreateProgram函数用于创建一个新的着色器程序对象，该函数返回一个新创建的着色器程序对象的标识符。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glAttachShader</span><span class="hljs-params">(GLuint program, GLuint shader)</span></span>;</li></ol></pre></div></div>     <p>glAttachShader函数用于将一个着色器对象附加到一个着色器程序对象上，参数program是目标着色器程序对象的标识符，参数shader是要附加的着色器对象的标识符。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glLinkProgram</span><span class="hljs-params">(GLuint program)</span></span>;</li></ol></pre></div></div>     <p>glLinkProgram函数用于链接一个着色器程序对象，将附加到该程序对象的着色器链接成一个可执行的渲染管线。</p>     <p>参数program是要链接的着色器程序对象的标识符。链接着色器程序时，OpenGL将会执行以下操作：将各个着色器对象中的代码合并成一个可执行的渲染管线。执行连接器优化，以优化渲染管线的性能。并将Uniform变量和Uniform块的信息进行绑定。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glUseProgram</span><span class="hljs-params">(GLuint program)</span></span>;</li></ol></pre></div></div>     <p>glUseProgram函数用于激活指定的着色器程序对象。在调用glUseProgram 之后，所有的渲染调用将会使用该着色器程序进行处理。</p>     <p>在使用glCompileShader时可以使用以下代码检查是否正常。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 编译着色器</span></li><li><span class="hljs-built_in">glCompileShader</span>(shader);</li><li>
</li><li><span class="hljs-comment">// 检查编译状态</span></li><li><span class="hljs-built_in">glGetShaderiv</span>(shader, GL_COMPILE_STATUS, &amp;compiled);</li><li>
</li><li><span class="hljs-keyword">if</span> (!compiled)</li><li>{</li><li>    GLint infoLen = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 获取着色器信息日志的长度</span></li><li>    <span class="hljs-built_in">glGetShaderiv</span>(shader, GL_INFO_LOG_LENGTH, &amp;infoLen);</li><li>    <span class="hljs-keyword">if</span> ( infoLen &gt; <span class="hljs-number">1</span> )</li><li>    {</li><li>        <span class="hljs-comment">// 分配存储信息日志的内存</span></li><li>        <span class="hljs-type">char</span> *infoLog = <span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">char</span>) * infoLen);</li><li>        <span class="hljs-comment">// 获取并打印着色器信息日志</span></li><li>        <span class="hljs-built_in">glGetShaderInfoLog</span>(shader, infoLen, <span class="hljs-literal">NULL</span>, infoLog);</li><li>        <span class="hljs-built_in">esLogMessage</span>(<span class="hljs-string">"Error compiling shader:\n%s\n"</span>, infoLog);</li><li>        <span class="hljs-comment">// 释放分配的内存</span></li><li>        <span class="hljs-built_in">free</span>(infoLog);</li><li>    }</li><li>    <span class="hljs-comment">// 删除编译失败的着色器</span></li><li>    <span class="hljs-built_in">glDeleteShader</span>(shader);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</li><li>}</li></ol></pre></div></div>     <p>在使用glLinkProgram可使用如下代码检查是否正常。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 链接程序对象</span></li><li><span class="hljs-built_in">glLinkProgram</span>(programObject);</li><li>
</li><li><span class="hljs-comment">// 检查链接状态</span></li><li><span class="hljs-built_in">glGetProgramiv</span>(programObject, GL_LINK_STATUS, &amp;linked);</li><li>
</li><li><span class="hljs-keyword">if</span> (!linked)</li><li>{</li><li>    GLint infoLen = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 获取程序对象信息日志的长度</span></li><li>    <span class="hljs-built_in">glGetProgramiv</span>(programObject, GL_INFO_LOG_LENGTH, &amp;infoLen);</li><li>    <span class="hljs-keyword">if</span> (infoLen &gt; <span class="hljs-number">1</span>)</li><li>    {</li><li>        <span class="hljs-comment">// 分配存储信息日志的内存</span></li><li>        <span class="hljs-type">char</span> *infoLog = <span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">char</span>) * infoLen);</li><li>        <span class="hljs-comment">// 获取并打印程序对象的信息日志</span></li><li>        <span class="hljs-built_in">glGetProgramInfoLog</span>(programObject, infoLen, <span class="hljs-literal">NULL</span>, infoLog);</li><li>        <span class="hljs-built_in">esLogMessage</span>(<span class="hljs-string">"Error linking program:\n%s\n"</span>, infoLog);</li><li>        <span class="hljs-comment">// 释放分配的内存</span></li><li>        <span class="hljs-built_in">free</span>(infoLog);</li><li>    }</li><li>    <span class="hljs-comment">// 删除链接失败的程序对象</span></li><li>    <span class="hljs-built_in">glDeleteProgram</span>(programObject);</li><li>    <span class="hljs-keyword">return</span> FALSE;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="使用glviewport设置视口大小">使用glViewport设置视口大小<i class="anchor-icon anchor-icon-link" anchorid="使用glviewport设置视口大小" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glViewport</span><span class="hljs-params">(GLint x, GLint y, GLsizei width, GLsizei height)</span></span></li></ol></pre></div></div>     <p>glViewport函数用于设置视口，指定OpenGL ES渲染区域在窗口的位置和大小。其中x、y指定视口的左下角在窗口中的坐标，width、height参数则指定视口的宽度和高度。</p>    </div>    <div class="tiledSection">     <h3 id="使用glclearcolor设置清除颜色缓冲区时使用的颜色">使用glClearColor设置清除颜色缓冲区时使用的颜色<i class="anchor-icon anchor-icon-link" anchorid="使用glclearcolor设置清除颜色缓冲区时使用的颜色" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glClearColor</span><span class="hljs-params">(GLfloat red, GLfloat green, GLfloat blue, GLfloat alpha)</span></span>;</li></ol></pre></div></div>     <p>glClearColor(1.0f, 1.0f, 1.0f, 1.0f)此时设置清除颜色缓冲区时使用的颜色为 (1.0, 1.0, 1.0)，即红色分量为1.0、绿色分量为1.0、蓝色分量为1.0、透明度为1.0（不透明）。</p>    </div>    <div class="tiledSection">     <h3 id="使用glclear执行清除操作">使用glClear执行清除操作<i class="anchor-icon anchor-icon-link" anchorid="使用glclear执行清除操作" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glClear</span><span class="hljs-params">(GLbitfield mask)</span></span>;</li></ol></pre></div></div>     <p>glClear函数用于清除指定的缓冲区。参数mask指定需要清除的缓冲区，可以是以下值的组合：</p>     <ul>      <li>GL_COLOR_BUFFER_BIT：清除颜色缓冲区。</li>      <li>GL_DEPTH_BUFFER_BIT：清除深度缓冲区。</li>      <li>GL_STENCIL_BUFFER_BIT：清除模板缓冲区。</li>     </ul>     <p>可调用glClear(GL_COLOR_BUFFER_BIT)清除颜色缓冲区，并用之前glClearColor设置的颜色填充整个缓冲区。清除颜色缓冲区是在开始绘制新帧之前的一个常见操作，这可以确保屏幕上的每个像素都被初始化为指定的颜色值，以便绘制新的图像。也是绘制新帧的准备工作，类似于在画布上涂上底色，以便开始新的绘画。</p>    </div>    <div class="tiledSection">     <h3 id="使用glgetattriblocation获取属性变量位置">使用glGetAttribLocation获取属性变量位置<i class="anchor-icon anchor-icon-link" anchorid="使用glgetattriblocation获取属性变量位置" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">GLint <span class="hljs-title">glGetAttribLocation</span><span class="hljs-params">(GLuint program, <span class="hljs-type">const</span> GLchar *name)</span></span>;</li></ol></pre></div></div>     <p>glGetAttribLocation函数用于获取顶点着色器中某个属性的位置，这个位置在编译链接顶点着色器程序后就已经确定了，它是根据属性的名称来确定的。其中program指要查询的程序对象，name指要查询其位置的属性变量的名称。</p>    </div>    <div class="tiledSection">     <h3 id="使用glgetuniformlocation获取统一变量位置">使用glGetUniformLocation获取统一变量位置<i class="anchor-icon anchor-icon-link" anchorid="使用glgetuniformlocation获取统一变量位置" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">GLint <span class="hljs-title">glGetUniformLocation</span><span class="hljs-params">(GLuint program, <span class="hljs-type">const</span> GLchar *name)</span></span>;</li></ol></pre></div></div>     <p>glGetUniformLocation函数用于查询特定统一变量在程序对象中的位置。其中program指要查询的程序对象，name指要查询其位置的统一变量的名称。</p>    </div>    <div class="tiledSection">     <h3 id="使用gluniformmatrix4fv传递44矩阵">使用glUniformMatrix4fv传递4×4矩阵<i class="anchor-icon anchor-icon-link" anchorid="使用gluniformmatrix4fv传递44矩阵" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glUniformMatrix4fv</span><span class="hljs-params">(GLint location, GLsizei count, GLboolean transpose, <span class="hljs-type">const</span> GLfloat *value)</span></span>;</li></ol></pre></div></div>     <p>glGetUniformLocation函数用于获取着色器中uniform变量的位置。其中各个参数含义如下：</p>     <ul>      <li>location：要修改的uniform变量的位置。</li>      <li>count：要修改的矩阵的数量。如果目标uniform变量不是数组，则此值应为1；如果是数组，则应大于等于1。</li>      <li>transpose：是否转置矩阵。如果是GL_FALSE，则矩阵按列优先(column major)顺序传递；如果是GL_TRUE，则矩阵按行优先(row major)顺序传递。</li>      <li>value：由count个元素组成的数组的指针，这些元素将用于更新指定的uniform变量。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="使用gluniform3f向着色器传递颜色和方向">使用glUniform3f向着色器传递颜色和方向<i class="anchor-icon anchor-icon-link" anchorid="使用gluniform3f向着色器传递颜色和方向" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glUniform3f</span><span class="hljs-params">(GLint location, GLfloat v0, GLfloat v1, GLfloat v2)</span></span>;</li></ol></pre></div></div>     <p>glUniform3f函数为当前程序对象指定Uniform变量的值。其中location指明要更改的变量位置，v0、v1、v2表示变量中要使用的新值。</p>    </div>    <div class="tiledSection">     <h3 id="创建缓冲区并上传数据到gpu">创建缓冲区并上传数据到GPU<i class="anchor-icon anchor-icon-link" anchorid="创建缓冲区并上传数据到gpu" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li>GLuint buffer;</li><li><span class="hljs-built_in">glGenBuffers</span>(<span class="hljs-number">1</span>, &amp;buffer);                                                  <span class="hljs-comment">// 生成一个缓冲区对象</span></li><li><span class="hljs-built_in">glBindBuffer</span>(GL_ARRAY_BUFFER, buffer);                                     <span class="hljs-comment">// 绑定缓冲区，将缓冲区设置为当前操作的缓冲区</span></li><li><span class="hljs-built_in">glBufferData</span>(GL_ARRAY_BUFFER, len, data, GL_STATIC_DRAW);                  <span class="hljs-comment">// 上传数据到GPU</span></li><li><span class="hljs-built_in">glVertexAttribPointer</span>(index, TRIANGLES_POINT, GL_FLOAT, GL_FALSE, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);   <span class="hljs-comment">// 设置顶点属性指针</span></li><li><span class="hljs-built_in">glEnableVertexAttribArray</span>(index);                                          <span class="hljs-comment">// 启用顶点属性数组</span></li></ol></pre></div></div>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glBindBuffer</span><span class="hljs-params">(GLenum target,   <span class="hljs-comment">// target：指定要绑定的缓冲目标,可为以下值之一：</span></span></span></li><li><span class="hljs-function">                                   <span class="hljs-comment">// GL_ARRAY_BUFFER：用于存储顶点属性数据；</span></span></li><li><span class="hljs-function">                                   <span class="hljs-comment">// GL_ELEMENT_ARRAY_BUFFER：用于存储索引数据等其他。</span></span></li><li><span class="hljs-function">                  GLuint buffer)</span>;  <span class="hljs-comment">// buffer为要绑定的顶点缓冲对象的名称。</span></li></ol></pre></div></div>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glBufferData</span><span class="hljs-params">(GLenum target,       <span class="hljs-comment">// target：指定缓冲对象的类型，可为以下值之一：</span></span></span></li><li><span class="hljs-function">                                       <span class="hljs-comment">// GL_ARRAY_BUFFER：用于存储顶点属性数据;</span></span></li><li><span class="hljs-function">                                       <span class="hljs-comment">// GL_ELEMENT_ARRAY_BUFFER：用于存储索引数据。</span></span></li><li><span class="hljs-function">                  GLsizeiptr size,     <span class="hljs-comment">// 指定要分配的缓冲区的大小（以字节为单位）。</span></span></li><li><span class="hljs-function">                  <span class="hljs-type">const</span> GLvoid* data,  <span class="hljs-comment">// 指定要复制到缓冲区的初始数据。</span></span></li><li><span class="hljs-function">                  GLenum usage)</span>;       <span class="hljs-comment">// 指定缓冲区的预期使用方式，可为以下值之一：</span></li><li>                                       <span class="hljs-comment">// GL_STATIC_DRAW：数据不会或几乎不会被修改，并且被绘制命令多次使用；</span></li><li>                                       <span class="hljs-comment">// GL_DYNAMIC_DRAW：数据会被频繁修改，并且被绘制命令多次使用；</span></li><li>                                       <span class="hljs-comment">// GL_STREAM_DRAW：数据会被修改，并且被绘制命令少量使用。</span></li></ol></pre></div></div>     <p>一旦调用glBufferData函数，数据就被复制到了OpenGL的缓冲对象中，并存储在GPU的显存中。这意味着数据可以在GPU上被高效地访问和处理，而无需频繁地从CPU内存传输数据，从而提高了渲染性能。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glVertexAttribPointer</span><span class="hljs-params">(GLuint index,         <span class="hljs-comment">// 指定要修改的顶点数组的起始索引，索引它与顶点着色器中的属性变量绑定。（layout (location = 0) in vec3 aPos;）</span></span></span></li><li><span class="hljs-function">                           GLint size,           <span class="hljs-comment">// 指定每个顶点属性的分量个数</span></span></li><li><span class="hljs-function">                           GLenum type,          <span class="hljs-comment">// 指定每个顶点属性分量的类型</span></span></li><li><span class="hljs-function">                           GLboolean normalized, <span class="hljs-comment">// 指定在访问顶点数据时是否将其映射到[0, 1]或[-1, 1]范围内</span></span></li><li><span class="hljs-function">                           GLsizei stride,       <span class="hljs-comment">// 指定顶点属性之间的偏移量,如果是精密性排列可以设置为0</span></span></li><li><span class="hljs-function">                           <span class="hljs-type">const</span> <span class="hljs-type">void</span> *offset)</span>;  <span class="hljs-comment">//属性在缓冲区中的偏移量，允许在缓冲区中指定一个位置开始读取数据。</span></li></ol></pre></div></div>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glEnableVertexAttribArray</span><span class="hljs-params">(GLuint index)</span></span>;</li></ol></pre></div></div>     <p>glEnableVertexAttribArray函数用于启用指定索引的顶点属性数组。例如，调用glEnableVertexAttribArray(0)可以启用位置索引为0的顶点属性数组。</p>    </div>    <div class="tiledSection">     <h3 id="启用功能">启用功能<i class="anchor-icon anchor-icon-link" anchorid="启用功能" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glEnable</span><span class="hljs-params">(GLenum cap)</span></span>;</li></ol></pre></div></div>     <p>glEnable函数用于启用各种功能，具体功能由参数cap决定，cap可为以下值：</p>     <ul>      <li>GL_BLEND：启用颜色混合，例如实现半透明效果。</li>      <li>GL_DEPTH_TEST：启用深度测试，根据坐标的远近自动隐藏被遮住的图形。</li>      <li>GL_CULL_FACE：根据多边形在窗口坐标中的缠绕来剔除多边形。</li>     </ul>    </div>    <div class="tiledSection">     <h3 id="绘制图元并显示">绘制图元并显示<i class="anchor-icon anchor-icon-link" anchorid="绘制图元并显示" tips="复制节点链接"></i></h3>          <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">glDrawArrays</span><span class="hljs-params">(GLenum mode,   <span class="hljs-comment">// 参数指定要绘制的图元的类型，比如GL_TRIANGLES表示绘制三角形。</span></span></span></li><li><span class="hljs-function">                  GLint first,   <span class="hljs-comment">// 参数指定要绘制的顶点数组的起始索引。</span></span></li><li><span class="hljs-function">                  GLsizei count  <span class="hljs-comment">// 参数指定要绘制的顶点数量</span></span></li><li><span class="hljs-function">                  )</span>;</li></ol></pre></div></div>     <p>glDrawArrays函数用于根据当前绑定的顶点数组和顶点属性以及其他设置来绘制图元。</p>     <div _ngcontent-jrt-c106="" class="highlight-div"><div _ngcontent-jrt-c106="" class="highlight-div-header"><div _ngcontent-jrt-c106="" class="highlight-div-header-left"><div _ngcontent-jrt-c106="" class="handle-button expand-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jrt-c106="" class="highlight-div-header-right"><div _ngcontent-jrt-c106="" class="handle-button ai-button"></div><div _ngcontent-jrt-c106="" class="handle-button line-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jrt-c106="" class="handle-button theme-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jrt-c106="" class="handle-button copy-button"><div _ngcontent-jrt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jrt-c106="" class="highlight-scroll-div"><pre class="cpp prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">EGLBoolean <span class="hljs-title">eglSwapBuffers</span><span class="hljs-params">(EGLDisplay dpy,      <span class="hljs-comment">// EGL显示连接</span></span></span></li><li><span class="hljs-function">                          EGLSurface surface)</span>; <span class="hljs-comment">// 要交换其缓冲区的EGL表面</span></li></ol></pre></div></div>     <p>eglSwapBuffers函数用于交换前后缓冲区的内容，并将渲染结果显示在屏幕上。</p>    </div>    <div class="tiledSection">     <h2 id="示例代码">示例代码<i class="anchor-icon anchor-icon-link" anchorid="示例代码" tips="复制节点链接"></i></h2>          <ul>      <li><a href="https://gitee.com/harmonyos_samples/ndk-opengl" target="_blank">基于OpenGL图形库实现绘制三棱锥功能</a></li>     </ul>    </div>   </div>   <div></div></div>