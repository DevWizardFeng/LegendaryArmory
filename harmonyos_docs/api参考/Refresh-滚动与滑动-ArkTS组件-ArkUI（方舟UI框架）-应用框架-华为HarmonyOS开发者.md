<h1 _ngcontent-xmy-c119="" class="doc-title ng-star-inserted" title="Refresh"> Refresh </h1>

<div _ngcontent-xmy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>可以进行页面下拉操作并显示刷新动效的容器组件。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>        <p>该组件从API version 8开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p></li>       <li>        <p>该组件从API version 12开始支持与垂直滚动的Swiper和Web的联动。当Swiper设置loop属性为true时，Refresh无法和Swiper产生联动。</p></li>       <li>        <p>Refresh和内容大小小于组件自身的List组件嵌套使用并且中间还有其他组件时，手势可能会被中间组件响应，导致Refresh未产生下拉刷新效果，可以将<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scrollable-common#edgeeffectoptions11对象说明">alwaysEnabled</a>参数设为true，此时List会响应手势并通过嵌套滚动带动Refresh组件产生下拉刷新效果，具体可以参考<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#示例9不满一屏场景实现下拉刷新">示例9不满一屏实现下拉刷新</a>。</p></li>       <li>        <p>组件内部已绑定手势实现跟手滚动等功能，需要增加自定义手势操作时请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-blocking-enhancement">手势拦截增强</a>进行处理。</p></li>       <li>        <p>组件无法通过鼠标按下拖动操作进行下拉刷新。</p></li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="子组件" device-type="phone,2in1,tablet,wearable,tv">子组件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="子组件" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>支持单个子组件。</p>     <p>从API version 11开始，Refresh子组件会跟随手势下拉而下移。</p>    </div>    <div class="tiledSection">     <h2 id="接口" device-type="phone,2in1,tablet,wearable,tv">接口<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="接口" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>Refresh(value: RefreshOptions)</p>     <p>创建Refresh容器。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#refreshoptions对象说明">RefreshOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">刷新组件参数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="refreshoptions对象说明" device-type="phone,2in1,tablet,wearable,tv">RefreshOptions对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="refreshoptions对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于设置Refresh组件参数。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">refreshing</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>组件当前是否处于刷新中状态。true表示处于刷新中状态，false表示未处于刷新中状态。</p>          <p>默认值：false</p>          <p>该参数支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-two-way-sync" target="_blank">$$</a>双向绑定变量。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">offset<sup>(deprecated)</sup></td>         <td class="cellrowborder" width="20%">number | string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>下拉起点距离组件顶部的距离。</p>          <p>默认值：16，单位vp。类型为string时，需要显式指定像素单位，如'10px'；未指定像素单位时，如'10'，单位为vp。</p>          <p>从API version 11开始废弃，无替代接口。</p>          <p><strong>说明：</strong></p>          <p>offset取值范围[0vp,64vp]。大于64vp按照64vp处理。不支持百分比，不支持负数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">friction<sup>(deprecated)</sup></td>         <td class="cellrowborder" width="20%">number | string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>下拉摩擦系数，取值范围为0到100。</p>          <p>默认值：62</p>          <p>- 0表示下拉刷新容器不跟随手势下拉而下拉。</p>          <p>- 100表示下拉刷新容器紧紧跟随手势下拉而下拉。</p>          <p>- 数值越大，下拉刷新容器跟随手势下拉的反应越灵敏。</p>          <p>从API version 11开始废弃，从API version 12开始，可用<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#pulldownratio12">pullDownRatio</a>属性替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">builder<sup>10+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#custombuilder8">CustomBuilder</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>自定义刷新区域显示内容。</p>          <p><strong>说明：</strong></p>          <p>API version 10及之前版本，自定义组件的高度限制在64vp之内。API version 11及以后版本没有此限制。</p>          <p>自定义组件设置了固定高度时，自定义组件会以固定高度显示在刷新区域下方；自定义组件未设置高度时，自定义组件高度会自适应刷新区域高度，会发生自定义组件高度跟随刷新区域变化至0的现象。建议对自定义组件设置最小高度约束来避免自定义组件高度小于预期的情况发生，具体可参照<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#示例3自定义刷新区域显示内容-builder">示例3</a>。</p>          <p>从API version 12开始，建议使用refreshingContent参数替代builder参数自定义刷新区域显示内容，以避免刷新过程中因自定义组件销毁重建造成的动画中断问题。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">promptText<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置刷新区域底部显示的自定义文本。</p>          <p><strong>说明：</strong></p>          <p>输入文本的限制参考Text组件，使用builder或refreshingContent参数自定义刷新区域显示内容时，promptText不显示。</p>          <p>promptText设置有效时，<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#refreshoffset12">refreshOffset</a>属性默认值为96vp。</p>          <p>自定义文本最大的字体缩放倍数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-text#maxfontscale12">maxFontScale</a>为2。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">refreshingContent<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-componentcontent">ComponentContent</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>自定义刷新区域显示内容。</p>          <p><strong>说明：</strong></p>          <p>与builder参数同时设置时builder参数不生效。</p>          <p>自定义组件设置了固定高度时，自定义组件会以固定高度显示在刷新区域下方；自定义组件未设置高度时，自定义组件高度会自适应刷新区域高度，会发生自定义组件高度跟随刷新区域变化至0的现象。建议对自定义组件设置最小高度约束来避免自定义组件高度小于预期的情况发生，具体可参照<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#示例4自定义刷新区域显示内容-refreshingcontent">示例4</a>。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>当未设置builder或refreshingContent时，是通过更新子组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-transformation#translate">translate</a>属性实现的下拉位移效果，下拉位移过程中不会触发子组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-area-change-event#onareachange">onAreaChange</a>事件，子组件设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-transformation#translate">translate</a>属性时不会生效。</li>        <li>当设置了builder或refreshingContent时，是通过更新子组件相对于Refresh组件的位置实现的下拉位移效果，下拉位移过程中可以触发子组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-area-change-event#onareachange">onAreaChange</a>事件，子组件设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-location#position">position</a>属性时会固定子组件相对于Refresh组件的位置导致子组件不会跟手进行下拉位移。</li>        <li>通过builder参数设置的自定义组件在未指定宽度和高度时，其尺寸将自适应子组件，在指定宽度而未指定高度时，其高度将自适应下拉距离。通过refreshingContent参数设置的自定义组件若未指定高度，其高度同样会自适应下拉距离。当自定义组件高度自适应下拉距离时，随着下拉距离的增加，该组件的高度亦随之增加；当自定义组件的高度设定为固定值或达到最大高度限制时，随着下拉距离的增加，自定义组件与Refresh组件上边界之间的间距亦会随之增加。</li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-component-general-attributes">通用属性</a>外，还支持以下属性：</p>    </div>    <div class="tiledSection">     <h3 id="refreshoffset12" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">refreshOffset<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="refreshoffset12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>refreshOffset(value: number)</p>     <p>设置触发刷新的下拉偏移量，当下拉距离小于该属性设置值时离手不会触发刷新。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>下拉偏移量，单位vp。</p>          <p>默认值：未设置<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#refreshoptions对象说明">promptText</a>参数时为64vp，设置了<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#refreshoptions对象说明">promptText</a>参数时为96vp。</p>          <p>如果取值为0或负数的时候此接口采用默认值。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="pulltorefresh12" device-type="phone,2in1,tablet,wearable,tv">pullToRefresh<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pulltorefresh12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pullToRefresh(value: boolean)</p>     <p>设置当下拉距离超过<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#refreshoffset12">refreshOffset</a>时是否能触发刷新。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>当下拉距离超过<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#refreshoffset12">refreshOffset</a>时是否能触发刷新。true表示能触发刷新，false表示不能触发刷新。</p>          <p>默认值：true</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="pulldownratio12" device-type="phone,2in1,tablet,wearable,tv">pullDownRatio<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pulldownratio12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pullDownRatio(ratio: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-custom-property#optionalt12">Optional</a>&lt;number&gt;)</p>     <p>设置下拉跟手系数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">ratio</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-custom-property#optionalt12">Optional</a>&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>下拉跟手系数。数值越大，跟随手势下拉的反应越灵敏。0表示不跟随手势下拉，1表示等比例跟随手势下拉。</p>          <p>没有设置或设置为undefined时，默认使用动态下拉跟手系数，下拉距离越大，跟手系数越小。</p>          <p>有效值为0-1之间的值，小于0的值会被视为0，大于1的值会被视为1。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="maxpulldowndistance20" device-type="phone,2in1,tablet,wearable,tv">maxPullDownDistance<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="maxpulldowndistance20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>maxPullDownDistance(distance: Optional&lt;number&gt;)</p>     <p>设置最大下拉距离。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">distance</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-custom-property#optionalt12">Optional</a>&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>最大下拉距离。最大下拉距离的最小值为0，小于0按0处理。当该值小于刷新的下拉偏移量refreshOffset时，Refresh下拉离手不会触发刷新。</p>          <p>undefined和null按没有设置此属性处理。</p>          <p>默认值：undefined</p>          <p>单位：vp</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="事件" device-type="phone,2in1,tablet,wearable,tv">事件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="事件" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>除支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-component-general-events">通用事件</a>外，还支持以下事件：</p>    </div>    <div class="tiledSection">     <h3 id="onstatechange" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">onStateChange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onstatechange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onStateChange(callback: (state: RefreshStatus) =&gt; void)</p>     <p>当前刷新状态变更时，触发回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">state</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#refreshstatus枚举说明">RefreshStatus</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">刷新状态。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="onrefreshing" device-type="phone,2in1,tablet,wearable,tv">onRefreshing<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onrefreshing" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onRefreshing(callback: () =&gt; void)</p>     <p>进入刷新状态时触发回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">() =&gt; void</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">进入刷新状态时触发的回调。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="onoffsetchange12" device-type="phone,2in1,tablet,wearable,tv">onOffsetChange<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onoffsetchange12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onOffsetChange(callback: Callback&lt;number&gt;)</p>     <p>下拉距离发生变化时触发回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 20开始，该接口支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>下拉距离。</p>          <p>单位：vp</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="refreshstatus枚举说明" device-type="phone,2in1,tablet,wearable,tv">RefreshStatus枚举说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="refreshstatus枚举说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>RefreshStatus刷新状态枚举。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">Inactive</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">默认未下拉状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">Drag</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>下拉中，下拉距离小于刷新距离。</p>          <p>若此时松手，组件进入Inactive状态；若此时继续下拉使下拉距离超过刷新距离，组件进入OverDrag状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">OverDrag</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>下拉中，下拉距离超过刷新距离。</p>          <p>若此时松手，组件进入Refresh状态；若此时上滑使下拉距离小于刷新距离，组件进入Drag状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">Refresh</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">下拉结束，回弹至刷新距离，进入刷新中状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">Done</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">刷新结束，返回初始状态（顶部）。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="示例" device-type="phone,2in1,tablet,wearable,tv">示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="示例1默认刷新样式" class="firsth2">示例1（默认刷新样式）<i class="anchor-icon anchor-icon-link" anchorid="示例1默认刷新样式" tips="复制节点链接"></i></h3>          <p>刷新区域使用默认刷新样式。</p>     <div _ngcontent-xmy-c106="" class="highlight-div"><div _ngcontent-xmy-c106="" class="highlight-div-header"><div _ngcontent-xmy-c106="" class="highlight-div-header-left"><div _ngcontent-xmy-c106="" class="handle-button expand-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xmy-c106="" class="highlight-div-header-right"><div _ngcontent-xmy-c106="" class="handle-button ai-button"></div><div _ngcontent-xmy-c106="" class="handle-button line-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xmy-c106="" class="handle-button theme-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xmy-c106="" class="handle-button copy-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RefreshExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isRefreshing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">String</span>[] = [<span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'10'</span>];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'开始刷新'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">true</span>;</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'停止刷新'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span>;</li><li>        })</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Refresh</span>({ <span class="hljs-attr">refreshing</span>: $$this.<span class="hljs-property">isRefreshing</span> }) {</li><li>        <span class="hljs-title class_">List</span>() {</li><li>          <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-title class_">ListItem</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + item)</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>                .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>                .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>            }</li><li>          }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>        }</li><li>        .<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">first: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(first.<span class="hljs-title function_">toString</span>());</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">onStateChange</span>(<span class="hljs-function">(<span class="hljs-params">refreshStatus: RefreshStatus</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onStatueChange state is '</span> + refreshStatus);</li><li>      })</li><li>      .<span class="hljs-title function_">onOffsetChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onOffsetChange offset:'</span> + value);</li><li>      })</li><li>      .<span class="hljs-title function_">onRefreshing</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span>;</li><li>        }, <span class="hljs-number">2000</span>)</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onRefreshing test'</span>);</li><li>      })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x89CFF0</span>)</li><li>      .<span class="hljs-title function_">refreshOffset</span>(<span class="hljs-number">64</span>)</li><li>      .<span class="hljs-title function_">pullToRefresh</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="728" originwidth="350" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115702.49922665608752492506267205726283:50001231000000:2800:C8BC9483E0C5922E38E1DE0B497BB972271B1AF98B4A47FF19BA01BB8E034030.gif" width="350" height="728"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例2设置刷新区域显示文本">示例2（设置刷新区域显示文本）<i class="anchor-icon anchor-icon-link" anchorid="示例2设置刷新区域显示文本" tips="复制节点链接"></i></h3>          <p>通过<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#refreshoptions对象说明">promptText</a>参数设置刷新区域显示文本。</p>     <div _ngcontent-xmy-c106="" class="highlight-div"><div _ngcontent-xmy-c106="" class="highlight-div-header"><div _ngcontent-xmy-c106="" class="highlight-div-header-left"><div _ngcontent-xmy-c106="" class="handle-button expand-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xmy-c106="" class="highlight-div-header-right"><div _ngcontent-xmy-c106="" class="handle-button ai-button"></div><div _ngcontent-xmy-c106="" class="handle-button line-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xmy-c106="" class="handle-button theme-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xmy-c106="" class="handle-button copy-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RefreshExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isRefreshing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">promptText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Refreshing..."</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'10'</span>];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Refresh</span>({ <span class="hljs-attr">refreshing</span>: $$this.<span class="hljs-property">isRefreshing</span>, <span class="hljs-attr">promptText</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">promptText</span> }) {</li><li>        <span class="hljs-title class_">List</span>() {</li><li>          <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-title class_">ListItem</span>() {</li><li>              <span class="hljs-title class_">Text</span>(item)</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>                .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>                .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>            }</li><li>          }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>        }</li><li>        .<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">first: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(first.<span class="hljs-title function_">toString</span>());</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x89CFF0</span>)</li><li>      .<span class="hljs-title function_">pullToRefresh</span>(<span class="hljs-literal">true</span>)</li><li>      .<span class="hljs-title function_">refreshOffset</span>(<span class="hljs-number">96</span>)</li><li>      .<span class="hljs-title function_">onStateChange</span>(<span class="hljs-function">(<span class="hljs-params">refreshStatus: RefreshStatus</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onStatueChange state is '</span> + refreshStatus);</li><li>      })</li><li>      .<span class="hljs-title function_">onOffsetChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onOffsetChange offset:'</span> + value);</li><li>      })</li><li>      .<span class="hljs-title function_">onRefreshing</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span>;</li><li>        }, <span class="hljs-number">2000</span>)</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onRefreshing test'</span>);</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="884" originwidth="414" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115702.50006882995753384167284542369080:50001231000000:2800:11CCACD2F394E6DDD545DBB56B6838F47A0D772BD72CEE60AAF697AC69883E22.gif" width="414" height="884"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例3自定义刷新区域显示内容-builder">示例3（自定义刷新区域显示内容-builder）<i class="anchor-icon anchor-icon-link" anchorid="示例3自定义刷新区域显示内容-builder" tips="复制节点链接"></i></h3>          <p>通过<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#refreshoptions对象说明">builder</a>参数自定义刷新区域显示内容。</p>     <div _ngcontent-xmy-c106="" class="highlight-div"><div _ngcontent-xmy-c106="" class="highlight-div-header"><div _ngcontent-xmy-c106="" class="highlight-div-header-left"><div _ngcontent-xmy-c106="" class="handle-button expand-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xmy-c106="" class="highlight-div-header-right"><div _ngcontent-xmy-c106="" class="handle-button ai-button"></div><div _ngcontent-xmy-c106="" class="handle-button line-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xmy-c106="" class="handle-button theme-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xmy-c106="" class="handle-button copy-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RefreshExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isRefreshing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">String</span>[] = [<span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'10'</span>];</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">customRefreshComponent</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">LoadingProgress</span>().<span class="hljs-title function_">height</span>(<span class="hljs-number">32</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"Refreshing..."</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">20</span> })</li><li>      }</li><li>      .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">align</span>(<span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Center</span>)</li><li>    .<span class="hljs-title function_">clip</span>(<span class="hljs-literal">true</span>)</li><li>    <span class="hljs-comment">// 设置最小高度约束保证自定义组件高度随刷新区域高度变化时自定义组件高度不会低于minHeight。</span></li><li>    .<span class="hljs-title function_">constraintSize</span>({ <span class="hljs-attr">minHeight</span>: <span class="hljs-number">32</span> })</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Refresh</span>({ <span class="hljs-attr">refreshing</span>: $$this.<span class="hljs-property">isRefreshing</span>, <span class="hljs-attr">builder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">customRefreshComponent</span>() }) {</li><li>        <span class="hljs-title class_">List</span>() {</li><li>          <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-title class_">ListItem</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + item)</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>                .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>                .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>            }</li><li>          }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>        }</li><li>        .<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">first: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(first.<span class="hljs-title function_">toString</span>());</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x89CFF0</span>)</li><li>      .<span class="hljs-title function_">pullToRefresh</span>(<span class="hljs-literal">true</span>)</li><li>      .<span class="hljs-title function_">refreshOffset</span>(<span class="hljs-number">64</span>)</li><li>      .<span class="hljs-title function_">onStateChange</span>(<span class="hljs-function">(<span class="hljs-params">refreshStatus: RefreshStatus</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onStatueChange state is '</span> + refreshStatus);</li><li>      })</li><li>      .<span class="hljs-title function_">onRefreshing</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span>;</li><li>        }, <span class="hljs-number">2000</span>)</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onRefreshing test'</span>);</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="884" originwidth="414" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115702.17011820368139906779036755983180:50001231000000:2800:53866EC2B0F4E0E41591A778E337148D79107F4F4E2137C55E167D89CBADF284.gif" width="414" height="884"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例4自定义刷新区域显示内容-refreshingcontent">示例4（自定义刷新区域显示内容-refreshingContent）<i class="anchor-icon anchor-icon-link" anchorid="示例4自定义刷新区域显示内容-refreshingcontent" tips="复制节点链接"></i></h3>          <p>通过<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#refreshoptions对象说明">refreshingContent</a>参数自定义刷新区域显示内容。</p>     <div _ngcontent-xmy-c106="" class="highlight-div"><div _ngcontent-xmy-c106="" class="highlight-div-header"><div _ngcontent-xmy-c106="" class="highlight-div-header-left"><div _ngcontent-xmy-c106="" class="handle-button expand-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xmy-c106="" class="highlight-div-header-right"><div _ngcontent-xmy-c106="" class="handle-button ai-button"></div><div _ngcontent-xmy-c106="" class="handle-button line-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xmy-c106="" class="handle-button theme-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xmy-c106="" class="handle-button copy-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">refreshStatus</span>: <span class="hljs-title class_">RefreshStatus</span> = <span class="hljs-title class_">RefreshStatus</span>.<span class="hljs-property">Inactive</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">refreshStatus: RefreshStatus</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshStatus</span> = refreshStatus;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">customRefreshingContent</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">Stack</span>() {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">LoadingProgress</span>().<span class="hljs-title function_">height</span>(<span class="hljs-number">32</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"refreshStatus: "</span> + params.<span class="hljs-property">refreshStatus</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">20</span> })</li><li>    }</li><li>    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>  .<span class="hljs-title function_">align</span>(<span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Center</span>)</li><li>  .<span class="hljs-title function_">clip</span>(<span class="hljs-literal">true</span>)</li><li>  <span class="hljs-comment">// 设置最小高度约束保证自定义组件高度随刷新区域高度变化时自定义组件高度不会低于minHeight。</span></li><li>  .<span class="hljs-title function_">constraintSize</span>({ <span class="hljs-attr">minHeight</span>: <span class="hljs-number">32</span> })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RefreshExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isRefreshing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">String</span>[] = [<span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'10'</span>];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">refreshStatus</span>: <span class="hljs-title class_">RefreshStatus</span> = <span class="hljs-title class_">RefreshStatus</span>.<span class="hljs-property">Inactive</span>;</li><li>  <span class="hljs-keyword">private</span> contentNode?: <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Object</span>&gt; = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">Params</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-title class_">RefreshStatus</span>.<span class="hljs-property">Inactive</span>);</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> uiContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(uiContext, <span class="hljs-title function_">wrapBuilder</span>(customRefreshingContent), <span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Refresh</span>({ <span class="hljs-attr">refreshing</span>: $$this.<span class="hljs-property">isRefreshing</span>, <span class="hljs-attr">refreshingContent</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span> }) {</li><li>        <span class="hljs-title class_">List</span>() {</li><li>          <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-title class_">ListItem</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + item)</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>                .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>                .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>            }</li><li>          }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>        }</li><li>        .<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">first: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(first.<span class="hljs-title function_">toString</span>());</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x89CFF0</span>)</li><li>      .<span class="hljs-title function_">pullToRefresh</span>(<span class="hljs-literal">true</span>)</li><li>      .<span class="hljs-title function_">refreshOffset</span>(<span class="hljs-number">96</span>)</li><li>      .<span class="hljs-title function_">onStateChange</span>(<span class="hljs-function">(<span class="hljs-params">refreshStatus: RefreshStatus</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshStatus</span> = refreshStatus;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>.<span class="hljs-property">refreshStatus</span> = refreshStatus;</li><li>        <span class="hljs-comment">// 更新自定义组件内容。</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span>?.<span class="hljs-title function_">update</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onStatueChange state is '</span> + refreshStatus);</li><li>      })</li><li>      .<span class="hljs-title function_">onRefreshing</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span>;</li><li>        }, <span class="hljs-number">2000</span>)</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onRefreshing test'</span>);</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="887" originwidth="414" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115702.69646962815109432373929926672167:50001231000000:2800:B540ED146F2A43F612C08AEA5E998356DC969E1DE1E64916DDAD96331E37D184.gif" width="414" height="887"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例5实现最大下拉距离">示例5（实现最大下拉距离）<i class="anchor-icon anchor-icon-link" anchorid="示例5实现最大下拉距离" tips="复制节点链接"></i></h3>          <p>通过<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#pulldownratio12">pullDownRatio</a>属性和<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#onoffsetchange12">onOffsetChange</a>事件实现最大下拉距离。</p>     <div _ngcontent-xmy-c106="" class="highlight-div"><div _ngcontent-xmy-c106="" class="highlight-div-header"><div _ngcontent-xmy-c106="" class="highlight-div-header-left"><div _ngcontent-xmy-c106="" class="handle-button expand-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xmy-c106="" class="highlight-div-header-right"><div _ngcontent-xmy-c106="" class="handle-button ai-button"></div><div _ngcontent-xmy-c106="" class="handle-button line-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xmy-c106="" class="handle-button theme-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xmy-c106="" class="handle-button copy-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">customRefreshingContent</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Stack</span>() {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">LoadingProgress</span>().<span class="hljs-title function_">height</span>(<span class="hljs-number">32</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>  .<span class="hljs-title function_">align</span>(<span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Center</span>)</li><li>  .<span class="hljs-title function_">clip</span>(<span class="hljs-literal">true</span>)</li><li>  <span class="hljs-comment">// 设置最小高度约束保证自定义组件高度随刷新区域高度变化时自定义组件高度不会低于minHeight。</span></li><li>  .<span class="hljs-title function_">constraintSize</span>({ <span class="hljs-attr">minHeight</span>: <span class="hljs-number">32</span> })</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RefreshExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isRefreshing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">String</span>[] = [<span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'10'</span>];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">maxRefreshingHeight</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100.0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">ratio</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-keyword">private</span> contentNode?: <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Object</span>&gt; = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> uiContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(uiContext, <span class="hljs-title function_">wrapBuilder</span>(customRefreshingContent));</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Refresh</span>({ <span class="hljs-attr">refreshing</span>: $$this.<span class="hljs-property">isRefreshing</span>, <span class="hljs-attr">refreshingContent</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span> }) {</li><li>        <span class="hljs-title class_">List</span>() {</li><li>          <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-title class_">ListItem</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + item)</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>                .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>                .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>            }</li><li>          }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>        }</li><li>        .<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">first: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(first.<span class="hljs-title function_">toString</span>());</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x89CFF0</span>)</li><li>      .<span class="hljs-title function_">pullDownRatio</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ratio</span>)</li><li>      .<span class="hljs-title function_">pullToRefresh</span>(<span class="hljs-literal">true</span>)</li><li>      .<span class="hljs-title function_">refreshOffset</span>(<span class="hljs-number">64</span>)</li><li>      .<span class="hljs-title function_">onOffsetChange</span>(<span class="hljs-function">(<span class="hljs-params">offset: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-comment">// 越接近最大距离，下拉跟手系数越小。</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">ratio</span> = <span class="hljs-number">1</span> - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>((offset / <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxRefreshingHeight</span>), <span class="hljs-number">3</span>);</li><li>      })</li><li>      .<span class="hljs-title function_">onStateChange</span>(<span class="hljs-function">(<span class="hljs-params">refreshStatus: RefreshStatus</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onStatueChange state is '</span> + refreshStatus);</li><li>      })</li><li>      .<span class="hljs-title function_">onRefreshing</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span>;</li><li>        }, <span class="hljs-number">2000</span>)</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onRefreshing test'</span>);</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="887" originwidth="413" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115702.84332365706034542473741790318283:50001231000000:2800:66A5E1457453AFA3733DC6A111E297813818630E26D20E4364B60BA75462737B.gif" width="413" height="887"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例6实现下拉刷新上拉加载更多">示例6（实现下拉刷新上拉加载更多）<i class="anchor-icon anchor-icon-link" anchorid="示例6实现下拉刷新上拉加载更多" tips="复制节点链接"></i></h3>          <p>Refresh组件与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list">List</a>组件组合实现下拉刷新上拉加载更多效果。</p>     <div _ngcontent-xmy-c106="" class="highlight-div"><div _ngcontent-xmy-c106="" class="highlight-div-header"><div _ngcontent-xmy-c106="" class="highlight-div-header-left"><div _ngcontent-xmy-c106="" class="handle-button expand-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xmy-c106="" class="highlight-div-header-right"><div _ngcontent-xmy-c106="" class="handle-button ai-button"></div><div _ngcontent-xmy-c106="" class="handle-button line-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xmy-c106="" class="handle-button theme-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xmy-c106="" class="handle-button copy-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ListRefreshLoad</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">refreshing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">refreshOffset</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">refreshState</span>: <span class="hljs-title class_">RefreshStatus</span> = <span class="hljs-title class_">RefreshStatus</span>.<span class="hljs-property">Inactive</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isLoading</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">refreshBuilder</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Bottom</span> }) {</li><li>      <span class="hljs-comment">// 可以通过刷新状态控制是否存在Progress组件。</span></li><li>      <span class="hljs-comment">// 当刷新状态处于下拉中或刷新中状态时Progress组件才存在。</span></li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshState</span> != <span class="hljs-title class_">RefreshStatus</span>.<span class="hljs-property">Inactive</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshState</span> != <span class="hljs-title class_">RefreshStatus</span>.<span class="hljs-property">Done</span>) {</li><li>        <span class="hljs-title class_">Progress</span>({ <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshOffset</span>, <span class="hljs-attr">total</span>: <span class="hljs-number">64</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ProgressType</span>.<span class="hljs-property">Ring</span> })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">32</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">32</span>)</li><li>          .<span class="hljs-title function_">style</span>({ <span class="hljs-attr">status</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshing</span> ? <span class="hljs-title class_">ProgressStatus</span>.<span class="hljs-property">LOADING</span> : <span class="hljs-title class_">ProgressStatus</span>.<span class="hljs-property">PROGRESSING</span> })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">clip</span>(<span class="hljs-literal">true</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">footer</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">LoadingProgress</span>().<span class="hljs-title function_">height</span>(<span class="hljs-number">32</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">48</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"加载中"</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-number">64</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    <span class="hljs-comment">// 当不处于加载中状态时隐藏组件。</span></li><li>    .<span class="hljs-title function_">visibility</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">isLoading</span> ? <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">Visible</span> : <span class="hljs-title class_">Visibility</span>.<span class="hljs-property">Hidden</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Refresh</span>({ <span class="hljs-attr">refreshing</span>: $$this.<span class="hljs-property">refreshing</span>, <span class="hljs-attr">builder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">refreshBuilder</span>() }) {</li><li>      <span class="hljs-title class_">List</span>() {</li><li>        <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + item)</li><li>              .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>              .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>              .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>              .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>              .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>          }.<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>
</li><li>        <span class="hljs-title class_">ListItem</span>() {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">footer</span>();</li><li>        }</li><li>      }</li><li>      .<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">start: <span class="hljs-built_in">number</span>, end: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-comment">// 当达到列表末尾时，触发新数据加载。</span></li><li>        <span class="hljs-keyword">if</span> (end &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLoading</span> = <span class="hljs-literal">true</span>;</li><li>          <span class="hljs-comment">// 模拟新数据加载。</span></li><li>          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>.<span class="hljs-property">length</span>);</li><li>            }</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLoading</span> = <span class="hljs-literal">false</span>;</li><li>          }, <span class="hljs-number">700</span>)</li><li>        }</li><li>      })</li><li>      .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      <span class="hljs-comment">// 开启边缘滑动效果。</span></li><li>      .<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">Spring</span>, { <span class="hljs-attr">alwaysEnabled</span>: <span class="hljs-literal">true</span> })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xDCDCDC</span>)</li><li>    .<span class="hljs-title function_">onOffsetChange</span>(<span class="hljs-function">(<span class="hljs-params">offset: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshOffset</span> = offset;</li><li>    })</li><li>    .<span class="hljs-title function_">onStateChange</span>(<span class="hljs-function">(<span class="hljs-params">state: RefreshStatus</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshState</span> = state;</li><li>    })</li><li>    .<span class="hljs-title function_">onRefreshing</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-comment">// 模拟数据刷新。</span></li><li>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshing</span> = <span class="hljs-literal">false</span>;</li><li>      }, <span class="hljs-number">2000</span>)</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="627" originwidth="323" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115702.22852604436765414020783794879722:50001231000000:2800:F0DD961A019E3F6CC4188B9178B22D7F98E1E93D2AE96ED15273C6D97E678D04.gif" width="323" height="627"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例7设置最大下拉距离">示例7（设置最大下拉距离）<i class="anchor-icon anchor-icon-link" anchorid="示例7设置最大下拉距离" tips="复制节点链接"></i></h3>          <p>从API version 20开始，通过<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#maxpulldowndistance20">maxPullDownDistance</a>属性设置最大下拉距离。</p>     <div _ngcontent-xmy-c106="" class="highlight-div"><div _ngcontent-xmy-c106="" class="highlight-div-header"><div _ngcontent-xmy-c106="" class="highlight-div-header-left"><div _ngcontent-xmy-c106="" class="handle-button expand-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xmy-c106="" class="highlight-div-header-right"><div _ngcontent-xmy-c106="" class="handle-button ai-button"></div><div _ngcontent-xmy-c106="" class="handle-button line-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xmy-c106="" class="handle-button theme-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xmy-c106="" class="handle-button copy-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RefreshExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isRefreshing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'10'</span>]</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Refresh</span>({ <span class="hljs-attr">refreshing</span>: $$this.<span class="hljs-property">isRefreshing</span> }) {</li><li>        <span class="hljs-title class_">List</span>() {</li><li>          <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>            <span class="hljs-title class_">ListItem</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + item)</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>                .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>                .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>            }</li><li>          }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>        }</li><li>        .<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">first: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(first.<span class="hljs-title function_">toString</span>())</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>        .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>        .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">maxPullDownDistance</span>(<span class="hljs-number">150</span>)</li><li>      .<span class="hljs-title function_">onStateChange</span>(<span class="hljs-function">(<span class="hljs-params">refreshStatus: RefreshStatus</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onStatueChange state is '</span> + refreshStatus)</li><li>      })</li><li>      .<span class="hljs-title function_">onOffsetChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onOffsetChange offset:'</span> + value)</li><li>      })</li><li>      .<span class="hljs-title function_">onRefreshing</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span></li><li>        }, <span class="hljs-number">2000</span>)</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onRefreshing test'</span>)</li><li>      })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x89CFF0</span>)</li><li>      .<span class="hljs-title function_">refreshOffset</span>(<span class="hljs-number">64</span>)</li><li>      .<span class="hljs-title function_">pullToRefresh</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="476" originwidth="273" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115702.19657640344754017075023099419644:50001231000000:2800:290818B556B40A25824152D9B9499E73BFE353E19D9D1C760F56794BFC3BDCA9.gif" class="notEnlarge" width="273" height="476"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例8禁止下拉刷新">示例8（禁止下拉刷新）<i class="anchor-icon anchor-icon-link" anchorid="示例8禁止下拉刷新" tips="复制节点链接"></i></h3>          <p>通过<a href="/consumer/cn/doc/harmonyos-references/ts-container-refresh#pulldownratio12">pullDownRatio</a>属性禁止下拉刷新。</p>     <div _ngcontent-xmy-c106="" class="highlight-div"><div _ngcontent-xmy-c106="" class="highlight-div-header"><div _ngcontent-xmy-c106="" class="highlight-div-header-left"><div _ngcontent-xmy-c106="" class="handle-button expand-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xmy-c106="" class="highlight-div-header-right"><div _ngcontent-xmy-c106="" class="handle-button ai-button"></div><div _ngcontent-xmy-c106="" class="handle-button line-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xmy-c106="" class="handle-button theme-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xmy-c106="" class="handle-button copy-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RefreshExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isRefreshing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">ratio</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>, <span class="hljs-string">'10'</span>];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'禁止下拉刷新'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">ratio</span> = <span class="hljs-number">0</span></li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'允许下拉刷新'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">ratio</span> = <span class="hljs-literal">undefined</span></li><li>        })</li><li>      }</li><li>      <span class="hljs-title class_">Refresh</span>({ <span class="hljs-attr">refreshing</span>: $$this.<span class="hljs-property">isRefreshing</span> }) {</li><li>          <span class="hljs-title class_">List</span>() {</li><li>            <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>              <span class="hljs-title class_">ListItem</span>() {</li><li>                <span class="hljs-title class_">Text</span>(<span class="hljs-string">''</span> + item)</li><li>                  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>                  .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>                  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                  .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>                  .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>                  .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>                  .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>              }</li><li>            }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>          }</li><li>          .<span class="hljs-title function_">onScrollIndex</span>(<span class="hljs-function">(<span class="hljs-params">first: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(first.<span class="hljs-title function_">toString</span>());</li><li>          })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>          .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Off</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x89CFF0</span>)</li><li>      .<span class="hljs-title function_">refreshOffset</span>(<span class="hljs-number">64</span>)</li><li>      .<span class="hljs-title function_">pullToRefresh</span>(<span class="hljs-literal">true</span>)</li><li>      .<span class="hljs-title function_">pullDownRatio</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ratio</span>)</li><li>      .<span class="hljs-title function_">onStateChange</span>(<span class="hljs-function">(<span class="hljs-params">refreshStatus: RefreshStatus</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onStatueChange state is '</span> + refreshStatus);</li><li>      })</li><li>      .<span class="hljs-title function_">onOffsetChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onOffsetChange offset:'</span> + value);</li><li>      })</li><li>      .<span class="hljs-title function_">onRefreshing</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span>;</li><li>        }, <span class="hljs-number">2000</span>)</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onRefreshing test'</span>);</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="601" originwidth="285" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115702.60201270576715759119515483888131:50001231000000:2800:3ABE2FF3567A59CE85163490F63CC750D80617FCAE3D56877B586053F3680707.gif" class="notEnlarge" width="285" height="601"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例9不满一屏场景实现下拉刷新">示例9（不满一屏场景实现下拉刷新）<i class="anchor-icon anchor-icon-link" anchorid="示例9不满一屏场景实现下拉刷新" tips="复制节点链接"></i></h3>          <p>通过设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scrollable-common#edgeeffect11">edgeEffect</a>属性中的alwaysEnabled参数，可以在不满一屏的情况下实现Refresh组件的下拉刷新效果。</p>     <div _ngcontent-xmy-c106="" class="highlight-div"><div _ngcontent-xmy-c106="" class="highlight-div-header"><div _ngcontent-xmy-c106="" class="highlight-div-header-left"><div _ngcontent-xmy-c106="" class="handle-button expand-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xmy-c106="" class="highlight-div-header-right"><div _ngcontent-xmy-c106="" class="handle-button ai-button"></div><div _ngcontent-xmy-c106="" class="handle-button line-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xmy-c106="" class="handle-button theme-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xmy-c106="" class="handle-button copy-button"><div _ngcontent-xmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RefreshExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isRefreshing</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">alwaysEnabled</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Refresh</span>({ <span class="hljs-attr">refreshing</span>: $$this.<span class="hljs-property">isRefreshing</span> }) {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">List</span>() {</li><li>            <span class="hljs-title class_">ListItem</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'alwaysEnabled:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">alwaysEnabled</span>)</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'70%'</span>)</li><li>                .<span class="hljs-title function_">height</span>(<span class="hljs-number">80</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>                .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>                .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">alwaysEnabled</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">alwaysEnabled</span>;</li><li>                })</li><li>            }</li><li>          }</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">alignListItem</span>(<span class="hljs-title class_">ListItemAlign</span>.<span class="hljs-property">Center</span>)</li><li>          .<span class="hljs-title function_">scrollBar</span>(<span class="hljs-title class_">BarState</span>.<span class="hljs-property">Auto</span>)</li><li>          <span class="hljs-comment">// List组件内容大小小于组件自身且alwaysEnabled为false时，List不会响应手势，此时手势会被Column组件响应，不会产生下拉刷新效果</span></li><li>          <span class="hljs-comment">// alwaysEnabled设为true，List会响应手势并通过嵌套滚动带动Refresh组件产生下拉刷新效果</span></li><li>          .<span class="hljs-title function_">edgeEffect</span>(<span class="hljs-title class_">EdgeEffect</span>.<span class="hljs-property">Spring</span>, { <span class="hljs-attr">alwaysEnabled</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">alwaysEnabled</span> })</li><li>        }</li><li>        .<span class="hljs-title function_">gesture</span>(</li><li>          <span class="hljs-title class_">PanGesture</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">PanDirection</span>.<span class="hljs-property">Vertical</span> })</li><li>        )</li><li>      }</li><li>      .<span class="hljs-title function_">onStateChange</span>(<span class="hljs-function">(<span class="hljs-params">refreshStatus: RefreshStatus</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onStatueChange state is '</span> + refreshStatus);</li><li>      })</li><li>      .<span class="hljs-title function_">onOffsetChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Refresh onOffsetChange offset:'</span> + value);</li><li>      })</li><li>      .<span class="hljs-title function_">onRefreshing</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRefreshing</span> = <span class="hljs-literal">false</span>;</li><li>        }, <span class="hljs-number">2000</span>)</li><li>      })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x89CFF0</span>)</li><li>      .<span class="hljs-title function_">refreshOffset</span>(<span class="hljs-number">64</span>)</li><li>      .<span class="hljs-title function_">pullToRefresh</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="710" originwidth="346" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115702.98119856432146485642822112312061:50001231000000:2800:2E88A357CC0B56EA6F1A4B9D2520BFC30FA4DC47A643501EDD018AFAD08A3AC9.gif" width="346" height="710"></span></p>    </div>   </div>   <div></div></div>