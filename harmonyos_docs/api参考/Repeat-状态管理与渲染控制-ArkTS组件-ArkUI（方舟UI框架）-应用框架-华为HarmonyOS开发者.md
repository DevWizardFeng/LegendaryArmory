<h1 _ngcontent-bmy-c119="" class="doc-title ng-star-inserted" title="Repeat"> Repeat </h1>

<div _ngcontent-bmy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 12开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <p>Repeat基于数组类型数据来进行循环渲染，一般与容器组件配合使用。</p>    <p>本文档仅为API参数说明。组件描述和使用说明见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-rendering-control-repeat" target="_blank">Repeat开发者指南</a>。</p>    <div class="tiledSection">     <h2 id="接口" device-type="phone,2in1,tablet,wearable,tv">接口<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="接口" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="repeat-tarr-arrayt" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">Repeat: &lt;T&gt;(arr: Array&lt;T&gt;)<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="repeat-tarr-arrayt" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">arr</td>         <td class="cellrowborder" width="25%">Array&lt;T&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">数据源，为Array&lt;T&gt;类型的数组，由开发者决定数据类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bmy-c106="" class="highlight-div"><div _ngcontent-bmy-c106="" class="highlight-div-header"><div _ngcontent-bmy-c106="" class="highlight-div-header-left"><div _ngcontent-bmy-c106="" class="handle-button expand-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmy-c106="" class="highlight-div-header-right"><div _ngcontent-bmy-c106="" class="handle-button ai-button"></div><div _ngcontent-bmy-c106="" class="handle-button line-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmy-c106="" class="handle-button theme-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmy-c106="" class="handle-button copy-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// arr是Array&lt;string&gt;类型的数组，以arr为数据源创建Repeat组件</span></li><li><span class="hljs-title class_">Repeat</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>)</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="repeat-tarr-repeatarrayt18" device-type="phone,2in1,tablet,wearable,tv">Repeat: &lt;T&gt;(arr: RepeatArray&lt;T&gt;)<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="repeat-tarr-repeatarrayt18" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 18开始，Repeat数据源支持RepeatArray类型。</p>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 18开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">arr</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-rendering-control-repeat#repeatarrayt18">RepeatArray&lt;T&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">数据源，为RepeatArray&lt;T&gt;类型的数组，由开发者决定数据类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>除支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-drag-sorting">拖拽排序</a>属性外，还支持以下属性。</p>    </div>    <div class="tiledSection">     <h3 id="each" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">each<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="each" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>each(itemGenerator: (repeatItem: RepeatItem&lt;T&gt;) =&gt; void)</p>     <p>组件生成函数。当所有.template()的type和.templateId()返回值不匹配（即当前item不适用任何template定义的样式）时，将使用.each()处理数据项。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>each属性必须有，否则运行时会报错。</p></li>        <li>         <p>itemGenerator的参数为RepeatItem，该参数将item和index结合到了一起，请勿将RepeatItem参数拆开使用。</p></li>        <li>         <p>该接口不支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p></li>       </ul>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">repeatItem</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-rendering-control-repeat#repeatitemt">RepeatItem</a>&lt;T&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">repeat数据项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bmy-c106="" class="highlight-div"><div _ngcontent-bmy-c106="" class="highlight-div-header"><div _ngcontent-bmy-c106="" class="highlight-div-header-left"><div _ngcontent-bmy-c106="" class="handle-button expand-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmy-c106="" class="highlight-div-header-right"><div _ngcontent-bmy-c106="" class="handle-button ai-button"></div><div _ngcontent-bmy-c106="" class="handle-button line-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmy-c106="" class="handle-button theme-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmy-c106="" class="handle-button copy-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// arr是Array&lt;string&gt;类型的数组，为每个数据创建一个Text组件</span></li><li><span class="hljs-title class_">Repeat</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>)</li><li>  .<span class="hljs-title function_">each</span>(<span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> { <span class="hljs-title class_">Text</span>(obj.<span class="hljs-property">item</span>) })</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="key" device-type="phone,2in1,tablet,wearable,tv">key<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="key" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>key(keyGenerator: (item: T, index: number) =&gt; string)</p>     <p>键值生成函数。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口不支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>      </div></div></div>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">item</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">arr数组中的数据项。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">index</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">arr数组中的数据项索引。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bmy-c106="" class="highlight-div"><div _ngcontent-bmy-c106="" class="highlight-div-header"><div _ngcontent-bmy-c106="" class="highlight-div-header-left"><div _ngcontent-bmy-c106="" class="handle-button expand-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmy-c106="" class="highlight-div-header-right"><div _ngcontent-bmy-c106="" class="handle-button ai-button"></div><div _ngcontent-bmy-c106="" class="handle-button line-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmy-c106="" class="handle-button theme-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmy-c106="" class="handle-button copy-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// arr是Array&lt;string&gt;类型的数组，为每个数据创建一个Text组件</span></li><li><span class="hljs-comment">// 并将字符串的值作为其键值</span></li><li><span class="hljs-title class_">Repeat</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>)</li><li>  .<span class="hljs-title function_">each</span>(<span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> { <span class="hljs-title class_">Text</span>(obj.<span class="hljs-property">item</span>) })</li><li>  .<span class="hljs-title function_">key</span>(<span class="hljs-function">(<span class="hljs-params">obj: <span class="hljs-built_in">string</span></span>) =&gt;</span> obj)</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="virtualscroll" device-type="phone,2in1,tablet,wearable,tv">virtualScroll<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="virtualscroll" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>virtualScroll(virtualScrollOptions?: VirtualScrollOptions)</p>     <p>Repeat开启虚拟滚动。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口不支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">virtualScrollOptions</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-rendering-control-repeat#virtualscrolloptions">VirtualScrollOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">虚拟滚动配置项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bmy-c106="" class="highlight-div"><div _ngcontent-bmy-c106="" class="highlight-div-header"><div _ngcontent-bmy-c106="" class="highlight-div-header-left"><div _ngcontent-bmy-c106="" class="handle-button expand-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmy-c106="" class="highlight-div-header-right"><div _ngcontent-bmy-c106="" class="handle-button ai-button"></div><div _ngcontent-bmy-c106="" class="handle-button line-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmy-c106="" class="handle-button theme-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmy-c106="" class="handle-button copy-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// arr是Array&lt;string&gt;类型的数组，为每个数据创建一个Text组件</span></li><li><span class="hljs-comment">// 在List容器组件中使用Repeat，并打开virtualScroll</span></li><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-title class_">Repeat</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>)</li><li>    .<span class="hljs-title function_">each</span>(<span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> { <span class="hljs-title class_">ListItem</span>() { <span class="hljs-title class_">Text</span>(obj.<span class="hljs-property">item</span>) }})</li><li>    .<span class="hljs-title function_">virtualScroll</span>()</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="template" device-type="phone,2in1,tablet,wearable,tv">template<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="template" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>template(type: string, itemBuilder: RepeatItemBuilder&lt;T&gt;, templateOptions?: TemplateOptions)</p>     <p>由template type渲染对应的template子组件。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口不支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前模板类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">itemBuilder</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-rendering-control-repeat#repeatitembuildert">RepeatItemBuilder</a>&lt;T&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">组件生成函数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">templateOptions</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-rendering-control-repeat#templateoptions对象说明">TemplateOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">当前模板配置项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bmy-c106="" class="highlight-div"><div _ngcontent-bmy-c106="" class="highlight-div-header"><div _ngcontent-bmy-c106="" class="highlight-div-header-left"><div _ngcontent-bmy-c106="" class="handle-button expand-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmy-c106="" class="highlight-div-header-right"><div _ngcontent-bmy-c106="" class="handle-button ai-button"></div><div _ngcontent-bmy-c106="" class="handle-button line-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmy-c106="" class="handle-button theme-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmy-c106="" class="handle-button copy-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// arr是Array&lt;string&gt;类型的数组</span></li><li><span class="hljs-comment">// 在List容器组件中使用Repeat，并打开virtualScroll</span></li><li><span class="hljs-comment">// 创建模板temp，该模板为数据创建Text组件</span></li><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-title class_">Repeat</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>)</li><li>    .<span class="hljs-title function_">each</span>(<span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {})</li><li>    .<span class="hljs-title function_">virtualScroll</span>()</li><li>    .<span class="hljs-title function_">template</span>(<span class="hljs-string">'temp'</span>, <span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> { <span class="hljs-title class_">ListItem</span>() { <span class="hljs-title class_">Text</span>(obj.<span class="hljs-property">item</span>) }})</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="templateid" device-type="phone,2in1,tablet,wearable,tv">templateId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="templateid" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>templateId(typedFunc: TemplateTypedFunc&lt;T&gt;)</p>     <p>为当前数据项分配template type。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口不支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">typedFunc</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-rendering-control-repeat#templatetypedfunct">TemplateTypedFunc</a>&lt;T&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">生成当前数据项对应的template type。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bmy-c106="" class="highlight-div"><div _ngcontent-bmy-c106="" class="highlight-div-header"><div _ngcontent-bmy-c106="" class="highlight-div-header-left"><div _ngcontent-bmy-c106="" class="handle-button expand-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmy-c106="" class="highlight-div-header-right"><div _ngcontent-bmy-c106="" class="handle-button ai-button"></div><div _ngcontent-bmy-c106="" class="handle-button line-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmy-c106="" class="handle-button theme-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmy-c106="" class="handle-button copy-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// arr是Array&lt;string&gt;类型的数组</span></li><li><span class="hljs-comment">// 在List容器组件中使用Repeat，并打开virtualScroll</span></li><li><span class="hljs-comment">// 创建模板temp，该模板为数据创建Text组件</span></li><li><span class="hljs-comment">// 所有数据项都使用temp模板</span></li><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-title class_">Repeat</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>)</li><li>    .<span class="hljs-title function_">each</span>(<span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {})</li><li>    .<span class="hljs-title function_">virtualScroll</span>()</li><li>    .<span class="hljs-title function_">template</span>(<span class="hljs-string">'temp'</span>, <span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> { <span class="hljs-title class_">ListItem</span>() { <span class="hljs-title class_">Text</span>(obj.<span class="hljs-property">item</span>) }})</li><li>    .<span class="hljs-title function_">templateId</span>(<span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span>, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">'temp'</span> })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="repeatarrayt18" device-type="phone,2in1,tablet,wearable,tv">RepeatArray&lt;T&gt;<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="repeatarrayt18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type RepeatArray&lt;T&gt; = Array&lt;T&gt; | ReadonlyArray&lt;T&gt; | Readonly&lt;Array&lt;T&gt;&gt;</p>     <p>Repeat数据源参数联合类型。</p>     <p><strong>卡片能力：</strong> 从API version 18开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;T&gt;</td>         <td class="cellrowborder" width="50%">常规数组类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">ReadonlyArray&lt;T&gt;</td>         <td class="cellrowborder" width="50%">只读数组类型，不允许数组对象变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">Readonly&lt;Array&lt;T&gt;&gt;</td>         <td class="cellrowborder" width="50%">只读数组类型，不允许数组对象变更。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="repeatitemt" device-type="phone,2in1,tablet,wearable,tv">RepeatItem&lt;T&gt;<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="repeatitemt" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">item</td>         <td class="cellrowborder" width="20%">T</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">arr中每一个数据项。T为开发者传入的数据类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">index</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">当前数据项对应的索引。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="virtualscrolloptions" device-type="phone,2in1,tablet,wearable,tv">VirtualScrollOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="virtualscrolloptions" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">totalCount</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>加载的数据项总数，可以不等于数据源长度。</p>          <p>取值范围：[0, +∞)</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">reusable<sup>18+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否开启复用功能。true代表开启复用，false代表关闭复用。</p>          <p>默认值：true</p>          <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onLazyLoading<sup>19+</sup></td>         <td class="cellrowborder" width="20%">(index: number) =&gt; void</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>数据懒加载函数，向指定的数据源index中写入数据。</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onTotalCount<sup>19+</sup></td>         <td class="cellrowborder" width="20%">() =&gt; number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>数据项总数计算函数，返回值可以不等于数据源长度。推荐使用onTotalCount代替totalCount。同时设置totalCount与onTotalCount时，忽略totalCount。</p>          <p>取值范围：[0, +∞)</p>          <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="totalcount期望加载的数据长度" class="firsth2">totalCount：期望加载的数据长度<i class="anchor-icon anchor-icon-link" anchorid="totalcount期望加载的数据长度" tips="复制节点链接"></i></h3>          <p>totalCount表示期望加载的数据长度，默认为原数组长度，可以大于已加载数据项的数量。arr.length表示数据源长度，以下为totalCount的处理规则：</p>     <ul>      <li>totalCount缺省或是非自然数时，totalCount默认为arr.length，列表正常滚动。</li>      <li>0 &lt;= totalCount &lt; arr.length时，界面中只渲染区间[0, totalCount - 1]范围内的数据。</li>      <li>totalCount &gt; arr.length时，代表Repeat将渲染区间[0, totalCount - 1]范围内的数据，滚动条样式根据totalCount值变化。</li>     </ul>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>当totalCount &gt; arr.length时，在父组件容器滚动过程中，应用需要保证在列表即将滑动到数据源末尾时请求后续数据。开发者需要对数据请求的错误场景（如网络延迟）进行保护操作，直到数据源全部加载完成，否则列表滑动过程中会出现滚动效果异常。解决方案见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-rendering-control-repeat#totalcount值大于数据源长度" target="_blank">totalCount值大于数据源长度</a>。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="onlazyloading19数据精准懒加载">onLazyLoading<sup>19+</sup>：数据精准懒加载<i class="anchor-icon anchor-icon-link" anchorid="onlazyloading19数据精准懒加载" tips="复制节点链接"></i></h3>          <p>onLazyLoading从API version 19开始支持，需在懒加载场景下使用。开发者可设置自定义方法，用于向指定的数据源index中写入数据。以下为onLazyLoading的处理规则：</p>     <ul>      <li>在Repeat读取数据源中某一index处对应数据前，会先检查此index处是否存在数据。</li>      <li>当不存在数据，但开发者提供了onLazyLoading方法，Repeat将调用此方法。</li>      <li>在onLazyLoading方法中，开发者需要向Repeat指定的index中写入数据，方式如下：arr[index] = ...。需要注意的是，不允许使用除[]以外的数组操作，且不允许写入指定index以外的元素，否则系统将抛出异常。</li>      <li>onLazyLoading方法执行完成后，若指定index中仍无数据，将导致渲染异常。</li>     </ul>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <ul>        <li>当使用onLazyLoading时，建议与onTotalCount配合使用，不建议使用totalCount。</li>        <li>若期望数据源长度大于实际数据源长度，推荐使用onLazyLoading。</li>        <li>onLazyLoading方法中应避免高耗时操作。若数据加载耗时较长，建议先在onLazyLoading方法中为此数据创建占位符，再创建异步任务加载数据。</li>        <li>当使用onLazyLoading，并设置onTotalCount为arr.length + 1时，可实现数据的无限加载。需要注意，在此场景下，开发者需要提供首屏显示所需的初始数据，并建议设置父容器组件cachedCount &gt; 0，否则将会导致渲染异常。若与Swiper-Loop模式同时使用，停留在index = 0处时将导致onLazyLoading方法被持续触发，建议避免与Swiper-Loop模式同时使用。此外，开发者需要关注内存消耗情况，避免因数据持续加载而导致内存过量消耗。</li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="ontotalcount19计算期望的数据长度">onTotalCount<sup>19+</sup>：计算期望的数据长度<i class="anchor-icon anchor-icon-link" anchorid="ontotalcount19计算期望的数据长度" tips="复制节点链接"></i></h3>          <p>onTotalCount从API version 19开始支持，需在懒加载场景下使用。开发者可设置自定义方法，用于计算期望的数组长度。其返回值应当为自然数，可以不等于实际数据源长度arr.length。以下为onTotalCount的处理规则：</p>     <ul>      <li>当onTotalCount返回值为非自然数时，使用arr.length代替返回值，列表正常滚动。</li>      <li>当0 &lt;= onTotalCount返回值 &lt; arr.length时，界面中只渲染区间[0, onTotalCount返回值 - 1]范围内的数据。</li>      <li>当onTotalCount返回值 &gt; arr.length时，代表Repeat将渲染区间[0, onTotalCount返回值 - 1]范围内的数据，滚动条样式根据onTotalCount返回值变化。</li>     </ul>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <ul>        <li>相较于totalCount，Repeat可在需要时主动调用onTotalCount方法，更新期望数据长度。</li>        <li>totalCount与onTotalCount最多设置一个。如果均未设置，则采用默认值arr.length；如果同时设置，则忽略totalCount。</li>        <li>当onTotalCount返回值 &gt; arr.length时，建议配合使用onLazyLoading实现数据懒加载。</li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="示例">示例<i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h3>          <div _ngcontent-bmy-c106="" class="highlight-div"><div _ngcontent-bmy-c106="" class="highlight-div-header"><div _ngcontent-bmy-c106="" class="highlight-div-header-left"><div _ngcontent-bmy-c106="" class="handle-button expand-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmy-c106="" class="highlight-div-header-right"><div _ngcontent-bmy-c106="" class="handle-button ai-button"></div><div _ngcontent-bmy-c106="" class="handle-button line-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmy-c106="" class="handle-button theme-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmy-c106="" class="handle-button copy-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// arr是Array&lt;string&gt;类型的数组，在List容器组件中使用Repeat，并打开virtualScroll</span></li><li><span class="hljs-comment">// 将加载的数据项总数设为数据源的长度，并开启复用功能</span></li><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-title class_">Repeat</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>)</li><li>    .<span class="hljs-title function_">each</span>(<span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> { <span class="hljs-title class_">ListItem</span>() { <span class="hljs-title class_">Text</span>(obj.<span class="hljs-property">item</span>) }})</li><li>    .<span class="hljs-title function_">virtualScroll</span>( { <span class="hljs-attr">totalCount</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>.<span class="hljs-property">length</span>, <span class="hljs-attr">reusable</span>: <span class="hljs-literal">true</span> } )</li><li>}</li><li>
</li><li><span class="hljs-comment">// 假设数据项总数为100，首屏渲染需3项数据</span></li><li><span class="hljs-comment">// 初始数组提供前3项数据（arr = ['No.0', 'No.1', 'No.2']），并开启数据懒加载功能</span></li><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-title class_">Repeat</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>)</li><li>    .<span class="hljs-title function_">each</span>(<span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> { <span class="hljs-title class_">ListItem</span>() { <span class="hljs-title class_">Text</span>(obj.<span class="hljs-property">item</span>) }})</li><li>    .<span class="hljs-title function_">virtualScroll</span>({</li><li>      <span class="hljs-attr">onTotalCount</span>: <span class="hljs-function">() =&gt;</span> { <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>; },</li><li>      <span class="hljs-attr">onLazyLoading</span>: <span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) =&gt;</span> { <span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>[index] = <span class="hljs-string">`No.<span class="hljs-subst">${index}</span>`</span>; }</li><li>    })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="repeatitembuildert" device-type="phone,2in1,tablet,wearable,tv">RepeatItemBuilder&lt;T&gt;<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="repeatitembuildert" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type RepeatItemBuilder&lt;T&gt; = (repeatItem: RepeatItem&lt;T&gt;) =&gt; void</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">repeatItem</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-rendering-control-repeat#repeatitemt">RepeatItem</a>&lt;T&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">将item和index结合到一起的一个状态变量。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="templateoptions对象说明" device-type="phone,2in1,tablet,wearable,tv">TemplateOptions对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="templateoptions对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">cachedCount</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">当前template的缓存池中可缓存子组件节点的最大数量。取值范围是[0, +∞)。默认值为屏上节点与预加载节点的个数之和。当屏上节点与预加载节点的个数之和增多时，cachedCount也会对应增长。需要注意cachedCount数量不会减少。</td>        </tr>             </tbody></table></div>     </div>     <p>当cachedCount值被设置为当前template在屏上显示的最大节点数量时，Repeat会做到最大程度的复用。然而当屏上没有当前template的节点时，缓存池不会释放的同时应用内存增大。需要开发者根据具体情况自行把控，推荐设置成和屏幕上节点个数一致。需要注意，不建议设置cachedCount小于2，因为这会导致在快速滑动场景下创建新的节点，从而造成性能劣化。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>滚动容器组件属性.cachedCount()和Repeat组件属性.template()的参数cachedCount都是为了平衡性能和内存，但是含义是不同的。</p>       <ul>        <li>滚动容器组件.cachedCount()：是指在可见范围外预加载的节点，这些节点会位于组件树上，但不是可见范围内。List/Grid等容器组件会额外渲染这些可见范围外的节点，从而达到其性能收益。Repeat会将这些节点视为“可见”的。</li>        <li>.template()中的cachedCount: 是指Repeat视其为“不可见”的节点，这些空闲的节点框架会暂时保存，在需要使用时进行更新，从而实现复用。</li>       </ul>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-bmy-c106="" class="highlight-div"><div _ngcontent-bmy-c106="" class="highlight-div-header"><div _ngcontent-bmy-c106="" class="highlight-div-header-left"><div _ngcontent-bmy-c106="" class="handle-button expand-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmy-c106="" class="highlight-div-header-right"><div _ngcontent-bmy-c106="" class="handle-button ai-button"></div><div _ngcontent-bmy-c106="" class="handle-button line-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmy-c106="" class="handle-button theme-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmy-c106="" class="handle-button copy-button"><div _ngcontent-bmy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// arr是Array&lt;string&gt;类型的数组，在List容器组件中使用Repeat，并打开virtualScroll</span></li><li><span class="hljs-comment">// 创建模板temp，该模板为数据创建Text组件，所有数据项都使用temp模板</span></li><li><span class="hljs-comment">// 将temp模板的最大缓存节点数量设为2</span></li><li><span class="hljs-title class_">List</span>() {</li><li>  <span class="hljs-title class_">Repeat</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>)</li><li>    .<span class="hljs-title function_">each</span>(<span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {})</li><li>    .<span class="hljs-title function_">virtualScroll</span>()</li><li>    .<span class="hljs-title function_">template</span>(<span class="hljs-string">'temp'</span>, <span class="hljs-function">(<span class="hljs-params">obj: RepeatItem&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> { <span class="hljs-title class_">ListItem</span>() { <span class="hljs-title class_">Text</span>(obj.<span class="hljs-property">item</span>) }}, { <span class="hljs-attr">cachedCount</span>: <span class="hljs-number">2</span> })</li><li>    .<span class="hljs-title function_">templateId</span>(<span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span>, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">'temp'</span> })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="templatetypedfunct" device-type="phone,2in1,tablet,wearable,tv">TemplateTypedFunc&lt;T&gt;<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="templatetypedfunct" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type TemplateTypedFunc&lt;T&gt; = (item: T, index: number) =&gt; string</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">item</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">arr中每一个数据项。T为开发者传入的数据类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">index</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">当前数据项对应的索引。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>