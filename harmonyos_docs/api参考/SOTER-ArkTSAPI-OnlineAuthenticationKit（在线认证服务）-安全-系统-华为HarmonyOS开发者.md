<h1 _ngcontent-nxt-c119="" class="doc-title ng-star-inserted" title="SOTER"> SOTER </h1>

<div _ngcontent-nxt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div class="typescript"><p>SOTER提供移动端免密身份认证能力，支持使用SOTER协议的应用实现免密登录，免密支付等业务场景。</p> <p>支持的设备类型为：手机, 2in1, 平板</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section11643194565217" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11643194565217" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { soter } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.OnlineAuthenticationKit'</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section186410451429" device-type="phone,2in1,tablet">KeyType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section186410451429" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>密钥选型，为枚举值。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong>：SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.1" width="33.333333333333336%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.2" width="33.333333333333336%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.3" width="33.333333333333336%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.333333333333336%"><p>ECC_P256</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>0</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>密钥选型ECC P256。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section13572542154913" device-type="phone,2in1,tablet">SignedResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13572542154913" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>表示签名结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong>：SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="19.88%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="9.83%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="8.85%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="61.44%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.88%"><p>message</p> </td> <td class="cellrowborder" width="9.83%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.85%"><p>是</p> </td> <td class="cellrowborder" width="61.44%"><p>原始报文。</p> </td> </tr> <tr><td class="cellrowborder" width="19.88%"><p>signature</p> </td> <td class="cellrowborder" width="9.83%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="8.85%"><p>是</p> </td> <td class="cellrowborder" width="61.44%"><p>原始报文的签名。</p> </td> </tr> <tr><td class="cellrowborder" width="19.88%"><p>saltLength</p> </td> <td class="cellrowborder" width="9.83%"><p>number</p> </td> <td class="cellrowborder" width="8.85%"><p>是</p> </td> <td class="cellrowborder" width="61.44%"><p>盐值长度，小于U32类型最大值。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section57061736429" device-type="phone,2in1,tablet">getVersionSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section57061736429" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getVersionSync(): string</p> <p>该接口用于获取SOTER免密认证API接口的版本号，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>string</p> </td> <td class="cellrowborder" width="50%"><p>返回SOTER免密认证的API接口版本号。最大长度64个字符。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">string</span> = soter.<span class="hljs-title function_">getVersionSync</span>();<span class="hljs-comment">// 开发者处理结果</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1332123194313" device-type="phone,2in1,tablet">getVersion<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1332123194313" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getVersion(): Promise&lt;string&gt;</p> <p>该接口用于获取SOTER免密认证API接口的版本号，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50.339999999999996%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="49.66%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50.339999999999996%"><p>Promise&lt;string&gt;</p> </td> <td class="cellrowborder" width="49.66%"><p>Promise对象，返回SOTER免密认证的API接口版本号。最大长度64个字符。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">resPromise</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; = soter.<span class="hljs-title function_">getVersion</span>();</li><li>resPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in doing getVersion.'</span>);</li><li>  <span class="hljs-comment">// 开发者处理结果</span></li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call getVersion. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section292819318437" device-type="phone,2in1,tablet">hasAppSecureKeySync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section292819318437" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>hasAppSecureKeySync(keyType: KeyType): boolean</p> <p>该接口用于查询应用密钥的生成状态，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，当前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>boolean</p> </td> <td class="cellrowborder" width="50%"><p>同步返回应用密钥的生成状态。true代表已生成，false代表未生成。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keyType</span>: soter.<span class="hljs-property">KeyType</span> = soter.<span class="hljs-property">KeyType</span>.<span class="hljs-property">ECC_P256</span>; <span class="hljs-comment">// 密钥选型，当前只支持ECC_P256</span></li><li>
</li><li><span class="hljs-comment">// 查询应用密钥生成状态 同步</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">hasAppSecureKey</span>: <span class="hljs-built_in">boolean</span> = soter.<span class="hljs-title function_">hasAppSecureKeySync</span>(keyType);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1519218519432" device-type="phone,2in1,tablet">hasAppSecureKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1519218519432" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>hasAppSecureKey(keyType: KeyType):  Promise&lt;boolean&gt;</p> <p>该接口用于查询应用密钥的生成状态，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;boolean&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回应用密钥的生成状态。true代表已生成，false代表未生成。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keyType</span>: soter.<span class="hljs-property">KeyType</span> = soter.<span class="hljs-property">KeyType</span>.<span class="hljs-property">ECC_P256</span>; <span class="hljs-comment">// 密钥选型，当前只支持ECC_P256</span></li><li>
</li><li><span class="hljs-comment">// 异步查询应用密钥的生成状态</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">hasAppSecureKeyPromise</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; = soter.<span class="hljs-title function_">hasAppSecureKey</span>(keyType);</li><li>hasAppSecureKeyPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in doing hasAppSecureKey.'</span>);</li><li>  <span class="hljs-comment">// 开发者处理结果</span></li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call hasAppSecureKey. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section38431514312" device-type="phone,2in1,tablet">generateAppSecureKeySync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section38431514312" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>generateAppSecureKeySync(keyType: KeyType): Uint8Array</p> <p>该接口用于生成App应用密钥，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="50%"><p>返回App应用密钥。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keyType</span>: soter.<span class="hljs-property">KeyType</span> = soter.<span class="hljs-property">KeyType</span>.<span class="hljs-property">ECC_P256</span>; <span class="hljs-comment">// 密钥选型，当前只支持ECC_P256</span></li><li>
</li><li><span class="hljs-comment">// 生成应用密钥</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">appSecureKey</span>: <span class="hljs-title class_">Uint8Array</span> = soter.<span class="hljs-title function_">generateAppSecureKeySync</span>(keyType);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section14596181356" device-type="phone,2in1,tablet">generateAppSecureKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14596181356" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>generateAppSecureKey(keyType: KeyType): Promise&lt;Uint8Array&gt;</p> <p>该接口用于生成App应用密钥，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256,其余枚举值均报错。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回App应用密钥。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyType</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span></span><span class="">.</span><span class=""><span class="hljs-property">ECC_P256</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">密钥选型，当前只支持</span></span><span class=""><span class="hljs-comment">ECC_P256</span></span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">生成应用密钥</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">appSecureKeyPromise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">&gt;</span><span class=""> = </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">generateAppSecureKey</span></span><span class="">(</span><span class="">keyType</span><span class="">)</span><span class="">;</span></li><li><span class="">appSecureKeyPromise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'Succeeded in doing generateAppSecureKey.'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class="hljs-comment">开发者处理结果</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call generateAppSecureKey. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section141402497351" device-type="phone,2in1,tablet">getAppSecureKeySync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section141402497351" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAppSecureKeySync(keyType: KeyType): Uint8Array</p> <p>该接口用于获取App应用密钥，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="50%"><p>返回App应用密钥。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyType</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span></span><span class="">.</span><span class=""><span class="hljs-property">ECC_P256</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">密钥选型，当前只支持</span></span><span class=""><span class="hljs-comment">ECC_P256</span></span></li><li>
</li><li><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 获取应用密钥 同步</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">appSecureKey</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Uint8Array</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppSecureKeySync</span></span><span class="">(</span><span class="">keyType</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section66311393365" device-type="phone,2in1,tablet">getAppSecureKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section66311393365" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAppSecureKey(keyType: KeyType): Promise&lt;Uint8Array&gt;</p> <p>该接口用于获取App应用密钥，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回App应用密钥。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyType</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span></span><span class="">.</span><span class=""><span class="hljs-property">ECC_P256</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">密钥选型，当前只支持</span></span><span class=""><span class="hljs-comment">ECC_P256</span></span></li><li>
</li><li><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 获取应用密钥</span></span><span class=""><span class="hljs-comment"> Promise</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">appSecureKeyPromise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">&gt;</span><span class=""> = </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">getAppSecureKey</span></span><span class="">(</span><span class="">keyType</span><span class="">)</span><span class="">;</span></li><li><span class="">appSecureKeyPromise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'Succeeded in doing getAppSecureKey.'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class="hljs-comment">开发者处理结果</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call getAppSecureKey. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section6198355368" device-type="phone,2in1,tablet">hasAuthKeySync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section6198355368" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>hasAuthKeySync(keyAlias: string, keyType: KeyType): boolean</p> <p>该接口用于查询AuthKey生成状态，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="24.97%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="25.03%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td align="left" class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td align="left" class="cellrowborder" width="25%"><p>string</p> </td> <td align="left" class="cellrowborder" width="24.97%"><p>是</p> </td> <td align="left" class="cellrowborder" width="25.03%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="24.97%"><p>是</p> </td> <td class="cellrowborder" width="25.03%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>boolean</p> </td> <td class="cellrowborder" width="50%"><p>同步返回AuthKey生成状态，true代表已生成，false代表未生成。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyType</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span></span><span class="">.</span><span class=""><span class="hljs-property">ECC_P256</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">密钥选型，当前只支持</span></span><span class=""><span class="hljs-comment">ECC_P256</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者自定义索引</span></span></li><li>
</li><li><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 查询</span></span><span class=""><span class="hljs-comment">AuthKey</span></span><span class=""><span class="hljs-comment">开通状态 同步</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">hasAuthKey</span></span><span class="">: </span><span class=""><span class="hljs-built_in">boolean</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">hasAuthKeySync</span></span><span class="">(</span><span class="">keyAlias</span><span class="">, </span><span class="">keyType</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section221615793614" device-type="phone,2in1,tablet">hasAuthKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section221615793614" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>hasAuthKey(keyAlias: string, keyType: KeyType): Promise&lt;boolean&gt;</p> <p>该接口用于查询AuthKey生成状态，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;boolean&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回查询AuthKey生成状态。true代表已生成，false代表未生成。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyType</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span></span><span class="">.</span><span class=""><span class="hljs-property">ECC_P256</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">密钥选型，当前只支持</span></span><span class=""><span class="hljs-comment">ECC_P256</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">查询</span></span><span class=""><span class="hljs-comment">AuthKey</span></span><span class="hljs-comment">生成状态</span><span class=""><span class="hljs-comment"> Promise</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">hasAuthKeyPromise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-built_in">boolean</span></span><span class="">&gt;</span><span class=""> = </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">hasAuthKey</span></span><span class="">(</span><span class="">keyAlias</span><span class="">, </span><span class="">keyType</span><span class="">)</span><span class="">;</span></li><li><span class="">hasAuthKeyPromise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'Succeeded in doing hasAuthKey.'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class="hljs-comment">开发者处理结果</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call hasAuthKey. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section149619193710" device-type="phone,2in1,tablet">generateAuthKeySync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section149619193710" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>generateAuthKeySync(keyAlias: string, keyType: KeyType): SignedResult</p> <p>该接口用于生成AuthKey，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section13572542154913">SignedResult</a></p> </td> <td class="cellrowborder" width="50%"><p>返回SignedResult对象。其中signature为返回报文的签名，message为返回报文的原文，saltLength为加密盐值长度。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyType</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span></span><span class="">.</span><span class=""><span class="hljs-property">ECC_P256</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">密钥选型，当前只支持</span></span><span class=""><span class="hljs-comment">ECC_P256</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">生成</span></span><span class=""><span class="hljs-comment">AuthKey</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">signedResult</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">SignedResult</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">generateAuthKeySync</span></span><span class="">(</span><span class="">keyAlias</span><span class="">, </span><span class="">keyType</span><span class="">)</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">authKey</span>: <span class="hljs-title class_">Uint8Array</span> </span><span class="">= </span><span class="">signedResult</span><span class="">?.</span><span class=""><span class="hljs-property">signature</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者使用结果</span></span><span class=""><span class="hljs-comment">AuthKey</span></span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section425383419374" device-type="phone,2in1,tablet">generateAuthKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section425383419374" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>generateAuthKey(keyAlias: string, keyType: KeyType): Promise&lt;SignedResult&gt;</p> <p>该接口用于生成AuthKey，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section13572542154913">SignedResult</a>&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回SignedResult对象。其中signature为返回报文的签名，message为返回报文的原文，saltLength为加密盐值长度。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyType</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span></span><span class="">.</span><span class=""><span class="hljs-property">ECC_P256</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">密钥选型，当前只支持</span></span><span class=""><span class="hljs-comment">ECC_P256</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 生成</span></span><span class=""><span class="hljs-comment">AuthKey</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">authKeyPromise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">SignedResult</span></span><span class="">&gt;</span><span class=""> = </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">generateAuthKey</span></span><span class="">(</span><span class="">keyAlias</span><span class="">, </span><span class="">keyType</span><span class="">)</span><span class="">;</span></li><li><span class="">authKeyPromise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'Succeeded in doing generateAuthKey.'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class="hljs-comment">开发者处理结果</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call generateAuthKey. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section155084532374" device-type="phone,2in1,tablet">getAuthKeySync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section155084532374" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAuthKeySync(keyAlias: string, keyType: KeyType): SignedResult</p> <p>该接口用于获取AuthKey，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section13572542154913">SignedResult</a></p> </td> <td class="cellrowborder" width="50%"><p>返回SignedResult对象。其中signature为返回报文的签名，message为返回报文的原文，saltLength为加密盐值长度。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyType</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span></span><span class="">.</span><span class=""><span class="hljs-property">ECC_P256</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">密钥选型，当前只支持</span></span><span class=""><span class="hljs-comment">ECC_P256</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// 使用同步接口</span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">AuthKey</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">signedResult</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">SignedResult</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">getAuthKeySync</span></span><span class="">(</span><span class="">keyAlias</span><span class="">, </span><span class="">keyType</span><span class="">)</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">authKey</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Uint8Array</span> </span><span class="">= </span><span class="">signedResult</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者使用结果</span></span><span class=""><span class="hljs-comment">AuthKey</span></span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section11264518163812" device-type="phone,2in1,tablet">getAuthKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11264518163812" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAuthKey(keyAlias: string, keyType: KeyType): Promise&lt;SignedResult&gt;</p> <p>该接口用于获取AuthKey，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>keyType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section186410451429">KeyType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>密钥选型，目前只支持 soter.KeyType.ECC_P256。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section13572542154913">SignedResult</a>&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回SignedResult对象。其中signature为返回报文的签名，message为返回报文的原文，saltLength为加密盐值长度。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyType</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">KeyType</span></span><span class="">.</span><span class=""><span class="hljs-property">ECC_P256</span></span><span class="">; </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">密钥选型，当前只支持</span></span><span class=""><span class="hljs-comment">ECC_P256</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 获取</span></span><span class=""><span class="hljs-comment">AuthKey Promise</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">authKeyPromise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">SignedResult</span></span><span class="">&gt;</span><span class=""> = </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">getAuthKey</span></span><span class="">(</span><span class="">keyAlias</span><span class="">, </span><span class="">keyType</span><span class="">)</span><span class="">;</span></li><li><span class="">authKeyPromise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'Succeeded in doing getAuthKey.'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class="hljs-comment">开发者处理结果</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call getAuthKey. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section9821133893810" device-type="phone,2in1,tablet">generateChallengeSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9821133893810" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>generateChallengeSync(keyAlias: string): Uint8Array</p> <p>该接口用于生成Challenge，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="50%"><p>返回生成的Challenge。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 生成</span></span><span class=""><span class="hljs-comment">Challenge</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">challenge</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Uint8Array</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">generateChallengeSync</span></span><span class="">(</span><span class="">keyAlias</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section12462867395" device-type="phone,2in1,tablet">generateChallenge<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12462867395" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>generateChallenge(keyAlias: string): Promise&lt;Uint8Array&gt;</p> <p>该接口用于生成Challenge，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;Uint8Array&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回生成的Challenge。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 生成</span></span><span class=""><span class="hljs-comment">Challenge</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">challengePromise</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">&gt;</span><span class=""> = </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">generateChallenge</span></span><span class="">(</span><span class="">keyAlias</span><span class="">)</span><span class="">;</span></li><li><span class="">challengePromise</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'Succeeded in doing generateChallenge.'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class="hljs-comment">开发者处理结果</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call generateChallenge. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section20654821123913" device-type="phone,2in1,tablet">signWithAuthKeySync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section20654821123913" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>signWithAuthKeySync(keyAlias: string, authToken: Uint8Array, info: string): SignedResult</p> <p>该接口用于SOTER免密认证，同步返回签名的报文。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>authToken</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>用户身份认证通过的凭证（通过用户认证模块可获取，调用@ohos.userIAM.userAuth的getUserAuthInstance）。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>info</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义信息，info最大长度为511字符。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section13572542154913">SignedResult</a></p> </td> <td class="cellrowborder" width="50%"><p>返回SignedResult对象。其中signature为返回报文的签名，message为返回报文的原文，saltLength为加密盐值长度。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">;</span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者调用</span></span><span class=""><span class="hljs-comment">@ohos.userIAM.userAuth</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">getUserAuthInstance</span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">authToken</span></span><span class=""><span class="hljs-comment">；</span></span><span class=""><span class="hljs-comment">authToken</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">authToken </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class="">info </span><span class="">= </span><span class=""><span class="hljs-string">''</span></span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">authResult</span></span><span class="">: </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">SignedResult</span> </span><span class="">= </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">signWithAuthKeySync</span></span><span class="">(</span><span class="">keyAlias</span><span class="">, </span><span class="">authToken</span><span class="">, </span><span class="">info</span><span class="">)</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section124239405391" device-type="phone,2in1,tablet">signWithAuthKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section124239405391" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>signWithAuthKey(keyAlias: string, authToken: Uint8Array, info: string): Promise&lt;SignedResult&gt;</p> <p>该接口用于SOTER免密认证，使用Promise异步回调返回签名的报文。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>authToken</p> </td> <td class="cellrowborder" width="25%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>用户身份认证通过的凭证（通过用户认证模块可获取，调用@ohos.userIAM.userAuth的getUserAuthInstance）。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>info</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义信息，info最大长度为511字符。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-soter-api#section13572542154913">SignedResult</a>&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回SignedResult对象。其中signature为返回报文的签名，message为返回报文的原文，saltLength为加密盐值长度。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">;</span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">开发者调用</span></span><span class=""><span class="hljs-comment">@ohos.userIAM.userAuth</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">getUserAuthInstance</span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">authToken</span></span><span class=""><span class="hljs-comment">；</span></span><span class=""><span class="hljs-comment">authToken</span></span><span class=""><span class="hljs-comment">需要开发者替换为真实入参。</span></span></li><li><span class="hljs-keyword">let</span> <span class="">authToken </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">Uint8Array</span></span><span class="">([</span><span class=""><span class="hljs-number">0</span></span><span class="">])</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class="">info </span><span class="">= </span><span class=""><span class="hljs-string">''</span></span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">authResultPromis</span></span><span class="hljs-attr">e</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-property">SignedResult</span></span><span class="">&gt;</span><span class=""> = </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">signWithAuthKey</span></span><span class="">(</span><span class="">keyAlias</span><span class="">, </span><span class="">authToken</span><span class="">, </span><span class="">info</span><span class="">)</span><span class="">;</span></li><li><span class="">authResultPromis</span>e<span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function"><span class="hljs-params">result</span> </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'Succeeded in doing signWithAuthKey.'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class="hljs-comment">开发者处理结果</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call signWithAuthKey. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section13843124151118" device-type="phone,2in1,tablet">deleteAuthKeySync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13843124151118" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deleteAuthKeySync(keyAlias: string): void</p> <p>该接口用于删除AuthKey。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 删除认证密钥</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keyAlias</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'keyAlias'</span>;</li><li>soter.<span class="hljs-title function_">deleteAuthKeySync</span>(keyAlias);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section157772313406" device-type="phone,2in1,tablet">deleteAuthKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section157772313406" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deleteAuthKey(keyAlias: string): Promise&lt;void&gt;</p> <p>该接口用于删除AuthKey，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>keyAlias</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>开发者自定义的密钥别名，keyAlias长度取值范围为[1, 31]。合法字符为：a-z, A-Z, 0-9, -(非首字符), _(非首字符)。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">keyAlias</span></span><span class="">: </span><span class=""><span class="hljs-built_in">string</span> </span><span class="">= </span><span class=""><span class="hljs-string">'keyAlias'</span></span><span class="">;</span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">删除</span></span><span class=""><span class="hljs-comment">AuthKey</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">delPromis</span></span><span class="hljs-attr">e</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-built_in">void</span></span><span class="">&gt;</span><span class=""> = </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">deleteAuthKey</span></span><span class="">(</span><span class="">keyAlias</span><span class="">)</span><span class="">;</span></li><li><span class="">delPromis</span>e<span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'Succeeded in doing deleteAuthKey.'</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call deleteAuthKey. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section66901523403" device-type="phone,2in1,tablet">deleteAppSecureKeySync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section66901523403" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deleteAppSecureKeySync(): void</p> <p>该接口用于删除应用密钥，同步返回结果。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p></p> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment">删除应用密钥</span></span></li><li><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">deleteAppSecureKeySync</span></span><span class="">()</span><span class="">;</span></li></ol></pre></div></div> <p></p> </div> <div class="tiledSection"><h2 id="section2301830414" device-type="phone,2in1,tablet">deleteAppSecureKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2301830414" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deleteAppSecureKey(): Promise&lt;void&gt;</p> <p>该接口用于删除应用密钥，使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SOTER</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p></p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-soter">SOTER免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.12.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.12.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1014500001</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nxt-c106="" class="highlight-div"><div _ngcontent-nxt-c106="" class="highlight-div-header"><div _ngcontent-nxt-c106="" class="highlight-div-header-left"><div _ngcontent-nxt-c106="" class="handle-button expand-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nxt-c106="" class="highlight-div-header-right"><div _ngcontent-nxt-c106="" class="handle-button ai-button"></div><div _ngcontent-nxt-c106="" class="handle-button line-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nxt-c106="" class="handle-button theme-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nxt-c106="" class="handle-button copy-button"><div _ngcontent-nxt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nxt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">//</span></span><span class=""><span class="hljs-comment"> 删除应用密钥</span></span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">delAppSecureKeyPromis</span></span><span class="hljs-attr">e</span><span class="">: </span><span class=""><span class="hljs-title class_">Promise</span></span><span class="">&lt;</span><span class=""><span class="hljs-built_in">void</span></span><span class="">&gt;</span><span class=""> = </span><span class="">soter</span><span class="">.</span><span class=""><span class="hljs-title function_">deleteAppSecureKey</span></span><span class="">()</span><span class="">;</span></li><li><span class="">delAppSecureKeyPromis</span>e<span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'Succeeded in doing deleteAppSecureKey.'</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to call deleteAppSecureKey. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li><span class="">}</span><span class="">)</span><span class="">;</span></li></ol></pre></div></div> <p></p> </div> </div> <div></div></div>