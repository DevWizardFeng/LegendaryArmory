<h1 _ngcontent-etm-c119="" class="doc-title ng-star-inserted" title="SafetyDetect（安全检测）"> SafetyDetect（安全检测） </h1>

<div _ngcontent-etm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <ul>     <li>判断设备环境是否安全，比如是否被越狱、被模拟等，您可基于结果评估如何响应。</li>    </ul>    <ul>     <li>判断用户访问的URL是否为恶意网址，对于恶意网址，由您评估提示或拦截用户的访问风险。</li>    </ul>    <p><strong>起始版本: </strong>5.0.0(12)</p>    <div class="tiledSection">     <h2 id="zh-cn_topic_0000001245084266_s56d19203690d4782bfc74069abb6bd71" device-type="phone,tablet,2in1,wearable">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001245084266_s56d19203690d4782bfc74069abb6bd71" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><div _ngcontent-etm-c106="" class="highlight-div"><div _ngcontent-etm-c106="" class="highlight-div-header"><div _ngcontent-etm-c106="" class="highlight-div-header-left"><div _ngcontent-etm-c106="" class="handle-button expand-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-etm-c106="" class="highlight-div-header-right"><div _ngcontent-etm-c106="" class="handle-button ai-button"></div><div _ngcontent-etm-c106="" class="handle-button line-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-etm-c106="" class="handle-button theme-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-etm-c106="" class="handle-button copy-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-etm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { safetyDetect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section208107205467" device-type="phone,tablet,2in1,wearable">SysIntegrityRequest<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section208107205467" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>系统完整性检测的请求参数。</p>     <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Security.SafetyDetect</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>nonce</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>开发者应用传入的一个随机生成的nonce值，用于防重放攻击，在检测结果中会包含该值。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1584743916458" device-type="phone,tablet,2in1,wearable">SysIntegrityResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1584743916458" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>系统完整性检测返回值。</p>     <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Security.SafetyDetect</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>result</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>JWS格式的系统完整性检测结果。JWS内容详见《Device Security Kit开发指南》中的系统完整性检测<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/devicesecurity-sysintegrity-check#section9187179113620" target="_blank">开发步骤</a>。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1991313125213" device-type="phone,tablet,2in1,wearable">UrlCheckRequest<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1991313125213" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>URL检测请求参数。</p>     <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Security.SafetyDetect</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>urls</p></td>         <td class="cellrowborder" width="21%">          <p>Array&lt;string&gt;</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>被检测的URL列表</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section7578162151315" device-type="phone,tablet,2in1,wearable">UrlCheckResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7578162151315" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>URL检测返回值。</p>     <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Security.SafetyDetect</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>results</p></td>         <td class="cellrowborder" width="21%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section13695147172010">UrlCheckResult</a>&gt;</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>URL检测返回的检测结果</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section13695147172010" device-type="phone,tablet,2in1,wearable">UrlCheckResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13695147172010" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>URL检测结果详情。</p>     <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Security.SafetyDetect</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.1" width="21%">          <p><strong>名称</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.2" width="21%">          <p><strong>类型</strong></p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.3" width="7.000000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.4" width="7.000000000000001%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.5" width="44%">          <p><strong>说明</strong></p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21%">          <p>url</p></td>         <td class="cellrowborder" width="21%">          <p>string</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>对应到输入参数中被检测的URL</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21%">          <p>threat</p></td>         <td class="cellrowborder" width="21%">          <p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section3468103822215">UrlThreatType</a></p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="7.000000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="44%">          <p>URL的威胁类型</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section3468103822215" device-type="phone,tablet,2in1,wearable">UrlThreatType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3468103822215" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>枚举URL威胁类型。</p>     <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Security.SafetyDetect</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.4.1.1" width="21.66%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.4.1.2" width="20.04%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.4.1.3" width="58.3%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21.66%">          <p>NORMAL</p></td>         <td class="cellrowborder" width="20.04%">          <p>0</p></td>         <td class="cellrowborder" width="58.3%">          <p>未发现威胁。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.66%">          <p>MALWARE</p></td>         <td class="cellrowborder" width="20.04%">          <p>1</p></td>         <td class="cellrowborder" width="58.3%">          <p>恶意类型的URL。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.66%">          <p>PHISHING</p></td>         <td class="cellrowborder" width="20.04%">          <p>2</p></td>         <td class="cellrowborder" width="58.3%">          <p>钓鱼类型的URL</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.66%">          <p>OTHERS</p></td>         <td class="cellrowborder" width="20.04%">          <p>3</p></td>         <td class="cellrowborder" width="58.3%">          <p>其他威胁类型的URL</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section102884586336" device-type="phone,tablet,2in1,wearable">checkSysIntegrity<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section102884586336" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>checkSysIntegrity(req: <a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section208107205467">SysIntegrityRequest</a>): Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section1584743916458">SysIntegrityResponse</a>&gt;</p>     <p>获取本设备的系统完整性的在线检测结果。使用Promise异步回调。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>该接口涉及端云协同，需要联网等耗时操作，因此不要在UI线程中执行，避免阻塞UI线程。</p>      </div></div></div>     <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Security.SafetyDetect</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.1" width="21.26%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.2" width="21.27%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.3" width="7.22%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.4" width="50.24999999999999%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21.26%">          <p>req</p></td>         <td class="cellrowborder" width="21.27%">          <p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section208107205467">SysIntegrityRequest</a></p></td>         <td class="cellrowborder" width="7.22%">          <p>是</p></td>         <td class="cellrowborder" width="50.24999999999999%">          <p>请求参数，包含nonce。</p>          <p>nonce长度必须16至66字节之间，有效值为base64编码范围。</p></td>        </tr>             </tbody></table></div>     </div>     <p class="msonormal"><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="21.05%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="78.95%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="21.05%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section1584743916458">SysIntegrityResponse</a>&gt;</p></td>         <td class="cellrowborder" width="78.95%">          <p>Promise对象，返回系统完整性检测结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode">ArkTS API错误码</a><strong>。</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.14.1.3.1.1" width="21.240000000000002%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.14.1.3.1.2" width="78.75999999999999%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>201</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>401</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Invalid parameters.</p>          <p>Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameter types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>801</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>API is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800001</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Internal error</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800002</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>The network is unreachable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800003</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Access cloud server fail.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800005</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>The number of calls exceeds the parallel threshold.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800006</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>The invoking frequency exceeds the threshold.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800007</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Operation timeout.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800008</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>The cloud service traffic exceeds the threshold.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-etm-c106="" class="highlight-div"><div _ngcontent-etm-c106="" class="highlight-div-header"><div _ngcontent-etm-c106="" class="highlight-div-header-left"><div _ngcontent-etm-c106="" class="handle-button expand-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-etm-c106="" class="highlight-div-header-right"><div _ngcontent-etm-c106="" class="handle-button ai-button"></div><div _ngcontent-etm-c106="" class="handle-button line-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-etm-c106="" class="handle-button theme-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-etm-c106="" class="handle-button copy-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-etm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { safetyDetect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SafetyDetectJsTest"</span>;</li><li>
</li><li><span class="hljs-comment">// 请求系统完整性检测，并处理结果</span></li><li><span class="hljs-keyword">let</span> req : safetyDetect.<span class="hljs-property">SysIntegrityRequest</span> = {</li><li>  nonce : <span class="hljs-string">'imEe1PCRcjGkBCAhOCh6ImADztOZ8ygxlWRs'</span> <span class="hljs-comment">// 从服务器生成的随机的nonce值</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'CheckSysIntegrity begin.'</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: safetyDetect.<span class="hljs-property">SysIntegrityResponse</span> = <span class="hljs-keyword">await</span> safetyDetect.<span class="hljs-title function_">checkSysIntegrity</span>(req);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in checkSysIntegrity: %{public}s'</span>, data.<span class="hljs-property">result</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'CheckSysIntegrity failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li><li>
</li></ol></pre></div></div>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section85451054185413" device-type="phone,tablet,2in1,wearable">checkUrlThreat<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section85451054185413" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>checkUrlThreat(req: <a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section1991313125213">UrlCheckRequest</a>): Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section7578162151315">UrlCheckResponse</a>&gt;</p>     <p>检测URL是否为恶意网址。使用Promise异步回调。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>该接口涉及端云协同，需要联网等耗时操作，因此不要在UI线程中执行，避免阻塞UI线程。</p>      </div></div></div>     <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Security.SafetyDetect</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.1" width="21.18%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.2" width="21.58%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.3" width="7.33%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.4" width="49.91%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21.18%">          <p>req</p></td>         <td class="cellrowborder" width="21.58%">          <p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section1991313125213">UrlCheckRequest</a></p></td>         <td class="cellrowborder" width="7.33%">          <p>是</p></td>         <td class="cellrowborder" width="49.91%">          <p>请求参数，包含被检测的URL列表。</p>          <p>传入的URL数量最多10个并且每个URL长度不大于4096字节。</p></td>        </tr>             </tbody></table></div>     </div>     <p class="msonormal"><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="21.51%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="78.49000000000001%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="21.51%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section7578162151315">UrlCheckResponse</a>&gt;</p></td>         <td class="cellrowborder" width="78.49000000000001%">          <p>Promise对象，返回URL检测结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode">ArkTS API错误码</a><strong>。</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.14.1.3.1.1" width="21.62%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.14.1.3.1.2" width="78.38000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="21.62%">          <p>201</p></td>         <td class="cellrowborder" width="78.38000000000001%">          <p>Permission denied</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.62%">          <p>401</p></td>         <td class="cellrowborder" width="78.38000000000001%">          <p>Invalid parameters.</p>          <p>Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameter types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.62%">          <p>801</p></td>         <td class="cellrowborder" width="78.38000000000001%">          <p>API is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.62%">          <p>1010800001</p></td>         <td class="cellrowborder" width="78.38000000000001%">          <p>Internal error</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.62%">          <p>1010800002</p></td>         <td class="cellrowborder" width="78.38000000000001%">          <p>The network is unreachable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.62%">          <p>1010800003</p></td>         <td class="cellrowborder" width="78.38000000000001%">          <p>Access cloud server fail.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.62%">          <p>1010800005</p></td>         <td class="cellrowborder" width="78.38000000000001%">          <p>The number of calls exceeds the parallel threshold.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.62%">          <p>1010800006</p></td>         <td class="cellrowborder" width="78.38000000000001%">          <p>The invoking frequency exceeds the threshold.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.62%">          <p>1010800007</p></td>         <td class="cellrowborder" width="78.38000000000001%">          <p>Operation timeout.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.62%">          <p>1010800008</p></td>         <td class="cellrowborder" width="78.38000000000001%">          <p>The cloud service traffic exceeds the threshold.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-etm-c106="" class="highlight-div"><div _ngcontent-etm-c106="" class="highlight-div-header"><div _ngcontent-etm-c106="" class="highlight-div-header-left"><div _ngcontent-etm-c106="" class="handle-button expand-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-etm-c106="" class="highlight-div-header-right"><div _ngcontent-etm-c106="" class="handle-button ai-button"></div><div _ngcontent-etm-c106="" class="handle-button line-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-etm-c106="" class="handle-button theme-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-etm-c106="" class="handle-button copy-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-etm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { safetyDetect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SafetyDetectJsTest"</span>;</li><li>
</li><li><span class="hljs-comment">// 请求URL检测，并处理结果</span></li><li><span class="hljs-keyword">let</span> req : safetyDetect.<span class="hljs-property">UrlCheckRequest</span> = {</li><li>  urls : [<span class="hljs-string">'https://test1.com'</span>]</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'CheckUrlThreat begin.'</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: safetyDetect.<span class="hljs-property">UrlCheckResponse</span> = <span class="hljs-keyword">await</span> safetyDetect.<span class="hljs-title function_">checkUrlThreat</span>(req);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in checkUrlThreat: %{public}s %{public}d'</span>, data.<span class="hljs-property">results</span>[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>, data.<span class="hljs-property">results</span>[<span class="hljs-number">0</span>].<span class="hljs-property">threat</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'CheckUrlThreat failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section83581542173818" device-type="phone,tablet,2in1,wearable">checkSysIntegrityOnLocal<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section83581542173818" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>checkSysIntegrityOnLocal(): Promise&lt;string&gt;</p>     <p>获取本设备的系统完整性的本地检测结果。使用Promise异步回调。</p>     <p><strong>元服务API：</strong>从版本5.1.0(18)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Security.SafetyDetect</p>     <p><strong>起始版本：</strong>5.1.0(18)</p>     <p class="msonormal"><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="21.05%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="78.95%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="21.05%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="78.95%">          <p>Promise对象，返回JSON格式的系统完整性检测结果。JSON内容详见《Device Security Kit开发指南》中的本地系统完整性检测<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/devicesecurity-sysintegrity-check-onlocal#section153394149504" target="_blank">开发步骤</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode">ArkTS API错误码</a><strong>。</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="21.240000000000002%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="78.75999999999999%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>801</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>API is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800001</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Internal error</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800004</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Verify capability fail.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800005</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>The number of calls exceeds the parallel threshold.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800006</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>The invoking frequency exceeds the threshold.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800007</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Operation timeout.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-etm-c106="" class="highlight-div"><div _ngcontent-etm-c106="" class="highlight-div-header"><div _ngcontent-etm-c106="" class="highlight-div-header-left"><div _ngcontent-etm-c106="" class="handle-button expand-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-etm-c106="" class="highlight-div-header-right"><div _ngcontent-etm-c106="" class="handle-button ai-button"></div><div _ngcontent-etm-c106="" class="handle-button line-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-etm-c106="" class="handle-button theme-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-etm-c106="" class="handle-button copy-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-etm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { safetyDetect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SafetyDetectJsTest"</span>;</li><li>
</li><li><span class="hljs-comment">// 请求本地系统完整性检测，并处理结果</span></li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'CheckSysIntegrityOnLocal begin.'</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">string</span> = <span class="hljs-keyword">await</span> safetyDetect.<span class="hljs-title function_">checkSysIntegrityOnLocal</span>();</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in checkSysIntegrityOnLocal: %{public}s'</span>, result);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'CheckSysIntegrityOnLocal failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section58331249102420" device-type="phone,tablet,2in1,wearable">checkSysIntegrityEnhanced<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section58331249102420" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>checkSysIntegrityEnhanced(req: <a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section208107205467">SysIntegrityRequest</a>): Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section1584743916458">SysIntegrityResponse</a>&gt;</p>     <p>获取本设备的系统完整性的在线增强检测结果。使用Promise异步回调。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>该接口涉及端云协同，需要联网等耗时操作，因此不要在UI线程中执行，避免阻塞UI线程。</p>      </div></div></div>     <p><strong>元服务API：</strong>从版本6.0.0(20)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Security.SafetyDetect</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.1" width="21.26%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.2" width="21.27%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.3" width="7.22%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.4" width="50.24999999999999%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21.26%">          <p>req</p></td>         <td class="cellrowborder" width="21.27%">          <p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section208107205467">SysIntegrityRequest</a></p></td>         <td class="cellrowborder" width="7.22%">          <p>是</p></td>         <td class="cellrowborder" width="50.24999999999999%">          <p>请求参数，包含nonce。</p>          <p>nonce长度必须16至66字节之间，有效值为base64编码范围。</p></td>        </tr>             </tbody></table></div>     </div>     <p class="msonormal"><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="21.05%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="78.95%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="21.05%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-safetydetectenhanced-api#section1584743916458">SysIntegrityResponse</a>&gt;</p></td>         <td class="cellrowborder" width="78.95%">          <p>Promise对象，返回系统完整性增强检测结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode">ArkTS API错误码</a><strong>。</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.14.1.3.1.1" width="21.240000000000002%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.14.1.3.1.2" width="78.75999999999999%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>801</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>API is not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800001</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Internal error</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800002</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>The network is unreachable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800003</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Access cloud server fail.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800004</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Verify capability fail.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800005</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>The number of calls exceeds the parallel threshold.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800006</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>The invoking frequency exceeds the threshold.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800007</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Operation timeout.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1010800008</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>The cloud service traffic exceeds the threshold.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-etm-c106="" class="highlight-div"><div _ngcontent-etm-c106="" class="highlight-div-header"><div _ngcontent-etm-c106="" class="highlight-div-header-left"><div _ngcontent-etm-c106="" class="handle-button expand-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-etm-c106="" class="highlight-div-header-right"><div _ngcontent-etm-c106="" class="handle-button ai-button"></div><div _ngcontent-etm-c106="" class="handle-button line-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-etm-c106="" class="handle-button theme-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-etm-c106="" class="handle-button copy-button"><div _ngcontent-etm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-etm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { safetyDetect } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SafetyDetectJsTest"</span>;</li><li>
</li><li><span class="hljs-comment">// 请求系统完整性增强检测，并处理结果</span></li><li><span class="hljs-keyword">let</span> req : safetyDetect.<span class="hljs-property">SysIntegrityRequest</span> = {</li><li>  nonce : <span class="hljs-string">'imEe1PCRcjGkBCAhOCh6ImADztOZ8ygxlWRs'</span> <span class="hljs-comment">// 从服务器生成的随机的nonce值</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'CheckSysIntegrityEnhanced begin.'</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: safetyDetect.<span class="hljs-property">SysIntegrityResponse</span> = <span class="hljs-keyword">await</span> safetyDetect.<span class="hljs-title function_">checkSysIntegrityEnhanced</span>(req);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in checkSysIntegrityEnhanced: %{public}s'</span>, data.<span class="hljs-property">result</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'CheckSysIntegrityEnhanced failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li><li>
</li></ol></pre></div></div>     <p></p>    </div>   </div>   <div></div></div>