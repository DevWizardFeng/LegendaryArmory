<h1 _ngcontent-lnq-c119="" class="doc-title ng-star-inserted" title="SaveButton"> SaveButton </h1>

<div _ngcontent-lnq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>安全控件的保存控件。应用集成保存控件后，用户首次使用保存控件展示弹窗，在点击允许后自动授权，应用会在短时间内获取访问媒体库特权接口的授权。后续使用无需弹窗授权。在API version 19及之前的版本中，授权持续时间为10秒；在API version20及之后的版本中，授权持续时间为1分钟。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>该组件从API version 10开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="子组件" device-type="phone,2in1,tablet,wearable,tv">子组件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="子组件" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>不支持。</p>    </div>    <div class="tiledSection">     <h2 id="接口" device-type="phone,2in1,tablet,wearable,tv">接口<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="接口" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="savebutton-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">SaveButton<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="savebutton-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>SaveButton()</p>     <p>默认创建带有图标、文本、背景的保存控件。</p>     <p>为避免控件样式不合法导致授权失败，请开发者先了解安全控件样式的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/security-component-overview#约束与限制" target="_blank">约束与限制</a>。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h3 id="savebutton-2" device-type="phone,2in1,tablet,wearable,tv">SaveButton<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="savebutton-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>SaveButton(options: SaveButtonOptions)</p>     <p>创建包含指定元素的保存控件。</p>     <p>为避免控件样式不合法导致授权失败，请开发者先了解安全控件样式的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/security-component-overview#约束与限制" target="_blank">约束与限制</a>。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-security-components-savebutton#savebuttonoptions">SaveButtonOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建包含指定元素的保存控件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="savebuttonoptions" device-type="phone,2in1,tablet,wearable,tv">SaveButtonOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="savebuttonoptions" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于指定保存控件的图标、文本等指定元素。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>icon或text需至少传入一个。</p></li>        <li>         <p>如果icon、text都不传入，<a href="/consumer/cn/doc/harmonyos-references/ts-security-components-savebutton#savebutton-1">SaveButton</a>中的options参数不生效，创建的SaveButton为默认样式，默认样式：</p>         <p>SaveIconStyle默认样式为FULL_FILLED；</p>         <p>SaveDescription默认样式为DOWNLOAD；</p>         <p>ButtonType默认样式为Capsule。</p></li>        <li>         <p>icon、text、buttonType不支持动态修改。</p></li>       </ul>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">icon</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-security-components-savebutton#saveiconstyle枚举说明">SaveIconStyle</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置保存控件的图标风格。</p>          <p>不传入该参数表示没有图标。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">text</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-security-components-savebutton#savedescription枚举说明">SaveDescription</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置保存控件的文本描述。</p>          <p>不传入该参数表示没有文字描述。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">buttonType</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-securitycomponent-attributes#buttontype枚举说明">ButtonType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置保存控件的背景样式。</p>          <p>不传入该参数，系统默认提供Capsule类型按钮。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="saveiconstyle枚举说明" device-type="phone,2in1,tablet,wearable,tv">SaveIconStyle枚举说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="saveiconstyle枚举说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>保存控件的图标风格。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">FULL_FILLED</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">保存控件展示填充样式图标。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LINES</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">保存控件展示线条样式图标。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="savedescription枚举说明" device-type="phone,2in1,tablet,wearable,tv">SaveDescription枚举说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="savedescription枚举说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>保存控件的文本描述。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">DOWNLOAD</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“下载”。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DOWNLOAD_FILE</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“下载文件”。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SAVE</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“保存”。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SAVE_IMAGE</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“保存图片”。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SAVE_FILE</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“保存文件”。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DOWNLOAD_AND_SHARE</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“下载分享”。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">RECEIVE</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“接收”。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CONTINUE_TO_RECEIVE</td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“继续接收”。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SAVE_TO_GALLERY<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">8</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“保存至图库”。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">EXPORT_TO_GALLERY<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">9</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“导出”。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">QUICK_SAVE_TO_GALLERY<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">10</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“快速保存图片”。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">RESAVE_TO_GALLERY<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">11</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“重新保存”。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SAVE_ALL<sup>18+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">12</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件的文字描述为“全部保存”。</p>          <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="savebuttononclickresult枚举说明" device-type="phone,2in1,tablet,wearable,tv">SaveButtonOnClickResult枚举说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="savebuttononclickresult枚举说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>保存控件点击后的授权结果。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">SUCCESS</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件点击后权限授权成功。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TEMPORARY_AUTHORIZATION_FAILED</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件点击后权限授权失败。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CANCELED_BY_USER<sup>21+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>保存控件点击后弹窗用户取消授权。</p>          <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="savebuttoncallback18" device-type="phone,2in1,tablet,wearable,tv">SaveButtonCallback<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="savebuttoncallback18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type SaveButtonCallback = (event: ClickEvent, result: SaveButtonOnClickResult, error?: BusinessError&lt;void&gt;) =&gt; void</p>     <p>点击保存控件触发该回调。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-click#clickevent">ClickEvent</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">见ClickEvent对象说明。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">result</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-security-components-savebutton#savebuttononclickresult枚举说明">SaveButtonOnClickResult</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">存储权限的授权结果，授权时长为一分钟，即触发点击后，可以在一分钟之内不限制次数的调用特定媒体库接口，超出一分钟的调用会鉴权失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">error</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#businesserror">BusinessError&lt;void&gt;</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>点击按钮时的错误码和错误信息。</p>          <p>错误码0表示点击保存控件授权成功或用户取消授权。</p>          <p>错误码1表示系统内部错误，包括但不限于：</p>          <p>1. ipc通信失败。</p>          <p>2. 安全控件弹窗失败。</p>          <p>错误码2表示属性设置错误，包括但不限于：</p>          <p>1. 字体或图标设置过小。</p>          <p>2. 字体或图标与背托颜色相近。</p>          <p>3. 字体或图标颜色过于透明。</p>          <p>4. padding为负值。</p>          <p>5. 按钮被其他组件或窗口遮挡。</p>          <p>6. 文本超出背托范围。</p>          <p>7. 按钮超出窗口或屏幕。</p>          <p>8. 按钮整体尺寸过大。</p>          <p>9. 按钮文本被截断，显示不全。</p>          <p>10. 相关属性设置影响安全控件显示。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="savebuttonattribute" device-type="phone,2in1,tablet,wearable,tv">SaveButtonAttribute<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="savebuttonattribute" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>SaveButtonAttribute提供自定义图标（setIcon）、自定义文本（setText）、图标尺寸（iconSize）、图标圆角（iconBorderRadius），以及按压态效果（stateEffect）等属性设置的方法。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>    </div>    <div class="tiledSection">     <h3 id="seticon20" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">setIcon<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="seticon20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setIcon(icon: Resource)</p>     <p>设置保存控件的图标。</p>     <p><strong>需要权限</strong>：ohos.permission.CUSTOMIZE_SAVE_BUTTON</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">icon</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resource">Resource</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>自定义图标资源信息，仅支持Resource类型的数据源。</p>          <p>可支持的图片格式：png、jpg、jpeg、bmp、svg、webp、gif和heif等，支持的图片格式范围见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>。当资源为非图片资源或不支持的格式时，图标显示为空白。</p>          <p>如果应用无ohos.permission.CUSTOMIZE_SAVE_BUTTON权限，则自定义图标设置不生效，保存控件保持默认样式。详见<a href="/consumer/cn/doc/harmonyos-references/ts-security-components-savebutton#savebuttonoptions">SaveButtonOptions</a>说明。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="settext20" device-type="phone,2in1,tablet,wearable,tv">setText<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="settext20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setText(text: string | Resource)</p>     <p>设置保存控件的文本。</p>     <p><strong>需要权限</strong>：ohos.permission.CUSTOMIZE_SAVE_BUTTON</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">text</td>         <td class="cellrowborder" width="25%">string | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resource">Resource</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>自定义文本信息。</p>          <p>如果应用无ohos.permission.CUSTOMIZE_SAVE_BUTTON权限，则自定义文本设置不生效，保存控件保持默认样式。详见<a href="/consumer/cn/doc/harmonyos-references/ts-security-components-savebutton#savebuttonoptions">SaveButtonOptions</a>说明。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="iconsize20" device-type="phone,2in1,tablet,wearable,tv">iconSize<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="iconsize20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>iconSize(size: Dimension | SizeOptions)</p>     <p>设置保存控件的图标尺寸。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#dimension10">Dimension</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#sizeoptions">SizeOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>图标尺寸。宽高默认值均为16vp。</p>          <p>不支持设置百分比字符串。若设置Dimension类型入参的百分比字符串，则图标尺寸显示为默认值；若设置SizeOptions类型入参的width或height属性为百分比字符串，则图标尺寸显示为0。</p>          <p>对于保存控件提供的系统图标：</p>          <p>- 使用Dimension类型入参时，宽、高相等，均为设定值。</p>          <p>- 使用SizeOptions类型入参时，若宽、高设定值不一致，则宽、高相等取两者较小值；若仅设定其中一个值，则取该值作为宽、高值。</p>          <p>对于自定义图标：</p>          <p>- 使用Dimension类型入参时，宽、高相等，均为设定值。</p>          <p>- 使用SizeOptions类型入参时，建议同时设定宽和高，此时按照指定宽、高生效；若仅设定其中一个值，则宽高均显示为该设定值。</p>          <p>- 当设定的宽高与自定义图标的宽高比例不一致时，图片按<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#imagefit">ImageFit.Cover</a>的方式填充显示区域。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="iconborderradius20" device-type="phone,2in1,tablet,wearable,tv">iconBorderRadius<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="iconborderradius20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>iconBorderRadius(radius: Dimension | BorderRadiuses)</p>     <p>设置保存控件图标的边框圆角半径。</p>     <p><strong>需要权限</strong>：ohos.permission.CUSTOMIZE_SAVE_BUTTON</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">radius</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#dimension10">Dimension</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#borderradiuses9">BorderRadiuses</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>保存控件图标的圆角半径，支持设置四个圆角。</p>          <p>如果应用无ohos.permission.CUSTOMIZE_SAVE_BUTTON权限，则图标的圆角半径设置不生效。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="stateeffect20" device-type="phone,2in1,tablet,wearable,tv">stateEffect<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stateeffect20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stateEffect(enabled: boolean)</p>     <p>设置保存控件的按压效果。</p>     <p><strong>需要权限</strong>：ohos.permission.CUSTOMIZE_SAVE_BUTTON</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enabled</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>表示是否开启按压效果，true表示保存控件按压时显示按压效果，false表示保存控件按压时不显示按压效果。</p>          <p>默认值：true。</p>          <p>如果应用无ohos.permission.CUSTOMIZE_SAVE_BUTTON权限，按压效果设置不生效。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="usercancelevent21" device-type="phone,2in1,tablet,wearable,tv">userCancelEvent<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usercancelevent21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>userCancelEvent(enabled: boolean)</p>     <p>设置接收保存控件的用户取消授权事件。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enabled</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>表示是否接收保存控件的用户取消授权事件，true表示接收保存控件的用户取消授权事件，false表示不接收保存控件的用户取消授权事件。</p>          <p>默认值：false。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>不支持通用属性，仅继承<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-securitycomponent-attributes">安全控件通用属性</a>。</p>    </div>    <div class="tiledSection">     <h2 id="事件" device-type="phone,2in1,tablet,wearable,tv">事件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="事件" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>不支持通用事件，仅支持以下事件：</p>    </div>    <div class="tiledSection">     <h3 id="onclick" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">onClick<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onclick" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onClick(event: SaveButtonCallback)</p>     <p>点击动作触发该回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-security-components-savebutton#savebuttoncallback18">SaveButtonCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>见SaveButtonCallback。</p>          <p>在API10-17时，参数类型为：(event: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-click#clickevent">ClickEvent</a>, result: <a href="/consumer/cn/doc/harmonyos-references/ts-security-components-savebutton#savebuttononclickresult枚举说明">SaveButtonOnClickResult</a>) =&gt; void。</p>          <p>从API18开始，变更为SaveButtonCallback。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="示例1" device-type="phone,2in1,tablet,wearable,tv">示例1<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-lnq-c106="" class="highlight-div"><div _ngcontent-lnq-c106="" class="highlight-div-header"><div _ngcontent-lnq-c106="" class="highlight-div-header-left"><div _ngcontent-lnq-c106="" class="handle-button expand-button"><div _ngcontent-lnq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lnq-c106="" class="highlight-div-header-right"><div _ngcontent-lnq-c106="" class="handle-button ai-button"></div><div _ngcontent-lnq-c106="" class="handle-button line-button"><div _ngcontent-lnq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lnq-c106="" class="handle-button theme-button"><div _ngcontent-lnq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lnq-c106="" class="handle-button copy-button"><div _ngcontent-lnq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lnq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">handleSaveButtonClick</span>: <span class="hljs-title class_">SaveButtonCallback</span> =</li><li>    <span class="hljs-keyword">async</span> (<span class="hljs-attr">event</span>: <span class="hljs-title class_">ClickEvent</span>, <span class="hljs-attr">result</span>: <span class="hljs-title class_">SaveButtonOnClickResult</span>, error?: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>      <span class="hljs-keyword">if</span> (result === <span class="hljs-title class_">SaveButtonOnClickResult</span>.<span class="hljs-property">SUCCESS</span>) {</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>();</li><li>          <span class="hljs-keyword">let</span> helper = photoAccessHelper.<span class="hljs-title function_">getPhotoAccessHelper</span>(context);</li><li>          <span class="hljs-comment">// onClick触发后一分钟内通过createAsset接口创建图片文件，一分钟后createAsset权限收回。</span></li><li>          <span class="hljs-keyword">let</span> uri = <span class="hljs-keyword">await</span> helper.<span class="hljs-title function_">createAsset</span>(photoAccessHelper.<span class="hljs-property">PhotoType</span>.<span class="hljs-property">IMAGE</span>, <span class="hljs-string">'png'</span>);</li><li>          <span class="hljs-comment">// 使用uri打开文件，可以持续写入内容，写入过程不受时间限制。</span></li><li>          <span class="hljs-keyword">let</span> file = <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">open</span>(uri, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span> | fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span>);</li><li>          <span class="hljs-comment">// 写入文件</span></li><li>          <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">write</span>(file.<span class="hljs-property">fd</span>, <span class="hljs-string">"context"</span>);</li><li>          <span class="hljs-comment">// 关闭文件</span></li><li>          <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">close</span>(file.<span class="hljs-property">fd</span>);</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errCode: <span class="hljs-subst">${error.code}</span>, errMessage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        }</li><li>      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (result === <span class="hljs-title class_">SaveButtonOnClickResult</span>.<span class="hljs-property">CANCELED_BY_USER</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"errCode: "</span> + error?.<span class="hljs-property">code</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"errMessage: "</span> + error?.<span class="hljs-property">message</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"errCode: "</span> + error?.<span class="hljs-property">code</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"errMessage: "</span> + error?.<span class="hljs-property">message</span>);</li><li>      }</li><li>    };</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>        <span class="hljs-comment">// 默认参数下，图标、文字、背景都存在。</span></li><li>        <span class="hljs-title class_">SaveButton</span>().<span class="hljs-title function_">onClick</span>((<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSaveButtonClick</span>))</li><li>        <span class="hljs-comment">// 传入参数即表示元素存在，不传入的参数表示元素不存在，如果不传入buttonType，会默认添加ButtonType.Capsule配置，显示图标+背景。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span> })</li><li>        <span class="hljs-comment">// 只显示图标+背景，如果设置背景色高八位的α值低于0x1a，则会被系统强制调整为0xff。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">buttonType</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0x10007dff</span>)</li><li>        <span class="hljs-comment">// 图标、文字、背景都存在，如果设置背景色高八位的α值低于0x1a，则会被系统强制调整为0xff。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span>, <span class="hljs-attr">buttonType</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>        <span class="hljs-comment">// 图标、文字、背景都存在，如果设置宽度小于当前属性组合下允许的最小宽度时，宽度仍为设置值，此时按钮文本信息会自动换行，以保证安全控件显示的完整性。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span>, <span class="hljs-attr">buttonType</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">30</span>)</li><li>        <span class="hljs-comment">// 图标、文字、背景都存在，如果设置宽度小于当前属性组合下允许的最小宽度时，宽度仍为设置值，此时按钮文本信息会自动换行，以保证安全控件显示的完整性。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span>, <span class="hljs-attr">buttonType</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>          .<span class="hljs-title function_">size</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">30</span> })</li><li>        <span class="hljs-comment">// 图标、文字、背景都存在，如果设置宽度小于当前属性组合下允许的最小宽度时，宽度仍为设置值，此时按钮文本信息会自动换行，以保证安全控件显示的完整性。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span>, <span class="hljs-attr">buttonType</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>          .<span class="hljs-title function_">constraintSize</span>({</li><li>            <span class="hljs-attr">minWidth</span>: <span class="hljs-number">0</span>,</li><li>            <span class="hljs-attr">maxWidth</span>: <span class="hljs-number">30</span>,</li><li>            <span class="hljs-attr">minHeight</span>: <span class="hljs-number">0</span>,</li><li>            <span class="hljs-attr">maxHeight</span>: <span class="hljs-number">30</span></li><li>          })</li><li>        <span class="hljs-comment">// 设置保存控件接收用户取消授权事件。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">onClick</span>((<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleSaveButtonClick</span>))</li><li>          .<span class="hljs-title function_">userCancelEvent</span>(<span class="hljs-literal">true</span>)</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="1161" originwidth="885" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115507.05479658764222760799173310930459:50001231000000:2800:5F1142BB87A8DE9963545BB1BEFAB09601F7A115E8D789A414C28C78B1C074CD.png" width="885" height="1161"></span></p>    </div>    <div class="tiledSection">     <h2 id="示例2" device-type="phone,2in1,tablet,wearable,tv">示例2<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>应用需要申请权限：ohos.permission.CUSTOMIZE_SAVE_BUTTON</p>     <div _ngcontent-lnq-c106="" class="highlight-div"><div _ngcontent-lnq-c106="" class="highlight-div-header"><div _ngcontent-lnq-c106="" class="highlight-div-header-left"><div _ngcontent-lnq-c106="" class="handle-button expand-button"><div _ngcontent-lnq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lnq-c106="" class="highlight-div-header-right"><div _ngcontent-lnq-c106="" class="handle-button ai-button"></div><div _ngcontent-lnq-c106="" class="handle-button line-button"><div _ngcontent-lnq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lnq-c106="" class="handle-button theme-button"><div _ngcontent-lnq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lnq-c106="" class="handle-button copy-button"><div _ngcontent-lnq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lnq-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">SetIcon</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">10</span> }) {</li><li>        <span class="hljs-comment">// 设置图标为resource类型，有权限时显示设置的图标。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">setIcon</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>        <span class="hljs-comment">// 设置文本为string类型，有权限时显示设置的文本。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">setText</span>(<span class="hljs-string">"保存控件设置文本"</span>)</li><li>        <span class="hljs-comment">// 设置文本为resource类型，有权限时显示设置的资源文本。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">setText</span>($r(<span class="hljs-string">'app.string.app_name'</span>))</li><li>        <span class="hljs-comment">// 设置保存控件图标大小，入参为Dimension类型。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">iconSize</span>(<span class="hljs-number">28</span>)</li><li>        <span class="hljs-comment">// 设置保存控件的默认图标大小，入参为SizeOptions类型。将默认图标设置为宽高中的较小值。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">iconSize</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">40</span> })</li><li>        <span class="hljs-comment">// 设置保存控件的自定义图标大小，入参为SizeOptions类型。图片按设置的宽高显示。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">setIcon</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>          .<span class="hljs-title function_">iconSize</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">40</span> })</li><li>        <span class="hljs-comment">// 设置保存控件的自定义图标大小，入参为SizeOptions类型且只设置一个值。图片宽高均显示为设置值。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">setIcon</span>($r(<span class="hljs-string">'app.media.startIcon'</span>))</li><li>          .<span class="hljs-title function_">iconSize</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">40</span> })</li><li>        <span class="hljs-comment">// 设置保存控件的图标圆角，入参为Dimension类型。图片四个圆角的半径均为入参大小。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>)</li><li>          .<span class="hljs-title function_">setIcon</span>($r(<span class="hljs-string">'app.media.background'</span>))</li><li>          .<span class="hljs-title function_">iconSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">iconBorderRadius</span>(<span class="hljs-number">6</span>)</li><li>        <span class="hljs-comment">// 设置正方形图标圆角大于边长一半时图标显示为圆形。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">buttonType</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Circle</span> })</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>)</li><li>          .<span class="hljs-title function_">setIcon</span>($r(<span class="hljs-string">'app.media.foreground'</span>))</li><li>          .<span class="hljs-title function_">iconSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">iconBorderRadius</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">padding</span>(<span class="hljs-number">0</span>)</li><li>        <span class="hljs-comment">// 自定义图标通过iconBorderRadius设置为圆形，背托设置为透明色并设置边框。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">buttonType</span>:<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Circle</span> })</li><li>          .<span class="hljs-title function_">setIcon</span>($r(<span class="hljs-string">'app.media.background'</span>))</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Transparent</span>)</li><li>          .<span class="hljs-title function_">iconSize</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">iconBorderRadius</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>          .<span class="hljs-title function_">borderStyle</span>(<span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Solid</span>)</li><li>          .<span class="hljs-title function_">padding</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-comment">// 设置保存控件的图标圆角，入参为BorderRadiuses类型。图片四个圆角的半径分别为对应入参大小，未设置的无圆角。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Orange</span>)</li><li>          .<span class="hljs-title function_">setIcon</span>($r(<span class="hljs-string">'app.media.background'</span>))</li><li>          .<span class="hljs-title function_">iconSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">iconBorderRadius</span>({ <span class="hljs-attr">topLeft</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">topRight</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">bottomRight</span>: <span class="hljs-number">20</span> })</li><li>        <span class="hljs-comment">// 设置保存控件的按压特效为无按压特效。</span></li><li>        <span class="hljs-title class_">SaveButton</span>({ <span class="hljs-attr">icon</span>: <span class="hljs-title class_">SaveIconStyle</span>.<span class="hljs-property">FULL_FILLED</span>, <span class="hljs-attr">text</span>: <span class="hljs-title class_">SaveDescription</span>.<span class="hljs-property">DOWNLOAD</span> })</li><li>          .<span class="hljs-title function_">stateEffect</span>(<span class="hljs-literal">false</span>)</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="1165" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115508.22268213746695762188696125252830:50001231000000:2800:0FC80923BEA13D848BCD325E25B9C846CA1DE21C4DBB2831ADA0D2D97B37C34C.png" width="720" height="1165"></span></p>    </div>   </div>   <div></div></div>