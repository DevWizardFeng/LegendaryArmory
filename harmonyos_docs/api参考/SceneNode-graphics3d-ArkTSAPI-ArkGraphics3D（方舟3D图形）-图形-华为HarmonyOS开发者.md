<h1 _ngcontent-lep-c119="" class="doc-title ng-star-inserted" title="SceneNode"> SceneNode </h1>

<div _ngcontent-lep-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供3D图形中场景资源结点的类型及操作方法。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>本模块首批接口从API version 12开始支持，后续版本的新增接口，采用上角标标记接口的起始版本。</p>  </div></div></div>  <div class="tiledSection"><h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LayerMask</span>, <span class="hljs-title class_">NodeType</span>, <span class="hljs-title class_">Container</span>, <span class="hljs-title class_">Node</span>, <span class="hljs-title class_">Geometry</span>, <span class="hljs-title class_">LightType</span>, <span class="hljs-title class_">Light</span>, <span class="hljs-title class_">SpotLight</span>, <span class="hljs-title class_">DirectionalLight</span>,</li><li>  <span class="hljs-title class_">Camera</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="layermask" device-type="phone,2in1,tablet,wearable,tv">LayerMask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="layermask" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于定义结点的图层掩码。</p> </div>  <div class="tiledSection"><h3 id="getenabled" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">getEnabled<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getenabled" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEnabled(index: number): boolean</p> <p>获取指定图层下标图层掩码的使能状态。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">index</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要使能图层的下标，值域为大于等于0的整数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回特定下标的图层是否使能。true表示使用图层掩码，false表示不使用。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Scene</span>, <span class="hljs-title class_">Node</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">layerMask</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// 加载场景资源，支持.gltf和.glb格式，路径和文件名可根据项目实际资源自定义</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scene</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Scene</span>&gt; = <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>($rawfile(<span class="hljs-string">"gltf/CubeWithFloor/glTF/AnimatedCube.glb"</span>));</li><li>  scene.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">result</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (result) {</li><li>      <span class="hljs-keyword">let</span> node : <span class="hljs-title class_">Node</span> | <span class="hljs-literal">null</span> = result.<span class="hljs-title function_">getNodeByPath</span>(<span class="hljs-string">"rootNode_"</span>);</li><li>      <span class="hljs-keyword">if</span> (node) {</li><li>          <span class="hljs-comment">// 获取掩码的使能状态</span></li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">enabled</span>: <span class="hljs-built_in">boolean</span> = node.<span class="hljs-property">layerMask</span>.<span class="hljs-title function_">getEnabled</span>(<span class="hljs-number">1</span>);</li><li>      }</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Scene load failed:'</span>, error);</li><li>  });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="setenabled" device-type="phone,2in1,tablet,wearable,tv">setEnabled<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setenabled" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setEnabled(index: number, enabled: boolean): void</p> <p>将特定下标的图层掩码使能。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">index</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要使能图层的下标，值域为大于等于0的整数。</td> </tr> <tr><td class="cellrowborder" width="25%">enabled</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要设置的使能状态。true表示使用图层掩码，false表示不使用。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Scene</span>, <span class="hljs-title class_">Node</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">layerMask</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// 加载场景资源，支持.gltf和.glb格式，路径和文件名可根据项目实际资源自定义</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scene</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Scene</span>&gt; = <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>($rawfile(<span class="hljs-string">"gltf/CubeWithFloor/glTF/AnimatedCube.glb"</span>));</li><li>  scene.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">result</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (result) {</li><li>      <span class="hljs-keyword">let</span> node : <span class="hljs-title class_">Node</span> | <span class="hljs-literal">null</span> = result.<span class="hljs-title function_">getNodeByPath</span>(<span class="hljs-string">"rootNode/Scene/"</span>);</li><li>      <span class="hljs-keyword">if</span> (node) {</li><li>          <span class="hljs-comment">// 设置掩码状态</span></li><li>          node.<span class="hljs-property">layerMask</span>.<span class="hljs-title function_">setEnabled</span>(<span class="hljs-number">1</span>, <span class="hljs-literal">true</span>);</li><li>      }</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Scene load failed:'</span>, error);</li><li>  });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="nodetype" device-type="phone,2in1,tablet,wearable,tv">NodeType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nodetype" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>结点类型枚举。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">NODE</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">结点是空结点。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">GEOMETRY</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">几何类型结点。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CAMERA</td> <td class="cellrowborder" width="33.33333333333333%">3</td> <td class="cellrowborder" width="33.33333333333333%">相机类型结点。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">LIGHT</td> <td class="cellrowborder" width="33.33333333333333%">4</td> <td class="cellrowborder" width="33.33333333333333%">灯光类型结点。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CUSTOM<sup>21+</sup></td> <td class="cellrowborder" width="33.33333333333333%">255</td> <td class="cellrowborder" width="33.33333333333333%">自定义类型节点，通常这意味着该节点是在扩展插件中定义的类型。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="containert" device-type="phone,2in1,tablet,wearable,tv">Container&lt;T&gt;<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="containert" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义场景对象的容器。容器提供了一种将场景对象分组到层次结构中的方法。</p> </div>  <div class="tiledSection"><h3 id="append" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">append<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="append" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>append(item: T): void</p> <p>追加一个对象到容器。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">item</td> <td class="cellrowborder" width="25%">T</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">T类型对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Scene</span>, <span class="hljs-title class_">Node</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">append</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// 加载场景资源，支持.gltf和.glb格式，路径和文件名可根据项目实际资源自定义</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scene</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Scene</span>&gt; = <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>($rawfile(<span class="hljs-string">"gltf/CubeWithFloor/glTF/AnimatedCube.glb"</span>));</li><li>  scene.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">result</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (result) {</li><li>      <span class="hljs-keyword">let</span> node : <span class="hljs-title class_">Node</span> | <span class="hljs-literal">null</span> = result.<span class="hljs-title function_">getNodeByPath</span>(<span class="hljs-string">"rootNode/Scene/"</span>);</li><li>      <span class="hljs-keyword">if</span> (node) {</li><li>        <span class="hljs-comment">// append 结点，如果node已经在children中，数量不会增加，但操作仍然生效</span></li><li>        result.<span class="hljs-property">root</span>?.<span class="hljs-property">children</span>.<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>)?.<span class="hljs-property">children</span>.<span class="hljs-title function_">append</span>(node);</li><li>      }</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Scene load failed:'</span>, error);</li><li>  });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="insertafter" device-type="phone,2in1,tablet,wearable,tv">insertAfter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="insertafter" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>insertAfter(item: T, sibling: T | null): void</p> <p>在兄弟结点后面插入对象。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">item</td> <td class="cellrowborder" width="25%">T</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要插入结点。</td> </tr> <tr><td class="cellrowborder" width="25%">sibling</td> <td class="cellrowborder" width="25%">T | null</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">兄弟结点。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Scene</span>, <span class="hljs-title class_">Node</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">insertAfter</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// 加载场景资源，支持.gltf和.glb格式，路径和文件名可根据项目实际资源自定义</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scene</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Scene</span>&gt; = <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>($rawfile(<span class="hljs-string">"gltf/CubeWithFloor/glTF/AnimatedCube.glb"</span>));</li><li>  scene.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">result</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (result) {</li><li>      <span class="hljs-keyword">let</span> node : <span class="hljs-title class_">Node</span> | <span class="hljs-literal">null</span> = result.<span class="hljs-title function_">getNodeByPath</span>(<span class="hljs-string">"rootNode/Scene/"</span>);</li><li>      <span class="hljs-keyword">if</span> (node) {</li><li>        <span class="hljs-comment">// insertAfter 结点，如果node已经在children中，数量不会增加，但操作仍然生效</span></li><li>        result.<span class="hljs-property">root</span>?.<span class="hljs-property">children</span>.<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>)?.<span class="hljs-property">children</span>.<span class="hljs-title function_">insertAfter</span>(node, <span class="hljs-literal">null</span>);</li><li>      }</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Scene load failed:'</span>, error);</li><li>  });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="remove" device-type="phone,2in1,tablet,wearable,tv">remove<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="remove" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>remove(item: T): void</p> <p>移除指定对象。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">item</td> <td class="cellrowborder" width="25%">T</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要移除的对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Scene</span>, <span class="hljs-title class_">Node</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// 加载场景资源，支持.gltf和.glb格式，路径和文件名可根据项目实际资源自定义</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scene</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Scene</span>&gt; = <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>($rawfile(<span class="hljs-string">"gltf/CubeWithFloor/glTF/AnimatedCube.glb"</span>));</li><li>  scene.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">result</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (result) {</li><li>      <span class="hljs-keyword">let</span> node : <span class="hljs-title class_">Node</span> | <span class="hljs-literal">null</span> = result.<span class="hljs-title function_">getNodeByPath</span>(<span class="hljs-string">"rootNode/Scene/"</span>);</li><li>      <span class="hljs-keyword">if</span> (node) {</li><li>        <span class="hljs-comment">// remove 节点</span></li><li>        result.<span class="hljs-property">root</span>?.<span class="hljs-property">children</span>.<span class="hljs-title function_">remove</span>(node);</li><li>      }</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Scene load failed:'</span>, error);</li><li>  });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="get" device-type="phone,2in1,tablet,wearable,tv">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(index: number): T | null</p> <p>获取特定下标对象，获取不到则返回空。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">index</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要获取对象的下标，取值范围是大于等于0的整数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">T | null</td> <td class="cellrowborder" width="50%">返回获取到的对象，获取不到则返回空值。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Scene</span>, <span class="hljs-title class_">Node</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// 加载场景资源，支持.gltf和.glb格式，路径和文件名可根据项目实际资源自定义</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scene</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Scene</span>&gt; = <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>($rawfile(<span class="hljs-string">"gltf/CubeWithFloor/glTF/AnimatedCube.glb"</span>));</li><li>  scene.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">result</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (result) {</li><li>      <span class="hljs-keyword">let</span> node : <span class="hljs-title class_">Node</span> | <span class="hljs-literal">null</span> = result.<span class="hljs-title function_">getNodeByPath</span>(<span class="hljs-string">"rootNode/Scene/"</span>);</li><li>      <span class="hljs-comment">// 从children中get 0号节点</span></li><li>      result.<span class="hljs-property">root</span>?.<span class="hljs-property">children</span>.<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>)?.<span class="hljs-property">children</span>.<span class="hljs-title function_">insertAfter</span>(node, <span class="hljs-literal">null</span>);</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Scene load failed:'</span>, error);</li><li>  });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="clear" device-type="phone,2in1,tablet,wearable,tv">clear<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clear" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clear(): void</p> <p>清空容器内的所有对象。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> <p><strong>示例：</strong></p> <div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Scene</span>, <span class="hljs-title class_">Node</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// 加载场景资源，支持.gltf和.glb格式，路径和文件名可根据项目实际资源自定义</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scene</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Scene</span>&gt; = <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>($rawfile(<span class="hljs-string">"gltf/CubeWithFloor/glTF/AnimatedCube.glb"</span>));</li><li>  scene.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">result</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (result) {</li><li>      <span class="hljs-keyword">let</span> node : <span class="hljs-title class_">Node</span> | <span class="hljs-literal">null</span> = result.<span class="hljs-title function_">getNodeByPath</span>(<span class="hljs-string">"rootNode/Scene/"</span>);</li><li>      <span class="hljs-keyword">if</span> (node) {</li><li>        <span class="hljs-comment">// 清空 node 节点下的所有子节点</span></li><li>        node.<span class="hljs-property">children</span>.<span class="hljs-title function_">clear</span>();</li><li>      }</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Scene load failed:'</span>, error);</li><li>  });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="count" device-type="phone,2in1,tablet,wearable,tv">count<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="count" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>count(): number</p> <p>获取容器中对象的数量。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">number</td> <td class="cellrowborder" width="50%">返回容器中对象个数，取值范围是非负整数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Container</span>, <span class="hljs-title class_">Scene</span>, <span class="hljs-title class_">Node</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">count</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// 加载场景资源，支持.gltf和.glb格式，路径和文件名可根据项目实际资源自定义</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scene</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Scene</span>&gt; = <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>($rawfile(<span class="hljs-string">"gltf/CubeWithFloor/glTF/AnimatedCube.glb"</span>));</li><li>  scene.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">result</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (result) {</li><li>      <span class="hljs-keyword">let</span> node : <span class="hljs-title class_">Node</span> | <span class="hljs-literal">null</span> = result.<span class="hljs-title function_">getNodeByPath</span>(<span class="hljs-string">"rootNode_"</span>);</li><li>      <span class="hljs-keyword">if</span> (node) {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">container</span>: <span class="hljs-title class_">Container</span>&lt;<span class="hljs-title class_">Node</span>&gt; = node.<span class="hljs-property">children</span>;</li><li>        <span class="hljs-comment">// 获取children中的节点数</span></li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = container.<span class="hljs-title function_">count</span>();</li><li>      }</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="node" device-type="phone,2in1,tablet,wearable,tv">Node<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="node" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>3D场景由树状层次结构的结点组成，其中每个结点都实现了Node接口。继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-resources#sceneresource-1">SceneResource</a>。</p> </div>  <div class="tiledSection"><h3 id="属性" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">position</td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-types#position3">Position3</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">结点位置。</td> </tr> <tr><td class="cellrowborder" width="20%">rotation</td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-types#quaternion">Quaternion</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">结点旋转角度。</td> </tr> <tr><td class="cellrowborder" width="20%">scale</td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-types#scale3">Scale3</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">结点缩放。</td> </tr> <tr><td class="cellrowborder" width="20%">visible</td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">结点是否可见。true表示该节点可见，false表示不可见。</td> </tr> <tr><td class="cellrowborder" width="20%">nodeType</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#nodetype">NodeType</a></td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">结点类型。</td> </tr> <tr><td class="cellrowborder" width="20%">layerMask</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#layermask">LayerMask</a></td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">结点的图层掩码。</td> </tr> <tr><td class="cellrowborder" width="20%">path</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">结点路径。</td> </tr> <tr><td class="cellrowborder" width="20%">parent</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#node">Node</a> | null</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">结点的父结点，不存在则为空值。</td> </tr> <tr><td class="cellrowborder" width="20%">children</td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#containert">Container</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#node">Node</a>&gt;</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">结点的子结点，不存在则为空值。为只读属性，表示不能替换整个children容器，但可以通过容器方法操作子结点（如<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#append">append()</a>、<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#insertafter">insertAfter()</a>、<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#remove">remove()</a>或<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#clear">clear()</a>）。如果append或insertAfter的结点已存在于容器中，容器会先移除该结点再插入，因此数量不会增加，看似“无效”；添加新结点才会真正增加子结点数量。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="getnodebypath" device-type="phone,2in1,tablet,wearable,tv">getNodeByPath<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getnodebypath" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getNodeByPath(path: string): Node | null</p> <p>根据路径获取结点，如果获取不到则返回空。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">path</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">场景结点层次中的路径。每层之间使用'/'符号进行分割。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#node">Node</a> | null</td> <td class="cellrowborder" width="50%">返回结点对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Scene</span>, <span class="hljs-title class_">Node</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getNode</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// 加载场景资源，支持.gltf和.glb格式，路径和文件名可根据项目实际资源自定义</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scene</span>: <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Scene</span>&gt; = <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>($rawfile(<span class="hljs-string">"gltf/CubeWithFloor/glTF/AnimatedCube.glb"</span>));</li><li>  scene.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">result</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (result &amp;&amp; result.<span class="hljs-property">root</span>) {</li><li>      <span class="hljs-comment">// 查找节点</span></li><li>      <span class="hljs-keyword">let</span> geo : <span class="hljs-title class_">Node</span> | <span class="hljs-literal">null</span> = result.<span class="hljs-property">root</span>.<span class="hljs-title function_">getNodeByPath</span>(<span class="hljs-string">"scene/node"</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="geometry" device-type="phone,2in1,tablet,wearable,tv">Geometry<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="geometry" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>几何节点类型，用于承载可渲染的网格数据，并支持可选的形变功能，继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#node">Node</a>。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">mesh</td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-resources#mesh">Mesh</a></td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">网格属性。</td> </tr> <tr><td class="cellrowborder" width="20%">morpher<sup>20+</sup></td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-resources#morpher20">Morpher</a></td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">可选的形变器，用于为几何体添加基于顶点的形变或动画效果。若未设置，则该几何体不支持形变功能。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="lighttype" device-type="phone,2in1,tablet,wearable,tv">LightType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="lighttype" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>光源类型枚举。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">DIRECTIONAL</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">平行光类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">SPOT</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">点光源类型。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="light" device-type="phone,2in1,tablet,wearable,tv">Light<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="light" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>光源，继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#node">Node</a>。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">lightType</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#lighttype">LightType</a></td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">光源类型。</td> </tr> <tr><td class="cellrowborder" width="20%">color</td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-types#color">Color</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">颜色。</td> </tr> <tr><td class="cellrowborder" width="20%">intensity</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">光照密度，取值范围是大于0的实数。</td> </tr> <tr><td class="cellrowborder" width="20%">shadowEnabled</td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是否使能阴影。true表示添加阴影，false表示没有阴影效果。</td> </tr> <tr><td class="cellrowborder" width="20%">enabled</td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是否使能光源。true表示使用光源，false表示不使用。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="spotlight" device-type="phone,2in1,tablet,wearable,tv">SpotLight<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="spotlight" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>点光源类型，继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#light">Light</a>。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> </div>  <div class="tiledSection"><h2 id="directionallight" device-type="phone,2in1,tablet,wearable,tv">DirectionalLight<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="directionallight" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>平行光类型，继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#light">Light</a>。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> </div>  <div class="tiledSection"><h2 id="camera" device-type="phone,2in1,tablet,wearable,tv">Camera<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="camera" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>相机类型，Camera继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#node">Node</a>。</p> </div>  <div class="tiledSection"><h3 id="属性-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.3.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.24.3.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.3.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.24.3.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.24.3.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">fov</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">视场，取值在0到π弧度之间。</td> </tr> <tr><td class="cellrowborder" width="20%">nearPlane</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">近平面，取值大于0。</td> </tr> <tr><td class="cellrowborder" width="20%">farPlane</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">远平面，取值大于nearPlane。</td> </tr> <tr><td class="cellrowborder" width="20%">enabled</td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是否使能相机。true表示使用相机，false表示不使用相机。</td> </tr> <tr><td class="cellrowborder" width="20%">postProcess</td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-post-process-settings#postprocesssettings">PostProcessSettings</a> | null</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">后处理设置。</td> </tr> <tr><td class="cellrowborder" width="20%">effects<sup>21+</sup></td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-nodes#containert">Container</a>&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-resources#effect21">Effect</a>&gt;</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">应用于相机输出的后处理特效。</td> </tr> <tr><td class="cellrowborder" width="20%">clearColor</td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-types#color">Color</a> | null</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">将渲染目标（render target）清空后的特定颜色。</td> </tr> <tr><td class="cellrowborder" width="20%">renderingPipeline<sup>21+</sup></td> <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-types#renderingpipelinetype21">RenderingPipelineType</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">控制渲染管线。若未设置，默认使用轻量级前向渲染管线。（如果选择了FORWARD_LIGHTWEIGHT管线，某些功能将不可用。）</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="raycast20" device-type="phone,2in1,tablet,wearable,tv">raycast<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="raycast20" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>raycast(viewPosition: Vec2, params: RaycastParameters): Promise&lt;RaycastResult[]&gt;</p> <p>从屏幕指定位置发射射线，检测并返回所有命中的3D物体信息。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUi.Graphics3D</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">viewPosition</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene-types#vec2">Vec2</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">使用UI坐标系定义的屏幕归一化坐标，取值范围为[0, 1]。其中(0,0)表示Component3D控件的左上角，(1,1)表示Component3D控件的右下角。</td> </tr> <tr><td class="cellrowborder" width="25%">params</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene#raycastparameters20">RaycastParameters</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">射线检测的配置参数（如检测范围、过滤节点等）。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-scene#raycastresult20">RaycastResult</a>[]&gt;</td> <td class="cellrowborder" width="50%">返回命中的结果数组（按距离从近到远排序），若无命中则返回空数组。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lep-c106="" class="highlight-div"><div _ngcontent-lep-c106="" class="highlight-div-header"><div _ngcontent-lep-c106="" class="highlight-div-header-left"><div _ngcontent-lep-c106="" class="handle-button expand-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lep-c106="" class="highlight-div-header-right"><div _ngcontent-lep-c106="" class="handle-button ai-button"></div><div _ngcontent-lep-c106="" class="handle-button line-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lep-c106="" class="handle-button theme-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lep-c106="" class="handle-button copy-button"><div _ngcontent-lep-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lep-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">SceneNodeParameters</span>, <span class="hljs-title class_">Camera</span>, <span class="hljs-title class_">SceneResourceFactory</span>, <span class="hljs-title class_">Scene</span>, <span class="hljs-title class_">Node</span>, <span class="hljs-title class_">Vec2</span>, <span class="hljs-title class_">Vec3</span>, <span class="hljs-title class_">Quaternion</span>,</li><li>  <span class="hljs-title class_">RaycastParameters</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics3D'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">Raycast</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-comment">// 加载场景资源，支持.gltf和.glb格式，路径和文件名可根据项目实际资源自定义</span></li><li>  <span class="hljs-title class_">Scene</span>.<span class="hljs-title function_">load</span>($rawfile(<span class="hljs-string">"gltf/CubeWithFloor/glTF/AnimatedCube.glb"</span>))</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">result</span>: <span class="hljs-title class_">Scene</span>) =&gt; {</li><li>      <span class="hljs-keyword">if</span> (!result.<span class="hljs-property">root</span>) {</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">node</span>: <span class="hljs-title class_">Node</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> = result.<span class="hljs-property">root</span>.<span class="hljs-title function_">getNodeByPath</span>(<span class="hljs-string">"rootNode_/Unnamed Node 1/AnimatedCube"</span>);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">sceneFactory</span>: <span class="hljs-title class_">SceneResourceFactory</span> = result.<span class="hljs-title function_">getResourceFactory</span>();</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">sceneCameraParameter</span>: <span class="hljs-title class_">SceneNodeParameters</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">"camera1"</span> };</li><li>      <span class="hljs-comment">// 创建相机</span></li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">camera</span>: <span class="hljs-title class_">Camera</span> = <span class="hljs-keyword">await</span> sceneFactory.<span class="hljs-title function_">createCamera</span>(sceneCameraParameter);</li><li>      camera.<span class="hljs-property">enabled</span> = <span class="hljs-literal">true</span>;</li><li>      <span class="hljs-comment">// 设置相机视角</span></li><li>      <span class="hljs-title function_">lookAt</span>(camera, { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: -<span class="hljs-number">3</span> }, { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> }, { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> });</li><li>
</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">viewPos</span>: <span class="hljs-title class_">Vec2</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0.5</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.5</span> };</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">raycastParams</span>: <span class="hljs-title class_">RaycastParameters</span> = {};</li><li>      <span class="hljs-keyword">if</span> (node) {</li><li>        raycastParams.<span class="hljs-property">rootNode</span> = node;</li><li>      }</li><li>      <span class="hljs-keyword">return</span> camera.<span class="hljs-title function_">raycast</span>(viewPos, raycastParams);</li><li>    });</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">Sub</span>(<span class="hljs-params">l: Vec3, r: Vec3</span>): <span class="hljs-title class_">Vec3</span> {</li><li>  <span class="hljs-keyword">return</span> { <span class="hljs-attr">x</span>: l.<span class="hljs-property">x</span> - r.<span class="hljs-property">x</span>, <span class="hljs-attr">y</span>: l.<span class="hljs-property">y</span> - r.<span class="hljs-property">y</span>, <span class="hljs-attr">z</span>: l.<span class="hljs-property">z</span> - r.<span class="hljs-property">z</span> };</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">Dot</span>(<span class="hljs-params">l: Vec3, r: Vec3</span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">return</span> l.<span class="hljs-property">x</span> * r.<span class="hljs-property">x</span> + l.<span class="hljs-property">y</span> * r.<span class="hljs-property">y</span> + r.<span class="hljs-property">z</span> * l.<span class="hljs-property">z</span>;</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">Normalize</span>(<span class="hljs-params">l: Vec3</span>): <span class="hljs-title class_">Vec3</span> {</li><li>  <span class="hljs-keyword">let</span> d = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(<span class="hljs-title class_">Dot</span>(l, l));</li><li>  <span class="hljs-keyword">return</span> { <span class="hljs-attr">x</span>: l.<span class="hljs-property">x</span> / d, <span class="hljs-attr">y</span>: l.<span class="hljs-property">y</span> / d, <span class="hljs-attr">z</span>: l.<span class="hljs-property">z</span> / d };</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">Cross</span>(<span class="hljs-params">l: Vec3, r: Vec3</span>): <span class="hljs-title class_">Vec3</span> {</li><li>  <span class="hljs-keyword">return</span> { <span class="hljs-attr">x</span>: (l.<span class="hljs-property">y</span> * r.<span class="hljs-property">z</span> - l.<span class="hljs-property">z</span> * r.<span class="hljs-property">y</span>), <span class="hljs-attr">y</span>: (l.<span class="hljs-property">z</span> * r.<span class="hljs-property">x</span> - l.<span class="hljs-property">x</span> * r.<span class="hljs-property">z</span>), <span class="hljs-attr">z</span>: (l.<span class="hljs-property">x</span> * r.<span class="hljs-property">y</span> - l.<span class="hljs-property">y</span> * r.<span class="hljs-property">x</span>) };</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">Mul</span>(<span class="hljs-params">l: Quaternion, d: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">Quaternion</span> {</li><li>  <span class="hljs-keyword">return</span> {</li><li>    <span class="hljs-attr">x</span>: l.<span class="hljs-property">x</span> * d,</li><li>    <span class="hljs-attr">y</span>: l.<span class="hljs-property">y</span> * d,</li><li>    <span class="hljs-attr">z</span>: l.<span class="hljs-property">z</span> * d,</li><li>    <span class="hljs-attr">w</span>: l.<span class="hljs-property">w</span> * d</li><li>  };</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">lookAt</span>(<span class="hljs-params">node: Node, eye: Vec3, center: Vec3, up: Vec3</span>) {</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">q</span>: <span class="hljs-title class_">Quaternion</span> = {</li><li>    <span class="hljs-attr">x</span>: <span class="hljs-number">0.0</span>,</li><li>    <span class="hljs-attr">y</span>: <span class="hljs-number">0.0</span>,</li><li>    <span class="hljs-attr">z</span>: <span class="hljs-number">0.0</span>,</li><li>    <span class="hljs-attr">w</span>: <span class="hljs-number">0.0</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> f = <span class="hljs-title class_">Normalize</span>(<span class="hljs-title class_">Sub</span>(center, eye));</li><li>  <span class="hljs-keyword">let</span> m0 = <span class="hljs-title class_">Normalize</span>(<span class="hljs-title class_">Cross</span>(f, up));</li><li>  <span class="hljs-keyword">let</span> m1 = <span class="hljs-title class_">Cross</span>(m0, f);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">m2</span>: <span class="hljs-title class_">Vec3</span> = { <span class="hljs-attr">x</span>: -f.<span class="hljs-property">x</span>, <span class="hljs-attr">y</span>: -f.<span class="hljs-property">y</span>, <span class="hljs-attr">z</span>: -f.<span class="hljs-property">z</span> };</li><li>  <span class="hljs-keyword">if</span> (m2.<span class="hljs-property">z</span> &lt; <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-keyword">if</span> (m0.<span class="hljs-property">x</span> &gt; m1.<span class="hljs-property">y</span>) {</li><li>      t = <span class="hljs-number">1.0</span> + m0.<span class="hljs-property">x</span> - m1.<span class="hljs-property">y</span> - m2.<span class="hljs-property">z</span>;</li><li>      q = {</li><li>        <span class="hljs-attr">x</span>: t,</li><li>        <span class="hljs-attr">y</span>: m0.<span class="hljs-property">y</span> + m1.<span class="hljs-property">x</span>,</li><li>        <span class="hljs-attr">z</span>: m2.<span class="hljs-property">x</span> + m0.<span class="hljs-property">z</span>,</li><li>        <span class="hljs-attr">w</span>: m1.<span class="hljs-property">z</span> - m2.<span class="hljs-property">y</span></li><li>      };</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      t = <span class="hljs-number">1.0</span> - m0.<span class="hljs-property">x</span> + m1.<span class="hljs-property">y</span> - m2.<span class="hljs-property">z</span>;</li><li>      q = {</li><li>        <span class="hljs-attr">x</span>: m0.<span class="hljs-property">y</span> + m1.<span class="hljs-property">x</span>,</li><li>        <span class="hljs-attr">y</span>: t,</li><li>        <span class="hljs-attr">z</span>: m1.<span class="hljs-property">z</span> + m2.<span class="hljs-property">y</span>,</li><li>        <span class="hljs-attr">w</span>: m2.<span class="hljs-property">x</span> - m0.<span class="hljs-property">z</span></li><li>      };</li><li>    }</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-keyword">if</span> (m0.<span class="hljs-property">x</span> &lt; -m1.<span class="hljs-property">y</span>) {</li><li>      t = <span class="hljs-number">1.0</span> - m0.<span class="hljs-property">x</span> - m1.<span class="hljs-property">y</span> + m2.<span class="hljs-property">z</span>;</li><li>      q = {</li><li>        <span class="hljs-attr">x</span>: m2.<span class="hljs-property">x</span> + m0.<span class="hljs-property">z</span>,</li><li>        <span class="hljs-attr">y</span>: m1.<span class="hljs-property">z</span> + m2.<span class="hljs-property">y</span>,</li><li>        <span class="hljs-attr">z</span>: t,</li><li>        <span class="hljs-attr">w</span>: m0.<span class="hljs-property">y</span> - m1.<span class="hljs-property">x</span></li><li>      };</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      t = <span class="hljs-number">1.0</span> + m0.<span class="hljs-property">x</span> + m1.<span class="hljs-property">y</span> + m2.<span class="hljs-property">z</span>;</li><li>      q = {</li><li>        <span class="hljs-attr">x</span>: m1.<span class="hljs-property">z</span> - m2.<span class="hljs-property">y</span>,</li><li>        <span class="hljs-attr">y</span>: m2.<span class="hljs-property">x</span> - m0.<span class="hljs-property">z</span>,</li><li>        <span class="hljs-attr">z</span>: m0.<span class="hljs-property">y</span> - m1.<span class="hljs-property">x</span>,</li><li>        <span class="hljs-attr">w</span>: t</li><li>      }</li><li>    }</li><li>  }</li><li>  node.<span class="hljs-property">position</span> = eye;</li><li>  node.<span class="hljs-property">rotation</span> = <span class="hljs-title class_">Mul</span>(q, <span class="hljs-number">0.5</span> / <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(t));</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>