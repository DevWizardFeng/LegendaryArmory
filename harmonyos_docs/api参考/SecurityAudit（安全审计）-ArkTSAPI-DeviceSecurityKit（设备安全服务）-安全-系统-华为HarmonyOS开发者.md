<h1 _ngcontent-sxp-c119="" class="doc-title ng-star-inserted" title="SecurityAudit（安全审计）"> SecurityAudit（安全审计） </h1>

<div _ngcontent-sxp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>提供统一的安全审计数据订阅与取消订阅接口，应用可以获取设备上的安全审计数据，以支撑审计业务。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section543292923310" device-type="2in1">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section543292923310" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1962713117486" device-type="2in1">AuditEventInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1962713117486" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>用于订阅或取消订阅接口的请求参数。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.1" width="13.36%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.2" width="13.569999999999999%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.3" width="12.08%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.4" width="10.76%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.5" width="50.23%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.36%"><p>eventId</p> </td> <td class="cellrowborder" width="13.569999999999999%"><p>number</p> </td> <td class="cellrowborder" width="12.08%"><p>否</p> </td> <td class="cellrowborder" width="10.76%"><p>否</p> </td> <td class="cellrowborder" width="50.23%"><p>审计事件ID，用于指定需要获取的安全审计数据。例如：0x810800800</p> <p>审计事件ID的取值范围是[0, 0xFFFFFFFFF]。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section5557545175113" device-type="2in1">AuditEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5557545175113" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>安全审计数据。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="13.850000000000001%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="13.100000000000001%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="10.17%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="10.85%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="52.03%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.850000000000001%"><p>eventId</p> </td> <td class="cellrowborder" width="13.100000000000001%"><p>number</p> </td> <td class="cellrowborder" width="10.17%"><p>否</p> </td> <td class="cellrowborder" width="10.85%"><p>否</p> </td> <td class="cellrowborder" width="52.03%"><p>审计事件ID，与请求参数中的审计事件ID相同。</p> </td> </tr> <tr><td class="cellrowborder" width="13.850000000000001%"><p>version</p> </td> <td class="cellrowborder" width="13.100000000000001%"><p>string</p> </td> <td class="cellrowborder" width="10.17%"><p>否</p> </td> <td class="cellrowborder" width="10.85%"><p>是</p> </td> <td class="cellrowborder" width="52.03%"><p>审计事件版本号。</p> </td> </tr> <tr><td class="cellrowborder" width="13.850000000000001%"><p>timestamp</p> </td> <td class="cellrowborder" width="13.100000000000001%"><p>string</p> </td> <td class="cellrowborder" width="10.17%"><p>否</p> </td> <td class="cellrowborder" width="10.85%"><p>是</p> </td> <td class="cellrowborder" width="52.03%"><p>审计事件发生时间。格式为： YYYYMMDDHHMMSS</p> </td> </tr> <tr><td class="cellrowborder" width="13.850000000000001%"><p>content</p> </td> <td class="cellrowborder" width="13.100000000000001%"><p>string</p> </td> <td class="cellrowborder" width="10.17%"><p>否</p> </td> <td class="cellrowborder" width="10.85%"><p>是</p> </td> <td class="cellrowborder" width="52.03%"><p>审计事件内容。不同审计事件具备不同的内容，内容为json格式字符串。例如：{"type": 1}</p> </td> </tr> <tr><td class="cellrowborder" width="13.850000000000001%"><p>userId</p> </td> <td class="cellrowborder" width="13.100000000000001%"><p>number</p> </td> <td class="cellrowborder" width="10.17%"><p>否</p> </td> <td class="cellrowborder" width="10.85%"><p>是</p> </td> <td class="cellrowborder" width="52.03%"><p>发生审计事件时，登录的用户ID。</p> </td> </tr> <tr><td class="cellrowborder" width="13.850000000000001%"><p>deviceId</p> </td> <td class="cellrowborder" width="13.100000000000001%"><p>string</p> </td> <td class="cellrowborder" width="10.17%"><p>否</p> </td> <td class="cellrowborder" width="10.85%"><p>是</p> </td> <td class="cellrowborder" width="52.03%"><p>审计事件发生的设备ID。</p> </td> </tr> <tr><td class="cellrowborder" width="13.850000000000001%"><p>metadata</p> </td> <td class="cellrowborder" width="13.100000000000001%"><p>string</p> </td> <td class="cellrowborder" width="10.17%"><p>否</p> </td> <td class="cellrowborder" width="10.85%"><p>是</p> </td> <td class="cellrowborder" width="52.03%"><p>审计事件元数据。包含事件版本号、事件接收时间、设备ID和用户ID。<strong>起始版本：</strong>6.0.0(20)</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section116663494309" device-type="2in1">NotifyEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section116663494309" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>通知类事件枚举。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.1" width="29.95%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.2" width="22.42%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.3" width="47.63%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="29.95%"><p>PASTEBOARD</p> </td> <td class="cellrowborder" width="22.42%"><p>0x27000000</p> </td> <td class="cellrowborder" width="47.63%"><p>剪切板复制粘贴事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>FILE</p> </td> <td class="cellrowborder" width="22.42%"><p>0x1C000007</p> </td> <td class="cellrowborder" width="47.63%"><p>文件事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>FILE_INTERCEPTED</p> </td> <td class="cellrowborder" width="22.42%"><p>0x1C001100</p> </td> <td class="cellrowborder" width="47.63%"><p>文件访问规则违规事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>ACCOUNT</p> </td> <td class="cellrowborder" width="22.42%"><p>0x10000100</p> </td> <td class="cellrowborder" width="47.63%"><p>帐户登录或注销事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>WINDOW</p> </td> <td class="cellrowborder" width="22.42%"><p>0x07000000</p> </td> <td class="cellrowborder" width="47.63%"><p>屏幕截图、屏幕录制或屏幕投影事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>VOLUME</p> </td> <td class="cellrowborder" width="22.42%"><p>0x0F000000</p> </td> <td class="cellrowborder" width="47.63%"><p>可移动存储设备的插入或移除事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>PRINTER</p> </td> <td class="cellrowborder" width="22.42%"><p>0x2E000000</p> </td> <td class="cellrowborder" width="47.63%"><p>打印机事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>PROCESS</p> </td> <td class="cellrowborder" width="22.42%"><p>0x1C000008</p> </td> <td class="cellrowborder" width="47.63%"><p>进程创建或退出事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>NETWORK_TRAFFIC</p> </td> <td class="cellrowborder" width="22.42%"><p>0x1C00000E</p> </td> <td class="cellrowborder" width="47.63%"><p>网络流量事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>NETWORK_CONN</p> </td> <td class="cellrowborder" width="22.42%"><p>0x1C00000F</p> </td> <td class="cellrowborder" width="47.63%"><p>网络连接事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>CAMERA</p> </td> <td class="cellrowborder" width="22.42%"><p>0x2D000000</p> </td> <td class="cellrowborder" width="47.63%"><p>相机事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>APP</p> </td> <td class="cellrowborder" width="22.42%"><p>0x10000000</p> </td> <td class="cellrowborder" width="47.63%"><p>应用程序事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>EDM</p> </td> <td class="cellrowborder" width="22.42%"><p>0x11000000</p> </td> <td class="cellrowborder" width="47.63%"><p>企业设备管理事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>CERT</p> </td> <td class="cellrowborder" width="22.42%"><p>0x12003000</p> </td> <td class="cellrowborder" width="47.63%"><p>证书操作事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>KIA_CREATE</p> </td> <td class="cellrowborder" width="22.42%"><p>0x1C00000B</p> </td> <td class="cellrowborder" width="47.63%"><p>KIA文件创建事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>KIA_READ</p> </td> <td class="cellrowborder" width="22.42%"><p>0x1C000012</p> </td> <td class="cellrowborder" width="47.63%"><p>KIA文件读取事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>KIA_VARIANT</p> </td> <td class="cellrowborder" width="22.42%"><p>0x1C00000C</p> </td> <td class="cellrowborder" width="47.63%"><p>关键信息资产（KIA）文件变化事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>KIA_INTERCEPT</p> </td> <td class="cellrowborder" width="22.42%"><p>0x1C00000A</p> </td> <td class="cellrowborder" width="47.63%"><p>KIA文件拦截事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>PERMISSION</p> </td> <td class="cellrowborder" width="22.42%"><p>0x0B000000</p> </td> <td class="cellrowborder" width="47.63%"><p>应用程序权限更改事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>DNS</p> </td> <td class="cellrowborder" width="22.42%"><p>0x03000001</p> </td> <td class="cellrowborder" width="47.63%"><p>DNS审计事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>APP_INSTALL_INTERCEPTED</p> </td> <td class="cellrowborder" width="22.42%"><p>0x18000100</p> </td> <td class="cellrowborder" width="47.63%"><p>应用程序安装拦截事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>APP_UNINSTALL_INTERCEPTED</p> </td> <td class="cellrowborder" width="22.42%"><p>0x18000101</p> </td> <td class="cellrowborder" width="47.63%"><p>应用程序卸载拦截事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>APP_UPDATE_INTERCEPTED</p> </td> <td class="cellrowborder" width="22.42%"><p>0x18000102</p> </td> <td class="cellrowborder" width="47.63%"><p>应用程序更新拦截事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>APP_RECOVER_INTERCEPTED</p> </td> <td class="cellrowborder" width="22.42%"><p>0x18000103</p> </td> <td class="cellrowborder" width="47.63%"><p>应用程序恢复拦截事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>APP_START_INTERCEPTED</p> </td> <td class="cellrowborder" width="22.42%"><p>0x18000104</p> </td> <td class="cellrowborder" width="47.63%"><p>应用程序启动拦截事件。</p> </td> </tr> <tr><td class="cellrowborder" width="29.95%"><p>USB_ACCESS_INTERCEPTED</p> </td> <td class="cellrowborder" width="22.42%"><p>0x30000000</p> </td> <td class="cellrowborder" width="47.63%"><p>USB访问拦截事件。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section141981957164611" device-type="2in1">FilterType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section141981957164611" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>事件过滤类型枚举。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.1.4.1.1" width="29.57%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.4.1.2" width="21.77%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.4.1.3" width="48.66%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="29.57%"><p>EVENT_TYPE_EQUAL</p> </td> <td class="cellrowborder" width="21.77%"><p>0x00000100</p> </td> <td class="cellrowborder" width="48.66%"><p>事件类型的过滤器类型。</p> </td> </tr> <tr><td class="cellrowborder" width="29.57%"><p>EVENT_SUBTYPE_EQUAL</p> </td> <td class="cellrowborder" width="21.77%"><p>0x00000200</p> </td> <td class="cellrowborder" width="48.66%"><p>事件子类型的过滤器类型。</p> </td> </tr> <tr><td class="cellrowborder" width="29.57%"><p>FILE_PATH_EQUAL</p> </td> <td class="cellrowborder" width="21.77%"><p>0x00010000</p> </td> <td class="cellrowborder" width="48.66%"><p>文件路径类型的过滤器类型。</p> </td> </tr> <tr><td class="cellrowborder" width="29.57%"><p>FILE_PATH_PREFIX</p> </td> <td class="cellrowborder" width="21.77%"><p>0x00010001</p> </td> <td class="cellrowborder" width="48.66%"><p>文件路径前缀类型的过滤器类型。</p> </td> </tr> <tr><td class="cellrowborder" width="29.57%"><p>FILE_PATH_SUFFIX</p> </td> <td class="cellrowborder" width="21.77%"><p>0x00010002</p> </td> <td class="cellrowborder" width="48.66%"><p>文件路径后缀类型的过滤器类型。</p> </td> </tr> <tr><td class="cellrowborder" width="29.57%"><p>PROCESS_UID_EQUAL</p> </td> <td class="cellrowborder" width="21.77%"><p>0x00020000</p> </td> <td class="cellrowborder" width="48.66%"><p>过滤进程的UID类型。</p> </td> </tr> <tr><td class="cellrowborder" width="29.57%"><p>PROCESS_PID_EQUAL</p> </td> <td class="cellrowborder" width="21.77%"><p>0x00020100</p> </td> <td class="cellrowborder" width="48.66%"><p>过滤进程ID类型。</p> </td> </tr> <tr><td class="cellrowborder" width="29.57%"><p>PROCESS_NAME_EQUAL</p> </td> <td class="cellrowborder" width="21.77%"><p>0x00020200</p> </td> <td class="cellrowborder" width="48.66%"><p>筛选进程名称类型。</p> </td> </tr> <tr><td class="cellrowborder" width="29.57%"><p>PROCESS_NAME_PREFIX</p> </td> <td class="cellrowborder" width="21.77%"><p>0x00020201</p> </td> <td class="cellrowborder" width="48.66%"><p>进程名称前缀的过滤类型。</p> </td> </tr> <tr><td class="cellrowborder" width="29.57%"><p>PROCESS_NAME_SUFFIX</p> </td> <td class="cellrowborder" width="21.77%"><p>0x00020202</p> </td> <td class="cellrowborder" width="48.66%"><p>进程名称后缀的过滤类型。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section131951026124112" device-type="2in1">AuthEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section131951026124112" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>阻断类事件枚举。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.1" width="27.900000000000002%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.2" width="23.26%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.3" width="48.84%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="27.900000000000002%"><p>FILE_CREATE</p> </td> <td class="cellrowborder" width="23.26%"><p>0x1C801100</p> </td> <td class="cellrowborder" width="48.84%"><p>文件创建阻断事件。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>FILE_OPEN</p> </td> <td class="cellrowborder" width="23.26%"><p>0x1C801101</p> </td> <td class="cellrowborder" width="48.84%"><p>文件打开阻断事件。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>FILE_RENAME</p> </td> <td class="cellrowborder" width="23.26%"><p>0x1C801102</p> </td> <td class="cellrowborder" width="48.84%"><p>文件重命名阻断事件。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>FILE_DELETE</p> </td> <td class="cellrowborder" width="23.26%"><p>0x1C801103</p> </td> <td class="cellrowborder" width="48.84%"><p>文件删除阻断事件。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>FILE_SETEXTATTR</p> </td> <td class="cellrowborder" width="23.26%"><p>0x1C801104</p> </td> <td class="cellrowborder" width="48.84%"><p>文件设置扩展属性的阻断事件。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>FILE_DELETEEXTATTR</p> </td> <td class="cellrowborder" width="23.26%"><p>0x1C801105</p> </td> <td class="cellrowborder" width="48.84%"><p>文件删除扩展属性的阻断事件。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section10801114725511" device-type="2in1">AuthResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10801114725511" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>阻断结果的枚举。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.5.1.4.1.1" width="27.900000000000002%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.4.1.2" width="12.43%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.4.1.3" width="59.67%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="27.900000000000002%"><p>ALLOW</p> </td> <td class="cellrowborder" width="12.43%"><p>0</p> </td> <td class="cellrowborder" width="59.67%"><p>对阻断事件放行操作。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>DENY</p> </td> <td class="cellrowborder" width="12.43%"><p>1</p> </td> <td class="cellrowborder" width="59.67%"><p>对阻断事件拒绝操作。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section10996135475216" device-type="2in1">on('auditEventOccur')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10996135475216" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>on(type: 'auditEventOccur', auditEventInfo: <a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section1962713117486">AuditEventInfo</a>, callback: Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section5557545175113">AuditEvent</a>&gt;): void</p> <p>订阅安全审计数据。</p> <p><strong>需要权限：</strong>ohos.permission.QUERY_AUDIT_EVENT</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="15.45%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="20.66%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="10.190000000000001%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="53.7%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15.45%"><p>type</p> </td> <td class="cellrowborder" width="20.66%"><p>string</p> </td> <td class="cellrowborder" width="10.190000000000001%"><p>是</p> </td> <td class="cellrowborder" width="53.7%"><p>订阅的事件类型名称，固定值 'auditEventOccur'，表示审计事件。</p> </td> </tr> <tr><td class="cellrowborder" width="15.45%"><p>auditEventInfo</p> </td> <td class="cellrowborder" width="20.66%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section1962713117486">AuditEventInfo</a></p> </td> <td class="cellrowborder" width="10.190000000000001%"><p>是</p> </td> <td class="cellrowborder" width="53.7%"><p>订阅的审计数据信息。</p> </td> </tr> <tr><td class="cellrowborder" width="15.45%"><p>callback</p> </td> <td class="cellrowborder" width="20.66%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section5557545175113">AuditEvent</a>&gt;</p> </td> <td class="cellrowborder" width="10.190000000000001%"><p>是</p> </td> <td class="cellrowborder" width="53.7%"><p>用于接收审计事件的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="15.559999999999999%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="84.44%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.559999999999999%"><p>201</p> </td> <td class="cellrowborder" width="84.44%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.559999999999999%"><p>401</p> </td> <td class="cellrowborder" width="84.44%"><p>invalid parameters.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SecurityAuditAuditJsTest"</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">event: securityAudit.AuditEvent</span>) =&gt; {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func eventId= '</span> + event.<span class="hljs-property">eventId</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func version= '</span> + event.<span class="hljs-property">version</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func content= '</span> + event.<span class="hljs-property">content</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func timestamp= '</span> + event.<span class="hljs-property">timestamp</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func userId= '</span> + event.<span class="hljs-property">userId</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func deviceId= '</span> + event.<span class="hljs-property">deviceId</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">auditEventInfo</span>: securityAudit.<span class="hljs-property">AuditEventInfo</span> = {</li><li>   <span class="hljs-attr">eventId</span>: <span class="hljs-number">0x810800800</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'on begin.'</span>);</li><li>  securityAudit.<span class="hljs-title function_">on</span>(<span class="hljs-string">'auditEventOccur'</span>, auditEventInfo, callback);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in on.'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'on failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section199828491531" device-type="2in1">off('auditEventOccur')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section199828491531" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>off(type: 'auditEventOccur', auditEventInfo: <a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section1962713117486">AuditEventInfo</a>, callback?: Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section5557545175113">AuditEvent</a>&gt;): void</p> <p>取消订阅安全审计数据。</p> <p><strong>需要权限：</strong>ohos.permission.QUERY_AUDIT_EVENT</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="21.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="9.569999999999999%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="53.900000000000006%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>type</p> </td> <td class="cellrowborder" width="21.7%"><p>string</p> </td> <td class="cellrowborder" width="9.569999999999999%"><p>是</p> </td> <td class="cellrowborder" width="53.900000000000006%"><p>取消订阅的事件类型名称，固定值 ‘auditEventOccur’，表示审计事件。</p> </td> </tr> <tr><td class="cellrowborder" width="14.829999999999998%"><p>auditEventInfo</p> </td> <td class="cellrowborder" width="21.7%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section1962713117486">AuditEventInfo</a></p> </td> <td class="cellrowborder" width="9.569999999999999%"><p>是</p> </td> <td class="cellrowborder" width="53.900000000000006%"><p>取消订阅的审计数据信息。</p> </td> </tr> <tr><td class="cellrowborder" width="14.829999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="21.7%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section5557545175113">AuditEvent</a>&gt;</p> </td> <td class="cellrowborder" width="9.569999999999999%"><p>否</p> </td> <td class="cellrowborder" width="53.900000000000006%"><p>用于接收审计数据的回调函数。如果传入了callback，则取消该callback的订阅，否则取消所有callback的订阅。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>401</p> </td> <td class="cellrowborder" width="84.84%"><p>invalid parameters.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SecurityAuditAuditJsTest"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">auditEventInfo</span>: securityAudit.<span class="hljs-property">AuditEventInfo</span> = {</li><li>   <span class="hljs-attr">eventId</span>: <span class="hljs-number">0x810800800</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'off begin.'</span>);</li><li>  securityAudit.<span class="hljs-title function_">off</span>(<span class="hljs-string">'auditEventOccur'</span>, auditEventInfo);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in off.'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'off failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section17889177696" device-type="2in1">Filter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17889177696" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>用户提供的过滤条件信息。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.1" width="21.82%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.2" width="13.750000000000002%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.3" width="10.979999999999999%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.4" width="10.91%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.5" width="42.54%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.82%"><p>isInclude</p> </td> <td class="cellrowborder" width="13.750000000000002%"><p>boolean</p> </td> <td class="cellrowborder" width="10.979999999999999%"><p>否</p> </td> <td class="cellrowborder" width="10.91%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>过滤标签，决定符合条件的事件是否返回给订阅者。</p> <p><strong>true</strong>：设置反过滤，符合过滤条件的事件将返回给订阅者。</p> <p><strong>false</strong>：设置过滤，符合过滤条件的事件将不会返回给订阅者。</p> </td> </tr> <tr><td class="cellrowborder" width="21.82%"><p>type</p> </td> <td class="cellrowborder" width="13.750000000000002%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section141981957164611">FilterType</a></p> </td> <td class="cellrowborder" width="10.979999999999999%"><p>否</p> </td> <td class="cellrowborder" width="10.91%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>过滤类型。</p> </td> </tr> <tr><td class="cellrowborder" width="21.82%"><p>values</p> </td> <td class="cellrowborder" width="13.750000000000002%"><p>string[]</p> </td> <td class="cellrowborder" width="10.979999999999999%"><p>否</p> </td> <td class="cellrowborder" width="10.91%"><p>否</p> </td> <td class="cellrowborder" width="42.54%"><p>过滤条件的值的数组。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section119445151153" device-type="2in1">Client<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section119445151153" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>为通知客户端提供条件。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>需要通过<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section1137616421363">newClient</a>构造实例。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="section74001616194414" device-type="2in1" class="firsth2">subscribe<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section74001616194414" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>subscribe(events: NotifyEvent[]): void</p> <p>订阅通知事件。</p> <p><strong>需要权限</strong>：ohos.permission.QUERY_AUDIT_EVENT</p> <p><strong>系统能力</strong>：SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本</strong>：6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="19.74%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="13.03%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="52.400000000000006%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>events</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section116663494309">NotifyEvent</a>[]</p> </td> <td class="cellrowborder" width="13.03%"><p>是</p> </td> <td class="cellrowborder" width="52.400000000000006%"><p>需要订阅的通知事件。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li>import { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li>import { BusinessError } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>import { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> client: securityAudit.Client | undefined = undefined;</li><li><span class="hljs-keyword">const</span> TAG = <span class="hljs-string">"SecurityAuditJsTest"</span>; </li><li><span class="hljs-keyword">const</span> callback = (<span class="hljs-keyword">event</span>: securityAudit.AuditEvent) =&gt; { </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func eventId= '</span> + <span class="hljs-keyword">event</span>.eventId); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func version= '</span> + <span class="hljs-keyword">event</span>.version); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func content= '</span> + <span class="hljs-keyword">event</span>.content); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func timestamp= '</span> + <span class="hljs-keyword">event</span>.timestamp); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func userId= '</span> + <span class="hljs-keyword">event</span>.userId); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func deviceId= '</span> + <span class="hljs-keyword">event</span>.deviceId); </li><li>}; </li><li><span class="hljs-keyword">try</span> { </li><li>  client = securityAudit.newClient(callback);</li><li>  client?.subscribe([<span class="hljs-number">0x02D000000</span>]);</li><li>} <span class="hljs-keyword">catch</span> (err) { </li><li>  <span class="hljs-keyword">let</span> e: BusinessError = err <span class="hljs-keyword">as</span> BusinessError; </li><li>  hilog.error(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'subscribe failed: %{public}d %{public}s'</span>, e.code, e.message); </li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section173362984519" device-type="2in1">unsubscribe<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section173362984519" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>unsubscribe(events: NotifyEvent[]): void</p> <p>取消订阅通知事件。</p> <p><strong>需要权限</strong>：ohos.permission.QUERY_AUDIT_EVENT</p> <p><strong>系统能力</strong>：SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本</strong>：6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="19.74%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="13.03%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="52.400000000000006%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>events</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section116663494309">NotifyEvent</a>[]</p> </td> <td class="cellrowborder" width="13.03%"><p>是</p> </td> <td class="cellrowborder" width="52.400000000000006%"><p>已订阅的通知事件。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li>import { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li>import { BusinessError } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>import { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> client: securityAudit.Client | undefined = undefined;</li><li><span class="hljs-keyword">const</span> TAG = <span class="hljs-string">"SecurityAuditJsTest"</span>; </li><li><span class="hljs-keyword">const</span> callback = (<span class="hljs-keyword">event</span>: securityAudit.AuditEvent) =&gt; { </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func eventId= '</span> + <span class="hljs-keyword">event</span>.eventId); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func version= '</span> + <span class="hljs-keyword">event</span>.version); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func content= '</span> + <span class="hljs-keyword">event</span>.content); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func timestamp= '</span> + <span class="hljs-keyword">event</span>.timestamp); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func userId= '</span> + <span class="hljs-keyword">event</span>.userId); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func deviceId= '</span> + <span class="hljs-keyword">event</span>.deviceId); </li><li>}; </li><li><span class="hljs-keyword">try</span> { </li><li>  client = securityAudit.newClient(callback);</li><li>  client?.unsubscribe([<span class="hljs-number">0x02D000000</span>]);</li><li>} <span class="hljs-keyword">catch</span> (err) { </li><li>  <span class="hljs-keyword">let</span> e: BusinessError = err <span class="hljs-keyword">as</span> BusinessError; </li><li>  hilog.error(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'unsubscribe failed: %{public}d %{public}s'</span>, e.code, e.message); </li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section372945334518" device-type="2in1">addFilter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section372945334518" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>addFilter(event: NotifyEvent, filter: Filter): void</p> <p>为通知事件添加过滤条件，符合过滤条件的事件将根据过滤器中的过滤标签决定是否返回给用户。</p> <p><strong>需要权限</strong>：ohos.permission.QUERY_AUDIT_EVENT</p> <p><strong>系统能力</strong>：SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本</strong>：6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="19.53%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="16.36%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="49.28%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>event</p> </td> <td class="cellrowborder" width="19.53%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section116663494309">NotifyEvent</a></p> </td> <td class="cellrowborder" width="16.36%"><p>是</p> </td> <td class="cellrowborder" width="49.28%"><p>通知事件ID。</p> </td> </tr> <tr><td class="cellrowborder" width="14.829999999999998%"><p>filter</p> </td> <td class="cellrowborder" width="19.53%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section17889177696">Filter</a></p> </td> <td class="cellrowborder" width="16.36%"><p>是</p> </td> <td class="cellrowborder" width="49.28%"><p>通知事件的过滤器。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000004</p> </td> <td class="cellrowborder" width="84.84%"><p>The number of filters exceeds the upper limit.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000005</p> </td> <td class="cellrowborder" width="84.84%"><p>The event does not support the filter condition.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">securityAudit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">hilog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">client</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">Client</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">undefined</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">TAG</span> = <span class="hljs-string">"SecurityAuditJsTest"</span>; </li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">callback</span> = (<span class="hljs-variable">event</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">AuditEvent</span>) =&gt; { </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func eventId= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">eventId</span>); </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func version= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">version</span>); </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func content= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">content</span>); </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func timestamp= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">timestamp</span>); </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func userId= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">userId</span>); </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func deviceId= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">deviceId</span>); </li><li>}; </li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">filter</span> : <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">Filter</span> = {</li><li>  <span class="hljs-keyword">type</span>: <span class="hljs-number">0x00000200</span>,</li><li>  <span class="hljs-variable">isInclude</span>: <span class="hljs-keyword">true</span>,</li><li>  <span class="hljs-variable">values</span> : [<span class="hljs-string">"2"</span>]</li><li>};</li><li><span class="hljs-keyword">try</span> { </li><li>  <span class="hljs-variable">client</span> = <span class="hljs-variable">securityAudit</span>.<span class="hljs-title function_">newClient</span>(<span class="hljs-variable">callback</span>);</li><li>  <span class="hljs-variable">client</span>?.<span class="hljs-title function_">addFilter</span>(<span class="hljs-number">0x02D000000</span>, <span class="hljs-variable">filter</span>);</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) { </li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">e</span>: <span class="hljs-title class_">BusinessError</span> = <span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>; </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'addFilter failed: %{public}d %{public}s'</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">message</span>); </li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section51581218104614" device-type="2in1">removeFilter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section51581218104614" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>removeFilter(event: NotifyEvent, filter: Filter): void</p> <p>删除通知事件的过滤条件，满足该过滤条件的事件将不会再根据过滤器中的过滤标签进行处理。</p> <p><strong>需要权限</strong>：ohos.permission.QUERY_AUDIT_EVENT</p> <p><strong>系统能力</strong>：SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本</strong>：6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="19.74%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="15.2%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="50.23%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>event</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section116663494309">NotifyEvent</a></p> </td> <td class="cellrowborder" width="15.2%"><p>是</p> </td> <td class="cellrowborder" width="50.23%"><p>通知事件ID 。</p> </td> </tr> <tr><td class="cellrowborder" width="14.829999999999998%"><p>filter</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section17889177696">Filter</a></p> </td> <td class="cellrowborder" width="15.2%"><p>是</p> </td> <td class="cellrowborder" width="50.23%"><p>通知事件的过滤器。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000005</p> </td> <td class="cellrowborder" width="84.84%"><p>The event does not support the filter condition.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">securityAudit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">hilog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">client</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">Client</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">undefined</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">TAG</span> = <span class="hljs-string">"SecurityAuditJsTest"</span>; </li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">callback</span> = (<span class="hljs-variable">event</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">AuditEvent</span>) =&gt; { </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func eventId= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">eventId</span>); </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func version= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">version</span>); </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func content= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">content</span>); </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func timestamp= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">timestamp</span>); </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func userId= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">userId</span>); </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func deviceId= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">deviceId</span>); </li><li>}; </li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">filter</span> : <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">Filter</span> = {</li><li>  <span class="hljs-keyword">type</span>: <span class="hljs-number">0x00000200</span>,</li><li>  <span class="hljs-variable">isInclude</span>: <span class="hljs-keyword">true</span>,</li><li>  <span class="hljs-variable">values</span> : [<span class="hljs-string">"2"</span>]</li><li>};</li><li><span class="hljs-keyword">try</span> { </li><li>  <span class="hljs-variable">client</span> = <span class="hljs-variable">securityAudit</span>.<span class="hljs-title function_">newClient</span>(<span class="hljs-variable">callback</span>);</li><li>  <span class="hljs-variable">client</span>?.<span class="hljs-title function_">removeFilter</span>(<span class="hljs-number">0x02D000000</span>, <span class="hljs-variable">filter</span>);</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) { </li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">e</span>: <span class="hljs-title class_">BusinessError</span> = <span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>; </li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'removeFilter failed: %{public}d %{public}s'</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">message</span>); </li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1137616421363" device-type="2in1">newClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1137616421363" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>newClient(callback: Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section5557545175113">AuditEvent</a>&gt;): Client</p> <p>创建一个新的通知客户端，该客户端提供的方法可以实现通知类事件的订阅、过滤功能。</p> <p><strong>需要权限：</strong>ohos.permission.QUERY_AUDIT_EVENT</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="23.02%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="11.35%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="50.8%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="23.02%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section5557545175113">AuditEvent</a>&gt;</p> </td> <td class="cellrowborder" width="11.35%"><p>是</p> </td> <td class="cellrowborder" width="50.8%"><p>用于接收审计数据的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="34.88%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="65.12%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="34.88%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section119445151153">Client</a></p> </td> <td class="cellrowborder" width="65.12%"><p class="typescript">通知类客户端实例对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000002</p> </td> <td class="cellrowborder" width="84.84%"><p>The number of clients exceeds the global upper limit.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000003</p> </td> <td class="cellrowborder" width="84.84%"><p>The number of clients exceeds the current process upper limit.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li>import { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li>import { BusinessError } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>import { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> client: securityAudit.Client | undefined = undefined;</li><li><span class="hljs-keyword">const</span> TAG = <span class="hljs-string">"SecurityAuditJsTest"</span>; </li><li><span class="hljs-keyword">const</span> callback = (<span class="hljs-keyword">event</span>: securityAudit.AuditEvent) =&gt; { </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func eventId= '</span> + <span class="hljs-keyword">event</span>.eventId); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func version= '</span> + <span class="hljs-keyword">event</span>.version); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func content= '</span> + <span class="hljs-keyword">event</span>.content); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func timestamp= '</span> + <span class="hljs-keyword">event</span>.timestamp); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func userId= '</span> + <span class="hljs-keyword">event</span>.userId); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func deviceId= '</span> + <span class="hljs-keyword">event</span>.deviceId); </li><li>}; </li><li><span class="hljs-keyword">try</span> { </li><li>  client = securityAudit.newClient(callback);</li><li>} <span class="hljs-keyword">catch</span> (err) { </li><li>  <span class="hljs-keyword">let</span> e: BusinessError = err <span class="hljs-keyword">as</span> BusinessError; </li><li>  hilog.error(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'newClient failed: %{public}d %{public}s'</span>, e.code, e.message); </li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1781315192517" device-type="2in1">deleteClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1781315192517" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>deleteClient(client: Client): void</p> <p>删除通知客户端，用户将无法使用该客户端提供的方法，并会清空客户端记录的订阅与过滤信息。</p> <p><strong>需要权限：</strong>ohos.permission.QUERY_AUDIT_EVENT</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="16.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="16.45%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="51.92%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>client</p> </td> <td class="cellrowborder" width="16.8%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section119445151153">Client</a></p> </td> <td class="cellrowborder" width="16.45%"><p>是</p> </td> <td class="cellrowborder" width="51.92%"><p>通知客户端信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li>import { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li>import { BusinessError } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>import { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> client: securityAudit.Client | undefined = undefined;</li><li><span class="hljs-keyword">const</span> TAG = <span class="hljs-string">"SecurityAuditJsTest"</span>; </li><li><span class="hljs-keyword">const</span> callback = (<span class="hljs-keyword">event</span>: securityAudit.AuditEvent) =&gt; { </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func eventId= '</span> + <span class="hljs-keyword">event</span>.eventId); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func version= '</span> + <span class="hljs-keyword">event</span>.version); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func content= '</span> + <span class="hljs-keyword">event</span>.content); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func timestamp= '</span> + <span class="hljs-keyword">event</span>.timestamp); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func userId= '</span> + <span class="hljs-keyword">event</span>.userId); </li><li>  hilog.info(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_JsApi_Func deviceId= '</span> + <span class="hljs-keyword">event</span>.deviceId); </li><li>}; </li><li><span class="hljs-keyword">try</span> { </li><li>  client = securityAudit.newClient(callback);</li><li>  securityAudit.deleteClient(client);</li><li>} <span class="hljs-keyword">catch</span> (err) { </li><li>  <span class="hljs-keyword">let</span> e: BusinessError = err <span class="hljs-keyword">as</span> BusinessError; </li><li>  hilog.error(<span class="hljs-number">0x0000</span>, TAG, <span class="hljs-string">'deleteClient failed: %{public}d %{public}s'</span>, e.code, e.message); </li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section85535761112" device-type="2in1">AuthClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section85535761112" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>为阻断类事件客户端提供条件。</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>需要通过<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section1768135711112">newAuthClient</a>构造实例。</p> </div></div></div> </div> <div class="tiledSection"><h3 id="section35665720118" device-type="2in1" class="firsth2">subscribe<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section35665720118" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>subscribe(events: AuthEvent[]): void</p> <p>订阅阻断事件。</p> <p><strong>需要权限</strong>：ohos.permission.kernel.AUTH_AUDIT_EVENT</p> <p><strong>系统能力</strong>：SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本</strong>：6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="20.57%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="12.389999999999999%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="52.21%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>events</p> </td> <td class="cellrowborder" width="20.57%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section131951026124112">AuthEvent</a>[]</p> </td> <td class="cellrowborder" width="12.389999999999999%"><p>是</p> </td> <td class="cellrowborder" width="52.21%"><p>要订阅的阻断事件。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SecurityAuditAuthJsTest"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">authClient</span>: securityAudit.<span class="hljs-property">AuthClient</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">event: securityAudit.AuditEvent</span>) =&gt; {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func eventId= '</span> + event.<span class="hljs-property">eventId</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func content= '</span> + event.<span class="hljs-property">content</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func metadata= '</span> + event.<span class="hljs-property">metadata</span>);</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  authClient = securityAudit.<span class="hljs-title function_">newAuthClient</span>(callback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'newAuthClient failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  authClient?.<span class="hljs-title function_">subscribe</span>([securityAudit.<span class="hljs-property">AuthEvent</span>.<span class="hljs-property">FILE_CREATE</span>]);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'subscribe failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section125845718115" device-type="2in1">unsubscribe<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section125845718115" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>unsubscribe(events: AuthEvent[]): void</p> <p>取消订阅阻断事件。</p> <p><strong>需要权限</strong>：ohos.permission.kernel.AUTH_AUDIT_EVENT</p> <p><strong>系统能力</strong>：SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本</strong>：6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.2" width="19.74%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.3" width="10.96%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.4" width="54.47%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>events</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section131951026124112">AuthEvent</a>[]</p> </td> <td class="cellrowborder" width="10.96%"><p>是</p> </td> <td class="cellrowborder" width="54.47%"><p>已订阅的阻断事件。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SecurityAuditAuthJsTest"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">authClient</span>: securityAudit.<span class="hljs-property">AuthClient</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">event: securityAudit.AuditEvent</span>) =&gt; {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func eventId= '</span> + event.<span class="hljs-property">eventId</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func content= '</span> + event.<span class="hljs-property">content</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func metadata= '</span> + event.<span class="hljs-property">metadata</span>);</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  authClient = securityAudit.<span class="hljs-title function_">newAuthClient</span>(callback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'newAuthClient failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  authClient?.<span class="hljs-title function_">subscribe</span>([securityAudit.<span class="hljs-property">AuthEvent</span>.<span class="hljs-property">FILE_CREATE</span>]);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'subscribe failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  authClient?.<span class="hljs-title function_">unsubscribe</span>([securityAudit.<span class="hljs-property">AuthEvent</span>.<span class="hljs-property">FILE_CREATE</span>]);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'unsubscribe failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section76035714111" device-type="2in1">addFilter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section76035714111" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>addFilter(event: AuthEvent, filter: Filter): void</p> <p>为阻断事件添加过滤条件，符合过滤条件的事件将根据过滤器中的过滤标签决定是否返回给用户。</p> <p><strong>需要权限</strong>：ohos.permission.kernel.AUTH_AUDIT_EVENT</p> <p><strong>系统能力</strong>：SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本</strong>：6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.2" width="19.74%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.3" width="12%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.4" width="53.43%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>event</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section131951026124112">AuthEvent</a></p> </td> <td class="cellrowborder" width="12%"><p>是</p> </td> <td class="cellrowborder" width="53.43%"><p>阻断事件ID。</p> </td> </tr> <tr><td class="cellrowborder" width="14.829999999999998%"><p>filter</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section17889177696">Filter</a></p> </td> <td class="cellrowborder" width="12%"><p>是</p> </td> <td class="cellrowborder" width="53.43%"><p>阻断事件的过滤器。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000004</p> </td> <td class="cellrowborder" width="84.84%"><p>The number of filters exceeds the upper limit.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000005</p> </td> <td class="cellrowborder" width="84.84%"><p>The event does not support the filter condition.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">securityAudit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">hilog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">TAG</span> = <span class="hljs-string">"SecurityAuditAuthJsTest"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">authClient</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">AuthClient</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">undefined</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">callback</span> = (<span class="hljs-variable">event</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">AuditEvent</span>) =&gt; {</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func eventId= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">eventId</span>);</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func content= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">content</span>);</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func metadata= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">metadata</span>);</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable">authClient</span> = <span class="hljs-variable">securityAudit</span>.<span class="hljs-title function_">newAuthClient</span>(<span class="hljs-variable">callback</span>);</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">e</span>: <span class="hljs-title class_">BusinessError</span> = <span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>;</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'newAuthClient failed: %{public}d %{public}s'</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">message</span>);</li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">filter</span> : <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">Filter</span> = {</li><li>  <span class="hljs-keyword">type</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">FilterType</span>.<span class="hljs-title class_">PROCESS_PID_EQUAL</span>,</li><li>  <span class="hljs-variable">isInclude</span>: <span class="hljs-keyword">true</span>,</li><li>  <span class="hljs-variable">values</span> : [<span class="hljs-string">"2"</span>]</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable">authClient</span>?.<span class="hljs-title function_">addFilter</span>(<span class="hljs-variable">securityAudit</span>.<span class="hljs-variable">AuthEvent</span>.<span class="hljs-variable">FILE_CREATE</span>, <span class="hljs-variable">filter</span>);</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">e</span>: <span class="hljs-title class_">BusinessError</span> = <span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>;</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'addFilter failed: %{public}d %{public}s'</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section7389125543411" device-type="2in1">removeFilter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7389125543411" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>removeFilter(event: AuthEvent, filter: Filter): void</p> <p>删除阻断事件的过滤条件，满足该过滤条件的事件将不会再根据过滤器中的过滤标签进行处理。</p> <p><strong>需要权限</strong>：ohos.permission.kernel.AUTH_AUDIT_EVENT</p> <p><strong>系统能力</strong>：SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本</strong>：6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.2" width="19.74%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.3" width="10.68%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.4" width="54.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>event</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section131951026124112">AuthEvent</a></p> </td> <td class="cellrowborder" width="10.68%"><p>是</p> </td> <td class="cellrowborder" width="54.75%"><p>阻断事件ID 。</p> </td> </tr> <tr><td class="cellrowborder" width="14.829999999999998%"><p>filter</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section17889177696">Filter</a></p> </td> <td class="cellrowborder" width="10.68%"><p>是</p> </td> <td class="cellrowborder" width="54.75%"><p>阻断事件的过滤器。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000005</p> </td> <td class="cellrowborder" width="84.84%"><p>The event does not support the filter condition.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">securityAudit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">hilog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">TAG</span> = <span class="hljs-string">"SecurityAuditAuthJsTest"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">authClient</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">AuthClient</span> | <span class="hljs-title class_">undefined</span> = <span class="hljs-variable">undefined</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable">callback</span> = (<span class="hljs-variable">event</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">AuditEvent</span>) =&gt; {</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func eventId= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">eventId</span>);</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func content= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">content</span>);</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func metadata= '</span> + <span class="hljs-variable">event</span>.<span class="hljs-variable">metadata</span>);</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable">authClient</span> = <span class="hljs-variable">securityAudit</span>.<span class="hljs-title function_">newAuthClient</span>(<span class="hljs-variable">callback</span>);</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">e</span>: <span class="hljs-title class_">BusinessError</span> = <span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>;</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'newAuthClient failed: %{public}d %{public}s'</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">message</span>);</li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">filter</span> : <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">Filter</span> = {</li><li>  <span class="hljs-keyword">type</span>: <span class="hljs-title class_">securityAudit</span>.<span class="hljs-title class_">FilterType</span>.<span class="hljs-title class_">PROCESS_PID_EQUAL</span>,</li><li>  <span class="hljs-variable">isInclude</span>: <span class="hljs-keyword">true</span>,</li><li>  <span class="hljs-variable">values</span> : [<span class="hljs-string">"2"</span>]</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable">authClient</span>?.<span class="hljs-title function_">addFilter</span>(<span class="hljs-variable">securityAudit</span>.<span class="hljs-variable">AuthEvent</span>.<span class="hljs-variable">FILE_CREATE</span>, <span class="hljs-variable">filter</span>);</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">e</span>: <span class="hljs-title class_">BusinessError</span> = <span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>;</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'addFilter failed: %{public}d %{public}s'</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">message</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable">authClient</span>?.<span class="hljs-title function_">removeFilter</span>(<span class="hljs-variable">securityAudit</span>.<span class="hljs-variable">AuthEvent</span>.<span class="hljs-variable">FILE_CREATE</span>, <span class="hljs-variable">filter</span>);</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-variable">e</span>: <span class="hljs-title class_">BusinessError</span> = <span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>;</li><li>  <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable">TAG</span>, <span class="hljs-string">'removeFilter failed: %{public}d %{public}s'</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">e</span>.<span class="hljs-variable">message</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section1164155771110" device-type="2in1">auth<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1164155771110" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>auth(auditEvent: AuditEvent, authResult: AuthResult): void</p> <p>设置阻断事件的阻断结果，审计模块会根据阻断结果对事件进行放行或拒绝的处理。</p> <p><strong>需要权限</strong>：ohos.permission.kernel.AUTH_AUDIT_EVENT</p> <p><strong>系统能力</strong>：SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本</strong>：6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.2" width="19.74%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.3" width="11.05%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.4" width="54.379999999999995%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>auditEvent</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section5557545175113">AuditEvent</a></p> </td> <td class="cellrowborder" width="11.05%"><p>是</p> </td> <td class="cellrowborder" width="54.379999999999995%"><p>阻断事件信息 。</p> </td> </tr> <tr><td class="cellrowborder" width="14.829999999999998%"><p>authResult</p> </td> <td class="cellrowborder" width="19.74%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section10801114725511">AuthResult</a></p> </td> <td class="cellrowborder" width="11.05%"><p>是</p> </td> <td class="cellrowborder" width="54.379999999999995%"><p>阻断结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="15.15%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="84.85000000000001%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.15%"><p>201</p> </td> <td class="cellrowborder" width="84.85000000000001%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.15%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.85000000000001%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="15.15%"><p>1012000007</p> </td> <td class="cellrowborder" width="84.85000000000001%"><p>The auth event cannot be found.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SecurityAuditAuthJsTest"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">authClient</span>: securityAudit.<span class="hljs-property">AuthClient</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-title function_">allowEventCallback</span> = (<span class="hljs-params">event: securityAudit.AuditEvent</span>) =&gt; {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func eventId= '</span> + event.<span class="hljs-property">eventId</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func content= '</span> + event.<span class="hljs-property">content</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func metadata= '</span> + event.<span class="hljs-property">metadata</span>);</li><li>  <span class="hljs-keyword">try</span> {</li><li>    authClient?.<span class="hljs-title function_">auth</span>(event, securityAudit.<span class="hljs-property">AuthResult</span>.<span class="hljs-property">ALLOW</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'allowEventCallback'</span>, <span class="hljs-string">'auth error:'</span> + e.<span class="hljs-property">code</span>);</li><li>  }</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  authClient = securityAudit.<span class="hljs-title function_">newAuthClient</span>(allowEventCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'newAuthClient failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1768135711112" device-type="2in1">newAuthClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1768135711112" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>newAuthClient(callback: Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section5557545175113">AuditEvent</a>&gt;): AuthClient</p> <p>创建一个新的阻断客户端，该客户端提供的方法可以实现阻断类事件的订阅、过滤和阻断功能。</p> <p><strong>需要权限：</strong>ohos.permission.kernel.AUTH_AUDIT_EVENT</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.2" width="25.290000000000003%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.3" width="14.08%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.4" width="45.800000000000004%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="25.290000000000003%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section5557545175113">AuditEvent</a>&gt;</p> </td> <td class="cellrowborder" width="14.08%"><p>是</p> </td> <td class="cellrowborder" width="45.800000000000004%"><p>用于接收审计数据的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="34.88%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="65.12%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="34.88%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section85535761112">AuthClient</a></p> </td> <td class="cellrowborder" width="65.12%"><p class="typescript">阻断类客户端实例对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.13.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.13.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000002</p> </td> <td class="cellrowborder" width="84.84%"><p>The number of clients exceeds the global upper limit.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000003</p> </td> <td class="cellrowborder" width="84.84%"><p>The number of clients exceeds the current process upper limit.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SecurityAuditAuthJsTest"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">authClient</span>: securityAudit.<span class="hljs-property">AuthClient</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">event: securityAudit.AuditEvent</span>) =&gt; {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func eventId= '</span> + event.<span class="hljs-property">eventId</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func content= '</span> + event.<span class="hljs-property">content</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func metadata= '</span> + event.<span class="hljs-property">metadata</span>);</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  authClient = securityAudit.<span class="hljs-title function_">newAuthClient</span>(callback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'newAuthClient failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1171257161112" device-type="2in1">deleteAuthClient<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1171257161112" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>deleteAuthClient(client: AuthClient): void</p> <p>删除阻断客户端，用户将无法使用该客户端提供的方法，并会清空客户端记录的订阅与过滤信息。</p> <p><strong>需要权限：</strong>ohos.permission.kernel.AUTH_AUDIT_EVENT</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.2" width="20.76%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.3" width="16.16%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.4" width="48.25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>client</p> </td> <td class="cellrowborder" width="20.76%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-securityaudit-api#section85535761112">AuthClient</a></p> </td> <td class="cellrowborder" width="16.16%"><p>是</p> </td> <td class="cellrowborder" width="48.25%"><p>阻断客户端信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SecurityAuditAuthJsTest"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">authClient</span>: securityAudit.<span class="hljs-property">AuthClient</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">event: securityAudit.AuditEvent</span>) =&gt; {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func eventId= '</span> + event.<span class="hljs-property">eventId</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func content= '</span> + event.<span class="hljs-property">content</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Security_SecurityAudit_Auth_JsApi_Func metadata= '</span> + event.<span class="hljs-property">metadata</span>);</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  authClient = securityAudit.<span class="hljs-title function_">newAuthClient</span>(callback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'newAuthClient failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  securityAudit.<span class="hljs-title function_">deleteAuthClient</span>(authClient);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'deleteAuthClient failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section764412911237" device-type="2in1">queryAllProcesses<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section764412911237" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>queryAllProcesses(): string;</p> <p>查询获取所有的应用进程信息。</p> <p><strong>需要权限：</strong>ohos.permission.QUERY_AUDIT_EVENT</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.1" width="34.88%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.2" width="65.12%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="34.88%"><p>string</p> </td> <td class="cellrowborder" width="65.12%"><p>应用进程信息内容，内容为json格式字符串。例如：{"1": {}}。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>; </li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>; </li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SecurityAuditJsTest"</span>; </li><li><span class="hljs-keyword">try</span> { </li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'queryAllProcesses begin.'</span>); </li><li>  <span class="hljs-keyword">const</span> result = securityAudit.<span class="hljs-title function_">queryAllProcesses</span>();</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in queryAllProcesses.'</span>); </li><li>} <span class="hljs-keyword">catch</span> (err) { </li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>; </li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'queryAllProcesses failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>); </li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section203852132285" device-type="2in1">queryProcesses<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section203852132285" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>queryProcesses(pids: number[]): string;</p> <p>查询获取输入的PID的应用进程信息。</p> <p><strong>需要权限：</strong>ohos.permission.QUERY_AUDIT_EVENT</p> <p><strong>系统能力：</strong>SystemCapability.Security.SecurityAudit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p></p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.9.1.5.1.1" width="14.829999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.5.1.2" width="19.74%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.5.1.3" width="13.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.5.1.4" width="52.019999999999996%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.829999999999998%"><p>pids</p> </td> <td class="cellrowborder" width="19.74%"><p>number[]</p> </td> <td class="cellrowborder" width="13.41%"><p>是</p> </td> <td class="cellrowborder" width="52.019999999999996%"><p>要查询的进程ID组。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.1" width="34.88%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.2" width="65.12%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="34.88%"><p>string</p> </td> <td class="cellrowborder" width="65.12%"><p>应用进程信息内容，内容为json格式字符串。例如：{"1": {}}。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-securityaudit">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.14.1.3.1.1" width="15.160000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.14.1.3.1.2" width="84.84%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="15.160000000000002%"><p>201</p> </td> <td class="cellrowborder" width="84.84%"><p>check permission fail.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000001</p> </td> <td class="cellrowborder" width="84.84%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="15.160000000000002%"><p>1012000006</p> </td> <td class="cellrowborder" width="84.84%"><p>The number of queried processes exceeds the threshold.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-sxp-c106="" class="highlight-div"><div _ngcontent-sxp-c106="" class="highlight-div-header"><div _ngcontent-sxp-c106="" class="highlight-div-header-left"><div _ngcontent-sxp-c106="" class="handle-button expand-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sxp-c106="" class="highlight-div-header-right"><div _ngcontent-sxp-c106="" class="handle-button ai-button"></div><div _ngcontent-sxp-c106="" class="handle-button line-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sxp-c106="" class="handle-button theme-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sxp-c106="" class="handle-button copy-button"><div _ngcontent-sxp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sxp-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityAudit } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>; </li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>; </li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"SecurityAuditJsTest"</span>; </li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">pids</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];</li><li><span class="hljs-keyword">try</span> { </li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'queryProcesses begin.'</span>); </li><li>  <span class="hljs-keyword">const</span> result = securityAudit.<span class="hljs-title function_">queryProcesses</span>(pids);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in queryProcesses.'</span>); </li><li>} <span class="hljs-keyword">catch</span> (err) { </li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>; </li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'queryProcesses failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>); </li><li>}</li></ol></pre></div></div> </div> <p></p> </div> </div> <div></div></div>