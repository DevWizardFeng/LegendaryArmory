<h1 _ngcontent-sbu-c119="" class="doc-title ng-star-inserted" title="SoundPool (音频池)"> SoundPool (音频池) </h1>

<div _ngcontent-sbu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>音频池提供了短音频的加载、播放、音量设置、循环设置、停止播放、资源卸载等功能。</p>    <p>SoundPool需要和@ohos.multimedia.media配合使用，需要先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreatesoundpool10">media.createSoundPool</a>完成音频池实例的创建。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 10开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="playparameters" device-type="phone,2in1,tablet,wearable,tv">PlayParameters<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="playparameters" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示音频池播放参数设置。</p>     <p>通过设置播放相关参数，来控制播放的音量，循环次数，播放优先级等参数。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">loop</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置循环次数。</p>          <p>当loop≥0时，实际播放次数为loop+1。</p>          <p>当loop＜0时，表示一直循环。</p>          <p>默认值：0，表示仅播放一次。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">rate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置音频播放的倍速，具体倍速范围参照<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#audiorendererrate8">AudioRendererRate</a>。默认值：0。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">leftVolume</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置左声道音量，设置范围（0.0, 1.0）。默认值：1.0。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">rightVolume</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置右声道音量，设置范围（0.0, 1.0）。（当前不支持左右分别设置，将以左声道音量为准）。默认值：1.0。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">priority</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">音频流播放的优先级，0为最低优先级，数值越大优先级越高，通过相互比较大小确定播放优先级，设置范围为大于等于0的整数。默认值：0。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="errortype20" device-type="phone,2in1,tablet,wearable,tv">ErrorType<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="errortype20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>枚举，错误类型（用于区分错误发生阶段）。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">LOAD_ERROR</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示加载资源时发生错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PLAY_ERROR</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">表示播放资源时发生错误。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="errorinfo20" device-type="phone,2in1,tablet,wearable,tv">ErrorInfo<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="errorinfo20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>错误信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">errorCode</td>         <td class="cellrowborder" width="20%">T</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">错误码。errorCode的类型T为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#businesserror">BusinessError</a>类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">errorType</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#errortype20">ErrorType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">表示错误发生阶段。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">soundId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">发生错误的资源ID，load方法能够获取soundId。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">streamId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">发生错误的音频流ID，play方法能够获取streamId。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="soundpool" device-type="phone,2in1,tablet,wearable,tv">SoundPool<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="soundpool" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>音频池提供了系统声音的加载、播放、音量设置、循环设置、停止播放和资源卸载等功能，在调用SoundPool的接口前，需要先通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreatesoundpool10">media.createSoundPool</a>创建实例。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在使用SoundPool实例的方法时，建议开发者注册相关回调，主动获取当前状态变化。</p>       <ul>        <li><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#onloadcomplete">on('loadComplete')</a>：监听资源加载完成。</li>        <li><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#onplayfinishedwithstreamid18">on('playFinishedWithStreamId')</a>：监听播放完成，同时返回播放结束的音频的streamId。</li>        <li><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#onplayfinished">on('playFinished')</a>：监听播放完成。</li>        <li><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#onerror">on('error')</a>：监听错误事件。</li>        <li><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#onerroroccurred20">on('errorOccurred')</a>：监听错误事件，同时返回<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#errorinfo20">errorInfo</a>。</li>       </ul>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="load" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">load<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="load" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>load(uri: string, callback: AsyncCallback&lt;number&gt;): void</p>     <p>加载音频资源。使用callback方式异步获取资源ID，入参uri通过获取文件fd生成以"fd://"开头的文件描述字符串。</p>     <p>该方法不支持加载rawfile目录资源，需要通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#load-2">load(fd: number, offset: number, length: number, callback: AsyncCallback&lt;number&gt;): void</a>或者<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#load-3">load(fd: number, offset: number, length: number): Promise&lt;number&gt;</a>实现。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>将资源句柄（fd）或加载路径描述（uri）传递给音频池播放器之后，请不要通过该资源句柄或加载路径描述做其他读写操作，包括但不限于将同一个资源句柄或加载路径描述传递给多个音频池播放器。</p>       <p>同一时间通过同一个资源句柄或加载路径描述读写文件时存在竞争关系，将导致播放异常。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频文件的加载路径描述，一般以"fd://"开头的文件描述。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步音频资源加载返回的资源id，有效值大于0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">I/O error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>:<span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">file</span>: fileIo.<span class="hljs-property">File</span>;</li><li>    <span class="hljs-comment">// 获取fd的uri路径。</span></li><li>    fileIo.<span class="hljs-title function_">open</span>(<span class="hljs-string">'/test_01.mp3'</span>, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">file_: fileIo.File</span>) =&gt;</span> {</li><li>      file = file_;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"file fd: "</span> + file.<span class="hljs-property">fd</span>);</li><li>      uri = <span class="hljs-string">'fd://'</span> + (file.<span class="hljs-property">fd</span>).<span class="hljs-title function_">toString</span>();</li><li>      soundPool.<span class="hljs-title function_">load</span>(uri, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundId_: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load soundPool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in loading soundPool`</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(soundId_));</li><li>        }</li><li>      });</li><li>    }); <span class="hljs-comment">// '/test_01.mp3' 作为样例，使用时需要传入文件对应路径。</span></li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="load-1" device-type="phone,2in1,tablet,wearable,tv">load<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="load-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>load(uri: string): Promise&lt;number&gt;</p>     <p>加载音频资源。使用Promise方式异步获取资源ID，入参uri通过获取文件fd生成以"fd://"开头的文件描述字符串。</p>     <p>该方法不支持加载rawfile目录资源，需要通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#load-2">load(fd: number, offset: number, length: number, callback: AsyncCallback&lt;number&gt;): void</a>或者<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#load-3">load(fd: number, offset: number, length: number): Promise&lt;number&gt;</a>实现。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>将资源句柄（fd）或加载路径描述（uri）传递给音频池播放器之后，请不要通过该资源句柄或加载路径描述做其他读写操作，包括但不限于将同一个资源句柄或加载路径描述传递给多个音频池播放器。</p>       <p>同一时间通过同一个资源句柄或加载路径描述读写文件时存在竞争关系，将导致播放异常。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频文件的加载路径描述，一般以"fd://"开头的文件描述。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回资源的id，有效值大于0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">I/O error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>:<span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">soundID</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">file</span>: fileIo.<span class="hljs-property">File</span>;</li><li>    <span class="hljs-comment">// 获取fd的uri路径。</span></li><li>    fileIo.<span class="hljs-title function_">open</span>(<span class="hljs-string">'/test_01.mp3'</span>, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">file_: fileIo.File</span>) =&gt;</span> {</li><li>      file = file_;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"file fd: "</span> + file.<span class="hljs-property">fd</span>);</li><li>      uri = <span class="hljs-string">'fd://'</span> + (file.<span class="hljs-property">fd</span>).<span class="hljs-title function_">toString</span>();</li><li>      soundPool.<span class="hljs-title function_">load</span>(uri).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">soundId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in loading uri'</span>);</li><li>        soundID = soundId;</li><li>      }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to load soundPool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>      });</li><li>    }); <span class="hljs-comment">// '/test_01.mp3' 作为样例，使用时需要传入文件对应路径。</span></li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="load-2" device-type="phone,2in1,tablet,wearable,tv">load<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="load-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>load(fd: number, offset: number, length: number, callback: AsyncCallback&lt;number&gt;): void</p>     <p>加载音频资源。使用callback方式异步获取资源ID，入参可手动传入资源信息或通过读取应用内置资源自动获取。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>将资源句柄（fd）或加载路径描述（uri）传递给音频池播放器之后，请不要通过该资源句柄或加载路径描述做其他读写操作，包括但不限于将同一个资源句柄或加载路径描述传递给多个音频池播放器。</p>       <p>同一时间通过同一个资源句柄或加载路径描述读写文件时存在竞争关系，将导致播放异常。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">fd</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源句柄，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#getrawfd9">resourceManager.getRawFd</a>获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">offset</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源偏移量，需要基于预置资源的信息输入，非法值会造成音视频资源解析错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源长度，需要基于预置资源的信息输入，非法值会造成音视频资源解析错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">获取回调的soundID，有效值大于0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">I/O error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例1：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">file</span>: fileIo.<span class="hljs-property">File</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">soundID</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fileSize</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">// 通过fileIo.stat()获取size值。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>    <span class="hljs-comment">// 获取fd的描述信息，test_01.mp3不是rawfile目录资源下面的音频。</span></li><li>    fileIo.<span class="hljs-title function_">open</span>(<span class="hljs-string">'/test_01.mp3'</span>, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">file_: fileIo.File</span>) =&gt;</span> {</li><li>      file = file_;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"file fd: "</span> + file.<span class="hljs-property">fd</span>);</li><li>      uri = <span class="hljs-string">'fd://'</span> + (file.<span class="hljs-property">fd</span>).<span class="hljs-title function_">toString</span>();</li><li>      soundPool.<span class="hljs-title function_">load</span>(file.<span class="hljs-property">fd</span>, <span class="hljs-number">0</span>, fileSize, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundId_: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load soundPool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          soundID = soundId_;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in loading soundId:'</span> + soundId_);</li><li>        }</li><li>      });</li><li>    }); <span class="hljs-comment">// '/test_01.mp3' 作为样例，使用时需要传入文件对应路径。</span></li><li>  }</li><li>});</li></ol></pre></div></div>     <p><strong>示例2：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-comment">// 创建soundPool实例。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>    <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>    <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">soundID</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-keyword">async</span> (<span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">soundPool_</span>: media.<span class="hljs-property">SoundPool</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      soundPool = soundPool_;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>      <span class="hljs-comment">// test_01.mp3为rawfile目录资源下面的音频。</span></li><li>      <span class="hljs-keyword">let</span> fileDescriptor = <span class="hljs-keyword">await</span> context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFd</span>(<span class="hljs-string">'test_01.mp3'</span>);</li><li>      soundPool.<span class="hljs-title function_">load</span>(fileDescriptor.<span class="hljs-property">fd</span>, fileDescriptor.<span class="hljs-property">offset</span>, fileDescriptor.<span class="hljs-property">length</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundId_: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load soundPool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          soundID = soundId_;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in loading soundId:'</span> + soundId_);</li><li>        }</li><li>      });</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="load-3" device-type="phone,2in1,tablet,wearable,tv">load<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="load-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>load(fd: number, offset: number, length: number): Promise&lt;number&gt;</p>     <p>加载音频资源。使用Promise方式异步获取资源ID，入参可手动传入资源信息或通过读取应用内置资源自动获取。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>将资源句柄（fd）或加载路径描述（uri）传递给音频池播放器之后，请不要通过该资源句柄或加载路径描述做其他读写操作，包括但不限于将同一个资源句柄或加载路径描述传递给多个音频池播放器。</p>       <p>同一时间通过同一个资源句柄或加载路径描述读写文件时存在竞争关系，将导致播放异常。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">fd</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源句柄，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#getrawfd9">resourceManager.getRawFd</a>获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">offset</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源偏移量，需要基于预置资源的信息输入，非法值会造成音视频资源解析错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源长度，需要基于预置资源的信息输入，非法值会造成音视频资源解析错误。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回soundID，有效值大于0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">I/O error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例1：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">file</span>: fileIo.<span class="hljs-property">File</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">soundID</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fileSize</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">// 通过fileIo.stat()获取size值。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>    <span class="hljs-comment">// 获取fd的描述信息，test_01.mp3不是rawfile目录资源下面的音频。</span></li><li>    fileIo.<span class="hljs-title function_">open</span>(<span class="hljs-string">'/test_01.mp3'</span>, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">file_: fileIo.File</span>) =&gt;</span> {</li><li>      file = file_;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"file fd: "</span> + file.<span class="hljs-property">fd</span>);</li><li>      uri = <span class="hljs-string">'fd://'</span> + (file.<span class="hljs-property">fd</span>).<span class="hljs-title function_">toString</span>();</li><li>      soundPool.<span class="hljs-title function_">load</span>(file.<span class="hljs-property">fd</span>, <span class="hljs-number">0</span>, fileSize).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">soundId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in loading soundpool'</span>);</li><li>        soundID = soundId;</li><li>      }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to load soundpool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>      });</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>     <p><strong>示例2：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-comment">// 创建soundPool实例。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>    <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>    <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">soundID</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-keyword">async</span> (<span class="hljs-attr">error</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">soundPool_</span>: media.<span class="hljs-property">SoundPool</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      soundPool = soundPool_;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>      <span class="hljs-comment">// test_01.mp3为rawfile目录资源下面的音频。</span></li><li>      <span class="hljs-keyword">let</span> fileDescriptor = <span class="hljs-keyword">await</span> context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFd</span>(<span class="hljs-string">'test_01.mp3'</span>);</li><li>      soundPool.<span class="hljs-title function_">load</span>(fileDescriptor.<span class="hljs-property">fd</span>, fileDescriptor.<span class="hljs-property">offset</span>, fileDescriptor.<span class="hljs-property">length</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">soundId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in loading soundpool'</span>);</li><li>        soundID = soundId;</li><li>      }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to load soundpool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="play" device-type="phone,2in1,tablet,wearable,tv">play<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="play" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>play(soundID: number, params: PlayParameters, callback: AsyncCallback&lt;number&gt;): void</p>     <p>播放音频资源，获取音频流streamID。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">soundID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源ID，通过load方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">params</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#playparameters">PlayParameters</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">play播放相关参数的设置。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">获取回调的音频流ID，有效值大于0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">soundID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">playParameters</span>: media.<span class="hljs-property">PlayParameters</span> = {</li><li>      <span class="hljs-attr">loop</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// 循环3次。</span></li><li>      <span class="hljs-attr">rate</span>: audio.<span class="hljs-property">AudioRendererRate</span>.<span class="hljs-property">RENDER_RATE_NORMAL</span>, <span class="hljs-comment">// 正常倍速。</span></li><li>      <span class="hljs-attr">leftVolume</span>: <span class="hljs-number">0.5</span>, <span class="hljs-comment">// range = 0.0-1.0</span></li><li>      <span class="hljs-attr">rightVolume</span>: <span class="hljs-number">0.5</span>, <span class="hljs-comment">// range = 0.0-1.0</span></li><li>      <span class="hljs-attr">priority</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 最低优先级。</span></li><li>    }</li><li>    soundPool.<span class="hljs-title function_">play</span>(soundID, playParameters, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, streamId: number</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to play soundpool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        streamID = streamId;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in playing soundpool, streamId:'</span> + streamId);</li><li>      }</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="play-1" device-type="phone,2in1,tablet,wearable,tv">play<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="play-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>play(soundID: number, callback: AsyncCallback&lt;number&gt;): void</p>     <p>使用默认参数播放音频资源，获取音频流streamID。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">soundID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源ID，通过load方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">获取回调的音频流ID，有效值大于0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">soundID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    soundPool.<span class="hljs-title function_">play</span>(soundID,  <span class="hljs-function">(<span class="hljs-params">error: BusinessError, streamId: number</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to play soundpool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        streamID = streamId;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in playing soundpool, streamId:'</span> + streamId);</li><li>      }</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="play-2" device-type="phone,2in1,tablet,wearable,tv">play<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="play-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>play(soundID: number, params?: PlayParameters): Promise&lt;number&gt;</p>     <p>播放音频资源，获取音频流streamID。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">soundID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源ID，通过load方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">params</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#playparameters">PlayParameters</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">play播放相关参数的设置。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回音频流ID，有效值大于0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">soundID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">playParameters</span>: media.<span class="hljs-property">PlayParameters</span> = {</li><li>      <span class="hljs-attr">loop</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// 循环4次。</span></li><li>      <span class="hljs-attr">rate</span>: audio.<span class="hljs-property">AudioRendererRate</span>.<span class="hljs-property">RENDER_RATE_NORMAL</span>, <span class="hljs-comment">// 正常倍速。</span></li><li>      <span class="hljs-attr">leftVolume</span>: <span class="hljs-number">0.5</span>, <span class="hljs-comment">// range = 0.0-1.0。</span></li><li>      <span class="hljs-attr">rightVolume</span>: <span class="hljs-number">0.5</span>, <span class="hljs-comment">// range = 0.0-1.0。</span></li><li>      <span class="hljs-attr">priority</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 最低优先级。</span></li><li>    }</li><li>
</li><li>    soundPool.<span class="hljs-title function_">play</span>(soundID, playParameters).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">streamId: number</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in playing soundpool'</span>);</li><li>      streamID = streamId;</li><li>    },<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to play soundpool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="stop" device-type="phone,2in1,tablet,wearable,tv">stop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(streamID: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>停止播放音频资源。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">streamID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流ID，通过play方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步音频池stop的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 先调用play方法给拿到对应的streamID。</span></li><li>    soundPool.<span class="hljs-title function_">stop</span>(streamID, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to stop soundpool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in stopping soundpool'</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="stop-1" device-type="phone,2in1,tablet,wearable,tv">stop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(streamID: number): Promise&lt;void&gt;</p>     <p>停止streamID对应的音频播放。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">streamID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流ID，通过play方法获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise方式返回，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 先调用play方法给拿到对应的streamID。</span></li><li>    soundPool.<span class="hljs-title function_">stop</span>(streamID).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in stopping soundpool'</span>);</li><li>    }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to stop soundpool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setloop" device-type="phone,2in1,tablet,wearable,tv">setLoop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setloop" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setLoop(streamID: number, loop: number, callback: AsyncCallback&lt;void&gt;): void;</p>     <p>设置循环模式。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">streamID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流ID，通过play方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">loop</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置循环次数。</p>          <p>当loop≥0时，实际播放次数为loop+1。</p>          <p>当loop＜0时，表示一直循环。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步setLoop的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 先通过调用play方法获取到对应的streamID。</span></li><li>    <span class="hljs-comment">// 设置循环2次。</span></li><li>    soundPool.<span class="hljs-title function_">setLoop</span>(streamID, <span class="hljs-number">2</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to setLoop soundPool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setLoopping soundpool, streamID:'</span> + streamID);</li><li>      }</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setloop-1" device-type="phone,2in1,tablet,wearable,tv">setLoop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setloop-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setLoop(streamID: number, loop: number): Promise&lt;void&gt;</p>     <p>设置循环模式。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">streamID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流ID，通过play方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">loop</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置循环次数。</p>          <p>当loop≥0时，实际播放次数为loop+1。</p>          <p>当loop＜0时，表示一直循环。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 先通过调用play方法获取到对应的streamID。</span></li><li>    <span class="hljs-comment">// 设置循环1次。</span></li><li>    soundPool.<span class="hljs-title function_">setLoop</span>(streamID, <span class="hljs-number">1</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setLoopping soundpool, streamID:'</span> + streamID);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to setLoop soundPool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setpriority" device-type="phone,2in1,tablet,wearable,tv">setPriority<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setpriority" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setPriority(streamID: number, priority: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>设置音频流播放的优先级。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">streamID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流ID，通过play方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">优先级，0表示最低优先级。设置范围为大于等于0的整数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步音频池setPriority方法的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 先调用play方法获取到对应资源的streamID。</span></li><li>    <span class="hljs-comment">// 给对应的streamID资源设置优先级为1。</span></li><li>    soundPool.<span class="hljs-title function_">setPriority</span>(streamID, <span class="hljs-number">1</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to setPriority soundPool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setPriority soundpool, streamID:'</span> + streamID);</li><li>      }</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setpriority-1" device-type="phone,2in1,tablet,wearable,tv">setPriority<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setpriority-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setPriority(streamID: number, priority: number): Promise&lt;void&gt;</p>     <p>设置音频流优先级。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">streamID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流ID，通过play方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">优先级，0表示最低优先级。设置范围为大于等于0的整数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 先调用play方法获取到对应资源的streamID。</span></li><li>    <span class="hljs-comment">// 给对应的streamID资源设置优先级为1。</span></li><li>
</li><li>    soundPool.<span class="hljs-title function_">setPriority</span>(streamID, <span class="hljs-number">1</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setPriority soundpool'</span>);</li><li>    }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to setPriority soundPool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setrate" device-type="phone,2in1,tablet,wearable,tv">setRate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setrate" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setRate(streamID: number, rate: audio.AudioRendererRate, callback: AsyncCallback&lt;void&gt;): void</p>     <p>设置音频流播放速率。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">streamID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流ID，通过play方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">rate</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#audiorendererrate8">audio.AudioRendererRate</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频rate相关参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步音频池setRate方法的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">selectedAudioRendererRate</span>: audio.<span class="hljs-property">AudioRendererRate</span> = audio.<span class="hljs-property">AudioRendererRate</span>.<span class="hljs-property">RENDER_RATE_NORMAL</span>; <span class="hljs-comment">// 默认正常速率</span></li><li>    <span class="hljs-comment">// 先调用play方法获取到对应资源的streamID。</span></li><li>    soundPool.<span class="hljs-title function_">setRate</span>(streamID, selectedAudioRendererRate, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to setRate soundPool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setRate success, streamID:'</span> + streamID);</li><li>      }</li><li>    })</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setrate-1" device-type="phone,2in1,tablet,wearable,tv">setRate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setrate-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setRate(streamID: number, rate: audio.AudioRendererRate): Promise&lt;void&gt;</p>     <p>设置音频流的播放速率。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">streamID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流ID，通过play方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">rate</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#audiorendererrate8">audio.AudioRendererRate</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频rate相关参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">selectedAudioRendererRate</span>: audio.<span class="hljs-property">AudioRendererRate</span> = audio.<span class="hljs-property">AudioRendererRate</span>.<span class="hljs-property">RENDER_RATE_NORMAL</span>; <span class="hljs-comment">// 默认正常速率</span></li><li>    <span class="hljs-comment">// 先调用play方法获取到对应资源的streamID。</span></li><li>    soundPool.<span class="hljs-title function_">setRate</span>(streamID, selectedAudioRendererRate).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setRate soundpool'</span>);</li><li>    }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to setRate soundpool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setvolume" device-type="phone,2in1,tablet,wearable,tv">setVolume<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setvolume" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setVolume(streamID: number, leftVolume: number, rightVolume: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>设置音频流播放音量。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">streamID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流ID，通过play方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">leftVolume</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">左声道音量，设置范围为0.0-1.0之间。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">rightVolume</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">右声道音量，设置范围为0.0-1.0之间，当前右声道设置无效，以左声道为准。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步音频池setVolume方法的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 先调用play方法获取到对应资源的streamID。</span></li><li>    <span class="hljs-comment">// 设置音量为0.5。</span></li><li>    soundPool.<span class="hljs-title function_">setVolume</span>(streamID, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to setVolume soundPool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setVolume soundpool, streamID:'</span> + streamID);</li><li>      }</li><li>    })</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setvolume-1" device-type="phone,2in1,tablet,wearable,tv">setVolume<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setvolume-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setVolume(streamID: number, leftVolume: number, rightVolume: number): Promise&lt;void&gt;</p>     <p>设置音频流的播放音量。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">streamID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流ID，通过play方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">leftVolume</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">左声道音量，设置范围为0.0-1.0之间。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">rightVolume</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">右声道音量，设置范围为0.0-1.0之间，当前右声道设置无效，以左声道为准。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">streamID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 先调用play方法获取到对应资源的streamID。</span></li><li>
</li><li>    soundPool.<span class="hljs-title function_">setVolume</span>(streamID, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setVolume soundpool'</span>);</li><li>    }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to setVolume soundPool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="unload" device-type="phone,2in1,tablet,wearable,tv">unload<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unload" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unload(soundID: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>卸载音频资源。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">soundID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源ID，通过load方法获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步音频池unload方法的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">I/O error. Return by callback.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">soundID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 先调用load方法获取到对应资源的soundID。</span></li><li>    soundPool.<span class="hljs-title function_">unload</span>(soundID, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unload soundPool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succceeded in unload soundPool'</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="unload-1" device-type="phone,2in1,tablet,wearable,tv">unload<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unload-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unload(soundID: number): Promise&lt;void&gt;</p>     <p>卸载音频资源。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">soundID</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源ID，通过load方法获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">I/O error. Return by promise.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">soundID</span>: number = <span class="hljs-number">0</span>;</li><li>    <span class="hljs-comment">// 先调用load方法获取到对应资源的soundID。</span></li><li>
</li><li>    soundPool.<span class="hljs-title function_">unload</span>(soundID).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succceeded in unload soundPool'</span>);</li><li>    }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to unload soundPool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="release" device-type="phone,2in1,tablet,wearable,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(callback: AsyncCallback&lt;void&gt;): void</p>     <p>释放音频池实例。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步音频池release方法的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by callback.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool.<span class="hljs-title function_">release</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to release soundPool: errCode is <span class="hljs-subst">${error.code}</span>, errMessage is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing soundPool'</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="release-1" device-type="phone,2in1,tablet,wearable,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(): Promise&lt;void&gt;</p>     <p>释放音频池实例。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died. Return by promise.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool.<span class="hljs-title function_">release</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing soundPool'</span>);</li><li>    }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to release soundPool and catch error is '</span> + err.<span class="hljs-property">message</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="onloadcomplete" device-type="phone,2in1,tablet,wearable,tv">on('loadComplete')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onloadcomplete" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'loadComplete', callback: Callback&lt;number&gt;): void</p>     <p>音频池资源加载完成监听。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">支持的事件：'loadComplete'，对应的ID加载完成会触发此回调。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">对应资源加载完成的资源ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool.<span class="hljs-title function_">on</span>(<span class="hljs-string">'loadComplete'</span>, <span class="hljs-function">(<span class="hljs-params">soundId: number</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in loadComplete, soundId：'</span> + soundId);</li><li>    })</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offloadcomplete" device-type="phone,2in1,tablet,wearable,tv">off('loadComplete')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offloadcomplete" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'loadComplete'): void</p>     <p>取消监听资源的加载完成。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消注册的事件：'loadComplete'。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool.<span class="hljs-title function_">off</span>(<span class="hljs-string">'loadComplete'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="onplayfinishedwithstreamid18" device-type="phone,2in1,tablet,wearable,tv">on('playFinishedWithStreamId')<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onplayfinishedwithstreamid18" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'playFinishedWithStreamId', callback: Callback&lt;number&gt;): void</p>     <p>音频池资源播放完成监听，同时返回播放结束的音频的streamId。</p>     <p>当仅单独注册<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#onplayfinished">on('playFinished')</a>事件回调或者<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#onplayfinishedwithstreamid18">on('playFinishedWithStreamId')</a>事件回调时，当音频播放完成的时候，都会触发注册的回调。</p>     <p>当同时注册<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#onplayfinished">on('playFinished')</a>事件回调和<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#onplayfinishedwithstreamid18">on('playFinishedWithStreamId')</a>事件回调时，当音频播放完成的时候，仅会触发'playFinishedWithStreamId'事件回调，不会触发'playFinished'事件回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">支持的事件：'playFinishedWithStreamId'，音频流播放完成会触发此回调，并返回播放完成的音频的streamId。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步'playFinishedWithStreamId'的回调方法。返回播放完成的音频的streamId。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool_</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool_ = soundPool;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool_.<span class="hljs-title function_">on</span>(<span class="hljs-string">'playFinishedWithStreamId'</span>, <span class="hljs-function">(<span class="hljs-params">streamId</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The stream with streamId: '</span> + streamId + <span class="hljs-string">' has finished playing.'</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offplayfinishedwithstreamid18" device-type="phone,2in1,tablet,wearable,tv">off('playFinishedWithStreamId')<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offplayfinishedwithstreamid18" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'playFinishedWithStreamId'): void</p>     <p>取消监听音频池资源播放完成。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消注册的事件：'playFinishedWithStreamId'。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool_</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool_ = soundPool;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool_.<span class="hljs-title function_">off</span>(<span class="hljs-string">'playFinishedWithStreamId'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="onplayfinished" device-type="phone,2in1,tablet,wearable,tv">on('playFinished')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onplayfinished" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'playFinished', callback: Callback&lt;void&gt;): void</p>     <p>音频池资源播放完成监听。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">支持的事件：'playFinished'，音频流播放完成会触发此回调。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步'playFinished'的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool.<span class="hljs-title function_">on</span>(<span class="hljs-string">'playFinished'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in playFinished'</span>);</li><li>    });</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offplayfinished" device-type="phone,2in1,tablet,wearable,tv">off('playFinished')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offplayfinished" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'playFinished'): void</p>     <p>取消监听音频池资源播放完成。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消注册的事件：'playFinished'。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool.<span class="hljs-title function_">off</span>(<span class="hljs-string">'playFinished'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="onerror" device-type="phone,2in1,tablet,wearable,tv">on('error')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onerror" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'error', callback: ErrorCallback): void</p>     <p>监听<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#soundpool">SoundPool</a>的错误事件，该事件仅用于错误提示。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">错误事件回调类型，支持的事件：'error'，用户操作和系统都会触发此事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">ErrorCallback</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">错误事件回调方法：使用播放器的过程中发生错误，会提供错误码ID和错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'error happened,and error message is :'</span> + error.<span class="hljs-property">message</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'error happened,and error code is :'</span> + error.<span class="hljs-property">code</span>);</li><li>    })</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offerror" device-type="phone,2in1,tablet,wearable,tv">off('error')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offerror" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'error'): void</p>     <p>取消监听音频池的错误事件。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">错误事件回调类型，取消注册的事件：'error'。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool.<span class="hljs-title function_">off</span>(<span class="hljs-string">'error'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="onerroroccurred20" device-type="phone,2in1,tablet,wearable,tv">on('errorOccurred')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onerroroccurred20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'errorOccurred', callback: Callback&lt;ErrorInfo&gt;): void</p>     <p>监听<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#soundpool">SoundPool</a>的错误事件，并返回包含错误码、错误发生阶段、资源ID和音频流ID的<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#errorinfo20">ErrorInfo</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'errorOccurred'，当用户或系统操作导致错误，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#errorinfo20">ErrorInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">错误事件回调方法。在使用播放器的过程中发生错误时，提供错误信息<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#errorinfo20">ErrorInfo</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool.<span class="hljs-title function_">on</span>(<span class="hljs-string">'errorOccurred'</span>, <span class="hljs-function">(<span class="hljs-params">errorInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'error happened,and error message is :'</span> + errorInfo.<span class="hljs-property">errorCode</span>.<span class="hljs-property">message</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'error happened,and error code is :'</span> + errorInfo.<span class="hljs-property">errorCode</span>.<span class="hljs-property">code</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'error happened,and errorType is :'</span> + errorInfo.<span class="hljs-property">errorType</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'error happened,and soundId is :'</span> + errorInfo.<span class="hljs-property">soundId</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'error happened,and streamId is :'</span> + errorInfo.<span class="hljs-property">streamId</span>);</li><li>    })</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offerroroccurred20" device-type="phone,2in1,tablet,wearable,tv">off('errorOccurred')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offerroroccurred20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'errorOccurred', callback?: Callback&lt;ErrorInfo&gt;): void</p>     <p>取消监听音频池的错误事件。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，取消注册的事件为'errorOccurred'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#errorinfo20">ErrorInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">错误事件回调方法。在使用播放器的过程中发生错误时，提供错误信息<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#errorinfo20">ErrorInfo</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-sbu-c106="" class="highlight-div"><div _ngcontent-sbu-c106="" class="highlight-div-header"><div _ngcontent-sbu-c106="" class="highlight-div-header-left"><div _ngcontent-sbu-c106="" class="handle-button expand-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-sbu-c106="" class="highlight-div-header-right"><div _ngcontent-sbu-c106="" class="handle-button ai-button"></div><div _ngcontent-sbu-c106="" class="handle-button line-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-sbu-c106="" class="handle-button theme-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-sbu-c106="" class="handle-button copy-button"><div _ngcontent-sbu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-sbu-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 创建soundPool实例。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">soundPool</span>: media.<span class="hljs-property">SoundPool</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioRendererInfo</span>: audio.<span class="hljs-property">AudioRendererInfo</span> = {</li><li>  <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_MUSIC</span>,</li><li>  <span class="hljs-attr">rendererFlags</span>: <span class="hljs-number">1</span></li><li>}</li><li>media.<span class="hljs-title function_">createSoundPool</span>(<span class="hljs-number">5</span>, audioRendererInfo, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, soundPool_: media.SoundPool</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createSoundPool`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    soundPool = soundPool_;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in createSoundPool`</span>);</li><li>    soundPool.<span class="hljs-title function_">off</span>(<span class="hljs-string">'errorOccurred'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>   </div>   <div></div></div>