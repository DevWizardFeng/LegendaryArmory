<h1 _ngcontent-lpy-c119="" class="doc-title ng-star-inserted" title="TextTimer"> TextTimer </h1>

<div _ngcontent-lpy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>通过文本显示计时信息并控制其计时器状态的组件。</p> <p>组件不可见时，时间变动将停止，组件的可见状态基于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-visible-area-change-event#onvisibleareachange">onVisibleAreaChange</a>处理，可见阈值ratios大于0即视为可见状态。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>该组件从API version 8开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>  </div></div></div>  <div class="tiledSection"><h2 id="子组件" device-type="phone,2in1,tablet,wearable,tv">子组件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="子组件" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>无</p> </div>  <div class="tiledSection"><h2 id="接口" device-type="phone,2in1,tablet,wearable,tv">接口<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="接口" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>TextTimer(options?: TextTimerOptions)</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-texttimer#texttimeroptions对象说明">TextTimerOptions</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">通过文本显示计时信息并控制其计时器状态的组件参数。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="texttimeroptions对象说明" device-type="phone,2in1,tablet,wearable,tv">TextTimerOptions对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="texttimeroptions对象说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于构建TextTimer组件的选项。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">isCountDown</td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>倒计时开关。值为true时，计时器开启倒计时，例如从30秒 ~ 0秒。值为false时，计时器开始计时，例如从0秒 ~ 30秒。</p> <p>默认值：false</p> </td> </tr> <tr><td class="cellrowborder" width="20%">count</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%"><p>计时器时间（isCountDown为true时生效），单位为毫秒。最长不超过86400000毫秒（24小时）。 0&lt;count&lt;86400000时，count值为计时器初始值。否则，使用默认值为计时器初始值。</p> <p>默认值：60000</p> </td> </tr> <tr><td class="cellrowborder" width="20%">controller</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-texttimer#texttimercontroller">TextTimerController</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">TextTimer控制器。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>除支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-component-general-attributes">通用属性</a>外，还支持以下属性：</p> </div>  <div class="tiledSection"><h3 id="format" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">format<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="format" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>format(value: string)</p> <p>设置自定义格式，需至少包含一个HH、mm、ss、SS中的关键字。使用yy、MM、dd等日期格式时，使用默认值。</p> <p>计时器更新频率按format最小单位处理，例如：format设置为'HH:mm'时，更新频率为一分钟。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>自定义格式。</p> <p>默认值：'HH:mm:ss.SS'</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="fontcolor" device-type="phone,2in1,tablet,wearable,tv">fontColor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fontcolor" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>fontColor(value: ResourceColor)</p> <p>设置字体颜色。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor">ResourceColor</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">字体颜色。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="fontsize" device-type="phone,2in1,tablet,wearable,tv">fontSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fontsize" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>fontSize(value: Length)</p> <p>设置字体大小。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#length">Length</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">字体大小。fontSize为number类型时，使用fp单位。字体默认大小16fp。不支持设置百分比字符串。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="fontstyle" device-type="phone,2in1,tablet,wearable,tv">fontStyle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fontstyle" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>fontStyle(value: FontStyle)</p> <p>设置字体样式。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#fontstyle">FontStyle</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>字体样式。</p> <p>默认值：FontStyle.Normal</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="fontweight" device-type="phone,2in1,tablet,wearable,tv">fontWeight<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fontweight" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>fontWeight(value: number | FontWeight | ResourceStr)</p> <p>设置文本的字体粗细，设置过大可能会导致不同字体下的文字出现截断。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">number | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#fontweight">FontWeight</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>文本的字体粗细，number类型取值范围为[100, 900]，取值间隔为100，取值越大，字体越粗。number类型取值范围外的默认值为400。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a>类型仅支持number类型取值的字符串形式，例如"400"，以及"bold"、"bolder"、"lighter"、"regular"、"medium"，分别对应FontWeight中相应的枚举值。</p> <p>默认值：FontWeight.Normal </p> <p>从API version 20开始，支持Resource类型。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="fontfamily" device-type="phone,2in1,tablet,wearable,tv">fontFamily<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fontfamily" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>fontFamily(value: ResourceStr)</p> <p>设置字体列表。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>字体列表。默认字体为'HarmonyOS Sans'。</p> <p>应用当前支持'HarmonyOS Sans'字体和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-font">注册自定义字体</a>。</p> <p>卡片当前仅支持'HarmonyOS Sans'字体。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="textshadow11" device-type="phone,2in1,tablet,wearable,tv">textShadow<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="textshadow11" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>textShadow(value: ShadowOptions | Array&lt;ShadowOptions&gt;)</p> <p>设置文字阴影效果。该接口支持以数组形式入参，实现多重文字阴影。不支持fill字段, 不支持智能取色模式。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 12开始，该接口支持在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-attribute-modifier#attributemodifier">attributeModifier</a>中调用。</p>  </div></div></div> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-image-effect#shadowoptions对象说明">ShadowOptions</a> | Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-image-effect#shadowoptions对象说明">ShadowOptions</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">文字阴影效果。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="contentmodifier12" device-type="phone,2in1,tablet,wearable,tv">contentModifier<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="contentmodifier12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>contentModifier(modifier: ContentModifier&lt;TextTimerConfiguration&gt;)</p> <p>定制TextTimer内容区的方法。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">modifier</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-texttimer#texttimerconfiguration12对象说明">ContentModifier&lt;TextTimerConfiguration&gt;</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>在TextTimer组件上，定制内容区的方法。</p> <p>modifier： 内容修改器，开发者需要自定义class实现ContentModifier接口。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="事件" device-type="phone,2in1,tablet,wearable,tv">事件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="事件" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="ontimer" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">onTimer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ontimer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onTimer(event: (utc: number, elapsedTime: number) =&gt; void)</p> <p>时间文本发生变化时触发该事件。锁屏状态和应用后台状态下不会触发该事件。</p> <p>设置高精度的format（SSS、SS）时，回调间隔可能会出现波动。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">utc</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">Linux时间戳，即自1970年1月1日起经过的时间，单位为设置格式的最小单位。</td> </tr> <tr><td class="cellrowborder" width="25%">elapsedTime</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">计时器经过的时间，单位为设置格式的最小单位。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="texttimercontroller" device-type="phone,2in1,tablet,wearable,tv">TextTimerController<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="texttimercontroller" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>TextTimer组件的控制器，用于控制文本计时器。一个TextTimer组件仅支持绑定一个控制器，组件创建完成后相关指令才能被调用。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> </div>  <div class="tiledSection"><h3 id="导入对象" class="firsth2">导入对象<i class="anchor-icon anchor-icon-link" anchorid="导入对象" tips="复制节点链接"></i></h3><div _ngcontent-lpy-c106="" class="highlight-div"><div _ngcontent-lpy-c106="" class="highlight-div-header"><div _ngcontent-lpy-c106="" class="highlight-div-header-left"><div _ngcontent-lpy-c106="" class="handle-button expand-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpy-c106="" class="highlight-div-header-right"><div _ngcontent-lpy-c106="" class="handle-button ai-button"></div><div _ngcontent-lpy-c106="" class="handle-button line-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpy-c106="" class="handle-button theme-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpy-c106="" class="handle-button copy-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>textTimerController: TextTimerController = new <span class="hljs-built_in">TextTimerController</span>();</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="constructor" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p> <p>TextTimerController的构造函数。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> </div>  <div class="tiledSection"><h3 id="start" device-type="phone,2in1,tablet,wearable,tv">start<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start()</p> <p>计时开始。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> </div>  <div class="tiledSection"><h3 id="pause" device-type="phone,2in1,tablet,wearable,tv">pause<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pause" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause()</p> <p>计时暂停。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> </div>  <div class="tiledSection"><h3 id="reset" device-type="phone,2in1,tablet,wearable,tv">reset<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reset" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>reset()</p> <p>重置计时器。</p> <p><strong>卡片能力：</strong> 从API version 10开始，该接口支持在ArkTS卡片中使用。</p> <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> </div>  <div class="tiledSection"><h2 id="texttimerconfiguration12对象说明" device-type="phone,2in1,tablet,wearable,tv">TextTimerConfiguration<sup>12+</sup>对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="texttimerconfiguration12对象说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>ContentModifier接口使用的TextTimer配置。</p> <p>开发者需要自定义class实现ContentModifier接口。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.6.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">count</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%"><p>计时器时间（isCountDown为true时生效），单位为毫秒。最长不超过86400000毫秒（24小时）。 0&lt;count&lt;86400000时，count值为倒计时初始值。否则，使用默认值为倒计时初始值。</p> <p> 默认值：60000。</p> </td> </tr> <tr><td class="cellrowborder" width="20%">isCountDown</td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%"><p>是否倒计时。值为true时，计时器开启倒计时，例如从30秒 ~ 0秒。值为false时，计时器开始计时，例如从0秒 ~ 30秒。</p> <p> 默认值：false</p> </td> </tr> <tr><td class="cellrowborder" width="20%">started</td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是否已经开始了计时。默认值：false， 表示未开始计时。</td> </tr> <tr><td class="cellrowborder" width="20%">elapsedTime</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">计时器经过的时间，单位为设置格式的最小单位。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="示例" device-type="phone,2in1,tablet,wearable,tv">示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="示例1支持手动启停的文本计时器" class="firsth2">示例1（支持手动启停的文本计时器）<i class="anchor-icon anchor-icon-link" anchorid="示例1支持手动启停的文本计时器" tips="复制节点链接"></i></h3><p>该示例展示了TextTimer组件的基本使用方法，通过<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-texttimer#format">format</a>属性设置计时器的文本显示格式。</p> <p>用户可以通过点击"start"、"pause"、"reset"按钮，开启、暂停、重置计时器。</p> <div _ngcontent-lpy-c106="" class="highlight-div"><div _ngcontent-lpy-c106="" class="highlight-div-header"><div _ngcontent-lpy-c106="" class="highlight-div-header-left"><div _ngcontent-lpy-c106="" class="handle-button expand-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpy-c106="" class="highlight-div-header-right"><div _ngcontent-lpy-c106="" class="handle-button ai-button"></div><div _ngcontent-lpy-c106="" class="handle-button line-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpy-c106="" class="handle-button theme-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpy-c106="" class="handle-button copy-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TextTimerExample</span> {</li><li>  <span class="hljs-attr">textTimerController</span>: <span class="hljs-title class_">TextTimerController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextTimerController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">format</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'mm:ss.SS'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">TextTimer</span>({ <span class="hljs-attr">isCountDown</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">30000</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textTimerController</span> })</li><li>        .<span class="hljs-title function_">format</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">format</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onTimer</span>(<span class="hljs-function">(<span class="hljs-params">utc: <span class="hljs-built_in">number</span>, elapsedTime: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'textTimer notCountDown utc is：'</span> + utc + <span class="hljs-string">', elapsedTime: '</span> + elapsedTime);</li><li>        })</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"start"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">textTimerController</span>.<span class="hljs-title function_">start</span>();</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"pause"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">textTimerController</span>.<span class="hljs-title function_">pause</span>();</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"reset"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">textTimerController</span>.<span class="hljs-title function_">reset</span>();</li><li>        })</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="103" originwidth="241" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115658.49687272780239609495114441958213:50001231000000:2800:CC1FFF066BD0E2377EFA1D8BD4D1CD52DC7D668912F1BEA8F6FE41BA9BAD13B2.gif" class="notEnlarge" width="241" height="103"></span></p> </div>  <div class="tiledSection"><h3 id="示例2设定文本阴影样式">示例2（设定文本阴影样式）<i class="anchor-icon anchor-icon-link" anchorid="示例2设定文本阴影样式" tips="复制节点链接"></i></h3><p>该示例通过<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-texttimer#textshadow11">textShadow</a>属性设置计时器的文本阴影样式。</p> <div _ngcontent-lpy-c106="" class="highlight-div"><div _ngcontent-lpy-c106="" class="highlight-div-header"><div _ngcontent-lpy-c106="" class="highlight-div-header-left"><div _ngcontent-lpy-c106="" class="handle-button expand-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpy-c106="" class="highlight-div-header-right"><div _ngcontent-lpy-c106="" class="handle-button ai-button"></div><div _ngcontent-lpy-c106="" class="handle-button line-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpy-c106="" class="handle-button theme-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpy-c106="" class="handle-button copy-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TextTimerExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">textShadows</span>: <span class="hljs-title class_">ShadowOptions</span> | <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">ShadowOptions</span>&gt; = [{</li><li>    <span class="hljs-attr">radius</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>,</li><li>    <span class="hljs-attr">offsetX</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">offsetY</span>: <span class="hljs-number">0</span></li><li>  }, {</li><li>    <span class="hljs-attr">radius</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>,</li><li>    <span class="hljs-attr">offsetX</span>: <span class="hljs-number">20</span>,</li><li>    <span class="hljs-attr">offsetY</span>: <span class="hljs-number">0</span></li><li>  }, {</li><li>    <span class="hljs-attr">radius</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Brown</span>,</li><li>    <span class="hljs-attr">offsetX</span>: <span class="hljs-number">30</span>,</li><li>    <span class="hljs-attr">offsetY</span>: <span class="hljs-number">0</span></li><li>  }, {</li><li>    <span class="hljs-attr">radius</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>,</li><li>    <span class="hljs-attr">offsetX</span>: <span class="hljs-number">40</span>,</li><li>    <span class="hljs-attr">offsetY</span>: <span class="hljs-number">0</span></li><li>  }, {</li><li>    <span class="hljs-attr">radius</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">color</span>: <span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span>,</li><li>    <span class="hljs-attr">offsetX</span>: <span class="hljs-number">100</span>,</li><li>    <span class="hljs-attr">offsetY</span>: <span class="hljs-number">0</span></li><li>  }];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">8</span> }) {</li><li>      <span class="hljs-title class_">TextTimer</span>().<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>).<span class="hljs-title function_">textShadow</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">textShadows</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="51" originwidth="311" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115658.85073886434893183615262812754258:50001231000000:2800:81C0E739B55E016A8306B0EBEBFE7E5D17C00CA1475F7D7EF88F5C23EE6BCB66.png" width="311" height="51"></span></p> </div>  <div class="tiledSection"><h3 id="示例3设定自定义内容区">示例3（设定自定义内容区）<i class="anchor-icon anchor-icon-link" anchorid="示例3设定自定义内容区" tips="复制节点链接"></i></h3><p>该示例实现了两个简易秒表，使用浅灰色背景。计时器开始后，会实时显示时间变化。倒计时器开始后，背景会变成黑色，正计时器开始后，背景会变成灰色。</p> <div _ngcontent-lpy-c106="" class="highlight-div"><div _ngcontent-lpy-c106="" class="highlight-div-header"><div _ngcontent-lpy-c106="" class="highlight-div-header-left"><div _ngcontent-lpy-c106="" class="handle-button expand-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpy-c106="" class="highlight-div-header-right"><div _ngcontent-lpy-c106="" class="handle-button ai-button"></div><div _ngcontent-lpy-c106="" class="handle-button line-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpy-c106="" class="handle-button theme-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpy-c106="" class="handle-button copy-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyTextTimerModifier</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ContentModifier</span>&lt;<span class="hljs-title class_">TextTimerConfiguration</span>&gt; {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">applyContent</span>(): <span class="hljs-title class_">WrappedBuilder</span>&lt;[<span class="hljs-title class_">TextTimerConfiguration</span>]&gt; {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">wrapBuilder</span>(buildTextTimer);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildTextTimer</span>(<span class="hljs-params">config: TextTimerConfiguration</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Stack</span>({ <span class="hljs-attr">alignContent</span>: <span class="hljs-title class_">Alignment</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Circle</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">150</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">150</span> })</li><li>        .<span class="hljs-title function_">fill</span>(config.<span class="hljs-property">started</span> ? (config.<span class="hljs-property">isCountDown</span> ? <span class="hljs-number">0xFF232323</span> : <span class="hljs-number">0xFF717171</span>) : <span class="hljs-number">0xFF929292</span>)</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(config.<span class="hljs-property">isCountDown</span> ? <span class="hljs-string">"倒计时"</span> : <span class="hljs-string">"正计时"</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>        <span class="hljs-title class_">Text</span>(</li><li>          (config.<span class="hljs-property">isCountDown</span> ? <span class="hljs-string">"剩余"</span> : <span class="hljs-string">"已经过去了"</span>) + (config.<span class="hljs-property">isCountDown</span> ?</li><li>            (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(config.<span class="hljs-property">count</span> / <span class="hljs-number">1000</span> - config.<span class="hljs-property">elapsedTime</span> / <span class="hljs-number">100</span>, <span class="hljs-number">0</span>)).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">1</span>) + <span class="hljs-string">"/"</span> +</li><li>            (config.<span class="hljs-property">count</span> / <span class="hljs-number">1000</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">0</span>)</li><li>            : ((config.<span class="hljs-property">elapsedTime</span> / <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">0</span>))</li><li>          ) + <span class="hljs-string">"秒"</span></li><li>        ).<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>      }</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10000</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">myTimerModifier</span>: <span class="hljs-title class_">MyTextTimerModifier</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyTextTimerModifier</span>();</li><li>  <span class="hljs-attr">countDownTextTimerController</span>: <span class="hljs-title class_">TextTimerController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextTimerController</span>();</li><li>  <span class="hljs-attr">countUpTextTimerController</span>: <span class="hljs-title class_">TextTimerController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextTimerController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">TextTimer</span>({ <span class="hljs-attr">isCountDown</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">countDownTextTimerController</span> })</li><li>          .<span class="hljs-title function_">contentModifier</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myTimerModifier</span>)</li><li>          .<span class="hljs-title function_">onTimer</span>(<span class="hljs-function">(<span class="hljs-params">utc: <span class="hljs-built_in">number</span>, elapsedTime: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'textTimer onTimer utc is：'</span> + utc + <span class="hljs-string">', elapsedTime: '</span> + elapsedTime);</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        <span class="hljs-title class_">TextTimer</span>({ <span class="hljs-attr">isCountDown</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">countUpTextTimerController</span> })</li><li>          .<span class="hljs-title function_">contentModifier</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myTimerModifier</span>)</li><li>          .<span class="hljs-title function_">onTimer</span>(<span class="hljs-function">(<span class="hljs-params">utc: <span class="hljs-built_in">number</span>, elapsedTime: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'textTimer onTimer utc is：'</span> + utc + <span class="hljs-string">', elapsedTime: '</span> + elapsedTime);</li><li>          })</li><li>        <span class="hljs-title class_">Row</span>() {</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">"start"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">countDownTextTimerController</span>.<span class="hljs-title function_">start</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">countUpTextTimerController</span>.<span class="hljs-title function_">start</span>();</li><li>          }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">"pause"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">countDownTextTimerController</span>.<span class="hljs-title function_">pause</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">countUpTextTimerController</span>.<span class="hljs-title function_">pause</span>();</li><li>          }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">"reset"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">countDownTextTimerController</span>.<span class="hljs-title function_">reset</span>();</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">countUpTextTimerController</span>.<span class="hljs-title function_">reset</span>();</li><li>          }).<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>        }.<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="498" originwidth="344" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115658.07013743488447798042053984830598:50001231000000:2800:7D5C33606F75FCFC565E0302572BC23228532572DF8266A31F87BB767E067D02.gif" width="344" height="498"></span></p> </div>  <div class="tiledSection"><h3 id="示例4创建之后立即执行计时">示例4（创建之后立即执行计时）<i class="anchor-icon anchor-icon-link" anchorid="示例4创建之后立即执行计时" tips="复制节点链接"></i></h3><p>该示例展示了TextTimer计时器如何在创建完成之后立即开始计时。</p> <div _ngcontent-lpy-c106="" class="highlight-div"><div _ngcontent-lpy-c106="" class="highlight-div-header"><div _ngcontent-lpy-c106="" class="highlight-div-header-left"><div _ngcontent-lpy-c106="" class="handle-button expand-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lpy-c106="" class="highlight-div-header-right"><div _ngcontent-lpy-c106="" class="handle-button ai-button"></div><div _ngcontent-lpy-c106="" class="handle-button line-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lpy-c106="" class="handle-button theme-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lpy-c106="" class="handle-button copy-button"><div _ngcontent-lpy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lpy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TextTimerStart</span> {</li><li>  <span class="hljs-attr">textTimerController</span>: <span class="hljs-title class_">TextTimerController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextTimerController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">format</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'mm:ss.SS'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Scroll</span>()</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'20%'</span>)</li><li>      <span class="hljs-title class_">TextTimer</span>({ <span class="hljs-attr">isCountDown</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">30000</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">textTimerController</span> })</li><li>        .<span class="hljs-title function_">format</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">format</span>)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Black</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">onTimer</span>(<span class="hljs-function">(<span class="hljs-params">utc: <span class="hljs-built_in">number</span>, elapsedTime: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'textTimer notCountDown utc is：'</span> + utc + <span class="hljs-string">', elapsedTime: '</span> + elapsedTime);</li><li>        })</li><li>        .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">textTimerController</span>.<span class="hljs-title function_">start</span>();</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="233" originwidth="331" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115658.09575652462043087458019746340998:50001231000000:2800:C27F6BFA833CC26AC104268F82A0C329833006ADA83531A9513C4F8F45402709.gif" width="331" height="233"></span></p> </div> </div> <div></div></div>