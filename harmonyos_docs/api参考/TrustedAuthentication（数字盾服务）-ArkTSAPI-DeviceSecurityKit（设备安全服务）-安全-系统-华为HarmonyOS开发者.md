<h1 _ngcontent-jke-c119="" class="doc-title ng-star-inserted" title="TrustedAuthentication（数字盾服务）"> TrustedAuthentication（数字盾服务） </h1>

<div _ngcontent-jke-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供数字盾密码创建、修改、删除、交易认证，开通生物特征（3D人脸/指纹）交易认证能力、生物特征交易认证，密钥信息导入导出相关接口，金融应用可以使用对应接口，支撑数字盾业务开发。</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <div class="tiledSection"><h2 id="section1968955020108" device-type="phone">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1968955020108" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1817011732511" device-type="phone">enableTrustedAuthentication<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1817011732511" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>enableTrustedAuthentication(challenge: Uint8Array, pwdInfo: PasswordInfo, label: TUILable): Promise&lt;AuthInfo&gt;</p> <p>拉起TUI（Trusted User Interface）界面并指引用户创建数字盾密码。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>challenge</p> </td> <td class="cellrowborder" width="21.27%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>在发起请求之前通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-huks#huksinitsession9" target="_blank">Universal Keystore Kit初始化会话</a>获取的challenge值，参数规格为32字节随机数。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>pwdInfo</p> </td> <td class="cellrowborder" width="21.27%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section1550072910133">PasswordInfo</a></p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>密码对应的定制信息，详细信息参考PasswordInfo。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>label</p> </td> <td class="cellrowborder" width="21.27%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section125211933134315">TUILable</a></p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>用于TUI界面展示时的定制信息，详见TUILable。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section1214193712473">AuthInfo</a>&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象，返回开通数字盾密码对应的authID和authToken信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.12.1.3.1.1" width="21.240000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.12.1.3.1.2" width="78.75999999999999%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100007</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Unsupported custom image.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100008</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The user canceled the operation.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100011</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The title text cannot be displayed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100013</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Failed to set the password.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">32</span>;</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">challenge</span>: <span class="hljs-title class_">Uint8Array</span> = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">passwordInfo</span>: trustedAuthentication.<span class="hljs-property">PasswordInfo</span> = {</li><li>    <span class="hljs-attr">pwdType</span>: trustedAuthentication.<span class="hljs-property">PasswordType</span>.<span class="hljs-property">PASSWORD_TYPE_MIXED</span>,</li><li>    <span class="hljs-attr">pwdMaxLength</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">pwdMinLength</span>: <span class="hljs-number">6</span>,</li><li>    <span class="hljs-attr">maxAuthFailCount</span>: <span class="hljs-number">6</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">const</span> fileData : <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">await</span> resourceMgr.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">'test_logo_rgba.png'</span>);</li><li>  <span class="hljs-keyword">const</span> buffer = fileData.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">label</span>:trustedAuthentication.<span class="hljs-property">TUILable</span> = {</li><li>    <span class="hljs-attr">image</span>: buffer <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>,</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">"开通数字盾"</span>,</li><li>  }</li><li>  <span class="hljs-keyword">const</span> authToken = <span class="hljs-keyword">await</span> trustedAuthentication.<span class="hljs-title function_">enableTrustedAuthentication</span>(challenge, passwordInfo, label);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'enableTrustedAuthentication failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1794633020274" device-type="phone">modifyTrustedAuthenticationPwd<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1794633020274" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>modifyTrustedAuthenticationPwd(challenge: Uint8Array, pwdInfo: PasswordInfo, authID: bigint, label: TUILable): Promise&lt;AuthToken&gt;</p> <p>拉起TUI界面并指引用户修改数字盾密码，修改密码前会根据authID进行对应密码认证。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>challenge</p> </td> <td class="cellrowborder" width="21.27%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>在发起请求之前通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-huks#huksinitsession9" target="_blank">Universal Keystore Kit初始化会话</a>获取的challenge值，参数规格为32字节随机数。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>pwdInfo</p> </td> <td class="cellrowborder" width="21.27%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section1550072910133">PasswordInfo</a></p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>密码对应的定制信息。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>authID</p> </td> <td class="cellrowborder" width="21.27%"><p>bigint</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>密码创建时获取的authID信息。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>label</p> </td> <td class="cellrowborder" width="21.27%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section125211933134315">TUILable</a></p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>用于TUI界面展示时的定制信息。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section20919104010476">AuthToken</a>&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象，返回修改数字盾密码对应的authToken信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.12.1.3.1.1" width="21.22%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.12.1.3.1.2" width="78.78%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.22%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.78%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.22%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.78%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.22%"><p>1019100003</p> </td> <td class="cellrowborder" width="78.78%"><p>The maximum number of password authentication attempts has been reached.</p> </td> </tr> <tr><td class="cellrowborder" width="21.22%"><p>1019100005</p> </td> <td class="cellrowborder" width="78.78%"><p>Face/Fingerprint/Password authentication failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.22%"><p>1019100007</p> </td> <td class="cellrowborder" width="78.78%"><p>Unsupported custom image.</p> </td> </tr> <tr><td class="cellrowborder" width="21.22%"><p>1019100008</p> </td> <td class="cellrowborder" width="78.78%"><p>The user canceled the operation.</p> </td> </tr> <tr><td class="cellrowborder" width="21.22%"><p>1019100011</p> </td> <td class="cellrowborder" width="78.78%"><p>The title text cannot be displayed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.22%"><p>1019100012</p> </td> <td class="cellrowborder" width="78.78%"><p>Invalid authentication ID.</p> </td> </tr> <tr><td class="cellrowborder" width="21.22%"><p>1019100014</p> </td> <td class="cellrowborder" width="78.78%"><p>Failed to change the password.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li> <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">32</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">challenge</span>: <span class="hljs-title class_">Uint8Array</span> = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">passwordInfo</span>: trustedAuthentication.<span class="hljs-property">PasswordInfo</span> = {</li><li>   <span class="hljs-attr">pwdType</span>: trustedAuthentication.<span class="hljs-property">PasswordType</span>.<span class="hljs-property">PASSWORD_TYPE_DIGITAL</span>,</li><li>   <span class="hljs-attr">pwdMaxLength</span>: <span class="hljs-number">10</span>,</li><li>   <span class="hljs-attr">pwdMinLength</span>: <span class="hljs-number">6</span>,</li><li>   <span class="hljs-attr">maxAuthFailCount</span>: <span class="hljs-number">6</span>,</li><li> };</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">authID</span>: <span class="hljs-built_in">bigint</span> = <span class="hljs-number">1687413472599354502n</span>;</li><li> <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li> <span class="hljs-keyword">const</span> fileData : <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">await</span> resourceMgr.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">'test_logo_rgba.png'</span>);</li><li> <span class="hljs-keyword">const</span> buffer = fileData.<span class="hljs-property">buffer</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">label</span>:trustedAuthentication.<span class="hljs-property">TUILable</span> = {</li><li>   <span class="hljs-attr">image</span>: buffer <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>,</li><li>   <span class="hljs-attr">title</span>: <span class="hljs-string">"修改密码"</span>,</li><li> }</li><li> <span class="hljs-keyword">const</span> authToken = <span class="hljs-keyword">await</span> trustedAuthentication.<span class="hljs-title function_">modifyTrustedAuthenticationPwd</span>(challenge, passwordInfo, authID, label);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'modifyTrustedAuthenticationPwd failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section10828741113612" device-type="phone">disableTrustedAuthentication<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10828741113612" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>disableTrustedAuthentication(challenge: Uint8Array, needAuth: boolean, authID: bigint, label: TUILable): Promise&lt;AuthToken&gt;</p> <p>关闭数字盾服务，开发者可通过参数needAuth控制密码关闭前是否需要密码认证。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>challenge</p> </td> <td class="cellrowborder" width="21.27%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>当needAuth为true时，在发起请求之前通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-huks#huksinitsession9" target="_blank">Universal Keystore Kit初始化会话</a>获取的challenge值，参数规格为32字节随机数。</p> <p>当needAuth为false时，该值可不从Universal Keystore Kit获取，challenge值为任意32字节数即可。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>needAuth</p> </td> <td class="cellrowborder" width="21.27%"><p>boolean</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>是否需要进行密码认证标识。</p> <p>当值为false时，表示不进行密码认证发起的数字盾服务关闭场景。</p> <p>当值为true时，表示需要进行密码认证，密码认证通过后才可关闭数字盾服务。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>authID</p> </td> <td class="cellrowborder" width="21.27%"><p>bigint</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>密码创建时获取的authID信息。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>label</p> </td> <td class="cellrowborder" width="21.27%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section125211933134315">TUILable</a></p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>用于TUI界面展示时的定制信息。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section20919104010476">AuthToken</a>&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象，返回删除数字盾密码对应的authToken信息，当needAuth为false时，返回的authToken信息为全0无效的authToken。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.1" width="21.240000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.2" width="78.75999999999999%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100003</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The maximum number of password authentication attempts has been reached.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100004</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Failed to delete the password.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100005</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Face/Fingerprint/Password authentication failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100007</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Unsupported custom image.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100008</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The user canceled the operation.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100011</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The title text cannot be displayed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100012</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Invalid authentication ID.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li> <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">32</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">challenge</span>: <span class="hljs-title class_">Uint8Array</span> = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">authID</span>: <span class="hljs-built_in">bigint</span> = <span class="hljs-number">1687413472599354502n</span>;</li><li> <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li> <span class="hljs-keyword">const</span> fileData : <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">await</span> resourceMgr.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">'test_logo_rgba.png'</span>);</li><li> <span class="hljs-keyword">const</span> buffer = fileData.<span class="hljs-property">buffer</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">label</span>:trustedAuthentication.<span class="hljs-property">TUILable</span> = {</li><li>   <span class="hljs-attr">image</span>: buffer <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>,</li><li>   <span class="hljs-attr">title</span>: <span class="hljs-string">"关闭数字盾"</span>,</li><li> }</li><li> <span class="hljs-keyword">const</span> authToken = <span class="hljs-keyword">await</span> trustedAuthentication.<span class="hljs-title function_">disableTrustedAuthentication</span>(challenge, <span class="hljs-literal">true</span>, authID, label);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'disableTrustedAuthentication failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section6763105845111" device-type="phone">trustedAuthentication<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section6763105845111" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>trustedAuthentication(challenge: Uint8Array, authID: bigint, label: TUILable): Promise&lt;AuthToken&gt;</p> <p>提供数字盾密码认证能力，开发者可使用该接口完成绑定生物特征支付前的密码认证。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>challenge</p> </td> <td class="cellrowborder" width="21.27%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>在发起请求之前通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-huks#huksinitsession9" target="_blank">Universal Keystore Kit初始化会话</a>获取的challenge值，参数规格为32字节随机数。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>authID</p> </td> <td class="cellrowborder" width="21.27%"><p>bigint</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>密码创建时获取的authID信息。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>label</p> </td> <td class="cellrowborder" width="21.27%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section125211933134315">TUILable</a></p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>用于TUI界面展示时的定制信息。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section20919104010476">AuthToken</a>&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象，返回数字盾密码认证对应的authToken信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.1" width="21.240000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.2" width="78.75999999999999%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100003</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The maximum number of password authentication attempts has been reached.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100005</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Face/Fingerprint/Password authentication failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100007</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Unsupported custom image.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100008</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The user canceled the operation.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100012</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Invalid authentication ID.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li> <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">32</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">challenge</span>: <span class="hljs-title class_">Uint8Array</span> = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">authID</span>: <span class="hljs-built_in">bigint</span> = <span class="hljs-number">1687413472599354502n</span>;</li><li> <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li> <span class="hljs-keyword">const</span> fileData : <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">await</span> resourceMgr.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">'test_logo_rgba.png'</span>);</li><li> <span class="hljs-keyword">const</span> buffer = fileData.<span class="hljs-property">buffer</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">label</span>:trustedAuthentication.<span class="hljs-property">TUILable</span> = {</li><li>   <span class="hljs-attr">image</span>: buffer <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>,</li><li>   <span class="hljs-attr">title</span>: <span class="hljs-string">"密码认证"</span>,</li><li> }</li><li> <span class="hljs-keyword">const</span> authToken = <span class="hljs-keyword">await</span> trustedAuthentication.<span class="hljs-title function_">trustedAuthentication</span>(challenge, authID, label);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'trustedAuthentication failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1381398185415" device-type="phone">procContentAuthentication<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1381398185415" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>procContentAuthentication(challenge: Uint8Array, authID: bigint, authMsg: AuthReqParams, label: TUILable): Promise&lt;AuthToken&gt;</p> <p>数字盾交易认证接口。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>challenge</p> </td> <td class="cellrowborder" width="21.27%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>在发起请求之前通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-huks#huksinitsession9" target="_blank">Universal Keystore Kit初始化会话</a>获取的challenge值，参数规格为32字节随机数。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>authID</p> </td> <td class="cellrowborder" width="21.27%"><p>bigint</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>密码创建时获取的authID信息。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>authMsg</p> </td> <td class="cellrowborder" width="21.27%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section3989356115014">AuthReqParams</a></p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>交易认证请求相关参数。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>label</p> </td> <td class="cellrowborder" width="21.27%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section125211933134315">TUILable</a></p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>用于TUI界面展示时的定制信息。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section20919104010476">AuthToken</a>&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象。</p> <p>当使用密码认证时，返回结果包括交易数据信息的authToken。</p> <p>当使用生物特征进行认证时，返回结果为临时authToken，在经过生物认证通过后，需使用<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section627215120542">getBiometricAuthToken</a>获取正式签发的包含交易信息的authToken。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="21.240000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="78.75999999999999%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100005</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Face/Fingerprint/Password authentication failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100008</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The user canceled the operation.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100011</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The text content cannot be displayed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100012</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Invalid authentication ID.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100021</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The corresponding biometric data has not been bound.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li> <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">32</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">challenge</span>: <span class="hljs-title class_">Uint8Array</span> = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">authID</span>: <span class="hljs-built_in">bigint</span> = <span class="hljs-number">1687413472599354502n</span>;</li><li> <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li> <span class="hljs-keyword">const</span> fileData : <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">await</span> resourceMgr.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">'test_logo_rgba.png'</span>);</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">reqParams</span>:trustedAuthentication.<span class="hljs-property">AuthReqParams</span> = {</li><li>  <span class="hljs-attr">reqType</span>: trustedAuthentication.<span class="hljs-property">AuthType</span>.<span class="hljs-property">AUTH_TYPE_TUI_PIN</span>,</li><li>  <span class="hljs-attr">authContent</span>: [<span class="hljs-string">"用户：王xx"</span>, <span class="hljs-string">"账号：95588180804408xxxx"</span>, <span class="hljs-string">"交易金额：1000000000"</span>],</li><li> }</li><li> <span class="hljs-keyword">const</span> buffer = fileData.<span class="hljs-property">buffer</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">label</span>:trustedAuthentication.<span class="hljs-property">TUILable</span> = {</li><li>  <span class="hljs-attr">image</span>: buffer <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>,</li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">"密码交易认证"</span>,</li><li> }</li><li> <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> trustedAuthentication.<span class="hljs-title function_">procContentAuthentication</span>(challenge, authID, reqParams, label);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'procContentAuthentication failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section627215120542" device-type="phone">getBiometricAuthToken<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section627215120542" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>getBiometricAuthToken(operType: OperateType, tuiAuthToken: Uint8Array, bioAuthToken: Uint8Array): Promise&lt;AuthToken&gt;</p> <p>获取生物特征绑定/生物特征交易认证对应的authToken信息。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>operType</p> </td> <td class="cellrowborder" width="21.27%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section14617053498">OperateType</a></p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>获取生物特征authToken操作类型，详见<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section14617053498">OperateType</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>tuiAuthToken</p> </td> <td class="cellrowborder" width="21.27%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>当操作类型为OPERATE_TYPE_BIOMETRIC_AUTH时，tuiAuthToken表示通过密码认证（即<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section6763105845111">trustedAuthentication</a>）获取的authToken信息。</p> <p>当操作类型为OPERATE_TYPE_CONTENT_AUTH时，tuiAuthToken表示通过交易信息临时确认（即<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section1381398185415">procContentAuthentication</a>）获取的authToken信息。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>bioAuthToken</p> </td> <td class="cellrowborder" width="21.27%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>生物特征认证获取的authToken，要求tuiAuthToken和bioAuthToken获取时使用同一个challenge，即保障两个authToken通过同一次会话获取。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section20919104010476">AuthToken</a>&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象。</p> <p>在生物特征认证绑定流程中，获取的authToken为经数字盾服务认证签发的包括生物特征ID的authToken。</p> <p>在生物特征交易认证流程中，获取的authToken为经数字盾服务认证前的包括交易信息和生物特征ID的authToken。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="21.240000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="78.75999999999999%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100005</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Face/Fingerprint/Password authentication failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100015</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Failed to get the biometric authToken.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100019</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The biometric data for authentication does not match the bound biometric feature.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100020</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The biometric data has already been bound.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-keyword">async</span> <span class="hljs-title class_">PwdVerify</span>(<span class="hljs-attr">challenge</span>: <span class="hljs-title class_">Uint8Array</span>):<span class="hljs-title class_">Promise</span>&lt;trustedAuthentication.<span class="hljs-property">AuthToken</span>&gt; {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">authID</span>: <span class="hljs-built_in">bigint</span> = <span class="hljs-number">11842183505170721246n</span>;<span class="hljs-comment">//实际填充为从服务器获取到的账号对应的authID值</span></li><li>    <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li>    <span class="hljs-keyword">const</span> fileData : <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">await</span> resourceMgr.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">'test_logo_rgba.png'</span>); <span class="hljs-comment">//实际使用时请替换为应用要在TUI界面展示的logo图片名称</span></li><li>    <span class="hljs-keyword">const</span> buffer = fileData.<span class="hljs-property">buffer</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">label</span>:trustedAuthentication.<span class="hljs-property">TUILable</span> = {</li><li>      <span class="hljs-attr">image</span>: buffer <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>,</li><li>      <span class="hljs-attr">title</span>: <span class="hljs-string">"数字盾密码认证"</span>,</li><li>    }</li><li>    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> trustedAuthentication.<span class="hljs-title function_">trustedAuthentication</span>(challenge, authID, label);</li><li>    <span class="hljs-keyword">return</span> result;</li><li>  } <span class="hljs-keyword">catch</span> (err) {  </li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to trustedAuthentication, code:<span class="hljs-subst">${err.code}</span>, message:<span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Password verify failed:'</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">32</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">challengeID</span>: <span class="hljs-title class_">Uint8Array</span> = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-title class_">TuiAuthToken</span>: trustedAuthentication.<span class="hljs-property">AuthToken</span> = <span class="hljs-keyword">await</span> <span class="hljs-title class_">PwdVerify</span>(challenge);</li><li><span class="hljs-keyword">let</span> authTypeList :<span class="hljs-built_in">number</span>[] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();</li><li>authTypeList[<span class="hljs-number">0</span>] = userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FINGERPRINT</span>;</li><li>authTypeList[<span class="hljs-number">1</span>] = userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> authParam : userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>  <span class="hljs-attr">challenge</span>:  challengeID,</li><li>  <span class="hljs-attr">authType</span>: authTypeList,</li><li>  <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL4</span></li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入盾密码'</span>,</li><li>  <span class="hljs-attr">navigationButtonText</span>: <span class="hljs-string">'请输入盾密码'</span>,</li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = <span class="hljs-keyword">await</span> userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  userAuthInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'result'</span>, {</li><li>    onResult (result) {</li><li>      authTokenData = result.<span class="hljs-property">token</span>;</li><li>      <span class="hljs-keyword">let</span> operType = trustedAuthentication.<span class="hljs-property">OperateType</span>.<span class="hljs-property">OPERATE_TYPE_BIOMETRIC_AUTH</span>;</li><li>      trustedAuthentication.<span class="hljs-title function_">getBiometricAuthToken</span>(operType, <span class="hljs-title class_">TuiAuthToken</span>.<span class="hljs-property">authToken</span>, authTokenData).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">newAuthToken</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">let</span> authToken = newAuthToken.<span class="hljs-property">authToken</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Uint8Array</span>;</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-string">"---authToken---"</span> + authToken);</li><li>      });</li><li>    }</li><li>  })</li><li>  userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'getUserAuthInstance failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section05891123165410" device-type="phone">importData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section05891123165410" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>importData(data: ArrayBuffer, authID: bigint): Promise&lt;void&gt;</p> <p>导入备份的数据信息（即与HUKS签名验签时使用的加密密钥信息）。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>data</p> </td> <td class="cellrowborder" width="21.27%"><p>ArrayBuffer</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>通常指定为从Universal Keystore Kit获取的wrapkey数据信息，导入数据大小限制在2048字节内，对应数据不支持反复导入。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>authID</p> </td> <td class="cellrowborder" width="21.27%"><p>bigint</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>密码创建时获取的authID信息。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象，无返回结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="21.2%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="78.8%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.2%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.8%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.2%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.8%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.2%"><p>1019100010</p> </td> <td class="cellrowborder" width="78.8%"><p>Failed to import data.</p> </td> </tr> <tr><td class="cellrowborder" width="21.2%"><p>1019100012</p> </td> <td class="cellrowborder" width="78.8%"><p>Invalid authentication ID.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">authID</span>: <span class="hljs-built_in">bigint</span> = <span class="hljs-number">1687413472599354502n</span>;</li><li> <span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>);</li><li> <span class="hljs-keyword">const</span> bufferArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer);</li><li> bufferArray.<span class="hljs-title function_">set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]);</li><li> <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> trustedAuthentication.importData(buffer, authID);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'importData failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section47391259542" device-type="phone">exportData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section47391259542" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>exportData(authID: bigint, label: TUILable): Promise&lt;ArrayBuffer&gt;</p> <p>导出备份的数据信息（即与HUKS签名验签时使用的加密密钥信息），在导出时，需要经过密码认证，认证通过后才可导出对应的备份数据信息。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>authID</p> </td> <td class="cellrowborder" width="21.27%"><p>bigint</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>密码创建时获取的authID信息。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>label</p> </td> <td class="cellrowborder" width="21.27%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section125211933134315">TUILable</a></p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>用于TUI界面展示时的定制信息，详见<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section125211933134315">TUILable</a>。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;ArrayBuffer&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象，返回备份的数据信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="21.240000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="78.75999999999999%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100009</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Failed to export data.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100012</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Invalid authentication ID.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">credentialID</span>: <span class="hljs-built_in">bigint</span> = <span class="hljs-number">1687413472599354502n</span>;</li><li> <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li> <span class="hljs-keyword">const</span> fileData : <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">await</span> resourceMgr.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">'test_logo_rgba.png'</span>);</li><li> <span class="hljs-keyword">const</span> buffer = fileData.<span class="hljs-property">buffer</span>;</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">label</span>:trustedAuthentication.<span class="hljs-property">TUILable</span> = {</li><li>  <span class="hljs-attr">image</span>: buffer <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>,</li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">"备份数据导出"</span>,</li><li> }</li><li> <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> trustedAuthentication.<span class="hljs-title function_">exportData</span>(credentialID, label);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'exportData failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1661713452289" device-type="phone">checkConfirmUITextFormat<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1661713452289" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>checkConfirmUITextFormat(text: string): Promise&lt;TextCheckResult&gt;</p> <p>检查将在TUI呈现的内容是否可以在屏幕上单行完整展示。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>text</p> </td> <td class="cellrowborder" width="21.27%"><p>string</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>将在TUI界面展示的认证信息内容。在交易认证前，可通过该接口确认交易信息是否可以在屏幕上单行完整展示，长度规格为1~200字节。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section27021232135111">TextCheckResult</a>&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象，TUI界面显示指定text对应检查结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="21.240000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="78.75999999999999%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100006</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Check input confirm text failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"检查将在TUI呈现的text是否可以正常展示"</span>;</li><li> <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> trustedAuthentication.<span class="hljs-title function_">checkConfirmUITextFormat</span>(text);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'checkConfirmUITextFormat failed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1984032153615" device-type="phone">getRemainAuthTimes<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1984032153615" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>getRemainAuthTimes(authID: bigint): Promise&lt;number&gt;</p> <p>获取数字盾剩余认证次数。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>authID</p> </td> <td class="cellrowborder" width="21.27%"><p>bigint</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>密码创建时获取的authID信息。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;number&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象，数字盾剩余认证次数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.1" width="21.240000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.2" width="78.75999999999999%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100012</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Invalid authentication ID.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100017</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Failed to get the remaining number of authentication attempts.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">authID</span>: <span class="hljs-built_in">bigint</span> = <span class="hljs-number">1687413472599354502n</span>;</li><li> <span class="hljs-keyword">const</span> remainTimes = <span class="hljs-keyword">await</span> trustedAuthentication.<span class="hljs-title function_">getRemainAuthTimes</span>(authID);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'getRemainAuthTimesfailed: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section129741528131215" device-type="phone">disableTrustedBioAuthentication<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section129741528131215" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>disableTrustedBioAuthentication(authID: bigint, authType: AuthType): Promise&lt;void&gt;</p> <p>解绑指定生物类型认证能力。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="21.26%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="21.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="7.22%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="50.24999999999999%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.26%"><p>authID</p> </td> <td class="cellrowborder" width="21.27%"><p>bigint</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>密码创建时获取的authID信息。</p> </td> </tr> <tr><td class="cellrowborder" width="21.26%"><p>authType</p> </td> <td class="cellrowborder" width="21.27%"><p>AuthType</p> </td> <td class="cellrowborder" width="7.22%"><p>是</p> </td> <td class="cellrowborder" width="50.24999999999999%"><p>仅支持AUTH_TYPE_FACE、AUTH_TYPE_FINGERPRINT</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="21.05%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="78.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="21.05%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="78.95%"><p>Promise对象，无返回结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth">ArkTS API错误码</a><strong>。</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="21.240000000000002%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="78.75999999999999%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100001</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The interface invoker does not have the corresponding permission.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100002</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Parameter error.</p> <p>Possible causes:</p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameter types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100012</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Invalid authentication ID.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100018</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>Failed to unbind the  corresponding biometric data.</p> </td> </tr> <tr><td class="cellrowborder" width="21.240000000000002%"><p>1019100021</p> </td> <td class="cellrowborder" width="78.75999999999999%"><p>The corresponding biometric data has not been bound.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-jke-c106="" class="highlight-div"><div _ngcontent-jke-c106="" class="highlight-div-header"><div _ngcontent-jke-c106="" class="highlight-div-header-left"><div _ngcontent-jke-c106="" class="handle-button expand-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-jke-c106="" class="highlight-div-header-right"><div _ngcontent-jke-c106="" class="handle-button ai-button"></div><div _ngcontent-jke-c106="" class="handle-button line-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-jke-c106="" class="handle-button theme-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-jke-c106="" class="handle-button copy-button"><div _ngcontent-jke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-jke-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { trustedAuthentication} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TAG</span> = <span class="hljs-string">"TrustedAuthenticationJsTest"</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li> <span class="hljs-keyword">const</span> <span class="hljs-attr">authID</span>: <span class="hljs-built_in">bigint</span> = <span class="hljs-number">1687413472599354502n</span>;</li><li> <span class="hljs-keyword">const</span> remainTimes = <span class="hljs-keyword">await</span> trustedAuthentication.<span class="hljs-title function_">disableTrustedBioAuthentication</span>(authID, trustedAuthentication.<span class="hljs-property">AuthType</span>.<span class="hljs-property">AUTH_TYPE_FACE</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'disableTrustedBioAuthentication: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1550072910133" device-type="phone">PasswordInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1550072910133" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>设置密码时业务对密码规格参数要求。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.1" width="21%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.2" width="21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.3" width="7.000000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.4" width="7.000000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.5" width="44%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21%"><p>pwdType</p> </td> <td class="cellrowborder" width="21%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section1365374114910">PasswordType</a></p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>密码类型，取值范围详见<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section1365374114910">PasswordType</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="21%"><p>pwdMaxLength</p> </td> <td class="cellrowborder" width="21%"><p>number</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>密码最大长度，取值范围6~18。</p> </td> </tr> <tr><td class="cellrowborder" width="21%"><p>pwdMinLength</p> </td> <td class="cellrowborder" width="21%"><p>number</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>密码最小长度，取值范围6~18，且小于等于pwdMaxLength。</p> </td> </tr> <tr><td class="cellrowborder" width="21%"><p>maxAuthFailCount</p> </td> <td class="cellrowborder" width="21%"><p>number</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>密码最大连续认证失败次数，取值范围1~10。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section125211933134315" device-type="phone">TUILable<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section125211933134315" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>TUI页面下的定制信息，包括定制图像logo和页面标题。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.1" width="21%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.2" width="21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.3" width="7.000000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.4" width="7.000000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.5" width="44%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21%"><p>image</p> </td> <td class="cellrowborder" width="21%"><p>ArrayBuffer</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>定制logo信息，要求图片格式为PNG RGBA格式、最大宽度、长度要求均为216px。</p> </td> </tr> <tr><td class="cellrowborder" width="21%"><p>title</p> </td> <td class="cellrowborder" width="21%"><p>string</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>定制TUI页面标题信息，最大长度要求为31字节。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1214193712473" device-type="phone">AuthInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1214193712473" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>开通数字盾服务对应的参数信息。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.1" width="21%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.2" width="21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.3" width="7.000000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.4" width="7.000000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.5" width="44%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21%"><p>authToken</p> </td> <td class="cellrowborder" width="21%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>包括密码authID的authToken信息。</p> </td> </tr> <tr><td class="cellrowborder" width="21%"><p>authID</p> </td> <td class="cellrowborder" width="21%"><p>bigint</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>表示数字盾密码authID索引，用于密码认证、删除、修改。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section20919104010476" device-type="phone">AuthToken<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section20919104010476" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>经数字盾服务指定操作获取的authToken，不同操作流程中authToken包括的加密信息不同，详细可参考各个接口参数说明。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.1" width="21%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.2" width="21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.3" width="7.000000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.4" width="7.000000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.5" width="44%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21%"><p>authToken</p> </td> <td class="cellrowborder" width="21%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>对应操作流程中authToken信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section58527274920" device-type="phone">AuthType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section58527274920" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>交易认证类型定义。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.1" width="21.33%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.2" width="28.33%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.3" width="50.339999999999996%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.33%"><p>AUTH_TYPE_FACE</p> </td> <td class="cellrowborder" width="28.33%"><p>2</p> </td> <td class="cellrowborder" width="50.339999999999996%"><p>人脸认证</p> </td> </tr> <tr><td class="cellrowborder" width="21.33%"><p>AUTH_TYPE_FINGERPRINT</p> </td> <td class="cellrowborder" width="28.33%"><p>4</p> </td> <td class="cellrowborder" width="50.339999999999996%"><p>指纹认证</p> </td> </tr> <tr><td class="cellrowborder" width="21.33%"><p>AUTH_TYPE_TUI_PIN</p> </td> <td class="cellrowborder" width="28.33%"><p>32</p> </td> <td class="cellrowborder" width="50.339999999999996%"><p>TUI密码认证</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1365374114910" device-type="phone">PasswordType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1365374114910" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>密码类型定义，根据密码类型TUI界面弹出不同类型的安全键盘。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.5.1.4.1.1" width="21.33%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.4.1.2" width="28.33%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.4.1.3" width="50.339999999999996%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.33%"><p>PASSWORD_TYPE_DIGITAL</p> </td> <td class="cellrowborder" width="28.33%"><p>0</p> </td> <td class="cellrowborder" width="50.339999999999996%"><p>纯数字密码类型</p> </td> </tr> <tr><td class="cellrowborder" width="21.33%"><p>PASSWORD_TYPE_MIXED</p> </td> <td class="cellrowborder" width="28.33%"><p>1</p> </td> <td class="cellrowborder" width="50.339999999999996%"><p>数字、字符混合密码类型</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section14617053498" device-type="phone">OperateType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14617053498" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>操作类型定义。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.5.1.4.1.1" width="28.62%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.5.1.4.1.2" width="21.04%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.5.1.4.1.3" width="50.339999999999996%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="28.62%"><p>OPERATE_TYPE_BIOMETRIC_AUTH</p> </td> <td class="cellrowborder" width="21.04%"><p>1</p> </td> <td class="cellrowborder" width="50.339999999999996%"><p>生物特征与密码认证绑定操作</p> </td> </tr> <tr><td class="cellrowborder" width="28.62%"><p>OPERATE_TYPE_CONTENT_AUTH</p> </td> <td class="cellrowborder" width="21.04%"><p>2</p> </td> <td class="cellrowborder" width="50.339999999999996%"><p>使用生物特征进行交易认证操作</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section3989356115014" device-type="phone">AuthReqParams<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3989356115014" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>交易认证请求相关参数。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.1" width="21%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.2" width="21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.3" width="7.000000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.4" width="7.000000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.5" width="44%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21%"><p>reqType</p> </td> <td class="cellrowborder" width="21%"><p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section58527274920">AuthType</a></p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>认证类型，取值范围详见<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-trusted-auth-api#section58527274920">AuthType</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="21%"><p>authContent</p> </td> <td class="cellrowborder" width="21%"><p>Array&lt;string&gt;</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>认证数据，即交易场景下交易数据，单条数据大小在1024字节以内。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section27021232135111" device-type="phone">TextCheckResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section27021232135111" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>TUI界面文本信息是否可以单行显示的检查结果。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.1" width="21%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.2" width="21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.3" width="7.000000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.4" width="7.000000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.5" width="44%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21%"><p>result</p> </td> <td class="cellrowborder" width="21%"><p>number</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>指定输入文本检查结果，如果可以正常显示，返回为0，否则返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-trusted-auth#section19615182019615">1019100011 不合法的TUI认证信息</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="21%"><p>lastIndex</p> </td> <td class="cellrowborder" width="21%"><p>number</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>输入字符串可正常显示的最后一个字符对应的索引。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section941522882520" device-type="phone">TrustedAuthErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section941522882520" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>数字盾服务开放接口执行失败错误码。</p> <p><strong>系统能力：</strong>SystemCapability.Security.TrustedAuthentication</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.5.1.4.1.1" width="48.309999999999995%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.4.1.2" width="20.77%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.4.1.3" width="30.919999999999998%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_NO_PERMISSION</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100001</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>权限校验失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_ILLEGAL_ARGUMENT</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100002</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>参数检查失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_PWD_LIMIT_REACHED</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100003</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>密码认证连续失败次数达到应用定义的最大次数</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_PWD_DELETE_FAILED</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100004</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>删除密码失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_VERIFY_FAILED</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100005</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>密码认证失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_CHECK_CONFIRM_TEXT_FAILED</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100006</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>输入文本信息检查失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_NOT_SUPPORT_IMAGE</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100007</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>不支持的图片格式</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_USER_REQ_CANCEL</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100008</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>用户取消操作</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_EXPORT_DATA_FAILED</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100009</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>备份数据导出失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_IMPORT_DATA_FAILED</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100010</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>备份数据导入失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_INVALID_CONTENT</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100011</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>不合法的TUI认证信息</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_INVALID_AUTH_ID</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100012</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>无效的authID</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_SET_PWD_FAILED</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100013</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>创建密码失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_MODIFY_PWD_FAILED</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100014</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>修改密码失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_BIO_RESIGN_FAILED</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100015</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>生物认证authToken签发失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_FEATURE_INITIALIZATION_FAILED</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100016</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>数字盾服务未使能</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_GET_REMAIN_TIME</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100017</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>获取数字盾剩余认证次数失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_DISABLE_BIO_AUTH</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100018</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>解绑指定生物特征认证能力失败</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_BIO_MISMATCH</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100019</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>认证的生物特征与绑定的生物特征不匹配</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_BIO_REPEATED_BIND</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100020</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>已绑定对应的生物特征</p> </td> </tr> <tr><td class="cellrowborder" width="48.309999999999995%"><p>TRUSTED_AUTH_ERROR_NOT_BIND_BIO</p> </td> <td class="cellrowborder" width="20.77%"><p>1019100021</p> </td> <td class="cellrowborder" width="30.919999999999998%"><p>对应生物特征未绑定</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>