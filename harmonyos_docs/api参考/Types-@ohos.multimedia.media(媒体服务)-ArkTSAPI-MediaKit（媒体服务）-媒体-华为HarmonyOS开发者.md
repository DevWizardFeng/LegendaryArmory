<h1 _ngcontent-ulu-c119="" class="doc-title ng-star-inserted" title="Types"> Types </h1>

<div _ngcontent-ulu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="soundpool10" device-type="phone,2in1,tablet,wearable,tv">SoundPool<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="soundpool10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type SoundPool = _SoundPool</p>     <p>音频池，提供了系统声音的加载、播放、音量设置、循环设置、停止播放、资源卸载等功能。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.2.5.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.2.5.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#soundpool">_SoundPool</a></td>         <td class="cellrowborder" width="50%">音频池，提供了系统声音的加载、播放、音量设置、循环设置、停止播放、资源卸载等功能。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="playparameters10" device-type="phone,2in1,tablet,wearable,tv">PlayParameters<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="playparameters10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type PlayParameters = _PlayParameters</p>     <p>表示音频池播放参数设置。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.SoundPool</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.5.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#playparameters">_PlayParameters</a></td>         <td class="cellrowborder" width="50%">表示音频池播放参数设置。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="avplayerstate9" device-type="phone,2in1,tablet,wearable,tv">AVPlayerState<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avplayerstate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type AVPlayerState = 'idle' | 'initialized' | 'prepared' | 'playing' | 'paused' | 'completed' | 'stopped' | 'released' | 'error'</p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer">AVPlayer</a>的状态机，可通过state属性主动获取当前状态，也可通过监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onstatechange9">stateChange</a>事件上报当前状态，状态机之间的切换规则，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/using-avplayer-for-playback" target="_blank">音频播放开发指导</a>。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">'idle'</td>         <td class="cellrowborder" width="50%">          <p>闲置状态，AVPlayer刚被创建<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreateavplayer9">createAVPlayer()</a>或者调用了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#reset9">reset()</a>方法之后，进入idle状态。</p>          <p>首次创建<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-f#mediacreateavplayer9">createAVPlayer()</a>，所有属性都为默认值。</p>          <p>调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#reset9">reset()</a>方法，url<sup>9+</sup> 或 fdSrc<sup>9+</sup>或dataSrc<sup>10+</sup>属性及loop属性会被重置，其他用户设置的属性将被保留。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'initialized'</td>         <td class="cellrowborder" width="50%">资源初始化，在idle 状态设置 url<sup>9+</sup> 或 fdSrc<sup>9+</sup>属性，AVPlayer会进入initialized状态，此时可以配置窗口、音频等静态属性。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'prepared'</td>         <td class="cellrowborder" width="50%">已准备状态，在initialized状态调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#prepare9">prepare()</a>方法，AVPlayer会进入prepared状态，此时播放引擎的资源已准备就绪。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'playing'</td>         <td class="cellrowborder" width="50%">正在播放状态，在prepared/paused/completed状态调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#play9">play()</a>方法，AVPlayer会进入playing状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'paused'</td>         <td class="cellrowborder" width="50%">暂停状态，在playing状态调用pause方法，AVPlayer会进入paused状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'completed'</td>         <td class="cellrowborder" width="50%">播放至结尾状态，当媒体资源播放至结尾时，如果用户未设置循环播放（loop = true），AVPlayer会进入completed状态，此时调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#play9">play()</a>会进入playing状态和重播，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#stop9">stop()</a>会进入stopped状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'stopped'</td>         <td class="cellrowborder" width="50%">停止状态，在prepared/playing/paused/completed状态调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#stop9">stop()</a>方法，AVPlayer会进入stopped状态，此时播放引擎只会保留属性，但会释放内存资源，可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#prepare9">prepare()</a>重新准备，也可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#reset9">reset()</a>重置，或者调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#release9">release()</a>彻底销毁。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'released'</td>         <td class="cellrowborder" width="50%">销毁状态，销毁与当前AVPlayer关联的播放引擎，无法再进行状态转换，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#release9">release()</a>方法后，会进入released状态，结束流程。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'error'</td>         <td class="cellrowborder" width="50%">          <p>错误状态，当<strong>播放引擎</strong>发生<strong>不可逆的错误</strong>（详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体错误码</a>），则会转换至当前状态，可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#reset9">reset()</a>重置，也可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#release9">release()</a>销毁重建。</p>          <p><strong>注意：</strong> 区分error状态和 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#onerror9">on('error')</a> ：</p>          <p>1、进入error状态时，会触发on('error')监听事件，可以通过on('error')事件获取详细错误信息；</p>          <p>2、处于error状态时，播放服务进入不可播控的状态，要求客户端设计容错机制，使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#reset9">reset()</a>重置或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer#release9">release()</a>销毁重建；</p>          <p>3、如果客户端收到on('error')，但未进入error状态：</p>          <p>原因1：客户端未按状态机调用API或传入参数错误，被AVPlayer拦截提醒，需要客户端调整代码逻辑；</p>          <p>原因2：播放过程发现码流问题，导致容器、解码短暂异常，不影响连续播放和播控操作的，不需要客户端设计容错机制。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="ontrackchangehandler12" device-type="phone,2in1,tablet,wearable,tv">OnTrackChangeHandler<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ontrackchangehandler12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type OnTrackChangeHandler = (index: number, isSelected: boolean) =&gt; void</p>     <p>track变更事件回调方法。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">index</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前变更的track索引。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">isSelected</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前变更的track索引是否被选中。true表示处于选中状态，false表示处于非选中状态。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="onavplayerstatechangehandle12" device-type="phone,2in1,tablet,wearable,tv">OnAVPlayerStateChangeHandle<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onavplayerstatechangehandle12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type OnAVPlayerStateChangeHandle = (state: AVPlayerState, reason: StateChangeReason) =&gt; void</p>     <p>状态机切换事件回调方法。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">state</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avplayerstate9">AVPlayerState</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前播放状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">reason</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#statechangereason9">StateChangeReason</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前播放状态的切换原因。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="onbufferingupdatehandler12" device-type="phone,2in1,tablet,wearable,tv">OnBufferingUpdateHandler<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onbufferingupdatehandler12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type OnBufferingUpdateHandler = (infoType: BufferingInfoType, value: number) =&gt; void</p>     <p>播放缓存事件回调方法。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">infoType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#bufferinginfotype8">BufferingInfoType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓存时间类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓存时间类型的值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="onvideosizechangehandler12" device-type="phone,2in1,tablet,wearable,tv">OnVideoSizeChangeHandler<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onvideosizechangehandler12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type OnVideoSizeChangeHandler = (width: number, height: number) =&gt; void</p>     <p>视频播放宽高变化事件回调方法。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">width</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">视频宽度，单位为像素（px）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">height</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">视频高度，单位为像素（px）。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="onsuperresolutionchanged-18" device-type="phone,2in1,tablet,wearable,tv">OnSuperResolutionChanged <sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsuperresolutionchanged-18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type OnSuperResolutionChanged = (enabled: boolean) =&gt; void</p>     <p>视频超分开关事件回调方法。若通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#playbackstrategy12">PlaybackStrategy</a>正确使能超分，超分算法状态变化时会通过此回调上报，视频起播时也会上报超分初始开启/关闭状态。若未使能超分，不会触发该回调。</p>     <p>出现以下两种情况，超分算法会自动关闭。</p>     <ul>      <li>目前超分算法最高仅支持30帧及以下的视频。若视频帧率超过30帧，或者在倍速播放等场景下导致输入帧率超出超分算法处理能力，超分会自动关闭。</li>      <li>目前超分算法支持输入分辨率范围为320x320 ~ 1920x1080，单位为像素。若播放过程中输入视频分辨率超出此范围，超分算法会自动关闭。</li>     </ul>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enabled</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示当前超分是否开启。true表示超分开启，false表示超分关闭。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="onseimessagehandle18" device-type="phone,2in1,tablet,wearable,tv">OnSeiMessageHandle<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onseimessagehandle18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type OnSeiMessageHandle = (messages: Array&lt;SeiMessage&gt;, playbackPosition?: number) =&gt; void</p>     <p>获取SEI信息，使用场景：订阅SEI信息事件，回调返回SEI详细信息。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">messages</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-i#seimessage18">SeiMessage</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">SEI信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">playbackPosition</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">获取当前播放位置（单位：毫秒）。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="onplaybackratedone20" device-type="phone,2in1,tablet,wearable,tv">OnPlaybackRateDone<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onplaybackratedone20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type OnPlaybackRateDone = (rate: number) =&gt; void</p>     <p>播放速率设置完成事件回调方法。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rate</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">播放速率。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="avrecorderstate9" device-type="phone,2in1,tablet,wearable,tv">AVRecorderState<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avrecorderstate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type AVRecorderState = 'idle' | 'prepared' | 'started' | 'paused' | 'stopped' | 'released' | 'error'</p>     <p>音视频录制的状态机。可通过state属性获取当前状态。</p>     <p><strong>元服务API：</strong> 从API version 12 开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">'idle'</td>         <td class="cellrowborder" width="50%">闲置状态。此时可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9">AVRecorder.prepare()</a>方法设置录制参数，进入prepared状态。AVRecorder刚被创建，或者在任何非released状态下调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#reset9">AVRecorder.reset()</a>方法，均进入idle状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'prepared'</td>         <td class="cellrowborder" width="50%">参数设置完成。此时可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#start9">AVRecorder.start()</a>方法开始录制，进入started状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'started'</td>         <td class="cellrowborder" width="50%">正在录制。此时可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#pause9">AVRecorder.pause()</a>方法暂停录制，进入paused状态。也可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#stop9">AVRecorder.stop()</a>方法结束录制，进入stopped状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'paused'</td>         <td class="cellrowborder" width="50%">录制暂停。此时可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#resume9">AVRecorder.resume()</a>方法继续录制，进入started状态。也可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#stop9">AVRecorder.stop()</a>方法结束录制，进入stopped状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'stopped'</td>         <td class="cellrowborder" width="50%">录制停止。此时可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#prepare9">AVRecorder.prepare()</a>方法设置录制参数，重新进入prepared状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'released'</td>         <td class="cellrowborder" width="50%">录制资源释放。此时不能再进行任何操作。在任何其他状态下，均可以通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#release9">AVRecorder.release()</a>方法进入released状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'error'</td>         <td class="cellrowborder" width="50%">错误状态。当AVRecorder实例发生不可逆错误，会转换至当前状态。切换至error状态时会伴随<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#onerror9">AVRecorder.on('error')事件</a>，该事件会上报详细错误原因。在error状态时，用户需要调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#reset9">AVRecorder.reset()</a>方法重置AVRecorder实例，或者调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avrecorder#release9">AVRecorder.release()</a>方法释放资源。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="onavrecorderstatechangehandler12" device-type="phone,2in1,tablet,wearable,tv">OnAVRecorderStateChangeHandler<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onavrecorderstatechangehandler12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type OnAVRecorderStateChangeHandler = (state: AVRecorderState, reason: StateChangeReason) =&gt; void</p>     <p>状态机切换事件回调方法。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">state</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avrecorderstate9">AVRecorderState</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前录制状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">reason</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-e#statechangereason9">StateChangeReason</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前录制状态的切换原因。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="sourceopencallback18" device-type="phone,2in1,tablet,wearable,tv">SourceOpenCallback<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sourceopencallback18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type SourceOpenCallback = (request: MediaSourceLoadingRequest) =&gt; number</p>     <p>由应用实现此回调函数，应用需处理传入的资源打开请求，并返回所打开资源对应的唯一句柄。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">      </div></div></div>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">request</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-mediasourceloadingrequest">MediaSourceLoadingRequest</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">打开请求参数，包含请求资源的具体信息和数据推送方式。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">          <p>当前资源打开请求的句柄。大于0表示请求成功，小于或等于0表示请求失败。</p>          <p>- request对象对应句柄唯一。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ulu-c106="" class="highlight-div"><div _ngcontent-ulu-c106="" class="highlight-div-header"><div _ngcontent-ulu-c106="" class="highlight-div-header-left"><div _ngcontent-ulu-c106="" class="handle-button expand-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ulu-c106="" class="highlight-div-header-right"><div _ngcontent-ulu-c106="" class="handle-button ai-button"></div><div _ngcontent-ulu-c106="" class="handle-button line-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ulu-c106="" class="handle-button theme-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ulu-c106="" class="handle-button copy-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ulu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HashMap</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { media } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uuid</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">requests</span>: <span class="hljs-title class_">HashMap</span>&lt;<span class="hljs-built_in">number</span>, media.<span class="hljs-property">MediaSourceLoadingRequest</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sourceOpenCallback</span>: media.<span class="hljs-property">SourceOpenCallback</span> = <span class="hljs-function">(<span class="hljs-params">request: media.MediaSourceLoadingRequest</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Opening resource: <span class="hljs-subst">${request.url}</span>`</span>);</li><li>  <span class="hljs-comment">// 成功打开资源，返回唯一的句柄, 保证uuid和request对应。</span></li><li>  uuid += <span class="hljs-number">1</span>;</li><li>  requests.<span class="hljs-title function_">set</span>(uuid, request);</li><li>  <span class="hljs-keyword">return</span> uuid;</li><li>};</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="sourcereadcallback18" device-type="phone,2in1,tablet,wearable,tv">SourceReadCallback<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sourcereadcallback18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type SourceReadCallback = (uuid: number, requestedOffset: number, requestedLength: number) =&gt; void</p>     <p>由应用实现此回调函数，应用需记录读取请求，并在数据充足时通过对应的MediaSourceLoadingRequest对象的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-mediasourceloadingrequest#responddata18">respondData</a>方法推送数据。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">      </div></div></div>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uuid</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源句柄的标识。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">requestedOffset</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前媒体数据相对于资源起始位置的偏移量。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">requestedLength</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前请求的长度。值为-1时，表示到达资源末尾，此时推送完成后需通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-mediasourceloadingrequest#finishloading18">finishLoading</a>方法通知播放器推送结束。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ulu-c106="" class="highlight-div"><div _ngcontent-ulu-c106="" class="highlight-div-header"><div _ngcontent-ulu-c106="" class="highlight-div-header-left"><div _ngcontent-ulu-c106="" class="handle-button expand-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ulu-c106="" class="highlight-div-header-right"><div _ngcontent-ulu-c106="" class="handle-button ai-button"></div><div _ngcontent-ulu-c106="" class="handle-button line-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ulu-c106="" class="handle-button theme-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ulu-c106="" class="handle-button copy-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ulu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sourceReadCallback</span>: media.<span class="hljs-property">SourceReadCallback</span> = <span class="hljs-function">(<span class="hljs-params">uuid: <span class="hljs-built_in">number</span>, requestedOffset: <span class="hljs-built_in">number</span>, requestedLength: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Reading resource with handle <span class="hljs-subst">${uuid}</span>, offset: <span class="hljs-subst">${requestedOffset}</span>, length: <span class="hljs-subst">${requestedLength}</span>`</span>);</li><li>  <span class="hljs-comment">// 判断uuid是否合法、存储read请求，不要在read请求阻塞去推送数据和头信息。</span></li><li>};</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="sourceclosecallback18" device-type="phone,2in1,tablet,wearable,tv">SourceCloseCallback<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sourceclosecallback18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type SourceCloseCallback = (uuid: number) =&gt; void</p>     <p>由应用实现此回调函数，应用应释放相关资源。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>客户端在处理完请求后应立刻返回。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uuid</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">资源句柄的标识。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ulu-c106="" class="highlight-div"><div _ngcontent-ulu-c106="" class="highlight-div-header"><div _ngcontent-ulu-c106="" class="highlight-div-header-left"><div _ngcontent-ulu-c106="" class="handle-button expand-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ulu-c106="" class="highlight-div-header-right"><div _ngcontent-ulu-c106="" class="handle-button ai-button"></div><div _ngcontent-ulu-c106="" class="handle-button line-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ulu-c106="" class="handle-button theme-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ulu-c106="" class="handle-button copy-button"><div _ngcontent-ulu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ulu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">HashMap</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.util.HashMap'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">requests</span>: <span class="hljs-title class_">HashMap</span>&lt;<span class="hljs-built_in">number</span>, media.<span class="hljs-property">MediaSourceLoadingRequest</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sourceCloseCallback</span>: media.<span class="hljs-property">SourceCloseCallback</span> = <span class="hljs-function">(<span class="hljs-params">uuid: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Closing resource with handle <span class="hljs-subst">${uuid}</span>`</span>);</li><li>  <span class="hljs-comment">// 清除当前uuid相关资源。</span></li><li>  requests.<span class="hljs-title function_">remove</span>(uuid);</li><li>};</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="audiostatedeprecated" device-type="phone,2in1,tablet,wearable,tv">AudioState<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="audiostatedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type AudioState = 'idle' | 'playing' | 'paused' | 'stopped' | 'error'</p>     <p>音频播放的状态机。可通过state属性获取当前状态。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avplayerstate9">AVPlayerState</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AudioPlayer</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">'idle'</td>         <td class="cellrowborder" width="50%">音频播放空闲，dataload/reset成功后处于此状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'playing'</td>         <td class="cellrowborder" width="50%">音频正在播放，play成功后处于此状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'paused'</td>         <td class="cellrowborder" width="50%">音频暂停播放，pause成功后处于此状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'stopped'</td>         <td class="cellrowborder" width="50%">音频播放停止，stop/播放结束后处于此状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'error'</td>         <td class="cellrowborder" width="50%">错误状态。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="videoplaystatedeprecated" device-type="phone,2in1,tablet,wearable,tv">VideoPlayState<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="videoplaystatedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type VideoPlayState = 'idle' | 'prepared' | 'playing' | 'paused' | 'stopped' | 'error'</p>     <p>视频播放的状态机，可通过state属性获取当前状态。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 8开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-media-t#avplayerstate9">AVPlayerState</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoPlayer</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">'idle'</td>         <td class="cellrowborder" width="50%">视频播放空闲。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'prepared'</td>         <td class="cellrowborder" width="50%">视频播放准备。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'playing'</td>         <td class="cellrowborder" width="50%">视频正在播放。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'paused'</td>         <td class="cellrowborder" width="50%">视频暂停播放。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'stopped'</td>         <td class="cellrowborder" width="50%">视频播放停止。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'error'</td>         <td class="cellrowborder" width="50%">错误状态。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>