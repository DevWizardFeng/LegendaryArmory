<h1 _ngcontent-eqg-c119="" class="doc-title ng-star-inserted" title="XComponent"> XComponent </h1>

<div _ngcontent-eqg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>提供用于图形绘制和媒体数据写入的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/napi-xcomponent-guidelines#概述" target="_blank">Surface</a>，XComponent负责将其嵌入到视图中，支持应用自定义Surface位置和大小。具体指南请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/napi-xcomponent-guidelines" target="_blank">自定义渲染 (XComponent)文档</a>。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>该组件从API version 8 开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="子组件" device-type="phone,2in1,tablet,wearable,tv">子组件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="子组件" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>无</p>    </div>    <div class="tiledSection">     <h2 id="接口" device-type="phone,2in1,tablet,wearable,tv">接口<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="接口" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="xcomponent19" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">XComponent<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="xcomponent19" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>XComponent(params: NativeXComponentParameters)</p>     <p>在Native侧获取XComponent节点实例、注册XComponent持有的Surface的生命周期回调和触摸、鼠标、按键等组件事件回调。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">params</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#nativexcomponentparameters19">NativeXComponentParameters</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">定义XComponent的具体配置参数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="xcomponent12" device-type="phone,2in1,tablet,wearable,tv">XComponent<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="xcomponent12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>XComponent(options: XComponentOptions)</p>     <p>创建XComponent组件，支持在ArkTS侧获取SurfaceId、注册XComponent持有的Surface的生命周期回调和触摸、鼠标、按键等组件事件回调，支持AI分析。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#xcomponentoptions12">XComponentOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">定义XComponent的具体配置参数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="xcomponent10" device-type="phone,2in1,tablet,wearable,tv">XComponent<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="xcomponent10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>XComponent(value: {id: string, type: XComponentType, libraryname?: string, controller?: XComponentController})</p>     <p>创建XComponent组件，支持Native侧触发XComponent生命周期回调。</p>     <p>该接口从API version 12开始不再演进，推荐使用<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#xcomponent12">XComponent(options: XComponentOptions)</a>。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">组件的唯一标识，支持最大的字符串长度128。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#xcomponenttype10">XComponentType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于指定XComponent组件类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">libraryname</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">用Native层编译输出动态库名称（对应的动态库不支持跨模块加载），仅类型为SURFACE或TEXTURE时有效。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">controller</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#xcomponentcontroller">XComponentController</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">给组件绑定一个控制器，通过控制器调用组件方法，仅类型为SURFACE或TEXTURE时有效。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="xcomponentdeprecated" device-type="phone,2in1,tablet,wearable,tv">XComponent<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="xcomponentdeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>XComponent(value: {id: string, type: string, libraryname?: string, controller?: XComponentController})</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 12开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#xcomponent12">XComponent(options: XComponentOptions)</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">组件的唯一标识，支持最大的字符串长度128。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>用于指定XComponent组件类型，可选值仅有两个为：</p>          <p>-"surface"：用于EGL/OpenGLES和媒体数据写入，开发者定制的绘制内容单独展示到屏幕上。</p>          <p>-"component"<sup>9+</sup> ：XComponent将变成一个容器组件，并可在其中执行非UI逻辑以动态加载显示内容。</p>          <p>其他值均会被视为"surface"类型</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">libraryname</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">应用Native层编译输出动态库名称（对应的动态库不支持跨模块加载），仅XComponent类型为"surface"时有效。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">controller</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#xcomponentcontroller">XComponentcontroller</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">给组件绑定一个控制器，通过控制器调用组件方法，仅XComponent类型为"surface"时有效。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="xcomponentoptions12" device-type="phone,2in1,tablet,wearable,tv">XComponentOptions<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="xcomponentoptions12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义XComponent的具体配置参数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#xcomponenttype10">XComponentType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">用于指定XComponent组件类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">controller</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#xcomponentcontroller">XComponentController</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">给组件绑定一个控制器，通过控制器调用组件方法，仅类型为SURFACE或TEXTURE时有效。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">imageAIOptions</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-image-common#imageaioptions12">ImageAIOptions</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">给组件设置一个AI分析选项，通过此项可配置分析类型或绑定一个分析控制器。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="nativexcomponentparameters19" device-type="phone,2in1,tablet,wearable,tv">NativeXComponentParameters<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nativexcomponentparameters19" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义XComponent的具体配置参数。通过这种构造参数创建的XComponent，可以将其对应的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>对象传递至Native侧，使用NDK接口进行Surface生命周期的相关设置和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-listen-to-component-events" target="_blank">监听组件事件</a>。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#xcomponenttype10">XComponentType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">用于指定XComponent组件类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">imageAIOptions</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-image-common#imageaioptions12">ImageAIOptions</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">给组件设置一个AI分析选项，通过此项可配置分析类型或绑定一个分析控制器。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="属性" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>除支持通用属性外，还支持以下属性：</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>不支持foregroundColor、obscured和pixelStretchEffect属性，并且type为SURFACE类型时也不支持动态属性设置、自定义绘制、背景设置(backgroundColor除外)、图像效果(shadow除外)、maskShape和foregroundEffect属性。</p>       <p>对于TEXTURE和SURFACE类型的XComponent组件，当不设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-renderfit">renderFit</a>属性时，取默认值为RenderFit.RESIZE_FILL。</p>       <p>对于SURFACE类型的XComponent组件，背景色设置为不透明的纯黑色，在API version 18之前，其<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-renderfit">renderFit</a>通用属性仅支持设置为RenderFit.RESIZE_FILL；在API version 18及之后，支持所有的RenderFit枚举值。</p>       <p>对于使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-access-the-arkts-page" target="_blank">ArkUI NDK接口</a>创建的XComponent组件，不支持使用属性获取函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkui-nativemodule-arkui-nativenodeapi-1#getattribute">getAttribute</a>获取其renderFit属性值。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="enableanalyzer12" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">enableAnalyzer<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enableanalyzer12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>enableAnalyzer(enable: boolean)</p>     <p>设置组件支持AI分析，当前支持主体识别、文字识别和对象查找等功能。</p>     <p>本功能需要搭配XComponentController的<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#startimageanalyzer12">StartImageAnalyzer</a>和<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#stopimageanalyzer12">StopImageAnalyzer</a>一起使用。</p>     <p>不能和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-overlay">overlay</a>属性同时使用，两者同时设置时overlay中CustomBuilder属性将失效。该特性依赖设备能力。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enable</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>是否启用图像分析功能。</p>          <p>true：开启图像分析；false：关闭图像分析。</p>          <p>默认值：false</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>仅type为SURFACE和TEXTURE时该功能有效。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="enablesecure13" device-type="phone,2in1,tablet,wearable,tv">enableSecure<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enablesecure13" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>enableSecure(isSecure: boolean)</p>     <p>防止组件内自绘制内容被截屏、录屏。</p>     <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">isSecure</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>是否开启隐私图层模式。</p>          <p>true：开启隐私图层模式；false：关闭隐私图层模式。</p>          <p>默认值：false</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>仅type为SURFACE时有效。</p>       <p>不支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-build-ui-overview" target="_blank">ArkUI NDK接口</a>创建的XComponent组件。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="hdrbrightness20" device-type="phone,2in1,tablet,wearable,tv">hdrBrightness<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hdrbrightness20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>hdrBrightness(brightness: number)</p>     <p>用于调整组件播放HDR视频的亮度。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">brightness</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>用于调整组件播放HDR视频的亮度; brightness的取值范围为0.0~1.0; 小于0.0的值等价于0.0，大于1.0的值等价于1.0，异常值按1.0处理; 0.0 表示SDR视频的亮度，1.0 表示HDR视频的亮度。</p>          <p>默认值：1.0</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>仅type为SURFACE时有效。</p>       <p>不支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ndk-build-ui-overview" target="_blank">ArkUI NDK接口</a>创建的XComponent组件。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="事件" device-type="phone,2in1,tablet,wearable,tv">事件<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="事件" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>从API version 12开始，type为SURFACE或TEXTURE时，支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-component-general-events">通用事件</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当配置libraryname参数时，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-click">点击事件</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-touch">触摸事件</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-show-hide">挂载卸载事件</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-key">按键事件</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-focus-event">焦点事件</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-mouse-key">鼠标事件</a>仅响应C-API侧事件接口。</p>      </div></div></div>     <p>仅type为SURFACE或TEXTURE时以下事件有效：</p>    </div>    <div class="tiledSection">     <h3 id="onload" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">onLoad<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onload" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onLoad(callback: OnNativeLoadCallback )</p>     <p>插件加载完成时回调事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#onnativeloadcallback18">OnNativeLoadCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">XComponent持有的Surface创建后回调事件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="ondestroy" device-type="phone,2in1,tablet,wearable,tv">onDestroy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondestroy" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDestroy(event: VoidCallback )</p>     <p>插件卸载完成时回调事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#voidcallback12">VoidCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">XComponent销毁后回调事件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="onnativeloadcallback18" device-type="phone,2in1,tablet,wearable,tv">OnNativeLoadCallback<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnativeloadcallback18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type OnNativeLoadCallback = (event?: object) =&gt; void</p>     <p>XComponent持有的Surface创建后回调事件。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">获取XComponent实例对象的context，context上挂载的方法由开发者在Native层定义。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="xcomponentcontroller" device-type="phone,2in1,tablet,wearable,tv">XComponentController<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="xcomponentcontroller" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>XComponent组件的控制器，可以将此对象绑定至XComponent组件，然后通过控制器来调用组件方法。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h3 id="constructor" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>XComponentController的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>示例：</strong></p>     <div _ngcontent-eqg-c106="" class="highlight-div"><div _ngcontent-eqg-c106="" class="highlight-div-header"><div _ngcontent-eqg-c106="" class="highlight-div-header-left"><div _ngcontent-eqg-c106="" class="handle-button expand-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eqg-c106="" class="highlight-div-header-right"><div _ngcontent-eqg-c106="" class="handle-button ai-button"></div><div _ngcontent-eqg-c106="" class="handle-button line-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eqg-c106="" class="handle-button theme-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eqg-c106="" class="handle-button copy-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eqg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-attr">xcomponentController</span>: <span class="hljs-title class_">XComponentController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XComponentController</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getxcomponentsurfaceid9" device-type="phone,2in1,tablet,wearable,tv">getXComponentSurfaceId<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getxcomponentsurfaceid9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getXComponentSurfaceId(): string</p>     <p>获取XComponent对应Surface的ID，仅XComponent类型为SURFACE("surface")或TEXTURE时有效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">XComponent持有Surface的ID。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用自定义组件节点创建XComponent组件时，因为onLoad回调触发时机早于<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#onsurfacecreated12">onSurfaceCreated</a>，所以在onLoad回调中调用<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#getxcomponentsurfaceid9">getXComponentSurfaceId</a>获取surfaceId会失败，建议在<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#onsurfacecreated12">onSurfaceCreated</a>回调中获取。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-eqg-c106="" class="highlight-div"><div _ngcontent-eqg-c106="" class="highlight-div-header"><div _ngcontent-eqg-c106="" class="highlight-div-header-left"><div _ngcontent-eqg-c106="" class="handle-button expand-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eqg-c106="" class="highlight-div-header-right"><div _ngcontent-eqg-c106="" class="handle-button ai-button"></div><div _ngcontent-eqg-c106="" class="handle-button line-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eqg-c106="" class="handle-button theme-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eqg-c106="" class="handle-button copy-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eqg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">myXComponentController</span>: <span class="hljs-title class_">XComponentController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XComponentController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">XComponent</span>({</li><li>        <span class="hljs-attr">type</span>: <span class="hljs-title class_">XComponentType</span>.<span class="hljs-property">SURFACE</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">myXComponentController</span></li><li>      })</li><li>        .<span class="hljs-title function_">onLoad</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">myXComponentController</span>.<span class="hljs-title function_">getXComponentSurfaceId</span>();</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"XComponent SurfaceId: "</span> + surfaceId);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setxcomponentsurfacesizedeprecated" device-type="phone,2in1,tablet,wearable,tv">setXComponentSurfaceSize<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setxcomponentsurfacesizedeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setXComponentSurfaceSize(value: {surfaceWidth: number, surfaceHeight: number}): void</p>     <p>设置XComponent持有Surface的宽度和高度，仅XComponent类型为SURFACE("surface")或TEXTURE时有效。</p>     <p>该接口从API version 12开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#setxcomponentsurfacerect12">setXComponentSurfaceRect</a>替代。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">surfaceWidth</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">XComponent持有Surface的宽度。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">surfaceHeight</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">XComponent持有Surface的高度。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="getxcomponentcontext" device-type="phone,2in1,tablet,wearable,tv">getXComponentContext<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getxcomponentcontext" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getXComponentContext(): Object</p>     <p>获取XComponent实例对象的context，仅XComponent类型为SURFACE("surface")或TEXTURE时有效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Object</td>         <td class="cellrowborder" width="50%">获取XComponent实例对象的context，context包含的具体接口方法由开发者自定义，context内容与onLoad回调中的第一个参数一致。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="setxcomponentsurfacerect12" device-type="phone,2in1,tablet,wearable,tv">setXComponentSurfaceRect<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setxcomponentsurfacerect12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setXComponentSurfaceRect(rect: SurfaceRect): void</p>     <p>设置XComponent持有Surface的显示区域，包括宽高和相对于组件左上角的位置坐标，仅XComponent类型为SURFACE("surface")或TEXTURE时有效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rect</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#surfacerect12对象说明">SurfaceRect</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">XComponent持有Surface的显示区域。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>rect参数中的offsetX/offsetY不设置或传入异常值时，Surface显示区域相对于XComponent左上角x/y轴的偏移效果默认按照居中显示。</p>       <p>rect参数中的surfaceWidth和surfaceHeight存在0、负数或其他异常值时，调用该接口设置显示区域不生效。未调用该接口主动设置Surface显示区域时，surfaceWidth默认与组件宽度一致，surfaceHeight默认与组件高度一致。</p>       <p>该方法优先级高于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#border">border</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-size#padding">padding</a>等可以改变内容偏移和大小的属性。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="getxcomponentsurfacerect12" device-type="phone,2in1,tablet,wearable,tv">getXComponentSurfaceRect<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getxcomponentsurfacerect12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getXComponentSurfaceRect(): SurfaceRect</p>     <p>获取XComponent持有Surface的显示区域，包括宽高和相对于组件左上角的位置坐标，仅XComponent类型为SURFACE("surface")或TEXTURE时有效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#surfacerect12对象说明">SurfaceRect</a></td>         <td class="cellrowborder" width="50%">获取XComponent持有Surface的显示区域。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="onsurfacecreated12" device-type="phone,2in1,tablet,wearable,tv">onSurfaceCreated<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsurfacecreated12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onSurfaceCreated(surfaceId: string): void</p>     <p>当XComponent持有的Surface创建后进行该回调，仅XComponent类型为SURFACE("surface")或TEXTURE时有效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">surfaceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调该方法的时候，绑定XComponent持有Surface的ID。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>仅当XComponent组件未设置libraryname参数时，会进行该回调。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="onsurfacechanged12" device-type="phone,2in1,tablet,wearable,tv">onSurfaceChanged<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsurfacechanged12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onSurfaceChanged(surfaceId: string, rect: SurfaceRect): void</p>     <p>当XComponent持有的Surface大小改变后（包括首次创建时的大小改变）进行该回调，仅XComponent类型为SURFACE("surface")或TEXTURE时有效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">surfaceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调该方法的时候，绑定XComponent持有Surface的ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">rect</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#surfacerect12对象说明">SurfaceRect</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调该方法的时候，绑定XComponent持有Surface的显示区域。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>仅当XComponent组件未设置libraryname参数时，会进行该回调。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="onsurfacedestroyed12" device-type="phone,2in1,tablet,wearable,tv">onSurfaceDestroyed<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsurfacedestroyed12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onSurfaceDestroyed(surfaceId: string): void</p>     <p>当XComponent持有的Surface销毁后进行该回调，仅XComponent类型为SURFACE("surface")或TEXTURE时有效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">surfaceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调该方法的时候，绑定XComponent持有Surface的ID。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>仅当XComponent组件未设置libraryname参数时，会进行该回调。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="startimageanalyzer12" device-type="phone,2in1,tablet,wearable,tv">startImageAnalyzer<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="startimageanalyzer12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startImageAnalyzer(config: ImageAnalyzerConfig): Promise&lt;void&gt;</p>     <p>配置AI分析并启动AI分析功能，使用前需先<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#enableanalyzer12">启用图像AI分析能力</a>。使用Promise异步回调。</p>     <p>该方法调用时，将截取调用时刻的画面帧进行分析，使用时需注意启动分析的时机，避免出现画面和分析内容不一致的情况。</p>     <p>若该方法尚未执行完毕，此时重复调用，则会触发错误回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>分析类型不支持动态修改。</p>       <p>该特性依赖设备能力，不支持该能力的情况下，将返回错误码。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-image-common#imageanalyzerconfig12">ImageAnalyzerConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">执行AI分析所需要的入参，用于配置AI分析功能。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。用于获取AI分析是否成功执行。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image-analyzer">AI分析类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.15.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.15.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">110001</td>         <td class="cellrowborder" width="50%">Image analysis feature is unsupported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">110002</td>         <td class="cellrowborder" width="50%">Image analysis is currently being executed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">110003</td>         <td class="cellrowborder" width="50%">Image analysis is stopped.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="stopimageanalyzer12" device-type="phone,2in1,tablet,wearable,tv">stopImageAnalyzer<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stopimageanalyzer12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopImageAnalyzer(): void</p>     <p>停止AI分析功能，AI分析展示的内容将被销毁。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在startImageAnalyzer方法未返回结果时调用本方法，会触发其错误回调。</p>       <p>该特性依赖设备能力。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h3 id="setxcomponentsurfacerotation12" device-type="phone,2in1,tablet,wearable,tv">setXComponentSurfaceRotation<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setxcomponentsurfacerotation12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setXComponentSurfaceRotation(rotationOptions: SurfaceRotationOptions): void</p>     <p>设置XComponent持有Surface在屏幕旋转时是否锁定方向，仅XComponent类型为SURFACE("surface")时有效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rotationOptions</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#surfacerotationoptions12对象说明">SurfaceRotationOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置XComponent持有Surface在屏幕旋转时是否锁定方向。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>rotationOptions未配置时，默认XComponent持有Surface在屏幕旋转时不锁定方向，跟随屏幕进行旋转。</p>       <p>仅在屏幕旋转过程中生效，旋转完成后不再锁定Surface。</p>       <p>仅在屏幕旋转90°，即发生横竖屏切换时生效。</p>       <p>锁定旋转后的Buffer宽高需要保持不变，否则会有拉伸问题。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="getxcomponentsurfacerotation12" device-type="phone,2in1,tablet,wearable,tv">getXComponentSurfaceRotation<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getxcomponentsurfacerotation12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getXComponentSurfaceRotation(): Required&lt;SurfaceRotationOptions&gt;</p>     <p>获取XComponent持有Surface在屏幕旋转时是否锁定方向的设置，仅XComponent类型为SURFACE("surface")时有效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Required&lt;<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#surfacerotationoptions12对象说明">SurfaceRotationOptions</a>&gt;</td>         <td class="cellrowborder" width="50%">获取XComponent持有Surface在屏幕旋转时是否锁定方向的设置。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="lockcanvas20" device-type="phone,2in1,tablet,wearable,tv">lockCanvas<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="lockcanvas20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>lockCanvas(): DrawingCanvas | null</p>     <p>返回可用于向XComponent上绘制内容的画布对象。具体绘制方法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-graphics-drawing-canvas">Canvas</a>。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawingrenderingcontext#drawingcanvas12对象说明">DrawingCanvas</a> | null</td>         <td class="cellrowborder" width="50%">可用于向XComponent区域绘制的画布对象或者空对象null。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>如果当前XComponent状态无法获取画布对象则将返回null。原因通常为：</p>       <ol>        <li>         <p>XComponent持有的Surface未创建完成（可通过设置<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#onload">onLoad</a>/<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#onsurfacecreated12">onSurfaceCreated</a>回调来确定，此回调触发时，Surface已创建完成）。</p></li>        <li>         <p>之前已经调用过lockCanvas来获取过画布对象，且该画布对象未调用<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#unlockcanvasandpost20">unlockCanvasAndPost</a>去释放。</p></li>       </ol>       <p>只支持TEXTURE和SURFACE模式。</p>       <p>使用此接口后，同时在NDK侧获取NativeWindow并调用相关接口进行绘制，可能出现缓冲区竞争和上下文冲突而发生绘制画面错误等异常，因此不允许使用。</p>       <p>此接口需要和<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#unlockcanvasandpost20">unlockCanvasAndPost</a>接口配对使用，具体参考<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#示例3使用画布对象在xcomponent上绘制内容">示例3使用画布对象在XComponent上绘制内容</a>。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h3 id="unlockcanvasandpost20" device-type="phone,2in1,tablet,wearable,tv">unlockCanvasAndPost<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unlockcanvasandpost20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unlockCanvasAndPost(canvas: DrawingCanvas): void</p>     <p>将画布对象中的内容绘制在XComponent区域，并释放该画布对象。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">canvas</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-drawingrenderingcontext#drawingcanvas12对象说明">DrawingCanvas</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">之前调用lockCanvas方法返回的画布对象。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>         <p>画布对象调用unlockCanvasAndPost释放后，不可再使用该画布对象。</p></li>        <li>         <p>只支持TEXTURE和SURFACE模式。</p></li>        <li>         <p>使用此接口后，同时在NDK侧获取NativeWindow并调用相关接口进行绘制，可能出现缓冲区竞争和上下文冲突而发生绘制画面错误等异常，因此不允许使用。</p></li>        <li>         <p>此接口需要和<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#lockcanvas20">lockCanvas</a>接口配对使用，具体参考<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#示例3使用画布对象在xcomponent上绘制内容">示例3使用画布对象在XComponent上绘制内容</a>。</p></li>       </ol>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="surfacerotationoptions12对象说明" device-type="phone,2in1,tablet,wearable,tv">SurfaceRotationOptions<sup>12+</sup>对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="surfacerotationoptions12对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于描述XComponent持有Surface在屏幕旋转时是否锁定方向的设置。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">lock</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>Surface在屏幕旋转时是否锁定方向，未设置时默认取值为false，即不锁定方向。</p>          <p>true：锁定方向；false：不锁定方向。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="surfacerect12对象说明" device-type="phone,2in1,tablet,wearable,tv">SurfaceRect<sup>12+</sup>对象说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="surfacerect12对象说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于描述XComponent持有Surface的显示区域。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">offsetX</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">Surface显示区域相对于XComponent组件左上角的x轴坐标，单位：px。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">offsetY</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">Surface显示区域相对于XComponent组件左上角的y轴坐标，单位：px。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">surfaceWidth</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">Surface显示区域的宽度，单位：px。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">surfaceHeight</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">Surface显示区域的高度，单位：px。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>surfaceWidth和surfaceHeight属性在未调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#setxcomponentsurfacerect12">setXComponentSurfaceRect</a>也未设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-border#border">border</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-attributes-size#padding">padding</a>等属性时，其取值大小为XComponent组件的大小。</p>       <p>surfaceWidth和surfaceHeight属性的取值都不可超过8192px，否则会导致渲染异常。</p>       <p>沉浸式场景下，默认布局的SurfaceRect不包括安全区，需调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#setxcomponentsurfacerect12">setXComponentSurfaceRect</a>接口主动设置Surface显示区域达到沉浸式效果。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="示例" device-type="phone,2in1,tablet,wearable,tv">示例<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="示例" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>示例效果请以真机运行为准，当前DevEco Studio预览器不支持。</p>    </div>    <div class="tiledSection">     <h3 id="示例1图像ai分析功能" class="firsth2">示例1（图像AI分析功能）<i class="anchor-icon anchor-icon-link" anchorid="示例1图像ai分析功能" tips="复制节点链接"></i></h3>          <p>使用enableAnalyzer属性开启图像AI分析功能。可通过XComponentController控制开始、停止图形AI分析。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>本示例画图逻辑具体实现（和nativeRender相关的函数实现）可以参考<a href="https://gitcode.com/HarmonyOS_Samples/guide-snippets/tree/master/ArkUIKit/ArkTSXComponent" target="_blank">ArkTS XComponent示例</a></p>      </div></div></div>     <div _ngcontent-eqg-c106="" class="highlight-div"><div _ngcontent-eqg-c106="" class="highlight-div-header"><div _ngcontent-eqg-c106="" class="highlight-div-header-left"><div _ngcontent-eqg-c106="" class="handle-button expand-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eqg-c106="" class="highlight-div-header-right"><div _ngcontent-eqg-c106="" class="handle-button ai-button"></div><div _ngcontent-eqg-c106="" class="handle-button line-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eqg-c106="" class="handle-button theme-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eqg-c106="" class="handle-button copy-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eqg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> nativeRender <span class="hljs-keyword">from</span> <span class="hljs-string">'libnativerender.so'</span>;<span class="hljs-comment">// 开发者自己实现的so，详见上述说明。</span></li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomXComponentController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">XComponentController</span> {</li><li>  <span class="hljs-title function_">onSurfaceCreated</span>(<span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSurfaceCreated surfaceId: <span class="hljs-subst">${surfaceId}</span>`</span>);</li><li>    nativeRender.<span class="hljs-title class_">SetSurfaceId</span>(<span class="hljs-title class_">BigInt</span>(surfaceId));</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onSurfaceChanged</span>(<span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">rect</span>: <span class="hljs-title class_">SurfaceRect</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSurfaceChanged surfaceId: <span class="hljs-subst">${surfaceId}</span>, rect: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(rect)}</span>}`</span>);</li><li>    nativeRender.<span class="hljs-title class_">ChangeSurface</span>(<span class="hljs-title class_">BigInt</span>(surfaceId), rect.<span class="hljs-property">surfaceWidth</span>, rect.<span class="hljs-property">surfaceHeight</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onSurfaceDestroyed</span>(<span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSurfaceDestroyed surfaceId: <span class="hljs-subst">${surfaceId}</span>`</span>);</li><li>    nativeRender.<span class="hljs-title class_">DestroySurface</span>(<span class="hljs-title class_">BigInt</span>(surfaceId));</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">XComponentExample</span> {</li><li>  <span class="hljs-attr">xComponentController</span>: <span class="hljs-title class_">XComponentController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomXComponentController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">ImageAnalyzerConfig</span> = {</li><li>    <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>]</li><li>  };</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">aiController</span>: <span class="hljs-title class_">ImageAnalyzerController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageAnalyzerController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">ImageAIOptions</span> = {</li><li>    <span class="hljs-attr">types</span>: [<span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">SUBJECT</span>, <span class="hljs-title class_">ImageAnalyzerType</span>.<span class="hljs-property">TEXT</span>],</li><li>    <span class="hljs-attr">aiController</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiController</span></li><li>  };</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">xcWidth</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"720px"</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">xcHeight</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"720px"</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentStatus</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"index"</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">5</span> }) {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Native XComponent Sample'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'24fp'</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">500</span>)</li><li>          .<span class="hljs-title function_">margin</span>({</li><li>            <span class="hljs-attr">left</span>: <span class="hljs-number">24</span>,</li><li>            <span class="hljs-attr">top</span>: <span class="hljs-number">12</span></li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">24</span> })</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">56</span>)</li><li>
</li><li>      <span class="hljs-title class_">XComponent</span>({</li><li>        <span class="hljs-attr">type</span>: <span class="hljs-title class_">XComponentType</span>.<span class="hljs-property">SURFACE</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">xComponentController</span>,</li><li>        <span class="hljs-attr">imageAIOptions</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span></li><li>      })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">xcWidth</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">xcHeight</span>)</li><li>        .<span class="hljs-title function_">enableAnalyzer</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> surfaceId = <span class="hljs-variable language_">this</span>.<span class="hljs-property">xComponentController</span>.<span class="hljs-title function_">getXComponentSurfaceId</span>();</li><li>          nativeRender.<span class="hljs-title class_">ChangeColor</span>(<span class="hljs-title class_">BigInt</span>(surfaceId));</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">hasChangeColor</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>          <span class="hljs-keyword">if</span> (nativeRender.<span class="hljs-title class_">GetXComponentStatus</span>(<span class="hljs-title class_">BigInt</span>(surfaceId))) {</li><li>            hasChangeColor = nativeRender.<span class="hljs-title class_">GetXComponentStatus</span>(<span class="hljs-title class_">BigInt</span>(surfaceId)).<span class="hljs-property">hasChangeColor</span>;</li><li>          }</li><li>          <span class="hljs-keyword">if</span> (hasChangeColor) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentStatus</span> = <span class="hljs-string">"change color"</span>;</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentStatus</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'24fp'</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">500</span>)</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'start AI analyze'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">xComponentController</span>.<span class="hljs-title function_">startImageAnalyzer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>)</li><li>              .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"analysis complete"</span>);</li><li>              })</li><li>              .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"error code: "</span> + error.<span class="hljs-property">code</span>);</li><li>              })</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">2</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'stop AI analyze'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">xComponentController</span>.<span class="hljs-title function_">stopImageAnalyzer</span>();</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">2</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'get analyzer types'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiController</span>.<span class="hljs-title function_">getImageAnalyzerSupportTypes</span>();</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">2</span>)</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Draw Star'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-string">'16fp'</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">500</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">24</span> })</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> surfaceId = <span class="hljs-variable language_">this</span>.<span class="hljs-property">xComponentController</span>.<span class="hljs-title function_">getXComponentSurfaceId</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`surface rect is <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.xComponentController.getXComponentSurfaceRect()}</span>`</span>);</li><li>            nativeRender.<span class="hljs-title class_">DrawPattern</span>(<span class="hljs-title class_">BigInt</span>(surfaceId));</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">hasDraw</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>            <span class="hljs-keyword">if</span> (nativeRender.<span class="hljs-title class_">GetXComponentStatus</span>(<span class="hljs-title class_">BigInt</span>(surfaceId))) {</li><li>              hasDraw = nativeRender.<span class="hljs-title class_">GetXComponentStatus</span>(<span class="hljs-title class_">BigInt</span>(surfaceId)).<span class="hljs-property">hasDraw</span>;</li><li>            }</li><li>            <span class="hljs-keyword">if</span> (hasDraw) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentStatus</span> = <span class="hljs-string">"draw star"</span>;</li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">2</span>)</li><li>      }.<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="407" originwidth="291" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115420.94069064504424511209372522472352:50001231000000:2800:4E3239AA1F895AD2CE39628AF6B0D4787CB1B098C3ECB6B40B1A4E0F48D403DC.gif" class="notEnlarge" width="291" height="407"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例2在surface旋转过程中锁定">示例2（在surface旋转过程中锁定）<i class="anchor-icon anchor-icon-link" anchorid="示例2在surface旋转过程中锁定" tips="复制节点链接"></i></h3>          <p>通过setXComponentSurfaceRotation设置surface在屏幕旋转过程中锁定方向，不跟随屏幕进行旋转。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>本示例画图逻辑具体实现（和nativeRender相关的函数实现）可以参考<a href="https://gitcode.com/openharmony/applications_app_samples/tree/master/code/BasicFeature/Native/ArkTSXComponent" target="_blank">ArkTS XComponent示例</a>。</p>      </div></div></div>     <div _ngcontent-eqg-c106="" class="highlight-div"><div _ngcontent-eqg-c106="" class="highlight-div-header"><div _ngcontent-eqg-c106="" class="highlight-div-header-left"><div _ngcontent-eqg-c106="" class="handle-button expand-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eqg-c106="" class="highlight-div-header-right"><div _ngcontent-eqg-c106="" class="handle-button ai-button"></div><div _ngcontent-eqg-c106="" class="handle-button line-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eqg-c106="" class="handle-button theme-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eqg-c106="" class="handle-button copy-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eqg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> nativeRender <span class="hljs-keyword">from</span> <span class="hljs-string">'libnativerender.so'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyXComponentController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">XComponentController</span> {</li><li>  <span class="hljs-title function_">onSurfaceCreated</span>(<span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSurfaceCreated surfaceId: <span class="hljs-subst">${surfaceId}</span>`</span>);</li><li>    nativeRender.<span class="hljs-title class_">SetSurfaceId</span>(<span class="hljs-title class_">BigInt</span>(surfaceId));</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onSurfaceChanged</span>(<span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">rect</span>: <span class="hljs-title class_">SurfaceRect</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSurfaceChanged surfaceId: <span class="hljs-subst">${surfaceId}</span>, rect: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(rect)}</span>}`</span>);</li><li>    nativeRender.<span class="hljs-title class_">ChangeSurface</span>(<span class="hljs-title class_">BigInt</span>(surfaceId), rect.<span class="hljs-property">surfaceWidth</span>, rect.<span class="hljs-property">surfaceHeight</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onSurfaceDestroyed</span>(<span class="hljs-attr">surfaceId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onSurfaceDestroyed surfaceId: <span class="hljs-subst">${surfaceId}</span>`</span>);</li><li>    nativeRender.<span class="hljs-title class_">DestroySurface</span>(<span class="hljs-title class_">BigInt</span>(surfaceId));</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isLock</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">xc_width</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">500</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">xc_height</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">700</span>;</li><li>  <span class="hljs-attr">myXComponentController</span>: <span class="hljs-title class_">XComponentController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyXComponentController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Start</span> }) {</li><li>      <span class="hljs-title class_">XComponent</span>({</li><li>        <span class="hljs-attr">id</span>: <span class="hljs-string">"XComponent"</span>,</li><li>        <span class="hljs-attr">type</span>: <span class="hljs-title class_">XComponentType</span>.<span class="hljs-property">SURFACE</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">myXComponentController</span></li><li>      })</li><li>        .<span class="hljs-title function_">onLoad</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">surfaceRotation</span>: <span class="hljs-title class_">SurfaceRotationOptions</span> = { <span class="hljs-attr">lock</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLock</span> };</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">myXComponentController</span>.<span class="hljs-title function_">setXComponentSurfaceRotation</span>(surfaceRotation);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Surface getXComponentSurfaceRotation lock = "</span> +</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">myXComponentController</span>.<span class="hljs-title function_">getXComponentSurfaceRotation</span>().<span class="hljs-property">lock</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">xc_width</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">xc_height</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"Draw"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> surfaceId = <span class="hljs-variable language_">this</span>.<span class="hljs-property">myXComponentController</span>.<span class="hljs-title function_">getXComponentSurfaceId</span>();</li><li>          nativeRender.<span class="hljs-title class_">DrawPattern</span>(<span class="hljs-title class_">BigInt</span>(surfaceId));</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="示例3使用画布对象在xcomponent上绘制内容">示例3（使用画布对象在XComponent上绘制内容）<i class="anchor-icon anchor-icon-link" anchorid="示例3使用画布对象在xcomponent上绘制内容" tips="复制节点链接"></i></h3>          <p>从API version 20开始，该示例通过调用<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#lockcanvas20">lockCanvas</a>返回画布对象，通过画布对象调用对应的绘制接口，再调用<a href="/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent#unlockcanvasandpost20">unlockCanvasAndPost</a>在XComponent上绘制内容。</p>     <div _ngcontent-eqg-c106="" class="highlight-div"><div _ngcontent-eqg-c106="" class="highlight-div-header"><div _ngcontent-eqg-c106="" class="highlight-div-header-left"><div _ngcontent-eqg-c106="" class="handle-button expand-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eqg-c106="" class="highlight-div-header-right"><div _ngcontent-eqg-c106="" class="handle-button ai-button"></div><div _ngcontent-eqg-c106="" class="handle-button line-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eqg-c106="" class="handle-button theme-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eqg-c106="" class="handle-button copy-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eqg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { drawing } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">xcController</span>: <span class="hljs-title class_">XComponentController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XComponentController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">mCanvas</span>: <span class="hljs-title class_">DrawingCanvas</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">XComponent</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">XComponentType</span>.<span class="hljs-property">SURFACE</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">xcController</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"80%"</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">"80%"</span>)</li><li>        .<span class="hljs-title function_">onLoad</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">xcController</span>.<span class="hljs-title function_">lockCanvas</span>();</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span>.<span class="hljs-title function_">drawColor</span>(<span class="hljs-number">255</span>, <span class="hljs-number">240</span>, <span class="hljs-number">250</span>, <span class="hljs-number">255</span>); <span class="hljs-comment">// 每次绘制前必须完全重绘整个XComponent区域,可以调用此方法实现</span></li><li>            <span class="hljs-keyword">const</span> brush = <span class="hljs-keyword">new</span> drawing.<span class="hljs-title class_">Brush</span>(); <span class="hljs-comment">// 创建画刷对象</span></li><li>            brush.<span class="hljs-title function_">setColor</span>({ <span class="hljs-comment">// 设置画刷的颜色</span></li><li>              <span class="hljs-attr">alpha</span>: <span class="hljs-number">255</span>,</li><li>              <span class="hljs-attr">red</span>: <span class="hljs-number">39</span>,</li><li>              <span class="hljs-attr">green</span>: <span class="hljs-number">135</span>,</li><li>              <span class="hljs-attr">blue</span>: <span class="hljs-number">217</span></li><li>            });</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span>.<span class="hljs-title function_">attachBrush</span>(brush); <span class="hljs-comment">// 绑定画刷到画布上</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span>.<span class="hljs-title function_">drawRect</span>({ <span class="hljs-comment">// 绘制一个矩形</span></li><li>              <span class="hljs-attr">left</span>: <span class="hljs-number">300</span>,</li><li>              <span class="hljs-attr">right</span>: <span class="hljs-number">800</span>,</li><li>              <span class="hljs-attr">top</span>: <span class="hljs-number">100</span>,</li><li>              <span class="hljs-attr">bottom</span>: <span class="hljs-number">800</span></li><li>            });</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span>.<span class="hljs-title function_">detachBrush</span>(); <span class="hljs-comment">// 将画刷与画布解绑</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">xcController</span>.<span class="hljs-title function_">unlockCanvasAndPost</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="1160" originwidth="560" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115420.42720461321027221827421850944581:50001231000000:2800:904A5E1E061CA4D0474D056E3CAF30C2B30E671358FB9DE3090A8D222381F82C.png" width="560" height="1160"></span></p>    </div>    <div class="tiledSection">     <h3 id="示例4xcomponent实现沉浸式效果">示例4（XComponent实现沉浸式效果）<i class="anchor-icon anchor-icon-link" anchorid="示例4xcomponent实现沉浸式效果" tips="复制节点链接"></i></h3>          <p>从API version 20开始，在示例3的基础上，调用setXComponentSurfaceRect接口主动设置Surface显示区域达到沉浸式效果。</p>     <div _ngcontent-eqg-c106="" class="highlight-div"><div _ngcontent-eqg-c106="" class="highlight-div-header"><div _ngcontent-eqg-c106="" class="highlight-div-header-left"><div _ngcontent-eqg-c106="" class="handle-button expand-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eqg-c106="" class="highlight-div-header-right"><div _ngcontent-eqg-c106="" class="handle-button ai-button"></div><div _ngcontent-eqg-c106="" class="handle-button line-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eqg-c106="" class="handle-button theme-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eqg-c106="" class="handle-button copy-button"><div _ngcontent-eqg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eqg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { drawing } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li><span class="hljs-keyword">import</span> { display } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">xcController</span>: <span class="hljs-title class_">XComponentController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XComponentController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">mCanvas</span>: <span class="hljs-title class_">DrawingCanvas</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">screenWidth</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">screenHeight</span>:<span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> displayClass = display.<span class="hljs-title function_">getDefaultDisplaySync</span>();</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">screenWidth</span> = displayClass.<span class="hljs-property">width</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">screenHeight</span> = displayClass.<span class="hljs-property">height</span>;</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`失败代码: <span class="hljs-subst">${error.code}</span>，信息: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">XComponent</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">XComponentType</span>.<span class="hljs-property">SURFACE</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">xcController</span> })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">"100%"</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>)</li><li>        .<span class="hljs-title function_">onLoad</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 请在此处设置Surface大小，过大可能会导致绘制时间长</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">xcController</span>.<span class="hljs-title function_">setXComponentSurfaceRect</span>({<span class="hljs-attr">surfaceWidth</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">screenWidth</span>, <span class="hljs-attr">surfaceHeight</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">screenHeight</span>, <span class="hljs-attr">offsetX</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">offsetY</span>: <span class="hljs-number">0</span>});</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">xcController</span>.<span class="hljs-title function_">lockCanvas</span>();</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span>) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span>.<span class="hljs-title function_">drawColor</span>(<span class="hljs-number">255</span>, <span class="hljs-number">39</span>, <span class="hljs-number">135</span>, <span class="hljs-number">217</span>); <span class="hljs-comment">// 每次绘制前必须完全重绘整个XComponent区域，可以调用此方法实现</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">xcController</span>.<span class="hljs-title function_">unlockCanvasAndPost</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mCanvas</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">expandSafeArea</span>([<span class="hljs-title class_">SafeAreaType</span>.<span class="hljs-property">SYSTEM</span>], [<span class="hljs-title class_">SafeAreaEdge</span>.<span class="hljs-property">TOP</span>, <span class="hljs-title class_">SafeAreaEdge</span>.<span class="hljs-property">BOTTOM</span>]);</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="1280" originwidth="720" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115420.67676912027732264447780478480842:50001231000000:2800:1C5AEEBB057483244DA9D299AE854E24F5D7B8A7F3D8F10EB20EEDA82B572105.jpeg" width="720" height="1280"></span></p>    </div>   </div>   <div></div></div>