<h1 _ngcontent-jcd-c119="" class="doc-title ng-star-inserted" title="abr_base.h"> abr_base.h </h1>

<div _ngcontent-jcd-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section790995569093807" device-type="phone,tablet">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section790995569093807" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>声明不区分图形API平台的ABR（自适应稳态渲染）接口。</p> <p><strong>库：</strong> libabr.so</p> <p><strong>系统能力：</strong> SystemCapability.GraphicsGame.RenderAccelerate</p> <p><strong>起始版本：</strong> 5.0.0(12)</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate">GraphicsAccelerate</a></p> </div> <div class="tiledSection"><h2 id="section1692297352093807" device-type="phone,tablet">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1692297352093807" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div></div> <div class="tiledSection"><h3 id="nested-classes" device-type="phone,tablet" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nested-classes" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>struct  <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_a_b_r___vector3">ABR_Vector3</a></p> </td> <td class="cellrowborder" width="50%"><p>此结构体描述ABR三维向量。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>struct  <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_a_b_r___camera_data">ABR_CameraData</a></p> </td> <td class="cellrowborder" width="50%"><p>此结构体描述游戏应用每帧的相机运动数据，ABR会结合相机运动数据自适应调整FrameBuffer（帧缓冲，下文简称Buffer）分辨率因子。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="typedef-members" device-type="phone,tablet">类型定义<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="typedef-members" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>typedef struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a></p> </td> <td class="cellrowborder" width="50%"><p>此结构体描述ABR上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef enum <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga9359d16ecefa21f0e6e5f29732cbf6f4">ABR_RenderAPI_Type</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga3a6ead3a3c0f19a6434e97fda13f42f2">ABR_RenderAPI_Type</a></p> </td> <td class="cellrowborder" width="50%"><p>此枚举描述ABR支持的图形API类型。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_a_b_r___vector3">ABR_Vector3</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga71a845f23f7ec4c0935db8e9f00ab8b9">ABR_Vector3</a></p> </td> <td class="cellrowborder" width="50%"><p>此结构体描述ABR三维向量。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_a_b_r___camera_data">ABR_CameraData</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#gada21a47272d5db8e28e2a9bb4fd033d4">ABR_CameraData</a></p> </td> <td class="cellrowborder" width="50%"><p>此结构体描述游戏应用每帧的相机运动数据，ABR会结合相机运动数据自适应调整FrameBuffer（帧缓冲，下文简称Buffer）分辨率因子。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef enum <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga86d5860f91dc4f1de6b381cd65389b9d">ABR_ErrorCode</a></p> </td> <td class="cellrowborder" width="50%"><p>此枚举描述ABR接口调用错误码。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="enum-members" device-type="phone,tablet">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enum-members" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga9359d16ecefa21f0e6e5f29732cbf6f4">ABR_RenderAPI_Type</a> {</p> <p>RENDER_API_GLES = 0</p> <p>}</p> </td> <td class="cellrowborder" width="50%"><p>此枚举描述ABR支持的图形API类型。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> {</p> <p>ABR_SUCCESS = 0,</p> <p>ABR_INVALID_PARAMETER = 401,</p> <p>ABR_CONTEXT_CONFIG_AFTER_ACTIVE = 1009501001,</p> <p>ABR_CONTEXT_NOT_CONFIG = 1009501002,</p> <p>ABR_CONTEXT_NOT_ACTIVE = 1009501003,</p> <p>ABR_METADATA_INVALID = 1009501004,</p> <p>ABR_FRAMEBUFFER_INVALID = 1009501005</p> <p>}</p> </td> <td class="cellrowborder" width="50%"><p>此枚举描述ABR接口调用错误码。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="func-members" device-type="phone,tablet">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="func-members" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>* <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga8f785903a5382ff31baef78a3968f66a">HMS_ABR_CreateContext</a>(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga9359d16ecefa21f0e6e5f29732cbf6f4">ABR_RenderAPI_Type</a> type)</p> </td> <td class="cellrowborder" width="50%"><p>创建ABR上下文实例，每次调用会新建<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>对象，并返回指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>对象的指针。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga6c613e02088d559b9dc1450fde15bc2a">HMS_ABR_SetTargetFps</a>(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>* context, const uint32_t targetFps)</p> </td> <td class="cellrowborder" width="50%"><p>配置ABR上下文实例的目标帧率属性。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga1001c6a7739d8ce57bf851986f121bf5">HMS_ABR_SetScaleRange</a>(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>* context, const float minValue, const float maxValue)</p> </td> <td class="cellrowborder" width="50%"><p>配置ABR上下文实例的Buffer分辨率因子范围属性。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga463d8d5396bfd5f6ed800ddab616479a">HMS_ABR_Activate</a>(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>* context)</p> </td> <td class="cellrowborder" width="50%"><p>激活ABR上下文实例。激活ABR上下文实例前需调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga6c613e02088d559b9dc1450fde15bc2a">HMS_ABR_SetTargetFps</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga1001c6a7739d8ce57bf851986f121bf5">HMS_ABR_SetScaleRange</a>接口进行实例属性的配置。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga791519fde19801e6da60094cf077b00f">HMS_ABR_IsActive</a>(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>* context, bool* isActive)</p> </td> <td class="cellrowborder" width="50%"><p>查询ABR上下文实例是否处于激活状态。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga4abb4b37392e77c15fbedfa8ceba3da4">HMS_ABR_Deactivate</a>(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>* context)</p> </td> <td class="cellrowborder" width="50%"><p>去激活ABR上下文实例，可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga463d8d5396bfd5f6ed800ddab616479a">HMS_ABR_Activate</a>重新激活。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga5b895e36d31e46f71d04aba78c8f3716">HMS_ABR_UpdateCameraData</a>(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>* context, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_a_b_r___camera_data">ABR_CameraData</a>* data)</p> </td> <td class="cellrowborder" width="50%"><p>更新每帧相机运动数据，ABR更新相机运动数据前需调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga463d8d5396bfd5f6ed800ddab616479a">HMS_ABR_Activate</a>接口激活ABR上下文实例。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga936129328fea3a5f77b2aae4935f67c6">HMS_ABR_GetScale</a>(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>* context, float* scale)</p> </td> <td class="cellrowborder" width="50%"><p>获取ABR Buffer分辨率因子。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#section157311245143415">HMS_ABR_GetNextScale</a>(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>* context, float* scale)</p> </td> <td class="cellrowborder" width="50%"><p>获取下一帧的ABR Buffer分辨率因子。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga72df702d70a8326b5b46c118be6ad1d7">ABR_ErrorCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#gaf3c03179b9bcf1b8475230cbbb0d877c">HMS_ABR_DestroyContext</a>(<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/_graphics_accelerate#ga52e8dba39ee979b70826401b3d36574e">ABR_Context</a>** context)</p> </td> <td class="cellrowborder" width="50%"><p>销毁ABR上下文实例并释放内存资源。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>