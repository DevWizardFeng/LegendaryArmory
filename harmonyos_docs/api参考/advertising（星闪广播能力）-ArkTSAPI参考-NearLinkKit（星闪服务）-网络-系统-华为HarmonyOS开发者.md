<h1 _ngcontent-ajs-c119="" class="doc-title ng-star-inserted" title="advertising（星闪广播能力）"> advertising（星闪广播能力） </h1>

<div _ngcontent-ajs-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供了发送星闪广播的相关功能，包括启动广播、停止广播、订阅广播状态等。</p>    <p><strong>起始版本：</strong>5.0.1(13)</p>    <div class="tiledSection">     <h2 id="section148115414307" device-type="phone,2in1,tv,tablet,wearable">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section148115414307" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { advertising } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section295015817218" device-type="phone,2in1,tv,tablet,wearable">AdvertisingParams<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section295015817218" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示发送广播携带的参数。</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.1" width="14.299999999999999%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.2" width="22.16%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.4" width="21.77%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.5" width="34.25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>advertisingSettings</p></td>         <td class="cellrowborder" width="22.16%">          <p><a href="/consumer/cn/doc/harmonyos-references/nearlink-advertising#section1525727766">AdvertisingSettings</a></p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="21.77%">          <p>否</p></td>         <td class="cellrowborder" width="34.25%">          <p>广播配置参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>advertisingData</p></td>         <td class="cellrowborder" width="22.16%">          <p><a href="/consumer/cn/doc/harmonyos-references/nearlink-advertising#section1235325161112">AdvertisingData</a></p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="21.77%">          <p>否</p></td>         <td class="cellrowborder" width="34.25%">          <p>广播数据包。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1525727766" device-type="phone,2in1,tv,tablet,wearable">AdvertisingSettings<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1525727766" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示广播配置参数。</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="14.299999999999999%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="22.16%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="10.32%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="45.7%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>interval</p></td>         <td class="cellrowborder" width="22.16%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="10.32%">          <p>是</p></td>         <td class="cellrowborder" width="45.7%">          <p>广播间隔配置参数。单位slot，范围160-16777215，默认值为5000。1个slot对应的时间长度是0.125ms，例如：5000*0.125=625ms。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>power</p></td>         <td class="cellrowborder" width="22.16%">          <p><a href="/consumer/cn/doc/harmonyos-references/nearlink-advertising#section185441313151716">TxPowerMode</a></p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="10.32%">          <p>是</p></td>         <td class="cellrowborder" width="45.7%">          <p>广播发射功率配置参数。如果不配置，则默认值为ADV_TX_POWER_LOW。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>isConnectable</p></td>         <td class="cellrowborder" width="22.16%">          <p>boolean</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="10.32%">          <p>是</p></td>         <td class="cellrowborder" width="45.7%">          <p>true: 表示可连接的广播。false：表示不可连接的广播。默认值为true。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1235325161112" device-type="phone,2in1,tv,tablet,wearable">AdvertisingData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1235325161112" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示广播数据包。</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="15%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="21.46%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="20.13%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="35.89%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="15%">          <p>serviceUuids</p></td>         <td class="cellrowborder" width="21.46%">          <p>Array&lt;string&gt;</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="20.13%">          <p>是</p></td>         <td class="cellrowborder" width="35.89%">          <p>服务UUID列表。若未配置则默认不携带该字段。UUID格式参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nearlink-faq#section1263634155618" target="_blank">星闪标准服务UUID</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15%">          <p>manufacturerData</p></td>         <td class="cellrowborder" width="21.46%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-advertising#section1622511479139">ManufacturerData</a>&gt;</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="20.13%">          <p>是</p></td>         <td class="cellrowborder" width="35.89%">          <p>厂商数据。若未配置则默认不携带该字段。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15%">          <p>serviceData</p></td>         <td class="cellrowborder" width="21.46%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-advertising#section15831210191613">ServiceData</a>&gt;</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="20.13%">          <p>是</p></td>         <td class="cellrowborder" width="35.89%">          <p>服务数据。若未配置则默认不携带该字段。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15%">          <p>includeDeviceName</p></td>         <td class="cellrowborder" width="21.46%">          <p>boolean</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="20.13%">          <p>是</p></td>         <td class="cellrowborder" width="35.89%">          <p>指示广播数据中是否携带本机设备名。true：表示包含设备名称。false：表示不包含设备名称。默认值为false。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1622511479139" device-type="phone,2in1,tv,tablet,wearable">ManufacturerData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1622511479139" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示厂商数据。</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="14.299999999999999%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="22.16%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="21.77%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="34.25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>manufacturerId</p></td>         <td class="cellrowborder" width="22.16%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="21.77%">          <p>否</p></td>         <td class="cellrowborder" width="34.25%">          <p>厂商ID。取值范围(0, 65535]。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>manufacturerData</p></td>         <td class="cellrowborder" width="22.16%">          <p>ArrayBuffer</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="21.77%">          <p>否</p></td>         <td class="cellrowborder" width="34.25%">          <p>厂商数据。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section15831210191613" device-type="phone,2in1,tv,tablet,wearable">ServiceData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15831210191613" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示服务相关数据。</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.1" width="14.299999999999999%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.2" width="22.16%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.4" width="21.77%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.5" width="34.25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>serviceUuid</p></td>         <td class="cellrowborder" width="22.16%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="21.77%">          <p>否</p></td>         <td class="cellrowborder" width="34.25%">          <p>表示服务的UUID。UUID格式参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nearlink-faq#section1263634155618" target="_blank">星闪标准服务UUID</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>serviceData</p></td>         <td class="cellrowborder" width="22.16%">          <p>ArrayBuffer</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="21.77%">          <p>否</p></td>         <td class="cellrowborder" width="34.25%">          <p>表示服务数据。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section188870256234" device-type="phone,2in1,tv,tablet,wearable">AdvertisingStateChangeInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section188870256234" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示广播启停状态变化信息。</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.1" width="14.299999999999999%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.2" width="22.16%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.4" width="21.77%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.5" width="34.25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>advertisingId</p></td>         <td class="cellrowborder" width="22.16%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="21.77%">          <p>否</p></td>         <td class="cellrowborder" width="34.25%">          <p>表示广播ID。取值范围[0, 255]。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.299999999999999%">          <p>state</p></td>         <td class="cellrowborder" width="22.16%">          <p><a href="/consumer/cn/doc/harmonyos-references/nearlink-advertising#section757023015351">AdvertisingState</a></p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="21.77%">          <p>否</p></td>         <td class="cellrowborder" width="34.25%">          <p>表示当前广播状态。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section185441313151716" device-type="phone,2in1,tv,tablet,wearable">TxPowerMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section185441313151716" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示广播发送模式，为枚举值。</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.1" width="19.141914191419144%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.2" width="20.022002200220022%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.3" width="60.83608360836084%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.141914191419144%">          <p>ADV_TX_POWER_LOW</p></td>         <td class="cellrowborder" width="20.022002200220022%">          <p>1</p></td>         <td class="cellrowborder" width="60.83608360836084%">          <p>表示低功耗模式。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.141914191419144%">          <p>ADV_TX_POWER_MEDIUM</p></td>         <td class="cellrowborder" width="20.022002200220022%">          <p>2</p></td>         <td class="cellrowborder" width="60.83608360836084%">          <p>表示中等功耗模式。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.141914191419144%">          <p>ADV_TX_POWER_HIGH</p></td>         <td class="cellrowborder" width="20.022002200220022%">          <p>3</p></td>         <td class="cellrowborder" width="60.83608360836084%">          <p>表示高功耗模式。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section757023015351" device-type="phone,2in1,tv,tablet,wearable">AdvertisingState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section757023015351" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示广播状态，为枚举值。</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.4.1.1" width="21.912191219121908%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.4.1.2" width="16.31163116311631%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.4.1.3" width="61.776177617761775%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="21.912191219121908%">          <p>STARTED</p></td>         <td class="cellrowborder" width="16.31163116311631%">          <p>1</p></td>         <td class="cellrowborder" width="61.776177617761775%">          <p>表示广播已启动。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.912191219121908%">          <p>STOPPED</p></td>         <td class="cellrowborder" width="16.31163116311631%">          <p>2</p></td>         <td class="cellrowborder" width="61.776177617761775%">          <p>表示广播已停止。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section87401754163116" device-type="phone,2in1,tv,tablet,wearable">startAdvertising<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section87401754163116" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startAdvertising(advertisingParams: AdvertisingParams): Promise&lt;number&gt;</p>     <p>发送星闪广播。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.1" width="13.320000000000002%">           <p>参数名</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.2" width="25.319999999999997%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.3" width="7.12%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.4" width="54.24%">           <p>说明</p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="13.320000000000002%">           <p>advertisingParams</p></td>          <td class="cellrowborder" width="25.319999999999997%">           <p><a href="/consumer/cn/doc/harmonyos-references/nearlink-advertising#section295015817218">AdvertisingParams</a></p></td>          <td class="cellrowborder" width="7.12%">           <p>是</p></td>          <td class="cellrowborder" width="54.24%">           <p>广播相关参数。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.12.8.2.1.3.1.1" width="28.050000000000004%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.12.8.2.1.3.1.2" width="71.95%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="28.050000000000004%">           <p>Promise&lt;number&gt;</p></td>          <td class="cellrowborder" width="71.95%">           <p>Promise对象，返回本次开启的广播ID。广播ID是随机分配的唯一标识值。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" style="border: none;" width="49.419999999999995%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" style="border: none;" width="50.580000000000005%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>201</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Permission denied</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>401</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Invalid parameter</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>801</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Capability not supported</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>1009700003</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Nearlink is off</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>1009700099</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Operation failed</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">advertising</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">manufactureValueBuffer</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">Uint8Array</span>(<span class="hljs-number">4</span>);</li><li><span class="hljs-variable">manufactureValueBuffer</span>[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;</li><li><span class="hljs-variable">manufactureValueBuffer</span>[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;</li><li><span class="hljs-variable">manufactureValueBuffer</span>[<span class="hljs-number">2</span>] = <span class="hljs-number">3</span>;</li><li><span class="hljs-variable">manufactureValueBuffer</span>[<span class="hljs-number">3</span>] = <span class="hljs-number">4</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">serviceValueBuffer</span> = <span class="hljs-variable">new</span> <span class="hljs-title function_">Uint8Array</span>(<span class="hljs-number">4</span>);</li><li><span class="hljs-variable">serviceValueBuffer</span>[<span class="hljs-number">0</span>] = <span class="hljs-number">4</span>;</li><li><span class="hljs-variable">serviceValueBuffer</span>[<span class="hljs-number">1</span>] = <span class="hljs-number">6</span>;</li><li><span class="hljs-variable">serviceValueBuffer</span>[<span class="hljs-number">2</span>] = <span class="hljs-number">7</span>;</li><li><span class="hljs-variable">serviceValueBuffer</span>[<span class="hljs-number">3</span>] = <span class="hljs-number">8</span>;</li><li><span class="hljs-variable">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'manufactureValueBuffer = '</span>+ <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">manufactureValueBuffer</span>));</li><li><span class="hljs-variable">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'serviceValueBuffer = '</span>+ <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">serviceValueBuffer</span>));</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">setting</span>: <span class="hljs-title class_">advertising</span>.<span class="hljs-title class_">AdvertisingSettings</span> = {</li><li>  <span class="hljs-variable">interval</span>:<span class="hljs-number">5000</span>,</li><li>  <span class="hljs-variable">power</span>:<span class="hljs-title class_">advertising</span>.<span class="hljs-title class_">TxPowerMode</span>.<span class="hljs-title class_">ADV_TX_POWER_LOW</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">manufactureDataUnit</span>: <span class="hljs-title class_">advertising</span>.<span class="hljs-title class_">ManufacturerData</span> = {</li><li>  <span class="hljs-variable">manufacturerId</span>:<span class="hljs-number">4567</span>,</li><li>  <span class="hljs-variable">manufacturerData</span>:<span class="hljs-title class_">manufactureValueBuffer</span>.<span class="hljs-title class_">buffer</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">serviceDataUnit</span>: <span class="hljs-title class_">advertising</span>.<span class="hljs-title class_">ServiceData</span> = {</li><li>  <span class="hljs-variable">serviceUuid</span>:<span class="hljs-string">"37bea880-fc70-11ea-b720-000000001234"</span>,</li><li>  <span class="hljs-variable">serviceData</span>:<span class="hljs-title class_">serviceValueBuffer</span>.<span class="hljs-title class_">buffer</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">advData</span>: <span class="hljs-title class_">advertising</span>.<span class="hljs-title class_">AdvertisingData</span> = {</li><li>  <span class="hljs-variable">serviceUuids</span>:[<span class="hljs-string">"37bea880-fc70-11ea-b720-000000001234"</span>],</li><li>  <span class="hljs-variable">manufacturerData</span>:[<span class="hljs-variable">manufactureDataUnit</span>],</li><li>  <span class="hljs-variable">serviceData</span>:[<span class="hljs-variable">serviceDataUnit</span>]</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">advertisingParams</span>: <span class="hljs-title class_">advertising</span>.<span class="hljs-title class_">AdvertisingParams</span> = {</li><li>  <span class="hljs-variable">advertisingSettings</span>: <span class="hljs-title class_">setting</span>,</li><li>  <span class="hljs-variable">advertisingData</span>: <span class="hljs-title class_">advData</span></li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-variable">advId</span> = -<span class="hljs-number">1</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable">advertising</span>.<span class="hljs-title function_">startAdvertising</span>(<span class="hljs-variable">advertisingParams</span>).<span class="hljs-title function_">then</span>((<span class="hljs-variable">advertisingId</span>:<span class="hljs-title class_">number</span>) =&gt; {</li><li>    <span class="hljs-variable">advId</span> = <span class="hljs-variable">advertisingId</span>;</li><li>    <span class="hljs-variable">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'advertising id:'</span>+ <span class="hljs-variable">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable">advId</span>));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (<span class="hljs-variable">err</span>) {</li><li>  <span class="hljs-variable">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (<span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>).<span class="hljs-variable">code</span> + <span class="hljs-string">', errMessage: '</span> + (<span class="hljs-variable">err</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">BusinessError</span>).<span class="hljs-variable">message</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1238104011424" device-type="phone,2in1,tv,tablet,wearable">stopAdvertising<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1238104011424" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopAdvertising(advertisingId: number): Promise&lt;void&gt;</p>     <p>停止发送星闪广播。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.1" width="13.320000000000002%">           <p>参数名</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.2" width="25.319999999999997%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.3" width="7.12%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.4" width="54.24%">           <p>说明</p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="13.320000000000002%">           <p>advertisingId</p></td>          <td class="cellrowborder" width="25.319999999999997%">           <p>number</p></td>          <td class="cellrowborder" width="7.12%">           <p>是</p></td>          <td class="cellrowborder" width="54.24%">           <p>广播ID，开启广播时获取。取值范围[0, 255]。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <div class="p">      <strong>返回值：</strong>      <div class="tablenoborder">       <div class="tbBox"><table class="tableClass2_t">                         <tbody><tr class="firstRow">          <th align="left" class="cellrowborder" id="mcps1.3.13.8.2.1.3.1.1" width="28.050000000000004%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.13.8.2.1.3.1.2" width="71.95%">           <p>说明</p></th>         </tr><tr>          <td class="cellrowborder" width="28.050000000000004%">           <p>Promise&lt;void&gt;</p></td>          <td class="cellrowborder" width="71.95%">           <p>Promise对象，无返回值。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" style="border: none;" width="49.419999999999995%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" style="border: none;" width="50.580000000000005%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>201</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Permission denied</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>401</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Invalid parameter</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>801</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Capability not supported</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>1009700003</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Nearlink is off</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>1009700099</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Operation failed</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { advertising } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">advId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">// advId在开启广播时获取，参考startAdvertising接口返回值</span></li><li>  advertising.<span class="hljs-title function_">stopAdvertising</span>(advId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"stop advertising success"</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section13106021163" device-type="phone,2in1,tv,tablet,wearable">on( 'advertisingStateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13106021163" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'advertisingStateChange', callback: Callback&lt;AdvertisingStateChangeInfo&gt;): void</p>     <p>订阅星闪广播状态变化事件。</p>     <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.1" width="13.320000000000002%">           <p>参数名</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.2" width="25.319999999999997%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.3" width="7.12%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.4" width="54.24%">           <p>说明</p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="13.320000000000002%">           <p>type</p></td>          <td class="cellrowborder" width="25.319999999999997%">           <p>string</p></td>          <td class="cellrowborder" width="7.12%">           <p>是</p></td>          <td class="cellrowborder" width="54.24%">           <p>固定填写"advertisingStateChange"字符串，表示星闪广播状态变化事件。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="13.320000000000002%">           <p>callback</p></td>          <td class="cellrowborder" width="25.319999999999997%">           <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-advertising#section188870256234">AdvertisingStateChangeInfo</a>&gt;</p></td>          <td class="cellrowborder" width="7.12%">           <p>是</p></td>          <td class="cellrowborder" width="54.24%">           <p>表示广播状态变化回调函数。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" style="border: none;" width="49.419999999999995%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" style="border: none;" width="50.580000000000005%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>201</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Permission denied</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>401</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Invalid parameter</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>801</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Capability not supported</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { advertising } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">onReceiveEvent</span>:<span class="hljs-function">(<span class="hljs-params">data: advertising.AdvertisingStateChangeInfo</span>) =&gt;</span> <span class="hljs-keyword">void</span> = <span class="hljs-function">(<span class="hljs-params">data: advertising.AdvertisingStateChangeInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'advertisingId:'</span>+ data.<span class="hljs-property">advertisingId</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'advertisingState:'</span>+ data.<span class="hljs-property">state</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  advertising.<span class="hljs-title function_">on</span>(<span class="hljs-string">'advertisingStateChange'</span>, onReceiveEvent);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1552411314504" device-type="phone,2in1,tv,tablet,wearable">off( 'advertisingStateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1552411314504" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'advertisingStateChange', callback?: Callback&lt;AdvertisingStateChangeInfo&gt;): void</p>     <p>取消订阅星闪广播状态变化事件。</p>     <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p>     <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p>     <p><strong>起始版本：</strong>5.0.1(13)</p>     <div class="p">      <strong>参数：</strong>      <div class="tablenoborder">       <div class="tbBox"><table>        <thead>         <tr>          <th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.1" width="9.65%">           <p>参数名</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.2" width="28.99%">           <p>类型</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.3" width="7.12%">           <p>必填</p></th>          <th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.4" width="54.24%">           <p>说明</p></th>         </tr>        </thead>                 <tbody><tr>          <td class="cellrowborder" width="9.65%">           <p>type</p></td>          <td class="cellrowborder" width="28.99%">           <p>string</p></td>          <td class="cellrowborder" width="7.12%">           <p>是</p></td>          <td class="cellrowborder" width="54.24%">           <p>固定填写"advertisingStateChange"字符串，表示星闪广播状态变化事件。</p></td>         </tr>         <tr>          <td class="cellrowborder" width="9.65%">           <p>callback</p></td>          <td class="cellrowborder" width="28.99%">           <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-advertising#section188870256234">AdvertisingStateChangeInfo</a>&gt;</p></td>          <td class="cellrowborder" width="7.12%">           <p>否</p></td>          <td class="cellrowborder" width="54.24%">           <p>可选参数，需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p></td>         </tr>               </tbody></table></div>      </div>     </div>     <p><strong>错误码：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" style="border: none;" width="49.419999999999995%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" style="border: none;" width="50.580000000000005%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>201</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Permission denied</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>401</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Invalid parameter</p></td>        </tr>        <tr>         <td class="cellrowborder" style="border: none;" width="49.419999999999995%">          <p>801</p></td>         <td class="cellrowborder" style="border: none;" width="50.580000000000005%">          <p>Capability not supported</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { advertising } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  advertising.<span class="hljs-title function_">off</span>(<span class="hljs-string">'advertisingStateChang</span><em><span class="hljs-string">e</span></em><span class="hljs-string">'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>   </div>   <div></div></div>