<h1 _ngcontent-igc-c119="" class="doc-title ng-star-inserted" title="aip_retrieval.h"> aip_retrieval.h </h1>

<div _ngcontent-igc-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section587087722145301" device-type="phone,2in1,tablet">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section587087722145301" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>提供知识检索相关的接口。</p> <p><strong>库：</strong> libnative_aip_retrieval_ndk.so</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong> 6.0.0(20)</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval">Retrieval</a></p> </div> <div class="tiledSection"><h2 id="section1686688029145301" device-type="phone,2in1,tablet">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1686688029145301" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div></div> <div class="tiledSection"><h3 id="typedef-members" device-type="phone,2in1,tablet" class="firsth2">类型定义<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="typedef-members" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>typedef struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gadd0ee87ef07f39395b03ff4db042aa91">OH_Retrieval_Retriever</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gadd0ee87ef07f39395b03ff4db042aa91">OH_Retrieval_Retriever</a></p> </td> <td class="cellrowborder" width="50%"><p>定义检索器类型，检索器是进行检索的句柄。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaf53480d04ebd0697af001a3a00f26b61">OH_Retrieval_Config</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaf53480d04ebd0697af001a3a00f26b61">OH_Retrieval_Config</a></p> </td> <td class="cellrowborder" width="50%"><p>定义检索器配置。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga9e93c397a65a6e6438cee50e3166f0fe">OH_Retrieval_DbConfig</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga9e93c397a65a6e6438cee50e3166f0fe">OH_Retrieval_DbConfig</a></p> </td> <td class="cellrowborder" width="50%"><p>定义一个用于打开数据库存储的数据库配置。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef enum <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaa9bd8706c16355372cb1eb39d7148205">Retrieval_Channel_Type</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaa9bd8706c16355372cb1eb39d7148205">Retrieval_Channel_Type</a></p> </td> <td class="cellrowborder" width="50%"><p>定义数据索引类型，目前仅包含向量索引数据。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef void(* <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaf0f9144574f545243e2a035c0805b7d6">OH_Retrieval_Callback</a>) (void *context, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga3d8c3ba973c81dc8f510a69bc6f3a952">OH_Retrieval_Record</a> *record, int errCode)</p> </td> <td class="cellrowborder" width="50%"><p>检索结果记录的回调函数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="enum-members" device-type="phone,2in1,tablet">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enum-members" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaa9bd8706c16355372cb1eb39d7148205">Retrieval_Channel_Type</a> { RETRIEVAL_TYPE_VECTOR = 1 }</p> </td> <td class="cellrowborder" width="50%"><p>定义数据索引类型，目前仅包含向量索引数据。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="func-members" device-type="phone,2in1,tablet">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="func-members" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>int <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gac6d2c1dd3039a0ac1a6996435600a81b">OH_Retrieval_CreateRetriever</a> (const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaf53480d04ebd0697af001a3a00f26b61">OH_Retrieval_Config</a> *config, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gadd0ee87ef07f39395b03ff4db042aa91">OH_Retrieval_Retriever</a> **retriever)</p> </td> <td class="cellrowborder" width="50%"><p>读取检索配置，初始化检索器。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>int <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga1dc6c697ce9b8ff2a5901e154a7aae16">OH_Retrieval_DestroyRetriever</a> (<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gadd0ee87ef07f39395b03ff4db042aa91">OH_Retrieval_Retriever</a> *retriever)</p> </td> <td class="cellrowborder" width="50%"><p>销毁通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gac6d2c1dd3039a0ac1a6996435600a81b">OH_Retrieval_CreateRetriever</a>获得的检索器。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaf53480d04ebd0697af001a3a00f26b61">OH_Retrieval_Config</a> * <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga2174e9883347dee95b57863a47b60f98">OH_Retrieval_CreateConfig</a> ()</p> </td> <td class="cellrowborder" width="50%"><p>获取检索器配置。用于初始化检索器。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>int <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaf7646a7caa380dcfaff025669c8336b9">OH_Retrieval_DestroyConfig</a> (<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaf53480d04ebd0697af001a3a00f26b61">OH_Retrieval_Config</a> *config)</p> </td> <td class="cellrowborder" width="50%"><p>销毁通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga2174e9883347dee95b57863a47b60f98">OH_Retrieval_CreateConfig</a>获得的检索配置。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga9e93c397a65a6e6438cee50e3166f0fe">OH_Retrieval_DbConfig</a> * <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga238499e6ca79658b59080658ad59e717">OH_Retrieval_CreateDbConfig</a> ()</p> </td> <td class="cellrowborder" width="50%"><p>创建一个配置项以打开数据库。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>int <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga08500cc36d88c15fc0e45e98a2534681">OH_Retrieval_DestroyDbConfig</a> (<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga9e93c397a65a6e6438cee50e3166f0fe">OH_Retrieval_DbConfig</a> *dbConfig)</p> </td> <td class="cellrowborder" width="50%"><p>销毁<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga238499e6ca79658b59080658ad59e717">OH_Retrieval_CreateDbConfig</a>创建的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga9e93c397a65a6e6438cee50e3166f0fe">OH_Retrieval_DbConfig</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>int <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gab69fc668e86d62c8e2f1cfdfc29de12e">OH_Retrieval_SetDbConfig</a> (<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga9e93c397a65a6e6438cee50e3166f0fe">OH_Retrieval_DbConfig</a> *dbConfig, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-configv2" target="_blank">OH_Rdb_ConfigV2</a> *rdbConfig)</p> </td> <td class="cellrowborder" width="50%"><p>在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga9e93c397a65a6e6438cee50e3166f0fe">OH_Retrieval_DbConfig</a>中设置数据库配置。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>int <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga217ef10e651eb8ed7e85fd5099c21939">OH_Retrieval_AddConfig</a> (<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaf53480d04ebd0697af001a3a00f26b61">OH_Retrieval_Config</a> *config, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaa9bd8706c16355372cb1eb39d7148205">Retrieval_Channel_Type</a> channelType, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga9e93c397a65a6e6438cee50e3166f0fe">OH_Retrieval_DbConfig</a> *dbConfig)</p> </td> <td class="cellrowborder" width="50%"><p>设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaf53480d04ebd0697af001a3a00f26b61">OH_Retrieval_Config</a>中的数据库配置。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>int <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga9b5b65705a02d8817f65dd01955cfe77">OH_Retrieval_Retrieve</a> (const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gadd0ee87ef07f39395b03ff4db042aa91">OH_Retrieval_Retriever</a> *retriever, const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#ga754a8a9b14076a9cfd7be8dacbcae38e">OH_Retrieval_Query</a> *query, const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gab273fa3774c357b746a8b1f3d223022e">OH_Retrieval_Condition</a> *condition, void *context, const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-capi-retrieval#gaf0f9144574f545243e2a035c0805b7d6">OH_Retrieval_Callback</a> *callback)</p> </td> <td class="cellrowborder" width="50%"><p>执行检索。获得检索器句柄后，输入检索查询词，根据检索条件执行检索，得到检索结果。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>