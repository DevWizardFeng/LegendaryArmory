<h1 _ngcontent-pjq-c119="" class="doc-title ng-star-inserted" title="assetDownloadManager（资源包下载管理）"> assetDownloadManager（资源包下载管理） </h1>

<div _ngcontent-pjq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供资源包下载管理能力。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="tiledSection"><h2 id="section164051883419" device-type="phone,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section164051883419" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section82071855806" device-type="phone,tablet">DownloadFault<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section82071855806" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>资源包下载失败原因的枚举。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.6.1.4.1.1" width="29.98%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.4.1.2" width="10.35%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.4.1.3" width="59.67%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="29.98%"><p>FAULT_FILE_ALREADY_EXISTS</p> </td> <td class="cellrowborder" width="10.35%"><p>0</p> </td> <td class="cellrowborder" width="59.67%"><p>资源包已存在。</p> </td> </tr> <tr><td class="cellrowborder" width="29.98%"><p>FAULT_FILE_ERROR</p> </td> <td class="cellrowborder" width="10.35%"><p>1</p> </td> <td class="cellrowborder" width="59.67%"><p>文件操作失败。</p> </td> </tr> <tr><td class="cellrowborder" width="29.98%"><p>FAULT_INSUFFICIENT_SPACE</p> </td> <td class="cellrowborder" width="10.35%"><p>2</p> </td> <td class="cellrowborder" width="59.67%"><p>用户设备的内存空间不足。</p> </td> </tr> <tr><td class="cellrowborder" width="29.98%"><p>FAULT_DISCONNECT</p> </td> <td class="cellrowborder" width="10.35%"><p>3</p> </td> <td class="cellrowborder" width="59.67%"><p>下载过程中链接丢失或断开。</p> </td> </tr> <tr><td class="cellrowborder" width="29.98%"><p>FAULT_TIMEOUT</p> </td> <td class="cellrowborder" width="10.35%"><p>4</p> </td> <td class="cellrowborder" width="59.67%"><p>下载超时，例如HTTP 408请求超时、或504网关超时。</p> </td> </tr> <tr><td class="cellrowborder" width="29.98%"><p>FAULT_PROTOCOL</p> </td> <td class="cellrowborder" width="10.35%"><p>5</p> </td> <td class="cellrowborder" width="59.67%"><p>HTTP协议错误，例如HTTP 500服务器内部错误、或HTTP 400错误请求。</p> </td> </tr> <tr><td class="cellrowborder" width="29.98%"><p>FAULT_DNS</p> </td> <td class="cellrowborder" width="10.35%"><p>6</p> </td> <td class="cellrowborder" width="59.67%"><p>DNS域名解析错误，无法解析服务器地址。</p> </td> </tr> <tr><td class="cellrowborder" width="29.98%"><p>FAULT_SSL</p> </td> <td class="cellrowborder" width="10.35%"><p>7</p> </td> <td class="cellrowborder" width="59.67%"><p>SSL/TLS证书错误。</p> </td> </tr> <tr><td class="cellrowborder" width="29.98%"><p>FAULT_REDIRECT</p> </td> <td class="cellrowborder" width="10.35%"><p>8</p> </td> <td class="cellrowborder" width="59.67%"><p>重定向错误，例如超出最大重定向限制或无效的重定向URL。</p> </td> </tr> <tr><td class="cellrowborder" width="29.98%"><p>FAULT_UNKNOWN</p> </td> <td class="cellrowborder" width="10.35%"><p>9</p> </td> <td class="cellrowborder" width="59.67%"><p>未知错误。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section15394544131416" device-type="phone,tablet">State<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15394544131416" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>资源包下载任务状态的枚举。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.1" width="27.900000000000002%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.2" width="12.43%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.3" width="59.67%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="27.900000000000002%"><p>CREATED</p> </td> <td class="cellrowborder" width="12.43%"><p>0</p> </td> <td class="cellrowborder" width="59.67%"><p>已创建的下载任务。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>WAITING</p> </td> <td class="cellrowborder" width="12.43%"><p>1</p> </td> <td class="cellrowborder" width="59.67%"><p>等待执行的下载任务。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>DOWNLOADING</p> </td> <td class="cellrowborder" width="12.43%"><p>2</p> </td> <td class="cellrowborder" width="59.67%"><p>正在下载中的任务。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>PAUSED</p> </td> <td class="cellrowborder" width="12.43%"><p>3</p> </td> <td class="cellrowborder" width="59.67%"><p>处于暂停状态的下载任务。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>FINISHED</p> </td> <td class="cellrowborder" width="12.43%"><p>4</p> </td> <td class="cellrowborder" width="59.67%"><p>下载任务已完成。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>FAILED</p> </td> <td class="cellrowborder" width="12.43%"><p>5</p> </td> <td class="cellrowborder" width="59.67%"><p>任务下载失败。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section14401125712" device-type="phone,tablet">AssetDownloadConfig<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14401125712" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>资源包下载任务的配置信息。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>identifier</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>任务ID。下载任务的唯一标识。最大长度32个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>url</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>当前下载任务URL。最大长度512个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>isEssential</p> </td> <td class="cellrowborder" width="15%"><p>boolean</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>是否为必需资源：</p> <ul><li>false：非必需资源。默认值。</li><li>true：必需资源。</li></ul> <p>下载必需资源的优先级高于非必需资源。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>groupId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>组ID，用于标识资源的版本信息。最大长度32个字符。</p> <p>默认值：空字符串。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>fileName</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>下载资源的文件名。若输入文件名，系统下载的临时文件将以该文件名命名，否则，文件名将以任务ID命名。最大长度128个字符。</p> <p>默认值：空字符串。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>begins</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>HTTP范围请求的起始字节位置。</p> <p>默认值：0。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>ends</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>HTTP范围请求的结束字节位置。</p> <p>默认值：0。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>userData</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>允许用户自定义的扩展字段。最大长度1024个字节。</p> <p>默认值：空字符串。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1639510932819" device-type="phone,tablet">AssetDownloadTask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1639510932819" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>资源包下载任务的信息。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>config</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section14401125712">AssetDownloadConfig</a></p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>资源包下载任务的配置信息，包含任务ID、URL、下载优先级等信息。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>taskId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>系统自动生成的任务ID，用于唯一标识下载任务。</p> <p>最大长度36个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>state</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section15394544131416">State</a></p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>资源包下载任务的状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1791922193210" device-type="phone,tablet">DownloadProgressInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1791922193210" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>资源包下载任务的进度信息。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>downloadTask</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section1639510932819">AssetDownloadTask</a></p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>资源包下载任务的信息。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>totalBytesWritten</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>待下载的资源总大小，单位：字节。</p> <p>默认值：0。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>totalExpectedBytes</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>已下载的资源总大小，单位：字节。</p> <p>默认值：0。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section13627145473413" device-type="phone,tablet">DownloadCompletedInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13627145473413" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>资源包下载任务的完成信息。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>downloadTask</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section1639510932819">AssetDownloadTask</a></p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>资源包下载任务的信息。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>filePath</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>下载文件的本地沙箱地址。</p> <p>最大长度512个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section154451056193512" device-type="phone,tablet">DownloadFailedInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section154451056193512" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>资源包下载任务的失败信息。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>downloadTask</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section1639510932819">AssetDownloadTask</a></p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>资源包下载任务的信息。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>fault</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section82071855806">DownloadFault</a></p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>资源包下载失败的原因。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section171317233391" device-type="phone,tablet">assetDownloadManager.on('progress')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section171317233391" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>on(type: 'progress', callback: Callback&lt;DownloadProgressInfo[]&gt;): void</p> <p>订阅资源包下载进度事件。使用callback形式返回结果。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.7.2.1.5.1.1" width="20%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.1.5.1.3" width="10%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.2.1.5.1.4" width="45%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>type</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>事件回调类型，固定为'progress'，表示资源包下载进度。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section1791922193210">DownloadProgressInfo[]</a>&gt;</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>回调函数。返回任务进度信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600000</p> </td> <td class="cellrowborder" width="50%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600094</p> </td> <td class="cellrowborder" width="50%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onProgressCallback</span> = (<span class="hljs-params">progressArray: assetDownloadManager.DownloadProgressInfo[]</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`onProgressCallback progressArray length: <span class="hljs-subst">${progressArray.length}</span>`</span>);</li><li>  <span class="hljs-comment">// 添加资源包下载进度处理逻辑。</span></li><li>};</li><li><span class="hljs-comment">// 订阅资源包下载进度事件。</span></li><li>assetDownloadManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">"progress"</span>, onProgressCallback);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section119038965812" device-type="phone,tablet">assetDownloadManager.off('progress')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section119038965812" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>off(type: 'progress', callback?: Callback&lt;DownloadProgressInfo[]&gt;): void</p> <p>取消订阅资源包下载进度事件。使用callback形式返回结果。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.1" width="20%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.3" width="10%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.4" width="45%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>type</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>取消事件回调类型，固定为'progress'，表示资源包下载进度。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section1791922193210">DownloadProgressInfo[]</a>&gt;</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="45%"><p>需要取消监听的回调函数，需与订阅时传入的回调函数一致。若不填，则取消当前监听该事件的所有回调函数。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600000</p> </td> <td class="cellrowborder" width="50%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600094</p> </td> <td class="cellrowborder" width="50%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onProgressCallback</span> = (<span class="hljs-params">progressArray: assetDownloadManager.DownloadProgressInfo[]</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`onProgressCallback progressArray length: <span class="hljs-subst">${progressArray.length}</span>`</span>);</li><li>  <span class="hljs-comment">// 添加资源包下载进度处理逻辑。</span></li><li>};</li><li><span class="hljs-comment">// 取消订阅资源包下载进度事件。</span></li><li>assetDownloadManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">"progress"</span>, onProgressCallback);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section93468227013" device-type="phone,tablet">assetDownloadManager.on('pause')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section93468227013" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>on(type: 'pause', callback: Callback&lt;AssetDownloadTask&gt;): void</p> <p>订阅资源包下载暂停事件。使用callback形式返回结果。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.1" width="20%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.3" width="10%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.4" width="45%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>type</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>事件回调类型，固定为'pause'，表示资源暂停事件。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section1639510932819">AssetDownloadTask</a>&gt;</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>回调函数。返回任务信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600000</p> </td> <td class="cellrowborder" width="50%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600094</p> </td> <td class="cellrowborder" width="50%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onPauseCallback</span> = (<span class="hljs-params">downloadTaskInfo: assetDownloadManager.AssetDownloadTask</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`task identifier = <span class="hljs-subst">${downloadTaskInfo.config.identifier}</span> has paused.`</span>);</li><li>  <span class="hljs-comment">// 添加资源包下载暂停处理逻辑。</span></li><li>};</li><li><span class="hljs-comment">// 订阅资源包下载暂停事件。</span></li><li>assetDownloadManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">"pause"</span>, onPauseCallback);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1229111411927" device-type="phone,tablet">assetDownloadManager.off('pause')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1229111411927" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>off(type: 'pause', callback?: Callback&lt;AssetDownloadTask&gt;): void</p> <p>取消订阅资源包下载暂停事件。使用callback形式返回结果。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.1" width="20%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.3" width="10%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.4" width="45%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>type</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>取消事件回调类型，固定为'pause'，表示资源暂停事件。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section1639510932819">AssetDownloadTask</a>&gt;</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="45%"><p>需要取消监听的回调函数，需与订阅时传入的回调函数一致。若不填，则取消当前监听该事件的所有回调函数。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600000</p> </td> <td class="cellrowborder" width="50%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600094</p> </td> <td class="cellrowborder" width="50%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onPauseCallback</span> = (<span class="hljs-params">downloadTaskInfo: assetDownloadManager.AssetDownloadTask</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`task identifier = <span class="hljs-subst">${downloadTaskInfo.config.identifier}</span> has paused.`</span>);</li><li>  <span class="hljs-comment">// 添加资源包下载暂停处理逻辑。</span></li><li>};</li><li><span class="hljs-comment">// 取消订阅资源包下载暂停事件.</span></li><li>assetDownloadManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">"pause"</span>, onPauseCallback);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section165201771441" device-type="phone,tablet">assetDownloadManager.on('complete')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section165201771441" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>on(type: 'complete', callback: Callback&lt;DownloadCompletedInfo&gt;): void</p> <p>订阅资源包下载成功事件。使用callback形式返回结果。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.1" width="20%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.3" width="10%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.4" width="45%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>type</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>事件回调类型，固定为'complete'，表示资源包下载成功事件。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section13627145473413">DownloadCompletedInfo</a>&gt;</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>回调函数。返回任务完成信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600000</p> </td> <td class="cellrowborder" width="50%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600094</p> </td> <td class="cellrowborder" width="50%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCompleteCallback</span> = (<span class="hljs-params">completeInfo: assetDownloadManager.DownloadCompletedInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`task identifier = <span class="hljs-subst">${completeInfo.downloadTask.config.identifier}</span> has completed.`</span>);</li><li>  <span class="hljs-comment">// 添加资源包下载成功处理逻辑。</span></li><li>};</li><li><span class="hljs-comment">// 订阅资源包下载成功事件。</span></li><li>assetDownloadManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">"complete"</span>, onCompleteCallback);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section145731108615" device-type="phone,tablet">assetDownloadManager.off('complete')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section145731108615" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>off(type: 'complete', callback?: Callback&lt;DownloadCompletedInfo&gt;): void</p> <p>取消订阅资源包下载成功事件。使用callback形式返回结果。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.1" width="20%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.3" width="10%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.4" width="45%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>type</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>取消事件回调类型，固定为'complete'，表示资源包下载成功事件。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section13627145473413">DownloadCompletedInfo</a>&gt;</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="45%"><p>需要取消监听的回调函数，需与订阅时传入的回调函数一致。若不填，则取消当前监听该事件的所有回调函数。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600000</p> </td> <td class="cellrowborder" width="50%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600094</p> </td> <td class="cellrowborder" width="50%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCompleteCallback</span> = (<span class="hljs-params">completeInfo: assetDownloadManager.DownloadCompletedInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`task identifier = <span class="hljs-subst">${completeInfo.downloadTask.config.identifier}</span> has completed.`</span>);</li><li>  <span class="hljs-comment">// 添加资源包下载成功处理逻辑。</span></li><li>};</li><li><span class="hljs-comment">// 取消订阅资源包下载成功事件。</span></li><li>assetDownloadManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">"complete"</span>, onCompleteCallback);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section22331871979" device-type="phone,tablet">assetDownloadManager.on('fail')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section22331871979" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>on(type: 'fail', callback: Callback&lt;DownloadFailedInfo&gt;): void</p> <p>订阅资源包下载失败事件。使用callback形式返回结果。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.5.1.1" width="20%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.5.1.3" width="10%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.5.1.4" width="45%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>type</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>事件回调类型，固定为'fail'，表示资源包下载失败事件。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section154451056193512">DownloadFailedInfo</a>&gt;</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>回调函数。返回任务失败信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600000</p> </td> <td class="cellrowborder" width="50%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600094</p> </td> <td class="cellrowborder" width="50%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onFailedCallback</span> = (<span class="hljs-params">failedInfo: assetDownloadManager.DownloadFailedInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`task identifier = <span class="hljs-subst">${failedInfo.downloadTask.config.identifier}</span> has failed.`</span>);</li><li>  <span class="hljs-comment">// 添加资源包下载失败处理逻辑。</span></li><li>};</li><li><span class="hljs-comment">// 订阅资源包下载失败事件。</span></li><li>assetDownloadManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">"fail"</span>, onFailedCallback);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section131235411188" device-type="phone,tablet">assetDownloadManager.off('fail')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section131235411188" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>off(type: 'fail', callback?: Callback&lt;DownloadFailedInfo&gt;): void</p> <p>取消订阅资源包下载失败事件。使用callback形式返回结果。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.7.2.1.5.1.1" width="20%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.2.1.5.1.3" width="10%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.2.1.5.1.4" width="45%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>type</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>取消事件回调类型，固定为'fail'，表示资源包下载失败事件。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section154451056193512">DownloadFailedInfo</a>&gt;</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="45%"><p>需要取消监听的回调函数，需与订阅时传入的回调函数一致。若不填，则取消当前监听该事件的所有回调函数。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600000</p> </td> <td class="cellrowborder" width="50%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600094</p> </td> <td class="cellrowborder" width="50%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onFailedCallback</span> = (<span class="hljs-params">failedInfo: assetDownloadManager.DownloadFailedInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`task identifier = <span class="hljs-subst">${failedInfo.downloadTask.config.identifier}</span> has failed.`</span>);</li><li>  <span class="hljs-comment">// 添加资源包下载失败处理逻辑。</span></li><li>};</li><li><span class="hljs-comment">// 取消订阅资源包下载失败事件。</span></li><li>assetDownloadManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">"fail"</span>, onFailedCallback);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section81101219425" device-type="phone,tablet">assetDownloadManager.fetchManifestUrl<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section81101219425" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>fetchManifestUrl(): Promise&lt;string&gt;</p> <p>获取资源包下载列表。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.8.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;string&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。若资源托管至华为CDN，返回资源包下载清单manifestUrl。若资源托管至三方CDN，则返回空字符串。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>201</p> </td> <td class="cellrowborder" width="70%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchManifestUrl</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> manifestUrl : <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    manifestUrl = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">fetchManifestUrl</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in fetching manifestUrl, manifestUrl = <span class="hljs-subst">${manifestUrl}</span>`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to fetch manifestUrl, errCode: <span class="hljs-subst">${error.code}</span>, errMessage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section104771151219" device-type="phone,tablet">assetDownloadManager.addAssetDownloadTask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section104771151219" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>addAssetDownloadTask(context: common.BaseContext, downloadConfig: AssetDownloadConfig): Promise&lt;string&gt;</p> <p>新增资源包下载任务。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.8.2.1.5.1.1" width="15%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.2.1.5.1.3" width="10%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>context</p> </td> <td class="cellrowborder" width="25%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">common.BaseContext</a></p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>应用程序上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>downloadConfig</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section14401125712">AssetDownloadConfig</a></p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>资源包下载任务的配置信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.9.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.9.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;string&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。返回下载任务taskID。</p> <p>最大长度36个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.11.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.11.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>201</p> </td> <td class="cellrowborder" width="70%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600000</p> </td> <td class="cellrowborder" width="70%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600001</p> </td> <td class="cellrowborder" width="70%"><p>The domain name of the download task is not in the domain name trustlist.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600004</p> </td> <td class="cellrowborder" width="70%"><p>The application task queue is full.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section861618157395" device-type="phone,tablet">assetDownloadManager.pauseAssetDownloadTask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section861618157395" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>pauseAssetDownloadTask(taskId: string): Promise&lt;void&gt;</p> <p>暂停资源包下载任务。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.8.2.1.5.1.1" width="15%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.2.1.5.1.3" width="10%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>taskId</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>任务ID。最大长度36个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.9.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.11.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.11.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>201</p> </td> <td class="cellrowborder" width="70%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600000</p> </td> <td class="cellrowborder" width="70%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600002</p> </td> <td class="cellrowborder" width="70%"><p>The task ID or group ID entered during operations such as pause, resume, and fetch does not exist.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600003</p> </td> <td class="cellrowborder" width="70%"><p>The current task status does not support the current operator.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">pauseAssetDownloadTask</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 根据taskId暂停资源包下载任务</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">pauseAssetDownloadTask</span>(taskId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in pausing assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to pause assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section81011552114216" device-type="phone,tablet">assetDownloadManager.resumeAssetDownloadTask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section81011552114216" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>resumeAssetDownloadTask(taskId: string): Promise&lt;void&gt;</p> <p>恢复资源包下载任务。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.8.2.1.5.1.1" width="15%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.2.1.5.1.3" width="10%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>taskId</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>任务ID。最大长度36个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.11.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.11.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>201</p> </td> <td class="cellrowborder" width="70%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600000</p> </td> <td class="cellrowborder" width="70%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600002</p> </td> <td class="cellrowborder" width="70%"><p>The task ID or group ID entered during operations such as pause, resume, and fetch does not exist.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600003</p> </td> <td class="cellrowborder" width="70%"><p>The current task status does not support the current operator.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">resumeAssetDownloadTask</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 根据taskId暂停资源包下载任务</span></li><li>    assetDownloadManager.<span class="hljs-title function_">pauseAssetDownloadTask</span>(taskId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in pausing assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to pause assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 根据taskId恢复资源包下载任务</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">resumeAssetDownloadTask</span>(taskId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in resuming assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to resume assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section222042984419" device-type="phone,tablet">assetDownloadManager.removeAssetDownloadTask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section222042984419" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>removeAssetDownloadTask(taskId: string): Promise&lt;void&gt;</p> <p>移除资源包下载任务。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.1" width="15%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.3" width="10%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>taskId</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>任务ID。最大长度36个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.8.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.10.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600002</p> </td> <td class="cellrowborder" width="70%"><p>The task ID or group ID entered during operations such as pause, resume, and fetch does not exist.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">removeAssetDownloadTask</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 根据taskId删除资源包下载任务</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">removeAssetDownloadTask</span>(taskId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in removing assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to remove assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section918114094718" device-type="phone,tablet">assetDownloadManager.fetchAllAssetDownloadTasks<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section918114094718" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>fetchAllAssetDownloadTasks(): Promise&lt;AssetDownloadTask[]&gt;</p> <p>获取所有资源包下载任务，已下载完成的任务除外。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.7.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section1639510932819">AssetDownloadTask[]</a>&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。返回资源包下载任务列表。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.9.2.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.2.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchAllAssetDownloadTasks</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTaskArr</span>: <span class="hljs-title class_">Array</span>&lt;assetDownloadManager.<span class="hljs-property">AssetDownloadTask</span>&gt;;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 获取所有资源包下载任务信息。</span></li><li>    downloadTaskArr = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">fetchAllAssetDownloadTasks</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in fetching allAssetDownloadTasks success, downloadTaskArr length:<span class="hljs-subst">${downloadTaskArr.length}</span>.`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to fetch allAssetDownloadTasks, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1845422368" device-type="phone,tablet">assetDownloadManager.pauseAllAssetDownloadTasks<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1845422368" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>pauseAllAssetDownloadTasks(): Promise&lt;void&gt;</p> <p>暂停所有资源包下载任务。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.8.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.10.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.10.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>201</p> </td> <td class="cellrowborder" width="70%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600000</p> </td> <td class="cellrowborder" width="70%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">pauseAllAssetDownloadTasks</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 暂停所有资源包下载任务。</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">pauseAllAssetDownloadTasks</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in pausing allAssetDownloadTasks`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to pause allAssetDownloadTasks, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section191223209811" device-type="phone,tablet">assetDownloadManager.resumeAllAssetDownloadTasks<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section191223209811" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>resumeAllAssetDownloadTasks(): Promise&lt;void&gt;</p> <p>恢复所有资源包下载任务。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.8.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.10.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.10.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>201</p> </td> <td class="cellrowborder" width="70%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600000</p> </td> <td class="cellrowborder" width="70%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">resumeAllAssetDownloadTasks</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 暂停所有资源包下载任务。</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">pauseAllAssetDownloadTasks</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in pausing allAssetDownloadTasks`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to pause allAssetDownloadTasks, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 恢复所有资源包下载任务。</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">resumeAllAssetDownloadTasks</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in resuming allAssetDownloadTasks`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to resume allAssetDownloadTasks, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section2809432393" device-type="phone,tablet">assetDownloadManager.removeAllAssetDownloadTasks<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2809432393" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>removeAllAssetDownloadTasks(): Promise&lt;void&gt;</p> <p>移除所有资源包下载任务。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.7.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.9.2.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.9.2.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">removeAllAssetDownloadTasks</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 移除所有资源包下载任务。</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">removeAllAssetDownloadTasks</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in removing allAssetDownloadTasks`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to remove allAssetDownloadTasks, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section93791016111111" device-type="phone,tablet">assetDownloadManager.fetchGroupAssetDownloadTasks<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section93791016111111" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>fetchGroupAssetDownloadTasks(groupId: string): Promise&lt;AssetDownloadTask[]&gt;</p> <p>获取同一组的资源包下载任务。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.7.2.1.5.1.1" width="15%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.2.1.5.1.3" width="10%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>groupId</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>组ID，用于标识资源的版本信息。最大长度32个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.8.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section1639510932819">AssetDownloadTask[]</a>&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。返回资源包下载任务列表。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.10.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.10.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600002</p> </td> <td class="cellrowborder" width="70%"><p>The task ID or group ID entered during operations such as pause, resume, and fetch does not exist.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchGroupAssetDownloadTasks</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> groupId = <span class="hljs-string">'groupId'</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTaskArr</span>: <span class="hljs-title class_">Array</span>&lt;assetDownloadManager.<span class="hljs-property">AssetDownloadTask</span>&gt;;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 获取同一groupId下的资源包下载任务信息。</span></li><li>    downloadTaskArr = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">fetchGroupAssetDownloadTasks</span>(groupId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in fetching groupAssetDownloadTasks`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to fetch groupAssetDownloadTasks, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1540410545135" device-type="phone,tablet">assetDownloadManager.pauseGroupAssetDownloadTasks<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1540410545135" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>pauseGroupAssetDownloadTasks(groupId: string): Promise&lt;void&gt;</p> <p>暂停同一组的资源包下载任务。使用Promise异步回调。</p> <p><strong>需要权限</strong>：ohos.permission.INTERNET</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.8.2.1.5.1.1" width="15%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.8.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.8.2.1.5.1.3" width="10%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.8.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>groupId</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>组ID，用于标识资源的版本信息。最大长度32个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.9.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.9.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.11.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.11.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>201</p> </td> <td class="cellrowborder" width="70%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600000</p> </td> <td class="cellrowborder" width="70%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600002</p> </td> <td class="cellrowborder" width="70%"><p>The task ID or group ID entered during operations such as pause, resume, and fetch does not exist.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">pauseGroupAssetDownloadTasks</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> groupId = <span class="hljs-string">'groupId'</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 暂停同一groupId下的资源包下载任务。</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">pauseGroupAssetDownloadTasks</span>(groupId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in pausing groupAssetDownloadTasks`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to pause groupAssetDownloadTasks, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section5949112714163" device-type="phone,tablet">assetDownloadManager.resumeGroupAssetDownloadTasks<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5949112714163" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>resumeGroupAssetDownloadTasks(groupId: string): Promise&lt;void&gt;</p> <p>恢复同一组的资源包下载任务。使用Promise异步回调。</p> <p><strong>需要权限</strong>：ohos.permission.INTERNET</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.8.2.1.5.1.1" width="15%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.8.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.8.2.1.5.1.3" width="10%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.8.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>groupId</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>组ID，用于标识资源的版本信息。最大长度32个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.9.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.9.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.11.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.11.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>201</p> </td> <td class="cellrowborder" width="70%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600000</p> </td> <td class="cellrowborder" width="70%"><p>The API call from an ExtensionAbility is not allowed.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600002</p> </td> <td class="cellrowborder" width="70%"><p>The task ID or group ID entered during operations such as pause, resume, and fetch does not exist.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">resumeGroupAssetDownloadTasks</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> groupId = <span class="hljs-string">'groupId'</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 暂停同一groupId下的资源包下载任务。</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">pauseGroupAssetDownloadTasks</span>(groupId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in pausing groupAssetDownloadTasks`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to pause groupAssetDownloadTasks, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 恢复同一groupId下的资源包下载任务。</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">resumeGroupAssetDownloadTasks</span>(groupId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in resuming groupAssetDownloadTasks`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to resume groupAssetDownloadTasks, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section641613495177" device-type="phone,tablet">assetDownloadManager.removeGroupAssetDownloadTasks<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section641613495177" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>removeGroupAssetDownloadTasks(groupId: string): Promise&lt;void&gt;</p> <p>移除同一组的资源包下载任务。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.7.2.1.5.1.1" width="15%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.2.1.5.1.3" width="10%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>groupId</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>组ID，用于标识资源的版本信息。最大长度32个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.8.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.8.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.10.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.10.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600002</p> </td> <td class="cellrowborder" width="70%"><p>The task ID or group ID entered during operations such as pause, resume, and fetch does not exist.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">removeGroupAssetDownloadTasks</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> groupId = <span class="hljs-string">'groupId'</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 移除同一groupId下的资源包下载任务。</span></li><li>    <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">removeGroupAssetDownloadTasks</span>(groupId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in removing groupAssetDownloadTasks`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to remove groupAssetDownloadTasks, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section194602582014" device-type="phone,tablet">NetSpeedLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section194602582014" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>网络限速等级的枚举。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.6.1.4.1.1" width="27.900000000000002%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.4.1.2" width="12.43%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.4.1.3" width="59.67%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="27.900000000000002%"><p>NO_LIMIT</p> </td> <td class="cellrowborder" width="12.43%"><p>0</p> </td> <td class="cellrowborder" width="59.67%"><p>无速度限制。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>LIMIT_MEDIUM</p> </td> <td class="cellrowborder" width="12.43%"><p>1</p> </td> <td class="cellrowborder" width="59.67%"><p>中等速度限制。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>LIMIT_LOW</p> </td> <td class="cellrowborder" width="12.43%"><p>2</p> </td> <td class="cellrowborder" width="59.67%"><p>低等速度限制。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section17279143882113" device-type="phone,tablet">assetDownloadManager.limitDownloadTaskSpeed<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17279143882113" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>limitDownloadTaskSpeed(taskIds: string[], speedLimit: NetSpeedLevel): Promise&lt;void&gt;</p> <p>限制资源包下载的速度。使用Promise异步回调。</p> <p><strong>需要权限</strong>：ohos.permission.INTERNET</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.33.8.2.1.5.1.1" width="15%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.8.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.8.2.1.5.1.3" width="10%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.8.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>taskIds</p> </td> <td class="cellrowborder" width="25%"><p>string[]</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>任务ID列表。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>speedLimit</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section194602582014">NetSpeedLevel</a></p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>网络限速等级。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.9.2.1.3.1.1" width="30%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.9.2.1.3.1.2" width="70%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <div class="p">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。 <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.11.3.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.11.3.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>201</p> </td> <td class="cellrowborder" width="70%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1016600094</p> </td> <td class="cellrowborder" width="70%"><p>Task service ability error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">limitDownloadTaskSpeed</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-comment">// 构造资源包下载配置信息。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">assetDownload</span>: assetDownloadManager.<span class="hljs-property">AssetDownloadConfig</span> = {</li><li>    <span class="hljs-attr">fileName</span>: <span class="hljs-string">'fileName'</span>, <span class="hljs-comment">// 下载资源的文件名。</span></li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'url'</span>, <span class="hljs-comment">// 下载资源url。</span></li><li>    <span class="hljs-attr">isEssential</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 是否是必要下载资源。</span></li><li>    <span class="hljs-attr">identifier</span>: <span class="hljs-string">'identifier'</span>, <span class="hljs-comment">// 下载资源标识信息。</span></li><li>    <span class="hljs-attr">groupId</span>: <span class="hljs-string">'groupId'</span> <span class="hljs-comment">// 组ID，用于标识资源的版本信息。</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 添加资源包下载任务。</span></li><li>    <span class="hljs-comment">// 根据实际代码上下文自行传入合适的context。</span></li><li>    taskId = <span class="hljs-keyword">await</span> assetDownloadManager.<span class="hljs-title function_">addAssetDownloadTask</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">Context</span>, assetDownload);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in adding assetDownloadTask`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to add assetDownloadTask, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">taskIds</span>: <span class="hljs-built_in">string</span>[] = [taskId];</li><li>    <span class="hljs-comment">// 限制资源包下载任务的下载速度。</span></li><li>    assetDownloadManager.<span class="hljs-title function_">limitDownloadTaskSpeed</span>(taskIds, assetDownloadManager.<span class="hljs-property">NetSpeedLevel</span>.<span class="hljs-property">LIMIT_MEDIUM</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in limiting downloadTaskSpeed`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to limit downloadTaskSpeed, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section2335333617" device-type="phone,tablet">AppDownloadStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2335333617" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>应用自身下载器中资源包下载状态的枚举。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.1(19)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.34.6.1.4.1.1" width="27.900000000000002%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.4.1.2" width="12.43%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.4.1.3" width="59.67%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="27.900000000000002%"><p>IN_PROGRESS</p> </td> <td class="cellrowborder" width="12.43%"><p>0</p> </td> <td class="cellrowborder" width="59.67%"><p>下载中。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>FINISH</p> </td> <td class="cellrowborder" width="12.43%"><p>1</p> </td> <td class="cellrowborder" width="59.67%"><p>已完成下载。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section83637335412" device-type="phone,tablet">AppDownloadProgress<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section83637335412" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>应用自身下载器中资源包的下载进度信息。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.1(19)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.35.6.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>totalBytesWritten</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>已下载的资源总大小，单位：字节。取值范围：大于等于0。</p> <p>默认值：0。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>totalExpectedBytes</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>待下载的资源总大小，单位：字节。取值大于等于0，异常值按0处理。</p> <p>默认值：0。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>totalFiles</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>资源文件总数。取值大于等于0，异常值按0处理。</p> <p>默认值：0。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>successCount</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>已成功下载的文件数。取值大于等于0，异常值按0处理。</p> <p>默认值：0。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>failureCount</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>下载失败的文件数。取值大于等于0，异常值按0处理。</p> <p>默认值：0。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>status</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section2335333617">AppDownloadStatus</a></p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>当前应用自身下载器中的下载状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1492357144916" device-type="phone,tablet">assetDownloadManager.reportDownloadProgress<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1492357144916" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>reportDownloadProgress(progressInfo: AppDownloadProgress): void</p> <p>上报应用自身下载器中资源包的下载进度信息。</p> <p><strong>系统能力：</strong>SystemCapability.GraphicsGame.AssetAcceleration</p> <p><strong>模型约束：</strong>本模块接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.1.1(19)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.36.7.2.1.5.1.1" width="20%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.2.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.2.1.5.1.3" width="10%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.2.1.5.1.4" width="45%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>progressInfo</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/graphics-accelerate-assetdownloadmanager#section83637335412">AppDownloadProgress</a></p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="45%"><p>应用自身下载器中的下载进度信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/graphics-accelerate-arkts-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>1016600094</p> </td> <td class="cellrowborder" width="50%"><p>Task service ability error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1016600401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-pjq-c106="" class="highlight-div"><div _ngcontent-pjq-c106="" class="highlight-div-header"><div _ngcontent-pjq-c106="" class="highlight-div-header-left"><div _ngcontent-pjq-c106="" class="handle-button expand-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pjq-c106="" class="highlight-div-header-right"><div _ngcontent-pjq-c106="" class="handle-button ai-button"></div><div _ngcontent-pjq-c106="" class="handle-button line-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pjq-c106="" class="handle-button theme-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pjq-c106="" class="handle-button copy-button"><div _ngcontent-pjq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pjq-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { assetDownloadManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GraphicsAccelerateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">progressInfo</span>: assetDownloadManager.<span class="hljs-property">AppDownloadProgress</span> = {</li><li>    <span class="hljs-attr">totalBytesWritten</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">totalExpectedBytes</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">totalFiles</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">successCount</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">failureCount</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">status</span>:assetDownloadManager.<span class="hljs-property">AppDownloadStatus</span>.<span class="hljs-property">IN_PROGRESS</span></li><li>  }</li><li>  assetDownloadManager.<span class="hljs-title function_">reportDownloadProgress</span>(progressInfo);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Succeeded in reporting downloadProgress`</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AssetAccelDemo'</span>, <span class="hljs-string">`Failed to report downloadProgress, errCode:<span class="hljs-subst">${error.code}</span>, errMessage:<span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>