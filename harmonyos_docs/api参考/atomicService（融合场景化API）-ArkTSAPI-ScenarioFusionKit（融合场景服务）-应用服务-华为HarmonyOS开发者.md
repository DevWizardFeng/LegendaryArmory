<h1 _ngcontent-yxa-c119="" class="doc-title ng-star-inserted" title="atomicService（融合场景化API）"> atomicService（融合场景化API） </h1>

<div _ngcontent-yxa-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块为开发者提供获取系统信息、系统设置、关注组件等能力。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section16609101116259" device-type="phone,tablet,wearable,tv,2in1">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-yxa-c106="" class="highlight-div"><div _ngcontent-yxa-c106="" class="highlight-div-header"><div _ngcontent-yxa-c106="" class="highlight-div-header-left"><div _ngcontent-yxa-c106="" class="handle-button expand-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yxa-c106="" class="highlight-div-header-right"><div _ngcontent-yxa-c106="" class="handle-button ai-button"></div><div _ngcontent-yxa-c106="" class="handle-button line-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yxa-c106="" class="handle-button theme-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yxa-c106="" class="handle-button copy-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yxa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { atomicService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScenarioFusionKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section53111326141919" device-type="phone,tablet,wearable,tv,2in1">SystemSettingInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section53111326141919" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>该类提供获取系统设置属性的对象。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.6.1.1" width="24.257574242575743%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.6.1.2" width="13.698630136986303%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.6.1.3" width="7.519248075192481%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.6.1.4" width="7.58924107589241%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.6.1.5" width="46.93530646935306%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.257574242575743%"><p>bluetoothEnabled</p> </td> <td class="cellrowborder" width="13.698630136986303%"><p>boolean</p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="7.58924107589241%"><p>是</p> </td> <td class="cellrowborder" width="46.93530646935306%"><p>蓝牙系统开关。“true”表示开关已打开，“false”表示开关已关闭。</p> </td> </tr> <tr><td class="cellrowborder" width="24.257574242575743%"><p>locationEnabled</p> </td> <td class="cellrowborder" width="13.698630136986303%"><p>boolean</p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="7.58924107589241%"><p>是</p> </td> <td class="cellrowborder" width="46.93530646935306%"><p>地理位置的系统开关。“true”表示开关已打开，“false”表示开关已关闭。</p> </td> </tr> <tr><td class="cellrowborder" width="24.257574242575743%"><p>wifiEnabled</p> </td> <td class="cellrowborder" width="13.698630136986303%"><p>boolean</p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="7.58924107589241%"><p>是</p> </td> <td class="cellrowborder" width="46.93530646935306%"><p>Wi-Fi 的系统开关。“true”表示开关已打开，“false”表示开关已关闭。</p> </td> </tr> <tr><td class="cellrowborder" width="24.257574242575743%"><p>deviceOrientation</p> </td> <td class="cellrowborder" width="13.698630136986303%"><p>string</p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="7.58924107589241%"><p>是</p> </td> <td class="cellrowborder" width="46.93530646935306%"><p>设备当前显示的方向。“portrait”表示竖屏，“landscape”表示横屏。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section6926144111527" device-type="phone,tablet,wearable,tv,2in1">SystemInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section6926144111527" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>该类提供获取系统信息属性的对象。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.6.1.1" width="21.66381115553017%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.6.1.2" width="17.351989339425085%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.6.1.3" width="6.662859318484675%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.6.1.4" width="6.662859318484675%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.6.1.5" width="47.65848086807538%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.66381115553017%"><p>brand</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>string</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>设备品牌名称。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>deviceModel</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>string</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>设备类型。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>返回值中如果出现特殊字符，需要进行转义。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>screenWidth</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>number</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>屏幕的宽度，单位px。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>screenHeight</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>number</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>屏幕的高度，单位px。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>statusBarHeight</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>number</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>状态栏的高度，单位px。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>screenSafeArea</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-i#avoidarea7" target="_blank">window.AvoidArea</a></p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>竖屏正方向下的安全区域。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>language</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>string</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>系统语言。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>osFullName</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>string</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>系统版本。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>fontSizeSetting</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>number</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>显示设备逻辑像素的密度，代表物理像素与逻辑像素的缩放系数，计算方式为：<span><img originheight="49" originwidth="263" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115240.51974210863799558634400709192037:50001231000000:2800:3D2D8B90D89A63B78760EBA9E01558847762510879A98F365DF506D96BE07995.png" class="notEnlarge" width="263" height="49"></span></p> <p>该参数为浮点数，受<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#display" target="_blank">densityDPI</a>范围限制，取值范围在[0.5，4.0]。一般取值1.0、3.0等，实际取值取决于不同设备提供的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#display" target="_blank">densityDPI</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>sdkApiVersion</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>number</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>系统软件API版本。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>bluetoothEnabled</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>boolean</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>蓝牙系统开关。“true”表示开关已打开，“false”表示开关已关闭。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>locationEnabled</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>boolean</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>地理位置的系统开关。“true”表示开关已打开，“false”表示开关已关闭。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>wifiEnabled</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>boolean</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>Wi-Fi 的系统开关。“true”表示开关已打开，“false”表示开关已关闭。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>deviceOrientation</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>string</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>设备当前显示的方向。“portrait”表示竖屏，“landscape”表示横屏。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>theme</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-state-management-environment-variables#colormode" target="_blank">ColorMode</a></p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>深浅色模式，可选值为：</p> <p>- ColorMode.LIGHT：浅色模式；</p> <p>- ColorMode.DARK：深色模式。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>windowWidth</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>number</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>可使用窗口宽度，单位px，该参数应为整数。</p> </td> </tr> <tr><td class="cellrowborder" width="21.66381115553017%"><p>windowHeight</p> </td> <td class="cellrowborder" width="17.351989339425085%"><p>number</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>否</p> </td> <td class="cellrowborder" width="6.662859318484675%"><p>是</p> </td> <td class="cellrowborder" width="47.65848086807538%"><p>可使用窗口高度，单位px，该参数应为整数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section16831162003419" device-type="phone,tablet,wearable,tv,2in1">FollowResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16831162003419" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>该枚举定义了关注结果的类型。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>6.0.1(21)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.4.1.1" width="25.61%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.4.1.2" width="17.14%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.4.1.3" width="57.25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.61%"><p>SUCCESS</p> </td> <td class="cellrowborder" width="17.14%"><p>0</p> </td> <td class="cellrowborder" width="57.25%"><p>关注成功。</p> </td> </tr> <tr><td class="cellrowborder" width="25.61%"><p>FAILED</p> </td> <td class="cellrowborder" width="17.14%"><p>1</p> </td> <td class="cellrowborder" width="57.25%"><p>关注失败。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1881114501476" device-type="phone,tablet,wearable,tv,2in1">FollowComponentParams<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1881114501476" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>获取关注组件的参数。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>6.0.1(21)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.6.1.1" width="21.453482891884246%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.6.1.2" width="17.183523423508337%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.6.1.3" width="6.59817136393628%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.6.1.4" width="6.59817136393628%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.6.1.5" width="48.16665095673484%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.453482891884246%"><p>pubId</p> </td> <td class="cellrowborder" width="17.183523423508337%"><p>string</p> </td> <td class="cellrowborder" width="6.59817136393628%"><p>否</p> </td> <td class="cellrowborder" width="6.59817136393628%"><p>否</p> </td> <td class="cellrowborder" width="48.16665095673484%"><p>服务号ID。从华为开发者联盟服务号管理页面获取，长度限制1~64位字符。</p> </td> </tr> <tr><td class="cellrowborder" width="21.453482891884246%"><p>channelId</p> </td> <td class="cellrowborder" width="17.183523423508337%"><p>string</p> </td> <td class="cellrowborder" width="6.59817136393628%"><p>否</p> </td> <td class="cellrowborder" width="6.59817136393628%"><p>是</p> </td> <td class="cellrowborder" width="48.16665095673484%"><p>渠道ID。长度限制0~32位字符，只能是数字或字母。用于识别组件关注的来源渠道。</p> </td> </tr> <tr><td class="cellrowborder" width="21.453482891884246%"><p>offset</p> </td> <td class="cellrowborder" width="17.183523423508337%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#position" target="_blank">Position</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#edges12" target="_blank">Edges</a> | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#localizededges12" target="_blank">LocalizedEdges</a></p> </td> <td class="cellrowborder" width="6.59817136393628%"><p>否</p> </td> <td class="cellrowborder" width="6.59817136393628%"><p>是</p> </td> <td class="cellrowborder" width="48.16665095673484%"><p>组件放置位置，基于屏幕中心点的位置偏移。</p> <p>默认值：{ x: 0, y: 300 }</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section137361343174413" device-type="phone,tablet,wearable,tv,2in1">FollowComponentCallback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section137361343174413" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>关注组件的回调接口。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>6.0.1(21)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.6.1.1" width="21.453482891884246%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.6.1.2" width="17.183523423508337%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.6.1.3" width="6.59817136393628%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.6.1.4" width="6.59817136393628%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.6.1.5" width="48.16665095673484%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.453482891884246%"><p>onFollowComplete</p> </td> <td class="cellrowborder" width="17.183523423508337%"><p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section163417717564">FollowCompleteResult</a>&gt;</p> </td> <td class="cellrowborder" width="6.59817136393628%"><p>否</p> </td> <td class="cellrowborder" width="6.59817136393628%"><p>否</p> </td> <td class="cellrowborder" width="48.16665095673484%"><p>回调函数。当关注操作成功，err为undefined，data为获取到的FollowCompleteResult；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section163417717564" device-type="phone,tablet,wearable,tv,2in1">FollowCompleteResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section163417717564" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>该接口定义了关注组件关注结果的返回体。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>6.0.1(21)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.6.1.1" width="21.453482891884246%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.6.1.2" width="17.183523423508337%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.6.1.3" width="6.59817136393628%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.6.1.4" width="6.59817136393628%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.6.1.5" width="48.16665095673484%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.453482891884246%"><p>code</p> </td> <td class="cellrowborder" width="17.183523423508337%"><p><a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section16831162003419">FollowResult</a></p> </td> <td class="cellrowborder" width="6.59817136393628%"><p>否</p> </td> <td class="cellrowborder" width="6.59817136393628%"><p>否</p> </td> <td class="cellrowborder" width="48.16665095673484%"><p>关注组件返回结果。关注成功：FollowResult.SUCCESS，关注失败：FollowResult.FAILED。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section994220537517" device-type="phone,tablet,wearable,tv,2in1">SystemInfoType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section994220537517" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type SystemInfoType = 'brand' | 'deviceModel' | 'screenWidth' | 'screenHeight' | 'statusBarHeight'</p> <p>| 'screenSafeArea' | 'language' | 'osFullName' | 'fontSizeSetting' | 'sdkApiVersion' | 'bluetoothEnabled'</p> <p>| 'locationEnabled' | 'wifiEnabled' | 'deviceOrientation' | 'theme' | 'windowWidth' | 'windowHeight'</p> <p>系统信息属性取值类型。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>设备行为差异：</strong>对于5.0.0(12)版本，该接口在Phone、Tablet、2in1中可正常调用，在其他设备类型中返回801错误码。对于5.1.0(18)及之后版本，该接口在Phone、Tablet、2in1、Wearable、TV中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="28.349999999999998%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="71.65%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="28.349999999999998%"><p>'brand'</p> </td> <td class="cellrowborder" width="71.65%"><p>设备品牌名称。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'deviceModel'</p> </td> <td class="cellrowborder" width="71.65%"><p>设备类型。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'screenWidth'</p> </td> <td class="cellrowborder" width="71.65%"><p>屏幕的宽度。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'screenHeight'</p> </td> <td class="cellrowborder" width="71.65%"><p>屏幕的高度。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'statusBarHeight'</p> </td> <td class="cellrowborder" width="71.65%"><p>状态栏的高度。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'screenSafeArea'</p> </td> <td class="cellrowborder" width="71.65%"><p>竖屏正方向下的安全区域。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'language'</p> </td> <td class="cellrowborder" width="71.65%"><p>系统语言。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'osFullName'</p> </td> <td class="cellrowborder" width="71.65%"><p>系统版本。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'fontSizeSetting'</p> </td> <td class="cellrowborder" width="71.65%"><p>显示设备逻辑像素的密度，代表物理像素与逻辑像素的缩放系数，计算方式为：<span><img originheight="49" originwidth="263" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115240.40936157810700434768002305865295:50001231000000:2800:3A162BDAEB39A633708902455640BE92AFC3C3077B98F44D93541338EF96AF7D.png" class="notEnlarge" width="263" height="49"></span></p> <p>该参数为浮点数，受<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#display" target="_blank">densityDPI</a>范围限制，取值范围在[0.5，4.0]。一般取值1.0、3.0等，实际取值取决于不同设备提供的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-display#display" target="_blank">densityDPI</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'sdkApiVersion'</p> </td> <td class="cellrowborder" width="71.65%"><p>系统软件API版本。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'bluetoothEnabled'</p> </td> <td class="cellrowborder" width="71.65%"><p>蓝牙系统开关。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'locationEnabled'</p> </td> <td class="cellrowborder" width="71.65%"><p>地理位置的系统开关。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'wifiEnabled'</p> </td> <td class="cellrowborder" width="71.65%"><p>Wi-Fi 的系统开关。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'deviceOrientation'</p> </td> <td class="cellrowborder" width="71.65%"><p>设备当前显示的方向。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'theme'</p> </td> <td class="cellrowborder" width="71.65%"><p>系统主题（深色、浅色模式）。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'windowWidth'</p> </td> <td class="cellrowborder" width="71.65%"><p>可使用窗口宽度。</p> </td> </tr> <tr><td class="cellrowborder" width="28.349999999999998%"><p>'windowHeight'</p> </td> <td class="cellrowborder" width="71.65%"><p>可使用窗口高度。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section11423195912475" device-type="phone,tablet,wearable,tv,2in1">SystemSettingType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11423195912475" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type SystemSettingType = 'bluetoothEnabled' | 'locationEnabled' | 'wifiEnabled' | 'deviceOrientation'</p> <p>系统设置属性取值类型。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>设备行为差异：</strong>对于5.0.0(12)版本，该接口在Phone、Tablet、2in1中可正常调用，在其他设备类型中返回801错误码。对于5.1.0(18)及之后版本，该接口在Phone、Tablet、2in1、Wearable、TV中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="32.79%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="67.21000000000001%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.79%"><p>'bluetoothEnabled'</p> </td> <td class="cellrowborder" width="67.21000000000001%"><p>蓝牙系统开关。</p> </td> </tr> <tr><td class="cellrowborder" width="32.79%"><p>'locationEnabled'</p> </td> <td class="cellrowborder" width="67.21000000000001%"><p>地理位置的系统开关。</p> </td> </tr> <tr><td class="cellrowborder" width="32.79%"><p>'wifiEnabled'</p> </td> <td class="cellrowborder" width="67.21000000000001%"><p>Wi-Fi 的系统开关。</p> </td> </tr> <tr><td class="cellrowborder" width="32.79%"><p>'deviceOrientation'</p> </td> <td class="cellrowborder" width="67.21000000000001%"><p>设备当前显示的方向。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1465318121834" device-type="phone,tablet,wearable,tv,2in1">getSystemInfoSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1465318121834" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSystemInfoSync(properties?: Array&lt;SystemInfoType&gt;): SystemInfo</p> <p>调用该方法获取设备、网络状态、屏幕、语言、主题等系统信息。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>设备行为差异：</strong>对于5.0.0(12)版本，该接口在Phone、Tablet、2in1中可正常调用，在其他设备类型中返回801错误码。对于5.1.0(18)及之后版本，该接口在Phone、Tablet、2in1、Wearable、TV中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.5.1.1" width="14.41591532732262%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.5.1.2" width="21.501372010976088%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.5.1.3" width="6.860054880439044%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.5.1.4" width="57.22265778126226%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.41591532732262%"><p>properties</p> </td> <td class="cellrowborder" width="21.501372010976088%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section994220537517">SystemInfoType</a>&gt;</p> </td> <td class="cellrowborder" width="6.860054880439044%"><p>否</p> </td> <td class="cellrowborder" width="57.22265778126226%"><p>获取设备、网络状态、屏幕、语言、主题等系统信息的请求对象。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>使用5.0.1(13)及以上版本时不需要配置Wi-Fi权限、蓝牙权限。</li><li>获取Wi-Fi信息需要配置权限ohos.permission.GET_WIFI_INFO。</li><li>获取蓝牙开启状态需要配置权限ohos.permission.ACCESS_BLUETOOTH。</li><li>获取用户程序访问控制权限可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-abilityaccessctrl#requestpermissionsfromuser9" target="_blank">程序访问控制管理</a>。</li><li>定位信息不支持在TV设备上获取。</li></ul> </div></div></div> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>在多线程中调用getSystemInfoSync接口时，请勿获取theme、windowWidth、windowHeight、statusBarHeight和screenSafeArea的信息，可能会导致程序崩溃。</p> </div></div></div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.1" width="42.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.2" width="57.730000000000004%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="42.27%"><p><a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section6926144111527">SystemInfo</a></p> </td> <td class="cellrowborder" width="57.730000000000004%"><p>返回<a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section6926144111527">SystemInfo</a>对象。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>getSystemInfoSync接口不支持获取windowWidth、windowHeight、statusBarHeight和screenSafeArea属性，如需获取可使用<a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section17779133174510">getSystemInfo</a>接口。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-yxa-c106="" class="highlight-div"><div _ngcontent-yxa-c106="" class="highlight-div-header"><div _ngcontent-yxa-c106="" class="highlight-div-header-left"><div _ngcontent-yxa-c106="" class="handle-button expand-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yxa-c106="" class="highlight-div-header-right"><div _ngcontent-yxa-c106="" class="handle-button ai-button"></div><div _ngcontent-yxa-c106="" class="handle-button line-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yxa-c106="" class="handle-button theme-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yxa-c106="" class="handle-button copy-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yxa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { atomicService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScenarioFusionKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">stateArray</span>: <span class="hljs-title class_">Array</span>&lt;atomicService.<span class="hljs-property">SystemInfoType</span>&gt; =</li><li>  [<span class="hljs-string">'brand'</span>, <span class="hljs-string">'deviceModel'</span>, <span class="hljs-string">'screenWidth'</span>, <span class="hljs-string">'screenHeight'</span>, <span class="hljs-string">'language'</span>, <span class="hljs-string">'osFullName'</span>, <span class="hljs-string">'fontSizeSetting'</span>,</li><li>    <span class="hljs-string">'sdkApiVersion'</span>, <span class="hljs-string">'bluetoothEnabled'</span>, <span class="hljs-string">'wifiEnabled'</span>, <span class="hljs-string">'locationEnabled'</span>, <span class="hljs-string">'deviceOrientation'</span>, <span class="hljs-string">'theme'</span>];</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> data = atomicService.<span class="hljs-title function_">getSystemInfoSync</span>(stateArray);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'succeeded in getting system info'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">brand</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">brand</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceModel</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">deviceModel</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">screenWidth</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">screenWidth</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">screenHeight</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">screenHeight</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">language</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">language</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">osFullName</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">osFullName</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fontSizeSetting</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">fontSizeSetting</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">sdkApiVersion</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">sdkApiVersion</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bluetoothEnabled</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">bluetoothEnabled</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">wifiEnabled</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">wifiEnabled</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">locationEnabled</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">locationEnabled</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceOrientation</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">deviceOrientation</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">theme</span>: <span class="hljs-title class_">ColorMode</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">theme</span>;</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'failReason: %{public}d %{public}s'</span>, error.<span class="hljs-property">code</span>, error.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section17779133174510" device-type="phone,tablet,wearable,tv,2in1">getSystemInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17779133174510" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSystemInfo(properties?: Array&lt;SystemInfoType&gt;): Promise&lt;SystemInfo&gt;</p> <p>调用该方法获取设备、网络状态、屏幕、语言、主题等系统信息，使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>设备行为差异：</strong>对于5.0.0(12)版本，该接口在Phone、Tablet、2in1中可正常调用，在其他设备类型中返回801错误码。对于5.1.0(18)及之后版本，该接口在Phone、Tablet、2in1、Wearable、TV中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.1" width="14.05%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.2" width="21.38%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.3" width="5.45%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.4" width="59.12%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.05%"><p>properties</p> </td> <td class="cellrowborder" width="21.38%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section994220537517">SystemInfoType</a>&gt;</p> </td> <td class="cellrowborder" width="5.45%"><p>否</p> </td> <td class="cellrowborder" width="59.12%"><p>获取设备、网络状态、屏幕、语言、主题等系统信息的请求对象。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>使用5.0.1(13)及以上版本时不需要配置Wi-Fi权限、蓝牙权限。</li><li>获取Wi-Fi信息需要配置权限ohos.permission.GET_WIFI_INFO。</li><li>获取蓝牙开启状态需要配置权限ohos.permission.ACCESS_BLUETOOTH。</li><li>获取用户程序访问控制权限可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-abilityaccessctrl#requestpermissionsfromuser9" target="_blank">程序访问控制管理</a>。</li><li>定位信息不支持在TV设备上获取。</li></ul> </div></div></div> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>在多线程中调用getSystemInfo接口时，请勿获取theme、windowWidth、windowHeight、statusBarHeight和screenSafeArea的信息，可能会导致程序崩溃。</p> </div></div></div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.13.1.3.1.1" width="38.24%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.13.1.3.1.2" width="61.760000000000005%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="38.24%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section6926144111527">SystemInfo</a>&gt;</p> </td> <td class="cellrowborder" width="61.760000000000005%"><p>Promise对象，返回<a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section6926144111527">SystemInfo</a>对象。</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-yxa-c106="" class="highlight-div"><div _ngcontent-yxa-c106="" class="highlight-div-header"><div _ngcontent-yxa-c106="" class="highlight-div-header-left"><div _ngcontent-yxa-c106="" class="handle-button expand-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yxa-c106="" class="highlight-div-header-right"><div _ngcontent-yxa-c106="" class="handle-button ai-button"></div><div _ngcontent-yxa-c106="" class="handle-button line-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yxa-c106="" class="handle-button theme-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yxa-c106="" class="handle-button copy-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yxa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { atomicService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScenarioFusionKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">stateArray</span>: <span class="hljs-title class_">Array</span>&lt;atomicService.<span class="hljs-property">SystemInfoType</span>&gt; =</li><li>  [<span class="hljs-string">'brand'</span>, <span class="hljs-string">'deviceModel'</span>, <span class="hljs-string">'screenWidth'</span>, <span class="hljs-string">'screenHeight'</span>, <span class="hljs-string">'statusBarHeight'</span>, <span class="hljs-string">'screenSafeArea'</span>, <span class="hljs-string">'language'</span>, <span class="hljs-string">'osFullName'</span>,</li><li>    <span class="hljs-string">'fontSizeSetting'</span>, <span class="hljs-string">'sdkApiVersion'</span>, <span class="hljs-string">'bluetoothEnabled'</span>, <span class="hljs-string">'wifiEnabled'</span>, <span class="hljs-string">'locationEnabled'</span>, <span class="hljs-string">'deviceOrientation'</span>,</li><li>    <span class="hljs-string">'theme'</span>, <span class="hljs-string">'windowWidth'</span>, <span class="hljs-string">'windowHeight'</span>];</li><li><span class="hljs-keyword">try</span> {</li><li>  atomicService.<span class="hljs-title function_">getSystemInfo</span>(stateArray).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: atomicService.SystemInfo</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'succeeded in getting system info asynchronously'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">brand</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">brand</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceModel</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">deviceModel</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">screenWidth</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">screenWidth</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">screenHeight</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">screenHeight</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">statusBarHeight</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">statusBarHeight</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">screenSafeArea</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">AvoidArea</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">screenSafeArea</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">language</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">language</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">osFullName</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">osFullName</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fontSizeSetting</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">fontSizeSetting</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">sdkApiVersion</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">sdkApiVersion</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">bluetoothEnabled</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">bluetoothEnabled</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">wifiEnabled</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">wifiEnabled</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">locationEnabled</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">locationEnabled</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceOrientation</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">deviceOrientation</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">theme</span>: <span class="hljs-title class_">ColorMode</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">theme</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">windowWidth</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">windowWidth</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">windowHeight</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">windowHeight</span>;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Promise error: %{public}d %{public}s'</span>, error.<span class="hljs-property">code</span>, error.<span class="hljs-property">message</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'failReason: %{public}d %{public}s'</span>, error.<span class="hljs-property">code</span>, error.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section171285335615" device-type="phone,tablet,wearable,tv,2in1">getSystemSetting<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section171285335615" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSystemSetting(properties?: Array&lt;SystemSettingType&gt;): SystemSettingInfo</p> <p>调用该方法获取系统设置属性，包括蓝牙、位置、Wi-Fi状态和设备方向信息。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>设备行为差异：</strong>对于5.0.0(12)版本，该接口在Phone、Tablet、2in1中可正常调用，在其他设备类型中返回801错误码。对于5.1.0(18)及之后版本，该接口在Phone、Tablet、2in1、Wearable、TV中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.1" width="14.74%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.2" width="23.36%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.3" width="5.25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.4" width="56.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.74%"><p>properties</p> </td> <td class="cellrowborder" width="23.36%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section11423195912475">SystemSettingType</a>&gt;</p> </td> <td class="cellrowborder" width="5.25%"><p>否</p> </td> <td class="cellrowborder" width="56.65%"><p>获取蓝牙、定位、Wi-Fi开关，以及设备方向等系统信息的请求对象。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>使用5.0.1(13)及以上版本时不需要配置Wi-Fi权限、蓝牙权限。</li><li>获取Wi-Fi信息需要配置权限ohos.permission.GET_WIFI_INFO。</li><li>获取蓝牙开启状态需要配置权限ohos.permission.ACCESS_BLUETOOTH。</li><li>获取用户程序访问控制权限可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-abilityaccessctrl#requestpermissionsfromuser9" target="_blank">程序访问控制管理</a>。</li><li>定位信息不支持在TV设备上获取。</li></ul> </div></div></div> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.1" width="41.14%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.2" width="58.86%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="41.14%"><p><a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section53111326141919">SystemSettingInfo</a></p> </td> <td class="cellrowborder" width="58.86%"><p>返回<a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section53111326141919">SystemSettingInfo</a>对象。</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-yxa-c106="" class="highlight-div"><div _ngcontent-yxa-c106="" class="highlight-div-header"><div _ngcontent-yxa-c106="" class="highlight-div-header-left"><div _ngcontent-yxa-c106="" class="handle-button expand-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yxa-c106="" class="highlight-div-header-right"><div _ngcontent-yxa-c106="" class="handle-button ai-button"></div><div _ngcontent-yxa-c106="" class="handle-button line-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yxa-c106="" class="handle-button theme-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yxa-c106="" class="handle-button copy-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yxa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { atomicService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScenarioFusionKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">stateArray</span>: <span class="hljs-title class_">Array</span>&lt;atomicService.<span class="hljs-property">SystemSettingType</span>&gt; =</li><li>  [<span class="hljs-string">'bluetoothEnabled'</span>, <span class="hljs-string">'locationEnabled'</span>, <span class="hljs-string">'deviceOrientation'</span>, <span class="hljs-string">'wifiEnabled'</span>];</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> data = atomicService.<span class="hljs-title function_">getSystemSetting</span>(stateArray);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'succeeded in getting system setting info'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bluetoothEnabled</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">bluetoothEnabled</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">locationEnabled</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">locationEnabled</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceOrientation</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">deviceOrientation</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">wifiEnabled</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">undefined</span> = data.<span class="hljs-property">wifiEnabled</span>;</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'failReason: %{public}d %{public}s'</span>, error.<span class="hljs-property">code</span>, error.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section13456131695414" device-type="phone,tablet,wearable,tv,2in1">showFollowComponent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13456131695414" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>showFollowComponent(ctx: UIContext, params: FollowComponentParams, callback: FollowComponentCallback): Promise&lt;void&gt;</p> <p>调用该方法展示关注组件。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.AtomicserviceComponent.atomicservice</p> <p><strong>设备行为差异：</strong>该接口在Phone、Tablet中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>6.0.1(21)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.1" width="14.74%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.2" width="23.36%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.3" width="5.24%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.4" width="56.66%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.74%"><p>ctx</p> </td> <td class="cellrowborder" width="23.36%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-api#uicontext" target="_blank">UIContext</a></p> </td> <td class="cellrowborder" width="5.24%"><p>是</p> </td> <td class="cellrowborder" width="56.66%"><p>UIContext实例对象。</p> </td> </tr> <tr><td class="cellrowborder" width="14.74%"><p>params</p> </td> <td class="cellrowborder" width="23.36%"><p><a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section1881114501476">FollowComponentParams</a></p> </td> <td class="cellrowborder" width="5.24%"><p>是</p> </td> <td class="cellrowborder" width="56.66%"><p>关注组件的参数。</p> </td> </tr> <tr><td class="cellrowborder" width="14.74%"><p>callback</p> </td> <td class="cellrowborder" width="23.36%"><p><a href="/consumer/cn/doc/harmonyos-references/scenario-fusion-atomicservice#section137361343174413">FollowComponentCallback</a></p> </td> <td class="cellrowborder" width="5.24%"><p>是</p> </td> <td class="cellrowborder" width="56.66%"><p>回调函数。callback返回关注的结果。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.1" width="41.14%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.2" width="58.86%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="41.14%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="58.86%"><p>Promise对象，无返回结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.14.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.14.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal#section801-该设备不支持此api" target="_blank">801</a></p> </td> <td class="cellrowborder" width="66.28%"><p>Capability not supported.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scenario-fusion-arkts-api-error-code#section310313457116">1009601001</a></p> </td> <td class="cellrowborder" width="66.28%"><p>Invalid service account id.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scenario-fusion-arkts-api-error-code#section182327351133">1009601002</a></p> </td> <td class="cellrowborder" width="66.28%"><p>The user has not logged in with HUAWEI ID.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scenario-fusion-arkts-api-error-code#section1710114369396">1009601003</a></p> </td> <td class="cellrowborder" width="66.28%"><p>Request server failed.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scenario-fusion-arkts-api-error-code#section12303893910">1009601004</a></p> </td> <td class="cellrowborder" width="66.28%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scenario-fusion-arkts-api-error-code#section944293916393">1009601005</a></p> </td> <td class="cellrowborder" width="66.28%"><p>Other error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-yxa-c106="" class="highlight-div"><div _ngcontent-yxa-c106="" class="highlight-div-header"><div _ngcontent-yxa-c106="" class="highlight-div-header-left"><div _ngcontent-yxa-c106="" class="handle-button expand-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yxa-c106="" class="highlight-div-header-right"><div _ngcontent-yxa-c106="" class="handle-button ai-button"></div><div _ngcontent-yxa-c106="" class="handle-button line-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yxa-c106="" class="handle-button theme-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yxa-c106="" class="handle-button copy-button"><div _ngcontent-yxa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yxa-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">atomicService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScenarioFusionKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">hilog</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>@<span class="hljs-title function_">Entry</span></li><li>@<span class="hljs-title function_">Component</span></li><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-title class_">void</span> {</li><li>    <span class="hljs-comment">// 一键关注组件。</span></li><li>    <span class="hljs-comment">// pubId: 服务号id，此处以官方小助手服务号id为例。</span></li><li>    <span class="hljs-keyword">const</span> <span class="hljs-variable">pubId</span>: <span class="hljs-title class_">string</span> = <span class="hljs-string">'0cca1c645526449fb89d4a83e3bc25df'</span>;</li><li>    <span class="hljs-comment">// channelId：渠道id，长度限制32，只能是数字或字母组成; offset：设置关注组件的位置坐标。</span></li><li>    <span class="hljs-keyword">const</span> <span class="hljs-variable">params</span>: <span class="hljs-title class_">atomicService</span>.<span class="hljs-title class_">FollowComponentParams</span> =</li><li>      { <span class="hljs-variable">pubId</span>: <span class="hljs-title class_">pubId</span>, <span class="hljs-variable">channelId</span>: <span class="hljs-string">''</span>, <span class="hljs-variable">offset</span>: { <span class="hljs-variable">x</span>: <span class="hljs-number">0</span>, <span class="hljs-variable">y</span>: <span class="hljs-number">300</span> } };</li><li>    <span class="hljs-comment">// 点击关注按钮的关注结果回调。</span></li><li>    <span class="hljs-keyword">const</span> <span class="hljs-variable">callbacks</span>: <span class="hljs-title class_">atomicService</span>.<span class="hljs-title class_">FollowComponentCallback</span> = {</li><li>      <span class="hljs-variable">onFollowComplete</span>: (<span class="hljs-title class_">err</span>, <span class="hljs-title class_">result</span>) =&gt; {</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable">err</span>) {</li><li>          <span class="hljs-comment">// 错误日志处理。</span></li><li>          <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">"testTag"</span>, <span class="hljs-string">"error: %{public}d %{public}s"</span>, <span class="hljs-variable">err</span>.<span class="hljs-variable">code</span>, <span class="hljs-variable">err</span>.<span class="hljs-variable">message</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">"testTag"</span>, <span class="hljs-string">"follow result: %{public}d"</span>, <span class="hljs-variable">result</span>.<span class="hljs-variable">code</span>);</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-variable">result</span>.<span class="hljs-variable">code</span> === <span class="hljs-variable">atomicService</span>.<span class="hljs-variable">FollowResult</span>.<span class="hljs-variable">SUCCESS</span>) {</li><li>          <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">"testTag"</span>, <span class="hljs-string">"follow succeeded handle"</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">"testTag"</span>, <span class="hljs-string">"follow failed handle"</span>);</li><li>        }</li><li>      }</li><li>    }</li><li>    <span class="hljs-comment">// 展示关注组件。</span></li><li>    <span class="hljs-variable">atomicService</span>.<span class="hljs-title function_">showFollowComponent</span>(<span class="hljs-keyword">this</span>.<span class="hljs-title function_">getUIContext</span>(), <span class="hljs-variable">params</span>, <span class="hljs-variable">callbacks</span>).<span class="hljs-keyword">catch</span>((<span class="hljs-variable">error</span>: <span class="hljs-title class_">BusinessError</span>&lt;<span class="hljs-title class_">void</span>&gt;) =&gt; {</li><li>      <span class="hljs-variable">hilog</span>.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'showFollowComponent failReason: %{public}d %{public}s'</span>, <span class="hljs-variable">error</span>.<span class="hljs-variable">code</span>,</li><li>        <span class="hljs-variable">error</span>.<span class="hljs-variable">message</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>() {</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> </div> <div></div></div>