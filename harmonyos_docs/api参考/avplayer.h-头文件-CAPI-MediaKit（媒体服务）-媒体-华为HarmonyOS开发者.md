<h1 _ngcontent-gck-c119="" class="doc-title ng-star-inserted" title="avplayer.h"> avplayer.h </h1>

<div _ngcontent-gck-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div> <div class="tiledSection" style="contain-intrinsic-size: auto 422px;"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义avplayer接口。使用AVPlayer提供的Native API播放媒体源。</p> <p><strong>引用文件：</strong> &lt;multimedia/player_framework/avplayer.h&gt;</p> <p><strong>库：</strong> libavplayer.so</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer">AVPlayer</a></p> <p><strong>相关示例：</strong> <a href="https://gitcode.com/openharmony/applications_app_samples/tree/master/code/DocsSample/Media/AVPlayer/AVPlayerNDK" target="_blank">AVPlayerNDKVideo</a></p> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 146px;"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 258px;"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-mediakeysession">MediaKeySession</a></td> <td class="cellrowborder" width="33.33333333333333%">MediaKeySession</td> <td class="cellrowborder" width="33.33333333333333%">MediaKeySession类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-drm-mediakeysysteminfo">DRM_MediaKeySystemInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">DRM_MediaKeySystemInfo</td> <td class="cellrowborder" width="33.33333333333333%">DRM_MediaKeySystemInfo类型。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 5653px;"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#player_mediakeysysteminfocallback">typedef void (*Player_MediaKeySystemInfoCallback)(OH_AVPlayer player, DRM_MediaKeySystemInfo mediaKeySystemInfo)</a></td> <td class="cellrowborder" width="33.33333333333333%">Player_MediaKeySystemInfoCallback</td> <td class="cellrowborder" width="33.33333333333333%">播放器DRM信息更新时调用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_create">OH_AVPlayer *OH_AVPlayer_Create(void)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>创建播放器。</p> <p> 推荐单个应用创建的音视频播放器实例（即音频、视频、音视频三类相加）不超过16个。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_seturlsource">OH_AVErrCode OH_AVPlayer_SetURLSource(OH_AVPlayer *player, const char *url)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置播放器的播放源。对应的源可以是http url。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setfdsource">OH_AVErrCode OH_AVPlayer_SetFDSource(OH_AVPlayer *player, int32_t fd, int64_t offset, int64_t size)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置播放器的媒体文件描述符来源。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setdatasource">OH_AVErrCode OH_AVPlayer_SetDataSource(OH_AVPlayer player, OH_AVDataSourceExt datasrc, void* userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置播放器的媒体源，该媒体源的数据由应用程序提供。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_prepare">OH_AVErrCode OH_AVPlayer_Prepare(OH_AVPlayer *player)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>准备播放环境，异步缓存媒体数据。</p> <p> 此函数必须在SetSource之后调用。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_play">OH_AVErrCode OH_AVPlayer_Play(OH_AVPlayer *player)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>开始播放。</p> <p> 此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_prepare">OH_AVPlayer_Prepare</a>之后调用。</p> <p> 如果播放器状态为&lt;Prepared&gt;，调用此函数开始播放。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_pause">OH_AVErrCode OH_AVPlayer_Pause(OH_AVPlayer *player)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">暂停播放。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_stop">OH_AVErrCode OH_AVPlayer_Stop(OH_AVPlayer *player)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">停止播放。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_reset">OH_AVErrCode OH_AVPlayer_Reset(OH_AVPlayer *player)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>将播放器恢复到初始状态。</p> <p> 函数调用完成后，调用SetSource添加播放源。调用<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_prepare">OH_AVPlayer_Prepare</a>后，再调用<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_play">OH_AVPlayer_Play</a>重新开始播放。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_release">OH_AVErrCode OH_AVPlayer_Release(OH_AVPlayer *player)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>异步释放播放器资源。</p> <p> 异步释放可以提升性能，但不能确保播放画面的SurfaceBuffer已释放。调用者需要确保播放画面窗口的生命周期安全。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_releasesync">OH_AVErrCode OH_AVPlayer_ReleaseSync(OH_AVPlayer *player)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>同步释放播放器资源。</p> <p> 同步过程保证了播放画面的SurfaceBuffer释放，但该过程耗时较长，建议调用者自行设计异步机制。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setvolume">OH_AVErrCode OH_AVPlayer_SetVolume(OH_AVPlayer *player, float leftVolume, float rightVolume)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>设置播放器的音量。</p> <p> 可以在播放或暂停的过程中使用。0表示无声音，1为原始值。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setloudnessgain">OH_AVErrCode OH_AVPlayer_SetLoudnessGain(OH_AVPlayer *player, float loudnessGain)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>设置播放器的响度。当播放处于prepared/playing/paused/completed/stopped状态时，可调用该接口。</p> <p> 默认响度增益0.0dB。播放器流的usage参数必须是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_usage">OH_AudioStream_Usage</a>.AUDIOSTREAM_USAGE_MUSIC，</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_usage">OH_AudioStream_Usage</a>.AUDIOSTREAM_USAGE_MOVIE，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_usage">OH_AudioStream_Usage</a>.AUDIOSTREAM_USAGE_AUDIOBOOK 之一。</p> <p> 音频渲染器的延迟模式必须是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_latencymode">OH_AudioStream_LatencyMode</a>.AUDIOSTREAM_LATENCY_MODE_NORMAL。</p> <p> 如果通过高分辨率管道播放，则不支持此操作。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_seek">OH_AVErrCode OH_AVPlayer_Seek(OH_AVPlayer *player, int32_t mSeconds, AVPlayerSeekMode mode)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>改变播放位置。</p> <p> 此函数可以在播放或暂停时使用。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_getcurrenttime">OH_AVErrCode OH_AVPlayer_GetCurrentTime(OH_AVPlayer *player, int32_t *currentTime)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取播放位置，精确到毫秒。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_getvideowidth">OH_AVErrCode OH_AVPlayer_GetVideoWidth(OH_AVPlayer *player, int32_t *videoWidth)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取视频宽度。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_getvideoheight">OH_AVErrCode OH_AVPlayer_GetVideoHeight(OH_AVPlayer *player, int32_t *videoHeight)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取视频高度。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setplaybackspeed">OH_AVErrCode OH_AVPlayer_SetPlaybackSpeed(OH_AVPlayer *player, AVPlaybackSpeed speed)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">根据指定的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#avplaybackspeed">AVPlaybackSpeed</a>，设置播放器的播放速率。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setplaybackrate">OH_AVErrCode OH_AVPlayer_SetPlaybackRate(OH_AVPlayer *player, float rate)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>在有效范围内，设置播放器的播放速率。</p> <p> 支持的状态：已准备/正在播放/已暂停/已完成。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_getplaybackspeed">OH_AVErrCode OH_AVPlayer_GetPlaybackSpeed(OH_AVPlayer *player, AVPlaybackSpeed *speed)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取当前播放器的播放速率。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setaudiorendererinfo">OH_AVErrCode OH_AVPlayer_SetAudioRendererInfo(OH_AVPlayer *player, OH_AudioStream_Usage streamUsage)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置player音频流类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setvolumemode">OH_AVErrCode OH_AVPlayer_SetVolumeMode(OH_AVPlayer *player, OH_AudioStream_VolumeMode volumeMode)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置player音频流音量模式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setaudiointerruptmode">OH_AVErrCode OH_AVPlayer_SetAudioInterruptMode(OH_AVPlayer *player, OH_AudioInterrupt_Mode interruptMode)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置player音频流的打断模式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setaudioeffectmode">OH_AVErrCode OH_AVPlayer_SetAudioEffectMode(OH_AVPlayer *player, OH_AudioStream_AudioEffectMode effectMode)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置player音频流的音效模式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_selectbitrate">OH_AVErrCode OH_AVPlayer_SelectBitRate(OH_AVPlayer *player, uint32_t bitRate)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>设置hls播放器使用的码率。仅对HLS协议网络流有效。</p> <p> 默认情况下，播放器会根据网络连接情况选择合适的码率和速度。</p> <p> 通过INFO_TYPE_BITRATE_COLLECT上报有效码率链表，设置并选择指定的码率，选择小于且最接近的码率。准备好后，读取以查询当前选择的比特率。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setvideosurface">OH_AVErrCode OH_AVPlayer_SetVideoSurface(OH_AVPlayer *player, OHNativeWindow *window)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>设置播放画面窗口。</p> <p> 此函数必须在SetSource之后，Prepare之前调用。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_getduration">OH_AVErrCode OH_AVPlayer_GetDuration(OH_AVPlayer *player, int32_t *duration)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取媒体文件的总时长，精确到毫秒。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_getstate">OH_AVErrCode OH_AVPlayer_GetState(OH_AVPlayer *player, AVPlayerState *state)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取当前播放状态。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_isplaying">bool OH_AVPlayer_IsPlaying(OH_AVPlayer *player)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">判断播放器是否在播放。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_islooping">bool OH_AVPlayer_IsLooping(OH_AVPlayer *player)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">判断是否循环播放。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setlooping">OH_AVErrCode OH_AVPlayer_SetLooping(OH_AVPlayer *player, bool loop)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置循环播放。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setplayercallback">OH_AVErrCode OH_AVPlayer_SetPlayerCallback(OH_AVPlayer *player, AVPlayerCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>设置播放器回调函数。</p> <p> 由于通过此方法设置的信息监听回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#oh_avplayeroninfo">OH_AVPlayerOnInfo</a>和错误监听回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#oh_avplayeronerror">OH_AVPlayerOnError</a>可以传递的信息有限，也不便于应用区分多个播放器实例。</p> <p> 从API version 12开始，应使用<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setoninfocallback">OH_AVPlayer_SetOnInfoCallback</a>、<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setonerrorcallback">OH_AVPlayer_SetOnErrorCallback</a>接口分别设置信息监听回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#oh_avplayeroninfocallback">OH_AVPlayerOnInfoCallback</a>和错误监听回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#oh_avplayeronerrorcallback">OH_AVPlayerOnErrorCallback</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_selecttrack">OH_AVErrCode OH_AVPlayer_SelectTrack(OH_AVPlayer *player, int32_t index)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>选择音频或字幕轨道。</p> <p> 默认播放第一个带数据的音轨，不播放字幕轨迹。</p> <p> 设置生效后，原音轨将失效。请设置字幕处于准备/播放/暂停/完成状态，并将音轨设置为准备状态。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_deselecttrack">OH_AVErrCode OH_AVPlayer_DeselectTrack(OH_AVPlayer *player, int32_t index)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">取消选择当前音频或字幕轨道。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_getcurrenttrack">OH_AVErrCode OH_AVPlayer_GetCurrentTrack(OH_AVPlayer *player, int32_t trackType, int32_t *index)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取当前有效的轨道索引。请将状态设置为准备/正在播放/暂停/完成。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setmediakeysysteminfocallback">OH_AVErrCode OH_AVPlayer_SetMediaKeySystemInfoCallback(OH_AVPlayer *player, Player_MediaKeySystemInfoCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置播放器媒体密钥系统信息回调的方法。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_getmediakeysysteminfo">OH_AVErrCode OH_AVPlayer_GetMediaKeySystemInfo(OH_AVPlayer *player, DRM_MediaKeySystemInfo *mediaKeySystemInfo)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取媒体密钥系统信息以创建媒体密钥会话。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setdecryptionconfig">OH_AVErrCode OH_AVPlayer_SetDecryptionConfig(OH_AVPlayer *player, MediaKeySession *mediaKeySession, bool secureVideoPath)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置解密信息。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setoninfocallback">OH_AVErrCode OH_AVPlayer_SetOnInfoCallback(OH_AVPlayer *player, OH_AVPlayerOnInfoCallback callback, void *userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置播放器消息回调监听函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setonerrorcallback">OH_AVErrCode OH_AVPlayer_SetOnErrorCallback(OH_AVPlayer *player, OH_AVPlayerOnErrorCallback callback, void *userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置播放器错误回调监听函数。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 146px;"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection" style="contain-intrinsic-size: auto 588px;"><h3 id="player_mediakeysysteminfocallback" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">Player_MediaKeySystemInfoCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="player_mediakeysysteminfocallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*Player_MediaKeySystemInfoCallback)(OH_AVPlayer *player, DRM_MediaKeySystemInfo* mediaKeySystemInfo)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>播放器DRM信息更新时调用。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-drm-mediakeysysteminfo">DRM_MediaKeySystemInfo</a>* mediaKeySystemInfo</td> <td class="cellrowborder" width="50%">DRM信息。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 741px;"><h3 id="oh_avplayer_create" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_Create()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_create" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVPlayer *<span class="hljs-built_in">OH_AVPlayer_Create</span>(void)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建播放器。</p> <p> 推荐单个应用创建的音视频播放器实例（即音频、视频、音视频三类相加）不超过16个。</p> <p> </p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *</td> <td class="cellrowborder" width="50%"><p>如果创建成功返回指向OH_AVPlayer实例的指针，否则返回空指针。</p> <p> 可能的失败原因：</p> <p> 1.PlayerFactory::CreatePlayer执行失败。</p> <p> 2.new PlayerObject执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_avplayer_seturlsource" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetURLSource()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_seturlsource" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVErrCode <span class="hljs-title">OH_AVPlayer_SetURLSource</span><span class="hljs-params">(OH_AVPlayer *player, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *url)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置播放器的播放源。对应的源可以是http url。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *url</td> <td class="cellrowborder" width="50%">播放源。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：设置成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，url为空或者player SetUrlSource执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 981px;"><h3 id="oh_avplayer_setfdsource" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetFDSource()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setfdsource" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVErrCode <span class="hljs-title">OH_AVPlayer_SetFDSource</span><span class="hljs-params">(OH_AVPlayer *player, <span class="hljs-type">int32_t</span> fd, <span class="hljs-type">int64_t</span> offset, <span class="hljs-type">int64_t</span> size)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置播放器的媒体文件描述符来源。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t fd</td> <td class="cellrowborder" width="50%">媒体源的文件描述符。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t offset</td> <td class="cellrowborder" width="50%">媒体源在文件描述符中的偏移量。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t size</td> <td class="cellrowborder" width="50%">表示媒体源的大小。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：fd设置成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player SetFdSource执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 950px;"><h3 id="oh_avplayer_setdatasource" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetDataSource()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setdatasource" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVPlayer_SetDataSource</span><span class="hljs-params">(OH_AVPlayer *player, OH_AVDataSourceExt* datasrc, <span class="hljs-keyword">void</span>* userData)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置播放器的媒体源，该媒体源的数据由应用程序提供。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_AVDataSourceExt* datasrc</td> <td class="cellrowborder" width="50%">指向自定义媒体数据的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">void* userData</td> <td class="cellrowborder" width="50%">用户传入的句柄，用于回调中传入。userData若为空，不支持AVPlayer的多实例播放。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AVErrCode</td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：设置成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者输入datasrc为空指针。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 864px;"><h3 id="oh_avplayer_prepare" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_Prepare()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_prepare" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_Prepare</span>(OH_AVPlayer *player)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>准备播放环境，异步缓存媒体数据。</p> <p> 此函数必须在SetSource之后调用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player Prepare执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 912px;"><h3 id="oh_avplayer_play" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_Play()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_play" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_Play</span>(OH_AVPlayer *player)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>开始播放。</p> <p> 此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_prepare">OH_AVPlayer_Prepare</a>之后调用。</p> <p> 如果播放器状态为&lt;Prepared&gt;，调用此函数开始播放。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player Play执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 816px;"><h3 id="oh_avplayer_pause" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_Pause()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_pause" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_Pause</span>(OH_AVPlayer *player)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>暂停播放。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player Pause执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 816px;"><h3 id="oh_avplayer_stop" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_Stop()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_stop" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_Stop</span>(OH_AVPlayer *player)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>停止播放。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player Stop执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 864px;"><h3 id="oh_avplayer_reset" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_Reset()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_reset" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_Reset</span>(OH_AVPlayer *player)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将播放器恢复到初始状态。</p> <p> 函数调用完成后，调用SetSource添加播放源。调用<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_prepare">OH_AVPlayer_Prepare</a>后，再调用<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_play">OH_AVPlayer_Play</a>重新开始播放。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player Reset执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 864px;"><h3 id="oh_avplayer_release" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_Release()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_release" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_Release</span>(OH_AVPlayer *player)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>异步释放播放器资源。</p> <p> 异步释放可以提升性能，但不能确保播放画面的SurfaceBuffer已释放。调用者需要确保播放画面窗口的生命周期安全。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player Release执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 864px;"><h3 id="oh_avplayer_releasesync" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_ReleaseSync()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_releasesync" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_ReleaseSync</span>(OH_AVPlayer *player)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>同步释放播放器资源。</p> <p> 同步过程保证了播放画面的SurfaceBuffer释放，但该过程耗时较长，建议调用者自行设计异步机制。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player ReleaseSync执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 974px;"><h3 id="oh_avplayer_setvolume" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetVolume()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setvolume" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVPlayer_SetVolume</span><span class="hljs-params">(OH_AVPlayer *player, <span class="hljs-type">float</span> leftVolume, <span class="hljs-type">float</span> rightVolume)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置播放器的音量。</p> <p> 可以在播放或暂停的过程中使用。0表示无声音，1为原始值。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">float leftVolume</td> <td class="cellrowborder" width="50%">要设置的左声道目标音量。</td> </tr> <tr><td class="cellrowborder" width="50%">float rightVolume</td> <td class="cellrowborder" width="50%">要设置的右声道目标音量。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置音量。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player SetVolume执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1231px;"><h3 id="oh_avplayer_setloudnessgain" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetLoudnessGain()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setloudnessgain" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVPlayer_SetLoudnessGain</span><span class="hljs-params">(OH_AVPlayer *player, <span class="hljs-type">float</span> loudnessGain)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置播放器的响度。当播放处于prepared/playing/paused/completed/stopped状态时，可调用该接口。</p> <p> 默认响度增益0.0dB。播放器流的usage参数必须是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_usage">OH_AudioStream_Usage</a>.AUDIOSTREAM_USAGE_MUSIC，</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_usage">OH_AudioStream_Usage</a>.AUDIOSTREAM_USAGE_MOVIE，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_usage">OH_AudioStream_Usage</a>.AUDIOSTREAM_USAGE_AUDIOBOOK 之一。</p> <p> 音频渲染器的延迟模式必须是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_latencymode">OH_AudioStream_LatencyMode</a>.AUDIOSTREAM_LATENCY_MODE_NORMAL。</p> <p> 如果通过高分辨率管道播放，则不支持此操作。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">float loudnessGain</td> <td class="cellrowborder" width="50%">设置播放器的响度值，单位为dB，响度范围为[-90.0, 24.0]。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.14.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.14.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置响度。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者输入的loudnessGain是无效参数。</p> <p> AV_ERR_INVALID_STATE：函数在不正常的状态下调用，或者audioRendererInfo的usage参数不是<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage">StreamUsage</a>.STREAM_USAGE_MUSIC，</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage">StreamUsage</a>.STREAM_USAGE_MOVIE ，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage">StreamUsage</a>.STREAM_USAGE_AUDIOBOOK 之一。</p> <p> AV_ERR_SERVICE_DIED：系统错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 974px;"><h3 id="oh_avplayer_seek" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_Seek()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_seek" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_Seek</span>(OH_AVPlayer *player, int32_t mSeconds, AVPlayerSeekMode mode)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>改变播放位置。</p> <p> 此函数可以在播放或暂停时使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t mSeconds</td> <td class="cellrowborder" width="50%">播放目标位置，精确到毫秒。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#avplayerseekmode">AVPlayerSeekMode</a> mode</td> <td class="cellrowborder" width="50%">播放器的跳转模式。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player Seek执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_avplayer_getcurrenttime" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_GetCurrentTime()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_getcurrenttime" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_GetCurrentTime</span>(OH_AVPlayer *player, int32_t *currentTime)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取播放位置，精确到毫秒。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t *currentTime</td> <td class="cellrowborder" width="50%">播放位置。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功获取当前播放位置。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player GetCurrentTime执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 847px;"><h3 id="oh_avplayer_getvideowidth" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_GetVideoWidth()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_getvideowidth" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_GetVideoWidth</span>(OH_AVPlayer *player, int32_t *videoWidth)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取视频宽度。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t *videoWidth</td> <td class="cellrowborder" width="50%">视频宽度。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功获取视频宽度。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 847px;"><h3 id="oh_avplayer_getvideoheight" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_GetVideoHeight()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_getvideoheight" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_GetVideoHeight</span>(OH_AVPlayer *player, int32_t *videoHeight)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取视频高度。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t *videoHeight</td> <td class="cellrowborder" width="50%">视频高度。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功获取视频高度。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 847px;"><h3 id="oh_avplayer_setplaybackspeed" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetPlaybackSpeed()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setplaybackspeed" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SetPlaybackSpeed</span>(OH_AVPlayer *player, AVPlaybackSpeed speed)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据指定的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#avplaybackspeed">AVPlaybackSpeed</a>，设置播放器的播放速率。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#avplaybackspeed">AVPlaybackSpeed</a> speed</td> <td class="cellrowborder" width="50%">速率模式。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置播放速率。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 967px;"><h3 id="oh_avplayer_setplaybackrate" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetPlaybackRate()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setplaybackrate" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVPlayer_SetPlaybackRate</span><span class="hljs-params">(OH_AVPlayer *player, <span class="hljs-type">float</span> rate)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>在有效范围内，设置播放器的播放速率。</p> <p> 支持的状态：已准备/正在播放/已暂停/已完成。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">float rate</td> <td class="cellrowborder" width="50%">播放速率，有效范围是0.125~4。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置播放速率。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：如果在不支持的状态下调用或在直播期间调用。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者速率超出范围。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_avplayer_getplaybackspeed" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_GetPlaybackSpeed()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_getplaybackspeed" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_GetPlaybackSpeed</span>(OH_AVPlayer *player, AVPlaybackSpeed *speed)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取当前播放器的播放速率。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#avplaybackspeed">AVPlaybackSpeed</a> *speed</td> <td class="cellrowborder" width="50%">速率模式。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功获取播放速率。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player GetPlaybackSpeed执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_avplayer_setaudiorendererinfo" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetAudioRendererInfo()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setaudiorendererinfo" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SetAudioRendererInfo</span>(OH_AVPlayer *player, OH_AudioStream_Usage streamUsage)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置player音频流类型。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_usage">OH_AudioStream_Usage</a> streamUsage</td> <td class="cellrowborder" width="50%">player音频流设置的类型。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置音频流类型。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针或者streamUsage值无效。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 943px;"><h3 id="oh_avplayer_setvolumemode" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetVolumeMode()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setvolumemode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SetVolumeMode</span>(OH_AVPlayer *player, OH_AudioStream_VolumeMode volumeMode)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置player音频流音量模式。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_volumemode">OH_AudioStream_VolumeMode</a> volumeMode</td> <td class="cellrowborder" width="50%">指定音频流音量模式。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置音频流音量模式。</p> <p> AV_ERR_INVALID_VAL： 输入player为空指针或者volumeMode值无效。</p> <p> AV_ERR_INVALID_STATE：函数在无效状态下调用，应先处于准备状态。</p> <p> AV_ERR_SERVICE_DIED：系统错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_avplayer_setaudiointerruptmode" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetAudioInterruptMode()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setaudiointerruptmode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SetAudioInterruptMode</span>(OH_AVPlayer *player, OH_AudioInterrupt_Mode interruptMode)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置player音频流的打断模式。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiointerrupt_mode">OH_AudioInterrupt_Mode</a> interruptMode</td> <td class="cellrowborder" width="50%">player音频流使用的打断模式。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置音频流的打断模式。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者interruptMode值无效。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_avplayer_setaudioeffectmode" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetAudioEffectMode()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setaudioeffectmode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SetAudioEffectMode</span>(OH_AVPlayer *player, OH_AudioStream_AudioEffectMode effectMode)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置player音频流的音效模式。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_audioeffectmode">OH_AudioStream_AudioEffectMode</a> effectMode</td> <td class="cellrowborder" width="50%">player音频流使用的音效模式。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置音频流的音效模式。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者effectMode值无效。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 991px;"><h3 id="oh_avplayer_selectbitrate" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SelectBitRate()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_selectbitrate" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SelectBitRate</span>(OH_AVPlayer *player, uint32_t bitRate)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置hls播放器使用的码率。仅对HLS协议网络流有效。</p> <p> 默认情况下，播放器会根据网络连接情况选择合适的码率和速度。</p> <p> 通过INFO_TYPE_BITRATE_COLLECT上报有效码率链表，设置并选择指定的码率，选择小于且最接近的码率。准备好后，读取以查询当前选择的比特率。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t bitRate</td> <td class="cellrowborder" width="50%">码率，单位为bps。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.31.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置码率。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player SelectBitRate执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 919px;"><h3 id="oh_avplayer_setvideosurface" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetVideoSurface()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setvideosurface" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SetVideoSurface</span>(OH_AVPlayer *player, OHNativeWindow *window)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置播放画面窗口。</p> <p> 此函数必须在SetSource之后，Prepare之前调用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">OHNativeWindow *window</td> <td class="cellrowborder" width="50%">指向OHNativeWindow实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置播放画面窗口。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，输入window为空指针或者player SetVideoSurface执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_avplayer_getduration" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_GetDuration()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_getduration" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_GetDuration</span>(OH_AVPlayer *player, int32_t *duration)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取媒体文件的总时长，精确到毫秒。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t *duration</td> <td class="cellrowborder" width="50%">媒体文件的总时长。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功获取媒体文件时长。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player GetDuration执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_avplayer_getstate" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_GetState()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_getstate" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_GetState</span>(OH_AVPlayer *player, AVPlayerState *state)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取当前播放状态。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#avplayerstate">AVPlayerState</a> *state</td> <td class="cellrowborder" width="50%">当前播放状态。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功获取当前播放状态。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player GetState执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 792px;"><h3 id="oh_avplayer_isplaying" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_IsPlaying()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_isplaying" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>bool <span class="hljs-built_in">OH_AVPlayer_IsPlaying</span>(OH_AVPlayer *player)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>判断播放器是否在播放。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%">如果正在播放，则返回true；如果不在播放或者输入player为空指针则返回false。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 792px;"><h3 id="oh_avplayer_islooping" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_IsLooping()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_islooping" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>bool <span class="hljs-built_in">OH_AVPlayer_IsLooping</span>(OH_AVPlayer *player)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>判断是否循环播放。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%">如果是循环播放，则返回true；如果不是循环播放或者输入player为空指针则返回false。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 895px;"><h3 id="oh_avplayer_setlooping" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetLooping()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setlooping" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-rust" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_ invoke__">OH_AVPlayer_SetLooping</span>(OH_AVPlayer *player, <span class="hljs-type">bool</span> <span class="hljs-keyword">loop</span>)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置循环播放。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">bool loop</td> <td class="cellrowborder" width="50%">循环播放开关。true表示开启循环播放，false表示关闭循环播放。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置循环播放。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player SetLooping执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1135px;"><h3 id="oh_avplayer_setplayercallback" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetPlayerCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setplayercallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SetPlayerCallback</span>(OH_AVPlayer *player, AVPlayerCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置播放器回调函数。</p> <p> 由于通过此方法设置的信息监听回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#oh_avplayeroninfo">OH_AVPlayerOnInfo</a>和错误监听回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#oh_avplayeronerror">OH_AVPlayerOnError</a>可以传递的信息有限，也不便于应用区分多个播放器实例。</p> <p> 从API version 12开始，应使用<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setoninfocallback">OH_AVPlayer_SetOnInfoCallback</a>、<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setonerrorcallback">OH_AVPlayer_SetOnErrorCallback</a>接口分别设置信息监听回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#oh_avplayeroninfocallback">OH_AVPlayerOnInfoCallback</a>和错误监听回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#oh_avplayeronerrorcallback">OH_AVPlayerOnErrorCallback</a>。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>废弃版本：</strong> 12</p> <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setoninfocallback">OH_AVPlayer_SetOnInfoCallback</a>、<a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#oh_avplayer_setonerrorcallback">OH_AVPlayer_SetOnErrorCallback</a></p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.12.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.38.12.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-avplayercallback">AVPlayerCallback</a> callback</td> <td class="cellrowborder" width="50%">回调对象指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.14.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.14.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功设置播放器回调。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，callback.onInfo或onError为空，或者player SetPlayerCallback执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 967px;"><h3 id="oh_avplayer_selecttrack" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SelectTrack()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_selecttrack" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SelectTrack</span>(OH_AVPlayer *player, int32_t index)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>选择音频或字幕轨道。</p> <p> 默认播放第一个带数据的音轨，不播放字幕轨迹。</p> <p> 设置生效后，原音轨将失效。请设置字幕处于准备/播放/暂停/完成状态，并将音轨设置为准备状态。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t index</td> <td class="cellrowborder" width="50%">索引。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player SelectTrack执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_avplayer_deselecttrack" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_DeselectTrack()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_deselecttrack" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_DeselectTrack</span>(OH_AVPlayer *player, int32_t index)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>取消选择当前音频或字幕轨道。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t index</td> <td class="cellrowborder" width="50%">索引。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player DeselectTrack执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 926px;"><h3 id="oh_avplayer_getcurrenttrack" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_GetCurrentTrack()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_getcurrenttrack" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVErrCode <span class="hljs-title">OH_AVPlayer_GetCurrentTrack</span><span class="hljs-params">(OH_AVPlayer *player, <span class="hljs-type">int32_t</span> trackType, <span class="hljs-type">int32_t</span> *index)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取当前有效的轨道索引。请将状态设置为准备/正在播放/暂停/完成。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t trackType</td> <td class="cellrowborder" width="50%">媒体类型。0：音频，1：视频。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t *index</td> <td class="cellrowborder" width="50%">索引。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.41.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：成功获取轨道索引。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，或者player GetCurrentTrack执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 919px;"><h3 id="oh_avplayer_setmediakeysysteminfocallback" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetMediaKeySystemInfoCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setmediakeysysteminfocallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SetMediaKeySystemInfoCallback</span>(OH_AVPlayer *player, Player_MediaKeySystemInfoCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置播放器媒体密钥系统信息回调的方法。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avplayer-h#player_mediakeysysteminfocallback">Player_MediaKeySystemInfoCallback</a> callback</td> <td class="cellrowborder" width="50%">对象指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.42.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针，callback为空指针，player SetDrmSystemInfoCallback，</p> <p> SetDrmSystemInfoCallback或SetDrmSystemInfoCallback执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_avplayer_getmediakeysysteminfo" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_GetMediaKeySystemInfo()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_getmediakeysysteminfo" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_GetMediaKeySystemInfo</span>(OH_AVPlayer *player, DRM_MediaKeySystemInfo *mediaKeySystemInfo)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取媒体密钥系统信息以创建媒体密钥会话。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.43.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-drm-mediakeysysteminfo">DRM_MediaKeySystemInfo</a> *mediaKeySystemInfo</td> <td class="cellrowborder" width="50%">媒体密钥系统信息。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针或者内存不足。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 950px;"><h3 id="oh_avplayer_setdecryptionconfig" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetDecryptionConfig()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setdecryptionconfig" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVPlayer_SetDecryptionConfig</span>(OH_AVPlayer *player, MediaKeySession *mediaKeySession, bool secureVideoPath)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置解密信息。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.44.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-mediakeysession">MediaKeySession</a> *mediaKeySession</td> <td class="cellrowborder" width="50%">具有解密功能的媒体密钥会话实例。</td> </tr> <tr><td class="cellrowborder" width="50%">bool secureVideoPath</td> <td class="cellrowborder" width="50%">是否需要安全解码器。true表示需要安全解码器，false表示不需要安全解码器。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入player为空指针或者player SetDecryptionConfig执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 974px;"><h3 id="oh_avplayer_setoninfocallback" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetOnInfoCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setoninfocallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVPlayer_SetOnInfoCallback</span><span class="hljs-params">(OH_AVPlayer *player, OH_AVPlayerOnInfoCallback callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置播放器消息回调监听函数。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.45.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#oh_avplayeroninfocallback">OH_AVPlayerOnInfoCallback</a> callback</td> <td class="cellrowborder" width="50%">执行回调监听函数的指针，空指针表示取消设置播放器消息回调监听。</td> </tr> <tr><td class="cellrowborder" width="50%">void *userData</td> <td class="cellrowborder" width="50%">指向应用调用者设置的实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.45.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.45.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_NO_MEMORY：内存分配失败。</p> <p> AV_ERR_INVALID_VAL： 输入player为空指针或者函数执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 974px;"><h3 id="oh_avplayer_setonerrorcallback" device-type="phone,2in1,tablet,wearable,tv">OH_AVPlayer_SetOnErrorCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avplayer_setonerrorcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gck-c106="" class="highlight-div"><div _ngcontent-gck-c106="" class="highlight-div-header"><div _ngcontent-gck-c106="" class="highlight-div-header-left"><div _ngcontent-gck-c106="" class="handle-button expand-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gck-c106="" class="highlight-div-header-right"><div _ngcontent-gck-c106="" class="handle-button ai-button"></div><div _ngcontent-gck-c106="" class="handle-button line-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gck-c106="" class="handle-button theme-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gck-c106="" class="handle-button copy-button"><div _ngcontent-gck-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gck-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVPlayer_SetOnErrorCallback</span><span class="hljs-params">(OH_AVPlayer *player, OH_AVPlayerOnErrorCallback callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置播放器错误回调监听函数。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVPlayer</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.46.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-oh-avplayer">OH_AVPlayer</a> *player</td> <td class="cellrowborder" width="50%">指向OH_AVPlayer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avplayer-base-h#oh_avplayeronerrorcallback">OH_AVPlayerOnErrorCallback</a> callback</td> <td class="cellrowborder" width="50%">执行回调监听函数的指针，空指针表示取消设置播放器错误回调监听。</td> </tr> <tr><td class="cellrowborder" width="50%">void *userData</td> <td class="cellrowborder" width="50%">指向应用调用者设置的实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.46.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.46.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_NO_MEMORY：内存分配失败。</p> <p> AV_ERR_INVALID_VAL： 输入player为空指针或者函数执行失败。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>