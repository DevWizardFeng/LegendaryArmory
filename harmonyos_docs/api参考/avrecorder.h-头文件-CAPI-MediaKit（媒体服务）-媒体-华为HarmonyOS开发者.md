<h1 _ngcontent-kpq-c119="" class="doc-title ng-star-inserted" title="avrecorder.h"> avrecorder.h </h1>

<div _ngcontent-kpq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义AVRecorder接口。应用可使用媒体AVRecorder提供的接口录制媒体数据。</p>     <p><strong>引用文件：</strong> &lt;multimedia/player_framework/avrecorder.h&gt;</p>     <p><strong>库：</strong> libavrecorder.so</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder">AVRecorder</a></p>    </div>    <div class="tiledSection">     <h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="函数" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_create">OH_AVRecorder *OH_AVRecorder_Create(void)</a></td>         <td class="cellrowborder" width="50%">创建AVRecorder实例。调用成功之后进入AVRECORDER_IDLE状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVErrCode OH_AVRecorder_Prepare(OH_AVRecorder *recorder, OH_AVRecorder_Config *config)</a></td>         <td class="cellrowborder" width="50%">          <p>配置AVRecorder参数，准备录制。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_create">OH_AVRecorder_Create</a>成功触发之后调用，调用成功之后进入AVRECORDER_PREPARED状态。</p>          <p>若只录制音频，则无需配置视频相关参数；同理，若只录制视频，则无需配置音频相关参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_getavrecorderconfig">OH_AVErrCode OH_AVRecorder_GetAVRecorderConfig(OH_AVRecorder *recorder, OH_AVRecorder_Config **config)</a></td>         <td class="cellrowborder" width="50%">获取当前的录制参数。此接口必须在录制准备完成后调用。传入的*config必须为nullptr，由框架层统一分配和释放内存，以避免内存管理混乱，防止内存泄漏或重复释放等问题。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_getinputsurface">OH_AVErrCode OH_AVRecorder_GetInputSurface(OH_AVRecorder *recorder, OHNativeWindow **window)</a></td>         <td class="cellrowborder" width="50%">          <p>获取输入Surface。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>成功触发之后，<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>之前调用。</p>          <p>此Surface提供给调用者，调用者从此Surface中获取Surface Buffer，填入相应的视频数据。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_updaterotation">OH_AVErrCode OH_AVRecorder_UpdateRotation(OH_AVRecorder *recorder, int32_t rotation)</a></td>         <td class="cellrowborder" width="50%">更新视频旋转角度。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>成功触发之后，<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>之前调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVErrCode OH_AVRecorder_Start(OH_AVRecorder *recorder)</a></td>         <td class="cellrowborder" width="50%">开始录制。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>成功触发之后调用，调用成功之后进入AVRECORDER_STARTED状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_pause">OH_AVErrCode OH_AVRecorder_Pause(OH_AVRecorder *recorder)</a></td>         <td class="cellrowborder" width="50%">          <p>暂停录制。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>成功触发之后，处于AVRECORDER_STARTED状态时调用，调用成功之后进入AVRECORDER_PAUSED状态。</p>          <p>之后可以通过调用<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_resume">OH_AVRecorder_Resume</a>恢复录制，重新进入AVRECORDER_STARTED状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_resume">OH_AVErrCode OH_AVRecorder_Resume(OH_AVRecorder *recorder)</a></td>         <td class="cellrowborder" width="50%">恢复录制。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_pause">OH_AVRecorder_Pause</a>成功触发之后，处于PAUSED状态时调用，调用成功之后重新进入AVRECORDER_STARTED状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_stop">OH_AVErrCode OH_AVRecorder_Stop(OH_AVRecorder *recorder)</a></td>         <td class="cellrowborder" width="50%">          <p>停止录制。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>成功触发之后调用，调用成功之后进入AVRECORDER_STOPPED状态。</p>          <p>纯音频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>接口才能重新录制。</p>          <p>纯视频录制、音视频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>和<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_getinputsurface">OH_AVRecorder_GetInputSurface</a>接口才能重新录制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_reset">OH_AVErrCode OH_AVRecorder_Reset(OH_AVRecorder *recorder)</a></td>         <td class="cellrowborder" width="50%">          <p>重置录制状态。必须在非AVRECORDER_RELEASED状态下调用，调用成功之后进入AVRECORDER_IDLE状态。</p>          <p>纯音频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>接口才能重新录制。</p>          <p>纯视频录制、音视频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>和<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_getinputsurface">OH_AVRecorder_GetInputSurface</a>接口才能重新录制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_release">OH_AVErrCode OH_AVRecorder_Release(OH_AVRecorder *recorder)</a></td>         <td class="cellrowborder" width="50%">          <p>释放录制资源。调用成功之后进入AVRECORDER_RELEASED状态。</p>          <p>调用此接口释放录制资源后，recorder内存将释放，应用层需要显式地将recorder指针置空，避免访问野指针。释放音视频录制资源之后，该OH_AVRecorder实例不能再进行任何操作。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_getavailableencoder">OH_AVErrCode OH_AVRecorder_GetAvailableEncoder(OH_AVRecorder *recorder, OH_AVRecorder_EncoderInfo **info, int32_t *length)</a></td>         <td class="cellrowborder" width="50%">          <p>获取AVRecorder可用的编码器和编码器信息。</p>          <p>参数*info必须为nullptr，由框架层统一分配和释放内存，以避免内存管理混乱，防止内存泄漏或重复释放等问题。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_setstatecallback">OH_AVErrCode OH_AVRecorder_SetStateCallback(OH_AVRecorder *recorder, OH_AVRecorder_OnStateChange callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">设置状态回调函数，以便应用能够响应AVRecorder生成的状态变化事件。此接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>调用之前调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_seterrorcallback">OH_AVErrCode OH_AVRecorder_SetErrorCallback(OH_AVRecorder *recorder, OH_AVRecorder_OnError callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">设置错误回调函数，以便应用能够响应AVRecorder生成的错误事件。此接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>调用之前调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_seturicallback">OH_AVErrCode OH_AVRecorder_SetUriCallback(OH_AVRecorder *recorder, OH_AVRecorder_OnUri callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">设置URI回调函数，以便应用能够响应AVRecorder生成的URI事件。此接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>调用之前调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_setwillmutewheninterrupted">OH_AVErrCode OH_AVRecorder_SetWillMuteWhenInterrupted(OH_AVRecorder *recorder, bool muteWhenInterrupted)</a></td>         <td class="cellrowborder" width="50%">设置是否开启静音打断模式。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="oh_avrecorder_create" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_AVRecorder_Create()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_create" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVRecorder *<span class="hljs-built_in">OH_AVRecorder_Create</span>(void)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>创建AVRecorder实例。调用成功之后进入AVRECORDER_IDLE状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a></td>         <td class="cellrowborder" width="50%">成功时返回指向OH_AVRecorder实例的指针，失败时返回nullptr。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_prepare" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_Prepare()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_prepare" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_Prepare</span>(OH_AVRecorder *recorder, OH_AVRecorder_Config *config)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>配置AVRecorder参数，准备录制。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_create">OH_AVRecorder_Create</a>成功触发之后调用，调用成功之后进入AVRECORDER_PREPARED状态。</p>     <p>若只录制音频，则无需配置视频相关参数；同理，若只录制视频，则无需配置音频相关参数。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder-config">OH_AVRecorder_Config</a> *config</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder_Config实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或者准备失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_getavrecorderconfig" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_GetAVRecorderConfig()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_getavrecorderconfig" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_GetAVRecorderConfig</span>(OH_AVRecorder *recorder, OH_AVRecorder_Config **config)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取当前的录制参数。此接口必须在录制准备完成后调用。</p>     <p>传入的*config必须为nullptr，由框架层统一分配和释放内存，以避免内存管理混乱，防止内存泄漏或重复释放等问题。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder-config">OH_AVRecorder_Config</a> **config</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder_Config实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或*config不为nullptr。</p>          <p>AV_ERR_NO_MEMORY：内存不足，*config内存分配失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_getinputsurface" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_GetInputSurface()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_getinputsurface" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_GetInputSurface</span>(OH_AVRecorder *recorder, OHNativeWindow **window)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取输入Surface。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>成功触发之后，<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>之前调用。</p>     <p>此Surface提供给调用者，调用者从此Surface中获取Surface Buffer，填入相应的视频数据。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> **window</td>         <td class="cellrowborder" width="50%">指向OHNativeWindow实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_updaterotation" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_UpdateRotation()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_updaterotation" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_UpdateRotation</span>(OH_AVRecorder *recorder, int32_t rotation)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>更新视频旋转角度。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>成功触发之后，<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t rotation</td>         <td class="cellrowborder" width="50%">视频旋转角度，必须是整数 [0, 90, 180, 270] 中的一个。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或输入的rotation不符合要求或更新方向失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_start" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_Start()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_start" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_Start</span>(OH_AVRecorder *recorder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>开始录制。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>成功触发之后调用，调用成功之后进入AVRECORDER_STARTED状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或启动失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_pause" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_Pause()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_pause" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_Pause</span>(OH_AVRecorder *recorder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>暂停录制。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>成功触发之后，处于AVRECORDER_STARTED状态时调用，调用成功之后进入AVRECORDER_PAUSED状态。</p>     <p>之后可以通过调用<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_resume">OH_AVRecorder_Resume</a>恢复录制，重新进入AVRECORDER_STARTED状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或暂停失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_resume" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_Resume()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_resume" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_Resume</span>(OH_AVRecorder *recorder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>恢复录制。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_pause">OH_AVRecorder_Pause</a>成功触发之后，处于PAUSED状态时调用，调用成功之后重新进入AVRECORDER_STARTED状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或恢复失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_stop" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_Stop()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_stop" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_Stop</span>(OH_AVRecorder *recorder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>停止录制。必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>成功触发之后调用，调用成功之后进入AVRECORDER_STOPPED状态。</p>     <p>纯音频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>接口才能重新录制。</p>     <p>纯视频录制、音视频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>和<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_getinputsurface">OH_AVRecorder_GetInputSurface</a>接口才能重新录制。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或停止失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_reset" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_Reset()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_reset" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_Reset</span>(OH_AVRecorder *recorder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>重置录制状态。必须在非AVRECORDER_RELEASED状态下调用，调用成功之后进入AVRECORDER_IDLE状态。</p>     <p>纯音频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>接口才能重新录制。</p>     <p>纯视频录制、音视频录制时，需要重新调用<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_prepare">OH_AVRecorder_Prepare</a>和<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_getinputsurface">OH_AVRecorder_GetInputSurface</a>接口才能重新录制。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或重置失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_release" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_Release()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_release" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_Release</span>(OH_AVRecorder *recorder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>释放录制资源。调用成功之后进入AVRECORDER_RELEASED状态。</p>     <p>调用此接口释放录制资源后，recorder内存将释放，应用层需要显式地将recorder指针置空，避免访问野指针。释放音视频录制资源之后，该OH_AVRecorder实例不能再进行任何操作。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或释放失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_getavailableencoder" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_GetAvailableEncoder()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_getavailableencoder" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_GetAvailableEncoder</span>(OH_AVRecorder *recorder, OH_AVRecorder_EncoderInfo **info,int32_t *length)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取AVRecorder可用的编码器和编码器信息。</p>     <p>参数*info必须为nullptr，由框架层统一分配和释放内存，以避免内存管理混乱，防止内存泄漏或重复释放等问题。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder-encoderinfo">OH_AVRecorder_EncoderInfo</a> **info</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder_EncoderInfo实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t *length</td>         <td class="cellrowborder" width="50%">可用编码器的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的 recorder 为nullptr。</p>          <p>AV_ERR_NO_MEMORY：内存不足，*info内存分配失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_setstatecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_SetStateCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_setstatecallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVRecorder_SetStateCallback</span><span class="hljs-params">(OH_AVRecorder *recorder, OH_AVRecorder_OnStateChange callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置状态回调函数，以便应用能够响应AVRecorder生成的状态变化事件。此接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>调用之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-base-h#oh_avrecorder_onstatechange">OH_AVRecorder_OnStateChange</a> callback</td>         <td class="cellrowborder" width="50%">状态回调函数。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">指向用户特定数据的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或回调函数为nullptr。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_seterrorcallback" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_SetErrorCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_seterrorcallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVRecorder_SetErrorCallback</span><span class="hljs-params">(OH_AVRecorder *recorder, OH_AVRecorder_OnError callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置错误回调函数，以便应用能够响应AVRecorder生成的错误事件。此接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>调用之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-base-h#oh_avrecorder_onerror">OH_AVRecorder_OnError</a> callback</td>         <td class="cellrowborder" width="50%">错误回调函数。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">指向用户特定数据的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或回调函数为nullptr。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_seturicallback" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_SetUriCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_seturicallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVRecorder_SetUriCallback</span><span class="hljs-params">(OH_AVRecorder *recorder, OH_AVRecorder_OnUri callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置URI回调函数，以便应用能够响应AVRecorder生成的URI事件。此接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avrecorder-h#oh_avrecorder_start">OH_AVRecorder_Start</a>调用之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 18</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-base-h#oh_avrecorder_onuri">OH_AVRecorder_OnUri</a> callback</td>         <td class="cellrowborder" width="50%">URI回调函数。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">指向用户特定数据的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或回调函数为nullptr。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avrecorder_setwillmutewheninterrupted" device-type="phone,2in1,tablet,wearable,tv">OH_AVRecorder_SetWillMuteWhenInterrupted()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avrecorder_setwillmutewheninterrupted" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kpq-c106="" class="highlight-div"><div _ngcontent-kpq-c106="" class="highlight-div-header"><div _ngcontent-kpq-c106="" class="highlight-div-header-left"><div _ngcontent-kpq-c106="" class="handle-button expand-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kpq-c106="" class="highlight-div-header-right"><div _ngcontent-kpq-c106="" class="handle-button ai-button"></div><div _ngcontent-kpq-c106="" class="handle-button line-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kpq-c106="" class="handle-button theme-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kpq-c106="" class="handle-button copy-button"><div _ngcontent-kpq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kpq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVRecorder_SetWillMuteWhenInterrupted</span>(OH_AVRecorder *recorder, bool muteWhenInterrupted)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置是否开启静音打断模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVRecorder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avrecorder-oh-avrecorder">OH_AVRecorder</a> *recorder</td>         <td class="cellrowborder" width="50%">指向OH_AVRecorder实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bool muteWhenInterrupted</td>         <td class="cellrowborder" width="50%">设置成true表示当应用需要录制时保持静音而不是被打断。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的recorder为nullptr或回调函数为nullptr。</p>          <p>AV_ERR_INVALID_STATE：函数在无效状态下调用，应先处于准备状态。</p></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>