<h1 _ngcontent-haq-c119="" class="doc-title ng-star-inserted" title="avtranscoder.h"> avtranscoder.h </h1>

<div _ngcontent-haq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="概述" device-type="phone,2in1,tablet,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>定义AVTranscoder接口。使用AVTranscoder提供的Native API将源视频文件转码为新视频文件。</p>     <p><strong>引用文件：</strong> &lt;multimedia/player_framework/avtranscoder.h&gt;</p>     <p><strong>库：</strong> libavtranscoder.so</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder">AVTranscoder</a></p>     <p><strong>相关示例：</strong> <a href="https://gitcode.com/openharmony/applications_app_samples/tree/master/code/DocsSample/Media/AVPlayer/AVPlayerNDK" target="_blank">AVPlayerNDKVideo</a></p>    </div>    <div class="tiledSection">     <h2 id="汇总" device-type="phone,2in1,tablet,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div>    <div class="tiledSection">     <h3 id="函数" device-type="phone,2in1,tablet,tv" class="firsth2">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoder_Config *OH_AVTranscoderConfig_Create()</a></td>         <td class="cellrowborder" width="50%">创建转码配置参数实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_release">OH_AVErrCode OH_AVTranscoderConfig_Release(OH_AVTranscoder_Config* config)</a></td>         <td class="cellrowborder" width="50%">          <p>释放转码配置参数资源。</p>          <p>调用成功后，config实例会被释放并置为nullptr。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_setsrcfd">OH_AVErrCode OH_AVTranscoderConfig_SetSrcFD(OH_AVTranscoder_Config *config, int32_t srcFd, int64_t srcOffset, int64_t length)</a></td>         <td class="cellrowborder" width="50%">          <p>设置转码源视频的文件描述符。</p>          <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_setdstfd">OH_AVErrCode OH_AVTranscoderConfig_SetDstFD(OH_AVTranscoder_Config *config, int32_t dstFd)</a></td>         <td class="cellrowborder" width="50%">          <p>设置转码输出视频的文件描述符。</p>          <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_setdstvideotype">OH_AVErrCode OH_AVTranscoderConfig_SetDstVideoType(OH_AVTranscoder_Config *config, const char *mimeType)</a></td>         <td class="cellrowborder" width="50%">          <p>设置用于转码的输出视频的编码格式。</p>          <p>当前仅支持AVC和HEVC。若源视频编码格式为HEVC，则默认设置为HEVC，否则默认设置为AVC。</p>          <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_setdstaudiotype">OH_AVErrCode OH_AVTranscoderConfig_SetDstAudioType(OH_AVTranscoder_Config *config, const char *mimeType)</a></td>         <td class="cellrowborder" width="50%">          <p>设置用于转码的输出音频的编码格式。</p>          <p>当前仅支持AAC。若开发者不设置，则默认设置为AAC。</p>          <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_setdstfiletype">OH_AVErrCode OH_AVTranscoderConfig_SetDstFileType(OH_AVTranscoder_Config *config, OH_AVOutputFormat mimeType)</a></td>         <td class="cellrowborder" width="50%">          <p>设置用于转码的输出视频文件的封装格式。</p>          <p>当前封装格式仅支持MP4。</p>          <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_setdstaudiobitrate">OH_AVErrCode OH_AVTranscoderConfig_SetDstAudioBitrate(OH_AVTranscoder_Config *config, int32_t bitrate)</a></td>         <td class="cellrowborder" width="50%">          <p>设置用于转码的输出音频的码率。</p>          <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_setdstvideobitrate">OH_AVErrCode OH_AVTranscoderConfig_SetDstVideoBitrate(OH_AVTranscoder_Config *config, int32_t bitrate)</a></td>         <td class="cellrowborder" width="50%">          <p>设置用于转码的输出视频的码率。</p>          <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_setdstvideoresolution">OH_AVErrCode OH_AVTranscoderConfig_SetDstVideoResolution(OH_AVTranscoder_Config *config, int32_t width, int32_t height)</a></td>         <td class="cellrowborder" width="50%">          <p>设置用于转码的输出视频的分辨率，单位为像素（px），其中width为输出视频帧的宽，height为输出视频帧的高。</p>          <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_enablebframe">OH_AVErrCode OH_AVTranscoderConfig_EnableBFrame(OH_AVTranscoder_Config *config, bool enabled)</a></td>         <td class="cellrowborder" width="50%">          <p>转码设置输出视频B帧编码。</p>          <p>B帧视频编码相关的约束和限制可以参考文档<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-encoding-b-frame#约束和限制" target="_blank">B帧视频编码约束和限制</a>。</p>          <p>如果当前不符合B帧视频编码的约束和限制，将忽略B帧，按不使能B帧进行编码。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_create">OH_AVTranscoder *OH_AVTranscoder_Create(void)</a></td>         <td class="cellrowborder" width="50%">创建转码实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVErrCode OH_AVTranscoder_Prepare(OH_AVTranscoder *transcoder, OH_AVTranscoder_Config *config)</a></td>         <td class="cellrowborder" width="50%">          <p>进行视频转码的参数设置，准备转码。</p>          <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_start">OH_AVTranscoder_Start</a>之前调用，调用成功之后进入AVTRANSCODER_PREPARED状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_start">OH_AVErrCode OH_AVTranscoder_Start(OH_AVTranscoder *transcoder)</a></td>         <td class="cellrowborder" width="50%">          <p>开始转码。</p>          <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>成功调用之后调用，调用成功之后进入AVTRANSCODER_STARTED状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_pause">OH_AVErrCode OH_AVTranscoder_Pause(OH_AVTranscoder *transcoder)</a></td>         <td class="cellrowborder" width="50%">          <p>暂停转码。</p>          <p>此函数必须在转码实例处于AVTRANSCODER_STARTED状态时调用，调用成功之后进入AVTRANSCODER_PAUSED状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_resume">OH_AVErrCode OH_AVTranscoder_Resume(OH_AVTranscoder *transcoder)</a></td>         <td class="cellrowborder" width="50%">          <p>恢复转码。</p>          <p>此函数必须在转码实例处于AVTRANSCODER_PAUSED状态时调用，调用成功之后重新进入AVTRANSCODER_STARTED状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_cancel">OH_AVErrCode OH_AVTranscoder_Cancel(OH_AVTranscoder *transcoder)</a></td>         <td class="cellrowborder" width="50%">          <p>取消转码。</p>          <p>此函数须在转码实例处于AVTRANSCODER_STARTED和AVTRANSCODER_PAUSED状态时调用，调用成功之后进入AVTRANSCODER_CANCELLED状态。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_release">OH_AVErrCode OH_AVTranscoder_Release(OH_AVTranscoder *transcoder)</a></td>         <td class="cellrowborder" width="50%">释放转码实例资源。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_setstatecallback">OH_AVErrCode OH_AVTranscoder_SetStateCallback(OH_AVTranscoder *transcoder, OH_AVTranscoder_OnStateChange callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">          <p>注册触发转码状态修改事件的回调方法。</p>          <p>当触发状态修改事件时，通过注册的回调方法通知开发者。</p>          <p>开发者只能注册一个状态修改事件的回调方法，当开发者重复注册时，以最后一次注册的回调接口为准。</p>          <p>若开发者需监听转码状态修改，须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前注册转码状态回调。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_seterrorcallback">OH_AVErrCode OH_AVTranscoder_SetErrorCallback(OH_AVTranscoder *transcoder, OH_AVTranscoder_OnError callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">          <p>注册触发转码错误事件的回调方法。</p>          <p>当触发错误事件时，通过注册的回调方法通知开发者。</p>          <p>如果AVTranscoder上报error事件，开发者需要通过<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_release">OH_AVTranscoder_Release</a>操作退出转码操作。</p>          <p>开发者只能注册一个错误事件的回调方法，当开发者重复注册时，以最后一次注册的回调接口为准。</p>          <p>若开发者需监听转码错误事件，须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前注册转码错误事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_setprogressupdatecallback">OH_AVErrCode OH_AVTranscoder_SetProgressUpdateCallback(OH_AVTranscoder *transcoder, OH_AVTranscoder_OnProgressUpdate callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">          <p>注册触发转码进度更新事件的回调方法。</p>          <p>当触发转码进度更新事件时，通过注册的回调方法通知开发者。</p>          <p>开发者只能注册一个错误事件的回调方法，当开发者重复注册时，以最后一次注册的回调接口为准。</p>          <p>若开发者需监听转码处理进度，则须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前注册该事件。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="函数说明" device-type="phone,2in1,tablet,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_create" device-type="phone,2in1,tablet,tv" class="firsth2">OH_AVTranscoderConfig_Create()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_create" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVTranscoder_Config *<span class="hljs-built_in">OH_AVTranscoderConfig_Create</span>()</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>创建转码配置参数实例。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *</td>         <td class="cellrowborder" width="50%">如果创建成功返回指向OH_AVTranscoder_Config实例的指针，否则返回空指针。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_release" device-type="phone,2in1,tablet,tv">OH_AVTranscoderConfig_Release()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_release" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoderConfig_Release</span>(OH_AVTranscoder_Config* config)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>释放转码配置参数资源。</p>     <p>调用成功后，config实例会被释放并置为nullptr。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a>* config</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder_Config实例的指针。传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：释放成功。</p>          <p>AV_ERR_INVALID_VAL：config是空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_setsrcfd" device-type="phone,2in1,tablet,tv">OH_AVTranscoderConfig_SetSrcFD()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_setsrcfd" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVErrCode <span class="hljs-title">OH_AVTranscoderConfig_SetSrcFD</span><span class="hljs-params">(OH_AVTranscoder_Config *config, <span class="hljs-type">int32_t</span> srcFd, <span class="hljs-type">int64_t</span> srcOffset, <span class="hljs-type">int64_t</span> length)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置转码源视频的文件描述符。</p>     <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *config</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder_Config实例的指针。传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t srcFd</td>         <td class="cellrowborder" width="50%">源视频的文件描述符。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int64_t srcOffset</td>         <td class="cellrowborder" width="50%">源视频在文件描述符中的偏移量，单位：字节/Byte。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int64_t length</td>         <td class="cellrowborder" width="50%">源视频的长度，单位：字节/Byte。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：设置成功。</p>          <p>AV_ERR_INVALID_VAL：输入config为空指针，或者源视频文件相关参数错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_setdstfd" device-type="phone,2in1,tablet,tv">OH_AVTranscoderConfig_SetDstFD()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_setdstfd" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoderConfig_SetDstFD</span>(OH_AVTranscoder_Config *config, int32_t dstFd)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置转码输出视频的文件描述符。</p>     <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *config</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder_Config实例的指针。传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t dstFd</td>         <td class="cellrowborder" width="50%">输出视频的文件描述符。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：设置成功。</p>          <p>AV_ERR_INVALID_VAL：输入config为空指针，或者输出视频文件描述符是无效的。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_setdstvideotype" device-type="phone,2in1,tablet,tv">OH_AVTranscoderConfig_SetDstVideoType()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_setdstvideotype" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVErrCode <span class="hljs-title">OH_AVTranscoderConfig_SetDstVideoType</span><span class="hljs-params">(OH_AVTranscoder_Config *config, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *mimeType)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置用于转码的输出视频的编码格式。</p>     <p>当前仅支持AVC和HEVC。若源视频编码格式为HEVC，则默认设置为HEVC，否则默认设置为AVC。</p>     <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *config</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder_Config实例的指针。传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">const char *mimeType</td>         <td class="cellrowborder" width="50%">输出视频的编码格式，详细请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：设置成功。</p>          <p>AV_ERR_INVALID_VAL：输入的config为空指针，或者mimeType是不被允许的。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_setdstaudiotype" device-type="phone,2in1,tablet,tv">OH_AVTranscoderConfig_SetDstAudioType()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_setdstaudiotype" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVErrCode <span class="hljs-title">OH_AVTranscoderConfig_SetDstAudioType</span><span class="hljs-params">(OH_AVTranscoder_Config *config, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *mimeType)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置用于转码的输出音频的编码格式。</p>     <p>当前仅支持AAC。若开发者不设置，则默认设置为AAC。</p>     <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *config</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder_Config实例的指针。传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">const char *mimeType</td>         <td class="cellrowborder" width="50%">输出音频的编码格式，详细请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：设置成功。</p>          <p>AV_ERR_INVALID_VAL：输入的config为空指针，或者mimeType是不被允许的。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_setdstfiletype" device-type="phone,2in1,tablet,tv">OH_AVTranscoderConfig_SetDstFileType()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_setdstfiletype" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoderConfig_SetDstFileType</span>(OH_AVTranscoder_Config *config, OH_AVOutputFormat mimeType)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置用于转码的输出视频文件的封装格式。</p>     <p>当前封装格式仅支持MP4。</p>     <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *config</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder_Config实例的指针。传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_avoutputformat">OH_AVOutputFormat</a> mimeType</td>         <td class="cellrowborder" width="50%">输出视频的封装格式，详细请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：设置成功。</p>          <p>AV_ERR_INVALID_VAL：输入的config为空指针，或者mimeType是无效的。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_setdstaudiobitrate" device-type="phone,2in1,tablet,tv">OH_AVTranscoderConfig_SetDstAudioBitrate()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_setdstaudiobitrate" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoderConfig_SetDstAudioBitrate</span>(OH_AVTranscoder_Config *config, int32_t bitrate)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置用于转码的输出音频的码率。</p>     <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *config</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder_Config实例的指针。传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t bitrate</td>         <td class="cellrowborder" width="50%">输出音频的码率，单位为比特率（bps）。支持范围[1-500000]，默认设置为48Kbps。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：设置成功。</p>          <p>AV_ERR_INVALID_VAL：输入的config为空指针，或者bitrate值是无效的。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_setdstvideobitrate" device-type="phone,2in1,tablet,tv">OH_AVTranscoderConfig_SetDstVideoBitrate()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_setdstvideobitrate" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoderConfig_SetDstVideoBitrate</span>(OH_AVTranscoder_Config *config, int32_t bitrate)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置用于转码的输出视频的码率。</p>     <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *config</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder_Config实例的指针。传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t bitrate</td>         <td class="cellrowborder" width="50%">          <p>输出视频的码率，单位为比特率（bps）。默认码率按输出视频的分辨率设置。</p>          <p>[240P,480P]默认码率值为1Mbps。</p>          <p>(480P,720P]默认码率值为2Mbps。</p>          <p>(240P,1080P]默认码率值为4Mbps。</p>          <p>1080P及以上默认码率值为8Mbps。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：设置成功。</p>          <p>AV_ERR_INVALID_VAL：输入的config为空指针，或者bitrate值是无效的。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_setdstvideoresolution" device-type="phone,2in1,tablet,tv">OH_AVTranscoderConfig_SetDstVideoResolution()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_setdstvideoresolution" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVErrCode <span class="hljs-title">OH_AVTranscoderConfig_SetDstVideoResolution</span><span class="hljs-params">(OH_AVTranscoder_Config *config, <span class="hljs-type">int32_t</span> width, <span class="hljs-type">int32_t</span> height)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置用于转码的输出视频的分辨率，单位为像素（px），其中width为输出视频帧的宽，height为输出视频帧的高。</p>     <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *config</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder_Config实例的指针。传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t width</td>         <td class="cellrowborder" width="50%">输出视频帧的宽，支持范围[240-3840]，默认设置为源视频帧的宽。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t height</td>         <td class="cellrowborder" width="50%">输出视频帧的高，支持范围[240-2160]，默认设置为源视频帧的高。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：设置成功。</p>          <p>AV_ERR_INVALID_VAL：输入的config为空指针，或者width、height值是无效的。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoderconfig_enablebframe" device-type="phone,2in1,tablet,tv">OH_AVTranscoderConfig_EnableBFrame()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoderconfig_enablebframe" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoderConfig_EnableBFrame</span>(OH_AVTranscoder_Config *config, bool enabled)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>转码设置输出视频B帧编码。</p>     <p>B帧视频编码相关的约束和限制可以参考文档<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-encoding-b-frame#约束和限制" target="_blank">B帧视频编码约束和限制</a>。</p>     <p>如果当前不符合B帧视频编码的约束和限制，将忽略B帧，按不使能B帧进行编码。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *config</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder_Config实例的指针。传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bool enabled</td>         <td class="cellrowborder" width="50%">是否使能B帧编码。true表示开启B帧编码，默认为不开启B帧编码。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：设置成功。</p>          <p>AV_ERR_INVALID_VAL：输入的config为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoder_create" device-type="phone,2in1,tablet,tv">OH_AVTranscoder_Create()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoder_create" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVTranscoder *<span class="hljs-built_in">OH_AVTranscoder_Create</span>(void)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>创建转码实例。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder">OH_AVTranscoder</a> *</td>         <td class="cellrowborder" width="50%">如果创建成功返回指向OH_AVTranscoder实例的指针，否则返回空指针。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoder_prepare" device-type="phone,2in1,tablet,tv">OH_AVTranscoder_Prepare()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoder_prepare" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoder_Prepare</span>(OH_AVTranscoder *transcoder, OH_AVTranscoder_Config *config)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>进行视频转码的参数设置，准备转码。</p>     <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_start">OH_AVTranscoder_Start</a>之前调用，调用成功之后进入AVTRANSCODER_PREPARED状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder">OH_AVTranscoder</a> *transcoder</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder实例的指针。传入的transcoder指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_create">OH_AVTranscoder_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder-config">OH_AVTranscoder_Config</a> *config</td>         <td class="cellrowborder" width="50%">          <p>指向OH_AVTranscoder_Config实例的指针。</p>          <p>传入的config指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoderconfig_create">OH_AVTranscoderConfig_Create</a>创建的实例。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：成功设置视频转码的参数设置，进入AVTRANSCODER_PREPARED状态。</p>          <p>AV_ERR_INVALID_VAL：输入的transcoder是空指针，或者转码准备操作失败。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：当前状态不允许执行Prepare操作，或者是不支持的格式。</p>          <p>AV_ERR_IO：IO访问相关的错误。</p>          <p>AV_ERR_SERVICE_DIED：媒体服务已停止。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoder_start" device-type="phone,2in1,tablet,tv">OH_AVTranscoder_Start()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoder_start" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoder_Start</span>(OH_AVTranscoder *transcoder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>开始转码。</p>     <p>此函数必须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>成功调用之后调用，调用成功之后进入AVTRANSCODER_STARTED状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder">OH_AVTranscoder</a> *transcoder</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder实例的指针。传入的transcoder指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_create">OH_AVTranscoder_Create</a>创建的实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：成功开始转码，进入AVTRANSCODER_STARTED状态。</p>          <p>AV_ERR_INVALID_VAL：输入的transcoder是空指针，或者转码开始操作失败。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：当前状态不允许执行Start操作。</p>          <p>AV_ERR_IO：IO访问相关的错误。</p>          <p>AV_ERR_SERVICE_DIED：媒体服务已停止。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoder_pause" device-type="phone,2in1,tablet,tv">OH_AVTranscoder_Pause()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoder_pause" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoder_Pause</span>(OH_AVTranscoder *transcoder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>暂停转码。</p>     <p>此函数必须在转码实例处于AVTRANSCODER_STARTED状态时调用，调用成功之后进入AVTRANSCODER_PAUSED状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder">OH_AVTranscoder</a> *transcoder</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder实例的指针。传入的transcoder指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_create">OH_AVTranscoder_Create</a>创建的实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：成功暂停转码，进入AVTRANSCODER_PAUSED状态。</p>          <p>AV_ERR_INVALID_VAL：输入的transcoder是空指针，或者转码暂停操作失败。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：当前状态不允许执行Pause操作。</p>          <p>AV_ERR_IO：IO访问相关的错误。</p>          <p>AV_ERR_SERVICE_DIED：媒体服务已停止。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoder_resume" device-type="phone,2in1,tablet,tv">OH_AVTranscoder_Resume()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoder_resume" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoder_Resume</span>(OH_AVTranscoder *transcoder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>恢复转码。</p>     <p>此函数必须在转码实例处于AVTRANSCODER_PAUSED状态时调用，调用成功之后重新进入AVTRANSCODER_STARTED状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder">OH_AVTranscoder</a> *transcoder</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder实例的指针。传入的transcoder指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_create">OH_AVTranscoder_Create</a>创建的实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：成功恢复转码，进入AVTRANSCODER_STARTED状态。</p>          <p>AV_ERR_INVALID_VAL：输入的transcoder是空指针，或者转码恢复操作失败。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：当前状态不允许执行Resume操作。</p>          <p>AV_ERR_IO：IO访问相关的错误。</p>          <p>AV_ERR_SERVICE_DIED：媒体服务已停止。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoder_cancel" device-type="phone,2in1,tablet,tv">OH_AVTranscoder_Cancel()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoder_cancel" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoder_Cancel</span>(OH_AVTranscoder *transcoder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>取消转码。</p>     <p>此函数须在转码实例处于AVTRANSCODER_STARTED和AVTRANSCODER_PAUSED状态时调用，调用成功之后进入AVTRANSCODER_CANCELLED状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder">OH_AVTranscoder</a> *transcoder</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder实例的指针。传入的transcoder指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_create">OH_AVTranscoder_Create</a>创建的实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：成功取消转码，进入AVTRANSCODER_CANCELLED状态。</p>          <p>AV_ERR_INVALID_VAL：输入的transcoder是空指针，或者转码取消操作失败。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：当前状态不允许执行Cancel操作。</p>          <p>AV_ERR_IO：IO访问相关的错误。</p>          <p>AV_ERR_SERVICE_DIED：媒体服务已停止。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoder_release" device-type="phone,2in1,tablet,tv">OH_AVTranscoder_Release()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoder_release" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVTranscoder_Release</span>(OH_AVTranscoder *transcoder)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>释放转码实例资源。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder">OH_AVTranscoder</a> *transcoder</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder实例的指针。传入的transcoder指针必须为OH_AVTranscoder_Create创建的实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：成功释放转码实例资源。</p>          <p>AV_ERR_INVALID_VAL：输入的transcoder是空指针，或者转码释放资源操作失败。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：当前状态不允许执行Release操作。</p>          <p>AV_ERR_IO：IO访问相关的错误。</p>          <p>AV_ERR_SERVICE_DIED：媒体服务已停止。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoder_setstatecallback" device-type="phone,2in1,tablet,tv">OH_AVTranscoder_SetStateCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoder_setstatecallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVTranscoder_SetStateCallback</span><span class="hljs-params">(OH_AVTranscoder *transcoder, OH_AVTranscoder_OnStateChange callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>注册触发转码状态修改事件的回调方法。</p>     <p>当触发状态修改事件时，通过注册的回调方法通知开发者。</p>     <p>开发者只能注册一个状态修改事件的回调方法，当开发者重复注册时，以最后一次注册的回调接口为准。</p>     <p>若开发者需监听转码状态修改，须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前注册转码状态回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder">OH_AVTranscoder</a> *transcoder</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder实例的指针。传入的transcoder指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_create">OH_AVTranscoder_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-base-h#oh_avtranscoder_onstatechange">OH_AVTranscoder_OnStateChange</a> callback</td>         <td class="cellrowborder" width="50%">转码状态回调方法，详细说明请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-base-h#oh_avtranscoder_onstatechange">OH_AVTranscoder_OnStateChange</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">用户特定数据的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：注册成功。</p>          <p>AV_ERR_INVALID_VAL：输入的transcoder是空指针，或者callback是空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoder_seterrorcallback" device-type="phone,2in1,tablet,tv">OH_AVTranscoder_SetErrorCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoder_seterrorcallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVTranscoder_SetErrorCallback</span><span class="hljs-params">(OH_AVTranscoder *transcoder, OH_AVTranscoder_OnError callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>注册触发转码错误事件的回调方法。</p>     <p>当触发错误事件时，通过注册的回调方法通知开发者。</p>     <p>如果AVTranscoder上报error事件，开发者需要通过<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_release">OH_AVTranscoder_Release</a>操作退出转码操作。</p>     <p>开发者只能注册一个错误事件的回调方法，当开发者重复注册时，以最后一次注册的回调接口为准。</p>     <p>若开发者需监听转码错误事件，须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前注册转码错误事件。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.12.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.12.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder">OH_AVTranscoder</a> *transcoder</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder实例的指针。传入的transcoder指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_create">OH_AVTranscoder_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-base-h#oh_avtranscoder_onerror">OH_AVTranscoder_OnError</a> callback</td>         <td class="cellrowborder" width="50%">转码错误回调方法，详细说明请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-base-h#oh_avtranscoder_onerror">OH_AVTranscoder_OnError</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">用户特定数据的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.14.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.14.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：注册成功。</p>          <p>AV_ERR_INVALID_VAL：输入的transcoder是空指针，或者callback是空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_avtranscoder_setprogressupdatecallback" device-type="phone,2in1,tablet,tv">OH_AVTranscoder_SetProgressUpdateCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avtranscoder_setprogressupdatecallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-haq-c106="" class="highlight-div"><div _ngcontent-haq-c106="" class="highlight-div-header"><div _ngcontent-haq-c106="" class="highlight-div-header-left"><div _ngcontent-haq-c106="" class="handle-button expand-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-haq-c106="" class="highlight-div-header-right"><div _ngcontent-haq-c106="" class="handle-button ai-button"></div><div _ngcontent-haq-c106="" class="handle-button line-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-haq-c106="" class="handle-button theme-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-haq-c106="" class="handle-button copy-button"><div _ngcontent-haq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-haq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_AVTranscoder_SetProgressUpdateCallback</span><span class="hljs-params">(OH_AVTranscoder *transcoder, OH_AVTranscoder_OnProgressUpdate callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>注册触发转码进度更新事件的回调方法。</p>     <p>当触发转码进度更新事件时，通过注册的回调方法通知开发者。</p>     <p>开发者只能注册一个错误事件的回调方法，当开发者重复注册时，以最后一次注册的回调接口为准。</p>     <p>若开发者需监听转码处理进度，则须在<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_prepare">OH_AVTranscoder_Prepare</a>之前注册该事件。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVTranscoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-oh-avtranscoder">OH_AVTranscoder</a> *transcoder</td>         <td class="cellrowborder" width="50%">指向OH_AVTranscoder实例的指针。传入的transcoder指针必须为<a href="/consumer/cn/doc/harmonyos-references/capi-avtranscoder-h#oh_avtranscoder_create">OH_AVTranscoder_Create</a>创建的实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-base-h#oh_avtranscoder_onprogressupdate">OH_AVTranscoder_OnProgressUpdate</a> callback</td>         <td class="cellrowborder" width="50%">转码进度更新回调方法，详细说明请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avtranscoder-base-h#oh_avtranscoder_onprogressupdate">OH_AVTranscoder_OnProgressUpdate</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">用户特定数据的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.13.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.13.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：注册成功。</p>          <p>AV_ERR_INVALID_VAL：输入的transcoder是空指针，或者callback是空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>