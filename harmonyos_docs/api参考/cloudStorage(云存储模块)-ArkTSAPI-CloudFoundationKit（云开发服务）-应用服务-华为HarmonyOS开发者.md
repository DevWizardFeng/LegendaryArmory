<h1 _ngcontent-ldl-c119="" class="doc-title ng-star-inserted" title="cloudStorage (云存储模块)"> cloudStorage (云存储模块) </h1>

<div _ngcontent-ldl-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供使用云存储对文件进行上传、下载、查询和删除等操作的能力。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section7800336194812" device-type="phone,tablet,tv,wearable">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7800336194812" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1286815320203" device-type="phone,tablet,tv,wearable">bucket<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1286815320203" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>bucket(name?: string): StorageBucket</p> <p>初始化云存储实例。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.9.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.5.1.2" width="17.62%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.5.1.3" width="19.45%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.5.1.4" width="49.62%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>name</p> </td> <td class="cellrowborder" width="17.62%"><p>string</p> </td> <td class="cellrowborder" width="19.45%"><p>否</p> </td> <td class="cellrowborder" width="49.62%"><p>存储实例名称。格式受云侧约束，只允许输入小写字母、数字、'-'，以字母或数字开头和结尾，长度为9-63个字符，且不能连续输入两个及以上'-'。</p> <p>缺省时，将启动异步任务查询云侧默认实例。</p> <p>非缺省时，请确保当前云侧存在该存储实例，否则后续操作将出现查询存储实例错误。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.1" width="31.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.2" width="68.84%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="31.16%"><p><a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section10732104881420">StorageBucket</a></p> </td> <td class="cellrowborder" width="68.84%"><p>云存储实例。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.14.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.14.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket1</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>(); <span class="hljs-comment">// name缺省，将启动异步任务查询云侧默认实例</span></li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 指定云存储实例名称为'mybucket-duaf5'</span></li><li><span class="hljs-comment"> * 'mybucket'是创建云存储实例时用户输入的存储实例名称，'duaf5'是创建云存储实例时生成的随机字符串，通过符号'-'连接</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket2</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>(<span class="hljs-string">'mybucket-duaf5'</span>); </li></ol></pre></div></div> <p></p> </div> <div class="tiledSection"><h2 id="section10732104881420" device-type="phone,tablet,tv,wearable">StorageBucket<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10732104881420" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>云存储的实例，提供云存储的上传、下载等相关能力，通过<a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section1286815320203">bucket</a>初始化。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> </div> <div class="tiledSection"><h3 id="section2105131521913" device-type="phone,tablet,tv,wearable" class="firsth2">uploadFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2105131521913" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uploadFile(context: common.BaseContext, parameters: UploadParams): Promise&lt;request.agent.Task&gt;</p> <p>上传指定文件至云侧。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>context</p> </td> <td class="cellrowborder" width="25.7%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>parameters</p> </td> <td class="cellrowborder" width="25.7%"><p><a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section2941124514298">UploadParams</a></p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>上传相关参数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.1" width="39.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.2" width="60.88%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.12%"><p>Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttask10" target="_blank">request.agent.Task</a>&gt;</p> </td> <td class="cellrowborder" width="60.88%"><p>Promise对象，返回上传任务。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.15.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.15.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, request } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// ArkUI上下文</span></li><li>bucket.<span class="hljs-title function_">uploadFile</span>(context, {  <span class="hljs-comment">// context表示应用上下文</span></li><li>  <span class="hljs-attr">localPath</span>: cacheFile,       <span class="hljs-comment">// 本地文件路径（context.cacheDir目录下的文件路径）</span></li><li>  <span class="hljs-attr">cloudPath</span>: path             <span class="hljs-comment">// 云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名</span></li><li>}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on progress <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'completed'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on completed <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'failed'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on failed <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'response'</span>, <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on response <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  });</li><li>
</li><li>  <span class="hljs-comment">// start task</span></li><li>  task.<span class="hljs-title function_">start</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to start a file upload task, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in starting a file upload task.`</span>);</li><li>    }</li><li>  });</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to upload file, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section1248132432017" device-type="phone,tablet,tv,wearable">uploadFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1248132432017" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uploadFile(context: common.BaseContext, parameters: UploadParams, callback: AsyncCallback&lt;request.agent.Task&gt;): void</p> <p>上传指定文件至云侧。使用callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.2" width="29.42%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.3" width="11.06%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.4" width="46.21%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>context</p> </td> <td class="cellrowborder" width="29.42%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="11.06%"><p>是</p> </td> <td class="cellrowborder" width="46.21%"><p>应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>parameters</p> </td> <td class="cellrowborder" width="29.42%"><p><a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section2941124514298">UploadParams</a></p> </td> <td class="cellrowborder" width="11.06%"><p>是</p> </td> <td class="cellrowborder" width="46.21%"><p>上传相关参数。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>callback</p> </td> <td class="cellrowborder" width="29.42%"><p>AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttask10" target="_blank">request.agent.Task</a>&gt;</p> </td> <td class="cellrowborder" width="11.06%"><p>是</p> </td> <td class="cellrowborder" width="46.21%"><p>回调函数。当上传文件成功，err为undefined，data为获取到的request.agent.Task；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, request } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// ArkUI上下文</span></li><li>bucket.<span class="hljs-title function_">uploadFile</span>(context, {  <span class="hljs-comment">// context表示应用上下文</span></li><li>  <span class="hljs-attr">localPath</span>: cacheFile,       <span class="hljs-comment">// 本地文件路径（context.cacheDir目录下的文件路径）</span></li><li>  <span class="hljs-attr">cloudPath</span>: path             <span class="hljs-comment">// 云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名</span></li><li>}, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, task: request.agent.Task</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to upload file, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on progress <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'completed'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on completed <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'failed'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on failed <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'response'</span>, <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on response <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  });</li><li>
</li><li>  <span class="hljs-comment">// start task</span></li><li>  task.<span class="hljs-title function_">start</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to start a file upload task, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in starting a file upload task.`</span>);</li><li>    }</li><li>  });</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section02263293319" device-type="phone,tablet,tv,wearable">downloadFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section02263293319" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>downloadFile(context: common.BaseContext, parameters: DownloadParams): Promise&lt;request.agent.Task&gt;</p> <p>下载云侧文件至本地。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>context</p> </td> <td class="cellrowborder" width="25.7%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>parameters</p> </td> <td class="cellrowborder" width="25.7%"><p><a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section14137913019">DownloadParams</a></p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>下载相关参数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="39.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="60.88%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.12%"><p>Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttask10" target="_blank">request.agent.Task</a>&gt;</p> </td> <td class="cellrowborder" width="60.88%"><p>Promise对象，返回下载任务。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.15.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.15.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, request } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// ArkUI上下文</span></li><li>bucket.<span class="hljs-title function_">downloadFile</span>(context, {  <span class="hljs-comment">// context表示应用上下文</span></li><li>  <span class="hljs-attr">cloudPath</span>: path,              <span class="hljs-comment">// 云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名</span></li><li>  <span class="hljs-attr">localPath</span>: cacheFile,         <span class="hljs-comment">// 保存至本地文件路径（context.cacheDir目录下的文件路径）</span></li><li>}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on progress <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'completed'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on completed <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'failed'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on failed <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'response'</span>, <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on response <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  });</li><li>
</li><li>  <span class="hljs-comment">// start task</span></li><li>  task.<span class="hljs-title function_">start</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>        <span class="hljs-string">`Failed to start a file download task, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in starting a file download task.`</span>);</li><li>    }</li><li>  });</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to download file, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section5694159203220" device-type="phone,tablet,tv,wearable">downloadFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5694159203220" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>downloadFile(context: common.BaseContext, parameters: DownloadParams, callback: AsyncCallback&lt;request.agent.Task&gt;): void</p> <p>下载云侧文件至本地。使用callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.2" width="30.3%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.3" width="11.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.4" width="44.98%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>context</p> </td> <td class="cellrowborder" width="30.3%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="11.41%"><p>是</p> </td> <td class="cellrowborder" width="44.98%"><p>应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>parameters</p> </td> <td class="cellrowborder" width="30.3%"><p><a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section14137913019">DownloadParams</a></p> </td> <td class="cellrowborder" width="11.41%"><p>是</p> </td> <td class="cellrowborder" width="44.98%"><p>下载相关参数。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>callback</p> </td> <td class="cellrowborder" width="30.3%"><p>AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttask10" target="_blank">request.agent.Task</a>&gt;</p> </td> <td class="cellrowborder" width="11.41%"><p>是</p> </td> <td class="cellrowborder" width="44.98%"><p>回调函数。当下载文件成功，err为undefined，data为获取到的request.agent.Task；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, request } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// ArkUI上下文</span></li><li>bucket.<span class="hljs-title function_">downloadFile</span>(context, {  <span class="hljs-comment">// context表示应用上下文</span></li><li>  <span class="hljs-attr">cloudPath</span>: path,              <span class="hljs-comment">// 云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名</span></li><li>  <span class="hljs-attr">localPath</span>: cacheFile,         <span class="hljs-comment">// 保存至本地文件路径（context.cacheDir目录下的文件路径）</span></li><li>}, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, task: request.agent.Task</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to download file, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on progress <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'completed'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on completed <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'failed'</span>, <span class="hljs-function">(<span class="hljs-params">progress</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on failed <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(progress)}</span>`</span>);</li><li>  });</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'response'</span>, <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on response <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(response)}</span>`</span>);</li><li>  });</li><li>
</li><li>  <span class="hljs-comment">// start task</span></li><li>  task.<span class="hljs-title function_">start</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>        <span class="hljs-string">`Failed to start a file download task, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in starting a file download task.`</span>);</li><li>    }</li><li>  });</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section9969145143317" device-type="phone,tablet,tv,wearable">getDownloadURL<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9969145143317" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDownloadURL(cloudPath: string): Promise&lt;string&gt;</p> <p>获取云侧文件下载地址。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>cloudPath</p> </td> <td class="cellrowborder" width="25.7%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>云侧文件路径。支持传入“文件目录/文件名”（如“image/demo.jpg”），或仅传入文件名。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="39.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="60.88%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.12%"><p>Promise&lt;string&gt;</p> </td> <td class="cellrowborder" width="60.88%"><p>Promise对象，返回云侧文件下载地址。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.15.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.15.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// cloudPath是云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名</span></li><li>bucket.<span class="hljs-title function_">getDownloadURL</span>(<span class="hljs-string">'cloudPath'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">downloadURL: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting download URL: <span class="hljs-subst">${downloadURL}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to get download URL, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section543114343314" device-type="phone,tablet,tv,wearable">getDownloadURL<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section543114343314" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDownloadURL(cloudPath: string, callback: AsyncCallback&lt;string&gt;): void</p> <p>获取云侧文件下载地址。使用callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>cloudPath</p> </td> <td class="cellrowborder" width="25.7%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>云侧文件路径。支持传入“文件目录/文件名”（如“image/demo.jpg”），或仅传入文件名。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>callback</p> </td> <td class="cellrowborder" width="25.7%"><p>AsyncCallback&lt;string&gt;</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>回调函数，返回云侧文件下载地址。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// cloudPath是云侧文件路径</span></li><li>bucket.<span class="hljs-title function_">getDownloadURL</span>(<span class="hljs-string">'cloudPath'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, downloadURL: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to get download URL, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting download URL: <span class="hljs-subst">${downloadURL}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section1290422653419" device-type="phone,tablet,tv,wearable">deleteFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1290422653419" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteFile(cloudPath: string): Promise&lt;void&gt;</p> <p>删除云侧文件。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>cloudPath</p> </td> <td class="cellrowborder" width="25.7%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>云侧文件路径。支持传入“文件目录/文件名”（如“image/demo.jpg”），或仅传入文件名。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="39.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="60.88%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.12%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.88%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.15.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.15.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// cloudPath云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名。</span></li><li>bucket.<span class="hljs-title function_">deleteFile</span>(<span class="hljs-string">'cloudPath'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in deleting file.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to delete file, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section15933131323513" device-type="phone,tablet,tv,wearable">deleteFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15933131323513" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteFile(cloudPath: string, callback: AsyncCallback&lt;void&gt;): void</p> <p>删除云侧文件。使用callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>cloudPath</p> </td> <td class="cellrowborder" width="25.7%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>云侧文件路径。支持传入“文件目录/文件名”（如“image/demo.jpg”），或仅传入文件名。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>callback</p> </td> <td class="cellrowborder" width="25.7%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>回调函数。当删除云侧文件成功，err为undefined，否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.13.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.13.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// cloudPath是云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名。</span></li><li>bucket.<span class="hljs-title function_">deleteFile</span>(<span class="hljs-string">'cloudPath'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to delete file, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in deleting file.`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section420475053513" device-type="phone,tablet,tv,wearable">list<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section420475053513" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>list(cloudPath: string, options?: ListOptions): Promise&lt;ListResults&gt;</p> <p>获取云侧文件列表。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>cloudPath</p> </td> <td class="cellrowborder" width="25.7%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>云侧文件路径。</p> <p>传入''（空字符串）表示获取云侧根路径下的文件列表；传入'some_directory/'表示获取指定文件夹some_directory下的文件列表。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>options</p> </td> <td class="cellrowborder" width="25.7%"><p><a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section7984102813013">ListOptions</a></p> </td> <td class="cellrowborder" width="11.39%"><p>否</p> </td> <td class="cellrowborder" width="49.6%"><p>列举操作的相关参数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="39.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="60.88%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.12%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section181654510303">ListResults</a>&gt;</p> </td> <td class="cellrowborder" width="60.88%"><p>Promise对象，返回列举操作的结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.15.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.15.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// 获取云侧根路径下的文件列表</span></li><li>bucket.<span class="hljs-title function_">list</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: cloudStorage.ListResults</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in listing files, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to list files, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li><li>
</li><li><span class="hljs-comment">// 获取指定文件夹some_directory下的文件列表</span></li><li>bucket.<span class="hljs-title function_">list</span>(<span class="hljs-string">'some_directory/'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: cloudStorage.ListResults</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in listing files, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to list files, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section890291993618" device-type="phone,tablet,tv,wearable">list<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section890291993618" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>list(cloudPath: string, options: ListOptions, callback: AsyncCallback&lt;ListResults&gt;): void</p> <p>获取云侧文件列表。使用callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>cloudPath</p> </td> <td class="cellrowborder" width="25.7%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>云侧文件路径。</p> <p>传入''（空字符串）表示获取云侧根路径下的文件列表；传入'some_directory/'表示获取指定文件夹some_directory下的文件列表。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>options</p> </td> <td class="cellrowborder" width="25.7%"><p><a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section7984102813013">ListOptions</a></p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>列举操作的相关参数。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>callback</p> </td> <td class="cellrowborder" width="25.7%"><p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section181654510303">ListResults</a>&gt;</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>回调函数。当获取云侧文件列表成功，err为undefined，data为获取到的ListResults；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// 获取云侧根路径下的文件列表</span></li><li>bucket.<span class="hljs-title function_">list</span>(<span class="hljs-string">''</span>, { <span class="hljs-attr">maxResults</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">pageMarker</span>: <span class="hljs-string">'test'</span> }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, result: cloudStorage.ListResults</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to list files, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in listing files, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  }</li><li>});</li><li>
</li><li><span class="hljs-comment">// 获取指定文件夹some_directory下的文件列表</span></li><li>bucket.<span class="hljs-title function_">list</span>(<span class="hljs-string">'some_directory/'</span>, {}, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, result: cloudStorage.ListResults</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to list files, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in listing files, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section2031534817364" device-type="phone,tablet,tv,wearable">getMetadata<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2031534817364" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getMetadata(cloudPath: string): Promise&lt;Metadata&gt;</p> <p>获取云侧文件的元数据。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>cloudPath</p> </td> <td class="cellrowborder" width="25.7%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>云侧文件路径。支持传入“文件目录/文件名”（如“image/demo.jpg”），或仅传入文件名。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.1" width="39.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.2" width="60.88%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.12%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section3472335144212">Metadata</a>&gt;</p> </td> <td class="cellrowborder" width="60.88%"><p>Promise对象，返回云侧文件的元数据信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.15.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.15.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// cloudPath是云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名。</span></li><li>bucket.<span class="hljs-title function_">getMetadata</span>(<span class="hljs-string">'cloudPath'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: cloudStorage.Metadata</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting metadata: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to get metadata, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section14832315133710" device-type="phone,tablet,tv,wearable">getMetadata<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14832315133710" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getMetadata(cloudPath: string, callback: AsyncCallback&lt;Metadata&gt;): void</p> <p>获取云侧文件的元数据。使用callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>cloudPath</p> </td> <td class="cellrowborder" width="25.7%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>云侧文件路径。支持传入“文件目录/文件名”（如“image/demo.jpg”），或仅传入文件名。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>callback</p> </td> <td class="cellrowborder" width="25.7%"><p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section3472335144212">Metadata</a>&gt;</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>回调函数。当获取云侧文件的元数据成功，err为undefined，data为获取到的Metadata；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.13.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.13.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// cloudPath是云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名。</span></li><li>bucket.<span class="hljs-title function_">getMetadata</span>(<span class="hljs-string">'cloudPath'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: cloudStorage.Metadata</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to get metadata, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting metadata: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section1924314716387" device-type="phone,tablet,tv,wearable">setMetadata<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1924314716387" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setMetadata(cloudPath: string, metadata: MetadataUpdatable): Promise&lt;Metadata&gt;</p> <p>设置云侧文件的元数据。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>cloudPath</p> </td> <td class="cellrowborder" width="25.7%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>云侧文件路径。支持传入“文件目录/文件名”（如“image/demo.jpg”），或仅传入文件名。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>metadata</p> </td> <td class="cellrowborder" width="25.7%"><p><a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section1122119164218">MetadataUpdatable</a></p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>可更新参数的元数据信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.1" width="39.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.2" width="60.88%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.12%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section3472335144212">Metadata</a>&gt;</p> </td> <td class="cellrowborder" width="60.88%"><p>Promise对象，返回云侧文件更新后的完整元数据信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.15.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.15.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// cloudPath是云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名。</span></li><li>bucket.<span class="hljs-title function_">setMetadata</span>(<span class="hljs-string">'cloudPath'</span>, {</li><li>  <span class="hljs-attr">customMetadata</span>: {</li><li>    <span class="hljs-attr">key1</span>: <span class="hljs-string">"value1"</span>,</li><li>    <span class="hljs-attr">key2</span>: <span class="hljs-string">"value2"</span></li><li>  }</li><li>}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: cloudStorage.Metadata</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in setting metadata: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to set metadata, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section111194320389" device-type="phone,tablet,tv,wearable">setMetadata<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section111194320389" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setMetadata(cloudPath: string, metadata: MetadataUpdatable, callback: AsyncCallback&lt;Metadata&gt;): void</p> <p>设置云侧文件的元数据。使用callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>需要权限：</strong>ohos.permission.INTERNET</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.1" width="13.309999999999999%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.2" width="25.7%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.4" width="49.6%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.309999999999999%"><p>cloudPath</p> </td> <td class="cellrowborder" width="25.7%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>云侧文件路径。支持传入“文件目录/文件名”（如“image/demo.jpg”），或仅传入文件名。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>metadata</p> </td> <td class="cellrowborder" width="25.7%"><p><a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section1122119164218">MetadataUpdatable</a></p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>可更新参数的元数据信息。</p> </td> </tr> <tr><td class="cellrowborder" width="13.309999999999999%"><p>callback</p> </td> <td class="cellrowborder" width="25.7%"><p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section3472335144212">Metadata</a>&gt;</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="49.6%"><p>回调函数。当设置云侧文件的元数据成功，err为undefined，data为设置的Metadata；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/cloudfoundation-arkts-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.1" style="border: none;" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.2" style="border: none;" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="50%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>No Internet permission.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008220009</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Client internal error.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="50%"><p>1008221001</p> </td> <td class="cellrowborder" style="border: none;" width="50%"><p>Server error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong><strong>：</strong></p> <div _ngcontent-ldl-c106="" class="highlight-div"><div _ngcontent-ldl-c106="" class="highlight-div-header"><div _ngcontent-ldl-c106="" class="highlight-div-header-left"><div _ngcontent-ldl-c106="" class="handle-button expand-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ldl-c106="" class="highlight-div-header-right"><div _ngcontent-ldl-c106="" class="handle-button ai-button"></div><div _ngcontent-ldl-c106="" class="handle-button line-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ldl-c106="" class="handle-button theme-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ldl-c106="" class="handle-button copy-button"><div _ngcontent-ldl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ldl-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CloudFoundationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bucket</span>: cloudStorage.<span class="hljs-property">StorageBucket</span> = cloudStorage.<span class="hljs-title function_">bucket</span>();</li><li>
</li><li><span class="hljs-comment">// cloudPath是云侧文件路径，支持传入“文件目录/文件名”，或仅传入文件名。</span></li><li>bucket.<span class="hljs-title function_">setMetadata</span>(<span class="hljs-string">'cloudPath'</span>, {</li><li>  <span class="hljs-attr">customMetadata</span>: {</li><li>    <span class="hljs-attr">key1</span>: <span class="hljs-string">"value1"</span>,</li><li>    <span class="hljs-attr">key2</span>: <span class="hljs-string">"value2"</span></li><li>  }</li><li>}, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: cloudStorage.Metadata</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to set metadata, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in setting metadata: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section2941124514298" device-type="phone,tablet,tv,wearable">UploadParams<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2941124514298" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>上传相关参数。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力： </strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.6.1.1" width="23.119999999999997%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.6.1.2" width="19.02%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.6.1.4" width="12.61%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.6.1.5" width="37.730000000000004%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>localPath</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>否</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>本地文件路径，根路径为cache目录。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>cloudPath</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>否</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>云侧文件路径，上传成功后，可以使用该路径进行其他操作。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>metadata</p> </td> <td class="cellrowborder" width="19.02%"><p><a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section1122119164218">MetadataUpdatable</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>文件元数据信息。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>mode</p> </td> <td class="cellrowborder" width="19.02%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentmode10" target="_blank">request.agent.Mode</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>上传任务类型，前端任务在应用切换到后台一段时间后失败/暂停；后台任务不受影响。默认为request.agent.Mode.BACKGROUND。</p> <ul><li>request.agent.Mode.BACKGROUND：后台任务。</li><li>request.agent.Mode.FOREGROUND：前端任务。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>network</p> </td> <td class="cellrowborder" width="19.02%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentnetwork10" target="_blank">request.agent.Network</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>上传任务的网络配置，网络不满足设置条件时，未执行的任务等待执行，执行中的任务失败/暂停。默认为request.agent.Network.ANY。</p> <ul><li>request.agent.Network.ANY：不限网络类型。</li><li>request.agent.Network.WIFI：无线网络。</li><li>request.agent.Network.CELLULAR：蜂窝数据网络。</li></ul> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section14137913019" device-type="phone,tablet,tv,wearable">DownloadParams<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14137913019" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>下载相关参数。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力： </strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.7.1.6.1.1" width="23.122312231223123%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.6.1.2" width="19.001900190019004%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.6.1.3" width="7.520752075207521%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.6.1.4" width="12.62126212621262%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.6.1.5" width="37.733773377337734%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.122312231223123%"><p>localPath</p> </td> <td class="cellrowborder" width="19.001900190019004%"><p>string</p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>否</p> </td> <td class="cellrowborder" width="12.62126212621262%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>本地文件路径，根路径为cache目录。</p> </td> </tr> <tr><td class="cellrowborder" width="23.122312231223123%"><p>cloudPath</p> </td> <td class="cellrowborder" width="19.001900190019004%"><p>string</p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>否</p> </td> <td class="cellrowborder" width="12.62126212621262%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>云侧文件路径。支持传入“文件目录/文件名”（如“image/demo.jpg”），或仅传入文件名。</p> </td> </tr> <tr><td class="cellrowborder" width="23.122312231223123%"><p>mode</p> </td> <td class="cellrowborder" width="19.001900190019004%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentmode10" target="_blank">request.agent.Mode</a></p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>否</p> </td> <td class="cellrowborder" width="12.62126212621262%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>下载任务类型，前端任务在应用切换到后台一段时间后失败/暂停；后台任务不受影响。默认为request.agent.Mode.BACKGROUND。</p> <ul><li>request.agent.Mode.BACKGROUND：后台任务。</li><li>request.agent.Mode.FOREGROUND：前端任务。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.122312231223123%"><p>overwrite</p> </td> <td class="cellrowborder" width="19.001900190019004%"><p>boolean</p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>否</p> </td> <td class="cellrowborder" width="12.62126212621262%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>当本地文件已存在时，是否覆盖本地文件，默认false。</p> <ul><li>true：覆盖本地文件。</li><li>false：不覆盖，若存在同名文件则下载失败。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.122312231223123%"><p>network</p> </td> <td class="cellrowborder" width="19.001900190019004%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentnetwork10" target="_blank">request.agent.Network</a></p> </td> <td class="cellrowborder" width="7.520752075207521%"><p>否</p> </td> <td class="cellrowborder" width="12.62126212621262%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>下载任务的网络配置，网络不满足设置条件时，未执行的任务等待执行，执行中的任务失败/暂停。默认为request.agent.Network.ANY。</p> <ul><li>request.agent.Network.ANY：不限网络类型。</li><li>request.agent.Network.WIFI：无线网络。</li><li>request.agent.Network.CELLULAR：蜂窝数据网络。</li></ul> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section7984102813013" device-type="phone,tablet,tv,wearable">ListOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7984102813013" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>列举操作的相关参数。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力： </strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.6.1.1" width="23.119999999999997%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.6.1.2" width="19.02%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.6.1.4" width="12.61%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.6.1.5" width="37.730000000000004%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>maxResults</p> </td> <td class="cellrowborder" width="19.02%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>列举文件的最大数量，取值范围1-1000，默认则列举所有文件。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>pageMarker</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>分页标识。默认值为空。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section181654510303" device-type="phone,tablet,tv,wearable">ListResults<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section181654510303" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>列举操作的结果。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力： </strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.6.1.1" width="23.119999999999997%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.6.1.2" width="19.02%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.6.1.4" width="12.61%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.6.1.5" width="37.730000000000004%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>directories</p> </td> <td class="cellrowborder" width="19.02%"><p>string[]</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>否</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>列举操作返回的云侧目录列表。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>files</p> </td> <td class="cellrowborder" width="19.02%"><p>string[]</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>否</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>列举操作返回的云侧文件列表。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>pageMarker</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>分页标识。默认值为空。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1122119164218" device-type="phone,tablet,tv,wearable">MetadataUpdatable<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1122119164218" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>可更新参数的元数据信息。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力： </strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.6.1.1" width="23.119999999999997%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.6.1.2" width="19.02%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.6.1.4" width="12.61%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.6.1.5" width="37.730000000000004%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>contentType</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>标准HTTP头部的Content-Type。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>cacheControl</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>标准HTTP头部的Cache-Control。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>contentDisposition</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>标准HTTP头部的Content-Disposition。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>contentEncoding</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>标准HTTP头部的Content-Encoding。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>contentLanguage</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>标准HTTP头部的Content-Language。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>customMetadata</p> </td> <td class="cellrowborder" width="19.02%"><p>Record&lt;string, string&gt;</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>自定义的云侧文件属性，不区分大小写，并且需要符合标准HTTP头部的规范。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section3472335144212" device-type="phone,tablet,tv,wearable">Metadata<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3472335144212" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>完整的元数据信息，继承自<a href="/consumer/cn/doc/harmonyos-references/cloudfoundation-cloudstorage#section1122119164218">MetadataUpdatable</a>。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力： </strong>SystemCapability.DeviceCloudGateway.CloudFoundation</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.7.1.6.1.1" width="23.119999999999997%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.6.1.2" width="19.02%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.6.1.4" width="12.61%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.6.1.5" width="37.730000000000004%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>name</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>否</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>云侧文件名称。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>size</p> </td> <td class="cellrowborder" width="19.02%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>否</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>云侧文件大小，单位为字节。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>createTime</p> </td> <td class="cellrowborder" width="19.02%"><p>Date</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>否</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>云侧文件创建时间，格式：yyyy-MM-ddTHH:mm:ssZ。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>modifyTime</p> </td> <td class="cellrowborder" width="19.02%"><p>Date</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>否</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>云侧文件修改时间，格式：yyyy-MM-ddTHH:mm:ssZ。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>sha256Hash</p> </td> <td class="cellrowborder" width="19.02%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="37.730000000000004%"><p>云侧文件的SHA256信息。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>