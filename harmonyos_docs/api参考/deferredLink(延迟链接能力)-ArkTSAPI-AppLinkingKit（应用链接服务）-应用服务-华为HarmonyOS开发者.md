<h1 _ngcontent-qnj-c119="" class="doc-title ng-star-inserted" title="deferredLink (延迟链接能力)"> deferredLink (延迟链接能力) </h1>

<div _ngcontent-qnj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供App Linking Kit的延迟链接能力。通过该能力，系统会对用户点击的应用链接保存十分钟，以便当用户下载安装并打开应用时，仍能获取之前点击的该应用相关链接。</p> <p><strong>起始版本：</strong>5.0.3(15)</p> <div class="tiledSection"><h2 id="section9320160142314" device-type="phone,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9320160142314" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><div _ngcontent-qnj-c106="" class="highlight-div"><div _ngcontent-qnj-c106="" class="highlight-div-header"><div _ngcontent-qnj-c106="" class="highlight-div-header-left"><div _ngcontent-qnj-c106="" class="handle-button expand-button"><div _ngcontent-qnj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qnj-c106="" class="highlight-div-header-right"><div _ngcontent-qnj-c106="" class="handle-button ai-button"></div><div _ngcontent-qnj-c106="" class="handle-button line-button"><div _ngcontent-qnj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qnj-c106="" class="handle-button theme-button"><div _ngcontent-qnj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qnj-c106="" class="handle-button copy-button"><div _ngcontent-qnj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qnj-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { deferredLink } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppLinkingKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section15555111210233" device-type="phone,tablet">popDeferredLink<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15555111210233" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>popDeferredLink(): Promise&lt;string&gt;</p> <p>应用首次启动时从系统缓存中获取用户之前点击的该应用相关链接信息，链接仅能被获取一次。获取链接后，系统会从缓存中删除该链接。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.BundleManager.AppLinking.DeferredLink</p> <p><strong>起始版本：</strong>5.0.3(15)</p> <p><strong>返回值</strong><strong>：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.8.1.3.1.1" width="39.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.3.1.2" width="60.88%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.12%"><p>Promise&lt;string&gt;</p> </td> <td class="cellrowborder" width="60.88%"><p>Promise对象，返回延迟链接。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-qnj-c106="" class="highlight-div"><div _ngcontent-qnj-c106="" class="highlight-div-header"><div _ngcontent-qnj-c106="" class="highlight-div-header-left"><div _ngcontent-qnj-c106="" class="handle-button expand-button"><div _ngcontent-qnj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qnj-c106="" class="highlight-div-header-right"><div _ngcontent-qnj-c106="" class="handle-button ai-button"></div><div _ngcontent-qnj-c106="" class="handle-button line-button"><div _ngcontent-qnj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qnj-c106="" class="handle-button theme-button"><div _ngcontent-qnj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qnj-c106="" class="handle-button copy-button"><div _ngcontent-qnj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qnj-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { deferredLink } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppLinkingKit'</span>;  </li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 应用首次启动时，获取用户之前点击的该应用相关链接</span></li><li>deferredLink.<span class="hljs-title function_">popDeferredLink</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">link: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting deferred link, result: <span class="hljs-subst">${link}</span>`</span>);</li><li>  <span class="hljs-comment">// 若延迟链接不为空，开发者可根据自身业务逻辑配置链接，跳转至详情页面</span></li><li>  <span class="hljs-keyword">if</span> (link) {</li><li>    <span class="hljs-comment">// 根据业务逻辑配置链接，自行跳转至详情页面</span></li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-comment">// 发生未知错误</span></li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to get deferred link.`</span>);</li><li>})</li></ol></pre></div></div> </div> </div> <div></div></div>