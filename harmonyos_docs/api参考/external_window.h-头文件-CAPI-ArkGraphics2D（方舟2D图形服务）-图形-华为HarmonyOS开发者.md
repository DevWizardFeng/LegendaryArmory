<h1 _ngcontent-tar-c119="" class="doc-title ng-star-inserted" title="external_window.h"> external_window.h </h1>

<div _ngcontent-tar-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div> <div class="tiledSection" style="contain-intrinsic-size: auto 326px;"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义获取和使用NativeWindow的相关函数。</p> <p><strong>引用文件：</strong> &lt;native_window/external_window.h&gt;</p> <p><strong>库：</strong> libnative_window.so</p> <p><strong>起始版本：</strong> 8</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow">NativeWindow</a></p> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 146px;"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 555px;"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-region">Region</a></td> <td class="cellrowborder" width="33.33333333333333%">Region</td> <td class="cellrowborder" width="33.33333333333333%">表示本地窗口OHNativeWindow需要更新内容的矩形区域（脏区）。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-rect">Rect</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">如果rects是空指针nullptr，默认Buffer大小为脏区。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-ohhdrmetadata">OHHDRMetaData</a></td> <td class="cellrowborder" width="33.33333333333333%">OHHDRMetaData</td> <td class="cellrowborder" width="33.33333333333333%">HDR元数据结构体定义。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-ohextdatahandle">OHExtDataHandle</a></td> <td class="cellrowborder" width="33.33333333333333%">OHExtDataHandle</td> <td class="cellrowborder" width="33.33333333333333%">扩展数据句柄结构体定义。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-ohipcparcel">OHIPCParcel</a></td> <td class="cellrowborder" width="33.33333333333333%">OHIPCParcel</td> <td class="cellrowborder" width="33.33333333333333%">提供对IPC序列化对象的访问功能。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">NativeWindow</a></td> <td class="cellrowborder" width="33.33333333333333%">OHNativeWindow</td> <td class="cellrowborder" width="33.33333333333333%">提供对OHNativeWindow的访问功能。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindowbuffer">NativeWindowBuffer</a></td> <td class="cellrowborder" width="33.33333333333333%">OHNativeWindowBuffer</td> <td class="cellrowborder" width="33.33333333333333%">提供对OHNativeWindowBuffer的访问功能。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 433px;"><h3 id="枚举" device-type="phone,2in1,tablet,wearable,tv">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#nativewindowoperation">NativeWindowOperation</a></td> <td class="cellrowborder" width="33.33333333333333%">NativeWindowOperation</td> <td class="cellrowborder" width="33.33333333333333%">OH_NativeWindow_NativeWindowHandleOpt函数中的操作码。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#ohscalingmode">OHScalingMode</a></td> <td class="cellrowborder" width="33.33333333333333%">OHScalingMode</td> <td class="cellrowborder" width="33.33333333333333%">缩放模式Scaling Mode。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#ohscalingmodev2">OHScalingModeV2</a></td> <td class="cellrowborder" width="33.33333333333333%">OHScalingModeV2</td> <td class="cellrowborder" width="33.33333333333333%">渲染缩放模式枚举。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#ohhdrmetadatakey">OHHDRMetadataKey</a></td> <td class="cellrowborder" width="33.33333333333333%">OHHDRMetadataKey</td> <td class="cellrowborder" width="33.33333333333333%">枚举HDR元数据关键字。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#ohsurfacesource">OHSurfaceSource</a></td> <td class="cellrowborder" width="33.33333333333333%">OHSurfaceSource</td> <td class="cellrowborder" width="33.33333333333333%">本地窗口内容来源类型枚举。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 4642px;"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_createnativewindow">OHNativeWindow* OH_NativeWindow_CreateNativeWindow(void* pSurface)</a></td> <td class="cellrowborder" width="50%"><p>创建OHNativeWindow实例，每次调用都会产生一个新的OHNativeWindow实例。</p> <p>说明：此接口不可用，可通过OH_NativeImage_AcquireNativeWindow创建，或通过XComponent创建。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_destroynativewindow">void OH_NativeWindow_DestroyNativeWindow(OHNativeWindow* window)</a></td> <td class="cellrowborder" width="50%"><p>将OHNativeWindow对象的引用计数减1，当引用计数为0的时候，该OHNativeWindow对象会被析构掉。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_createnativewindowbufferfromsurfacebuffer">OHNativeWindowBuffer* OH_NativeWindow_CreateNativeWindowBufferFromSurfaceBuffer(void* pSurfaceBuffer)</a></td> <td class="cellrowborder" width="50%"><p>创建OHNativeWindowBuffer实例，每次调用都会产生一个新的OHNativeWindowBuffer实例。</p> <p>说明：此接口不可用，使用OH_NativeWindow_CreateNativeWindowBufferFromNativeBuffer替代。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_createnativewindowbufferfromnativebuffer">OHNativeWindowBuffer* OH_NativeWindow_CreateNativeWindowBufferFromNativeBuffer(OH_NativeBuffer* nativeBuffer)</a></td> <td class="cellrowborder" width="50%"><p>创建OHNativeWindowBuffer实例，每次调用都会产生一个新的OHNativeWindowBuffer实例。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_destroynativewindowbuffer">OH_NativeWindow_DestroyNativeWindowBuffer</a>接口配合使用，否则会存在内存泄露。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_destroynativewindowbuffer">void OH_NativeWindow_DestroyNativeWindowBuffer(OHNativeWindowBuffer* buffer)</a></td> <td class="cellrowborder" width="50%"><p>将OHNativeWindowBuffer对象的引用计数减1，当引用计数为0的时候，该OHNativeWindowBuffer对象会被析构掉。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowrequestbuffer">int32_t OH_NativeWindow_NativeWindowRequestBuffer(OHNativeWindow *window,OHNativeWindowBuffer **buffer, int *fenceFd)</a></td> <td class="cellrowborder" width="50%"><p>通过OHNativeWindow对象申请一块OHNativeWindowBuffer，用以内容生产。</p> <p>在调用本接口前，需要通过<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#nativewindowoperation">SET_BUFFER_GEOMETRY</a>对OHNativeWindow设置宽高。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowflushbuffer">OH_NativeWindow_NativeWindowFlushBuffer</a>接口配合使用，否则内存会耗尽。</p> <p>当fenceFd使用完，用户需要将其close。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowflushbuffer">int32_t OH_NativeWindow_NativeWindowFlushBuffer(OHNativeWindow *window, OHNativeWindowBuffer *buffer,int fenceFd, Region region)</a></td> <td class="cellrowborder" width="50%"><p>通过OHNativeWindow将生产好内容的OHNativeWindowBuffer放回到Buffer队列中，用以内容消费。</p> <p>系统会将fenceFd关闭，无需用户close。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_getlastflushedbuffer">int32_t OH_NativeWindow_GetLastFlushedBuffer(OHNativeWindow *window, OHNativeWindowBuffer **buffer,int *fenceFd, float matrix[16])</a></td> <td class="cellrowborder" width="50%">从OHNativeWindow获取上次送回到buffer队列中的OHNativeWindowBuffer。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowabortbuffer">int32_t OH_NativeWindow_NativeWindowAbortBuffer(OHNativeWindow *window, OHNativeWindowBuffer *buffer)</a></td> <td class="cellrowborder" width="50%"><p>通过OHNativeWindow将之前申请出来的OHNativeWindowBuffer返还到Buffer队列中，供下次再申请。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowhandleopt">int32_t OH_NativeWindow_NativeWindowHandleOpt(OHNativeWindow *window, int code, ...)</a></td> <td class="cellrowborder" width="50%"><p>设置/获取OHNativeWindow的属性，包括设置/获取宽高、内容格式等。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_getbufferhandlefromnative">BufferHandle *OH_NativeWindow_GetBufferHandleFromNative(OHNativeWindowBuffer *buffer)</a></td> <td class="cellrowborder" width="50%"><p>通过OHNativeWindowBuffer获取该buffer的BufferHandle指针。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativeobjectreference">int32_t OH_NativeWindow_NativeObjectReference(void *obj)</a></td> <td class="cellrowborder" width="50%"><p>增加一个NativeObject的引用计数。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativeobjectunreference">OH_NativeWindow_NativeObjectUnreference</a>接口配合使用，否则会存在内存泄露。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativeobjectunreference">int32_t OH_NativeWindow_NativeObjectUnreference(void *obj)</a></td> <td class="cellrowborder" width="50%"><p>减少一个NativeObject的引用计数，当引用计数减少为0时，该NativeObject将被析构掉。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_getnativeobjectmagic">int32_t OH_NativeWindow_GetNativeObjectMagic(void *obj)</a></td> <td class="cellrowborder" width="50%"><p>获取NativeObject的MagicId。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowsetscalingmode">int32_t OH_NativeWindow_NativeWindowSetScalingMode(OHNativeWindow *window, uint32_t sequence,OHScalingMode scalingMode)</a></td> <td class="cellrowborder" width="50%">设置OHNativeWindow的ScalingMode。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowsetmetadata">int32_t OH_NativeWindow_NativeWindowSetMetaData(OHNativeWindow *window, uint32_t sequence, int32_t size,const OHHDRMetaData *metaData)</a></td> <td class="cellrowborder" width="50%">设置OHNativeWindow的元数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowsetmetadataset">int32_t OH_NativeWindow_NativeWindowSetMetaDataSet(OHNativeWindow *window, uint32_t sequence, OHHDRMetadataKey key,int32_t size, const uint8_t *metaData)</a></td> <td class="cellrowborder" width="50%">设置OHNativeWindow的元数据集。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowsettunnelhandle">int32_t OH_NativeWindow_NativeWindowSetTunnelHandle(OHNativeWindow *window, const OHExtDataHandle *handle)</a></td> <td class="cellrowborder" width="50%">设置OHNativeWindow的TunnelHandle。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowattachbuffer">int32_t OH_NativeWindow_NativeWindowAttachBuffer(OHNativeWindow *window, OHNativeWindowBuffer *buffer)</a></td> <td class="cellrowborder" width="50%"><p>将OHNativeWindowBuffer添加进OHNativeWindow中。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowdetachbuffer">OH_NativeWindow_NativeWindowDetachBuffer</a>接口配合使用，否则会存在内存管理混乱问题。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowdetachbuffer">int32_t OH_NativeWindow_NativeWindowDetachBuffer(OHNativeWindow *window, OHNativeWindowBuffer *buffer)</a></td> <td class="cellrowborder" width="50%"><p>将OHNativeWindowBuffer从OHNativeWindow中分离。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_getsurfaceid">int32_t OH_NativeWindow_GetSurfaceId(OHNativeWindow *window, uint64_t *surfaceId)</a></td> <td class="cellrowborder" width="50%"><p>通过OHNativeWindow获取对应的surfaceId。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_createnativewindowfromsurfaceid">int32_t OH_NativeWindow_CreateNativeWindowFromSurfaceId(uint64_t surfaceId, OHNativeWindow **window)</a></td> <td class="cellrowborder" width="50%"><p>通过surfaceId创建对应的OHNativeWindow。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_destroynativewindow">OH_NativeWindow_DestroyNativeWindow</a>接口配合使用，否则会存在内存泄露。</p> <p>如果存在并发释放OHNativeWindow的情况，需要通过<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativeobjectreference">OH_NativeWindow_NativeObjectReference</a>和<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativeobjectunreference">OH_NativeWindow_NativeObjectUnreference</a>对OHNativeWindow进行引用计数加一和减一。</p> <p>通过surfaceId获取的surface需要是在本进程中创建的，不能跨进程获取surface。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowsetscalingmodev2">int32_t OH_NativeWindow_NativeWindowSetScalingModeV2(OHNativeWindow* window, OHScalingModeV2 scalingMode)</a></td> <td class="cellrowborder" width="50%"><p>设置OHNativeWindow的渲染缩放模式。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_getlastflushedbufferv2">int32_t OH_NativeWindow_GetLastFlushedBufferV2(OHNativeWindow *window, OHNativeWindowBuffer **buffer,int *fenceFd, float matrix[16])</a></td> <td class="cellrowborder" width="50%"><p>从OHNativeWindow获取上次送回到buffer队列中的OHNativeWindowBuffer,与OH_NativeWindow_GetLastFlushedBuffer的差异在于matrix不同。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativeobjectunreference">OH_NativeWindow_NativeObjectUnreference</a>接口配合使用，否则会存在内存泄露。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_setbufferhold">void OH_NativeWindow_SetBufferHold(OHNativeWindow *window)</a></td> <td class="cellrowborder" width="50%">启用单帧缓存机制，通过提前缓存一帧buffer并延迟显示，用于平滑帧率波动。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_writetoparcel">int32_t OH_NativeWindow_WriteToParcel(OHNativeWindow *window, OHIPCParcel *parcel)</a></td> <td class="cellrowborder" width="50%"><p>将窗口对象写入IPC序列化对象中。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_readfromparcel">int32_t OH_NativeWindow_ReadFromParcel(OHIPCParcel *parcel, OHNativeWindow **window)</a></td> <td class="cellrowborder" width="50%"><p>从IPC序列化对象中读取窗口对象。</p> <p>本接口将会创建一个OHNativeWindow，当窗口对象使用完，开发者需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_destroynativewindow">OH_NativeWindow_DestroyNativeWindow</a>接口配合使用，否则会存在内存泄漏。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_setcolorspace">int32_t OH_NativeWindow_SetColorSpace(OHNativeWindow *window, OH_NativeBuffer_ColorSpace colorSpace)</a></td> <td class="cellrowborder" width="50%"><p>为OHNativeWindow设置颜色空间属性。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_getcolorspace">int32_t OH_NativeWindow_GetColorSpace(OHNativeWindow *window, OH_NativeBuffer_ColorSpace *colorSpace)</a></td> <td class="cellrowborder" width="50%"><p>获取OHNativeWindow颜色空间属性。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_setmetadatavalue">int32_t OH_NativeWindow_SetMetadataValue(OHNativeWindow *window, OH_NativeBuffer_MetadataKey metadataKey,int32_t size, uint8_t *metadata)</a></td> <td class="cellrowborder" width="50%"><p>为OHNativeWindow设置元数据属性值。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_getmetadatavalue">int32_t OH_NativeWindow_GetMetadataValue(OHNativeWindow *window, OH_NativeBuffer_MetadataKey metadataKey,int32_t *size, uint8_t **metadata)</a></td> <td class="cellrowborder" width="50%"><p>获取OHNativeWindow元数据属性值。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_cleancache">int32_t OH_NativeWindow_CleanCache(OHNativeWindow *window)</a></td> <td class="cellrowborder" width="50%"><p>清理OHNativeWindow中的OHNativeWindowBuffer缓存。</p> <p>使用该接口清理缓存前，需确保已通过<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowrequestbuffer">OH_NativeWindow_NativeWindowRequestBuffer</a>接口成功申请OHNativeWindowBuffer。</p> <p>本接口为非线程安全类型接口。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 146px;"><h2 id="枚举类型说明" device-type="phone,2in1,tablet,wearable,tv">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection" style="contain-intrinsic-size: auto 3269px;"><h3 id="nativewindowoperation" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">NativeWindowOperation<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nativewindowoperation" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">NativeWindowOperation</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>OH_NativeWindow_NativeWindowHandleOpt函数中的操作码。</p> <p><strong>起始版本：</strong> 8</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">SET_BUFFER_GEOMETRY</td> <td class="cellrowborder" width="50%">设置本地窗口缓冲区几何图形，函数中的可变参数是[输入] int32_t width，[输入] int32_t height。</td> </tr> <tr><td class="cellrowborder" width="50%">GET_BUFFER_GEOMETRY</td> <td class="cellrowborder" width="50%">获取本地窗口缓冲区几何图形，函数中的可变参数是[输出] int32_t height，[输出] int32_t width。</td> </tr> <tr><td class="cellrowborder" width="50%">GET_FORMAT</td> <td class="cellrowborder" width="50%">获取本地窗口缓冲区格式，函数中的可变参数是[输出] int32_tformat，取值具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-buffer-h#oh_nativebuffer_format">OH_NativeBuffer_Format</a>枚举值。</td> </tr> <tr><td class="cellrowborder" width="50%">SET_FORMAT</td> <td class="cellrowborder" width="50%">设置本地窗口缓冲区格式，函数中的可变参数是[输入] int32_t format，取值具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-buffer-h#oh_nativebuffer_format">OH_NativeBuffer_Format</a>枚举值。</td> </tr> <tr><td class="cellrowborder" width="50%">GET_USAGE</td> <td class="cellrowborder" width="50%">获取本地窗口读写方式，函数中的可变参数是[输出] uint64_tusage，取值具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-buffer-h#oh_nativebuffer_usage">OH_NativeBuffer_Usage</a>枚举值。</td> </tr> <tr><td class="cellrowborder" width="50%">SET_USAGE</td> <td class="cellrowborder" width="50%">设置本地窗口缓冲区读写方式，函数中的可变参数是[输入] uint64_t usage，取值具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-buffer-h#oh_nativebuffer_usage">OH_NativeBuffer_Usage</a>枚举值。</td> </tr> <tr><td class="cellrowborder" width="50%">SET_STRIDE</td> <td class="cellrowborder" width="50%"><p>设置本地窗口缓冲区步幅，函数中的可变参数是[输入] int32_t stride。</p> <p><strong>废弃版本：</strong> 16</p> </td> </tr> <tr><td class="cellrowborder" width="50%">GET_STRIDE</td> <td class="cellrowborder" width="50%"><p>获取本地窗口缓冲区步幅，函数中的可变参数是[输出] int32_t *stride。</p> <p><strong>废弃版本：</strong> 16</p> <p><strong>替代方案：</strong> 使用<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_getbufferhandlefromnative">OH_NativeWindow_GetBufferHandleFromNative</a>接口获取BufferHandle实例，从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-bufferhandle">BufferHandle</a>实例中获取stride值。</p> </td> </tr> <tr><td class="cellrowborder" width="50%">SET_SWAP_INTERVAL</td> <td class="cellrowborder" width="50%">设置本地窗口缓冲区交换间隔，函数中的可变参数是[输入] int32_t interval。</td> </tr> <tr><td class="cellrowborder" width="50%">GET_SWAP_INTERVAL</td> <td class="cellrowborder" width="50%">获取本地窗口缓冲区交换间隔，函数中的可变参数是[输出] int32_tinterval。</td> </tr> <tr><td class="cellrowborder" width="50%">SET_TIMEOUT</td> <td class="cellrowborder" width="50%">设置请求本地窗口请求缓冲区的超时等待时间，未手动设置时默认值为3000毫秒，函数中的可变参数是[输入] int32_t timeout, 单位为毫秒。</td> </tr> <tr><td class="cellrowborder" width="50%">GET_TIMEOUT</td> <td class="cellrowborder" width="50%">获取请求本地窗口请求缓冲区的超时等待时间，未手动设置时默认值为3000毫秒，函数中的可变参数是[输出] int32_t timeout，单位为毫秒。</td> </tr> <tr><td class="cellrowborder" width="50%">SET_COLOR_GAMUT</td> <td class="cellrowborder" width="50%">设置本地窗口缓冲区色彩空间，函数中的可变参数是[输入] int32_t colorGamut，取值具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-buffer-h#oh_nativebuffer_colorgamut">OH_NativeBuffer_ColorGamut</a>枚举值。</td> </tr> <tr><td class="cellrowborder" width="50%">GET_COLOR_GAMUT</td> <td class="cellrowborder" width="50%">获取本地窗口缓冲区色彩空间，函数中的可变参数是[输出] int32_tcolorGamut，取值具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-buffer-h#oh_nativebuffer_colorgamut">OH_NativeBuffer_ColorGamut</a>枚举值。</td> </tr> <tr><td class="cellrowborder" width="50%">SET_TRANSFORM</td> <td class="cellrowborder" width="50%">设置本地窗口缓冲区变换，函数中的可变参数是[输入] int32_t transform，取值具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-buffer-h#oh_nativebuffer_transformtype">OH_NativeBuffer_TransformType</a>枚举值。</td> </tr> <tr><td class="cellrowborder" width="50%">GET_TRANSFORM</td> <td class="cellrowborder" width="50%">获取本地窗口缓冲区变换，函数中的可变参数是[输出] int32_t transform，取值具体可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-buffer-h#oh_nativebuffer_transformtype">OH_NativeBuffer_TransformType</a>枚举值。</td> </tr> <tr><td class="cellrowborder" width="50%">SET_UI_TIMESTAMP</td> <td class="cellrowborder" width="50%">设置本地窗口缓冲区UI时间戳，函数中的可变参数是[输入] uint64_t uiTimestamp。</td> </tr> <tr><td class="cellrowborder" width="50%">GET_BUFFERQUEUE_SIZE</td> <td class="cellrowborder" width="50%"><p>获取内存队列大小，函数中的可变参数是[输出] int32_t *size。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr> <tr><td class="cellrowborder" width="50%">SET_SOURCE_TYPE</td> <td class="cellrowborder" width="50%"><p>设置本地窗口内容来源，函数中的可变参数是[输入] int32_t sourceType，取值具体可见<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#ohsurfacesource">OHSurfaceSource</a>枚举值。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr> <tr><td class="cellrowborder" width="50%">GET_SOURCE_TYPE</td> <td class="cellrowborder" width="50%"><p>获取本地窗口内容来源，函数中的可变参数是[输出] int32_t *sourceType，取值具体可见<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#ohsurfacesource">OHSurfaceSource</a>枚举值。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr> <tr><td class="cellrowborder" width="50%">SET_APP_FRAMEWORK_TYPE</td> <td class="cellrowborder" width="50%"><p>设置本地窗口应用框架名称，函数中的可变参数是[输入] char* frameworkType，最大支持64字节。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr> <tr><td class="cellrowborder" width="50%">GET_APP_FRAMEWORK_TYPE</td> <td class="cellrowborder" width="50%"><p>获取本地窗口应用框架名称，函数中的可变参数是[输出] char* frameworkType。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr> <tr><td class="cellrowborder" width="50%">SET_HDR_WHITE_POINT_BRIGHTNESS</td> <td class="cellrowborder" width="50%"><p>设置HDR白点亮度，函数中的可变参数是[输入] float brightness。取值范围为[0.0f, 1.0f]。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr> <tr><td class="cellrowborder" width="50%">SET_SDR_WHITE_POINT_BRIGHTNESS</td> <td class="cellrowborder" width="50%"><p>设置SDR白点亮度，函数中的可变参数是[输入] float brightness。取值范围为[0.0f, 1.0f]。</p> <p><strong>起始版本：</strong> 12</p> </td> </tr> <tr><td class="cellrowborder" width="50%">SET_DESIRED_PRESENT_TIMESTAMP = 24</td> <td class="cellrowborder" width="50%"><p>设置本地窗口缓冲区期望上屏时间的时间戳。</p> <p> 当且仅当RenderService为本地窗口的消费者时，该时间戳生效</p> <p>本操作执行后需要配合调用<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowflushbuffer">OH_NativeWindow_NativeWindowFlushBuffer</a>生效。</p> <p>生产者下一次放入队列的buffer，达到该期望上屏时间后，才会被RenderService消费并上屏。</p> <p>如果buffer队列中存在多个生产者放入的buffer，都设置了desiredPresentTimestamp并已达到期望上屏时间，则较早入队的buffer将被消费者丢弃回队列。</p> <p>如果期望上屏时间大于消费者提供的时间 1 秒以上，则该期望上屏时间戳将被忽略。</p> <p> 函数中的可变参数是[输入] int64_t desiredPresentTimestamp，取值范围大于0，应由std::chrono::steady_clock标准库时钟生成，且单位为纳秒。</p> <p><strong>起始版本：</strong> 13</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 810px;"><h3 id="ohscalingmode" device-type="phone,2in1,tablet,wearable,tv">OHScalingMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ohscalingmode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OHScalingMode</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>缩放模式Scaling Mode。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>废弃版本：</strong> 10</p> <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#ohscalingmodev2">OHScalingModeV2</a></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_SCALING_MODE_FREEZE = 0</td> <td class="cellrowborder" width="50%">在接收到窗口大小的缓冲区之前，不可以更新窗口内容。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCALING_MODE_SCALE_TO_WINDOW</td> <td class="cellrowborder" width="50%">缓冲区在二维中缩放以匹配窗口大小。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCALING_MODE_SCALE_CROP</td> <td class="cellrowborder" width="50%">缓冲区被统一缩放，使得缓冲区的较小尺寸与窗口大小匹配。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCALING_MODE_NO_SCALE_CROP</td> <td class="cellrowborder" width="50%">窗口被裁剪为缓冲区裁剪矩形的大小，裁剪矩形之外的像素被视为完全透明。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 841px;"><h3 id="ohscalingmodev2" device-type="phone,2in1,tablet,wearable,tv">OHScalingModeV2<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ohscalingmodev2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OHScalingModeV2</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>渲染缩放模式枚举。</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_SCALING_MODE_FREEZE_V2 = 0</td> <td class="cellrowborder" width="50%">冻结窗口，在接收到和窗口大小相等的缓冲区之前，窗口内容不进行更新。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCALING_MODE_SCALE_TO_WINDOW_V2</td> <td class="cellrowborder" width="50%">缓冲区进行拉伸缩放以匹配窗口大小。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCALING_MODE_SCALE_CROP_V2</td> <td class="cellrowborder" width="50%">缓冲区按原比例缩放，使得缓冲区的较小边与窗口匹配，较长边超出窗口部分被视为透明。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCALING_MODE_NO_SCALE_CROP_V2</td> <td class="cellrowborder" width="50%">按窗口大小将缓冲区裁剪，裁剪矩形之外的像素被视为完全透明。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCALING_MODE_SCALE_FIT_V2</td> <td class="cellrowborder" width="50%"><p>缓冲区按原比例缩放。优先显示所有缓冲区内容。如果比例与窗口比例不同，用背景颜色填充窗口的未填充区域。</p> <p>模拟器不支持该模式。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1288px;"><h3 id="ohhdrmetadatakey" device-type="phone,2in1,tablet,wearable,tv">OHHDRMetadataKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ohhdrmetadatakey" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OHHDRMetadataKey</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举HDR元数据关键字。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>废弃版本：</strong> 10</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_METAKEY_RED_PRIMARY_X = 0</td> <td class="cellrowborder" width="50%">红基色X坐标。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_RED_PRIMARY_Y = 1,</td> <td class="cellrowborder" width="50%">红基色Y坐标。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_GREEN_PRIMARY_X = 2,</td> <td class="cellrowborder" width="50%">绿基色X坐标。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_GREEN_PRIMARY_Y = 3,</td> <td class="cellrowborder" width="50%">绿基色Y坐标。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_BLUE_PRIMARY_X = 4,</td> <td class="cellrowborder" width="50%">蓝基色X坐标。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_BLUE_PRIMARY_Y = 5,</td> <td class="cellrowborder" width="50%">蓝基色Y坐标。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_WHITE_PRIMARY_X = 6,</td> <td class="cellrowborder" width="50%">白点X坐标。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_WHITE_PRIMARY_Y = 7,</td> <td class="cellrowborder" width="50%">白点Y坐标。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_MAX_LUMINANCE = 8,</td> <td class="cellrowborder" width="50%">最大的光亮度。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_MIN_LUMINANCE = 9,</td> <td class="cellrowborder" width="50%">最小的光亮度。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_MAX_CONTENT_LIGHT_LEVEL = 10,</td> <td class="cellrowborder" width="50%">最大的内容亮度水平。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_MAX_FRAME_AVERAGE_LIGHT_LEVEL = 11,</td> <td class="cellrowborder" width="50%">最大的帧平均亮度水平。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_HDR10_PLUS = 12,</td> <td class="cellrowborder" width="50%">HDR10 Plus。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_METAKEY_HDR_VIVID = 13,</td> <td class="cellrowborder" width="50%">Vivid。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 721px;"><h3 id="ohsurfacesource" device-type="phone,2in1,tablet,wearable,tv">OHSurfaceSource<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ohsurfacesource" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OHSurfaceSource</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>本地窗口内容来源类型枚举。</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_SURFACE_SOURCE_DEFAULT = 0</td> <td class="cellrowborder" width="50%">窗口内容默认来源。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SURFACE_SOURCE_UI</td> <td class="cellrowborder" width="50%">窗口内容来自于UI。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SURFACE_SOURCE_GAME</td> <td class="cellrowborder" width="50%">窗口内容来自于游戏。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SURFACE_SOURCE_CAMERA</td> <td class="cellrowborder" width="50%">窗口内容来自于相机。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SURFACE_SOURCE_VIDEO</td> <td class="cellrowborder" width="50%">窗口内容来自于视频。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 146px;"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection" style="contain-intrinsic-size: auto 872px;"><h3 id="oh_nativewindow_createnativewindow" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_NativeWindow_CreateNativeWindow()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_createnativewindow" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OHNativeWindow* <span class="hljs-built_in">OH_NativeWindow_CreateNativeWindow</span>(void* pSurface)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建OHNativeWindow实例，每次调用都会产生一个新的OHNativeWindow实例。</p> <p>说明：此接口不可用，可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-image-h#oh_nativeimage_acquirenativewindow">OH_NativeImage_AcquireNativeWindow</a>创建，或通过XComponent创建。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>废弃版本：</strong> 从API version 12开始废弃，不再提供替代接口。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">void* pSurface</td> <td class="cellrowborder" width="50%">一个指向生产者ProduceSurface的指针，类型为sptr&lt;OHOS::Surface&gt;。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>*</td> <td class="cellrowborder" width="50%">返回一个指针，指向OHNativeWindow的结构体实例。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 645px;"><h3 id="oh_nativewindow_destroynativewindow" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_DestroyNativeWindow()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_destroynativewindow" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_NativeWindow_DestroyNativeWindow</span><span class="hljs-params">(OHNativeWindow* window)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将OHNativeWindow对象的引用计数减1，当引用计数为0的时候，该OHNativeWindow对象会被析构掉。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>* window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 960px;"><h3 id="oh_nativewindow_createnativewindowbufferfromsurfacebuffer" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_CreateNativeWindowBufferFromSurfaceBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_createnativewindowbufferfromsurfacebuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OHNativeWindowBuffer* <span class="hljs-built_in">OH_NativeWindow_CreateNativeWindowBufferFromSurfaceBuffer</span>(void* pSurfaceBuffer)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建OHNativeWindowBuffer实例，每次调用都会产生一个新的OHNativeWindowBuffer实例。</p> <p>说明：此接口不可用，使用<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_createnativewindowbufferfromnativebuffer">OH_NativeWindow_CreateNativeWindowBufferFromNativeBuffer</a>替代。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>废弃版本：</strong> 12</p> <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_createnativewindowbufferfromnativebuffer">OH_NativeWindow_CreateNativeWindowBufferFromNativeBuffer</a></p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">void* pSurfaceBuffer</td> <td class="cellrowborder" width="50%">一个指向生产者buffer的指针，类型为sptrOHOS::SurfaceBuffer。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OHNativeWindowBuffer*</td> <td class="cellrowborder" width="50%">返回一个指针，指向OHNativeWindowBuffer的结构体实例。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 888px;"><h3 id="oh_nativewindow_createnativewindowbufferfromnativebuffer" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_CreateNativeWindowBufferFromNativeBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_createnativewindowbufferfromnativebuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OHNativeWindowBuffer* <span class="hljs-built_in">OH_NativeWindow_CreateNativeWindowBufferFromNativeBuffer</span>(OH_NativeBuffer* nativeBuffer)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建OHNativeWindowBuffer实例，每次调用都会产生一个新的OHNativeWindowBuffer实例。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_destroynativewindowbuffer">OH_NativeWindow_DestroyNativeWindowBuffer</a>接口配合使用，否则会存在内存泄露。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_NativeBuffer* nativeBuffer</td> <td class="cellrowborder" width="50%">一个指向OH_NativeBuffer的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OHNativeWindowBuffer*</td> <td class="cellrowborder" width="50%">返回一个指针，指向OHNativeWindowBuffer的结构体实例。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 645px;"><h3 id="oh_nativewindow_destroynativewindowbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_DestroyNativeWindowBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_destroynativewindowbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_NativeWindow_DestroyNativeWindowBuffer</span><span class="hljs-params">(OHNativeWindowBuffer* buffer)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将OHNativeWindowBuffer对象的引用计数减1，当引用计数为0的时候，该OHNativeWindowBuffer对象会被析构掉。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindowbuffer">OHNativeWindowBuffer</a>* buffer</td> <td class="cellrowborder" width="50%">一个OHNativeWindowBuffer的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1262px;"><h3 id="oh_nativewindow_nativewindowrequestbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowRequestBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowrequestbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_NativeWindowRequestBuffer</span><span class="hljs-params">(OHNativeWindow *window,OHNativeWindowBuffer **buffer, <span class="hljs-type">int</span> *fenceFd)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过OHNativeWindow对象申请一块OHNativeWindowBuffer，用以内容生产。</p> <p>在调用本接口前，需要通过<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#nativewindowoperation">SET_BUFFER_GEOMETRY</a>对OHNativeWindow设置宽高。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowflushbuffer">OH_NativeWindow_NativeWindowFlushBuffer</a>接口配合使用，否则内存会耗尽。</p> <p>当fenceFd使用完，用户需要将其close。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindowbuffer">OHNativeWindowBuffer</a> **buffer</td> <td class="cellrowborder" width="50%"><p>一个指向OHNativeWindowBuffer指针的指针（二级指针）。</p> <p>通过OH_NativeWindow_GetBufferHandleFromNative可获取BufferHandle结构体，访问缓冲区内存。</p> </td> </tr> <tr><td class="cellrowborder" width="50%">int *fenceFd</td> <td class="cellrowborder" width="50%"><p>一个文件描述符句柄，用于GPU/CPU同步：不同取值及含义如下：</p> <p>- 返回≥0：缓冲区正被GPU使用，需要等待文件描述符fenceFd就绪。</p> <p>- 返回-1：缓冲区可直接使用。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.14.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.14.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1173px;"><h3 id="oh_nativewindow_nativewindowflushbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowFlushBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowflushbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_NativeWindowFlushBuffer</span><span class="hljs-params">(OHNativeWindow *window, OHNativeWindowBuffer *buffer,<span class="hljs-type">int</span> fenceFd, Region region)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过OHNativeWindow将生产好内容的OHNativeWindowBuffer放回到Buffer队列中，用以内容消费。</p> <p>系统会将fenceFd关闭，无需用户close。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindowbuffer">OHNativeWindowBuffer</a> *buffer</td> <td class="cellrowborder" width="50%">一个OHNativeWindowBuffer的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int fenceFd</td> <td class="cellrowborder" width="50%"><p>一个文件描述符句柄，用以同步时序。不同取值及含义如下：</p> <p>- -1：CPU渲染完成，无需同步时序。</p> <p>- ≥0：从GPU同步对象转换（如EGL的eglDupNativeFenceFDANDROID），对端需要通过此fenceFd同步时序。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-region">Region</a> region</td> <td class="cellrowborder" width="50%">一个Region结构体，表示一块脏区域，该区域有内容更新。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1053px;"><h3 id="oh_nativewindow_getlastflushedbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_GetLastFlushedBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_getlastflushedbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_GetLastFlushedBuffer</span><span class="hljs-params">(OHNativeWindow *window, OHNativeWindowBuffer **buffer,<span class="hljs-type">int</span> *fenceFd, <span class="hljs-type">float</span> matrix[<span class="hljs-number">16</span>])</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从OHNativeWindow获取上次送回到buffer队列中的OHNativeWindowBuffer。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 11</p> <p><strong>废弃版本：</strong> 从API version 12开始废弃。</p> <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_getlastflushedbufferv2">OH_NativeWindow_GetLastFlushedBufferV2</a></p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindowbuffer">OHNativeWindowBuffer</a> **buffer</td> <td class="cellrowborder" width="50%">一个OHNativeWindowBuffer结构体指针的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int *fenceFd</td> <td class="cellrowborder" width="50%">一个文件描述符的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">matrix</td> <td class="cellrowborder" width="50%">表示检索到的44变换矩阵。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 895px;"><h3 id="oh_nativewindow_nativewindowabortbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowAbortBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowabortbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NativeWindow_NativeWindowAbortBuffer</span>(OHNativeWindow *window, OHNativeWindowBuffer *buffer)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过OHNativeWindow将之前申请出来的OHNativeWindowBuffer返还到Buffer队列中，供下次再申请。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindowbuffer">OHNativeWindowBuffer</a> *buffer</td> <td class="cellrowborder" width="50%">一个OHNativeWindowBuffer的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 974px;"><h3 id="oh_nativewindow_nativewindowhandleopt" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowHandleOpt()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowhandleopt" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_NativeWindowHandleOpt</span><span class="hljs-params">(OHNativeWindow *window, <span class="hljs-type">int</span> code, ...)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置/获取OHNativeWindow的属性，包括设置/获取宽高、内容格式等。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int code</td> <td class="cellrowborder" width="50%">表示操作码，详见<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#nativewindowoperation">NativeWindowOperation</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">...</td> <td class="cellrowborder" width="50%">可变参数，必须与操作码对应的数据类型保持一致，且入参数量严格按照操作码提示传入，否则会存在未定义行为。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 840px;"><h3 id="oh_nativewindow_getbufferhandlefromnative" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_GetBufferHandleFromNative()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_getbufferhandlefromnative" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>BufferHandle *<span class="hljs-built_in">OH_NativeWindow_GetBufferHandleFromNative</span>(OHNativeWindowBuffer *buffer)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过OHNativeWindowBuffer获取该buffer的BufferHandle指针。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindowbuffer">OHNativeWindowBuffer</a> *buffer</td> <td class="cellrowborder" width="50%">一个OHNativeWindowBuffer的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-bufferhandle">BufferHandle</a></td> <td class="cellrowborder" width="50%">BufferHandle 返回一个指针，指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-bufferhandle">BufferHandle</a>的结构体实例。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 912px;"><h3 id="oh_nativewindow_nativeobjectreference" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeObjectReference()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativeobjectreference" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_NativeObjectReference</span><span class="hljs-params">(<span class="hljs-type">void</span> *obj)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>增加一个NativeObject的引用计数。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativeobjectunreference">OH_NativeWindow_NativeObjectUnreference</a>接口配合使用，否则会存在内存泄露。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">void *obj</td> <td class="cellrowborder" width="50%">一个OHNativeWindow或者OHNativeWindowBuffer的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 864px;"><h3 id="oh_nativewindow_nativeobjectunreference" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeObjectUnreference()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativeobjectunreference" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_NativeObjectUnreference</span><span class="hljs-params">(<span class="hljs-type">void</span> *obj)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>减少一个NativeObject的引用计数，当引用计数减少为0时，该NativeObject将被析构掉。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">void *obj</td> <td class="cellrowborder" width="50%">一个OHNativeWindow或者OHNativeWindowBuffer的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 840px;"><h3 id="oh_nativewindow_getnativeobjectmagic" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_GetNativeObjectMagic()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_getnativeobjectmagic" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_GetNativeObjectMagic</span><span class="hljs-params">(<span class="hljs-type">void</span> *obj)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取NativeObject的MagicId。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 8</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">void *obj</td> <td class="cellrowborder" width="50%">一个OHNativeWindow或者OHNativeWindowBuffer的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">MagicId 返回值为魔鬼数字，每个NativeObject唯一。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 974px;"><h3 id="oh_nativewindow_nativewindowsetscalingmode" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowSetScalingMode()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowsetscalingmode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_NativeWindowSetScalingMode</span><span class="hljs-params">(OHNativeWindow *window, <span class="hljs-type">uint32_t</span> sequence,OHScalingMode scalingMode)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置OHNativeWindow的ScalingMode。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 9</p> <p><strong>废弃版本：</strong> 从API version 10开始废弃。</p> <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowsetscalingmodev2">OH_NativeWindow_NativeWindowSetScalingModeV2</a></p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t sequence</td> <td class="cellrowborder" width="50%">生产缓冲区的序列。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#ohscalingmode">OHScalingMode</a> scalingMode</td> <td class="cellrowborder" width="50%">枚举值OHScalingMode。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 981px;"><h3 id="oh_nativewindow_nativewindowsetmetadata" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowSetMetaData()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowsetmetadata" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_NativeWindowSetMetaData</span><span class="hljs-params">(OHNativeWindow *window, <span class="hljs-type">uint32_t</span> sequence, <span class="hljs-type">int32_t</span> size,<span class="hljs-type">const</span> OHHDRMetaData *metaData)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置OHNativeWindow的元数据。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 9</p> <p><strong>废弃版本：</strong> 从API version 10开始废弃，不再提供替代接口。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t sequence</td> <td class="cellrowborder" width="50%">生产缓冲区的序列。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t size</td> <td class="cellrowborder" width="50%">OHHDRMetaData数组的大小。</td> </tr> <tr><td class="cellrowborder" width="50%">metaData</td> <td class="cellrowborder" width="50%">指向OHHDRMetaData数组的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1036px;"><h3 id="oh_nativewindow_nativewindowsetmetadataset" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowSetMetaDataSet()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowsetmetadataset" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_NativeWindowSetMetaDataSet</span><span class="hljs-params">(OHNativeWindow *window, <span class="hljs-type">uint32_t</span> sequence, OHHDRMetadataKey key,<span class="hljs-type">int32_t</span> size, <span class="hljs-type">const</span> <span class="hljs-type">uint8_t</span> *metaData)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置OHNativeWindow的元数据集。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 9</p> <p><strong>废弃版本：</strong> 从API version 10开始废弃，不再提供替代接口。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t sequence</td> <td class="cellrowborder" width="50%">生产缓冲区的序列。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#ohhdrmetadatakey">OHHDRMetadataKey</a> key</td> <td class="cellrowborder" width="50%">枚举值OHHDRMetadataKey。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t size</td> <td class="cellrowborder" width="50%">uint8_t向量的大小。</td> </tr> <tr><td class="cellrowborder" width="50%">metaDate</td> <td class="cellrowborder" width="50%">指向uint8_t向量的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_nativewindow_nativewindowsettunnelhandle" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowSetTunnelHandle()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowsettunnelhandle" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_NativeWindowSetTunnelHandle</span><span class="hljs-params">(OHNativeWindow *window, <span class="hljs-type">const</span> OHExtDataHandle *handle)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置OHNativeWindow的TunnelHandle。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 9</p> <p><strong>废弃版本：</strong> 从API version 10开始废弃，不再提供替代接口。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-ohextdatahandle">OHExtDataHandle</a> *handle</td> <td class="cellrowborder" width="50%">指向OHExtDataHandle的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 943px;"><h3 id="oh_nativewindow_nativewindowattachbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowAttachBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowattachbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NativeWindow_NativeWindowAttachBuffer</span>(OHNativeWindow *window, OHNativeWindowBuffer *buffer)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将OHNativeWindowBuffer添加进OHNativeWindow中。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowdetachbuffer">OH_NativeWindow_NativeWindowDetachBuffer</a>接口配合使用，否则会存在内存管理混乱问题。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindowbuffer">OHNativeWindowBuffer</a> *buffer</td> <td class="cellrowborder" width="50%">一个OHNativeWindowBuffer的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.31.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 895px;"><h3 id="oh_nativewindow_nativewindowdetachbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowDetachBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowdetachbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NativeWindow_NativeWindowDetachBuffer</span>(OHNativeWindow *window, OHNativeWindowBuffer *buffer)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将OHNativeWindowBuffer从OHNativeWindow中分离。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindowbuffer">OHNativeWindowBuffer</a> *buffer</td> <td class="cellrowborder" width="50%">一个OHNativeWindowBuffer的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 895px;"><h3 id="oh_nativewindow_getsurfaceid" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_GetSurfaceId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_getsurfaceid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_GetSurfaceId</span><span class="hljs-params">(OHNativeWindow *window, <span class="hljs-type">uint64_t</span> *surfaceId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过OHNativeWindow获取对应的surfaceId。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint64_t *surfaceId</td> <td class="cellrowborder" width="50%">一个surface对应ID的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1063px;"><h3 id="oh_nativewindow_createnativewindowfromsurfaceid" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_CreateNativeWindowFromSurfaceId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_createnativewindowfromsurfaceid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_CreateNativeWindowFromSurfaceId</span><span class="hljs-params">(<span class="hljs-type">uint64_t</span> surfaceId, OHNativeWindow **window)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过surfaceId创建对应的OHNativeWindow。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_destroynativewindow">OH_NativeWindow_DestroyNativeWindow</a>接口配合使用，否则会存在内存泄露。</p> <p>如果存在并发释放OHNativeWindow的情况，需要通过<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativeobjectreference">OH_NativeWindow_NativeObjectReference</a>和<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativeobjectunreference">OH_NativeWindow_NativeObjectUnreference</a>对OHNativeWindow进行引用计数加一和减一。</p> <p>通过surfaceId获取的surface需要是在本进程中创建的，不能跨进程获取surface。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.12.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.34.12.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t surfaceId</td> <td class="cellrowborder" width="50%">一个surface对应的ID。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> **window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的二级指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.14.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.34.14.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 895px;"><h3 id="oh_nativewindow_nativewindowsetscalingmodev2" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_NativeWindowSetScalingModeV2()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_nativewindowsetscalingmodev2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NativeWindow_NativeWindowSetScalingModeV2</span>(OHNativeWindow* window, OHScalingModeV2 scalingMode)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置OHNativeWindow的渲染缩放模式。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>* window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#ohscalingmodev2">OHScalingModeV2</a> scalingMode</td> <td class="cellrowborder" width="50%">一个OHScalingModeV2类型的枚举值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1077px;"><h3 id="oh_nativewindow_getlastflushedbufferv2" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_GetLastFlushedBufferV2()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_getlastflushedbufferv2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_GetLastFlushedBufferV2</span><span class="hljs-params">(OHNativeWindow *window, OHNativeWindowBuffer **buffer,<span class="hljs-type">int</span> *fenceFd, <span class="hljs-type">float</span> matrix[<span class="hljs-number">16</span>])</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从OHNativeWindow获取上次送回到buffer队列中的OHNativeWindowBuffer,与OH_NativeWindow_GetLastFlushedBuffer的差异在于matrix不同。</p> <p>本接口需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativeobjectunreference">OH_NativeWindow_NativeObjectUnreference</a>接口配合使用，否则会存在内存泄露。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个OHNativeWindow的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindowbuffer">OHNativeWindowBuffer</a> **buffer</td> <td class="cellrowborder" width="50%">一个OHNativeWindowBuffer结构体指针的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int *fenceFd</td> <td class="cellrowborder" width="50%">一个文件描述符的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">matrix</td> <td class="cellrowborder" width="50%">表示检索到的44变换矩阵。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.36.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 861px;"><h3 id="oh_nativewindow_setbufferhold" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_SetBufferHold()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_setbufferhold" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_NativeWindow_SetBufferHold</span><span class="hljs-params">(OHNativeWindow *window)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>启用单帧缓存机制，通过提前缓存一帧buffer并延迟显示，用于平滑帧率波动。</p> <p>启用后，系统会预留一帧buffer作为缓冲，该帧会延迟一个显示周期才上屏。当后续渲染出现超长帧或帧间不均匀时，可使用该缓存帧填补空白，减少画面卡顿。</p> <p>建议在预知即将出现渲染高峰前提前调用，以建立缓冲保护；缓存仅生效一次，被消费后自动失效，如需持续保护需重新调用本接口。</p> <p>适用于游戏、动画、复杂UI渲染等对帧率稳定性要求较高的场景，但会引入一帧显示延迟（比如，在60hz的刷新率下，会延迟16.6ms上屏显示），不建议在高交互实时场景中使用。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.12.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.37.12.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 895px;"><h3 id="oh_nativewindow_writetoparcel" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_WriteToParcel()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_writetoparcel" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NativeWindow_WriteToParcel</span>(OHNativeWindow *window, OHIPCParcel *parcel)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将窗口对象写入IPC序列化对象中。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-ohipcparcel">OHIPCParcel</a> *parcel</td> <td class="cellrowborder" width="50%">一个指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-ohipcparcel">OHIPCParcel</a>的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 967px;"><h3 id="oh_nativewindow_readfromparcel" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_ReadFromParcel()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_readfromparcel" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NativeWindow_ReadFromParcel</span>(OHIPCParcel *parcel, OHNativeWindow **window)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从IPC序列化对象中读取窗口对象。</p> <p>本接口将会创建一个OHNativeWindow，当窗口对象使用完，开发者需要与<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_destroynativewindow">OH_NativeWindow_DestroyNativeWindow</a>接口配合使用，否则会存在内存泄漏。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-ohipcparcel">OHIPCParcel</a> *parcel</td> <td class="cellrowborder" width="50%">一个指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-ohipcparcel">OHIPCParcel</a>的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> **window</td> <td class="cellrowborder" width="50%">一个指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>的结构体实例的二级指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 919px;"><h3 id="oh_nativewindow_setcolorspace" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_SetColorSpace()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_setcolorspace" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NativeWindow_SetColorSpace</span>(OHNativeWindow *window, OH_NativeBuffer_ColorSpace colorSpace)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>为OHNativeWindow设置颜色空间属性。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-buffer-common-h#oh_nativebuffer_colorspace">OH_NativeBuffer_ColorSpace</a> colorSpace</td> <td class="cellrowborder" width="50%">为OHNativeWindow设置的颜色空间，其值从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-buffer-common-h#oh_nativebuffer_colorspace">OH_NativeBuffer_ColorSpace</a>获取。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 919px;"><h3 id="oh_nativewindow_getcolorspace" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_GetColorSpace()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_getcolorspace" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NativeWindow_GetColorSpace</span>(OHNativeWindow *window, OH_NativeBuffer_ColorSpace *colorSpace)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取OHNativeWindow颜色空间属性。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-buffer-common-h#oh_nativebuffer_colorspace">OH_NativeBuffer_ColorSpace</a> *colorSpace</td> <td class="cellrowborder" width="50%">为OHNativeWindow设置的颜色空间，其值从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-buffer-common-h#oh_nativebuffer_colorspace">OH_NativeBuffer_ColorSpace</a>获取。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1053px;"><h3 id="oh_nativewindow_setmetadatavalue" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_SetMetadataValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_setmetadatavalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_SetMetadataValue</span><span class="hljs-params">(OHNativeWindow *window, OH_NativeBuffer_MetadataKey metadataKey,<span class="hljs-type">int32_t</span> size, <span class="hljs-type">uint8_t</span> *metadata)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>为OHNativeWindow设置元数据属性值。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-buffer-common-h#oh_nativebuffer_metadatakey">OH_NativeBuffer_MetadataKey</a> metadataKey</td> <td class="cellrowborder" width="50%">Window的元数据类型，其值从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-buffer-common-h#oh_nativebuffer_metadatakey">OH_NativeBuffer_MetadataKey</a>获取。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t size</td> <td class="cellrowborder" width="50%">uint8_t向量的大小，其取值范围见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-buffer-common-h#oh_nativebuffer_metadatakey">OH_NativeBuffer_MetadataKey</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">metaDate</td> <td class="cellrowborder" width="50%">指向uint8_t向量的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1053px;"><h3 id="oh_nativewindow_getmetadatavalue" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_GetMetadataValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_getmetadatavalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NativeWindow_GetMetadataValue</span><span class="hljs-params">(OHNativeWindow *window, OH_NativeBuffer_MetadataKey metadataKey,<span class="hljs-type">int32_t</span> *size, <span class="hljs-type">uint8_t</span> **metadata)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取OHNativeWindow元数据属性值。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>的结构体实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-buffer-common-h#oh_nativebuffer_metadatakey">OH_NativeBuffer_MetadataKey</a> metadataKey</td> <td class="cellrowborder" width="50%">Window的元数据类型，其值从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-buffer-common-h#oh_nativebuffer_metadatakey">OH_NativeBuffer_MetadataKey</a>获取。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t *size</td> <td class="cellrowborder" width="50%">uint8_t向量的大小，其取值范围见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-buffer-common-h#oh_nativebuffer_metadatakey">OH_NativeBuffer_MetadataKey</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">metaDate</td> <td class="cellrowborder" width="50%">指向uint8_t向量的二级指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.43.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.43.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 888px;"><h3 id="oh_nativewindow_cleancache" device-type="phone,2in1,tablet,wearable,tv">OH_NativeWindow_CleanCache()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativewindow_cleancache" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tar-c106="" class="highlight-div"><div _ngcontent-tar-c106="" class="highlight-div-header"><div _ngcontent-tar-c106="" class="highlight-div-header-left"><div _ngcontent-tar-c106="" class="handle-button expand-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tar-c106="" class="highlight-div-header-right"><div _ngcontent-tar-c106="" class="handle-button ai-button"></div><div _ngcontent-tar-c106="" class="handle-button line-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tar-c106="" class="handle-button theme-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tar-c106="" class="handle-button copy-button"><div _ngcontent-tar-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tar-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NativeWindow_CleanCache</span>(OHNativeWindow *window)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>清理OHNativeWindow中的OHNativeWindowBuffer缓存。</p> <p>使用该接口清理缓存前，需确保已通过<a href="/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_nativewindowrequestbuffer">OH_NativeWindow_NativeWindowRequestBuffer</a>接口成功申请OHNativeWindowBuffer。</p> <p>本接口为非线程安全类型接口。</p> <p><strong>系统能力：</strong> SystemCapability.Graphic.Graphic2D.NativeWindow</p> <p><strong>起始版本：</strong> 19</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td> <td class="cellrowborder" width="50%">一个指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a>的结构体实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.44.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.44.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%">返回值为0表示执行成功，其他返回值可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-graphic-error-code-h#ohnativeerrorcode">OHNativeErrorCode</a>。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>