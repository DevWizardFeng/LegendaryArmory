<h1 _ngcontent-pwi-c119="" class="doc-title ng-star-inserted" title="fileGuard (文件分级管控)"> fileGuard (文件分级管控) </h1>

<div _ngcontent-pwi-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>文件分级管控服务为企业安全管控类<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/mdm-kit" target="_blank">MDM</a>应用提供统一企业关键信息资产（KIA）文件的识别和外发管控能力，保证企业数据安全。功能包括扫描全盘目录下的文档，识别KIA文件，并管控KIA文件通过网络发送到非可信网段。</p>    <p>仅供企业安全管控类MDM应用申请权限后使用。</p>    <p><strong>起始版本：</strong>4.0.0(10)</p>    <div class="tiledSection">     <h2 id="section16609101116259" device-type="2in1">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileGuard } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.EnterpriseDataGuardKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1753862116813" device-type="2in1">CommonDirScanType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1753862116813" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>公共目录扫描类型枚举。</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.1" width="28.189999999999998%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.2" width="21.23%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.3" width="50.580000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="28.189999999999998%">          <p>MEDIA_ONLY</p></td>         <td class="cellrowborder" width="21.23%">          <p>0</p></td>         <td class="cellrowborder" width="50.580000000000005%">          <p>表示媒体库目录。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.189999999999998%">          <p>MEDIA_AND_SANDBOX</p></td>         <td class="cellrowborder" width="21.23%">          <p>1</p></td>         <td class="cellrowborder" width="50.580000000000005%">          <p>表示媒体库和沙箱目录。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section36136612415" device-type="2in1">SecurityLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section36136612415" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>文件安全等级枚举。</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.1" width="28.24%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.2" width="21.349999999999998%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.3" width="50.41%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="28.24%">          <p>DEFAULT</p></td>         <td class="cellrowborder" width="21.349999999999998%">          <p>-1</p></td>         <td class="cellrowborder" width="50.41%">          <p>表示文件安全等级不生效。</p>          <p><strong>起始版本：</strong>5.1.1(19)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.24%">          <p>EXTERNAL</p></td>         <td class="cellrowborder" width="21.349999999999998%">          <p>0</p></td>         <td class="cellrowborder" width="50.41%">          <p>表示文件安全等级为外部公开。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.24%">          <p>INTERNAL</p></td>         <td class="cellrowborder" width="21.349999999999998%">          <p>1</p></td>         <td class="cellrowborder" width="50.41%">          <p>表示文件安全等级为内部公开。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.24%">          <p>SECRET</p></td>         <td class="cellrowborder" width="21.349999999999998%">          <p>2</p></td>         <td class="cellrowborder" width="50.41%">          <p>表示文件安全等级为秘密。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.24%">          <p>CONFIDENTIAL</p></td>         <td class="cellrowborder" width="21.349999999999998%">          <p>3</p></td>         <td class="cellrowborder" width="50.41%">          <p>表示文件安全等级为机密。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="28.24%">          <p>TOP_SECRET</p></td>         <td class="cellrowborder" width="21.349999999999998%">          <p>4</p></td>         <td class="cellrowborder" width="50.41%">          <p>表示文件安全等级为绝密。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1026911633210" device-type="2in1">FilePathInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1026911633210" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>表示文件路径信息。</p>    </div>    <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>    <p><strong>起始版本：</strong>4.0.0(10)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.6.1.1" width="20%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.6.1.2" width="20%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.6.1.3" width="20%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.6.1.4" width="15.86%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.10.1.6.1.5" width="24.14%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="20%">         <p>absolutePath</p></td>        <td class="cellrowborder" width="20%">         <p>string</p></td>        <td class="cellrowborder" width="20%">         <p>否</p></td>        <td class="cellrowborder" width="15.86%">         <p>否</p></td>        <td class="cellrowborder" width="24.14%">         <p>表示文件绝对路径。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="20%">         <p>uri</p></td>        <td class="cellrowborder" width="20%">         <p>string</p></td>        <td class="cellrowborder" width="20%">         <p>否</p></td>        <td class="cellrowborder" width="15.86%">         <p>否</p></td>        <td class="cellrowborder" width="24.14%">         <p>表示文件URI。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection">     <h2 id="section118461622113311" device-type="2in1">FileTagInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section118461622113311" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>表示文件的标签属性信息。</p>    </div>    <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>    <p><strong>起始版本：</strong>4.0.0(10)</p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.14.1.6.1.1" width="19.98%">         <p>名称</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.14.1.6.1.2" width="20.02%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.14.1.6.1.3" width="20%">         <p>只读</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.14.1.6.1.4" width="15.85%">         <p>可选</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.14.1.6.1.5" width="24.15%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="19.98%">         <p>securityLevel</p></td>        <td class="cellrowborder" width="20.02%">         <p>number</p></td>        <td class="cellrowborder" width="20%">         <p>否</p></td>        <td class="cellrowborder" width="15.85%">         <p>否</p></td>        <td class="cellrowborder" width="24.15%">         <p>表示文件安全等级，其值参考<a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section36136612415">SecurityLevel</a>枚举类型。</p></td>       </tr>       <tr>        <td class="cellrowborder" width="19.98%">         <p>tag</p></td>        <td class="cellrowborder" width="20.02%">         <p>string</p></td>        <td class="cellrowborder" width="20%">         <p>否</p></td>        <td class="cellrowborder" width="15.85%">         <p>否</p></td>        <td class="cellrowborder" width="24.15%">         <p>表示文件标签信息。</p></td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection">     <h2 id="section1747318273273" device-type="2in1">ScanFileCallback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1747318273273" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>表示扫描结果回调类。</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>    </div>    <div class="tiledSection">     <h3 id="section112591430803" device-type="2in1" class="firsth2">onReceiveFileList<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section112591430803" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>onReceiveFileList(files: Array&lt;string&gt;): void</p>     <p>文件目录扫描结果回调函数。</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>files</p></td>         <td class="cellrowborder" width="30.8%">          <p>Array&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>表示扫描文件的绝对路径列表。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">onReceiveFileList</span>: <span class="hljs-function">(<span class="hljs-params">files: <span class="hljs-built_in">string</span>[]</span>) =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">(<span class="hljs-params">files: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>  files.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting file: <span class="hljs-subst">${value}</span>.`</span>);</li><li>  })</li><li>};</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section126781481702" device-type="2in1">onTaskCompleted<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section126781481702" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>onTaskCompleted(count: number): void</p>     <p>文件目录扫描完成信息获取回调函数。</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>count</p></td>         <td class="cellrowborder" width="30.8%">          <p>number</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>表示扫描完成后文件的数量。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">onTaskCompleted</span>: <span class="hljs-function">(<span class="hljs-params">count: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">(<span class="hljs-params">count: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting count: <span class="hljs-subst">${count}</span>.`</span>);</li><li>};</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section18457214114215" device-type="2in1">FileGuard<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18457214114215" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>FileGuard类提供了文件分级管控相关接口，包括如下功能：文件目录扫描、标注文件扩展属性、下发文件管控策略等。</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>    </div>    <div class="tiledSection">     <h3 id="section7722142616443" device-type="2in1" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7722142616443" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>constructor()</p>     <p>创建FileGuard对象。</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section5572254110" device-type="2in1">startFileScanTask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5572254110" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>startFileScanTask(type: CommonDirScanType, callback: ScanFileCallback, batchNum?: number): void</p>     <p>启动公共目录文件扫描任务。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section1753862116813">CommonDirScanType</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>公共目录扫描范围。取值：MEDIA_ONLY | MEDIA_AND_SANDBOX。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section1747318273273">ScanFileCallback</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，返回的文件列表和扫描结束通知。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>batchNum</p></td>         <td class="cellrowborder" width="30.8%">          <p>number</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>每次调用回调函数时返回的文件列表数量。取值在1~200间，如果超出此范围，参数设置无效，按照默认每次调用回调函数返回100个文件，直到扫描结束。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">onReceiveFileList</span>: <span class="hljs-function">(<span class="hljs-params">files: <span class="hljs-built_in">string</span>[]</span>) =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">(<span class="hljs-params">files: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting number of files obtained in each callback: <span class="hljs-subst">${files.length}</span>.`</span>);</li><li>  files.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting file: <span class="hljs-subst">${value}</span>.`</span>);</li><li>  })</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">onCompleteScanTask</span>: <span class="hljs-function">(<span class="hljs-params">count: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">(<span class="hljs-params">count: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting count: <span class="hljs-subst">${count}</span>.`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">scanFileCallback</span>: fileGuard.<span class="hljs-property">ScanFileCallback</span> = {</li><li>  <span class="hljs-attr">onReceiveFileList</span>: onReceiveFileList,</li><li>  <span class="hljs-attr">onTaskCompleted</span>: onCompleteScanTask</li><li>};</li><li>guard.<span class="hljs-title function_">startFileScanTask</span>(fileGuard.<span class="hljs-property">CommonDirScanType</span>.<span class="hljs-property">MEDIA_ONLY</span>, scanFileCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section17212835417" device-type="2in1">startFileScanTask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17212835417" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>startFileScanTask(path: string, callback: ScanFileCallback, batchNum?: number): void</p>     <p>启动指定目录文件扫描任务。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的目录子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section1747318273273">ScanFileCallback</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，返回的文件列表和扫描结束通知。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>batchNum</p></td>         <td class="cellrowborder" width="30.8%">          <p>number</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>每次调用回调函数时返回的文件列表数量。取值在1~200间，如果超出此范围，参数设置无效，按照默认每次调用回调函数返回100个文件，直到扫描结束。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/test'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">onReceiveFileList</span>: <span class="hljs-function">(<span class="hljs-params">files: <span class="hljs-built_in">string</span>[]</span>) =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">(<span class="hljs-params">files: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting number of files obtained in each callback: <span class="hljs-subst">${files.length}</span>.`</span>);</li><li>  files.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting file: <span class="hljs-subst">${value}</span>.`</span>);</li><li>  })</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">onCompleteScanTask</span>: <span class="hljs-function">(<span class="hljs-params">count: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span> = <span class="hljs-function">(<span class="hljs-params">count: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting count: <span class="hljs-subst">${count}</span>.`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">scanFileCallback</span>: fileGuard.<span class="hljs-property">ScanFileCallback</span> = {</li><li>  <span class="hljs-attr">onReceiveFileList</span>: onReceiveFileList,</li><li>  <span class="hljs-attr">onTaskCompleted</span>: onCompleteScanTask</li><li>};</li><li>guard.<span class="hljs-title function_">startFileScanTask</span>(path, scanFileCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section132239575117" device-type="2in1">openFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section132239575117" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>openFile(path: string, callback: AsyncCallback&lt;number&gt;): void</p>     <p>打开文件。使用callback异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.3" width="8.84%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.4" width="41.160000000000004%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="8.84%">          <p>是</p></td>         <td class="cellrowborder" width="41.160000000000004%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>AsyncCallback&lt;number&gt;</p></td>         <td class="cellrowborder" width="8.84%">          <p>是</p></td>         <td class="cellrowborder" width="41.160000000000004%">          <p>回调函数，当打开文件成功，err为undefined，data为获取到的文件描述符，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/test/test.txt'</span>;</li><li>guard.<span class="hljs-title function_">openFile</span>(path, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, fd: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to open file. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in opening file. path: <span class="hljs-subst">${path}</span>, fd: <span class="hljs-subst">${fd}</span>.`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section1292915920212" device-type="2in1">openFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1292915920212" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>openFile(path: string): Promise&lt;number&gt;</p>     <p>打开文件。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的绝对路径子集。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;number&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回文件描述符。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/test/test.txt'</span>;</li><li>guard.<span class="hljs-title function_">openFile</span>(path).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">fd: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in opening file. path: <span class="hljs-subst">${path}</span>, fd: <span class="hljs-subst">${fd}</span>.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to open file. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section779510429368" device-type="2in1">openFileWrite<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section779510429368" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>openFileWrite(path: string, callback: AsyncCallback&lt;number&gt;): void</p>     <p>只写模式打开文件。使用callback回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.3" width="8.84%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.4" width="41.160000000000004%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="8.84%">          <p>是</p></td>         <td class="cellrowborder" width="41.160000000000004%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li61091691019" target="_blank">用户的个人数据目录</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>AsyncCallback&lt;number&gt;</p></td>         <td class="cellrowborder" width="8.84%">          <p>是</p></td>         <td class="cellrowborder" width="41.160000000000004%">          <p>回调函数，当打开文件成功，err为undefined，data为获取到的文件描述符，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameter types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/Docs/Documents/test.txt'</span>;</li><li>guard.<span class="hljs-title function_">openFileWrite</span>(path, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, fd: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to open file in write-only mode. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in opening file in write-only mode. path: <span class="hljs-subst">${path}</span>, fd: <span class="hljs-subst">${fd}</span>.`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section198141025172920" device-type="2in1">openFileWrite<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section198141025172920" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>openFileWrite(path: string): Promise&lt;number&gt;</p>     <p>只写模式打开文件。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li61091691019" target="_blank">用户的个人数据目录</a>下的绝对路径子集。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="49.94%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50.06%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="49.94%">          <p>Promise&lt;number&gt;</p></td>         <td class="cellrowborder" width="50.06%">          <p>Promise对象，返回文件描述符。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameter types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/Docs/Documents/test.txt'</span>;</li><li>guard.<span class="hljs-title function_">openFileWrite</span>(path).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">fd: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in opening file in write-only mode. path: <span class="hljs-subst">${path}</span>, fd: <span class="hljs-subst">${fd}</span>.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to open file in write-only mode. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section41871252322" device-type="2in1">setFileTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section41871252322" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>setFileTag(path: string, level: SecurityLevel, tag: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>设置文件属性标签。使用callback异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>level</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section36136612415">SecurityLevel</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>文件安全等级（外部公开、内部公开、秘密、机密、绝密）。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>tag</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>文件属性标签，长度不超过65536字节。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>AsyncCallback&lt;void&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，当异步设置文件属性标签成功，err为undefined，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/test/test.txt'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'test'</span>;</li><li>guard.<span class="hljs-title function_">setFileTag</span>(path, fileGuard.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">EXTERNAL</span>, tag, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set file tag. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting file tag.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section8961041532" device-type="2in1">setFileTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section8961041532" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>setFileTag(path: string, level: SecurityLevel, tag: string): Promise&lt;void&gt;</p>     <p>设置文件属性标签。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>level</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section36136612415">SecurityLevel</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>文件安全等级（外部公开、内部公开、秘密、机密、绝密）。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>tag</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>文件属性标签，长度不超过65536字节。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/test/test.txt'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tag</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'test'</span>;</li><li>guard.<span class="hljs-title function_">setFileTag</span>(path, fileGuard.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">EXTERNAL</span>, tag).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting file tag.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set file tag. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section195124201031" device-type="2in1">queryFileTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section195124201031" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>queryFileTag(path: string, callback: AsyncCallback&lt;FileTagInfo&gt;): void</p>     <p>获取文件属性标签。使用callback异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section118461622113311">FileTagInfo</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，返回文件标签信息对象。</p>          <p>回调函数，当异步获取文件属性标签成功，err为undefined，data为获取到的<a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section118461622113311">FileTagInfo</a>，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/test/test.txt'</span>;</li><li>guard.<span class="hljs-title function_">queryFileTag</span>(path, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: fileGuard.FileTagInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query file tag. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying file tag.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section62600419317" device-type="2in1">queryFileTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section62600419317" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>queryFileTag(path: string): Promise&lt;FileTagInfo&gt;</p>     <p>获取文件属性标签。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的绝对路径子集。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section118461622113311">FileTagInfo</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回文件标签信息对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/test/test.txt'</span>;</li><li>guard.<span class="hljs-title function_">queryFileTag</span>(path).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: fileGuard.FileTagInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying file tag.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query file tag. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section10575755137" device-type="2in1">getFileUri<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10575755137" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p class="typescript">getFileUri(path: string, callback: AsyncCallback&lt;FilePathInfo&gt;): void</p>     <p>获取文件URI。使用callback异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li61091691019" target="_blank">用户的个人数据目录</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section1026911633210">FilePathInfo</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数。当获取文件URI成功，err为undefined，data为获取到的<a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section1026911633210">FilePathInfo</a>；否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p class="typescript">以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.30.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/test/test.txt'</span>;</li><li>guard.<span class="hljs-title function_">getFileUri</span>(path, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: fileGuard.FilePathInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get file uri. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  }<span class="hljs-keyword">else</span>{</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting file uri.`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section1297191246" device-type="2in1">getFileUri<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1297191246" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>getFileUri(path: string): Promise&lt;FilePathInfo&gt;</p>     <p>获取文件URI。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li61091691019" target="_blank">用户的个人数据目录</a>下的绝对路径子集。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/dataguard-fileguard#section1026911633210">FilePathInfo</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回文件绝对路径和URI。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.31.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/test/test.txt'</span>;</li><li>guard.<span class="hljs-title function_">getFileUri</span>(path).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: fileGuard.FilePathInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting file uri.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get file uri. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section102212058545" device-type="2in1">deleteFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section102212058545" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>deleteFile(path: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>删除扫描范围内的文件。使用callback异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li61091691019" target="_blank">用户的个人数据目录</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>AsyncCallback&lt;void&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，当异步删除文件成功，err为undefined，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong class="typescript">错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/Docs/Documents/test.txt'</span>;</li><li>guard.<span class="hljs-title function_">deleteFile</span>(path, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete file. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  }<span class="hljs-keyword">else</span>{</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in deleting file.`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section869414101554" device-type="2in1">deleteFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section869414101554" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>deleteFile(path: string): Promise&lt;void&gt;</p>     <p>删除扫描范围内的文件。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li61091691019" target="_blank">用户的个人数据目录</a>下的绝对路径子集。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.33.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/Docs/Documents/test.txt'</span>;</li><li>guard.<span class="hljs-title function_">deleteFile</span>(path).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in deleting file.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete file. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section068912217520" device-type="2in1">updatePolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section068912217520" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>updatePolicy(policy: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>更新安全管控策略。使用callback异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.SET_FILE_GUARD_POLICY</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p class="typescript"><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>policy</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>安全管控策略。</p>          <p>管控策略字段说明：</p>          <p>net_intercept_toggle：网络拦截开关。0不拦截，1拦截，默认值为0。</p>          <p>boundary: 大网网段列表。</p>          <p>netsegment_trustlist: 可信网段列表。</p>          <p>netsegment_blocklist: 非可信网段列表。</p>          <p>default_policy: 默认网段策略（大网网段内，在可信网段和非可信网段之外的其他网段。0不拦截，1拦截，默认值为0）。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>AsyncCallback&lt;void&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，当异步更新安全管控策略成功，err为undefined，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.2" width="50%">          <p class="typescript">错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">policy</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'{'</span> +</li><li>  <span class="hljs-string">'"net_intercept_toggle":0,'</span> +</li><li>  <span class="hljs-string">'"boundary":["10.10.0.0-10.10.255.255.255","0.0.0.0-1.1.1.1"],'</span> +</li><li>  <span class="hljs-string">'"netsegment_trustlist":["10.10.0.0-10.10.255.255.255"],'</span> +</li><li>  <span class="hljs-string">'"netsegment_blocklist":["0.0.0.0-1.1.1.1"],'</span> +</li><li>  <span class="hljs-string">'"default_policy":0'</span> +</li><li>  <span class="hljs-string">'}'</span>;</li><li>guard.<span class="hljs-title function_">updatePolicy</span>(policy, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in updating policy.`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section16264735355" device-type="2in1">updatePolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16264735355" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>updatePolicy(policy: string): Promise&lt;void&gt;</p>     <p>更新安全管控策略。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.SET_FILE_GUARD_POLICY</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>policy</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>安全管控策略。</p>          <p>管控策略字段说明：</p>          <p>net_intercept_toggle：网络拦截开关。0不拦截，1拦截，默认值为0。</p>          <p>boundary: 大网网段列表。</p>          <p>netsegment_trustlist: 可信网段列表。</p>          <p>netsegment_blocklist: 非可信网段列表。</p>          <p>default_policy: 默认网段策略（大网网段内，在可信网段和非可信网段之外的其他网段。0不拦截，1拦截，默认值为0）。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.35.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">policy</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'{'</span> +</li><li>  <span class="hljs-string">'"net_intercept_toggle":0,'</span> +</li><li>  <span class="hljs-string">'"boundary":["10.10.0.0-10.10.255.255.255","0.0.0.0-1.1.1.1"],'</span> +</li><li>  <span class="hljs-string">'"netsegment_trustlist":["10.10.0.0-10.10.255.255.255"],'</span> +</li><li>  <span class="hljs-string">'"netsegment_blocklist":["0.0.0.0-1.1.1.1"],'</span> +</li><li>  <span class="hljs-string">'"default_policy":0'</span> +</li><li>  <span class="hljs-string">'}'</span>;</li><li>guard.<span class="hljs-title function_">updatePolicy</span>(policy).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in updating policy.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section276855317514" device-type="2in1">setKiaFilelist<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section276855317514" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>setKiaFilelist(filelist: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>设置KIA文件列表。使用callback异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>filelist</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的KIA文件绝对路径列表。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>AsyncCallback&lt;void&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，当异步设置KIA文件列表成功，err为undefined，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">fileListStr</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'{"kia_filelist":["/data/service/el2/100/hmdfs/account/files/Documents/Desktop/aaa.docx","/data/service/el2/100/hmdfs/account/files/Documents/Desktop/bbb.docx"]}'</span>;</li><li>guard.<span class="hljs-title function_">setKiaFilelist</span>(fileListStr, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set the list of KIA file. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting the list of KIA file.`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section920033180" device-type="2in1">setKiaFilelist<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section920033180" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>setKiaFilelist(filelist: string): Promise&lt;void&gt;</p>     <p>设置KIA文件列表。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>filelist</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的KIA文件绝对路径列表。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.2" width="50%">          <p class="typescript">说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.37.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">fileListStr</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'{"kia_filelist":["/data/service/el2/100/hmdfs/account/files/Documents/Desktop/aaa.docx","/data/service/el2/100/hmdfs/account/files/Documents/Desktop/bbb.docx"]}'</span>;</li><li>guard.<span class="hljs-title function_">setKiaFilelist</span>(fileListStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting the list of KIA file.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set the list of KIA file. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section1970915372527" device-type="2in1">on('kiaCopy')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1970915372527" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>on(type: 'kiaCopy', callback: Callback&lt;string&gt;): void</p>     <p>订阅KIA文件拷贝事件。使用callback回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.1" width="19.18%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.2" width="30.819999999999997%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.18%">          <p>type</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>'kiaCopy'：固定取值，表示监听KIA文件拷贝事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.18%">          <p>callback</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>Callback&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，返回KIA文件拷贝事件。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">onKiaCopyCallback</span>(<span class="hljs-params">eventData: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in receiving eventData: <span class="hljs-subst">${eventData}</span>.`</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  guard.<span class="hljs-title function_">on</span>(<span class="hljs-string">'kiaCopy'</span>, onKiaCopyCallback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to listen the kia file copy event. Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section17735575217" device-type="2in1">off('kiaCopy')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17735575217" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>off(type: 'kiaCopy', callback?: Callback&lt;string&gt;): void</p>     <p>取消订阅KIA文件拷贝事件。使用callback回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.1" width="19.18%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.2" width="30.819999999999997%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.18%">          <p>type</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>'kiaCopy'：固定取值，表示取消监听KIA文件拷贝事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.18%">          <p>callback</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>Callback&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，返回KIA文件拷贝信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">offKiaCopyCallback</span>(<span class="hljs-params">eventData: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in receiving eventData: <span class="hljs-subst">${eventData}</span>.`</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  guard.<span class="hljs-title function_">off</span>(<span class="hljs-string">'kiaCopy'</span>, offKiaCopyCallback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to cancel listen the KIA file copy event. Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section35573470434" device-type="2in1">on('kiaRename')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section35573470434" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>on(type: 'kiaRename', callback: Callback&lt;string&gt;): void</p>     <p>订阅KIA文件重命名事件。使用callback回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.1" width="19.18%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.2" width="30.819999999999997%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.18%">          <p>type</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>'kiaRename'：固定取值，表示监听KIA文件重命名事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.18%">          <p>callback</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>Callback&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，返回KIA文件重命名事件。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">onKiaRenameCallback</span>(<span class="hljs-params">eventData: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in receiving eventData: <span class="hljs-subst">${eventData}</span>.`</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  guard.<span class="hljs-title function_">on</span>(<span class="hljs-string">'kiaRename'</span>, onKiaRenameCallback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to listen the KIA file rename event. Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section35611847134314" device-type="2in1">off('kiaRename')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section35611847134314" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>off(type: 'kiaRename', callback?: Callback&lt;string&gt;): void</p>     <p>取消订阅KIA文件重命名事件。使用callback回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.1" width="19.18%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.2" width="30.819999999999997%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.18%">          <p>type</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>'kiaRename'：固定取值，表示取消监听KIA文件重命名事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.18%">          <p>callback</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>Callback&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，返回KIA文件重命名信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">offKiaRenameCallback</span>(<span class="hljs-params">eventData: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in receiving eventData: <span class="hljs-subst">${eventData}</span>.`</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  guard.<span class="hljs-title function_">off</span>(<span class="hljs-string">'kiaRename'</span>, offKiaRenameCallback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to cancel listen the KIA file rename event. Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section10111185510433" device-type="2in1">on('kiaCompress')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10111185510433" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>on(type: 'kiaCompress', callback: Callback&lt;string&gt;): void</p>     <p>订阅KIA文件压缩事件。使用callback回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.1" width="19.18%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.2" width="30.819999999999997%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.18%">          <p>type</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>'kiaCompress'：固定取值，表示监听KIA文件压缩事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.18%">          <p>callback</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>Callback&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，返回KIA文件压缩事件。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">onKiaCompressCallback</span>(<span class="hljs-params">eventData: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in receiving eventData: <span class="hljs-subst">${eventData}</span>.`</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  guard.<span class="hljs-title function_">on</span>(<span class="hljs-string">'kiaCompress'</span>, onKiaCompressCallback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to listen the KIA file compress event. Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section5115755104315" device-type="2in1">off('kiaCompress')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5115755104315" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>off(type: 'kiaCompress', callback?: Callback&lt;string&gt;): void</p>     <p>取消订阅KIA文件压缩事件。使用callback回调。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.1" width="19.18%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.2" width="30.819999999999997%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.18%">          <p>type</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>'kiaCompress'：固定取值，表示取消监听KIA文件压缩事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.18%">          <p>callback</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>Callback&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，返回KIA文件压缩信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.43.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">offKiaCompressCallback</span>(<span class="hljs-params">eventData: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in receiving eventData: <span class="hljs-subst">${eventData}</span>.`</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  guard.<span class="hljs-title function_">off</span>(<span class="hljs-string">'kiaCompress'</span>, offKiaCompressCallback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to cancel listen the KIA file compress event. Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section7932161212533" device-type="2in1">setKiaWatermarkImage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7932161212533" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>setKiaWatermarkImage(image: Uint8Array, info: string): Promise&lt;void&gt;</p>     <p>设置KIA文件水印图片。</p>     <p><strong>需要权限：</strong>ohos.permission.SET_FILE_GUARD_POLICY</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.1" width="19.18%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.2" width="30.819999999999997%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.18%">          <p>image</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>Uint8Array</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>水印图片。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.18%">          <p>info</p></td>         <td class="cellrowborder" width="30.819999999999997%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>水印附加信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.44.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">testSetKiaWaterMarkImage</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">imagePath</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/Docs/Documents/1.png'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fd</span>: <span class="hljs-built_in">number</span> = <span class="hljs-keyword">await</span> guard.<span class="hljs-title function_">openFile</span>(imagePath);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">stat</span>: fs.<span class="hljs-property">Stat</span> = fs.<span class="hljs-title function_">statSync</span>(fd);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">buffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(stat.<span class="hljs-property">size</span>);</li><li>    fs.<span class="hljs-title function_">readSync</span>(fd, buffer);</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">image</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">info</span>: <span class="hljs-built_in">string</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toLocaleString</span>();</li><li>    guard.<span class="hljs-title function_">setKiaWatermarkImage</span>(image, info).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting the watermark image for Kia file.`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set the watermark image for Kia file. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>    })</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`testSetKiaWaterMarkImage Exception, Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section379716351208" device-type="2in1">setFileCustomTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section379716351208" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>setFileCustomTag(path: string, tagList: Array&lt;string&gt;, callback: AsyncCallback&lt;void&gt;): void</p>     <p>设置文件自定义属性标签。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>tagList</p></td>         <td class="cellrowborder" width="30.8%">          <p>Array&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>标签列表，标签数量不超过5个。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>AsyncCallback&lt;void&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，当异步设置文件自定义属性标签成功，err为undefined，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong class="typescript">错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.45.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001700103</p></td>         <td class="cellrowborder" width="50%">          <p>The path is not exist.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001700104</p></td>         <td class="cellrowborder" width="50%">          <p>The tag list check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/Docs/Documents/test.txt'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tagList</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'tag1'</span>, <span class="hljs-string">'tag2'</span>];</li><li>guard.<span class="hljs-title function_">setFileCustomTag</span>(path, tagList, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set file custom tag. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting file custom tag.`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section123482527015" device-type="2in1">setFileCustomTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section123482527015" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>setFileCustomTag(path: string, tagList: Array&lt;string&gt;): Promise&lt;void&gt;</p>     <p>设置文件自定义属性标签。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>tagList</p></td>         <td class="cellrowborder" width="30.8%">          <p>Array&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>标签列表，标签数量不超过5个。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.46.10.1.3.1.2" width="50%">          <p class="typescript">说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong class="typescript">错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.46.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001700103</p></td>         <td class="cellrowborder" width="50%">          <p>The path is not exist.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001700104</p></td>         <td class="cellrowborder" width="50%">          <p>The tag list check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/Docs/Documents/test.txt'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tagList</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'tag1'</span>, <span class="hljs-string">'tag2'</span>];</li><li>guard.<span class="hljs-title function_">setFileCustomTag</span>(path, tagList).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting file custom tag.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set file custom tag. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section1510152719118" device-type="2in1">unsetFileCustomTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1510152719118" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>unsetFileCustomTag(path: string, tagList: Array&lt;string&gt;, callback: AsyncCallback&lt;void&gt;): void</p>     <p>取消文件自定义属性标签。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>tagList</p></td>         <td class="cellrowborder" width="30.8%">          <p>Array&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>标签列表，标签数量不超过5个。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>AsyncCallback&lt;void&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数，当异步取消文件自定义属性标签成功，err为undefined，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong class="typescript">错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.47.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001700103</p></td>         <td class="cellrowborder" width="50%">          <p>The path is not exist.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001700104</p></td>         <td class="cellrowborder" width="50%">          <p>The tag list check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/Docs/Documents/test.txt'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tagList</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'tag1'</span>, <span class="hljs-string">'tag2'</span>];</li><li>guard.<span class="hljs-title function_">unsetFileCustomTag</span>(path, tagList, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unset file custom tag. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in unsetting file custom tag.`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section45481034915" device-type="2in1">unsetFileCustomTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section45481034915" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>unsetFileCustomTag(path: string, tagList: Array&lt;string&gt;): Promise&lt;void&gt;</p>     <p>取消文件自定义标签。</p>     <p><strong>需要权限：</strong>ohos.permission.FILE_GUARD_MANAGER</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.FileGuard</p>     <p><strong>起始版本：</strong>5.1.1(19)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>path</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataguard-introduction#li1475101851010" target="_blank">默认路径范围</a>下的绝对路径子集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>tagList</p></td>         <td class="cellrowborder" width="30.8%">          <p>Array&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>标签列表，标签数量不超过5个。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.48.10.1.3.1.2" width="50%">          <p class="typescript">说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong class="typescript">错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.48.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001700103</p></td>         <td class="cellrowborder" width="50%">          <p>The path is not exist.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001700104</p></td>         <td class="cellrowborder" width="50%">          <p>The tag list check failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-pwi-c106="" class="highlight-div"><div _ngcontent-pwi-c106="" class="highlight-div-header"><div _ngcontent-pwi-c106="" class="highlight-div-header-left"><div _ngcontent-pwi-c106="" class="handle-button expand-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-pwi-c106="" class="highlight-div-header-right"><div _ngcontent-pwi-c106="" class="handle-button ai-button"></div><div _ngcontent-pwi-c106="" class="handle-button line-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-pwi-c106="" class="handle-button theme-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-pwi-c106="" class="handle-button copy-button"><div _ngcontent-pwi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-pwi-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">guard</span>: fileGuard.<span class="hljs-property">FileGuard</span> = <span class="hljs-keyword">new</span> fileGuard.<span class="hljs-title class_">FileGuard</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/service/el2/100/hmdfs/account/files/Docs/Documents/test.txt'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tagList</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">'tag1'</span>, <span class="hljs-string">'tag2'</span>];</li><li>guard.<span class="hljs-title function_">unsetFileCustomTag</span>(path, tagList).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in unsetting file custom tag.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unset file custom tag. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li></ol></pre></div></div>    </div>   </div>   <div></div></div>