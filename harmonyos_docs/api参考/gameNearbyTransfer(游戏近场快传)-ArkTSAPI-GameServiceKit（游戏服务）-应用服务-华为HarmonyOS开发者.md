<h1 _ngcontent-kfo-c119="" class="doc-title ng-star-inserted" title="gameNearbyTransfer(游戏近场快传)"> gameNearbyTransfer(游戏近场快传) </h1>

<div _ngcontent-kfo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供接入Game Service Kit的游戏近场快传能力。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="tiledSection"><h2 id="section164051883419" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section164051883419" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gameNearbyTransfer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1033653365917" device-type="phone,2in1,tablet">CreateParameters<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1033653365917" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>创建参数类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.1" width="23.642364236423642%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.2" width="19.621962196219624%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.3" width="9.85098509850985%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.4" width="9.15091509150915%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.5" width="37.733773377337734%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.642364236423642%"><p>moduleName</p> </td> <td class="cellrowborder" width="19.621962196219624%"><p>string</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>模块名。字符长度范围：[1, 1024]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.642364236423642%"><p>abilityName</p> </td> <td class="cellrowborder" width="19.621962196219624%"><p>string</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>Ability名称。字符长度范围：[1, 1024]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.642364236423642%"><p>needShowSystemUI</p> </td> <td class="cellrowborder" width="19.621962196219624%"><p>boolean</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>是否展示系统UI。</p> <ul><li>true：展示</li><li>false：不展示</li></ul> <p>默认为false。</p> </td> </tr> <tr><td class="cellrowborder" width="23.642364236423642%"><p>context</p> </td> <td class="cellrowborder" width="19.621962196219624%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>UIAbility上下文，当needShowSystemUI为true时，该参数必传。</p> </td> </tr> <tr><td class="cellrowborder" width="23.642364236423642%"><p>mode</p> </td> <td class="cellrowborder" width="19.621962196219624%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section133441432193816">Mode</a></p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>接入模式。默认为API模式。</p> <p><strong>起始版本：</strong>6.0.0(20)。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section12288563197" device-type="phone,2in1,tablet">ConnectNotification<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12288563197" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>连接通知类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="23.32%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="19.780000000000005%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="9.870000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="9.310000000000002%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="37.720000000000006%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.32%"><p>connectState</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section13891254145017">ConnectState</a></p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>否</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>连接状态。</p> </td> </tr> <tr><td class="cellrowborder" width="23.32%"><p>message</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>string</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>是</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>连接结果消息。</p> </td> </tr> <tr><td class="cellrowborder" width="23.32%"><p>remoteDeviceName</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>string</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>是</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>远端设备名。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1259101510331" device-type="phone,2in1,tablet">BindParameters<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1259101510331" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>绑定参数类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="23.32%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="19.780000000000005%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="9.870000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="9.310000000000002%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="37.720000000000006%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.32%"><p>deviceId</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>string</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>否</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>设备ID。字符长度范围：[1, 128]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.32%"><p>networkId</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>string</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>否</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>设备网络ID。字符长度范围：[1, 128]。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section12406114523413" device-type="phone,2in1,tablet">NearbyGameDevice<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12406114523413" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>近场快传设备类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="23.32%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="19.780000000000005%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="9.870000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="9.310000000000002%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="37.720000000000006%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.32%"><p>deviceName</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>string</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>否</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>设备名。</p> </td> </tr> <tr><td class="cellrowborder" width="23.32%"><p>deviceId</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>string</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>否</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>设备ID。</p> </td> </tr> <tr><td class="cellrowborder" width="23.32%"><p>networkId</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>string</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>否</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>设备网络ID。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1411541513618" device-type="phone,2in1,tablet">DiscoveryResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1411541513618" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>发现结果类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.1" width="23.662366236623665%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.2" width="19.6019601960196%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.3" width="9.85098509850985%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.4" width="9.15091509150915%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.5" width="37.733773377337734%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.662366236623665%"><p>nearbyGameDevices</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section12406114523413">NearbyGameDevice</a>&gt;</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>发现的设备列表。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section55661711201613" device-type="phone,2in1,tablet">CreateResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section55661711201613" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>创建结果类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.1" width="23.662366236623665%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.2" width="19.6019601960196%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.3" width="9.85098509850985%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.4" width="9.15091509150915%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.5" width="37.733773377337734%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.662366236623665%"><p>localDeviceName</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p>string</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>本端设备名。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section116223815415" device-type="phone,2in1,tablet">TransferNotification<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section116223815415" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>传输通知类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.1" width="23.767623237676233%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.2" width="19.30806919308069%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.3" width="9.979002099790021%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.4" width="9.27907209279072%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.5" width="37.66623337666233%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.767623237676233%"><p>transferState</p> </td> <td class="cellrowborder" width="19.30806919308069%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section1346841562510">TransferState</a></p> </td> <td class="cellrowborder" width="9.979002099790021%"><p>否</p> </td> <td class="cellrowborder" width="9.27907209279072%"><p>否</p> </td> <td class="cellrowborder" width="37.66623337666233%"><p>传输状态。</p> </td> </tr> <tr><td class="cellrowborder" width="23.767623237676233%"><p>transferInfo</p> </td> <td class="cellrowborder" width="19.30806919308069%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section12485171912281">TransferInfo</a></p> </td> <td class="cellrowborder" width="9.979002099790021%"><p>否</p> </td> <td class="cellrowborder" width="9.27907209279072%"><p>否</p> </td> <td class="cellrowborder" width="37.66623337666233%"><p>传输信息。</p> </td> </tr> <tr><td class="cellrowborder" width="23.767623237676233%"><p>fileStoragePath</p> </td> <td class="cellrowborder" width="19.30806919308069%"><p>string</p> </td> <td class="cellrowborder" width="9.979002099790021%"><p>否</p> </td> <td class="cellrowborder" width="9.27907209279072%"><p>是</p> </td> <td class="cellrowborder" width="37.66623337666233%"><p>接收端已接收文件的存储目录沙箱路径，详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory" target="_blank">应用沙箱目录</a>，传输完成后返回。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section3844175954711" device-type="phone,2in1,tablet">FileInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3844175954711" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>文件信息类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.1" width="23.369999999999997%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.2" width="19.67%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.3" width="9.08%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.4" width="10.17%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.5" width="37.71%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.369999999999997%"><p>path</p> </td> <td class="cellrowborder" width="19.67%"><p>string</p> </td> <td class="cellrowborder" width="9.08%"><p>否</p> </td> <td class="cellrowborder" width="10.17%"><p>否</p> </td> <td class="cellrowborder" width="37.71%"><p>文件路径，使用沙箱路径，详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory" target="_blank">应用沙箱目录</a>。字符长度范围：[1, 2048]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.369999999999997%"><p>hash</p> </td> <td class="cellrowborder" width="19.67%"><p>string</p> </td> <td class="cellrowborder" width="9.08%"><p>否</p> </td> <td class="cellrowborder" width="10.17%"><p>是</p> </td> <td class="cellrowborder" width="37.71%"><p>文件hash值。字符长度范围：[0, 256]。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section10841101134814" device-type="phone,2in1,tablet">PackageInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10841101134814" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>包信息类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.1" width="23.342334233423344%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.2" width="19.761976197619763%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.3" width="9.830983098309831%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.4" width="9.520952095209521%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.5" width="37.543754375437544%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.342334233423344%"><p>name</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>string</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>是</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>包名。字符长度范围：[0, 2048]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>version</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>string</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>是</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>版本号，格式自定义。字符长度范围：[0, 256]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>files</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section3844175954711">FileInfo</a>&gt;</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>是</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>文件列表。最多10000条。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>extraData</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>string</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>是</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>扩展数据。字符长度范围：[0, 2048]。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1535311105717" device-type="phone,2in1,tablet">PackageFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1535311105717" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>传输包文件类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.1" width="23.47%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.2" width="19.79%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.3" width="10.13%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.4" width="9.01%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.5" width="37.6%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.47%"><p>srcPath</p> </td> <td class="cellrowborder" width="19.79%"><p>string</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>否</p> </td> <td class="cellrowborder" width="37.6%"><p>源文件路径，为发送端应用沙箱路径，详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory" target="_blank">应用沙箱目录</a>。字符长度范围：[1, 2048]。完整路径。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>destPath</p> </td> <td class="cellrowborder" width="19.79%"><p>string</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>否</p> </td> <td class="cellrowborder" width="37.6%"><p>目标文件路径，为接收端应用沙箱路径，详情请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory" target="_blank">应用沙箱目录</a>。字符长度范围：[1, 2048]。相对路径，完整路径为<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section116223815415">fileStoragePath</a>+destPath。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section138783245711" device-type="phone,2in1,tablet">PackageData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section138783245711" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>传输包数据类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.1" width="23.45%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.2" width="19.63%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.3" width="9.75%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.4" width="9.41%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.5" width="37.76%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.45%"><p>name</p> </td> <td class="cellrowborder" width="19.63%"><p>string</p> </td> <td class="cellrowborder" width="9.75%"><p>否</p> </td> <td class="cellrowborder" width="9.41%"><p>是</p> </td> <td class="cellrowborder" width="37.76%"><p>包名。字符长度范围：[0, 2048]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.45%"><p>version</p> </td> <td class="cellrowborder" width="19.63%"><p>string</p> </td> <td class="cellrowborder" width="9.75%"><p>否</p> </td> <td class="cellrowborder" width="9.41%"><p>是</p> </td> <td class="cellrowborder" width="37.76%"><p>版本号。字符长度范围：[0, 256]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.45%"><p>files</p> </td> <td class="cellrowborder" width="19.63%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section1535311105717">PackageFile</a>&gt;</p> </td> <td class="cellrowborder" width="9.75%"><p>否</p> </td> <td class="cellrowborder" width="9.41%"><p>否</p> </td> <td class="cellrowborder" width="37.76%"><p>传输文件列表。最多10000条。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section2401441273" device-type="phone,2in1,tablet">ReturnResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2401441273" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>返回结果类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.1" width="23.432343234323433%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.2" width="19.63196319631963%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.3" width="9.950995099509951%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.4" width="9.33093309330933%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.5" width="37.65376537653765%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.432343234323433%"><p>code</p> </td> <td class="cellrowborder" width="19.63196319631963%"><p>number</p> </td> <td class="cellrowborder" width="9.950995099509951%"><p>否</p> </td> <td class="cellrowborder" width="9.33093309330933%"><p>否</p> </td> <td class="cellrowborder" width="37.65376537653765%"><p>返回码。具体取值请参考<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section5696144516164">NearbyTransferErrorCode</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="23.432343234323433%"><p>message</p> </td> <td class="cellrowborder" width="19.63196319631963%"><p>string</p> </td> <td class="cellrowborder" width="9.950995099509951%"><p>否</p> </td> <td class="cellrowborder" width="9.33093309330933%"><p>是</p> </td> <td class="cellrowborder" width="37.65376537653765%"><p>返回消息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section18372104173416" device-type="phone,2in1,tablet">PackageInfoResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18372104173416" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>包信息对比结果类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.1" width="23.432343234323433%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.2" width="19.63196319631963%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.3" width="9.950995099509951%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.4" width="9.33093309330933%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.5" width="37.65376537653765%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.432343234323433%"><p>packageInfoResultCode</p> </td> <td class="cellrowborder" width="19.63196319631963%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section247073673213">PackageInfoResultCode</a></p> </td> <td class="cellrowborder" width="9.950995099509951%"><p>否</p> </td> <td class="cellrowborder" width="9.33093309330933%"><p>否</p> </td> <td class="cellrowborder" width="37.65376537653765%"><p>对比结果码值。</p> </td> </tr> <tr><td class="cellrowborder" width="23.432343234323433%"><p>message</p> </td> <td class="cellrowborder" width="19.63196319631963%"><p>string</p> </td> <td class="cellrowborder" width="9.950995099509951%"><p>否</p> </td> <td class="cellrowborder" width="9.33093309330933%"><p>是</p> </td> <td class="cellrowborder" width="37.65376537653765%"><p>对比结果信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section12485171912281" device-type="phone,2in1,tablet">TransferInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12485171912281" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>传输信息类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.1" width="23.662366236623665%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.2" width="19.6019601960196%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.3" width="9.85098509850985%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.4" width="9.15091509150915%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.5" width="37.733773377337734%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.662366236623665%"><p>expectedTime</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p>number</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>传输剩余时间，单位：s。</p> </td> </tr> <tr><td class="cellrowborder" width="23.662366236623665%"><p>transferredPackageSize</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p>number</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>已传输包大小，单位：Byte。</p> </td> </tr> <tr><td class="cellrowborder" width="23.662366236623665%"><p>totalPackageSize</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p>number</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>整包总大小，单位：Byte。</p> </td> </tr> <tr><td class="cellrowborder" width="23.662366236623665%"><p>rate</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p>number</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>传输速率，单位：Byte/s。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section133441432193816" device-type="phone,2in1,tablet">Mode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section133441432193816" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>接入模式枚举对象。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.5.1.4.1.1" width="41.91%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.4.1.2" width="20.880000000000003%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.4.1.3" width="37.21%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="41.91%"><p>API</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>1</p> </td> <td class="cellrowborder" width="37.21%"><p>API模式，即使用游戏近场快传服务接口接入。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>KNOCK</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>2</p> </td> <td class="cellrowborder" width="37.21%"><p>碰一碰模式。详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/knock-share" target="_blank">碰一碰分享</a>。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section13891254145017" device-type="phone,2in1,tablet">ConnectState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13891254145017" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>连接状态枚举对象。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.1" width="41.91%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.2" width="20.880000000000003%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.3" width="37.21%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="41.91%"><p>CONNECTED</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>0</p> </td> <td class="cellrowborder" width="37.21%"><p>连接成功。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>DISCONNECTED</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>1</p> </td> <td class="cellrowborder" width="37.21%"><p>连接断开。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1346841562510" device-type="phone,2in1,tablet">TransferState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1346841562510" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>传输状态枚举对象。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.5.1.4.1.1" width="41.91%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.4.1.2" width="20.880000000000003%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.4.1.3" width="37.21%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="41.91%"><p>SEND_START</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>0</p> </td> <td class="cellrowborder" width="37.21%"><p>准备发送。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>SEND_PROCESS</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>1</p> </td> <td class="cellrowborder" width="37.21%"><p>发送进行。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>SEND_FINISH</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>2</p> </td> <td class="cellrowborder" width="37.21%"><p>发送完成。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>SEND_ERROR</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>3</p> </td> <td class="cellrowborder" width="37.21%"><p>发送错误。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>RECEIVE_START</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>4</p> </td> <td class="cellrowborder" width="37.21%"><p>接收开始。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>RECEIVE_PROCESS</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>5</p> </td> <td class="cellrowborder" width="37.21%"><p>接收进行。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>RECEIVE_FINISH</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>6</p> </td> <td class="cellrowborder" width="37.21%"><p>接收完成。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>RECEIVE_ERROR</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>7</p> </td> <td class="cellrowborder" width="37.21%"><p>接收错误。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section247073673213" device-type="phone,2in1,tablet">PackageInfoResultCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section247073673213" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>包信息对比结果码值枚举对象。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.5.1.4.1.1" width="33.97%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.5.1.4.1.2" width="24.099999999999998%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.5.1.4.1.3" width="41.93%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.97%"><p>ERROR</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>-1</p> </td> <td class="cellrowborder" width="41.93%"><p>对比错误。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>PACKAGE_AVAILABLE_COMPARED</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>0</p> </td> <td class="cellrowborder" width="41.93%"><p>对比后可用。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>PACKAGE_UNAVAILABLE_COMPARED</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1</p> </td> <td class="cellrowborder" width="41.93%"><p>对比后不可用。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section5696144516164" device-type="phone,2in1,tablet">NearbyTransferErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5696144516164" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>错误码类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.6.1.4.1.1" width="33.97%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.4.1.2" width="24.099999999999998%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.4.1.3" width="41.93%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.97%"><p>INTERNAL_ERROR</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1018300001</p> </td> <td class="cellrowborder" width="41.93%"><p>内部通用错误。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>AUTH_FAILED</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1018300002</p> </td> <td class="cellrowborder" width="41.93%"><p>鉴权失败。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>INVALID_REQUEST</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1018300003</p> </td> <td class="cellrowborder" width="41.93%"><p>请求不合法。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>NO_SERVICE_AVAILABLE</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1018300004</p> </td> <td class="cellrowborder" width="41.93%"><p>服务不可用。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>WLAN_BLUETOOTH_MUST_BE_ON</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1018300005</p> </td> <td class="cellrowborder" width="41.93%"><p>WLAN和蓝牙必须同时开启。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>PUBLISH_FAILED</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1018300006</p> </td> <td class="cellrowborder" width="41.93%"><p>发布失败。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>DISCOVERY_FAILED</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1018300007</p> </td> <td class="cellrowborder" width="41.93%"><p>发现失败。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>INVALID_PARAMETER</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1018300008</p> </td> <td class="cellrowborder" width="41.93%"><p>非法参数。</p> <p><strong>起始版本：</strong>6.0.0(20)</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section17453143012584" device-type="phone,2in1,tablet">gameNearbyTransfer.on('connectNotify')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17453143012584" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'connectNotify', callback: Callback&lt;ConnectNotification&gt;): void</p> <p>订阅连接通知事件。使用callback回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>type</p> </td> <td class="cellrowborder" width="19.71%"><p>string</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>监听的事件类型，支持的事件为'connectNotify'，建链操作完成后触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.369999999999997%"><p>callback</p> </td> <td class="cellrowborder" width="19.71%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section12288563197">ConnectNotification</a>&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>回调函数，返回连接通知对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'connectNotify'</span></span><span class="">, </span><span class="">connectNotifyCallBack</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">connectNotifyCallBack</span></span><span class="">(</span><span class=""><span class="hljs-params">callback</span></span><span class=""><span class="hljs-params">: </span></span><span class=""><span class="hljs-params">gameNearbyTransfer</span></span><span class=""><span class="hljs-params">.</span></span><span class=""><span class="hljs-params">ConnectNotification</span></span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">connectState</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section3614173614593" device-type="phone,2in1,tablet">gameNearbyTransfer.off('connectNotify')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3614173614593" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'connectNotify', callback?: Callback&lt;ConnectNotification&gt;): void</p> <p>取消订阅连接通知事件。使用callback回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.7.2.1.5.1.1" width="25.430000000000003%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.2.1.5.1.2" width="21.21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.2.1.5.1.3" width="12.7%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.2.1.5.1.4" width="40.660000000000004%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.430000000000003%"><p>type</p> </td> <td class="cellrowborder" width="21.21%"><p>string</p> </td> <td class="cellrowborder" width="12.7%"><p>是</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>监听的事件类型，支持的事件为'connectNotify'，建链操作完成后触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.430000000000003%"><p>callback</p> </td> <td class="cellrowborder" width="21.21%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section12288563197">ConnectNotification</a>&gt;</p> </td> <td class="cellrowborder" width="12.7%"><p>否</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>回调函数，返回连接通知对象。</p> <p>如果该参数不为空，则取消当前callback订阅。如果该参数为空，则取消'connectNotify'事件的所有callback订阅。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">off</span></span><span class="">(</span><span class=""><span class="hljs-string">'connectNotify'</span></span><span class="">, </span><span class="">connectNotifyCallBack</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">connectNotifyCallBack</span></span><span class="">(</span><span class=""><span class="hljs-params">callback</span></span><span class=""><span class="hljs-params">: </span></span><span class=""><span class="hljs-params">gameNearbyTransfer</span></span><span class=""><span class="hljs-params">.</span></span><span class=""><span class="hljs-params">ConnectNotification</span></span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">connectState</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section766518402463" device-type="phone,2in1,tablet">gameNearbyTransfer.on('discovery')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section766518402463" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'discovery', callback: Callback&lt;DiscoveryResult&gt;): void</p> <p>订阅发现结果事件。使用callback回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>type</p> </td> <td class="cellrowborder" width="19.71%"><p>string</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>监听的事件类型，支持的事件为'discovery'，发现设备操作完成后触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.369999999999997%"><p>callback</p> </td> <td class="cellrowborder" width="19.71%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section1411541513618">DiscoveryResult</a>&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>回调函数，返回发现结果对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300008</p> </td> <td class="cellrowborder" width="50%"><p>Invalid parameter.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'discovery'</span></span><span class="">, </span><span class="">discoveryCallBack</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">discoveryCallBack</span></span><span class="">(</span><span class=""><span class="hljs-params">callback</span></span><span class=""><span class="hljs-params">: </span></span><span class=""><span class="hljs-params">gameNearbyTransfer</span></span><span class=""><span class="hljs-params">.</span></span><span class=""><span class="hljs-params">DiscoveryResult</span></span><span class="">) </span><span class="">{</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取到发现的设备 展示设备列表</span></span></li><li>  <span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">nearbyGameDevices</span></span><span class="">.</span><span class=""><span class="hljs-title function_">forEach</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">device</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">gameNearbyTransfer</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">.</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">NearbyGameDevice</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">, </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">index</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">number</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span> </li><li><span class="">  }</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section10671640104614" device-type="phone,2in1,tablet">gameNearbyTransfer.off('discovery')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10671640104614" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'discovery', callback?: Callback&lt;DiscoveryResult&gt;): void</p> <p>取消订阅发现结果事件。使用callback回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.7.2.1.5.1.1" width="25.430000000000003%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.2.1.5.1.2" width="21.21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.2.1.5.1.3" width="12.7%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.2.1.5.1.4" width="40.660000000000004%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.430000000000003%"><p>type</p> </td> <td class="cellrowborder" width="21.21%"><p>string</p> </td> <td class="cellrowborder" width="12.7%"><p>是</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>监听的事件类型，支持的事件为'discovery'，发现设备操作完成后触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.430000000000003%"><p>callback</p> </td> <td class="cellrowborder" width="21.21%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section1411541513618">DiscoveryResult</a>&gt;</p> </td> <td class="cellrowborder" width="12.7%"><p>否</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>回调函数，返回发现结果对象。</p> <p>如果该参数不为空，则取消当前callback订阅。如果该参数为空，则取消'discovery'事件的所有callback订阅。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300008</p> </td> <td class="cellrowborder" width="50%"><p>Invalid parameter.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">off</span></span><span class="">(</span><span class=""><span class="hljs-string">'discovery'</span></span><span class="">, </span><span class="">discoveryCallBack</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li><li><span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">discoveryCallBack</span></span><span class="">(</span><span class=""><span class="hljs-params">callback</span></span><span class=""><span class="hljs-params">: </span></span><span class=""><span class="hljs-params">gameNearbyTransfer</span></span><span class=""><span class="hljs-params">.</span></span><span class=""><span class="hljs-params">DiscoveryResult</span></span><span class="">) </span><span class="">{</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取到发现的设备 展示设备列表</span></span></li><li>  <span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">nearbyGameDevices</span></span><span class="">.</span><span class=""><span class="hljs-title function_">forEach</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">device</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">gameNearbyTransfer</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">.</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">NearbyGameDevice</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">, </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">index</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">number</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span>    </li><li><span class="">  }</span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1959517425315" device-type="phone,2in1,tablet">gameNearbyTransfer.on('receivePackageInfo')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1959517425315" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'receivePackageInfo', callback: Callback&lt;PackageInfo&gt;): void</p> <p>订阅收到包信息事件。使用callback回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>type</p> </td> <td class="cellrowborder" width="19.71%"><p>string</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>监听的事件类型，支持的事件为'receivePackageInfo'，收到接收方发送的自身文件信息后触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.369999999999997%"><p>callback</p> </td> <td class="cellrowborder" width="19.71%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section10841101134814">PackageInfo</a>&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>回调函数，返回包信息对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'receivePackageInfo'</span></span><span class="">, </span><span class="">receivePackageInfoCallBack</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li><li><span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">receivePackageInfoCallBack</span></span><span class="">(</span><span class=""><span class="hljs-params">callback</span></span><span class=""><span class="hljs-params">: </span></span><span class=""><span class="hljs-params">gameNearbyTransfer</span></span><span class=""><span class="hljs-params">.</span></span><span class=""><span class="hljs-params">PackageInfo</span></span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">version</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1359944210319" device-type="phone,2in1,tablet">gameNearbyTransfer.off('receivePackageInfo')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1359944210319" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'receivePackageInfo', callback?: Callback&lt;PackageInfo&gt;): void</p> <p>取消订阅收到包信息事件。使用callback回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.7.2.1.5.1.1" width="25.430000000000003%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.2.1.5.1.2" width="21.21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.2.1.5.1.3" width="12.7%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.2.1.5.1.4" width="40.660000000000004%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.430000000000003%"><p>type</p> </td> <td class="cellrowborder" width="21.21%"><p>string</p> </td> <td class="cellrowborder" width="12.7%"><p>是</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>监听的事件类型，支持的事件为'receivePackageInfo'，收到接收方发送的自身文件信息后触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.430000000000003%"><p>callback</p> </td> <td class="cellrowborder" width="21.21%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section10841101134814">PackageInfo</a>&gt;</p> </td> <td class="cellrowborder" width="12.7%"><p>否</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>回调函数，返回包信息对象。</p> <p>如果该参数不为空，则取消当前callback订阅。如果该参数为空，则取消'receivePackageInfo'事件的所有callback订阅。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">off</span></span><span class="">(</span><span class=""><span class="hljs-string">'receivePackageInfo'</span></span><span class="">, </span><span class="">receivePackageInfoCallBack</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">receivePackageInfoCallBack</span></span><span class="">(</span><span class=""><span class="hljs-params">callback</span></span><span class=""><span class="hljs-params">: </span></span><span class=""><span class="hljs-params">gameNearbyTransfer</span></span><span class=""><span class="hljs-params">.</span></span><span class=""><span class="hljs-params">PackageInfo</span></span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">version</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section05583466314" device-type="phone,2in1,tablet">gameNearbyTransfer.on('transferNotify')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section05583466314" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'transferNotify', callback: Callback&lt;TransferNotification&gt;): void</p> <p>订阅传输通知事件。使用callback回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>type</p> </td> <td class="cellrowborder" width="19.71%"><p>string</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>监听的事件类型，支持的事件为'transferNotify'，文件传输过程中触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.369999999999997%"><p>callback</p> </td> <td class="cellrowborder" width="19.71%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section116223815415">TransferNotification</a>&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>回调函数，返回传输通知对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'transferNotify'</span></span><span class="">, </span><span class="">transferNotifyCallBack</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">transferNotifyCallBack</span></span><span class="">(</span><span class=""><span class="hljs-params">callback</span></span><span class=""><span class="hljs-params">: </span></span><span class=""><span class="hljs-params">gameNearbyTransfer</span></span><span class=""><span class="hljs-params">.</span></span><span class=""><span class="hljs-params">TransferNotification</span></span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">transferState</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section65611146153113" device-type="phone,2in1,tablet">gameNearbyTransfer.off('transferNotify')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section65611146153113" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'transferNotify', callback?: Callback&lt;TransferNotification&gt;): void</p> <p>取消订阅传输通知事件。使用callback回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.7.2.1.5.1.1" width="25.430000000000003%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.2.1.5.1.2" width="21.21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.2.1.5.1.3" width="12.7%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.2.1.5.1.4" width="40.660000000000004%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.430000000000003%"><p>type</p> </td> <td class="cellrowborder" width="21.21%"><p>string</p> </td> <td class="cellrowborder" width="12.7%"><p>是</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>监听的事件类型，支持的事件为'transferNotify'，文件传输过程中触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.430000000000003%"><p>callback</p> </td> <td class="cellrowborder" width="21.21%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section116223815415">TransferNotification</a>&gt;</p> </td> <td class="cellrowborder" width="12.7%"><p>否</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>回调函数，返回传输通知对象。</p> <p>如果该参数不为空，则取消当前callback订阅。如果该参数为空，则取消'transferNotify'事件的所有callback订阅。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">off</span></span><span class="">(</span><span class=""><span class="hljs-string">'transferNotify'</span></span><span class="">, </span><span class="">transferNotifyCallBack</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">transferNotifyCallBack</span></span><span class="">(</span><span class=""><span class="hljs-params">callback</span></span><span class=""><span class="hljs-params">: </span></span><span class=""><span class="hljs-params">gameNearbyTransfer</span></span><span class=""><span class="hljs-params">.</span></span><span class=""><span class="hljs-params">TransferNotification</span></span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">transferState</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section122432503314" device-type="phone,2in1,tablet">gameNearbyTransfer.on('error')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section122432503314" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'error', callback: Callback&lt;ReturnResult&gt;): void</p> <p>订阅错误事件。使用callback回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>type</p> </td> <td class="cellrowborder" width="19.71%"><p>string</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>监听的事件类型，支持的事件为'error'，内部错误时触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.369999999999997%"><p>callback</p> </td> <td class="cellrowborder" width="19.71%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section2401441273">ReturnResult</a>&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>回调函数，返回结果信息对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">on</span></span><span class="">(</span><span class=""><span class="hljs-string">'error'</span></span><span class="">, </span><span class="">errorCallBack</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">errorCallBack</span></span><span class="">(</span><span class=""><span class="hljs-params">callback</span></span><span class=""><span class="hljs-params">: </span></span><span class=""><span class="hljs-params">gameNearbyTransfer</span></span><span class=""><span class="hljs-params">.</span></span><span class=""><span class="hljs-params">ReturnResult</span></span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">code</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section20246850163115" device-type="phone,2in1,tablet">gameNearbyTransfer.off('error')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section20246850163115" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'error', callback?: Callback&lt;ReturnResult&gt;): void</p> <p>取消订阅错误事件。使用callback回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.7.2.1.5.1.1" width="25.430000000000003%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.2.1.5.1.2" width="21.21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.2.1.5.1.3" width="12.7%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.2.1.5.1.4" width="40.660000000000004%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.430000000000003%"><p>type</p> </td> <td class="cellrowborder" width="21.21%"><p>string</p> </td> <td class="cellrowborder" width="12.7%"><p>是</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>监听的事件类型，支持的事件为'error'。</p> </td> </tr> <tr><td class="cellrowborder" width="25.430000000000003%"><p>callback</p> </td> <td class="cellrowborder" width="21.21%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section2401441273">ReturnResult</a>&gt;</p> </td> <td class="cellrowborder" width="12.7%"><p>否</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>回调函数，返回结果信息对象。</p> <p>如果该参数不为空，则取消当前callback订阅。如果该参数为空，则取消'error'事件的所有callback订阅。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">off</span></span><span class="">(</span><span class=""><span class="hljs-string">'error'</span></span><span class="">, </span><span class="">errorCallBack</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class=""><span class="hljs-title function_">errorCallBack</span></span><span class="">(</span><span class=""><span class="hljs-params">callback</span></span><span class=""><span class="hljs-params">: </span></span><span class=""><span class="hljs-params">gameNearbyTransfer</span></span><span class=""><span class="hljs-params">.</span></span><span class=""><span class="hljs-params">ReturnResult</span></span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class="">callback</span><span class="">.</span><span class=""><span class="hljs-property">code</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section131971556806" device-type="phone,2in1,tablet">gameNearbyTransfer.create<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section131971556806" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>create(createParameters: CreateParameters): Promise&lt;CreateResult&gt;</p> <p>创建游戏近场快传服务。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.33.7.2.1.5.1.1" width="25.019999999999996%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.2.1.5.1.2" width="21.38%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.2.1.5.1.3" width="12.809999999999999%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.2.1.5.1.4" width="40.79%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.019999999999996%"><p>createParameters</p> </td> <td class="cellrowborder" width="21.38%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section1033653365917">CreateParameters</a></p> </td> <td class="cellrowborder" width="12.809999999999999%"><p>是</p> </td> <td class="cellrowborder" width="40.79%"><p>创建参数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.8.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.8.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section55661711201613">CreateResult</a>&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。返回创建结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300002</p> </td> <td class="cellrowborder" width="50%"><p>Authentication failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.BasicServicesKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="">uiAbilityContext </span><span class="">= </span><span class=""><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() </span><span class="hljs-keyword">as</span> <span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span></span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">initParam</span></span><span class="">: </span><span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-property">CreateParameters</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">abilityName</span></span><span class="">: </span><span class="">uiAbilityContext</span><span class="">.</span><span class=""><span class="hljs-property">abilityInfo</span></span><span class="">.</span><span class=""><span class="hljs-property">name</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">context</span></span><span class="">: </span><span class="">uiAbilityContext</span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">moduleName</span></span><span class="">: </span><span class="">uiAbilityContext</span><span class="">.</span><span class=""><span class="hljs-property">abilityInfo</span></span><span class="">.</span><span class=""><span class="hljs-property">moduleName</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">needShowSystemUI</span></span><span class="">: </span><span class="hljs-literal">false</span></li><li><span class="">}</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">create</span></span><span class="">(</span><span class="">initParam</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">createResult</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'create success'</span> </span><span class="">+ </span><span class="">createResult</span><span class="">.</span><span class=""><span class="hljs-property">localDeviceName</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'create error'</span></span><span class=""> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>).<span class="hljs-property">message</span>)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section225333655719" device-type="phone,2in1,tablet">gameNearbyTransfer.publishNearbyGame<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section225333655719" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>publishNearbyGame(): Promise&lt;void&gt;</p> <p>发布近场快传服务。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300005</p> </td> <td class="cellrowborder" width="50%"><p>The wireless network and Bluetooth should be enabled at the same time.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300006</p> </td> <td class="cellrowborder" width="50%"><p>Publishing failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.BasicServicesKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">publishNearbyGame</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'publishNearbyGame success'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'publishNearbyGame error'</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>).<span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section16687197125918" device-type="phone,2in1,tablet">gameNearbyTransfer.discoveryNearbyGame<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16687197125918" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>discoveryNearbyGame(): Promise&lt;void&gt;</p> <p>发送端执行发现附近设备。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300005</p> </td> <td class="cellrowborder" width="50%"><p>The wireless network and Bluetooth should be enabled at the same time.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300007</p> </td> <td class="cellrowborder" width="50%"><p>Discovery failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.BasicServicesKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">discoveryNearbyGame</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'discoveryNearbyGame success'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'discoveryNearbyGame error'</span></span><span class=""> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>).<span class="hljs-property">message</span>)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section13279659901" device-type="phone,2in1,tablet">gameNearbyTransfer.bindNearbyGame<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13279659901" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>bindNearbyGame(bindParameters: BindParameters): Promise&lt;void&gt;</p> <p>发送端绑定指定近场快传服务。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.36.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>bindParameters</p> </td> <td class="cellrowborder" width="19.71%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section1259101510331">BindParameters</a></p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>绑定参数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.8.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.8.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300005</p> </td> <td class="cellrowborder" width="50%"><p>The wireless network and Bluetooth should be enabled at the same time.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300008</p> </td> <td class="cellrowborder" width="50%"><p>Invalid parameter.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.BasicServicesKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">bindInfo</span></span><span class="">: </span><span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-property">BindParameters</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">deviceId</span></span><span class="">: </span><span class="hljs-string">'</span><span class=""><span class="hljs-string">deviceId</span></span><span class=""><span class="hljs-string">'</span>,</span></li><li>  <span class=""><span class="hljs-attr">networkId</span></span><span class="">: </span><span class="hljs-string">'</span><span class=""><span class="hljs-string">networkId</span></span><span class="hljs-string">'</span></li><li><span class="">}</span><span class="">;</span></li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">bindNearbyGame</span></span><span class="">(</span><span class="">bindInfo</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'bindNearbyGame success'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'bindNearbyGame error'</span></span><span class=""> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>).<span class="hljs-property">message</span>)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section52391745713" device-type="phone,2in1,tablet">gameNearbyTransfer.autoBindNearbyGame<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section52391745713" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>autoBindNearbyGame(): Promise&lt;void&gt;</p> <p>自动绑定近场快传服务。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300007</p> </td> <td class="cellrowborder" width="50%"><p>Discovery failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.BasicServicesKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">autoBindNearbyGame</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'autoBindNearbyGame success'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'autoBindNearbyGame error'</span></span><span class=""> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>).<span class="hljs-property">message</span>)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section106164517195" device-type="phone,2in1,tablet">gameNearbyTransfer.acceptCollaboration<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section106164517195" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>acceptCollaboration(acceptParameters: Record&lt;string, object&gt;): Promise&lt;void&gt;</p> <p>接受协同。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.38.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>acceptParameters</p> </td> <td class="cellrowborder" width="19.71%"><p>Record&lt;string, object&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>设置接受参数。Record数量范围：[1, 1024]。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.8.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.8.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gameNearbyTransfer } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.GameServiceKit"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.AbilityKit"</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.PerformanceAnalysisKit"</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class=""><span class="hljs-title class_">EntryAbility</span> </span><span class="hljs-keyword">extends</span> <span class=""><span class="hljs-title class_ inherited__">UIAbility</span> </span><span class="">{</span> </li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">协同回调</span></span></li><li>  <span class=""><span class="hljs-title function_">onCollaborate</span></span><span class="">(</span><span class=""><span class="hljs-attr">wantParam</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Record</span></span><span class="">&lt;</span><span class=""><span class="hljs-built_in">string</span></span><span class="">, </span><span class=""><span class="hljs-title class_">Object</span></span><span class="">&gt;</span><span class="">)</span><span class="">: </span><span class=""><span class="hljs-title class_">AbilityConstant</span></span><span class="">.</span><span class=""><span class="hljs-property">CollaborateResult</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">try</span> <span class="">{</span></li><li>    <span class="">  gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">acceptCollaboration</span></span><span class="">(</span><span class="">wantParam</span><span class="">)</span><span class="">;</span></li><li><span class="">    } </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>      <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span>;</li><li><span class="">    }</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class="hljs-string">'[nearby]</span><span class=""><span class="hljs-string">'</span>, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'onCollaborate: accept collaborate'</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="hljs-keyword">return</span> <span class=""><span class="hljs-title class_">AbilityConstant</span></span><span class="">.</span><span class=""><span class="hljs-property">CollaborateResult</span></span><span class="">.</span><span class=""><span class="hljs-property">ACCEPT</span></span><span class="">;</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section12490112992612" device-type="phone,2in1,tablet">gameNearbyTransfer.sendPackageInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12490112992612" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>sendPackageInfo(packageInfo: PackageInfo): Promise&lt;void&gt;</p> <p>接收端发送自身文件信息。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.39.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>packageInfo</p> </td> <td class="cellrowborder" width="19.71%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section10841101134814">PackageInfo</a></p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>包信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.8.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.8.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.39.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.BasicServicesKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">packageInfo</span></span><span class="">: </span><span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-property">PackageInfo</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'com.huawei.xxxx'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">files</span></span><span class="">: </span><span class="">[]</span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">version</span></span><span class="">: </span><span class=""><span class="hljs-string">'1.1.0'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">extraData</span></span><span class="">: </span><span class=""><span class="hljs-string">'extraData'</span></span></li><li><span class="">}</span><span class="">;</span></li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">fileInfo</span></span><span class="">: </span><span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-property">FileInfo</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">path</span></span><span class="">: </span><span class=""><span class="hljs-string">"/xxx/xxxx/files/data.zip"</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">hash</span></span><span class="">: </span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">file</span></span><span class=""><span class="hljs-string">Hash'</span> </span><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">可选</span></span></li><li><span class="">}</span><span class="">;</span></li><li><span class="">packageInfo</span><span class="">.</span><span class=""><span class="hljs-property">files</span></span><span class="">?.</span><span class=""><span class="hljs-title function_">push</span></span><span class="">(</span><span class="">fileInfo</span><span class="">)</span><span class="">;</span></li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">sendPackageInfo</span></span><span class="">(</span><span class="">packageInfo</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'sendPackageInfo success'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'sendPackageInfo error'</span></span><span class=""> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>).<span class="hljs-property">message</span>)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section78288285293" device-type="phone,2in1,tablet">gameNearbyTransfer.replyPackageInfoResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section78288285293" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>replyPackageInfoResult(packageInfoResult: PackageInfoResult): Promise&lt;void&gt;</p> <p>发送端向近场快传服务上报包信息对比结果。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.40.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>packageInfoResult</p> </td> <td class="cellrowborder" width="19.71%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section18372104173416">PackageInfoResult</a></p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>包信息对比结果。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.8.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.8.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.BasicServicesKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">packageInfoResult</span></span><span class="">: </span><span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-property">PackageInfoResult</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">packageInfoResultCode</span></span><span class="">: </span><span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-property">PackageInfoResultCode</span></span><span class="">.</span><span class=""><span class="hljs-property">PACKAGE_AVAILABLE_COMPARED</span></span></li><li><span class="">}</span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">replyPackageInfoResult</span></span><span class="">(</span><span class="">packageInfoResult</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'replyPackage success'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'replyPackage error'</span></span><span class=""> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>).<span class="hljs-property">message</span>)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1227711101118" device-type="phone,2in1,tablet">gameNearbyTransfer.transferPackageData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1227711101118" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>transferPackageData(packageData: PackageData): Promise&lt;void&gt;</p> <p>开始传输包数据。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.41.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>packageData</p> </td> <td class="cellrowborder" width="19.71%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-nearbytransfer#section138783245711">PackageData</a></p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>待传输的包数据信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.8.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.8.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1018300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.BasicServicesKit"</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">packageData</span></span><span class="">: </span><span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-property">PackageData</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">name</span></span><span class="">: </span><span class=""><span class="hljs-string">'com.huawei.gamenearbydemo'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">version</span></span><span class="">: </span><span class=""><span class="hljs-string">'1.0.1'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">files</span></span><span class="">: </span><span class="">[]</span></li><li><span class="">}</span><span class="">;</span></li><li><span class="">packageData</span><span class="">.</span><span class=""><span class="hljs-property">files</span></span><span class="">.</span><span class=""><span class="hljs-title function_">push</span></span><span class="">(</span><span class="">{ </span><span class=""><span class="hljs-attr">srcPath</span></span><span class="">: </span><span class=""><span class="hljs-string">"/xxx/xxxx/a.db"</span></span><span class="">, </span><span class=""><span class="hljs-attr">destPath</span></span><span class="">: </span><span class=""><span class="hljs-string">"xxxx/b.db"</span> </span><span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">transferPackageData</span></span><span class="">(</span><span class="">packageData</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'transferPackageData success'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'transferPackageData error'</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>).<span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section13373155416" device-type="phone,2in1,tablet">gameNearbyTransfer.destroy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13373155416" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>destroy(): Promise&lt;void&gt;</p> <p>不再使用时，销毁游戏近场快传服务。使用Promise异步回调。</p> <p><strong>需要权限：</strong>ohos.permission.DISTRIBUTED_DATASYNC</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GameNearby</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.42.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>201</p> </td> <td class="cellrowborder" width="50%"><p>Permission denied.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-kfo-c106="" class="highlight-div"><div _ngcontent-kfo-c106="" class="highlight-div-header"><div _ngcontent-kfo-c106="" class="highlight-div-header-left"><div _ngcontent-kfo-c106="" class="handle-button expand-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfo-c106="" class="highlight-div-header-right"><div _ngcontent-kfo-c106="" class="handle-button ai-button"></div><div _ngcontent-kfo-c106="" class="handle-button line-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfo-c106="" class="handle-button theme-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfo-c106="" class="handle-button copy-button"><div _ngcontent-kfo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfo-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.PerformanceAnalysisKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">gameNearbyTransfer </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.GameServiceKit"</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">"@kit.BasicServicesKit"</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">销毁服务</span></span></li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class="">gameNearbyTransfer</span><span class="">.</span><span class=""><span class="hljs-title function_">destroy</span></span><span class="">()</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(<span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'destroy success'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(<span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'destroy error'</span></span><span class=""> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>).<span class="hljs-property">message</span>)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>  <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'[nearby]'</span></span><span class="">, </span><span class=""><span class="hljs-string">'%{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-string">'error'</span> </span><span class="">+ </span><span class="">(</span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">Error</span></span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> </div> <div></div></div>