<h1 _ngcontent-xua-c119="" class="doc-title ng-star-inserted" title="gamePerformance (游戏场景感知)"> gamePerformance (游戏场景感知) </h1>

<div _ngcontent-xua-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供接入Game Service Kit的游戏场景感知能力。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section164051883419" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section164051883419" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-xua-c106="" class="highlight-div"><div _ngcontent-xua-c106="" class="highlight-div-header"><div _ngcontent-xua-c106="" class="highlight-div-header-left"><div _ngcontent-xua-c106="" class="handle-button expand-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xua-c106="" class="highlight-div-header-right"><div _ngcontent-xua-c106="" class="handle-button ai-button"></div><div _ngcontent-xua-c106="" class="handle-button line-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xua-c106="" class="handle-button theme-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xua-c106="" class="handle-button copy-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xua-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1033653365917" device-type="phone,2in1,tablet">DeviceInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1033653365917" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>设备信息类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.1" width="23.662366236623665%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.2" width="19.6019601960196%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.3" width="9.85098509850985%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.4" width="9.15091509150915%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.5" width="37.733773377337734%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.662366236623665%"><p>tempLevel</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p>number</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>温控档位，档位越高表示温度越高。不同档位及其建议如下：</p> <ul><li>1：无需处理。</li><li>2：建议降低无感知业务规格，例如后台更新降速或延迟运行。</li><li>3：建议暂停无感知业务，降低游戏非核心业务的规格，例如前台更新降速。</li><li>4：建议减少游戏特效，降低分辨率，画质。</li><li>5：建议降低全场景规格，进一步降低分辨率、画质等。</li><li>6：建议游戏降至最低规格。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.662366236623665%"><p>gpuInfo</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section12288563197">GpuInfo</a></p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>GPU信息。</p> </td> </tr> <tr><td class="cellrowborder" width="23.662366236623665%"><p>thermalInfo</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section55661711201613">ThermalInfo</a></p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>温度变化趋势数据。</p> <p><strong>起始版本：</strong>5.0.1(13)。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section12288563197" device-type="phone,2in1,tablet">GpuInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12288563197" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>GPU信息类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="23.32%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="19.780000000000005%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="9.870000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="9.310000000000002%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="37.720000000000006%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.32%"><p>gpuLoadLevel</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>number</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>是</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>GPU负载整体等级。10个等级，负载程度从1到10递增。</p> </td> </tr> <tr><td class="cellrowborder" width="23.32%"><p>vertexLoadLevel</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>number</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>是</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>顶点处理负载等级。10个等级，负载程度从1到10递增。</p> </td> </tr> <tr><td class="cellrowborder" width="23.32%"><p>fragmentLoadLevel</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>number</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>是</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>片元处理负载等级。10个等级，负载程度从1到10递增。</p> </td> </tr> <tr><td class="cellrowborder" width="23.32%"><p>textureLoadLevel</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>number</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>是</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>纹理处理负载等级。10个等级，负载程度从1到10递增。</p> </td> </tr> <tr><td class="cellrowborder" width="23.32%"><p>bandwidthLoadLevel</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>number</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>是</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>带宽负载等级。10个等级，负载程度从1到10递增。</p> </td> </tr> <tr><td class="cellrowborder" width="23.32%"><p>currentFrequency</p> </td> <td class="cellrowborder" width="19.780000000000005%"><p>number</p> </td> <td class="cellrowborder" width="9.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="9.310000000000002%"><p>是</p> </td> <td class="cellrowborder" width="37.720000000000006%"><p>GPU当前频点，单位：KHz。</p> <p><strong>起始版本：</strong>5.0.2(14)。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section55661711201613" device-type="phone,2in1,tablet">ThermalInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section55661711201613" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>温度变化趋势数据类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="23.662366236623665%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="19.6019601960196%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="9.85098509850985%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="9.15091509150915%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="37.733773377337734%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.662366236623665%"><p>thermalMargin</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p>number</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>时间裕量，温控到达指定档位的时间，单位：秒（s）。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>该数值超过60时，可信度降低。</li><li>0：已达到查询的温控档位。</li><li>-1：表示不能到达。</li><li>-2：查询的档位低于当前档位。</li></ul> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.662366236623665%"><p>thermalTrend</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p>number</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>温升趋势，取值范围为[-100,100]，负号代表降温，数值越大说明当前温度变化越快。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section116223815415" device-type="phone,2in1,tablet">BaseGameInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section116223815415" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>游戏基本信息类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="23.767623237676233%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="19.30806919308069%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="9.979002099790021%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="9.27907209279072%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="37.66623337666233%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.767623237676233%"><p>messageType</p> </td> <td class="cellrowborder" width="19.30806919308069%"><p>number</p> </td> <td class="cellrowborder" width="9.979002099790021%"><p>否</p> </td> <td class="cellrowborder" width="9.27907209279072%"><p>否</p> </td> <td class="cellrowborder" width="37.66623337666233%"><p>信息类型。</p> <ul><li>0：标识一个游戏包体消息，对应<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section3844175954711">GamePackageInfo</a>。</li><li>1：标识一个游戏设置消息，对应<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section10841101134814">GameConfigInfo</a>。</li><li>2：标识一个游戏场景消息，对应<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section1535311105717">GameSceneInfo</a>。</li><li>3：标识一个游戏网络状态消息，对应<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section138783245711">GameNetInfo</a>。</li><li>4：标识一个游戏玩家信息，对应<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section2401441273">GamePlayerInfo</a>。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.767623237676233%"><p>extra</p> </td> <td class="cellrowborder" width="19.30806919308069%"><p>string</p> </td> <td class="cellrowborder" width="9.979002099790021%"><p>否</p> </td> <td class="cellrowborder" width="9.27907209279072%"><p>是</p> </td> <td class="cellrowborder" width="37.66623337666233%"><p>扩展参数，JSON字符串，用于传递游戏拓展信息，字符长度范围：[0, 128]。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section3844175954711" device-type="phone,2in1,tablet">GamePackageInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3844175954711" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>游戏包信息类，继承<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section116223815415">BaseGameInfo</a>。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.1" width="23.369999999999997%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.2" width="19.67%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.3" width="9.08%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.4" width="10.17%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.5" width="37.71%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.369999999999997%"><p>bundleName</p> </td> <td class="cellrowborder" width="19.67%"><p>string</p> </td> <td class="cellrowborder" width="9.08%"><p>否</p> </td> <td class="cellrowborder" width="10.17%"><p>否</p> </td> <td class="cellrowborder" width="37.71%"><p>游戏包名。字符长度范围：[1, 128]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.369999999999997%"><p>appVersion</p> </td> <td class="cellrowborder" width="19.67%"><p>string</p> </td> <td class="cellrowborder" width="9.08%"><p>否</p> </td> <td class="cellrowborder" width="10.17%"><p>否</p> </td> <td class="cellrowborder" width="37.71%"><p>游戏版本号。字符长度范围：[1, 64]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.369999999999997%"><p>engineType</p> </td> <td class="cellrowborder" width="19.67%"><p>number</p> </td> <td class="cellrowborder" width="9.08%"><p>否</p> </td> <td class="cellrowborder" width="10.17%"><p>是</p> </td> <td class="cellrowborder" width="37.71%"><p>游戏引擎类型。</p> <ul><li>1：UNITY</li><li>2：UNREAL4</li><li>3：MESSIAH</li><li>4：COCOS</li><li>200：OTHERS</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.369999999999997%"><p>engineVersion</p> </td> <td class="cellrowborder" width="19.67%"><p>string</p> </td> <td class="cellrowborder" width="9.08%"><p>否</p> </td> <td class="cellrowborder" width="10.17%"><p>是</p> </td> <td class="cellrowborder" width="37.71%"><p>游戏引擎版本号。字符长度范围：[0, 64]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.369999999999997%"><p>gameType</p> </td> <td class="cellrowborder" width="19.67%"><p>number</p> </td> <td class="cellrowborder" width="9.08%"><p>否</p> </td> <td class="cellrowborder" width="10.17%"><p>是</p> </td> <td class="cellrowborder" width="37.71%"><p>游戏类型。</p> <ul><li>1：MOBA（多人在线战术竞技）</li><li>2：RPG（角色扮演）</li><li>3：FPS（第一人称射击类）</li><li>4：FTG（格斗游戏）</li><li>5：RAC（竞速游戏）</li><li>200：OTHERS（其他）</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.369999999999997%"><p>vulkanSupported</p> </td> <td class="cellrowborder" width="19.67%"><p>boolean</p> </td> <td class="cellrowborder" width="9.08%"><p>否</p> </td> <td class="cellrowborder" width="10.17%"><p>是</p> </td> <td class="cellrowborder" width="37.71%"><p>是否支持Vulkan。</p> <ul><li>true：支持</li><li>false：不支持</li></ul> <p>默认为false。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section10841101134814" device-type="phone,2in1,tablet">GameConfigInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10841101134814" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>游戏配置信息类，继承<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section116223815415">BaseGameInfo</a>。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.1" width="23.342334233423344%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.2" width="19.761976197619763%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.3" width="9.830983098309831%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.4" width="9.520952095209521%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.5" width="37.543754375437544%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.342334233423344%"><p>maxPictureQualityLevel</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>number</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>支持的画质最高等级。</p> <ul><li>1：流畅</li><li>2：均衡</li><li>3：高清</li><li>4：HDR高清</li><li>5：超高清</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>currentPictureQualityLevel</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>number</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>画质的当前等级。</p> <ul><li>1：流畅</li><li>2：均衡</li><li>3：高清</li><li>4：HDR高清</li><li>5：超高清</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>maxFrameRate</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>number</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>支持的最高帧率。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>currentFrameRate</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>number</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>当前设置的帧率。取值范围为[1, 144]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>maxResolution</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>string</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>支持的最高分辨率。格式AxB（如1260x1980），字符长度范围：[1, 32]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>currentResolution</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>string</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>当前设置的分辨率。格式AxB（如1260x1980），字符长度范围：[1, 32]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>antiAliasing</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>boolean</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>是否开启抗锯齿。</p> <ul><li>true：开启</li><li>false：不开启</li></ul> <p>默认为false。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>shadow</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>boolean</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>当前是否开启阴影。</p> <ul><li>true：开启</li><li>false：不开启</li></ul> <p>默认为false。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>multithreading</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>boolean</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>是否开启多线程。</p> <ul><li>true：开启</li><li>false：不开启</li></ul> <p>默认为false。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>particle</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>boolean</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>是否开启粒子效果。</p> <ul><li>true：开启</li><li>false：不开启</li></ul> <p>默认为false。</p> </td> </tr> <tr><td class="cellrowborder" width="23.342334233423344%"><p>hdMode</p> </td> <td class="cellrowborder" width="19.761976197619763%"><p>boolean</p> </td> <td class="cellrowborder" width="9.830983098309831%"><p>否</p> </td> <td class="cellrowborder" width="9.520952095209521%"><p>否</p> </td> <td class="cellrowborder" width="37.543754375437544%"><p>是否开启高清模式。</p> <ul><li>true：开启</li><li>false：不开启</li></ul> <p>默认为false。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1535311105717" device-type="phone,2in1,tablet">GameSceneInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1535311105717" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>游戏场景信息类，继承<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section116223815415">BaseGameInfo</a>。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.1" width="23.47%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.2" width="19.79%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.3" width="10.13%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.4" width="9.01%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.5" width="37.6%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.47%"><p>sceneID</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>否</p> </td> <td class="cellrowborder" width="37.6%"><p>游戏场景ID。</p> <ul><li>0：回切场景标识结束</li><li>1：游戏启动</li><li>2：游戏内更新</li><li>3：登录过程</li><li>4：主界面</li><li>5：加载一局游戏（自己加载）</li><li>6：加载一局游戏（自己加载完毕，等待其他玩家）</li><li>7：游戏中</li><li>8：观战模式</li></ul> <p>（游戏特殊场景编码：从100开始自定义）</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>游戏自定义场景推荐使用subSceneID传入。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>description</p> </td> <td class="cellrowborder" width="19.79%"><p>string</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>游戏场景描述（自定义描述）。字符长度范围：[0, 128]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>subSceneID</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>游戏子场景ID（自定义）。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>subDescription</p> </td> <td class="cellrowborder" width="19.79%"><p>string</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>游戏子场景描述（自定义描述）。字符长度范围：[0, 128]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>importanceLevel</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>否</p> </td> <td class="cellrowborder" width="37.6%"><p>游戏场景重要程度，5个等级，重要程度从1到5递增。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>sceneFrequency</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景在一局游戏中出现的次数。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>sceneTime</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景持续的时间，单位：毫秒（ms）。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>recommendedCpuLevel</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>游戏推荐的该场景下的CPU等级。</p> <ul><li>1：Low（低）</li><li>2：Middle（中）</li><li>3：High（高）</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>recommendedGpuLevel</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>游戏推荐的该场景下的GPU等级。</p> <ul><li>1：Low（低）</li><li>2：Middle（中）</li><li>3：High（高）</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>recommendedDdrLevel</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>游戏推荐的该场景下的DDR等级。</p> <ul><li>1：Low（低）</li><li>2：Middle（中）</li><li>3：High（高）</li></ul> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>recommendedFps</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>游戏推荐的该场景下的目标帧率。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>maxFps</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景的最大帧率。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>currentFps</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景的当前帧率。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>keyThread</p> </td> <td class="cellrowborder" width="19.79%"><p>string</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景下的关键线程。</p> <ul><li>render：渲染线程</li><li>logic：逻辑线程</li><li>net：网络线程</li></ul> <p>按照 render|xxx|logic|xxx 格式传入。字符长度范围：[0, 32]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>drawCallCount</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景下每帧的平均Drawcall数。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>vertexCount</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景下每帧的平均模型顶点数。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>triangleCount</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景下每帧的平均模型三角形数。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>shaderCount</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景下每帧的平均shader数量。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>textureCount</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景下每帧的平均纹理数量。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>meshCount</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景下每帧的平均mesh数量。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>channelCount</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>该场景下每帧渲染的通道数。</p> </td> </tr> <tr><td class="cellrowborder" width="23.47%"><p>participantCount</p> </td> <td class="cellrowborder" width="19.79%"><p>number</p> </td> <td class="cellrowborder" width="10.13%"><p>否</p> </td> <td class="cellrowborder" width="9.01%"><p>是</p> </td> <td class="cellrowborder" width="37.6%"><p>在该场景下的同屏人数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section138783245711" device-type="phone,2in1,tablet">GameNetInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section138783245711" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>游戏网络信息类，继承<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section116223815415">BaseGameInfo</a>。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.1" width="23.45%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.2" width="19.63%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.3" width="9.75%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.4" width="9.41%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.5" width="37.76%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.45%"><p>netLatency</p> </td> <td class="cellrowborder" width="19.63%"><p>string</p> </td> <td class="cellrowborder" width="9.75%"><p>否</p> </td> <td class="cellrowborder" width="9.41%"><p>否</p> </td> <td class="cellrowborder" width="37.76%"><p>游戏场景中网络时延，包含整体、上行、下行和服务器处理时间。</p> <p>单位：毫秒（ms），字符长度范围：[1, 128]。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>格式：10,20,30,40（允许10或10,20或10,20,30），按照固定顺序解析：total,up,down,server。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.45%"><p>netLoad</p> </td> <td class="cellrowborder" width="19.63%"><p>number</p> </td> <td class="cellrowborder" width="9.75%"><p>否</p> </td> <td class="cellrowborder" width="9.41%"><p>是</p> </td> <td class="cellrowborder" width="37.76%"><p>游戏网络负载等级。</p> <ul><li>1：轻度负载</li><li>2：中度负载</li><li>3：重度负载</li></ul> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section2401441273" device-type="phone,2in1,tablet">GamePlayerInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2401441273" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>游戏玩家信息类，继承<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section116223815415">BaseGameInfo</a>。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>gamePlayerId、teamPlayerId和thirdOpenId不能同时为空。</p> </div></div></div>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.1" width="23.432343234323433%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.2" width="19.63196319631963%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.3" width="9.950995099509951%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.4" width="9.33093309330933%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.5" width="37.65376537653765%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.432343234323433%"><p>gamePlayerId</p> </td> <td class="cellrowborder" width="19.63196319631963%"><p>string</p> </td> <td class="cellrowborder" width="9.950995099509951%"><p>否</p> </td> <td class="cellrowborder" width="9.33093309330933%"><p>是</p> </td> <td class="cellrowborder" width="37.65376537653765%"><p>游戏玩家ID。字符长度范围：[0, 256]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.432343234323433%"><p>teamPlayerId</p> </td> <td class="cellrowborder" width="19.63196319631963%"><p>string</p> </td> <td class="cellrowborder" width="9.950995099509951%"><p>否</p> </td> <td class="cellrowborder" width="9.33093309330933%"><p>是</p> </td> <td class="cellrowborder" width="37.65376537653765%"><p>团队玩家ID。字符长度范围：[0, 256]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.432343234323433%"><p>thirdOpenId</p> </td> <td class="cellrowborder" width="19.63196319631963%"><p>string</p> </td> <td class="cellrowborder" width="9.950995099509951%"><p>否</p> </td> <td class="cellrowborder" width="9.33093309330933%"><p>是</p> </td> <td class="cellrowborder" width="37.65376537653765%"><p>游戏官方账号ID。字符长度范围：[0, 128]。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section12485171912281" device-type="phone,2in1,tablet">DeviceInfoParameter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12485171912281" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>设备状态信息参数类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.1" width="23.662366236623665%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.2" width="19.6019601960196%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.3" width="9.85098509850985%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.4" width="9.15091509150915%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.5" width="37.733773377337734%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.662366236623665%"><p>deviceInfoType</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section13891254145017">DeviceInfoType</a></p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>否</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>设备状态信息类型。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>若deviceInfoType传参为DeviceInfoType.GPU，则parameters须为空。</li><li>若deviceInfoType传参为DeviceInfoType.THERMAL，parameters可为空，也可传值。</li></ul> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.662366236623665%"><p>parameters</p> </td> <td class="cellrowborder" width="19.6019601960196%"><p>Record&lt;string, string&gt;</p> </td> <td class="cellrowborder" width="9.85098509850985%"><p>否</p> </td> <td class="cellrowborder" width="9.15091509150915%"><p>是</p> </td> <td class="cellrowborder" width="37.733773377337734%"><p>设备状态信息参数。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前deviceInfoType传参为DeviceInfoType.THERMAL时支持传入。key固定为<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section1346841562510">DeviceInfoParameterKey</a>.THERMAL_TEMP_LEVEL，value为指定的温控档位值，取值参见<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section1033653365917">温控档位</a>。若不传值则指定为系统默认温控档位。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section13891254145017" device-type="phone,2in1,tablet">DeviceInfoType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13891254145017" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>设备状态信息类型枚举对象。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.5.1.4.1.1" width="41.91%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.4.1.2" width="20.880000000000003%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.4.1.3" width="37.21%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="41.91%"><p>THERMAL</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>1</p> </td> <td class="cellrowborder" width="37.21%"><p>温度变化趋势数据。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>GPU</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>2</p> </td> <td class="cellrowborder" width="37.21%"><p>GPU负载。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1346841562510" device-type="phone,2in1,tablet">DeviceInfoParameterKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1346841562510" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>设备状态信息参数键值枚举对象。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.1" width="41.91%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.2" width="20.880000000000003%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.3" width="37.21%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="41.91%"><p>THERMAL_TEMP_LEVEL</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>tempLevel</p> </td> <td class="cellrowborder" width="37.21%"><p>温控档位。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section51091113529" device-type="phone,2in1,tablet">GameCustomTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section51091113529" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>游戏自定义数据的标签枚举对象。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.5.1.4.1.1" width="41.91%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.4.1.2" width="20.880000000000003%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.4.1.3" width="37.21%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="41.91%"><p>CRASH</p> </td> <td class="cellrowborder" width="20.880000000000003%"><p>1</p> </td> <td class="cellrowborder" width="37.21%"><p>崩溃。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section5696144516164" device-type="phone,2in1,tablet">GamePerformanceErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5696144516164" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>Game Service Kit错误码类。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.6.1.4.1.1" width="33.97%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.4.1.2" width="24.099999999999998%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.4.1.3" width="41.93%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.97%"><p>INTERNAL_ERROR</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1010300001</p> </td> <td class="cellrowborder" width="41.93%"><p>游戏内部通用错误。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>AUTH_FAILED</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1010300002</p> </td> <td class="cellrowborder" width="41.93%"><p>鉴权失败。</p> </td> </tr> <tr><td class="cellrowborder" width="33.97%"><p>INVALID_REQUEST</p> </td> <td class="cellrowborder" width="24.099999999999998%"><p>1010300003</p> </td> <td class="cellrowborder" width="41.93%"><p>非法请求。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section131971556806" device-type="phone,2in1,tablet">gamePerformance.init<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section131971556806" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>init(gamePackageInfo: GamePackageInfo): Promise&lt;void&gt;</p> <p>游戏启动时，需要对游戏场景感知模块进行初始化。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.6.2.1.5.1.1" width="25.019999999999996%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.2.1.5.1.2" width="21.38%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.2.1.5.1.3" width="12.809999999999999%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.2.1.5.1.4" width="40.79%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.019999999999996%"><p>gamePackageInfo</p> </td> <td class="cellrowborder" width="21.38%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section3844175954711">GamePackageInfo</a></p> </td> <td class="cellrowborder" width="12.809999999999999%"><p>是</p> </td> <td class="cellrowborder" width="40.79%"><p>游戏包信息类。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1010300002</p> </td> <td class="cellrowborder" width="50%"><p>Auth failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-xua-c106="" class="highlight-div"><div _ngcontent-xua-c106="" class="highlight-div-header"><div _ngcontent-xua-c106="" class="highlight-div-header-left"><div _ngcontent-xua-c106="" class="handle-button expand-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xua-c106="" class="highlight-div-header-right"><div _ngcontent-xua-c106="" class="handle-button ai-button"></div><div _ngcontent-xua-c106="" class="handle-button line-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xua-c106="" class="handle-button theme-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xua-c106="" class="handle-button copy-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xua-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">gamePackageInfo</span>: gamePerformance.<span class="hljs-property">GamePackageInfo</span> = {</li><li>  <span class="hljs-attr">messageType</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">"com.example.demo"</span>, <span class="hljs-comment">// 仅示例，请替换为实际的游戏包名</span></li><li>  <span class="hljs-attr">appVersion</span>: <span class="hljs-string">"1.0"</span></li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePerformance.<span class="hljs-title function_">init</span>(gamePackageInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// 初始化成功</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Succeeded in initializing.`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-comment">// 初始化失败</span></li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Failed to initialize. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section225333655719" device-type="phone,2in1,tablet">gamePerformance.updateGameInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section225333655719" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>updateGameInfo&lt;T extends BaseGameInfo&gt;(gameInfo: T): Promise&lt;void&gt;</p> <p>更新游戏信息。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.6.2.1.5.1.1" width="25.19%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.2.1.5.1.2" width="20.43%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.2.1.5.1.3" width="13.56%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.2.1.5.1.4" width="40.82%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.19%"><p>gameInfo</p> </td> <td class="cellrowborder" width="20.43%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section116223815415">BaseGameInfo</a></p> </td> <td class="cellrowborder" width="13.56%"><p>是</p> </td> <td class="cellrowborder" width="40.82%"><p>游戏基本信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1010300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-xua-c106="" class="highlight-div"><div _ngcontent-xua-c106="" class="highlight-div-header"><div _ngcontent-xua-c106="" class="highlight-div-header-left"><div _ngcontent-xua-c106="" class="handle-button expand-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xua-c106="" class="highlight-div-header-right"><div _ngcontent-xua-c106="" class="handle-button ai-button"></div><div _ngcontent-xua-c106="" class="handle-button line-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xua-c106="" class="handle-button theme-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xua-c106="" class="handle-button copy-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xua-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 以更新游戏场景信息为例</span></li><li><span class="hljs-keyword">import</span> { gamePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">gameSceneInfo</span>: gamePerformance.<span class="hljs-property">GameSceneInfo</span> = {</li><li>  <span class="hljs-attr">messageType</span>: <span class="hljs-number">2</span>,</li><li>  <span class="hljs-attr">sceneID</span>: <span class="hljs-number">7</span>,</li><li>  <span class="hljs-attr">importanceLevel</span>: <span class="hljs-number">4</span></li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePerformance.<span class="hljs-title function_">updateGameInfo</span>(gameSceneInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// 更新游戏场景信息成功</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Succeeded in updating.`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-comment">// 更新游戏场景信息失败</span></li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Failed to update. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section17453143012584" device-type="phone,2in1,tablet">gamePerformance.on('deviceStateChanged')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17453143012584" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'deviceStateChanged', callback: Callback&lt;DeviceInfo&gt;): void</p> <p>订阅设备状态变化。使用callback回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>Mali系列GPU不支持采集GPU信息，无法获取设备GPU信息。</p> </div></div></div> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>type</p> </td> <td class="cellrowborder" width="19.71%"><p>string</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>监听的事件类型，目前仅支持监听deviceStateChanged（设备状态变化）事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.369999999999997%"><p>callback</p> </td> <td class="cellrowborder" width="19.71%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section1033653365917">DeviceInfo</a>&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>回调函数，返回设备信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-xua-c106="" class="highlight-div"><div _ngcontent-xua-c106="" class="highlight-div-header"><div _ngcontent-xua-c106="" class="highlight-div-header-left"><div _ngcontent-xua-c106="" class="handle-button expand-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xua-c106="" class="highlight-div-header-right"><div _ngcontent-xua-c106="" class="handle-button ai-button"></div><div _ngcontent-xua-c106="" class="handle-button line-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xua-c106="" class="handle-button theme-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xua-c106="" class="handle-button copy-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xua-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">onDeviceStateChange</span>(<span class="hljs-params">data:gamePerformance.DeviceInfo</span>) {</li><li>  <span class="hljs-comment">// 设备信息详情</span></li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`device state changed. tempLevel is <span class="hljs-subst">${data.tempLevel}</span>`</span>);</li><li>}</li><li>
</li><li><span class="hljs-comment">// 订阅deviceStateChanged事件</span></li><li><span class="hljs-keyword">try</span> {</li><li>  gamePerformance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'deviceStateChanged'</span>, onDeviceStateChange);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-comment">// 订阅失败</span></li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Failed to subscribe. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section060864914495" device-type="phone,2in1,tablet">gamePerformance.on('deviceStateChanged')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section060864914495" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(type: 'deviceStateChanged', callback: Callback&lt;DeviceInfo&gt;, scope: Array&lt;DeviceInfoType&gt;): void</p> <p>按需订阅设备状态变化。使用callback回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>Mali系列GPU不支持采集GPU信息，无法获取设备GPU信息。</p> </div></div></div> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>type</p> </td> <td class="cellrowborder" width="19.71%"><p>string</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>监听的事件类型，目前仅支持监听deviceStateChanged（设备状态变化）事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.369999999999997%"><p>callback</p> </td> <td class="cellrowborder" width="19.71%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section1033653365917">DeviceInfo</a>&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>回调函数，返回设备信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25.369999999999997%"><p>scope</p> </td> <td class="cellrowborder" width="19.71%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section13891254145017">DeviceInfoType</a>&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>需要订阅的设备状态信息类型。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1010300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-xua-c106="" class="highlight-div"><div _ngcontent-xua-c106="" class="highlight-div-header"><div _ngcontent-xua-c106="" class="highlight-div-header-left"><div _ngcontent-xua-c106="" class="handle-button expand-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xua-c106="" class="highlight-div-header-right"><div _ngcontent-xua-c106="" class="handle-button ai-button"></div><div _ngcontent-xua-c106="" class="handle-button line-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xua-c106="" class="handle-button theme-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xua-c106="" class="handle-button copy-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xua-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">onDeviceStateChange</span>(<span class="hljs-params">data:gamePerformance.DeviceInfo</span>) {</li><li>  <span class="hljs-comment">// 设备信息详情</span></li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`device state changed. tempLevel is <span class="hljs-subst">${data.tempLevel}</span>`</span>);</li><li>}</li><li>
</li><li><span class="hljs-comment">// 订阅deviceStateChanged事件</span></li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">types</span>:<span class="hljs-title class_">Array</span>&lt;gamePerformance.<span class="hljs-property">DeviceInfoType</span>&gt; = [gamePerformance.<span class="hljs-property">DeviceInfoType</span>.<span class="hljs-property">GPU</span>];</li><li>  gamePerformance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'deviceStateChanged'</span>, onDeviceStateChange,types);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-comment">// 订阅失败</span></li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Failed to subscribe. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section3614173614593" device-type="phone,2in1,tablet">gamePerformance.off('deviceStateChanged')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3614173614593" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(type: 'deviceStateChanged', callback?: Callback&lt;DeviceInfo&gt;): void</p> <p>取消订阅设备状态变化。使用callback回调。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.6.2.1.5.1.1" width="25.430000000000003%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.2.1.5.1.2" width="21.21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.2.1.5.1.3" width="12.7%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.2.1.5.1.4" width="40.660000000000004%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.430000000000003%"><p>type</p> </td> <td class="cellrowborder" width="21.21%"><p>string</p> </td> <td class="cellrowborder" width="12.7%"><p>是</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>监听的事件类型，目前仅支持监听deviceStateChanged（设备状态变化）事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.430000000000003%"><p>callback</p> </td> <td class="cellrowborder" width="21.21%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section1033653365917">DeviceInfo</a>&gt;</p> </td> <td class="cellrowborder" width="12.7%"><p>否</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>回调函数，返回设备信息。</p> <p>如果该参数不为空，则取消当前callback订阅。如果该参数为空，则取消deviceStateChanged事件的所有callback订阅。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-xua-c106="" class="highlight-div"><div _ngcontent-xua-c106="" class="highlight-div-header"><div _ngcontent-xua-c106="" class="highlight-div-header-left"><div _ngcontent-xua-c106="" class="handle-button expand-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xua-c106="" class="highlight-div-header-right"><div _ngcontent-xua-c106="" class="handle-button ai-button"></div><div _ngcontent-xua-c106="" class="handle-button line-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xua-c106="" class="handle-button theme-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xua-c106="" class="handle-button copy-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xua-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">onDeviceStateChange</span>(<span class="hljs-params">data:gamePerformance.DeviceInfo</span>) {</li><li>  <span class="hljs-comment">// 设备信息详情</span></li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`device state changed. tempLevel is <span class="hljs-subst">${data.tempLevel}</span>`</span>);</li><li>}</li><li>
</li><li><span class="hljs-comment">// 取消订阅deviceStateChanged事件</span></li><li><span class="hljs-keyword">try</span> {</li><li>  gamePerformance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'deviceStateChanged'</span>, onDeviceStateChange);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-comment">// 取消订阅失败</span></li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Failed to unsubscribe. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li><li>
</li><li><span class="hljs-comment">// 取消deviceStateChanged事件的全部订阅</span></li><li><span class="hljs-keyword">try</span> {</li><li>  gamePerformance.<span class="hljs-title function_">off</span>(<span class="hljs-string">"deviceStateChanged"</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-comment">// 取消订阅失败</span></li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Failed to unsubscribe. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section106164517195" device-type="phone,2in1,tablet">gamePerformance.getDeviceInfoByScope<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section106164517195" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getDeviceInfoByScope(scope: Array&lt;DeviceInfoParameter&gt;): Promise&lt;DeviceInfo&gt;</p> <p>查询设备状态信息。使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>Mali系列GPU不支持采集GPU信息，无法获取设备GPU信息。</p> </div></div></div> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>scope</p> </td> <td class="cellrowborder" width="19.71%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section12485171912281">DeviceInfoParameter</a>&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>设备状态信息参数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.8.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section1033653365917">DeviceInfo</a>&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。返回设备状态信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1010300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-xua-c106="" class="highlight-div"><div _ngcontent-xua-c106="" class="highlight-div-header"><div _ngcontent-xua-c106="" class="highlight-div-header-left"><div _ngcontent-xua-c106="" class="handle-button expand-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xua-c106="" class="highlight-div-header-right"><div _ngcontent-xua-c106="" class="handle-button ai-button"></div><div _ngcontent-xua-c106="" class="handle-button line-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xua-c106="" class="handle-button theme-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xua-c106="" class="handle-button copy-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xua-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 查询设备状态</span></li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">gpuParam</span>: gamePerformance.<span class="hljs-property">DeviceInfoParameter</span> = {</li><li>    <span class="hljs-attr">deviceInfoType</span>: gamePerformance.<span class="hljs-property">DeviceInfoType</span>.<span class="hljs-property">GPU</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">thermalParam</span>: gamePerformance.<span class="hljs-property">DeviceInfoParameter</span> = {</li><li>    <span class="hljs-attr">deviceInfoType</span>: gamePerformance.<span class="hljs-property">DeviceInfoType</span>.<span class="hljs-property">THERMAL</span>     </li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">gameInfos</span>: <span class="hljs-title class_">Array</span>&lt;gamePerformance.<span class="hljs-property">DeviceInfoParameter</span>&gt; = [gpuParam, thermalParam];</li><li>  gamePerformance.<span class="hljs-title function_">getDeviceInfoByScope</span>(gameInfos).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">deviceInfo:gamePerformance.DeviceInfo</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Succeeded in querying device info. tempLevel is <span class="hljs-subst">${deviceInfo.tempLevel}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-comment">// 查询失败</span></li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Failed to query. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section72524718166" device-type="phone,2in1,tablet">gamePerformance.addGameCustomData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section72524718166" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>addGameCustomData(data: Record&lt;string, string&gt;, tag: GameCustomTag): void</p> <p>上报带标签的游戏自定义数据。</p> <p><strong>系统能力：</strong>SystemCapability.GameService.GamePerformance</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.6.2.1.5.1.1" width="25.369999999999997%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.2.1.5.1.2" width="19.71%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.2.1.5.1.3" width="14.29%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.369999999999997%"><p>data</p> </td> <td class="cellrowborder" width="19.71%"><p>Record&lt;string, string&gt;</p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>自定义数据。键的字符长度范围：[0, 128]，值的字符长度范围：[0, 1024]，单次上报Record数量范围：[1, 100]。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>可多次上报数据，已上报数据的键与值长度总和不能超过128000个字符。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="25.369999999999997%"><p>tag</p> </td> <td class="cellrowborder" width="19.71%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameperformance#section51091113529">GameCustomTag</a></p> </td> <td class="cellrowborder" width="14.29%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>自定义标签。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error. Possible causes: 3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1010300003</p> </td> <td class="cellrowborder" width="50%"><p>Invalid request.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-xua-c106="" class="highlight-div"><div _ngcontent-xua-c106="" class="highlight-div-header"><div _ngcontent-xua-c106="" class="highlight-div-header-left"><div _ngcontent-xua-c106="" class="handle-button expand-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xua-c106="" class="highlight-div-header-right"><div _ngcontent-xua-c106="" class="handle-button ai-button"></div><div _ngcontent-xua-c106="" class="handle-button line-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xua-c106="" class="handle-button theme-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xua-c106="" class="handle-button copy-button"><div _ngcontent-xua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xua-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 上报带崩溃标签的游戏自定义数据</span></li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>:<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {<span class="hljs-string">'custom'</span>:<span class="hljs-string">'gaming'</span>};</li><li>  gamePerformance.<span class="hljs-title function_">addGameCustomData</span>(data, gamePerformance.<span class="hljs-property">GameCustomTag</span>.<span class="hljs-property">CRASH</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-comment">// 上报自定义数据失败</span></li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'demo'</span>, <span class="hljs-string">`Failed to add custom data. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>