<h1 _ngcontent-vdg-c119="" class="doc-title ng-star-inserted" title="gamePlayer（基础游戏服务）"> gamePlayer（基础游戏服务） </h1>

<div _ngcontent-vdg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供接入Game Service Kit（游戏服务）的基础游戏服务能力。</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="tiledSection"><h2 id="section164051883419" device-type="phone,tablet,2in1,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section164051883419" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1033653365917" device-type="phone,tablet,2in1,tv">GSKLocalPlayer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1033653365917" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p><span style="color: rgb(36,39,40);">玩家信息类</span>。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>gamePlayerId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>游戏玩家ID。转移场景下gamePlayerId不为空。最大长度256个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>teamPlayerId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>团队玩家ID。绑定场景下teamPlayerId不为空。最大长度256个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>idCompatibleType</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>ID兼容类型。</p> <ul id="ZH-CN_TOPIC_0000002485678657__ul51843416337"><li id="li1566619672210">0：gamePlayerId与openId、playerId不兼容，即调用<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section17453143012584">getLocalPlayer</a>接口时，玩家首次登录游戏生成的玩家标识；teamPlayerId与unionId不兼容，即调用<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section157848375136">unionLogin</a>接口时，玩家首次登录游戏未选择转移APK游戏数据生成的玩家标识。</li><li id="li1418416493318">1：gamePlayerId兼容playerId，即玩家首次登录游戏时选择转移APK游戏数据，且APK游戏使用了playerId作为玩家标识，Game Service Kit将playerId作为新的gamePlayerId。</li><li id="li4184184133311">2：gamePlayerId兼容openId，即玩家首次登录游戏时选择转移APK游戏数据，且APK游戏使用了openId作为玩家标识，Game Service Kit将openId作为新的gamePlayerId。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>level</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>玩家等级。<strong>此参数为预留参数，当前固定返回0。</strong></p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>playableTime</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>玩家本次可玩时长，单位：分钟。<strong>此参数为预留参数，当前固定返回-1。</strong></p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>-1表示成年玩家返回的当前可玩时长，大于等于0则表示未成年玩家当前的可玩时长。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>loginIdType</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>登录游戏时，玩家使用的账号ID类型。</p> <ul><li>1：gamePlayerId</li><li>2：teamPlayerId</li></ul> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section116223815415" device-type="phone,tablet,2in1,tv">GSKPlayerRole<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section116223815415" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p><span style="color: rgb(36,39,40);">玩家角色信息类</span>。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>gamePlayerId、teamPlayerId和thirdOpenId不能同时为空。</p> </div></div></div>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.3" width="15%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.4" width="15%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.5" width="40%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>roleId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>玩家角色ID，请勿传""和null，最大长度128个字符。如果游戏没有角色系统，请传入“0”。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>roleName</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>玩家角色名，请勿传""和null，最大长度128个字符。如果游戏没有角色系统，请传入“default”。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>serverId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="40%"><p>玩家区服ID。最大长度128个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>serverName</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="40%"><p>玩家区服名。最大长度128个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>gamePlayerId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="40%"><p>游戏玩家ID。最大长度256个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>teamPlayerId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="40%"><p>团队玩家ID。游戏官方账号与华为teamPlayerId绑定场景下可传入此参数。最大长度256个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>thirdOpenId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="40%"><p>游戏官方账号ID。最大长度128个字符。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1036174617108" device-type="phone,tablet,2in1,tv">ThirdUserInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1036174617108" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>账号合规信息类。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>华为账号合规校验时，无需传isRealName、isAdult、ageRange参数。</p> </div></div></div>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>thirdOpenId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>游戏官方账号ID。最大长度128个字符。如无，则传空字符串""。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>isRealName</p> </td> <td class="cellrowborder" width="15%"><p>boolean</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>玩家是否实名。</p> <ul><li>true：已实名</li><li>false：未实名</li></ul> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>isAdult</p> </td> <td class="cellrowborder" width="15%"><p>boolean</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>玩家账号实名认证是否为成年人。</p> <ul><li>true：已成年</li><li>false：未成年</li></ul> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>ageRange</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section12735946153615">ThirdUserAgeRange</a></p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>玩家当前年龄段信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1030452961619" device-type="phone,tablet,2in1,tv">UnionLoginParam<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1030452961619" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>联合登录参数。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>thirdAccountInfos</p> </td> <td class="cellrowborder" width="15%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section412355692217">ThirdAccountInfo</a>&gt;</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>游戏官方账号信息，用于在联合登录面板中展示。不同账号的账号名称不能相同。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>若只需实现华为账号快速登录，此参数传空数组。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>showLoginDialog</p> </td> <td class="cellrowborder" width="15%"><p>boolean</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>是否强制弹出联合登录面板，允许玩家选择重新登录。</p> <ul><li>true：调用<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section157848375136">unionLogin</a>接口时，强制弹出联合登录面板。<div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>当需要切换账号或进行其他操作时，请将此值设置为true。</p> </div></div></div> </li><li>false：调用<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section157848375136">unionLogin</a>接口时，优先使用玩家上一次的选择，不强制弹出联合登录面板。</li></ul> <p>默认为false。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>loginPanelType</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section20129173413913">LoginPanelType</a></p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>联合登录面板上“游戏官方账号”按钮的类型：</p> <ul><li>BUTTON</li><li>ICON</li></ul> <p>默认为ICON。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>若使用BUTTON类型，支持玩家点击后跳转至游戏官方自己的登录界面。</li><li>若使用ICON类型，支持在联合登录面板向玩家展示三种登录账号（包括跳转至官方账号登录页面）。</li></ul> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section412355692217" device-type="phone,tablet,2in1,tv">ThirdAccountInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section412355692217" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>游戏官方账号信息。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>accountIcon</p> </td> <td class="cellrowborder" width="15%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resource" target="_blank">Resource</a></p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>游戏官方账号图标资源信息。总和最大支持35KB。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前仅支持<strong>media</strong>目录下的图片。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>accountName</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>游戏开放给开发者接入的账号类型名字，例如“官方账号”、“xx账号”等，并不是具体某个玩家ID或开发者ID。</p> <p>最大长度19个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section331911518595" device-type="phone,tablet,2in1,tv">BoundPlayerInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section331911518595" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>绑定信息类。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.3" width="15%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.4" width="15%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.5" width="40%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>thirdOpenId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>游戏官方账号ID。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>bindType</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section198841412616">BindType</a></p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>与游戏官方账号绑定的类型。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section198841412616" device-type="phone,tablet,2in1,tv">BindType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section198841412616" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>账号绑定枚举类。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.1" width="30%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.2" width="30%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.3" width="40%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="30%"><p>CP_ACCOUNT_LEVEL</p> </td> <td class="cellrowborder" width="30%"><p>0</p> </td> <td class="cellrowborder" width="40%"><p>开发者级别。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>APP_LEVEL</p> </td> <td class="cellrowborder" width="30%"><p>1</p> </td> <td class="cellrowborder" width="40%"><p>游戏级别。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section556415719255" device-type="phone,tablet,2in1,tv">UnionLoginResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section556415719255" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>联合登录结果。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>accountName</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>账号名。</p> <ul><li>如玩家选择华为账号，则返回“hw_account”。</li><li>如玩家选择开发者提供的游戏官方账号，返回游戏官方账号名。</li><li>如果登录过程中出现异常，则返回“official_account”，表示目前无法返回具体的账号名。建议从开发者提供的游戏官方账号中选择其中一个登录。</li></ul> <p>最大长度19个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>needBinding</p> </td> <td class="cellrowborder" width="15%"><p>boolean</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>玩家标识是否需要绑定游戏官方账号。</p> <ul><li>true：为绑定场景，需要绑定游戏官方账号。</li><li>false：为转移场景，无需绑定游戏官方账号。</li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>游戏服务器需要根据玩家选择的登录场景进行适配：</p> <ul><li>转移场景下，服务器需与HarmonyOS系统的渠道包策略保持一致。</li><li>绑定场景下/选择游戏官方账号登录场景下，服务器策略和游戏官方包保持一致。</li></ul> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>boundPlayerInfo</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section331911518595">BoundPlayerInfo</a></p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>与华为PlayerId绑定的游戏官方账号信息。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>localPlayer</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section1033653365917">GSKLocalPlayer</a></p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>玩家信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section7712953312" device-type="phone,tablet,2in1,tv">PlayerChangedResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7712953312" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>玩家变化结果。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.3" width="15%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.4" width="15%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.5" width="40%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>event</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section57008633419">PlayerChangedEvent</a></p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>玩家变化事件。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>resultInfo</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>JSON字符串，返回当前事件的相关信息，最大长度1024个字符。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section57008633419" device-type="phone,tablet,2in1,tv">PlayerChangedEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section57008633419" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>玩家变化事件枚举类。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.5.1.4.1.1" width="30%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.4.1.2" width="30%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.4.1.3" width="40%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="30%"><p>SWITCH_GAME_ACCOUNT</p> </td> <td class="cellrowborder" width="30%"><p>0</p> </td> <td class="cellrowborder" width="40%"><p>玩家切换游戏账号。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section12735946153615" device-type="phone,tablet,2in1,tv">ThirdUserAgeRange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12735946153615" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>游戏官方账号的年龄信息枚举类。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.6.1.4.1.1" width="30%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.4.1.2" width="30%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.4.1.3" width="40%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="30%"><p>AGE_RANGE_8</p> </td> <td class="cellrowborder" width="30%"><p>1</p> </td> <td class="cellrowborder" width="40%"><p>玩家实名认证年龄小于8周岁。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>AGE_RANGE_16</p> </td> <td class="cellrowborder" width="30%"><p>2</p> </td> <td class="cellrowborder" width="40%"><p>玩家实名认证年龄大于等于8周岁，且小于16周岁。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>AGE_RANGE_18</p> </td> <td class="cellrowborder" width="30%"><p>3</p> </td> <td class="cellrowborder" width="40%"><p>玩家实名认证年龄大于等于16周岁，且小于18周岁。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>AGE_RANGE_ADULT</p> </td> <td class="cellrowborder" width="30%"><p>4</p> </td> <td class="cellrowborder" width="40%"><p>玩家实名认证年龄大于等于18周岁。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section20129173413913" device-type="phone,tablet,2in1,tv">LoginPanelType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section20129173413913" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>登录面板枚举类。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.1" width="30%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.2" width="30%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.3" width="40%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="30%"><p>ICON</p> </td> <td class="cellrowborder" width="30%"><p>0</p> </td> <td class="cellrowborder" width="40%"><p>游戏官方账号入口展示为账号图标。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>BUTTON</p> </td> <td class="cellrowborder" width="30%"><p>1</p> </td> <td class="cellrowborder" width="40%"><p>游戏官方账号入口展示为按钮。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section5696144516164" device-type="phone,tablet,2in1,tv">GameErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5696144516164" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p><span style="color: rgb(36,39,40);">错误码枚举类</span>。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.4.1.1" width="30%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.4.1.2" width="30%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.4.1.3" width="40%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="30%"><p>INTERNAL_ERROR</p> </td> <td class="cellrowborder" width="30%"><p>1002000001</p> </td> <td class="cellrowborder" width="40%"><p>游戏内部通用错误。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>NETWORK_ERROR</p> </td> <td class="cellrowborder" width="30%"><p>1002000002</p> </td> <td class="cellrowborder" width="40%"><p>网络连接错误。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>GET_HWID_INFO_FAILED</p> </td> <td class="cellrowborder" width="30%"><p>1002000003</p> </td> <td class="cellrowborder" width="40%"><p>未查到华为账号相关信息。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>REALNAME_CANCELED_OR_NOT_REALNAME</p> </td> <td class="cellrowborder" width="30%"><p>1002000004</p> </td> <td class="cellrowborder" width="40%"><p>实名认证返回强制实名但用户取消，或需要强制实名但没有实名。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>COUNTRY_OR_REGION_NOT_SUPPORTED</p> </td> <td class="cellrowborder" width="30%"><p>1002000005</p> </td> <td class="cellrowborder" width="40%"><p>只支持服务地和注册地均为中国境内（不包含中国香港、中国澳门、中国台湾）的华为账号。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>ANTI_ADDICTION_ERROR</p> </td> <td class="cellrowborder" width="30%"><p>1002000006</p> </td> <td class="cellrowborder" width="40%"><p>玩家未成年并且当前不在可游戏时间。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>PRODUCT_BELONG_REGION_ERROR</p> </td> <td class="cellrowborder" width="30%"><p>1002000007</p> </td> <td class="cellrowborder" width="40%"><p>商品所属的应用未在指定国家/地区上架。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>HWID_IN_BLOCKLIST</p> </td> <td class="cellrowborder" width="30%"><p>1002000008</p> </td> <td class="cellrowborder" width="40%"><p>该华为账号在禁止名单中。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>GAME_ACCOUNT_UNAVAILABLE</p> </td> <td class="cellrowborder" width="30%"><p>1002000009</p> </td> <td class="cellrowborder" width="40%"><p>当前游戏不支持第三方游戏账号。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>PLAYER_ID_INVALID</p> </td> <td class="cellrowborder" width="30%"><p>1002000010</p> </td> <td class="cellrowborder" width="40%"><p>华为teamPlayerId与当前玩家不匹配。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>AGREEMENT_NOT_AGREED</p> </td> <td class="cellrowborder" width="30%"><p>1002000011</p> </td> <td class="cellrowborder" width="40%"><p>玩家未同意隐私协议。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>OPEN_ID_OR_PLAYER_ID_BOUND</p> </td> <td class="cellrowborder" width="30%"><p>1002000012</p> </td> <td class="cellrowborder" width="40%"><p>游戏官方账号与华为teamPlayerId已绑定。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>OPEN_ID_AND_PLAYER_ID_NOT_BOUND</p> </td> <td class="cellrowborder" width="30%"><p>1002000013</p> </td> <td class="cellrowborder" width="40%"><p>游戏官方账号与华为teamPlayerId未绑定。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>CURRENT_API_NOT_AVAILABLE_FOR_GAME</p> </td> <td class="cellrowborder" width="30%"><p>1002000014</p> </td> <td class="cellrowborder" width="40%"><p>此接口不适用于此游戏。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>CURRENT_PLAYER_INFO_INVALID</p> </td> <td class="cellrowborder" width="30%"><p>1002000015</p> </td> <td class="cellrowborder" width="40%"><p>当前玩家信息无效。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>UNION_LOGIN_CANCELED</p> </td> <td class="cellrowborder" width="30%"><p>1002000016</p> </td> <td class="cellrowborder" width="40%"><p>玩家取消联合登录。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>ILLEGAL_APPLICATION</p> </td> <td class="cellrowborder" width="30%"><p>1002000017</p> </td> <td class="cellrowborder" width="40%"><p>非法应用。</p> <p><strong>起始版本：</strong>5.0.0(12)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>NOT_MINI_GAME_ERROR</p> </td> <td class="cellrowborder" width="30%"><p>1002000018</p> </td> <td class="cellrowborder" width="40%"><p>此API仅支持小游戏。</p> <p><strong>起始版本：</strong>6.0.1(21)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>PARAM_ERROR</p> </td> <td class="cellrowborder" width="30%"><p>1002000019</p> </td> <td class="cellrowborder" width="40%"><p>参数错误。</p> <p><strong>起始版本：</strong>6.0.1(21)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>USER_CANCELED</p> </td> <td class="cellrowborder" width="30%"><p>1002000020</p> </td> <td class="cellrowborder" width="40%"><p>当前操作被用户取消。</p> <p><strong>起始版本：</strong>6.0.1(21)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>CALLS_FREQUENT</p> </td> <td class="cellrowborder" width="30%"><p>1002000021</p> </td> <td class="cellrowborder" width="40%"><p>API调用过于频繁。</p> <p><strong>起始版本：</strong>6.0.1(21)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>PAY_PRODUCT_INVALID</p> </td> <td class="cellrowborder" width="30%"><p>1002000050</p> </td> <td class="cellrowborder" width="40%"><p>无效的商品信息。</p> <p><strong>起始版本：</strong>6.0.1(21)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>PAY_PRODUCT_OWNED</p> </td> <td class="cellrowborder" width="30%"><p>1002000051</p> </td> <td class="cellrowborder" width="40%"><p>由于已经拥有该商品，购买失败。</p> <p><strong>起始版本：</strong>6.0.1(21)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>PAY_PRODUCT_NOT_OWNED</p> </td> <td class="cellrowborder" width="30%"><p>1002000052</p> </td> <td class="cellrowborder" width="40%"><p>由于未拥有该商品，发货失败。</p> <p><strong>起始版本：</strong>6.0.1(21)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>PAY_PRODUCT_CONSUMED</p> </td> <td class="cellrowborder" width="30%"><p>1002000053</p> </td> <td class="cellrowborder" width="40%"><p>此次购买已经完成发货，无需重复发货。</p> <p><strong>起始版本：</strong>6.0.1(21)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>PAY_ACCOUNT_REGION_UNSUPPORTED</p> </td> <td class="cellrowborder" width="30%"><p>1002000054</p> </td> <td class="cellrowborder" width="40%"><p>用户账号所在服务地不在IAP Kit支持结算的国家/地区中。</p> <p><strong>起始版本：</strong>6.0.1(21)。</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>PAY_DEAL_REJECTED</p> </td> <td class="cellrowborder" width="30%"><p>1002000056</p> </td> <td class="cellrowborder" width="40%"><p>用户交易被拒绝。</p> <p><strong>起始版本：</strong>6.0.1(21)。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section131971556806" device-type="phone,tablet,2in1,tv">gamePlayer.init<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section131971556806" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>init(context<span style="color: rgb(154,110,58);">:</span> common.UIAbilityContext): Promise&lt;void&gt;</p> <p>游戏启动时，需要对Game Service Kit进行初始化。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.6.2.1.5.1.1" width="25.22%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.2.1.5.1.2" width="21.18%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.2.1.5.1.3" width="12.740000000000002%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.2.1.5.1.4" width="40.86%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.22%"><p>context</p> </td> <td class="cellrowborder" width="21.18%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="12.740000000000002%"><p>是</p> </td> <td class="cellrowborder" width="40.86%"><p>上下文信息。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>严格要求继承UIAbility，并且获取上下文的时机是onWindowStageCreate生命周期中页面加载成功后。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>  windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">"pages/index"</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      gamePlayer.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in initing.`</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to init. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section225333655719" device-type="phone,tablet,2in1,tv">gamePlayer.init<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section225333655719" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>init(context<span style="color: rgb(154,110,58);">:</span> common.UIAbilityContext, callback: AsyncCallback&lt;void&gt;): void</p> <p>游戏启动时，需要对Game Service Kit进行初始化。使用callback回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.6.2.1.5.1.1" width="25.259999999999998%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.2.1.5.1.2" width="20.419999999999998%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.2.1.5.1.3" width="13.43%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.2.1.5.1.4" width="40.89%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.259999999999998%"><p>context</p> </td> <td class="cellrowborder" width="20.419999999999998%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="13.43%"><p>是</p> </td> <td class="cellrowborder" width="40.89%"><p>上下文信息。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>严格要求继承UIAbility，并且获取上下文的时机是onWindowStageCreate生命周期中页面加载成功后。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="25.259999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="20.419999999999998%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="13.43%"><p>是</p> </td> <td class="cellrowborder" width="40.89%"><p>回调函数。当初始化成功，err为undefined，否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>  windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">"pages/index"</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      gamePlayer.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>,<span class="hljs-function">()=&gt;</span>{</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in initing.`</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to init. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  });</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section157848375136" device-type="phone,tablet,2in1,tv">gamePlayer.unionLogin<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section157848375136" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>unionLogin(context: common.UIAbilityContext, loginParam: UnionLoginParam): Promise&lt;UnionLoginResult&gt;</p> <p>华为账号和游戏官方账号联合登录。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.6.2.1.5.1.1" width="25.22%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.2.1.5.1.2" width="21.36%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.2.1.5.1.3" width="12.93%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.2.1.5.1.4" width="40.489999999999995%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.22%"><p>context</p> </td> <td class="cellrowborder" width="21.36%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="12.93%"><p>是</p> </td> <td class="cellrowborder" width="40.489999999999995%"><p>上下文信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25.22%"><p>loginParam</p> </td> <td class="cellrowborder" width="21.36%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section1030452961619">UnionLoginParam</a></p> </td> <td class="cellrowborder" width="12.93%"><p>是</p> </td> <td class="cellrowborder" width="40.489999999999995%"><p>联合登录参数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section556415719255">UnionLoginResult</a>&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。返回联合登录结果对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000002</p> </td> <td class="cellrowborder" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000003</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is not signed in or not authorized.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000004</p> </td> <td class="cellrowborder" width="50%"><p>User cancels real name authentication or not real name.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000005</p> </td> <td class="cellrowborder" width="50%"><p>The country or region of the signed-in Huawei ID does not support.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000008</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is in the blocklist.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000011</p> </td> <td class="cellrowborder" width="50%"><p>Agreement not agreed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000014</p> </td> <td class="cellrowborder" width="50%"><p>This interface is not available for this game.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000016</p> </td> <td class="cellrowborder" width="50%"><p>Union login canceled by user.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000017</p> </td> <td class="cellrowborder" width="50%"><p>Illegal application identity.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">thirdAccountInfo1</span>: gamePlayer.<span class="hljs-property">ThirdAccountInfo</span> = {</li><li>  <span class="hljs-string">'accountName'</span>: <span class="hljs-string">'testName1'</span>, <span class="hljs-comment">// 游戏开放给开发者接入的账号类型名字，例如“官方账号”、“xx账号”等，并不是具体某个玩家ID或开发者ID。</span></li><li>  <span class="hljs-string">'accountIcon'</span>: $r(<span class="hljs-string">'app.media.icon'</span>) <span class="hljs-comment">// 游戏官方账号图标资源信息，图标大小总和不能超过35KB。</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">request</span>: gamePlayer.<span class="hljs-property">UnionLoginParam</span> = {</li><li>  <span class="hljs-attr">showLoginDialog</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否弹出联合登录面板。true表示强制弹出面板，false表示优先使用玩家上一次的登录选择，不弹出联合登录面板，若玩家首次登录或卸载重装，则正常弹出。</span></li><li>  <span class="hljs-attr">thirdAccountInfos</span>: [</li><li>    thirdAccountInfo1 <span class="hljs-comment">// 若游戏无官包或无官方账号体系，请传空数组。</span></li><li>  ]</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">unionLogin</span>(context, request).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: gamePlayer.UnionLoginResult</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in logining: <span class="hljs-subst">${result?.accountName}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to login. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to login. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section17453143012584" device-type="phone,tablet,2in1,tv">gamePlayer.getLocalPlayer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17453143012584" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getLocalPlayer(context<span style="color: rgb(154,110,58);">:</span> common.UIAbilityContext): Promise&lt;GSKLocalPlayer&gt;</p> <p>获取玩家信息。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.6.2.1.5.1.1" width="25.169999999999998%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.2.1.5.1.2" width="21.63%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.2.1.5.1.3" width="12.57%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.2.1.5.1.4" width="40.63%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.169999999999998%"><p>context</p> </td> <td class="cellrowborder" width="21.63%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="12.57%"><p>是</p> </td> <td class="cellrowborder" width="40.63%"><p>上下文信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.7.2.1.3.1.1" width="44.85%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.2.1.3.1.2" width="55.15%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="44.85%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section1033653365917">GSKLocalPlayer</a>&gt;</p> </td> <td class="cellrowborder" width="55.15%"><p>Promise对象。返回玩家信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000002</p> </td> <td class="cellrowborder" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000003</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is not signed in or not authorized.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000004</p> </td> <td class="cellrowborder" width="50%"><p>User cancels real name authentication or not real name.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000005</p> </td> <td class="cellrowborder" width="50%"><p>The country or region of the signed-in Huawei ID does not support.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000006</p> </td> <td class="cellrowborder" width="50%"><p>User is underage and has no playable time.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000011</p> </td> <td class="cellrowborder" width="50%"><p>Agreement not agreed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000014</p> </td> <td class="cellrowborder" width="50%"><p>This interface is not available for this game.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000017</p> </td> <td class="cellrowborder" width="50%"><p>Illegal application identity.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">getLocalPlayer</span>(context).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting: <span class="hljs-subst">${result?.gamePlayerId}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to get. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to get. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section3614173614593" device-type="phone,tablet,2in1,tv">gamePlayer.getLocalPlayer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3614173614593" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getLocalPlayer(context<span style="color: rgb(154,110,58);">:</span> common.UIAbilityContext, callback: AsyncCallback&lt;GSKLocalPlayer&gt;): void</p> <p>获取玩家信息。使用callback回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.6.2.1.5.1.1" width="25.169999999999998%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.2.1.5.1.2" width="21.51%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.2.1.5.1.3" width="12.659999999999998%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.2.1.5.1.4" width="40.660000000000004%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.169999999999998%"><p>context</p> </td> <td class="cellrowborder" width="21.51%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="12.659999999999998%"><p>是</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>上下文信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25.169999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="21.51%"><p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section1033653365917">GSKLocalPlayer</a>&gt;</p> </td> <td class="cellrowborder" width="12.659999999999998%"><p>是</p> </td> <td class="cellrowborder" width="40.660000000000004%"><p>回调函数。当获取玩家信息成功，err为undefined，否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000002</p> </td> <td class="cellrowborder" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000003</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is not signed in or not authorized.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000004</p> </td> <td class="cellrowborder" width="50%"><p>User cancels real name authentication or not real name.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000005</p> </td> <td class="cellrowborder" width="50%"><p>The country or region of the signed-in Huawei ID does not support.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000006</p> </td> <td class="cellrowborder" width="50%"><p>User is underage and has no playable time.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000011</p> </td> <td class="cellrowborder" width="50%"><p>Agreement not agreed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000014</p> </td> <td class="cellrowborder" width="50%"><p>This interface is not available for this game.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000017</p> </td> <td class="cellrowborder" width="50%"><p>Illegal application identity.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">getLocalPlayer</span>(context, <span class="hljs-function">(<span class="hljs-params">error, result</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to get. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting: <span class="hljs-subst">${result?.gamePlayerId}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to get. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section2090261116551" device-type="phone,tablet,2in1,tv">gamePlayer.bindPlayer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2090261116551" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>bindPlayer(context: common.UIAbilityContext, thirdOpenId: string, teamPlayerId: string): Promise&lt;void&gt;</p> <p>将玩家华为账号对应的teamPlayerId与游戏官方账号绑定。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.6.2.1.5.1.1" width="25.22%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.2.1.5.1.2" width="21.36%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.2.1.5.1.3" width="12.67%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.2.1.5.1.4" width="40.75%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.22%"><p>context</p> </td> <td class="cellrowborder" width="21.36%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="12.67%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>上下文信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25.22%"><p>thirdOpenId</p> </td> <td class="cellrowborder" width="21.36%"><p>string</p> </td> <td class="cellrowborder" width="12.67%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>游戏官方账号ID。最大长度128个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="25.22%"><p>teamPlayerId</p> </td> <td class="cellrowborder" width="21.36%"><p>string</p> </td> <td class="cellrowborder" width="12.67%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>玩家华为账号对应的teamPlayerId。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000002</p> </td> <td class="cellrowborder" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000003</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is not signed in or not authorized.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000005</p> </td> <td class="cellrowborder" width="50%"><p>The country or region of the signed-in Huawei ID does not support.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000010</p> </td> <td class="cellrowborder" width="50%"><p>The playerId is not current player.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000011</p> </td> <td class="cellrowborder" width="50%"><p>Agreement not agreed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000012</p> </td> <td class="cellrowborder" width="50%"><p>The thirdOpenId or teamPlayerId has been bound.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000017</p> </td> <td class="cellrowborder" width="50%"><p>Illegal application identity.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> thirdOpenId = <span class="hljs-string">'123xxxx'</span>;</li><li><span class="hljs-keyword">let</span> teamPlayerId = <span class="hljs-string">'456xxx'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">bindPlayer</span>(context, thirdOpenId, teamPlayerId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in binding.`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to bind. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to bind. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section57861515615" device-type="phone,tablet,2in1,tv">gamePlayer.unbindPlayer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section57861515615" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>unbindPlayer(context: common.UIAbilityContext, thirdOpenId: string, teamPlayerId: string): Promise&lt;void&gt;</p> <p>将玩家华为账号对应的teamPlayerId与游戏官方账号解绑。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.6.2.1.5.1.1" width="25.09%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.6.2.1.5.1.2" width="21.490000000000002%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.6.2.1.5.1.3" width="12.6%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.6.2.1.5.1.4" width="40.82%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.09%"><p>context</p> </td> <td class="cellrowborder" width="21.490000000000002%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="12.6%"><p>是</p> </td> <td class="cellrowborder" width="40.82%"><p>上下文信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25.09%"><p>thirdOpenId</p> </td> <td class="cellrowborder" width="21.490000000000002%"><p>string</p> </td> <td class="cellrowborder" width="12.6%"><p>是</p> </td> <td class="cellrowborder" width="40.82%"><p>游戏官方账号ID。</p> </td> </tr> <tr><td class="cellrowborder" width="25.09%"><p>teamPlayerId</p> </td> <td class="cellrowborder" width="21.490000000000002%"><p>string</p> </td> <td class="cellrowborder" width="12.6%"><p>是</p> </td> <td class="cellrowborder" width="40.82%"><p>玩家华为账号对应的teamPlayerId。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000002</p> </td> <td class="cellrowborder" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000003</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is not signed in or not authorized.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000005</p> </td> <td class="cellrowborder" width="50%"><p>The country or region of the signed-in Huawei ID does not support.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000010</p> </td> <td class="cellrowborder" width="50%"><p>The playerId is not current player.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000011</p> </td> <td class="cellrowborder" width="50%"><p>Agreement not agreed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000013</p> </td> <td class="cellrowborder" width="50%"><p>The thirdOpenId and teamPlayerId are not bound.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000017</p> </td> <td class="cellrowborder" width="50%"><p>Illegal application identity.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> thirdOpenId = <span class="hljs-string">'123xxxx'</span>;</li><li><span class="hljs-keyword">let</span> teamPlayerId = <span class="hljs-string">'456xxx'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">unbindPlayer</span>(context, thirdOpenId, teamPlayerId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in unbinding.`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to unbind. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to unbind. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section15119154416715" device-type="phone,tablet,2in1,tv">gamePlayer.verifyLocalPlayer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15119154416715" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>verifyLocalPlayer(context: common.UIAbilityContext, thirdUserInfo: ThirdUserInfo): Promise&lt;void&gt;</p> <p>合规校验接口，校验当前设备登录的账号的实名认证、游戏防沉迷信息。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.6.2.1.5.1.1" width="25.019999999999996%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.2.1.5.1.2" width="21.759999999999998%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.2.1.5.1.3" width="12.34%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.6.2.1.5.1.4" width="40.88%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.019999999999996%"><p>context</p> </td> <td class="cellrowborder" width="21.759999999999998%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="12.34%"><p>是</p> </td> <td class="cellrowborder" width="40.88%"><p>上下文信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25.019999999999996%"><p>thirdUserInfo</p> </td> <td class="cellrowborder" width="21.759999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section1036174617108">ThirdUserInfo</a></p> </td> <td class="cellrowborder" width="12.34%"><p>是</p> </td> <td class="cellrowborder" width="40.88%"><p>游戏自己维护的玩家合规信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.7.2.1.3.1.1" width="39.72%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.2.1.3.1.2" width="60.28%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.72%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.28%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000002</p> </td> <td class="cellrowborder" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000003</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is not signed in or not authorized.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000004</p> </td> <td class="cellrowborder" width="50%"><p>User cancels real name authentication or not real name.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000005</p> </td> <td class="cellrowborder" width="50%"><p>The country or region of the signed-in Huawei ID does not support.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000006</p> </td> <td class="cellrowborder" width="50%"><p>User is underage and has no playable time.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000008</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is in the blocklist.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000011</p> </td> <td class="cellrowborder" width="50%"><p>Agreement not agreed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000015</p> </td> <td class="cellrowborder" width="50%"><p>The current player information is invalid. Execute the login process again to obtain the player information.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000017</p> </td> <td class="cellrowborder" width="50%"><p>Illegal application identity.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-comment">// thirdUserInfo是使用游戏官方账号登录游戏的玩家合规信息，接入华为账号登录时无需传入该信息，但在接入游戏官方账号登录时要求传入相关信息。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">request</span>: gamePlayer.<span class="hljs-property">ThirdUserInfo</span> = {</li><li>  <span class="hljs-attr">thirdOpenId</span>: <span class="hljs-string">'123xxxx'</span>, <span class="hljs-comment">// 游戏官方账号ID，接入华为账号登录时传空。</span></li><li>  <span class="hljs-attr">isRealName</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// 玩家是否实名,该值为true时表示已实名,为false时表示未实名，接入华为账号登录时不传该字段。</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">verifyLocalPlayer</span>(context, request).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in verifying.`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to verify. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to verify. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section201561659105917" device-type="phone,tablet,2in1,tv">gamePlayer.savePlayerRole<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section201561659105917" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>savePlayerRole(context<span style="color: rgb(154,110,58);">:</span> common.UIAbilityContext, request: GSKPlayerRole): Promise&lt;void&gt;</p> <p>保存角色信息到游戏服务器。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.6.2.1.5.1.1" width="25.14%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.6.2.1.5.1.2" width="21.62%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.6.2.1.5.1.3" width="12.68%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.6.2.1.5.1.4" width="40.56%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.14%"><p>context</p> </td> <td class="cellrowborder" width="21.62%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="12.68%"><p>是</p> </td> <td class="cellrowborder" width="40.56%"><p>上下文信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25.14%"><p>request</p> </td> <td class="cellrowborder" width="21.62%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section116223815415">GSKPlayerRole</a></p> </td> <td class="cellrowborder" width="12.68%"><p>是</p> </td> <td class="cellrowborder" width="40.56%"><p>上报角色信息，玩家选择角色及区服后上报。如果游戏没有角色系统，roleId请传入“0”，roleName请传入“default”。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.7.2.1.3.1.1" width="39.65%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.2.1.3.1.2" width="60.35%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.65%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="60.35%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">request</span>: gamePlayer.<span class="hljs-property">GSKPlayerRole</span> = {</li><li>  <span class="hljs-attr">roleId</span>: <span class="hljs-string">'123'</span>, <span class="hljs-comment">// 玩家角色ID，如游戏没有角色系统，请传入“0”，务必不要传""和null。</span></li><li>  <span class="hljs-attr">roleName</span>: <span class="hljs-string">'Jason'</span>, <span class="hljs-comment">// 玩家角色名，如游戏没有角色系统，请传入“default”，务必不要传""和null。</span></li><li>  <span class="hljs-attr">serverId</span>: <span class="hljs-string">'456'</span>,</li><li>  <span class="hljs-attr">serverName</span>: <span class="hljs-string">'Zhangshan'</span>,</li><li>  <span class="hljs-attr">gamePlayerId</span>: <span class="hljs-string">'789'</span> <span class="hljs-comment">// 请根据实际获取到的gamePlayerId传值。</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">savePlayerRole</span>(context, request).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in saving.`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to save. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section584410281707" device-type="phone,tablet,2in1,tv">gamePlayer.savePlayerRole<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section584410281707" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>savePlayerRole(context<span style="color: rgb(154,110,58);">:</span> common.UIAbilityContext, request: GSKPlayerRole, callback: AsyncCallback&lt;void&gt;): void</p> <p>保存角色信息到游戏服务器。使用callback回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.6.2.1.5.1.1" width="25.22%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.2.1.5.1.2" width="21.36%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.2.1.5.1.3" width="12.740000000000002%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.2.1.5.1.4" width="40.68%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.22%"><p>context</p> </td> <td class="cellrowborder" width="21.36%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="12.740000000000002%"><p>是</p> </td> <td class="cellrowborder" width="40.68%"><p>上下文信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25.22%"><p>request</p> </td> <td class="cellrowborder" width="21.36%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section116223815415">GSKPlayerRole</a></p> </td> <td class="cellrowborder" width="12.740000000000002%"><p>是</p> </td> <td class="cellrowborder" width="40.68%"><p>上报角色信息，玩家选择角色及区服后上报。如果游戏没有角色系统，roleId请传入“0”，roleName请传入“default”。</p> </td> </tr> <tr><td class="cellrowborder" width="25.22%"><p>callback</p> </td> <td class="cellrowborder" width="21.36%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="12.740000000000002%"><p>是</p> </td> <td class="cellrowborder" width="40.68%"><p>回调函数。当保存角色信息成功，err为undefined，否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例</strong>：<div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">request</span>: gamePlayer.<span class="hljs-property">GSKPlayerRole</span> = {</li><li>  <span class="hljs-attr">roleId</span>: <span class="hljs-string">'123'</span>, <span class="hljs-comment">// 玩家角色ID，如游戏没有角色系统，请传入“0”，务必不要传""和null。</span></li><li>  <span class="hljs-attr">roleName</span>: <span class="hljs-string">'Jason'</span>, <span class="hljs-comment">// 玩家角色名，如游戏没有角色系统，请传入“default”，务必不要传""和null。</span></li><li>  <span class="hljs-attr">serverId</span>: <span class="hljs-string">'456'</span>,</li><li>  <span class="hljs-attr">serverName</span>: <span class="hljs-string">'Zhangshan'</span>,</li><li>  <span class="hljs-attr">gamePlayerId</span>: <span class="hljs-string">'789'</span> <span class="hljs-comment">// 请根据实际获取到的gamePlayerId传值。</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">savePlayerRole</span>(context, request, <span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in saving.`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to save. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1097616266227" device-type="phone,tablet,2in1,tv">gamePlayer.on('playerChanged')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1097616266227" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>on(type: 'playerChanged', callback: Callback&lt;PlayerChangedResult&gt;): void</p> <p>玩家变化事件监听。使用callback回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.6.2.1.5.1.1" width="24.63%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.2.1.5.1.2" width="21.7%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.2.1.5.1.3" width="12.61%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.2.1.5.1.4" width="41.06%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.63%"><p>type</p> </td> <td class="cellrowborder" width="21.7%"><p>string</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="41.06%"><p>监听的事件类型，固定为'playerChanged'事件。</p> </td> </tr> <tr><td class="cellrowborder" width="24.63%"><p>callback</p> </td> <td class="cellrowborder" width="21.7%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section7712953312">PlayerChangedResult</a>&gt;</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="41.06%"><p>回调函数，返回玩家变化结果。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">private</span> <span class="hljs-title function_">onPlayerChangedEventCallback</span>(<span class="hljs-params">result: gamePlayer.PlayerChangedResult</span>) {</li><li>  <span class="hljs-keyword">if</span> (result.<span class="hljs-property">event</span> === gamePlayer.<span class="hljs-property">PlayerChangedEvent</span>.<span class="hljs-property">SWITCH_GAME_ACCOUNT</span>) {</li><li>    <span class="hljs-comment">// ...</span></li><li>    <span class="hljs-comment">// 游戏号已切换，完成本地缓存清理工作后，再次调用unionLogin接口等</span></li><li>  }</li><li>}</li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-comment">// 调用on接口注册playerChanged事件监听</span></li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'playerChanged'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onPlayerChangedEventCallback</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to register. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1166994642415" device-type="phone,tablet,2in1,tv">gamePlayer.off('playerChanged')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1166994642415" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>off(type: 'playerChanged', callback?: Callback&lt;PlayerChangedResult&gt;): void</p> <p>取消玩家变化事件监听。使用callback回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.6.2.1.5.1.1" width="25.15%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.2.1.5.1.2" width="21.37%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.2.1.5.1.3" width="12.659999999999998%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.2.1.5.1.4" width="40.82%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.15%"><p>type</p> </td> <td class="cellrowborder" width="21.37%"><p>string</p> </td> <td class="cellrowborder" width="12.659999999999998%"><p>是</p> </td> <td class="cellrowborder" width="40.82%"><p>取消监听的事件类型，固定为'playerChanged'事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25.15%"><p>callback</p> </td> <td class="cellrowborder" width="21.37%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section7712953312">PlayerChangedResult</a>&gt;</p> </td> <td class="cellrowborder" width="12.659999999999998%"><p>否</p> </td> <td class="cellrowborder" width="40.82%"><p>回调函数，返回玩家变化结果。</p> <p>如果该参数不为空，则取消当前callback订阅。如果该参数为空，则取消playerChanged事件的所有callback订阅。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例1</strong>：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'playerChanged'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to unregister. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> <div class="p"><strong>示例2</strong>：<div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 参数this.onPlayerChangedEventCallback为gamePlayer.on('playerChanged', this.onPlayerChangedEventCallback)中第二个参数</span></li><li>  gamePlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'playerChanged'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onPlayerChangedEventCallback</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to unregister. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section176210299469" device-type="phone,tablet,2in1,tv">MiniGameLoginParam<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section176210299469" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>小游戏登录信息。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>6.0.1(21)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.5.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.5.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.5.1.6.1.3" width="15%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.5.1.6.1.4" width="14.99%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.5.1.6.1.5" width="40.01%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>gameAppId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="14.99%"><p>否</p> </td> <td class="cellrowborder" width="40.01%"><p>小游戏APP ID。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>extraData</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="14.99%"><p>是</p> </td> <td class="cellrowborder" width="40.01%"><p>附加信息，要求JSON String格式，可以将额外需要传入的字段以key:value的形式设置在JSON String中，并通过该参数传入。例如：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> extraData <span class="hljs-operator">=</span> <span class="hljs-string">"{<span class="hljs-subst">\"</span>key1<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>value1<span class="hljs-subst">\"</span>,<span class="hljs-subst">\"</span>key2<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>value2<span class="hljs-subst">\"</span>}"</span>;</li></ol></pre></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section859174864711" device-type="phone,tablet,2in1,tv">MiniGamePlayer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section859174864711" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>小游戏玩家信息。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>6.0.1(21)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.5.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.6.1.3" width="15%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.6.1.4" width="15%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.6.1.5" width="40%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>playerId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>玩家账号ID。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>isAdult</p> </td> <td class="cellrowborder" width="15%"><p>boolean</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>玩家账号实名认证是否为成年人。</p> <ul><li>true：已成年。</li><li>false：未成年。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>playerLevel</p> </td> <td class="cellrowborder" width="15%"><p>number</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>当前玩家账号等级。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>playerSign</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>玩家登录签名。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>signTs</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="40%"><p>玩家登录签名的时间戳。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>extraData</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="15%"><p>否</p> </td> <td class="cellrowborder" width="15%"><p>是</p> </td> <td class="cellrowborder" width="40%"><p>附加信息，要求JSON String格式，可以将额外需要传入的字段以key:value的形式设置在JSON String中，并通过该参数传入。例如：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> extraData <span class="hljs-operator">=</span> <span class="hljs-string">"{<span class="hljs-subst">\"</span>key1<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>value1<span class="hljs-subst">\"</span>,<span class="hljs-subst">\"</span>key2<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>value2<span class="hljs-subst">\"</span>}"</span>;</li></ol></pre></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section145017424483" device-type="phone,tablet,2in1,tv">gamePlayer.on('miniGameAddictionPrevented')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section145017424483" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>on(type: 'miniGameAddictionPrevented', callback: Callback&lt;string&gt;): void</p> <p>注册小游戏防沉迷事件监听。使用callback回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>6.0.1(21)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.6.2.1.5.1.1" width="24.63%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.6.2.1.5.1.2" width="21.7%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.6.2.1.5.1.3" width="12.61%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.6.2.1.5.1.4" width="41.06%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.63%"><p>type</p> </td> <td class="cellrowborder" width="21.7%"><p>string</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="41.06%"><p>监听的事件类型，固定为'miniGameAddictionPrevented'事件。</p> </td> </tr> <tr><td class="cellrowborder" width="24.63%"><p>callback</p> </td> <td class="cellrowborder" width="21.7%"><p>Callback&lt;string&gt;</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="41.06%"><p>回调函数，返回注册小游戏防沉迷事件结果。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.9.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.9.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>1002000018</p> </td> <td class="cellrowborder" width="50%"><p>This API is only provided for HarmonyOS mini games.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">private</span> <span class="hljs-title function_">miniGameAddictionPreventedCallback</span>(<span class="hljs-params">result: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-comment">// 退出小游戏</span></li><li>}</li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-comment">// 调用on接口注册小游戏防沉迷事件监听</span></li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'miniGameAddictionPrevented'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">miniGameAddictionPreventedCallback</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to register. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section171668301498" device-type="phone,tablet,2in1,tv">gamePlayer.off('miniGameAddictionPrevented')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section171668301498" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>off(type: 'miniGameAddictionPrevented', callback?: Callback&lt;string&gt;): void</p> <p>取消注册小游戏防沉迷事件监听。使用callback回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>6.0.1(21)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.6.2.1.5.1.1" width="24.63%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.2.1.5.1.2" width="21.7%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.2.1.5.1.3" width="12.61%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.2.1.5.1.4" width="41.06%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.63%"><p>type</p> </td> <td class="cellrowborder" width="21.7%"><p>string</p> </td> <td class="cellrowborder" width="12.61%"><p>是</p> </td> <td class="cellrowborder" width="41.06%"><p>监听的事件类型，固定为'miniGameAddictionPrevented'事件。</p> </td> </tr> <tr><td class="cellrowborder" width="24.63%"><p>callback</p> </td> <td class="cellrowborder" width="21.7%"><p>Callback&lt;string&gt;</p> </td> <td class="cellrowborder" width="12.61%"><p>否</p> </td> <td class="cellrowborder" width="41.06%"><p>回调函数，返回取消注册小游戏防沉迷事件结果。</p> <p>如果该参数不为空，则取消当前callback订阅。如果该参数为空，则取消miniGameAddictionPrevented事件的所有callback订阅。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>1002000018</p> </td> <td class="cellrowborder" width="50%"><p>This API is only provided for HarmonyOS mini games.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例1</strong>：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'miniGameAddictionPrevented'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to unregister. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> <p><strong>示例</strong>2：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 参数this.miniGameAddictionPreventedCallback为gamePlayer.on('miniGameAddictionPrevented', this.miniGameAddictionPreventedCallback)中第二个参数</span></li><li>  gamePlayer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'miniGameAddictionPrevented'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">miniGameAddictionPreventedCallback</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to unregister. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section44488469397" device-type="phone,tablet,2in1,tv">gamePlayer.miniGameLogin<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section44488469397" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>miniGameLogin(context: common.Context, loginParam: MiniGameLoginParam): Promise&lt;MiniGamePlayer&gt;</p> <p>登录小游戏。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>6.0.1(21)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.33.6.2.1.5.1.1" width="25.14%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.2.1.5.1.2" width="21.62%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.2.1.5.1.3" width="12.68%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.2.1.5.1.4" width="40.56%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.14%"><p>context</p> </td> <td class="cellrowborder" width="21.62%"><p>common.Context</p> </td> <td class="cellrowborder" width="12.68%"><p>是</p> </td> <td class="cellrowborder" width="40.56%"><p>上下文信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25.14%"><p>loginParam</p> </td> <td class="cellrowborder" width="21.62%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section176210299469">MiniGameLoginParam</a></p> </td> <td class="cellrowborder" width="12.68%"><p>是</p> </td> <td class="cellrowborder" width="40.56%"><p>小游戏登录信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.7.2.1.3.1.1" width="39.65%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.2.1.3.1.2" width="60.35%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.65%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section859174864711">MiniGamePlayer</a>&gt;</p> </td> <td class="cellrowborder" width="60.35%"><p>Promise对象。返回玩家信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>1002000001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000002</p> </td> <td class="cellrowborder" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000003</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is not signed in or not authorized.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000004</p> </td> <td class="cellrowborder" width="50%"><p>User cancels real name authentication or not real name.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000005</p> </td> <td class="cellrowborder" width="50%"><p>The country or region of the signed-in Huawei ID does not support.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000006</p> </td> <td class="cellrowborder" width="50%"><p>User is underage and has no playable time.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000008</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is in the blocklist.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000011</p> </td> <td class="cellrowborder" width="50%"><p>Agreement not agreed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000018</p> </td> <td class="cellrowborder" width="50%"><p>This API is only provided for HarmonyOS mini games.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000019</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">request</span>: gamePlayer.<span class="hljs-property">MiniGameLoginParam</span> = {</li><li>  <span class="hljs-string">'gameAppId'</span>: <span class="hljs-string">'123xxx'</span>, <span class="hljs-comment">// 小游戏appId</span></li><li>  <span class="hljs-string">'extraData'</span>: <span class="hljs-string">'xxx'</span> <span class="hljs-comment">// 附加信息，要求JSON String格式</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">miniGameLogin</span>(context, request).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: gamePlayer.MiniGamePlayer</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in logining`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to login. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to login. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section91831924175010" device-type="phone,tablet,2in1,tv">gamePlayer.miniGamePay<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section91831924175010" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>miniGamePay(context: common.Context, parameter: PurchaseParameter): Promise&lt;CreatePurchaseResult&gt;</p> <p>提供小游戏付费功能。使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>6.0.1(21)</p> <div class="p"><strong>参数</strong>： <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.34.6.2.1.5.1.1" width="25.14%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.2.1.5.1.2" width="21.62%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.2.1.5.1.3" width="12.68%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.2.1.5.1.4" width="40.56%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.14%"><p>context</p> </td> <td class="cellrowborder" width="21.62%"><p>common.Context</p> </td> <td class="cellrowborder" width="12.68%"><p>是</p> </td> <td class="cellrowborder" width="40.56%"><p>上下文信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25.14%"><p>parameter</p> </td> <td class="cellrowborder" width="21.62%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section1340120344598">PurchaseParameter</a></p> </td> <td class="cellrowborder" width="12.68%"><p>是</p> </td> <td class="cellrowborder" width="40.56%"><p>购买商品参数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值</strong>： <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.7.2.1.3.1.1" width="39.65%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.2.1.3.1.2" width="60.35%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="39.65%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section193852021105111">CreatePurchaseResult</a>&gt;</p> </td> <td class="cellrowborder" width="60.35%"><p>Promise对象。返回创建商品结果信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong>：</p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/gameservice-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>1002000001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000002</p> </td> <td class="cellrowborder" width="50%"><p>Network connection error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000003</p> </td> <td class="cellrowborder" width="50%"><p>The HUAWEI ID is not signed in or not authorized.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000007</p> </td> <td class="cellrowborder" width="50%"><p>The application to which the product belongs is not listed in the specified country.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000018</p> </td> <td class="cellrowborder" width="50%"><p>This API is only provided for HarmonyOS mini games.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000019</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000020</p> </td> <td class="cellrowborder" width="50%"><p>The operation was canceled by the user.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000021</p> </td> <td class="cellrowborder" width="50%"><p>Too frequent API calls.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000050</p> </td> <td class="cellrowborder" width="50%"><p>Invalid product information.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000051</p> </td> <td class="cellrowborder" width="50%"><p>Failed to purchase a product because the user already owns the product.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000052</p> </td> <td class="cellrowborder" width="50%"><p>The purchase cannot be finished because the user has not paid for it.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000053</p> </td> <td class="cellrowborder" width="50%"><p>The purchase has been finished and cannot be finished again.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000054</p> </td> <td class="cellrowborder" width="50%"><p>The country or region of the signed-in HUAWEI ID does not support IAP.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1002000056</p> </td> <td class="cellrowborder" width="50%"><p>The user is not allowed to make purchase.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { gamePlayer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.GameServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">request</span>: gamePlayer.<span class="hljs-property">PurchaseParameter</span> = {</li><li>  <span class="hljs-attr">productId</span>: <span class="hljs-string">'xxx'</span>, <span class="hljs-comment">// 待支付的商品ID</span></li><li>  <span class="hljs-attr">productType</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 待查询的商品类型</span></li><li>  <span class="hljs-attr">developerPayload</span>: <span class="hljs-string">'xxx'</span>, <span class="hljs-comment">// 商户侧保留信息，该参数长度限制为[0, 256]。若该字段有值，在支付成功后的回调结果中会原样返回给应用。</span></li><li>  <span class="hljs-attr">reservedInfo</span>: <span class="hljs-string">'xxx'</span> <span class="hljs-comment">// 要求JSON String格式，商户可以将额外需要传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  gamePlayer.<span class="hljs-title function_">miniGamePay</span>(context, request).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: gamePlayer.CreatePurchaseResult</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in paying`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to pay. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">let</span> err = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to pay. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1340120344598" device-type="phone,tablet,2in1,tv">PurchaseParameter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1340120344598" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>购买商品参数，仅供IAP Kit和小游戏使用。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>productId</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>待支付的商品ID。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>productType</p> </td> <td class="cellrowborder" width="15%"><p><a href="/consumer/cn/doc/harmonyos-references/gameservice-gameplayer#section183551656122815">ProductType</a></p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>待查询的商品类型。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>developerPayload</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>商户侧保留信息，该参数长度限制为[0, 256]。若该字段有值，在支付成功后的回调结果中会原样返回给应用。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>reservedInfo</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>要求JSON String格式，商户可以将额外需要传入的字段以key-value的形式设置在JSON String中，并通过该参数传入。例如：</p> <div _ngcontent-vdg-c106="" class="highlight-div"><div _ngcontent-vdg-c106="" class="highlight-div-header"><div _ngcontent-vdg-c106="" class="highlight-div-header-left"><div _ngcontent-vdg-c106="" class="handle-button expand-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vdg-c106="" class="highlight-div-header-right"><div _ngcontent-vdg-c106="" class="handle-button ai-button"></div><div _ngcontent-vdg-c106="" class="handle-button line-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vdg-c106="" class="handle-button theme-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vdg-c106="" class="handle-button copy-button"><div _ngcontent-vdg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vdg-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-swift" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> reservedInfo <span class="hljs-operator">=</span> <span class="hljs-string">"{<span class="hljs-subst">\"</span>key1<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>value1<span class="hljs-subst">\"</span>,<span class="hljs-subst">\"</span>key2<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>value2<span class="hljs-subst">\"</span>}"</span>;</li></ol></pre></div></div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>该字段为预留字段，可选传入，开发者暂时无需关注。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section183551656122815" device-type="phone,tablet,2in1,tv">ProductType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section183551656122815" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>商品类型，仅供IAP Kit和小游戏使用。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.36.5.1.4.1.1" width="27.900000000000002%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.4.1.2" width="12.43%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.4.1.3" width="59.67%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="27.900000000000002%"><p>CONSUMABLE</p> </td> <td class="cellrowborder" width="12.43%"><p>0</p> </td> <td class="cellrowborder" width="59.67%"><p>消耗型商品。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>NONCONSUMABLE</p> </td> <td class="cellrowborder" width="12.43%"><p>1</p> </td> <td class="cellrowborder" width="59.67%"><p>非消耗型商品。</p> </td> </tr> <tr><td class="cellrowborder" width="27.900000000000002%"><p>AUTORENEWABLE</p> </td> <td class="cellrowborder" width="12.43%"><p>2</p> </td> <td class="cellrowborder" width="59.67%"><p>自动续期订阅商品。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section111613541391" device-type="phone,tablet,2in1,tv">PurchaseResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section111613541391" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>订购商品结果信息，仅供IAP Kit使用。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.0.0(10)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.37.5.1.6.1.1" width="15%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.5.1.6.1.2" width="15%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.5.1.6.1.3" width="10%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.5.1.6.1.4" width="10%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.37.5.1.6.1.5" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15%"><p>inAppPurchaseData</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>订单数据的JSON字符串。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>signature</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>返回使用IAP私钥签署paymentData字符串生成的签名字符串。</p> </td> </tr> <tr><td class="cellrowborder" width="15%"><p>signatureAlgorithm</p> </td> <td class="cellrowborder" width="15%"><p>string</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="10%"><p>否</p> </td> <td class="cellrowborder" width="50%"><p>签名算法，固定为SHA256WithRSA/PSS。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section193852021105111" device-type="phone,tablet,2in1,tv">CreatePurchaseResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section193852021105111" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>创建商品结果信息，仅供IAP Kit和小游戏使用。</p> <p><strong>系统能力：</strong>SystemCapability.Game.GameService.GamePlayer</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.38.5.1.6.1.1" width="21%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.5.1.6.1.2" width="21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.5.1.6.1.3" width="7.000000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.5.1.6.1.4" width="7.000000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.38.5.1.6.1.5" width="44%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21%"><p>purchaseData</p> </td> <td class="cellrowborder" width="21%"><p>string</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.000000000000001%"><p>否</p> </td> <td class="cellrowborder" width="44%"><p>包含支付结果的JSON字符串。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>