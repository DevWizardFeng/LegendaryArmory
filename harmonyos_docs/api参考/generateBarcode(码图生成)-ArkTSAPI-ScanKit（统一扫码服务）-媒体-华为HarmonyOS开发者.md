<h1 _ngcontent-xnp-c119="" class="doc-title ng-star-inserted" title="generateBarcode (码图生成)"> generateBarcode (码图生成) </h1>

<div _ngcontent-xnp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块支持通过文本或字节数组生成码图。目前已支持的码制式为EAN-8、EAN-13、UPC-A、UPC-E、Codabar、Code 39、Code 93、Code 128、ITF-14、QR Code、Data Matrix、PDF417、Aztec。暂时不支持MULTIFUNCTIONAL CODE生成。</p> <p>为了方便开发者接入，我们提供了详细的样例工程供参考，推荐参考<a href="https://gitcode.com/HarmonyOS_Samples/scan-kit_-sample-code_-clientdemo_-arkts" target="_blank">示例工程</a>接入。</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <div class="tiledSection"><h2 id="section19837727102717" device-type="phone,tablet,wearable,2in1,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19837727102717" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-xnp-c106="" class="highlight-div"><div _ngcontent-xnp-c106="" class="highlight-div-header"><div _ngcontent-xnp-c106="" class="highlight-div-header-left"><div _ngcontent-xnp-c106="" class="handle-button expand-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xnp-c106="" class="highlight-div-header-right"><div _ngcontent-xnp-c106="" class="handle-button ai-button"></div><div _ngcontent-xnp-c106="" class="handle-button line-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xnp-c106="" class="handle-button theme-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xnp-c106="" class="handle-button copy-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xnp-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { generateBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1829612519455" device-type="phone,tablet,wearable,2in1,tv">ErrorCorrectionLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1829612519455" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>纠错率枚举。</p> <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.GenerateBarcode</p> <p><strong>起始版本</strong><strong>：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.1" width="33.333333333333336%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.2" width="33.333333333333336%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.3" width="33.333333333333336%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.333333333333336%"><p>LEVEL_L</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>0</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>7%纠错率。</p> </td> </tr> <tr><td class="cellrowborder" width="33.333333333333336%"><p>LEVEL_M</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>1</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>15%纠错率。</p> </td> </tr> <tr><td class="cellrowborder" width="33.333333333333336%"><p>LEVEL_Q</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>2</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>25%纠错率。</p> </td> </tr> <tr><td class="cellrowborder" width="33.333333333333336%"><p>LEVEL_H</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>3</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>30%纠错率。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section87678254617" device-type="phone,tablet,wearable,2in1,tv">CreateOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section87678254617" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>生成码参数。</p> <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.GenerateBarcode</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.1" width="23.119999999999997%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.2" width="28.33%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.3" width="10.190000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.4" width="10.4%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.5" width="27.96%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>scanType</p> </td> <td class="cellrowborder" width="28.33%"><p>scanCore.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-scancore#section113371139123212">ScanType</a></p> </td> <td class="cellrowborder" width="10.190000000000001%"><p>否</p> </td> <td class="cellrowborder" width="10.4%"><p>否</p> </td> <td class="cellrowborder" width="27.96%"><p>码类型。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>width</p> </td> <td class="cellrowborder" width="28.33%"><p>number</p> </td> <td class="cellrowborder" width="10.190000000000001%"><p>否</p> </td> <td class="cellrowborder" width="10.4%"><p>否</p> </td> <td class="cellrowborder" width="27.96%"><p>码图宽，单位：px。取值范围：[200, 4096]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>height</p> </td> <td class="cellrowborder" width="28.33%"><p>number</p> </td> <td class="cellrowborder" width="10.190000000000001%"><p>否</p> </td> <td class="cellrowborder" width="10.4%"><p>否</p> </td> <td class="cellrowborder" width="27.96%"><p>码图高，单位：px。取值范围：[200, 4096]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>margin</p> </td> <td class="cellrowborder" width="28.33%"><p>number</p> </td> <td class="cellrowborder" width="10.190000000000001%"><p>否</p> </td> <td class="cellrowborder" width="10.4%"><p>是</p> </td> <td class="cellrowborder" width="27.96%"><p>边距，单位：px，默认值为1，取值范围：[1, 10]。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>level</p> </td> <td class="cellrowborder" width="28.33%"><p><a href="/consumer/cn/doc/harmonyos-references/scan-generatebarcode#section1829612519455">ErrorCorrectionLevel</a></p> </td> <td class="cellrowborder" width="10.190000000000001%"><p>否</p> </td> <td class="cellrowborder" width="10.4%"><p>是</p> </td> <td class="cellrowborder" width="27.96%"><p>纠错水平，默认值为LEVEL_H。</p> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>此参数只在生成QR码时有效。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>backgroundColor</p> </td> <td class="cellrowborder" width="28.33%"><p>number</p> </td> <td class="cellrowborder" width="10.190000000000001%"><p>否</p> </td> <td class="cellrowborder" width="10.4%"><p>是</p> </td> <td class="cellrowborder" width="27.96%"><p>生成码图背景颜色，HEX格式颜色，默认为白色（0xffffff）。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>pixelMapColor</p> </td> <td class="cellrowborder" width="28.33%"><p>number</p> </td> <td class="cellrowborder" width="10.190000000000001%"><p>否</p> </td> <td class="cellrowborder" width="10.4%"><p>是</p> </td> <td class="cellrowborder" width="27.96%"><p>生成码图颜色，HEX格式颜色，默认为黑色（0x000000）。</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>生成码参数建议：</p> <ul><li>码图颜色和背景<p>建议使用默认颜色和背景：黑色码图、白色背景。如果码图颜色和背景对比度较小会影响识别率。</p> </li><li>码图边距<p>建议使用默认边距1，单位：px，取值范围：[1, 10]。</p> </li><li>码图大小<ol><li>生成QR Code、Data Matrix、Aztec类型的码图时，输入的width和height值相同且均大于等于200小于等于4096，单位：px，否则生成的码图过小会影响识别。</li><li>生成EAN-8、EAN-13、UPC-A、UPC-E、Codabar、Code 39、Code 93、Code 128、ITF-14、PDF417类型的码图时，建议输入的width和height值比例为2:1，并且width值需大于400，单位：px，否则生成的码图会过小影响识别。</li></ol> </li></ul> </div></div></div> <p><strong>示例：</strong></p> <div _ngcontent-xnp-c106="" class="highlight-div"><div _ngcontent-xnp-c106="" class="highlight-div-header"><div _ngcontent-xnp-c106="" class="highlight-div-header-left"><div _ngcontent-xnp-c106="" class="handle-button expand-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xnp-c106="" class="highlight-div-header-right"><div _ngcontent-xnp-c106="" class="handle-button ai-button"></div><div _ngcontent-xnp-c106="" class="handle-button line-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xnp-c106="" class="handle-button theme-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xnp-c106="" class="handle-button copy-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xnp-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { scanCore, generateBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 以QR码为例</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: generateBarcode.<span class="hljs-property">CreateOptions</span> = {</li><li>  <span class="hljs-attr">scanType</span>: scanCore.<span class="hljs-property">ScanType</span>.<span class="hljs-property">QR_CODE</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">200</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,</li><li>  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-number">0xFFFFFF</span>,</li><li>  <span class="hljs-attr">pixelMapColor</span>: <span class="hljs-number">0x000000</span>,</li><li>  <span class="hljs-attr">margin</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">level</span>: generateBarcode.<span class="hljs-property">ErrorCorrectionLevel</span>.<span class="hljs-property">LEVEL_H</span></li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1841142919352" device-type="phone,tablet,wearable,2in1,tv">generateBarcode.createBarcode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1841142919352" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createBarcode(content: string, options: CreateOptions): Promise&lt;image.PixelMap&gt;</p> <p>通过文本生成码图，使用Promise异步回调返回生成的码图。</p> <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.GenerateBarcode</p> <p><strong>起始版本</strong><strong>：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="27.122712271227122%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="27.122712271227122%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="18.631863186318633%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="27.122712271227122%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="27.122712271227122%"><p>content</p> </td> <td class="cellrowborder" width="27.122712271227122%"><p>string</p> </td> <td class="cellrowborder" width="18.631863186318633%"><p>是</p> </td> <td class="cellrowborder" width="27.122712271227122%"><p>码内容字符串，参数限制请参见<a href="/consumer/cn/doc/harmonyos-references/scan-generatebarcode#table14321511123010">content参数限制条件</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="27.122712271227122%"><p>options</p> </td> <td class="cellrowborder" width="27.122712271227122%"><p><a href="/consumer/cn/doc/harmonyos-references/scan-generatebarcode#section87678254617">CreateOptions</a></p> </td> <td class="cellrowborder" width="18.631863186318633%"><p>是</p> </td> <td class="cellrowborder" width="27.122712271227122%"><p>用于设置生成码图的参数。</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.9.2.1.3.1.1" width="30%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.2.1.3.1.2" width="70%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;image.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">PixelMap</a>&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象，返回生成的码图对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.1" width="28.17%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.2" width="71.83%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="28.17%"><p>401</p> </td> <td class="cellrowborder" width="71.83%"><p>Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="28.17%"><p>1000500001</p> </td> <td class="cellrowborder" width="71.83%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-xnp-c106="" class="highlight-div"><div _ngcontent-xnp-c106="" class="highlight-div-header"><div _ngcontent-xnp-c106="" class="highlight-div-header-left"><div _ngcontent-xnp-c106="" class="handle-button expand-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xnp-c106="" class="highlight-div-header-right"><div _ngcontent-xnp-c106="" class="handle-button ai-button"></div><div _ngcontent-xnp-c106="" class="handle-button line-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xnp-c106="" class="handle-button theme-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xnp-c106="" class="handle-button copy-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xnp-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { scanCore, generateBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 以QR码为例，码图生成参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Huawei@HMSCore'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: generateBarcode.<span class="hljs-property">CreateOptions</span> = {</li><li>  <span class="hljs-attr">scanType</span>: scanCore.<span class="hljs-property">ScanType</span>.<span class="hljs-property">QR_CODE</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">200</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">200</span></li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  generateBarcode.<span class="hljs-title function_">createBarcode</span>(content, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: image.PixelMap</span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// 码图生成接口，成功返回PixelMap格式图片</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>, <span class="hljs-string">`Succeeded in getting PixelMap by promise with options`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>      <span class="hljs-string">`Failed to get PixelMap by promise with options. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>, <span class="hljs-string">`Failed to generateBarcode. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> <p>content参数限制条件：</p>  <div class="tablenoborder"><div class="tbBox"><table id="table14321511123010" class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.16.1.3.1.1" width="17.88%"><p>生成码类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.16.1.3.1.2" width="82.12%"><p>参数建议内容</p> </th> </tr><tr><td class="cellrowborder" width="17.88%"><p>QR Code</p> </td> <td class="cellrowborder" width="82.12%"><p>支持中文，不超过512字符长度，如果内容过长会导致码复杂，影响识别。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>Aztec</p> </td> <td class="cellrowborder" width="82.12%"><p>支持中文，不超过512字符长度，如果内容过长会导致码复杂，影响识别。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>PDF417</p> </td> <td class="cellrowborder" width="82.12%"><p>支持中文，不超过512字符长度，如果内容过长会导致码复杂，影响识别。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>Data Matrix</p> </td> <td class="cellrowborder" width="82.12%"><p>不超过512字符长度，如果内容过长会导致码复杂，影响识别。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>UPC-A</p> </td> <td class="cellrowborder" width="82.12%"><p>支持11位数字输入，只支持数字，生成包含12位数字的码图，包含最后一位校验数字。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>UPC-E</p> </td> <td class="cellrowborder" width="82.12%"><p>支持7位数字输入，只支持数字，首位需要是0或1，生成包含8位数字的码图，包含最后一位校验数字。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>ITF-14</p> </td> <td class="cellrowborder" width="82.12%"><p>支持80位以内数字输入，并且需要是偶数位，只支持数字，生成包含偶数位数字的码图，如果内容过长会导致码复杂，影响识别。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>EAN-8</p> </td> <td class="cellrowborder" width="82.12%"><p>支持7位数字输入，只支持数字，生成包含8位数字的码图，包含最后一位校验数字。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>EAN-13</p> </td> <td class="cellrowborder" width="82.12%"><p>支持12位数字输入，只支持数字，首位不可以是0，生成包含13位数字的码图，包含最后一位校验数字</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>Code 39</p> </td> <td class="cellrowborder" width="82.12%"><p>不超过80字节长度，字符集可以是数字、大小写字母和- . $ / + % * SPACE英文格式符号（请注意：一个小写字母占用2个字节）。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>Code 93</p> </td> <td class="cellrowborder" width="82.12%"><p>不超过80字节长度，字符集可以是数字、大小写字母和- . $ / + % * SPACE英文格式符号（请注意：一个小写字母占用2个字节）。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>Code 128</p> </td> <td class="cellrowborder" width="82.12%"><p>不超过80字节长度，字符集可以是数字、大小写字母和- . $ / + % * SPACE英文格式符号（请注意：一个小写字母占用1个字节）。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>Codabar</p> </td> <td class="cellrowborder" width="82.12%"><p>不超过512字符长度，起始/终止符可以是ABCD中的任一个（特殊情况下，TN*E也会编码成ABCD，推荐使用ABCD）。其他字符可以是数字和- . $ / : +英文格式符号。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section129941731103410" device-type="phone,tablet,wearable,2in1,tv">generateBarcode.createBarcode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section129941731103410" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createBarcode(content: string, options: CreateOptions, callback: AsyncCallback&lt;image.PixelMap&gt;): void</p> <p>通过文本生成码图，使用Callback异步回调返回生成的码图。</p> <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.GenerateBarcode</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="20.24%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="38.43%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="11.93%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="29.4%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.24%"><p>content</p> </td> <td class="cellrowborder" width="38.43%"><p>string</p> </td> <td class="cellrowborder" width="11.93%"><p>是</p> </td> <td class="cellrowborder" width="29.4%"><p>码内容字符串。参数限制请参见<a href="/consumer/cn/doc/harmonyos-references/scan-generatebarcode#table14321511123010">content参数限制条件</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="20.24%"><p>options</p> </td> <td class="cellrowborder" width="38.43%"><p><a href="/consumer/cn/doc/harmonyos-references/scan-generatebarcode#section87678254617">CreateOptions</a></p> </td> <td class="cellrowborder" width="11.93%"><p>是</p> </td> <td class="cellrowborder" width="29.4%"><p>用于设置生成码图的参数。</p> </td> </tr> <tr><td class="cellrowborder" width="20.24%"><p>callback</p> </td> <td class="cellrowborder" width="38.43%"><p>AsyncCallback&lt;image.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">PixelMap</a>&gt;</p> </td> <td class="cellrowborder" width="11.93%"><p>是</p> </td> <td class="cellrowborder" width="29.4%"><p>回调函数。当码图生成成功，err为undefined，data为生成的码图对象image.PixelMap；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="29.18%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="70.82000000000001%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="29.18%"><p>401</p> </td> <td class="cellrowborder" width="70.82000000000001%"><p>Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="29.18%"><p>1000500001</p> </td> <td class="cellrowborder" width="70.82000000000001%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-xnp-c106="" class="highlight-div"><div _ngcontent-xnp-c106="" class="highlight-div-header"><div _ngcontent-xnp-c106="" class="highlight-div-header-left"><div _ngcontent-xnp-c106="" class="handle-button expand-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xnp-c106="" class="highlight-div-header-right"><div _ngcontent-xnp-c106="" class="handle-button ai-button"></div><div _ngcontent-xnp-c106="" class="handle-button line-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xnp-c106="" class="handle-button theme-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xnp-c106="" class="handle-button copy-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xnp-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { scanCore, generateBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 以QR码为例，码图生成参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Huawei@HMSCore'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: generateBarcode.<span class="hljs-property">CreateOptions</span> = {</li><li>  <span class="hljs-attr">scanType</span>: scanCore.<span class="hljs-property">ScanType</span>.<span class="hljs-property">QR_CODE</span>,</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">200</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">200</span></li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  generateBarcode.<span class="hljs-title function_">createBarcode</span>(content, options, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, result: image.PixelMap</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>        <span class="hljs-string">`Failed to get PixelMap by callback with options. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-comment">// 码图生成接口，成功返回PixelMap格式图片</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>, <span class="hljs-string">`Succeeded in getting PixelMap by callback with options`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>, <span class="hljs-string">`Failed to generateBarcode. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section77911759145019" device-type="phone,tablet,wearable,2in1,tv">generateBarcode.createBarcode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section77911759145019" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createBarcode(content: ArrayBuffer, options: CreateOptions): Promise&lt;image.PixelMap&gt;</p> <p>通过字节数组生成码图，使用Promise异步回调返回生成的码图。</p> <p><strong>元服务API：</strong>从版本5.0.2(14)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.GenerateBarcode</p> <p><strong>起始版本</strong><strong>：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="27.122712271227122%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="27.09270927092709%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="18.66186618661866%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="27.122712271227122%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="27.122712271227122%"><p>content</p> </td> <td class="cellrowborder" width="27.09270927092709%"><p>ArrayBuffer</p> </td> <td class="cellrowborder" width="18.66186618661866%"><p>是</p> </td> <td class="cellrowborder" width="27.122712271227122%"><p>码内容字节数组，参数限制请参见<a href="/consumer/cn/doc/harmonyos-references/scan-generatebarcode#table9792559145010">content参数限制条件</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="27.122712271227122%"><p>options</p> </td> <td class="cellrowborder" width="27.09270927092709%"><p><a href="/consumer/cn/doc/harmonyos-references/scan-generatebarcode#section87678254617">CreateOptions</a></p> </td> <td class="cellrowborder" width="18.66186618661866%"><p>是</p> </td> <td class="cellrowborder" width="27.122712271227122%"><p>用于设置生成码图的参数，ScanType仅支持QR Code。</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.2.1.3.1.1" width="30%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.2.1.3.1.2" width="70%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;image.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">PixelMap</a>&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象，返回生成的码图对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="28.9%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="71.1%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="28.9%"><p>401</p> </td> <td class="cellrowborder" width="71.1%"><p>Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="28.9%"><p>1000500001</p> </td> <td class="cellrowborder" width="71.1%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-xnp-c106="" class="highlight-div"><div _ngcontent-xnp-c106="" class="highlight-div-header"><div _ngcontent-xnp-c106="" class="highlight-div-header-left"><div _ngcontent-xnp-c106="" class="handle-button expand-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xnp-c106="" class="highlight-div-header-right"><div _ngcontent-xnp-c106="" class="handle-button ai-button"></div><div _ngcontent-xnp-c106="" class="handle-button line-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xnp-c106="" class="handle-button theme-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xnp-c106="" class="handle-button copy-button"><div _ngcontent-xnp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xnp-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { scanCore, generateBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li><span class="hljs-keyword">import</span> { buffer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Create barcode'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span></li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Flex</span>({ <span class="hljs-attr">direction</span>: <span class="hljs-title class_">FlexDirection</span>.<span class="hljs-property">Column</span>, <span class="hljs-attr">alignItems</span>: <span class="hljs-title class_">ItemAlign</span>.<span class="hljs-property">Center</span>, <span class="hljs-attr">justifyContent</span>: <span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span> }) {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'generateBarcode Promise'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span> = <span class="hljs-literal">undefined</span>;</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span> =</li><li><span class="hljs-string">'0177C10DD10F7768600202312110000063458FD14112345678FFFFD381012610b746365409210201b66636540ad0200020000000000110e617003201000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006645fbec664358ECF657CB40693c92da'</span>;</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">contentBuffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = buffer.<span class="hljs-title function_">from</span>(content, <span class="hljs-string">'hex'</span>).<span class="hljs-property">buffer</span>; <span class="hljs-comment">// 通过包含十六进制字符的字符串创建Buffer</span></li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: generateBarcode.<span class="hljs-property">CreateOptions</span> = {</li><li>          <span class="hljs-attr">scanType</span>: scanCore.<span class="hljs-property">ScanType</span>.<span class="hljs-property">QR_CODE</span>,</li><li>          <span class="hljs-attr">height</span>: <span class="hljs-number">400</span>,</li><li>          <span class="hljs-attr">width</span>: <span class="hljs-number">400</span></li><li>        }</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-comment">// 码图生成接口，成功返回PixelMap格式图片</span></li><li>          generateBarcode.<span class="hljs-title function_">createBarcode</span>(contentBuffer, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span> = pixelMap;</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">'Succeeded in creating barCode.'</span>);</li><li>          }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Failed to create barCode. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>          });</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Failed to generateBarcode. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        }</li><li>      })</li><li>      <span class="hljs-comment">// 获取生成码后显示</span></li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span>) {</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMap</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>).<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p>content参数限制条件：</p>  <div class="tablenoborder"><div class="tbBox"><table id="table9792559145010" class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.16.1.3.1.1" width="17.88%"><p>纠错水平</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.16.1.3.1.2" width="82.12%"><p>参数内容限制</p> </th> </tr><tr><td class="cellrowborder" width="17.88%"><p>LEVEL_L</p> </td> <td class="cellrowborder" width="82.12%"><p>字节数组长度限制建议不超过2048。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>LEVEL_M</p> </td> <td class="cellrowborder" width="82.12%"><p>字节数组长度限制建议不超过2048。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>LEVEL_Q</p> </td> <td class="cellrowborder" width="82.12%"><p>字节数组长度限制建议不超过1536。</p> </td> </tr> <tr><td class="cellrowborder" width="17.88%"><p>LEVEL_H</p> </td> <td class="cellrowborder" width="82.12%"><p>字节数组长度限制建议不超过1024。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>