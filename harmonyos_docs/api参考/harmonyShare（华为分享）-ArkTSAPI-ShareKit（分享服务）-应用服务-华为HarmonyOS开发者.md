<h1 _ngcontent-lyu-c119="" class="doc-title ng-star-inserted" title="harmonyShare（华为分享）"> harmonyShare（华为分享） </h1>

<div _ngcontent-lyu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供华为分享的事件注册。</p> <p><strong>模型约束：</strong>此模块的接口仅可在Stage模型下使用。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section20668113813553" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section20668113813553" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { harmonyShare } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ShareKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section98742174617" device-type="phone,2in1,tablet">SharableErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section98742174617" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>拒绝分享回调时，提供拒绝原因，用户可收到系统通知消息。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>5.0.3(15)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.1" width="33.33333333333333%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.2" width="33.33333333333333%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.4.1.3" width="33.33333333333333%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><p>NO_CONTENT_ERROR</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>1</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>用于无内容分享场景。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>NO_INTERNET_ERROR</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>2</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>用于无网络场景。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>DOWNLOAD_ERROR</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>3</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>用于下载失败场景。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1884011169111" device-type="phone,2in1,tablet">ReceivableErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1884011169111" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>拒绝沙箱接收回调时，提供拒绝原因，用户可收到系统通知消息。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.4.1.1" width="33.33333333333333%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.4.1.2" width="33.33333333333333%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.4.1.3" width="33.33333333333333%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><p>NO_RECEIVABLE_ERROR</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>1</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>用于当前无法接收数据的场景。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section943818433405" device-type="phone,2in1,tablet">ShareResultCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section943818433405" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>沙箱接收结果通知成功或失败原因。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.4.1.1" width="33.33333333333333%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.4.1.2" width="33.33333333333333%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.4.1.3" width="33.33333333333333%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><p>SHARE_SUCCESS</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>0</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>沙箱接收成功。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>SEND_FAILED</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>1</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>数据传输失败。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>CANCEL_BY_SENDER</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>2</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>发送端取消发送。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>CANCEL_BY_RECEIVER</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>3</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>接收端取消接收。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section9147845115614" device-type="phone,2in1,tablet">SharableTarget<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9147845115614" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>华为分享事件触发后回调参数，可通过此参数跨端分享。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>5.0.0(12)</p> </div> <div class="tiledSection"><h3 id="section1862171812120" device-type="phone,2in1,tablet" class="firsth2">share<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1862171812120" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>share(data: systemShare.SharedData): Promise&lt;void&gt;</p> <p>跨端分享，使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>data</p> </td> <td class="cellrowborder" width="25%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/share-system-share#section816451553012">systemShare.SharedData</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>分享数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal#section401-参数检查失败" target="_blank">401</a></p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section063111381379" device-type="phone,2in1,tablet">reject<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section063111381379" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>reject(error: SharableErrorCode): Promise&lt;void&gt;</p> <p>当开发者收到回调时，由于某些原因无法继续分享时，可选择拒绝本次分享，使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>5.0.3(15)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>error</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section98742174617">SharableErrorCode</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>拒绝本次分享的原因。通过系统弹窗提示用户。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal#section401-参数检查失败" target="_blank">401</a></p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section18386290710" device-type="phone,2in1,tablet">updateShareData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18386290710" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>updateShareData(data: UpdatedData): Promise&lt;void&gt;</p> <p>在分享数据未发送前，开发者可通过此接口更新预览图，使用Promise异步回调。</p> <p>仅支持碰一碰分享功能。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>data</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section108971112124018">UpdatedData</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>需要更新的数据信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section13539165583" device-type="phone,2in1,tablet">ReceivableTarget<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13539165583" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>沙箱接收事件触发后回调参数，可通过此参数进行沙箱接收。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p> </div> <div class="tiledSection"><h3 id="section1923918121115" device-type="phone,2in1,tablet" class="firsth2">receive<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1923918121115" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>receive(receiveUri: string, callback: ReceiveCallback): Promise&lt;void&gt;</p> <p>提供沙箱接收目录uri，接收的文件将保存至此目录下，使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>receiveUri</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>沙箱接收时，存放数据的目录（必须真实存在）。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>Share Kit会在传输开始前获取此目录的授权，在数据传输完成后自动撤销授权，建议使用已存在的空文件夹，保护信息安全。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section496835162818">ReceiveCallback</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>沙箱接收的回调。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section193871531171019" device-type="phone,2in1,tablet">reject<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section193871531171019" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>reject(error: ReceivableErrorCode): Promise&lt;void&gt;</p> <p>当开发者收到回调时，由于某些原因无法继续接收分享内容时，可选择拒绝本次接收，使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>error</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section1884011169111">ReceivableErrorCode</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>拒绝本次沙箱接收的原因。通过系统弹窗提示用户。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section108971112124018" device-type="phone,2in1,tablet">UpdatedData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section108971112124018" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>华为分享事件发送的数据信息。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.6.1.6.1.1" width="21.52%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.6.1.2" width="17.76%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.6.1.3" width="15.840000000000002%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.6.1.4" width="21.759999999999998%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.6.1.5" width="23.119999999999997%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.52%"><p>thumbnailUri</p> </td> <td class="cellrowborder" width="17.76%"><p>string</p> </td> <td class="cellrowborder" width="15.840000000000002%"><p>否</p> </td> <td class="cellrowborder" width="21.759999999999998%"><p>是</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>预览图的uri。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section7252115555417" device-type="phone,2in1,tablet">BaseCapabilityRegistry<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7252115555417" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>华为分享事件注册基础配置。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.6.1.6.1.1" width="21.52%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.6.1.2" width="17.76%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.6.1.3" width="15.840000000000002%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.6.1.4" width="21.759999999999998%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.6.1.5" width="23.119999999999997%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.52%"><p>windowId</p> </td> <td class="cellrowborder" width="17.76%"><p>number</p> </td> <td class="cellrowborder" width="15.840000000000002%"><p>否</p> </td> <td class="cellrowborder" width="21.759999999999998%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>窗口id。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section7361949172719" device-type="phone,2in1,tablet">SendCapabilityRegistry<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7361949172719" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>华为分享事件窗口注册配置项。继承<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section7252115555417">BaseCapabilityRegistry</a>。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.6.1.6.1.1" width="21.52%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.6.1.2" width="17.76%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.6.1.3" width="15.840000000000002%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.6.1.4" width="21.759999999999998%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.6.1.5" width="23.119999999999997%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.52%"><p>sendOnly</p> </td> <td class="cellrowborder" width="17.76%"><p>boolean</p> </td> <td class="cellrowborder" width="15.840000000000002%"><p>否</p> </td> <td class="cellrowborder" width="21.759999999999998%"><p>是</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>设置是否仅支持发送数据。默认值：false，表示可同时接收分享数据。当双端设备均设置为true时，双向分享会被拦截。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>仅支持碰一碰分享功能。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section5644182344013" device-type="phone,2in1,tablet">RecvCapability<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5644182344013" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>设置沙箱接收支持的能力范围（可接收的文件类型及最大数量限制）。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.6.1.6.1.1" width="21.52%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.6.1.2" width="17.76%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.6.1.3" width="15.840000000000002%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.6.1.4" width="21.759999999999998%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.6.1.5" width="23.119999999999997%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.52%"><p>utd</p> </td> <td class="cellrowborder" width="17.76%"><p>string</p> </td> <td class="cellrowborder" width="15.840000000000002%"><p>否</p> </td> <td class="cellrowborder" width="21.759999999999998%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>统一数据类型，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-uniformtypedescriptor" target="_blank">@ohos.data.uniformTypeDescriptor (标准化数据定义与描述)</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="21.52%"><p>maxSupportedCount</p> </td> <td class="cellrowborder" width="17.76%"><p>number</p> </td> <td class="cellrowborder" width="15.840000000000002%"><p>否</p> </td> <td class="cellrowborder" width="21.759999999999998%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>可接收文件的最大数量限制，仅允许设置大于0的整数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section145341487280" device-type="phone,2in1,tablet">RecvCapabilityRegistry<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section145341487280" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>沙箱接收事件窗口注册配置项。继承<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section7252115555417">BaseCapabilityRegistry</a>。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.6.1.6.1.1" width="21.52%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.6.1.2" width="17.76%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.6.1.3" width="15.840000000000002%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.6.1.4" width="21.759999999999998%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.6.1.5" width="23.119999999999997%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.52%"><p>capabilities</p> </td> <td class="cellrowborder" width="17.76%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section5644182344013">RecvCapability</a>[]</p> </td> <td class="cellrowborder" width="15.840000000000002%"><p>否</p> </td> <td class="cellrowborder" width="21.759999999999998%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>沙箱接收能力设置，用于设置可接收的数据类型和数量。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section54808149718" device-type="phone,2in1,tablet">TransferBaseResults<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section54808149718" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>沙箱接收时，文件数据传输完成的回调函数。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.6.1.6.1.1" width="21.52%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.6.1.2" width="17.76%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.6.1.3" width="15.840000000000002%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.6.1.4" width="21.759999999999998%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.6.1.5" width="23.119999999999997%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.52%"><p>onResult</p> </td> <td class="cellrowborder" width="17.76%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section943818433405">ShareResultCode</a>&gt;</p> </td> <td class="cellrowborder" width="15.840000000000002%"><p>否</p> </td> <td class="cellrowborder" width="21.759999999999998%"><p>是</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>传输完成的回调函数。用于通知传输结果。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section496835162818" device-type="phone,2in1,tablet">ReceiveCallback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section496835162818" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>沙箱接收传输完成后回调函数。可用此方法监听完成事件，并处理接收后的数据。继承<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section54808149718">TransferBaseResults</a>。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.6.1.6.1.1" width="21.52%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.6.1.2" width="17.76%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.6.1.3" width="15.840000000000002%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.6.1.4" width="21.759999999999998%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.6.1.5" width="23.119999999999997%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.52%"><p>onDataReceived</p> </td> <td class="cellrowborder" width="17.76%"><p>Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/share-system-share#section816451553012">systemShare.SharedData</a>&gt;</p> </td> <td class="cellrowborder" width="15.840000000000002%"><p>否</p> </td> <td class="cellrowborder" width="21.759999999999998%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>沙箱接收传输完成后回调函数。用于接收已保存至沙箱路径下的文件列表。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1215414133214" device-type="phone,2in1,tablet">on('knockShare')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1215414133214" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(event: 'knockShare', callback: Callback&lt;SharableTarget&gt;): void</p> <p>注册设备轻贴的事件监听。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>设备行为差异：</strong>该接口在Tablet中无效果，在其他设备类型中可正常调用。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.3" width="24.169999999999998%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.4" width="25.83%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>event</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调类型，取值为'knockShare'，当设备轻贴时，触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section9147845115614">SharableTarget</a>&gt;</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal#section401-参数检查失败" target="_blank">401</a></p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { uniformTypeDescriptor <span class="hljs-keyword">as</span> utd } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { systemShare, harmonyShare } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ShareKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 注册设备轻贴'knockShare'监听事件</span></li><li>harmonyShare.<span class="hljs-title function_">on</span>(<span class="hljs-string">'knockShare'</span>, <span class="hljs-function">(<span class="hljs-params">sharableTarget: harmonyShare.SharableTarget</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 构造分享数据</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">shareData</span>: systemShare.<span class="hljs-property">SharedData</span> = <span class="hljs-keyword">new</span> systemShare.<span class="hljs-title class_">SharedData</span>({</li><li>    <span class="hljs-attr">utd</span>: utd.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">PLAIN_TEXT</span>,</li><li>    <span class="hljs-attr">content</span>: <span class="hljs-string">'这是一段文本内容'</span></li><li>  });</li><li>  <span class="hljs-comment">// 发起分享</span></li><li>  sharableTarget.<span class="hljs-title function_">share</span>(shareData);</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section18498201183311" device-type="phone,2in1,tablet">off('knockShare')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18498201183311" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(event: 'knockShare', callback?: Callback&lt;SharableTarget&gt;): void</p> <p>取消设备轻贴的事件监听。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>设备行为差异：</strong>该接口在Tablet中无效果，在其他设备类型中可正常调用。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.9.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>event</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>事件回调类型，取值为'knockShare'，取消设备轻贴的事件监听。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section9147845115614">SharableTarget</a>&gt;</p> </td> <td class="cellrowborder" width="25%"><p>否</p> </td> <td class="cellrowborder" width="25%"><p>回调函数。可以指定传入on中的callback取消对应的监听，也可以不指定callback清空所有监听。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal#section401-参数检查失败" target="_blank">401</a></p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 取消设备轻贴'knockShare'监听事件</span></li><li>harmonyShare.<span class="hljs-title function_">off</span>(<span class="hljs-string">'knockShare'</span>);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section157091636122211" device-type="phone,2in1,tablet">on('knockShare')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section157091636122211" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(event: 'knockShare', capability: SendCapabilityRegistry, callback: Callback&lt;SharableTarget&gt;): void</p> <p>注册设备轻贴的事件监听。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>设备行为差异：</strong>该接口在Tablet中无效果，在其他设备类型中可正常调用。</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.9.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.5.1.3" width="24.169999999999998%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.5.1.4" width="25.83%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>event</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调类型，取值为'knockShare'，当设备轻贴时，触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>capability</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section7361949172719">SendCapabilityRegistry</a></p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件属性。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section9147845115614">SharableTarget</a>&gt;</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { uniformTypeDescriptor <span class="hljs-keyword">as</span> utd } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { systemShare, harmonyShare } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ShareKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capabilityRegistry</span>: harmonyShare.<span class="hljs-property">SendCapabilityRegistry</span> = {</li><li>  <span class="hljs-attr">windowId</span>: <span class="hljs-number">999</span>, <span class="hljs-comment">// 此值仅为示例 实际使用时请替换正确的windowId</span></li><li>}</li><li><span class="hljs-comment">// 注册设备轻贴'knockShare'监听事件</span></li><li>harmonyShare.<span class="hljs-title function_">on</span>(<span class="hljs-string">'knockShare'</span>, capabilityRegistry, <span class="hljs-function">(<span class="hljs-params">sharableTarget: harmonyShare.SharableTarget</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 构造分享数据</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">shareData</span>: systemShare.<span class="hljs-property">SharedData</span> = <span class="hljs-keyword">new</span> systemShare.<span class="hljs-title class_">SharedData</span>({</li><li>    <span class="hljs-attr">utd</span>: utd.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">PLAIN_TEXT</span>,</li><li>    <span class="hljs-attr">content</span>: <span class="hljs-string">'这是一段文本内容'</span></li><li>  });</li><li>  <span class="hljs-comment">// 发起分享</span></li><li>  sharableTarget.<span class="hljs-title function_">share</span>(shareData);</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section12402154143413" device-type="phone,2in1,tablet">off('knockShare')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12402154143413" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(event: 'knockShare', capability: SendCapabilityRegistry, callback?: Callback&lt;SharableTarget&gt;): void</p> <p>取消设备轻贴的事件监听。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>设备行为差异：</strong>该接口在Tablet中无效果，在其他设备类型中可正常调用。</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.9.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>event</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>事件回调类型，取值为'knockShare'，取消设备轻贴的事件监听。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>capability</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section7361949172719">SendCapabilityRegistry</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>事件属性。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section9147845115614">SharableTarget</a>&gt;</p> </td> <td class="cellrowborder" width="25%"><p>否</p> </td> <td class="cellrowborder" width="25%"><p>回调函数。可以指定传入on中的callback取消对应的监听，也可以不指定callback清空所有监听。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capabilityRegistry</span>: harmonyShare.<span class="hljs-property">SendCapabilityRegistry</span> = {</li><li>  <span class="hljs-attr">windowId</span>: <span class="hljs-number">999</span>, <span class="hljs-comment">// 此值仅为示例 实际使用时请替换正确的windowId</span></li><li>}</li><li><span class="hljs-comment">// 取消设备轻贴'knockShare'监听事件</span></li><li>harmonyShare.<span class="hljs-title function_">off</span>(<span class="hljs-string">'knockShare'</span>, capabilityRegistry);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section79507713161" device-type="phone,2in1,tablet">on('gesturesShare')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section79507713161" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(event: 'gesturesShare', callback: Callback&lt;SharableTarget&gt;): void</p> <p>注册隔空传送的事件监听。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.3" width="24.169999999999998%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.4" width="25.83%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>event</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调类型，取值为'gesturesShare'，当抓取握拳时，触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section9147845115614">SharableTarget</a>&gt;</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { uniformTypeDescriptor <span class="hljs-keyword">as</span> utd } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { systemShare, harmonyShare } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ShareKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 注册隔空传送'gesturesShare'监听事件</span></li><li>harmonyShare.<span class="hljs-title function_">on</span>(<span class="hljs-string">'gesturesShare'</span>, <span class="hljs-function">(<span class="hljs-params">sharableTarget: harmonyShare.SharableTarget</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 构造分享数据</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">shareData</span>: systemShare.<span class="hljs-property">SharedData</span> = <span class="hljs-keyword">new</span> systemShare.<span class="hljs-title class_">SharedData</span>({</li><li>    <span class="hljs-attr">utd</span>: utd.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">PLAIN_TEXT</span>,</li><li>    <span class="hljs-attr">content</span>: <span class="hljs-string">'这是一段文本内容'</span></li><li>  });</li><li>  <span class="hljs-comment">// 发起分享</span></li><li>  sharableTarget.<span class="hljs-title function_">share</span>(shareData);</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section3951197151616" device-type="phone,2in1,tablet">off('gesturesShare')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3951197151616" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(event: 'gesturesShare', callback?: Callback&lt;SharableTarget&gt;): void</p> <p>取消隔空传送的事件监听。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>event</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>事件回调类型，取值为'gesturesShare'，取消隔空传送的事件监听。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section9147845115614">SharableTarget</a>&gt;</p> </td> <td class="cellrowborder" width="25%"><p>否</p> </td> <td class="cellrowborder" width="25%"><p>回调函数。可以指定传入on中的callback取消对应的监听，也可以不指定callback清空所有监听。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 取消隔空传送'gesturesShare'监听事件</span></li><li>harmonyShare.<span class="hljs-title function_">off</span>(<span class="hljs-string">'gesturesShare'</span>);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section199317814132" device-type="phone,2in1,tablet">on('gesturesShare')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section199317814132" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(event: 'gesturesShare', capability: SendCapabilityRegistry, callback: Callback&lt;SharableTarget&gt;): void</p> <p>注册隔空传送的事件监听。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.3" width="24.169999999999998%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.4" width="25.83%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>event</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调类型，取值为'gesturesShare'，当抓取握拳时，触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>capability</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section7361949172719">SendCapabilityRegistry</a></p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件属性。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section9147845115614">SharableTarget</a>&gt;</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { uniformTypeDescriptor <span class="hljs-keyword">as</span> utd } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { systemShare, harmonyShare } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ShareKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capabilityRegistry</span>: harmonyShare.<span class="hljs-property">SendCapabilityRegistry</span> = {</li><li>  <span class="hljs-attr">windowId</span>: <span class="hljs-number">999</span>, <span class="hljs-comment">// 此值仅为示例 实际使用时请替换正确的windowId</span></li><li>}</li><li><span class="hljs-comment">// 注册隔空传送'gesturesShare'监听事件</span></li><li>harmonyShare.<span class="hljs-title function_">on</span>(<span class="hljs-string">'gesturesShare'</span>, capabilityRegistry, <span class="hljs-function">(<span class="hljs-params">sharableTarget: harmonyShare.SharableTarget</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 构造分享数据</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">shareData</span>: systemShare.<span class="hljs-property">SharedData</span> = <span class="hljs-keyword">new</span> systemShare.<span class="hljs-title class_">SharedData</span>({</li><li>    <span class="hljs-attr">utd</span>: utd.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">PLAIN_TEXT</span>,</li><li>    <span class="hljs-attr">content</span>: <span class="hljs-string">'这是一段文本内容'</span></li><li>  });</li><li>  <span class="hljs-comment">// 发起分享</span></li><li>  sharableTarget.<span class="hljs-title function_">share</span>(shareData);</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1699538101317" device-type="phone,2in1,tablet">off('gesturesShare')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1699538101317" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(event: 'gesturesShare', capability: SendCapabilityRegistry, callback?: Callback&lt;SharableTarget&gt;): void</p> <p>取消隔空传送的事件监听。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>event</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>事件回调类型，取值为'gesturesShare'，取消隔空传送的事件监听。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>capability</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section7361949172719">SendCapabilityRegistry</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>事件属性。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section9147845115614">SharableTarget</a>&gt;</p> </td> <td class="cellrowborder" width="25%"><p>否</p> </td> <td class="cellrowborder" width="25%"><p>回调函数。可以指定传入on中的callback取消对应的监听，也可以不指定callback清空所有监听。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capabilityRegistry</span>: harmonyShare.<span class="hljs-property">SendCapabilityRegistry</span> = {</li><li>  <span class="hljs-attr">windowId</span>: <span class="hljs-number">999</span>, <span class="hljs-comment">// 此值仅为示例 实际使用时请替换正确的windowId</span></li><li>}</li><li><span class="hljs-comment">// 取消隔空传送'gesturesShare'监听事件</span></li><li>harmonyShare.<span class="hljs-title function_">off</span>(<span class="hljs-string">'gesturesShare'</span>, capabilityRegistry);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1365282783615" device-type="phone,2in1,tablet">on('dataReceive')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1365282783615" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>on(event: 'dataReceive', capability: RecvCapabilityRegistry, callback: Callback&lt;ReceivableTarget&gt;): void</p> <p>注册沙箱接收事件监听。仅支持文件类型数据。文本（包含链接）类型的数据保持原有接收逻辑。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>设备行为差异：</strong>该接口在PC/2in1中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.3" width="24.169999999999998%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.4" width="25.83%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>event</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调类型，取值为'dataReceive'，当手机设备轻贴PC/2in1设备屏幕时，触发该事件。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>capability</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section145341487280">RecvCapabilityRegistry</a></p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件属性。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section13539165583">ReceivableTarget</a>&gt;</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { uniformTypeDescriptor <span class="hljs-keyword">as</span> utd } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { systemShare, harmonyShare } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ShareKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capabilityRegistry</span>: harmonyShare.<span class="hljs-property">RecvCapabilityRegistry</span> = {</li><li>  <span class="hljs-attr">windowId</span>: <span class="hljs-number">999</span>, <span class="hljs-comment">// 此值仅为示例 实际使用时请替换正确的windowId</span></li><li>  <span class="hljs-attr">capabilities</span>: [{</li><li>    <span class="hljs-attr">utd</span>: utd.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>,</li><li>    <span class="hljs-attr">maxSupportedCount</span>: <span class="hljs-number">1</span></li><li>  }]</li><li>}</li><li><span class="hljs-comment">// 注册沙箱接收'dataReceive'监听事件</span></li><li>harmonyShare.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataReceive'</span>, capabilityRegistry, <span class="hljs-function">(<span class="hljs-params">receivableTarget: harmonyShare.ReceivableTarget</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>  <span class="hljs-keyword">let</span> context = uiContext.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>  receivableTarget.<span class="hljs-title function_">receive</span>(context.<span class="hljs-property">filesDir</span>, { <span class="hljs-comment">// 此路径仅为示例 使用时请替换实际路径</span></li><li>    <span class="hljs-attr">onDataReceived</span>: <span class="hljs-function">(<span class="hljs-params">sharedData: systemShare.SharedData</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">let</span> sharedRecords = sharedData.<span class="hljs-title function_">getRecords</span>();</li><li>      sharedRecords.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">record: systemShare.SharedRecord</span>) =&gt;</span> {</li><li>        <span class="hljs-comment">// 处理分享数据</span></li><li>      });</li><li>    },</li><li>    <span class="hljs-title function_">onResult</span>(<span class="hljs-params">resultCode: harmonyShare.ShareResultCode</span>) {</li><li>      <span class="hljs-keyword">if</span> (resultCode === harmonyShare.<span class="hljs-property">ShareResultCode</span>.<span class="hljs-property">SHARE_SUCCESS</span>) {</li><li>        <span class="hljs-comment">// To do things.</span></li><li>      }</li><li>    }</li><li>  });</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section16995194915365" device-type="phone,2in1,tablet">off('dataReceive')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16995194915365" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>off(event: 'dataReceive', capability: RecvCapabilityRegistry, callback?: Callback&lt;ReceivableTarget&gt;): void</p> <p>取消沙箱接收的事件监听。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>系统能力：</strong>SystemCapability.Collaboration.HarmonyShare</p> <p><strong>设备行为差异：</strong>该接口在PC/2in1中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.3" width="24.169999999999998%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.4" width="25.83%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>event</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件回调类型，取值为'dataReceive'，取消沙箱接收的事件监听。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>capability</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section145341487280">RecvCapabilityRegistry</a></p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>是</p> </td> <td class="cellrowborder" width="25.83%"><p>事件属性。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/share-harmony-share#section13539165583">ReceivableTarget</a>&gt;</p> </td> <td class="cellrowborder" width="24.169999999999998%"><p>否</p> </td> <td class="cellrowborder" width="25.83%"><p>回调函数。可以指定传入on中的callback取消对应的监听，也可以不指定callback清空所有监听。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-lyu-c106="" class="highlight-div"><div _ngcontent-lyu-c106="" class="highlight-div-header"><div _ngcontent-lyu-c106="" class="highlight-div-header-left"><div _ngcontent-lyu-c106="" class="handle-button expand-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lyu-c106="" class="highlight-div-header-right"><div _ngcontent-lyu-c106="" class="handle-button ai-button"></div><div _ngcontent-lyu-c106="" class="handle-button line-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lyu-c106="" class="handle-button theme-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lyu-c106="" class="handle-button copy-button"><div _ngcontent-lyu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lyu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">capabilityRegistry</span>: harmonyShare.<span class="hljs-property">RecvCapabilityRegistry</span> = {</li><li>  <span class="hljs-attr">windowId</span>: <span class="hljs-number">999</span>, <span class="hljs-comment">// 此值仅为示例 实际使用时请替换正确的windowId</span></li><li>  <span class="hljs-attr">capabilities</span>: [{</li><li>    <span class="hljs-attr">utd</span>: utd.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">IMAGE</span>,</li><li>    <span class="hljs-attr">maxSupportedCount</span>: <span class="hljs-number">1</span></li><li>  }]</li><li>}</li><li><span class="hljs-comment">// 取消沙箱接收'dataReceive'监听事件</span></li><li>harmonyShare.<span class="hljs-title function_">off</span>(<span class="hljs-string">'dataReceive'</span>, capabilityRegistry);</li></ol></pre></div></div> </div> </div> <div></div></div>