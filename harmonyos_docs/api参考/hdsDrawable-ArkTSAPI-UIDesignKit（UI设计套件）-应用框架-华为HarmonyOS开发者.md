<h1 _ngcontent-ejx-c119="" class="doc-title ng-star-inserted" title="hdsDrawable"> hdsDrawable </h1>

<div _ngcontent-ejx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供图标处理能力，包括对前后景合成、剪切、缩放、描边处理，支持分层图标和单层图标处理。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section172311424161217" device-type="phone,2in1,tablet,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section172311424161217" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-ejx-c106="" class="highlight-div"><div _ngcontent-ejx-c106="" class="highlight-div-header"><div _ngcontent-ejx-c106="" class="highlight-div-header-left"><div _ngcontent-ejx-c106="" class="handle-button expand-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ejx-c106="" class="highlight-div-header-right"><div _ngcontent-ejx-c106="" class="handle-button ai-button"></div><div _ngcontent-ejx-c106="" class="handle-button line-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ejx-c106="" class="handle-button theme-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ejx-c106="" class="handle-button copy-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ejx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hdsDrawable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section156601033183215" device-type="phone,2in1,tablet,tv">hdsDrawable.getHdsLayeredIcon<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section156601033183215" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getHdsLayeredIcon(bundleName: string, layeredDrawableDescriptor: LayeredDrawableDescriptor, size: number, hasBorder?: boolean): image.PixelMap</p> <p>获取处理后的分层图标接口，可通过该接口获取PixelMap格式的图标，适用于需插入单个图标的场景。分层图标对象以LayeredDrawableDescriptor格式定义，可以通过传入Symbol资源的id或name生成，其中hasBorder参数决定是否为输出的图标添加描边（在线主题场景时不支持设置描边），size参数指定输出图标的尺寸。</p> <p>LayeredDrawableDescriptor对象：判断的方法是打开对应的Symbol json文件后观察其layered-image属性是否包含类似下面的结构：</p> <div _ngcontent-ejx-c106="" class="highlight-div"><div _ngcontent-ejx-c106="" class="highlight-div-header"><div _ngcontent-ejx-c106="" class="highlight-div-header-left"><div _ngcontent-ejx-c106="" class="handle-button expand-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ejx-c106="" class="highlight-div-header-right"><div _ngcontent-ejx-c106="" class="handle-button ai-button"></div><div _ngcontent-ejx-c106="" class="handle-button line-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ejx-c106="" class="handle-button theme-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ejx-c106="" class="handle-button copy-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ejx-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cangjie" data-highlighted="yes"><ol class="linenums"><li><span class=""><span class="hljs-string">"layered-image"</span></span>:</li><li>{</li><li><span class="">    <span class="hljs-string">"background"</span></span>: <span class=""><span class="hljs-string">"$background_path"</span></span>,</li><li><span class="">    <span class="hljs-string">"foreground"</span></span>: <span class=""><span class="hljs-string">"$foreground_path"</span></span></li><li>}</li></ol></pre></div></div> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.UIDesign.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.1" width="23.380000000000003%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.2" width="23.21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.3" width="12.27%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.4" width="41.14%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.380000000000003%"><p>bundleName</p> </td> <td class="cellrowborder" width="23.21%"><p>string</p> </td> <td class="cellrowborder" width="12.27%"><p>是</p> </td> <td class="cellrowborder" width="41.14%"><p>与应用绑定，为应用Bundle名称。</p> </td> </tr> <tr><td class="cellrowborder" width="23.380000000000003%"><p>layeredDrawableDescriptor</p> </td> <td class="cellrowborder" width="23.21%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#layereddrawabledescriptor" target="_blank">LayeredDrawableDescriptor</a></p> </td> <td class="cellrowborder" width="12.27%"><p>是</p> </td> <td class="cellrowborder" width="41.14%"><p>需要处理的分层图标数据对象。</p> </td> </tr> <tr><td class="cellrowborder" width="23.380000000000003%"><p>size</p> </td> <td class="cellrowborder" width="23.21%"><p>number</p> </td> <td class="cellrowborder" width="12.27%"><p>是</p> </td> <td class="cellrowborder" width="41.14%"><p>接口处理完成后输出的图标对象为正方形，该值表示输出对象的正方形边长，包含描边区域，取值范围：大于0，单位：vp。</p> </td> </tr> <tr><td class="cellrowborder" width="23.380000000000003%"><p>hasBorder</p> </td> <td class="cellrowborder" width="23.21%"><p>boolean</p> </td> <td class="cellrowborder" width="12.27%"><p>否</p> </td> <td class="cellrowborder" width="41.14%"><p>是否描边，true：描边，false：不描边，默认false，在线主题场景不支持设置描边。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.12.1.3.1.1" width="32.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.12.1.3.1.2" width="67.84%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.16%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="67.84%"><p>接口处理完成后返回的图标数据对象，格式为PixelMap。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ui-design-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.15.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.15.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p>401</p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter error. The value of bundleName is incorrect.</p> <p>Parameter error. The value of layeredDrawableDescriptor is incorrect.</p> <p>Parameter error. The value of size is incorrect.</p> <p>Parameter error. The value of hasBorder is incorrect.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ejx-c106="" class="highlight-div"><div _ngcontent-ejx-c106="" class="highlight-div-header"><div _ngcontent-ejx-c106="" class="highlight-div-header-left"><div _ngcontent-ejx-c106="" class="handle-button expand-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ejx-c106="" class="highlight-div-header-right"><div _ngcontent-ejx-c106="" class="handle-button ai-button"></div><div _ngcontent-ejx-c106="" class="handle-button line-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ejx-c106="" class="handle-button theme-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ejx-c106="" class="handle-button copy-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ejx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LayeredDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { hdsDrawable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.uidesignkit'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li><span class="">  <span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resManager</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>)?.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">layeredDrawableDescriptor</span>: <span class="hljs-title class_">LayeredDrawableDescriptor</span> =</li><li>    (resManager.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.drawable'</span>).<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>; <span class="hljs-comment">// 传入已创建的图片资源</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">processedIcon</span>: image.<span class="hljs-property">PixelMap</span> =</li><li>    hdsDrawable.<span class="hljs-title function_">getHdsLayeredIcon</span>(bundleName, layeredDrawableDescriptor, <span class="hljs-number">48</span>, <span class="hljs-literal">true</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getHdsLayeredIcon failed, code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <p><span><img height="138.6525" originheight="950" originwidth="3564" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115325.77384087990040525853436754370336:50001231000000:2800:4960172ED4A9D0F40939F131DE74E892236D401E36C07D7782F3F591D0CC7567.png" title="点击放大" width="523.6875"></span></p> <div class="tiledSection"><h2 id="section5196826193012" device-type="phone,2in1,tablet,tv">hdsDrawable.getHdsLayeredIconAsync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5196826193012" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getHdsLayeredIconAsync(bundleName: string, layeredDrawableDescriptor: LayeredDrawableDescriptor, size: number, hasBorder?: boolean): Promise&lt;image.PixelMap&gt;</p> <p>获取处理后的分层图标接口，使用Promise异步回调。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.UIDesign.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="23.380000000000003%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="23.21%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="12.27%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="41.14%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.380000000000003%"><p>bundleName</p> </td> <td class="cellrowborder" width="23.21%"><p>string</p> </td> <td class="cellrowborder" width="12.27%"><p>是</p> </td> <td class="cellrowborder" width="41.14%"><p>与应用绑定，为应用Bundle名称。</p> </td> </tr> <tr><td class="cellrowborder" width="23.380000000000003%"><p>layeredDrawableDescriptor</p> </td> <td class="cellrowborder" width="23.21%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#layereddrawabledescriptor" target="_blank">LayeredDrawableDescriptor</a></p> </td> <td class="cellrowborder" width="12.27%"><p>是</p> </td> <td class="cellrowborder" width="41.14%"><p>需要处理的分层图标数据对象。</p> </td> </tr> <tr><td class="cellrowborder" width="23.380000000000003%"><p>size</p> </td> <td class="cellrowborder" width="23.21%"><p>number</p> </td> <td class="cellrowborder" width="12.27%"><p>是</p> </td> <td class="cellrowborder" width="41.14%"><p>接口处理完成后输出的图标对象为正方形，该值表示输出对象的正方形边长，包含描边区域，取值范围：大于0，单位：vp。</p> </td> </tr> <tr><td class="cellrowborder" width="23.380000000000003%"><p>hasBorder</p> </td> <td class="cellrowborder" width="23.21%"><p>boolean</p> </td> <td class="cellrowborder" width="12.27%"><p>否</p> </td> <td class="cellrowborder" width="41.14%"><p>处理后的图标是否要描边，true：描边，false：不描边，默认false，在线主题场景不支持设置描边。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="32.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="67.84%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.16%"><p>Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a>&gt;</p> </td> <td class="cellrowborder" width="67.84%"><p>Promise对象，接口处理完成后返回的图标数据对象，格式为PixelMap。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ui-design-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p>401</p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter error. The value of bundleName is incorrect.</p> <p>Parameter error. The value of layeredDrawableDescriptor is incorrect.</p> <p>Parameter error. The value of size is incorrect.</p> <p>Parameter error. The value of hasBorder is incorrect.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ejx-c106="" class="highlight-div"><div _ngcontent-ejx-c106="" class="highlight-div-header"><div _ngcontent-ejx-c106="" class="highlight-div-header-left"><div _ngcontent-ejx-c106="" class="handle-button expand-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ejx-c106="" class="highlight-div-header-right"><div _ngcontent-ejx-c106="" class="handle-button ai-button"></div><div _ngcontent-ejx-c106="" class="handle-button line-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ejx-c106="" class="handle-button theme-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ejx-c106="" class="handle-button copy-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ejx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LayeredDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { hdsDrawable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.uidesignkit'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li><span class="">  <span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resManager</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>)?.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">layeredDrawableDescriptor</span>: <span class="hljs-title class_">LayeredDrawableDescriptor</span> =</li><li>    (resManager.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.drawable'</span>).<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>; <span class="hljs-comment">// 传入已创建的图片资源</span></li><li>
</li><li>  hdsDrawable.<span class="hljs-title function_">getHdsLayeredIconAsync</span>(bundleName, layeredDrawableDescriptor, <span class="hljs-number">48</span>, <span class="hljs-literal">true</span>)</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: image.PixelMap</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">processedIcon</span>: image.<span class="hljs-property">PixelMap</span> = data;</li><li>    })</li><li>    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getHdsLayeredIconAsync return error, code: <span class="hljs-subst">${err.code}</span>, msg: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getHdsLayeredIconAsync failed, code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <p><span><img height="138.6525" originheight="950" originwidth="3564" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115326.27937816706032817900314972251719:50001231000000:2800:74A2C5F780A0ACBF260A91602251DD3D30B002868767F126BF5FBF159A0F5853.png" title="点击放大" width="523.6875"></span></p> <div class="tiledSection"><h2 id="section11716322123212" device-type="phone,2in1,tablet,tv">hdsDrawable.getHdsIcon<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11716322123212" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getHdsIcon(bundleName: string, pixelMap: image.PixelMap, size: number, mask: image.PixelMap, hasBorder?: boolean): image.PixelMap</p> <p>获取处理后的单层图标接口，可通过该接口获取PixelMap格式的图标，适用于需插入单个图标的场景。其中hasBorder参数决定是否为输出的图标添加描边（在线主题场景时不支持设置描边），size参数指定输出图标的尺寸。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.UIDesign.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="19.470000000000002%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="20.77%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="11.16%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="48.6%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.470000000000002%"><p>bundleName</p> </td> <td class="cellrowborder" width="20.77%"><p>string</p> </td> <td class="cellrowborder" width="11.16%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>与应用绑定，为应用Bundle名称。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>pixelMap</p> </td> <td class="cellrowborder" width="20.77%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="11.16%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>单层图标数据对象。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>size</p> </td> <td class="cellrowborder" width="20.77%"><p>number</p> </td> <td class="cellrowborder" width="11.16%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>接口处理完成后输出的图标对象为正方形，该值表示输出对象的正方形边长，包含描边区域，取值范围：大于0，单位：vp。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>mask</p> </td> <td class="cellrowborder" width="20.77%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="11.16%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>图标蒙版信息，用于图标剪切处理。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>hasBorder</p> </td> <td class="cellrowborder" width="20.77%"><p>boolean</p> </td> <td class="cellrowborder" width="11.16%"><p>否</p> </td> <td class="cellrowborder" width="48.6%"><p>是否描边，true：描边，false：不描边，默认false，在线主题场景不支持设置描边。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="32.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="67.84%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.16%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="67.84%"><p>接口处理完成后返回的图标数据对象，格式为PixelMap。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ui-design-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p>401</p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter error. The value of bundleName is incorrect.</p> <p>Parameter error. The value of pixelMap is incorrect.</p> <p>Parameter error. The value of size is incorrect.</p> <p>Parameter error. The value of mask is incorrect.</p> <p>Parameter error. The value of hasBorder is incorrect.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ejx-c106="" class="highlight-div"><div _ngcontent-ejx-c106="" class="highlight-div-header"><div _ngcontent-ejx-c106="" class="highlight-div-header-left"><div _ngcontent-ejx-c106="" class="handle-button expand-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ejx-c106="" class="highlight-div-header-right"><div _ngcontent-ejx-c106="" class="handle-button ai-button"></div><div _ngcontent-ejx-c106="" class="handle-button line-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ejx-c106="" class="handle-button theme-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ejx-c106="" class="handle-button copy-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ejx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LayeredDrawableDescriptor</span>, <span class="hljs-title class_">DrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { hdsDrawable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.uidesignkit'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li><span class="">  <span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resManager</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>)?.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">layeredDrawableDescriptor</span>: <span class="hljs-title class_">LayeredDrawableDescriptor</span> =</li><li>    (resManager.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.drawable'</span>).<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>; <span class="hljs-comment">// 传入已创建的图片资源</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">drawableDescriptor</span>: <span class="hljs-title class_">DrawableDescriptor</span> =</li><li>    (resManager?.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.normal_icon_512'</span>).<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">DrawableDescriptor</span>; <span class="hljs-comment">// 传入已创建的图片资源</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">processedIcon</span>: image.<span class="hljs-property">PixelMap</span> = hdsDrawable.<span class="hljs-title function_">getHdsIcon</span>(bundleName, drawableDescriptor?.<span class="hljs-title function_">getPixelMap</span>(), <span class="hljs-number">48</span>,</li><li>    layeredDrawableDescriptor?.<span class="hljs-title function_">getMask</span>().<span class="hljs-title function_">getPixelMap</span>(), <span class="hljs-literal">true</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getHdsIcon failed, code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <p><span><img height="185.535" originheight="914" originwidth="2572" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115326.16038360258962465417637151895179:50001231000000:2800:8760A4384F8F6AB70FCE2EB66E253CD78DC8EAA3C6BF4E63763ECC4F6A650AF8.png" title="点击放大" width="523.6875"></span></p> <div class="tiledSection"><h2 id="section343192618556" device-type="phone,2in1,tablet,tv">hdsDrawable.getHdsIconAsync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section343192618556" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getHdsIconAsync(bundleName: string, pixelMap: image.PixelMap, size: number, mask: image.PixelMap, hasBorder?: boolean): Promise&lt;image.PixelMap&gt;</p> <p>获取处理后的单层图标接口，使用Promise异步回调。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.UIDesign.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="19.470000000000002%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="20.77%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="11.16%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="48.6%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.470000000000002%"><p>bundleName</p> </td> <td class="cellrowborder" width="20.77%"><p>string</p> </td> <td class="cellrowborder" width="11.16%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>与应用绑定，为应用Bundle名称。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>pixelMap</p> </td> <td class="cellrowborder" width="20.77%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="11.16%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>单层图标数据对象。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>size</p> </td> <td class="cellrowborder" width="20.77%"><p>number</p> </td> <td class="cellrowborder" width="11.16%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>接口处理完成后输出的图标对象为正方形，该值表示输出对象的正方形边长，包含描边区域，取值范围：大于0，单位：vp。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>mask</p> </td> <td class="cellrowborder" width="20.77%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="11.16%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>图标蒙版信息，用于图标剪切处理。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>hasBorder</p> </td> <td class="cellrowborder" width="20.77%"><p>boolean</p> </td> <td class="cellrowborder" width="11.16%"><p>否</p> </td> <td class="cellrowborder" width="48.6%"><p>处理后的图标是否要描边，true：描边，false：不描边，默认false，在线主题场景不支持设置描边。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="32.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="67.84%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.16%"><p>Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a>&gt;</p> </td> <td class="cellrowborder" width="67.84%"><p>Promise对象，接口处理完成后返回的图标数据对象，格式为PixelMap。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ui-design-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p>401</p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter error. The value of bundleName is incorrect.</p> <p>Parameter error. The value of pixelMap is incorrect.</p> <p>Parameter error. The value of size is incorrect.</p> <p>Parameter error. The value of mask is incorrect.</p> <p>Parameter error. The value of hasBorder is incorrect.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ejx-c106="" class="highlight-div"><div _ngcontent-ejx-c106="" class="highlight-div-header"><div _ngcontent-ejx-c106="" class="highlight-div-header-left"><div _ngcontent-ejx-c106="" class="handle-button expand-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ejx-c106="" class="highlight-div-header-right"><div _ngcontent-ejx-c106="" class="handle-button ai-button"></div><div _ngcontent-ejx-c106="" class="handle-button line-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ejx-c106="" class="handle-button theme-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ejx-c106="" class="handle-button copy-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ejx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LayeredDrawableDescriptor</span>, <span class="hljs-title class_">DrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { hdsDrawable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.uidesignkit'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li><span class="">  <span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resManager</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>)?.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">layeredDrawableDescriptor</span>: <span class="hljs-title class_">LayeredDrawableDescriptor</span> =</li><li>    (resManager.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.drawable'</span>).<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>; <span class="hljs-comment">// 传入已创建的图片资源</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">drawableDescriptor</span>: <span class="hljs-title class_">DrawableDescriptor</span> =</li><li>    (resManager?.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.normal_icon_512'</span>).<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">DrawableDescriptor</span>; <span class="hljs-comment">// 传入已创建的图片资源</span></li><li>
</li><li>  hdsDrawable.<span class="hljs-title function_">getHdsIconAsync</span>(bundleName, drawableDescriptor?.<span class="hljs-title function_">getPixelMap</span>(), <span class="hljs-number">48</span>,</li><li>    layeredDrawableDescriptor?.<span class="hljs-title function_">getMask</span>().<span class="hljs-title function_">getPixelMap</span>(), <span class="hljs-literal">true</span>)</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: image.PixelMap</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">processedIcon</span>: image.<span class="hljs-property">PixelMap</span> = data;</li><li>    })</li><li>    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getHdsIconAsync return error, code: <span class="hljs-subst">${err.code}</span>, msg: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getHdsIconAsync failed, code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <p><span><img height="185.535" originheight="914" originwidth="2572" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115326.10301207678576086620564498034739:50001231000000:2800:33D501302199C5268CBE6A4254B3438F0CBA32EA4759B105C5F341FF51EDB6D4.png" title="点击放大" width="523.6875"></span></p> <div class="tiledSection"><h2 id="section712131324710" device-type="phone,2in1,tablet,tv">hdsDrawable.getHdsLayeredIcons<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section712131324710" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getHdsLayeredIcons(icons: Array&lt;LayeredIcon&gt;, options: Options): Promise&lt;Array&lt;ProcessedIcon&gt;&gt;</p> <p>批量获取处理后的分层图标接口，使用Promise异步回调。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.UIDesign.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="19.470000000000002%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="20.96%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="10.96%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="48.61%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.470000000000002%"><p>icons</p> </td> <td class="cellrowborder" width="20.96%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/ui-design-hdsdrawable#section1136318361562">LayeredIcon</a>&gt;</p> </td> <td class="cellrowborder" width="10.96%"><p>是</p> </td> <td class="cellrowborder" width="48.61%"><p>待处理的分层图标数据集合。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>options</p> </td> <td class="cellrowborder" width="20.96%"><p><a href="/consumer/cn/doc/harmonyos-references/ui-design-hdsdrawable#section92509381814">Options</a></p> </td> <td class="cellrowborder" width="10.96%"><p>是</p> </td> <td class="cellrowborder" width="48.61%"><p>处理分层图标的配置项信息。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="32.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="67.84%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.16%"><p>Promise&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/ui-design-hdsdrawable#section4191115014127">ProcessedIcon</a>&gt;&gt;</p> </td> <td class="cellrowborder" width="67.84%"><p>Promise对象，返回处理后的图像数据集合。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ui-design-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p>401</p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter error. The value of icons is incorrect.</p> <p>Parameter error. The value of size is incorrect.</p> <p>Parameter error. The value of hasBorder is incorrect.</p> <p>Parameter error. The value of parallelNumber is incorrect.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1012600001</p> </td> <td class="cellrowborder" width="66.28%"><p>Task is busy.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ejx-c106="" class="highlight-div"><div _ngcontent-ejx-c106="" class="highlight-div-header"><div _ngcontent-ejx-c106="" class="highlight-div-header-left"><div _ngcontent-ejx-c106="" class="handle-button expand-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ejx-c106="" class="highlight-div-header-right"><div _ngcontent-ejx-c106="" class="handle-button ai-button"></div><div _ngcontent-ejx-c106="" class="handle-button line-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ejx-c106="" class="handle-button theme-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ejx-c106="" class="handle-button copy-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ejx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LayeredDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { hdsDrawable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.uidesignkit'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: hdsDrawable.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">size</span>: <span class="hljs-number">48</span>,</li><li>  <span class="hljs-attr">hasBorder</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">parallelNumber</span>: <span class="hljs-number">4</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li><span class="">  <span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resManager</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>)?.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">layeredDrawableDescriptor</span>: <span class="hljs-title class_">LayeredDrawableDescriptor</span> =</li><li>    (resManager.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.drawable'</span>).<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>; <span class="hljs-comment">// 传入已创建的图片资源</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">layeredIcons</span>: <span class="hljs-title class_">Array</span>&lt;hdsDrawable.<span class="hljs-property">LayeredIcon</span>&gt; = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    layeredIcons.<span class="hljs-title function_">push</span>({</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">`<span class="hljs-subst">${bundleName}</span>-<span class="hljs-subst">${i}</span>`</span>,</li><li>      <span class="hljs-attr">layeredDrawableDescriptor</span>: layeredDrawableDescriptor</li><li>    });</li><li>  }</li><li>
</li><li>  hdsDrawable.<span class="hljs-title function_">getHdsLayeredIcons</span>(layeredIcons, options)</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">Array</span>&lt;hdsDrawable.ProcessedIcon&gt;</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getHdsLayeredIcons data size: <span class="hljs-subst">${data.length}</span>`</span>);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">processedIconList</span>: <span class="hljs-title class_">Array</span>&lt;hdsDrawable.<span class="hljs-property">ProcessedIcon</span>&gt; = data;</li><li>    })</li><li>    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getHdsLayeredIcons error, code: <span class="hljs-subst">${err.code}</span>, msg: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getHdsLayeredIcons failed, code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <p><span><img height="138.6525" originheight="950" originwidth="3564" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115326.20720908971373273796154359615987:50001231000000:2800:4806984E63F1C72DC387356FDFF689D1FAD04D7841D5DED4A085A5E5509B5930.png" title="点击放大" width="523.6875"></span></p> <div class="tiledSection"><h2 id="section12429174135913" device-type="phone,2in1,tablet,tv">hdsDrawable.getHdsIcons<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12429174135913" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getHdsIcons(icons: Array&lt;Icon&gt;, mask: image.PixelMap, options: Options): Promise&lt;Array&lt;ProcessedIcon&gt;&gt;</p> <p>批量获取处理后的单层图标接口，使用Promise异步回调。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.UIDesign.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="19.470000000000002%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="22.23%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="9.700000000000001%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="48.6%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.470000000000002%"><p>icons</p> </td> <td class="cellrowborder" width="22.23%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/ui-design-hdsdrawable#section130910562134">Icon</a>&gt;</p> </td> <td class="cellrowborder" width="9.700000000000001%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>待处理的单层图标数据集合。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>mask</p> </td> <td class="cellrowborder" width="22.23%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="9.700000000000001%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>图标蒙版信息，用于图标剪切处理。</p> </td> </tr> <tr><td class="cellrowborder" width="19.470000000000002%"><p>options</p> </td> <td class="cellrowborder" width="22.23%"><p><a href="/consumer/cn/doc/harmonyos-references/ui-design-hdsdrawable#section92509381814">Options</a></p> </td> <td class="cellrowborder" width="9.700000000000001%"><p>是</p> </td> <td class="cellrowborder" width="48.6%"><p>处理单层图标的配置项信息。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="32.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="67.84%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.16%"><p>Promise&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/ui-design-hdsdrawable#section4191115014127">ProcessedIcon</a>&gt;&gt;</p> </td> <td class="cellrowborder" width="67.84%"><p>Promise对象，返回处理后的图像数据集合。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ui-design-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p>401</p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter error. The value of icons is incorrect.</p> <p>Parameter error. The value of mask is incorrect.</p> <p>Parameter error. The value of size is incorrect.</p> <p>Parameter error. The value of hasBorder is incorrect.</p> <p>Parameter error. The value of parallelNumber is incorrect.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1012600001</p> </td> <td class="cellrowborder" width="66.28%"><p>Task is busy.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ejx-c106="" class="highlight-div"><div _ngcontent-ejx-c106="" class="highlight-div-header"><div _ngcontent-ejx-c106="" class="highlight-div-header-left"><div _ngcontent-ejx-c106="" class="handle-button expand-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ejx-c106="" class="highlight-div-header-right"><div _ngcontent-ejx-c106="" class="handle-button ai-button"></div><div _ngcontent-ejx-c106="" class="handle-button line-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ejx-c106="" class="handle-button theme-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ejx-c106="" class="handle-button copy-button"><div _ngcontent-ejx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ejx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LayeredDrawableDescriptor</span>, <span class="hljs-title class_">DrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { hdsDrawable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UIDesignKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.uidesignkit'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: hdsDrawable.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">size</span>: <span class="hljs-number">48</span>,</li><li>  <span class="hljs-attr">hasBorder</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">parallelNumber</span>: <span class="hljs-number">4</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li><span class="">  <span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resManager</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>)?.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">layeredDrawableDescriptor</span>: <span class="hljs-title class_">LayeredDrawableDescriptor</span> =</li><li>    (resManager.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.drawable'</span>)</li><li>      .<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>; <span class="hljs-comment">// 传入已创建的图片资源</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">drawableDescriptor</span>: <span class="hljs-title class_">DrawableDescriptor</span> =</li><li>    (resManager?.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.normal_icon_512'</span>).<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">DrawableDescriptor</span>; <span class="hljs-comment">// 传入已创建的图片资源</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">icons</span>: <span class="hljs-title class_">Array</span>&lt;hdsDrawable.<span class="hljs-property">Icon</span>&gt; = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    icons.<span class="hljs-title function_">push</span>({</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">`<span class="hljs-subst">${bundleName}</span>-<span class="hljs-subst">${i}</span>`</span>,</li><li>      <span class="hljs-attr">pixelMap</span>: drawableDescriptor.<span class="hljs-title function_">getPixelMap</span>()</li><li>    });</li><li>  }</li><li>
</li><li>  hdsDrawable.<span class="hljs-title function_">getHdsIcons</span>(icons, layeredDrawableDescriptor.<span class="hljs-title function_">getMask</span>().<span class="hljs-title function_">getPixelMap</span>(), options)</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">Array</span>&lt;hdsDrawable.ProcessedIcon&gt;</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getHdsIcons data size: <span class="hljs-subst">${data.length}</span>`</span>);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">processedIconList</span>: <span class="hljs-title class_">Array</span>&lt;hdsDrawable.<span class="hljs-property">ProcessedIcon</span>&gt; = data;</li><li>    })</li><li>    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getHdsIcons error, code: <span class="hljs-subst">${err.code}</span>, msg: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> message = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getHdsIcons failed, code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <p><span><img height="185.535" originheight="914" originwidth="2572" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115326.19955396424683751681972150318550:50001231000000:2800:993890FF5F61A547841E301258F2490B3F491C55734E0C46A0823D123012AC48.png" title="点击放大" width="523.6875"></span></p> <div class="tiledSection"><h2 id="section1136318361562" device-type="phone,2in1,tablet,tv">LayeredIcon<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1136318361562" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>分层图标数据对象。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.UIDesign.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.6.1.1" width="23.40765923407659%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.6.1.2" width="23.45765423457654%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.6.1.3" width="13.298670132986704%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.6.1.4" width="13.12868713128687%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.6.1.5" width="26.707329267073295%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.40765923407659%"><p>bundleName</p> </td> <td class="cellrowborder" width="23.45765423457654%"><p>string</p> </td> <td class="cellrowborder" width="13.298670132986704%"><p>否</p> </td> <td class="cellrowborder" width="13.12868713128687%"><p>否</p> </td> <td class="cellrowborder" width="26.707329267073295%"><p>应用Bundle名称。</p> </td> </tr> <tr><td class="cellrowborder" width="23.40765923407659%"><p>layeredDrawableDescriptor</p> </td> <td class="cellrowborder" width="23.45765423457654%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#layereddrawabledescriptor" target="_blank">LayeredDrawableDescriptor</a></p> </td> <td class="cellrowborder" width="13.298670132986704%"><p>否</p> </td> <td class="cellrowborder" width="13.12868713128687%"><p>否</p> </td> <td class="cellrowborder" width="26.707329267073295%"><p>需要处理的分层图标数据对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section92509381814" device-type="phone,2in1,tablet,tv">Options<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section92509381814" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>图标数据处理接口对应的配置项信息。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.UIDesign.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.6.1.1" width="18.008199180081995%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.6.1.2" width="14.96850314968503%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.6.1.3" width="12.358764123587642%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.6.1.4" width="11.70882911708829%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.6.1.5" width="42.955704429557045%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18.008199180081995%"><p>size</p> </td> <td class="cellrowborder" width="14.96850314968503%"><p>number</p> </td> <td class="cellrowborder" width="12.358764123587642%"><p>否</p> </td> <td class="cellrowborder" width="11.70882911708829%"><p>否</p> </td> <td class="cellrowborder" width="42.955704429557045%"><p>接口处理完成后输出的图标对象为正方形，该值表示输出对象的正方形边长，包含描边区域，取值范围：大于0，单位：vp。</p> </td> </tr> <tr><td class="cellrowborder" width="18.008199180081995%"><p>hasBorder</p> </td> <td class="cellrowborder" width="14.96850314968503%"><p>boolean</p> </td> <td class="cellrowborder" width="12.358764123587642%"><p>否</p> </td> <td class="cellrowborder" width="11.70882911708829%"><p>是</p> </td> <td class="cellrowborder" width="42.955704429557045%"><p>是否描边，true：描边，false：不描边，默认false，在线主题场景不支持设置描边。</p> </td> </tr> <tr><td class="cellrowborder" width="18.008199180081995%"><p>parallelNumber</p> </td> <td class="cellrowborder" width="14.96850314968503%"><p>number</p> </td> <td class="cellrowborder" width="12.358764123587642%"><p>否</p> </td> <td class="cellrowborder" width="11.70882911708829%"><p>是</p> </td> <td class="cellrowborder" width="42.955704429557045%"><p>批量处理图标数据的并发数量，默认（推荐）：4，最大10。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section4191115014127" device-type="phone,2in1,tablet,tv">ProcessedIcon<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section4191115014127" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>处理后的图标对象。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.UIDesign.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.6.1.1" width="18.008199180081988%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.6.1.2" width="19.05809419058094%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.6.1.3" width="11.258874112588739%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.6.1.4" width="11.248875112488749%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.6.1.5" width="40.42595740425956%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18.008199180081988%"><p>bundleName</p> </td> <td class="cellrowborder" width="19.05809419058094%"><p>string</p> </td> <td class="cellrowborder" width="11.258874112588739%"><p>是</p> </td> <td class="cellrowborder" width="11.248875112488749%"><p>否</p> </td> <td class="cellrowborder" width="40.42595740425956%"><p>应用Bundle名称。</p> </td> </tr> <tr><td class="cellrowborder" width="18.008199180081988%"><p>pixelMap</p> </td> <td class="cellrowborder" width="19.05809419058094%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="11.258874112588739%"><p>是</p> </td> <td class="cellrowborder" width="11.248875112488749%"><p>否</p> </td> <td class="cellrowborder" width="40.42595740425956%"><p>接口处理完成后返回的图标数据对象，格式为PixelMap。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section130910562134" device-type="phone,2in1,tablet,tv">Icon<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section130910562134" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>单层图标数据对象。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.UIDesign.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.6.1.1" width="18.01%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.6.1.2" width="22.11%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.6.1.3" width="14.729999999999999%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.6.1.4" width="13.420000000000002%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.6.1.5" width="31.730000000000004%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18.01%"><p>bundleName</p> </td> <td class="cellrowborder" width="22.11%"><p>string</p> </td> <td class="cellrowborder" width="14.729999999999999%"><p>否</p> </td> <td class="cellrowborder" width="13.420000000000002%"><p>否</p> </td> <td class="cellrowborder" width="31.730000000000004%"><p>应用Bundle名称。</p> </td> </tr> <tr><td class="cellrowborder" width="18.01%"><p>pixelMap</p> </td> <td class="cellrowborder" width="22.11%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="14.729999999999999%"><p>否</p> </td> <td class="cellrowborder" width="13.420000000000002%"><p>否</p> </td> <td class="cellrowborder" width="31.730000000000004%"><p>单层图标数据对象。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>