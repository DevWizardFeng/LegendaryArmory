<h1 _ngcontent-fld-c119="" class="doc-title ng-star-inserted" title="hid_ddk_api.h"> hid_ddk_api.h </h1>

<div _ngcontent-fld-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="2in1">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>声明主机侧访问输入设备的HID DDK接口。</p> <p><strong>引用文件：</strong> &lt;hid/hid_ddk_api.h&gt;</p> <p><strong>库：</strong> libhid.z.so</p> <p><strong>系统能力：</strong> SystemCapability.Driver.HID.Extension</p> <p><strong>起始版本：</strong> 11</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk">HidDdk</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="2in1">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div></div>  <div class="tiledSection"><h3 id="函数" device-type="2in1" class="firsth2">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_createdevice">int32_t OH_Hid_CreateDevice(Hid_Device *hidDevice, Hid_EventProperties *hidEventProperties)</a></td> <td class="cellrowborder" width="50%">创建设备。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_emitevent">int32_t OH_Hid_EmitEvent(int32_t deviceId, const Hid_EmitItem items[], uint16_t length)</a></td> <td class="cellrowborder" width="50%">向指定设备发送事件列表。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_destroydevice">int32_t OH_Hid_DestroyDevice(int32_t deviceId)</a></td> <td class="cellrowborder" width="50%">销毁设备。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_init">int32_t OH_Hid_Init(void)</a></td> <td class="cellrowborder" width="50%">初始化HID DDK。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_release">int32_t OH_Hid_Release(void)</a></td> <td class="cellrowborder" width="50%">释放HID DDK。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_open">int32_t OH_Hid_Open(uint64_t deviceId, uint8_t interfaceIndex, Hid_DeviceHandle **dev)</a></td> <td class="cellrowborder" width="50%">打开deviceId和interfaceIndex指定的设备。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_close">int32_t OH_Hid_Close(Hid_DeviceHandle **dev)</a></td> <td class="cellrowborder" width="50%">关闭设备。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_write">int32_t OH_Hid_Write(Hid_DeviceHandle *dev, uint8_t *data, uint32_t length, uint32_t *bytesWritten)</a></td> <td class="cellrowborder" width="50%">向设备写入报告。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_readtimeout">int32_t OH_Hid_ReadTimeout(Hid_DeviceHandle *dev, uint8_t *data, uint32_t bufSize, int timeout, uint32_t *bytesRead)</a></td> <td class="cellrowborder" width="50%">在指定的超时时间内从设备读取报告。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_read">int32_t OH_Hid_Read(Hid_DeviceHandle *dev, uint8_t *data, uint32_t bufSize, uint32_t *bytesRead)</a></td> <td class="cellrowborder" width="50%">从设备读取报告，默认为阻塞模式（阻塞等待直到有数据可读取），可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_setnonblocking">OH_Hid_SetNonBlocking</a>改变模式。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_setnonblocking">int32_t OH_Hid_SetNonBlocking(Hid_DeviceHandle *dev, int nonBlock)</a></td> <td class="cellrowborder" width="50%">设置设备读取模式为非阻塞。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_getrawinfo">int32_t OH_Hid_GetRawInfo(Hid_DeviceHandle *dev, Hid_RawDevInfo *rawDevInfo)</a></td> <td class="cellrowborder" width="50%">获取设备原始信息。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_getrawname">int32_t OH_Hid_GetRawName(Hid_DeviceHandle *dev, char *data, uint32_t bufSize)</a></td> <td class="cellrowborder" width="50%">获取设备原始名称。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_getphysicaladdress">int32_t OH_Hid_GetPhysicalAddress(Hid_DeviceHandle *dev, char *data, uint32_t bufSize)</a></td> <td class="cellrowborder" width="50%">获取设备物理地址。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_getrawuniqueid">int32_t OH_Hid_GetRawUniqueId(Hid_DeviceHandle *dev, uint8_t *data, uint32_t bufSize)</a></td> <td class="cellrowborder" width="50%">获取设备原始唯一标识符。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_sendreport">int32_t OH_Hid_SendReport(Hid_DeviceHandle *dev, Hid_ReportType reportType, const uint8_t *data, uint32_t length)</a></td> <td class="cellrowborder" width="50%">向设备发送报告。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_getreport">int32_t OH_Hid_GetReport(Hid_DeviceHandle *dev, Hid_ReportType reportType, uint8_t *data, uint32_t bufSize)</a></td> <td class="cellrowborder" width="50%">获取设备报告。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_getreportdescriptor">int32_t OH_Hid_GetReportDescriptor(Hid_DeviceHandle *dev, uint8_t *buf, uint32_t bufSize, uint32_t *bytesRead)</a></td> <td class="cellrowborder" width="50%">获取设备报告描述符。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="2in1">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div></div>  <div class="tiledSection"><h3 id="oh_hid_createdevice" device-type="2in1" class="firsth2">OH_Hid_CreateDevice()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_createdevice" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_Hid_CreateDevice</span>(Hid_Device *hidDevice, Hid_EventProperties *hidEventProperties)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建设备。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-device">Hid_Device</a> *hidDevice</td> <td class="cellrowborder" width="50%">创建设备需要的基本信息，包括设备名、厂商ID、产品ID等。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-eventproperties">Hid_EventProperties</a> *hidEventProperties</td> <td class="cellrowborder" width="50%">创建的设备关注的事件，包括事件类型、按键事件属性、绝对坐标事件属性、相对坐标事件属性等。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>deviceID (一个非负的数字) 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_OPERATION</a> 连接hid_ddk服务失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能的原因：1. 入参hidDevice为空指针;</p> <p> 2. 入参hidEventProperties为空指针; 3. properties的长度超过7; 4. hidEventTypes的长度超过5;</p> <p> 5. hidKeys的长度超过100; 6. hidAbs的长度超过26; 7.hidRelBits的长度超过13;</p> <p> 8. hidMiscellaneous的长度超过6。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_FAILURE</a> 设备数量达到最大值200。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_emitevent" device-type="2in1">OH_Hid_EmitEvent()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_emitevent" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_EmitEvent</span><span class="hljs-params">(<span class="hljs-type">int32_t</span> deviceId, <span class="hljs-type">const</span> Hid_EmitItem items[], <span class="hljs-type">uint16_t</span> length)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>向指定设备发送事件列表。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">int32_t deviceId</td> <td class="cellrowborder" width="50%">设备ID。</td> </tr> <tr><td class="cellrowborder" width="50%">items</td> <td class="cellrowborder" width="50%">发送的事件列表，事件包括类型（取值来源事件类型Hid_EventType）、编码（取值来源同步事件编码Hid_SynEvent、键值编码Hid_KeyCode、按钮编码HidBtnCode、绝对坐标编码Hid_AbsAxes、相对坐标编码Hid_RelAxes、其它类型的输入事件编码Hid_MscEvent）、值（根据实际设备输入决定）。</td> </tr> <tr><td class="cellrowborder" width="50%">uint16_t length</td> <td class="cellrowborder" width="50%">发送事件列表长度（一次发送事件个数）。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_OPERATION</a> 连接hid_ddk服务失败或者调用方不是设备的创建者。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能的原因: 1.设备ID小于0;</p> <p> 2.入参length长度超过7; 3.入参items为空指针。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NULL_PTR</a> 对应设备的注入为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_FAILURE</a> 对应设备不存在。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_destroydevice" device-type="2in1">OH_Hid_DestroyDevice()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_destroydevice" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_DestroyDevice</span><span class="hljs-params">(<span class="hljs-type">int32_t</span> deviceId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>销毁设备。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">int32_t deviceId</td> <td class="cellrowborder" width="50%">设备ID。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_OPERATION</a> 连接hid_ddk服务失败或者调用方不是设备的创建者。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_FAILURE</a> 对应设备不存在。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_init" device-type="2in1">OH_Hid_Init()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_init" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>初始化HID DDK。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> 初始化DDK失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_release" device-type="2in1">OH_Hid_Release()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_release" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_Release</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>释放HID DDK。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_open" device-type="2in1">OH_Hid_Open()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_open" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_Open</span><span class="hljs-params">(<span class="hljs-type">uint64_t</span> deviceId, <span class="hljs-type">uint8_t</span> interfaceIndex, Hid_DeviceHandle **dev)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>打开deviceId和interfaceIndex指定的设备。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t deviceId</td> <td class="cellrowborder" width="50%">操作设备的ID。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t interfaceIndex</td> <td class="cellrowborder" width="50%">接口索引，对应HID设备的接口。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> **dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_MEMORY_ERROR</a> dev内存申请失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> dev为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_DEVICE_NOT_FOUND</a> 根据deviceId和interfaceIndex找不到设备。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_close" device-type="2in1">OH_Hid_Close()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_close" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_Hid_Close</span>(Hid_DeviceHandle **dev)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>关闭设备。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> **dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> dev为空。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_write" device-type="2in1">OH_Hid_Write()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_write" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_Write</span><span class="hljs-params">(Hid_DeviceHandle *dev, <span class="hljs-type">uint8_t</span> *data, <span class="hljs-type">uint32_t</span> length, <span class="hljs-type">uint32_t</span> *bytesWritten)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>向设备写入报告。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t *data</td> <td class="cellrowborder" width="50%">待写入的数据。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t length</td> <td class="cellrowborder" width="50%">写入数据的字节长度，最大不超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t *bytesWritten</td> <td class="cellrowborder" width="50%">实际写入的数据字节数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. data为空；3. length为0；4. length超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>；</p> <p> 5. bytesWritten为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_readtimeout" device-type="2in1">OH_Hid_ReadTimeout()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_readtimeout" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_ReadTimeout</span><span class="hljs-params">(Hid_DeviceHandle *dev, <span class="hljs-type">uint8_t</span> *data, <span class="hljs-type">uint32_t</span> bufSize, <span class="hljs-type">int</span> timeout, <span class="hljs-type">uint32_t</span> *bytesRead)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>在指定的超时时间内从设备读取报告。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t *data</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t bufSize</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区大小，最大不超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">int timeout</td> <td class="cellrowborder" width="50%">超时时间（毫秒）或-1表示阻塞等待。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t *bytesRead</td> <td class="cellrowborder" width="50%">读取的字节数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. data为空；3. bufSize为0；4. bufSize超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>；</p> <p> 5. bytesRead为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_MEMORY_ERROR</a> 内存数据拷贝失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_TIMEOUT</a> 读取超时。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_read" device-type="2in1">OH_Hid_Read()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_read" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_Read</span><span class="hljs-params">(Hid_DeviceHandle *dev, <span class="hljs-type">uint8_t</span> *data, <span class="hljs-type">uint32_t</span> bufSize, <span class="hljs-type">uint32_t</span> *bytesRead)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从设备读取报告，默认为阻塞模式（阻塞等待直到有数据可读取），可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_setnonblocking">OH_Hid_SetNonBlocking</a>改变模式。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t *data</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t bufSize</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区大小，最大不超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t *bytesRead</td> <td class="cellrowborder" width="50%">读取的字节数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. data为空；3. bufSize为0；4. bufSize超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>；</p> <p> 5.bytesRead为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_MEMORY_ERROR</a> 内存数据拷贝失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_TIMEOUT</a> 读取超时。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_setnonblocking" device-type="2in1">OH_Hid_SetNonBlocking()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_setnonblocking" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_SetNonBlocking</span><span class="hljs-params">(Hid_DeviceHandle *dev, <span class="hljs-type">int</span> nonBlock)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置设备读取模式为非阻塞。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">int nonBlock</td> <td class="cellrowborder" width="50%"><p>是否启用非阻塞模式读取数据。1: 启用非阻塞模式，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-api-h#oh_hid_read">OH_Hid_Read</a>接口时，如果设备有可读的数据，读取并返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a>，</p> <p> 如果设备没有数据可读，则返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_TIMEOUT</a>。0: 禁用非阻塞模式。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. nonBlock不是1或0。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_getrawinfo" device-type="2in1">OH_Hid_GetRawInfo()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_getrawinfo" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_Hid_GetRawInfo</span>(Hid_DeviceHandle *dev, Hid_RawDevInfo *rawDevInfo)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取设备原始信息。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-rawdevinfo">Hid_RawDevInfo</a> *rawDevInfo</td> <td class="cellrowborder" width="50%">设备原始信息，包含供应商ID、产品ID和总线类型。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. rawDevInfo为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_OPERATION</a> 不支持此操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_getrawname" device-type="2in1">OH_Hid_GetRawName()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_getrawname" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_GetRawName</span><span class="hljs-params">(Hid_DeviceHandle *dev, <span class="hljs-type">char</span> *data, <span class="hljs-type">uint32_t</span> bufSize)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取设备原始名称。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">char *data</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t bufSize</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区大小，最大不超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. data为空；3. bufSize为0；4. bufSize超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_MEMORY_ERROR</a> 内存数据拷贝失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_OPERATION</a> 不支持此操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_getphysicaladdress" device-type="2in1">OH_Hid_GetPhysicalAddress()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_getphysicaladdress" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_GetPhysicalAddress</span><span class="hljs-params">(Hid_DeviceHandle *dev, <span class="hljs-type">char</span> *data, <span class="hljs-type">uint32_t</span> bufSize)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取设备物理地址。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">char *data</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t bufSize</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区大小，最大不超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. data为空；3. bufSize为0；4. bufSize超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_MEMORY_ERROR</a> 内存数据拷贝失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_OPERATION</a> 不支持此操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_getrawuniqueid" device-type="2in1">OH_Hid_GetRawUniqueId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_getrawuniqueid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_GetRawUniqueId</span><span class="hljs-params">(Hid_DeviceHandle *dev, <span class="hljs-type">uint8_t</span> *data, <span class="hljs-type">uint32_t</span> bufSize)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取设备原始唯一标识符。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t *data</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t bufSize</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区大小，最大不超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. data为空；3. bufSize为0；4. bufSize超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_MEMORY_ERROR</a> 内存数据拷贝失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_OPERATION</a> 不支持此操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_sendreport" device-type="2in1">OH_Hid_SendReport()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_sendreport" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_SendReport</span><span class="hljs-params">(Hid_DeviceHandle *dev, Hid_ReportType reportType, <span class="hljs-type">const</span> <span class="hljs-type">uint8_t</span> *data, <span class="hljs-type">uint32_t</span> length)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>向设备发送报告。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_reporttype">Hid_ReportType</a> reportType</td> <td class="cellrowborder" width="50%">报告类型。</td> </tr> <tr><td class="cellrowborder" width="50%">const uint8_t *data</td> <td class="cellrowborder" width="50%">待发送的数据。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t length</td> <td class="cellrowborder" width="50%">发送数据的字节长度，最大不超过 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. data为空；3. length为0；4. length超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_OPERATION</a> 不支持此操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_getreport" device-type="2in1">OH_Hid_GetReport()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_getreport" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_GetReport</span><span class="hljs-params">(Hid_DeviceHandle *dev, Hid_ReportType reportType, <span class="hljs-type">uint8_t</span> *data, <span class="hljs-type">uint32_t</span> bufSize)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取设备报告。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_reporttype">Hid_ReportType</a> reportType</td> <td class="cellrowborder" width="50%">报告类型。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t *data</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t bufSize</td> <td class="cellrowborder" width="50%">存放读取数据的缓冲区大小，最大不超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. data为空；3. bufSize为0；4. bufSize超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_MEMORY_ERROR</a> 内存数据拷贝失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_OPERATION</a> 不支持此操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hid_getreportdescriptor" device-type="2in1">OH_Hid_GetReportDescriptor()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hid_getreportdescriptor" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-fld-c106="" class="highlight-div"><div _ngcontent-fld-c106="" class="highlight-div-header"><div _ngcontent-fld-c106="" class="highlight-div-header-left"><div _ngcontent-fld-c106="" class="handle-button expand-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fld-c106="" class="highlight-div-header-right"><div _ngcontent-fld-c106="" class="handle-button ai-button"></div><div _ngcontent-fld-c106="" class="handle-button line-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fld-c106="" class="handle-button theme-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fld-c106="" class="handle-button copy-button"><div _ngcontent-fld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fld-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Hid_GetReportDescriptor</span><span class="hljs-params">(Hid_DeviceHandle *dev, <span class="hljs-type">uint8_t</span> *buf, <span class="hljs-type">uint32_t</span> bufSize, <span class="hljs-type">uint32_t</span> *bytesRead)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取设备报告描述符。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_HID</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidddk-hid-devicehandle">Hid_DeviceHandle</a> *dev</td> <td class="cellrowborder" width="50%">设备操作句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t *buf</td> <td class="cellrowborder" width="50%">存放描述符的缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t bufSize</td> <td class="cellrowborder" width="50%">缓冲区的字节大小，最大不超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t *bytesRead</td> <td class="cellrowborder" width="50%">读取的字节数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SUCCESS</a> 操作成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_PARAMETER</a> 参数校验失败。可能原因：1. dev为空；</p> <p> 2. buf为空；3. bufSize为0；4. bufSize超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_max_report_buffer_size">HID_MAX_REPORT_BUFFER_SIZE</a>；</p> <p> 5. bytesRead为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INIT_ERROR</a> DDK未初始化。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_MEMORY_ERROR</a> 内存数据拷贝失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_IO_ERROR</a> I/O操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hid-ddk-types-h#hid_ddkerrcode">HID_DDK_INVALID_OPERATION</a> 不支持此操作。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>