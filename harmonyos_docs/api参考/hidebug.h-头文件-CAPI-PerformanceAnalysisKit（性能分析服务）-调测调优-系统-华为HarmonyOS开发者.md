<h1 _ngcontent-dfy-c119="" class="doc-title ng-star-inserted" title="hidebug.h"> hidebug.h </h1>

<div _ngcontent-dfy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义HiDebug模块的调试功能。</p> <p><strong>引用文件：</strong> &lt;hidebug/hidebug.h&gt;</p> <p><strong>库：</strong> libohhidebug.so</p> <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiProfiler.HiDebug</p> <p><strong>起始版本：</strong> 12</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug">HiDebug</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_getsystemcpuusage">double OH_HiDebug_GetSystemCpuUsage()</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取系统的CPU资源占用情况百分比。注意：由于该接口涉及跨进程通信，耗时较长，建议不要在主线程中直接调用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_getappcpuusage">double OH_HiDebug_GetAppCpuUsage()</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取进程的CPU使用率百分比。注意：由于该接口涉及跨进程通信，耗时较长，建议不要在主线程中直接调用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_getappthreadcpuusage">HiDebug_ThreadCpuUsagePtr OH_HiDebug_GetAppThreadCpuUsage()</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取应用所有线程CPU使用情况。注意：由于该接口涉及跨进程通信，耗时较长，建议不要在主线程中直接调用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_freethreadcpuusage">void OH_HiDebug_FreeThreadCpuUsage(HiDebug_ThreadCpuUsagePtr *threadCpuUsage)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">释放线程数据结构。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_getsystemmeminfo">void OH_HiDebug_GetSystemMemInfo(HiDebug_SystemMemInfo *systemMemInfo)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取系统内存信息。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_getappnativememinfo">void OH_HiDebug_GetAppNativeMemInfo(HiDebug_NativeMemInfo *nativeMemInfo)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取应用程序进程的内存信息。注意：由于该接口需要读取/proc/{pid}/smaps_rollup节点信息，耗时较长，建议不要在主线程中直接调用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_getappnativememinfowithcache">void OH_HiDebug_GetAppNativeMemInfoWithCache(HiDebug_NativeMemInfo *nativeMemInfo, bool forceRefresh)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取应用程序进程的内存信息，该接口存在缓存机制以提高接口性能。缓存值的有效期为5分钟。注意：由于该接口需要读取/proc/{pid}/smaps_rollup节点信息，耗时较长，建议不要在主线程中直接调用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_getappmemorylimit">void OH_HiDebug_GetAppMemoryLimit(HiDebug_MemoryLimit *memoryLimit)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取应用程序进程的内存限制。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_startapptracecapture">HiDebug_ErrorCode OH_HiDebug_StartAppTraceCapture(HiDebug_TraceFlag flag, uint64_t tags, uint32_t limitSize, char* fileName, uint32_t length)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">启动应用trace采集。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_stopapptracecapture">HiDebug_ErrorCode OH_HiDebug_StopAppTraceCapture()</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">停止采集应用程序trace。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_getgraphicsmemory">HiDebug_ErrorCode OH_HiDebug_GetGraphicsMemory(uint32_t *value)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取应用GPU显存大小。注意：由于该接口涉及多次跨进程通信，其耗时可能超过1秒，建议不要在主线程中直接调用该接口。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_backtracefromfp">int OH_HiDebug_BacktraceFromFp(HiDebug_Backtrace_Object object, void* startFp, void** pcArray, int size)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">根据给定的fp地址进行栈回溯，该函数异步信号安全。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_symbolicaddresscallback">typedef void (*OH_HiDebug_SymbolicAddressCallback)(void* pc, void* arg, const HiDebug_StackFrame* frame)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_HiDebug_SymbolicAddressCallback</td> <td class="cellrowborder" width="33.33333333333333%">若<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_symbolicaddress">OH_HiDebug_SymbolicAddress</a>接口调用成功，将通过该函数将解析后的栈信息返回给调用者。注意：由于该接口涉及多次IO操作，耗时较长，建议不要在主线程中直接调用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_symbolicaddress">HiDebug_ErrorCode OH_HiDebug_SymbolicAddress(HiDebug_Backtrace_Object object, void* pc, void* arg, OH_HiDebug_SymbolicAddressCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">通过给定的pc地址获取详细的符号信息，该函数非异步信号安全。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_createbacktraceobject">HiDebug_Backtrace_Object OH_HiDebug_CreateBacktraceObject(void)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">创建一个用于栈回溯及栈解析的对象，该函数非异步信号安全。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_destroybacktraceobject">void OH_HiDebug_DestroyBacktraceObject(HiDebug_Backtrace_Object object)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">销毁由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_createbacktraceobject">OH_HiDebug_CreateBacktraceObject</a>创建的对象，以释放栈回溯及栈解析过程中申请的资源，该函数非异步信号安全。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_setmallocdispatchtable">HiDebug_ErrorCode OH_HiDebug_SetMallocDispatchTable(struct HiDebug_MallocDispatch *dispatchTable)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置基础库C库MallocDispatch表，用于替换开发者自定义的内存操作函数（例如：malloc/free/calloc/realloc/mmap/munmap)。MallocDispatch表是基础库C库中封装malloc/calloc/realloc/free等内存操作函数的结构体。HiDebug_MallocDispatch只是MallocDispatch结构体的一部分。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_getdefaultmallocdispatchtable">HiDebug_MallocDispatch* OH_HiDebug_GetDefaultMallocDispatchTable(void)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取基础库C库当前默认MallocDispatch表，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_restoremallocdispatchtable">OH_HiDebug_RestoreMallocDispatchTable</a>可恢复。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_restoremallocdispatchtable">void OH_HiDebug_RestoreMallocDispatchTable(void)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">恢复基础库C库MallocDispatch表。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_getgraphicsmemorysummary">HiDebug_ErrorCode OH_HiDebug_GetGraphicsMemorySummary(uint32_t interval, HiDebug_GraphicsMemorySummary *summary)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取应用显存占用的详细数据。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_hidebug_getsystemcpuusage" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_HiDebug_GetSystemCpuUsage()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_getsystemcpuusage" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>double <span class="hljs-built_in">OH_HiDebug_GetSystemCpuUsage</span>()</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取系统的CPU资源占用情况百分比。注意：由于该接口涉及跨进程通信，耗时较长，建议不要在主线程中直接调用。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">double</td> <td class="cellrowborder" width="50%">返回系统CPU资源占用情况百分比。如果返回结果为0，可能的原因是获取失败。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_getappcpuusage" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_GetAppCpuUsage()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_getappcpuusage" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>double <span class="hljs-built_in">OH_HiDebug_GetAppCpuUsage</span>()</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取进程的CPU使用率百分比。注意：由于该接口涉及跨进程通信，耗时较长，建议不要在主线程中直接调用。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">double</td> <td class="cellrowborder" width="50%">返回进程的CPU使用率百分比。如果返回结果为0，可能因当前应用的CPU使用率过低导致。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_getappthreadcpuusage" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_GetAppThreadCpuUsage()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_getappthreadcpuusage" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>HiDebug_ThreadCpuUsagePtr <span class="hljs-built_in">OH_HiDebug_GetAppThreadCpuUsage</span>()</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取应用所有线程CPU使用情况。注意：由于该接口涉及跨进程通信，耗时较长，建议不要在主线程中直接调用。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-threadcpuusage">HiDebug_ThreadCpuUsagePtr</a></td> <td class="cellrowborder" width="50%"><p>返回所有线程CPU使用情况，见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-threadcpuusage">HiDebug_ThreadCpuUsagePtr</a>。</p> <p> 若返回结果为null，可能因未获取到线程相关数据所致。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_freethreadcpuusage" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_FreeThreadCpuUsage()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_freethreadcpuusage" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_HiDebug_FreeThreadCpuUsage</span><span class="hljs-params">(HiDebug_ThreadCpuUsagePtr *threadCpuUsage)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>释放线程数据结构。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-threadcpuusage">HiDebug_ThreadCpuUsagePtr</a> *threadCpuUsage</td> <td class="cellrowborder" width="50%">应用的所有线程可用CPU使用缓冲区指针，见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-threadcpuusage">HiDebug_ThreadCpuUsagePtr</a>。传入的参数是要由OH_HiDebug_GetAppThreadCpuUsage()得到的。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_getsystemmeminfo" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_GetSystemMemInfo()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_getsystemmeminfo" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_HiDebug_GetSystemMemInfo</span><span class="hljs-params">(HiDebug_SystemMemInfo *systemMemInfo)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取系统内存信息。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-systemmeminfo">HiDebug_SystemMemInfo</a> *systemMemInfo</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-systemmeminfo">HiDebug_SystemMemInfo</a>。函数调用后，若结构体数据为空，则表明调用失败。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_getappnativememinfo" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_GetAppNativeMemInfo()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_getappnativememinfo" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_HiDebug_GetAppNativeMemInfo</span><span class="hljs-params">(HiDebug_NativeMemInfo *nativeMemInfo)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取应用程序进程的内存信息。注意：由于该接口需要读取/proc/{pid}/smaps_rollup节点信息，耗时较长，建议不要在主线程中直接调用。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-nativememinfo">HiDebug_NativeMemInfo</a> *nativeMemInfo</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-nativememinfo">HiDebug_NativeMemInfo</a>。函数调用后，若结构体数据为空，则表明调用失败。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_getappnativememinfowithcache" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_GetAppNativeMemInfoWithCache()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_getappnativememinfowithcache" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_HiDebug_GetAppNativeMemInfoWithCache</span><span class="hljs-params">(HiDebug_NativeMemInfo *nativeMemInfo, <span class="hljs-type">bool</span> forceRefresh)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取应用程序进程的内存信息，该接口存在缓存机制以提高接口性能。缓存值的有效期为5分钟。注意：由于该接口需要读取/proc/{pid}/smaps_rollup节点信息，耗时较长，建议不要在主线程中直接调用。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-nativememinfo">HiDebug_NativeMemInfo</a> *nativeMemInfo</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-nativememinfo">HiDebug_NativeMemInfo</a>。函数调用后，若结构体数据为空，则表明调用失败。</td> </tr> <tr><td class="cellrowborder" width="50%">bool forceRefresh</td> <td class="cellrowborder" width="50%"><p>是否需要无视缓存有效性，强制更新缓存值。</p> <p> 当为true时，直接获取当前内存数据并更新缓存值；</p> <p> 当为false时，缓存有效时，直接返回缓存值，缓存失效时，获取当前内存数据并更新缓存值。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_getappmemorylimit" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_GetAppMemoryLimit()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_getappmemorylimit" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_HiDebug_GetAppMemoryLimit</span><span class="hljs-params">(HiDebug_MemoryLimit *memoryLimit)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取应用程序进程的内存限制。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-memorylimit">HiDebug_MemoryLimit</a> *memoryLimit</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-memorylimit">HiDebug_MemoryLimit</a>。函数调用后，若结构体数据为空，则表明调用失败。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_startapptracecapture" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_StartAppTraceCapture()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_startapptracecapture" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">HiDebug_ErrorCode <span class="hljs-title">OH_HiDebug_StartAppTraceCapture</span><span class="hljs-params">(HiDebug_TraceFlag flag, <span class="hljs-type">uint64_t</span> tags, <span class="hljs-type">uint32_t</span> limitSize, <span class="hljs-type">char</span>* fileName, <span class="hljs-type">uint32_t</span> length)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>启动应用trace采集。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_traceflag">HiDebug_TraceFlag</a> flag</td> <td class="cellrowborder" width="50%">采集线程trace方式。</td> </tr> <tr><td class="cellrowborder" width="50%">uint64_t tags</td> <td class="cellrowborder" width="50%">采集trace场景标签。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t limitSize</td> <td class="cellrowborder" width="50%">trace文件的最大大小（以字节为单位），最大为 500MB。</td> </tr> <tr><td class="cellrowborder" width="50%">char* fileName</td> <td class="cellrowborder" width="50%">输出trace文件名缓冲区。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t length</td> <td class="cellrowborder" width="50%">输出trace文件名缓冲区长度。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HiDebug_ErrorCode</a></td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HIDEBUG_INVALID_ARGUMENT</a> 401 - fileName参数为空指针或者传入的length参数过小或者limitSize参数小于等于0。</p> <p> 11400102 - 已经开启了一个trace。</p> <p> 11400103 - 没有权限去开启trace。</p> <p> 11400104 - 系统内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_stopapptracecapture" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_StopAppTraceCapture()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_stopapptracecapture" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>HiDebug_ErrorCode <span class="hljs-built_in">OH_HiDebug_StopAppTraceCapture</span>()</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>停止采集应用程序trace。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HiDebug_ErrorCode</a></td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> 11400104 - 系统内部错误。</p> <p> 11400105 - 当前没有trace正在运行</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_getgraphicsmemory" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_GetGraphicsMemory()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_getgraphicsmemory" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>HiDebug_ErrorCode <span class="hljs-built_in">OH_HiDebug_GetGraphicsMemory</span>(uint32_t *value)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取应用GPU显存大小。注意：由于该接口涉及多次跨进程通信，其耗时可能超过1秒，建议不要在主线程中直接调用该接口。</p> <p><strong>起始版本：</strong> 14</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">uint32_t *value</td> <td class="cellrowborder" width="50%">指向用来保存接口获取到的应用显存大小（单位KB）的变量的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HiDebug_ErrorCode</a></td> <td class="cellrowborder" width="50%"><p>0 - 接口获取成功。</p> <p> 401 - 无效参数，所传递参数为空指针。</p> <p> 11400104 - 系统内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_backtracefromfp" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_BacktraceFromFp()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_backtracefromfp" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">OH_HiDebug_BacktraceFromFp</span>(<span class="hljs-params">HiDebug_Backtrace_Object <span class="hljs-built_in">object</span>, <span class="hljs-keyword">void</span>* startFp, <span class="hljs-keyword">void</span>** pcArray, <span class="hljs-built_in">int</span> size</span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据给定的fp地址进行栈回溯，该函数异步信号安全。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-backtrace-object--8h">HiDebug_Backtrace_Object</a> object</td> <td class="cellrowborder" width="50%">由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_createbacktraceobject">OH_HiDebug_CreateBacktraceObject</a>接口获取到的用来栈回溯的对象。</td> </tr> <tr><td class="cellrowborder" width="50%">void* startFp</td> <td class="cellrowborder" width="50%">栈回溯的起始栈帧地址。</td> </tr> <tr><td class="cellrowborder" width="50%">void** pcArray</td> <td class="cellrowborder" width="50%">保存栈回溯得到的pc地址的数组。</td> </tr> <tr><td class="cellrowborder" width="50%">int size</td> <td class="cellrowborder" width="50%">保存栈回溯得到的pc地址的数组长度。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%">成功回溯并写入到pcArray中的栈帧数量。如果返回结果为0，原因可能是栈回溯失败。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_symbolicaddresscallback" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_SymbolicAddressCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_symbolicaddresscallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_HiDebug_SymbolicAddressCallback)(<span class="hljs-type">void</span>* pc, <span class="hljs-type">void</span>* arg, <span class="hljs-keyword">const</span> HiDebug_StackFrame* frame)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>若<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_symbolicaddress">OH_HiDebug_SymbolicAddress</a>接口调用成功，将通过该函数将解析后的栈信息返回给调用者。注意：由于该接口涉及多次IO操作，耗时较长，建议不要在主线程中直接调用。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">void* pc</td> <td class="cellrowborder" width="50%">传入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_symbolicaddress">OH_HiDebug_SymbolicAddress</a>接口的需要解析的pc地址。</td> </tr> <tr><td class="cellrowborder" width="50%">void* arg</td> <td class="cellrowborder" width="50%">传入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_symbolicaddress">OH_HiDebug_SymbolicAddress</a>接口的arg值。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-stackframe"> const HiDebug_StackFrame</a>* frame</td> <td class="cellrowborder" width="50%">由传入<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_symbolicaddress">OH_HiDebug_SymbolicAddress</a>接口的pc地址解析后的得到栈信息<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-stackframe">HiDebug_StackFrame</a>指针，该指针指向内容仅在该函数作用域内有效。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_symbolicaddress" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_SymbolicAddress()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_symbolicaddress" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">HiDebug_ErrorCode <span class="hljs-title">OH_HiDebug_SymbolicAddress</span>(<span class="hljs-params">HiDebug_Backtrace_Object <span class="hljs-built_in">object</span>, <span class="hljs-keyword">void</span>* pc, <span class="hljs-keyword">void</span>* arg, OH_HiDebug_SymbolicAddressCallback callback</span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过给定的pc地址获取详细的符号信息，该函数非异步信号安全。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-backtrace-object--8h">HiDebug_Backtrace_Object</a> object</td> <td class="cellrowborder" width="50%">由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_createbacktraceobject">OH_HiDebug_CreateBacktraceObject</a>接口创建的对象。</td> </tr> <tr><td class="cellrowborder" width="50%">void* pc</td> <td class="cellrowborder" width="50%">由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_backtracefromfp">OH_HiDebug_BacktraceFromFp</a>接口获取到的pc地址。</td> </tr> <tr><td class="cellrowborder" width="50%">void* arg</td> <td class="cellrowborder" width="50%">保留的自定义参数，符号解析成功后系统内部会将该参数传递给回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_symbolicaddresscallback">OH_HiDebug_SymbolicAddressCallback</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_symbolicaddresscallback">OH_HiDebug_SymbolicAddressCallback</a> callback</td> <td class="cellrowborder" width="50%">用于返回解析后栈信息的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HiDebug_ErrorCode</a></td> <td class="cellrowborder" width="50%"><p>返回结果具体可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HiDebug_ErrorCode</a>：</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HIDEBUG_SUCCESS</a> 成功获取到详细的栈信息，且该函数传入的callback被调用。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HIDEBUG_INVALID_ARGUMENT</a> 无效参数。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HIDEBUG_INVALID_SYMBOLIC_PC_ADDRESS</a> 无法根据传入的pc地址找到对应的符号。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_createbacktraceobject" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_CreateBacktraceObject()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_createbacktraceobject" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>HiDebug_Backtrace_Object <span class="hljs-title function_">OH_HiDebug_CreateBacktraceObject</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建一个用于栈回溯及栈解析的对象，该函数非异步信号安全。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-backtrace-object--8h">HiDebug_Backtrace_Object</a></td> <td class="cellrowborder" width="50%">返回创建的对象的指针，当创建失败时返回NULL。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_destroybacktraceobject" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_DestroyBacktraceObject()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_destroybacktraceobject" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">OH_HiDebug_DestroyBacktraceObject</span>(<span class="hljs-params">HiDebug_Backtrace_Object <span class="hljs-built_in">object</span></span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>销毁由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_createbacktraceobject">OH_HiDebug_CreateBacktraceObject</a>创建的对象，以释放栈回溯及栈解析过程中申请的资源，该函数非异步信号安全。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-backtrace-object--8h">HiDebug_Backtrace_Object</a> object</td> <td class="cellrowborder" width="50%">需要被销毁的对象。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_setmallocdispatchtable" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_SetMallocDispatchTable()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_setmallocdispatchtable" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>HiDebug_ErrorCode <span class="hljs-built_in">OH_HiDebug_SetMallocDispatchTable</span>(struct HiDebug_MallocDispatch *dispatchTable)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置基础库C库MallocDispatch表，用于替换开发者自定义的内存操作函数（例如：malloc/free/calloc/realloc/mmap/munmap)。MallocDispatch表是基础库C库中封装malloc/calloc/realloc/free等内存操作函数的结构体。HiDebug_MallocDispatch只是MallocDispatch结构体的一部分。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-mallocdispatch">struct HiDebug_MallocDispatch</a> *dispatchTable</td> <td class="cellrowborder" width="50%">指向开发者自定义内存操作函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-mallocdispatch">HiDebug_MallocDispatch</a>结构体指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HiDebug_ErrorCode</a></td> <td class="cellrowborder" width="50%"><p>返回结果具体可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HiDebug_ErrorCode</a>：</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HIDEBUG_SUCCESS</a> 成功设置自定义内存操作函数。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HIDEBUG_INVALID_ARGUMENT</a> 无效参数。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_getdefaultmallocdispatchtable" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_GetDefaultMallocDispatchTable()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_getdefaultmallocdispatchtable" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>HiDebug_MallocDispatch* <span class="hljs-built_in">OH_HiDebug_GetDefaultMallocDispatchTable</span>(void)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取基础库C库当前默认MallocDispatch表，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-h#oh_hidebug_restoremallocdispatchtable">OH_HiDebug_RestoreMallocDispatchTable</a>可恢复。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-mallocdispatch">HiDebug_MallocDispatch*</a></td> <td class="cellrowborder" width="50%">当前C库默认的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-mallocdispatch">HiDebug_MallocDispatch</a>结构体指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_hidebug_restoremallocdispatchtable" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_RestoreMallocDispatchTable()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_restoremallocdispatchtable" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_HiDebug_RestoreMallocDispatchTable</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>恢复基础库C库MallocDispatch表。</p> <p><strong>起始版本：</strong> 20</p> </div>  <div class="tiledSection"><h3 id="oh_hidebug_getgraphicsmemorysummary" device-type="phone,2in1,tablet,wearable,tv">OH_HiDebug_GetGraphicsMemorySummary()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_hidebug_getgraphicsmemorysummary" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dfy-c106="" class="highlight-div"><div _ngcontent-dfy-c106="" class="highlight-div-header"><div _ngcontent-dfy-c106="" class="highlight-div-header-left"><div _ngcontent-dfy-c106="" class="handle-button expand-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dfy-c106="" class="highlight-div-header-right"><div _ngcontent-dfy-c106="" class="handle-button ai-button"></div><div _ngcontent-dfy-c106="" class="handle-button line-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dfy-c106="" class="handle-button theme-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dfy-c106="" class="handle-button copy-button"><div _ngcontent-dfy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dfy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>HiDebug_ErrorCode <span class="hljs-built_in">OH_HiDebug_GetGraphicsMemorySummary</span>(uint32_t interval, HiDebug_GraphicsMemorySummary *summary)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取应用显存占用的详细数据。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">uint32_t interval</td> <td class="cellrowborder" width="50%"><p>当显存数据缓存值存在时间超过设定间隔interval（单位：秒）时，接口会获取最新的显存数据并更新缓存；否则，接口将直接返回缓存值。</p> <p> interval的取值范围为[2，3600]，若传入的interval超出取值范围时，将使用300作为默认值。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-graphicsmemorysummary">HiDebug_GraphicsMemorySummary</a> *summary</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-hidebug-graphicsmemorysummary">HiDebug_GraphicsMemorySummary</a>的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HiDebug_ErrorCode</a></td> <td class="cellrowborder" width="50%"><p>返回结果具体可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-hidebug-type-h#hidebug_errorcode">HiDebug_ErrorCode</a>：</p> <p> HIDEBUG_SUCCESS 成功获取到应用显存数据。</p> <p> HIDEBUG_INVALID_ARGUMENT 无效参数。</p> <p> HIDEBUG_TRACE_ABNORMAL 系统内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>