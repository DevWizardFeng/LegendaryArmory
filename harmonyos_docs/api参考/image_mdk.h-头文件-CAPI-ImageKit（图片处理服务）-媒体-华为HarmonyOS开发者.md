<h1 _ngcontent-uds-c119="" class="doc-title ng-star-inserted" title="image_mdk.h"> image_mdk.h </h1>

<div _ngcontent-uds-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>声明访问图像矩形、大小、格式和组件数据的函数。</p>     <p><strong>引用文件：</strong> &lt;multimedia/image_framework/image_mdk.h&gt;</p>     <p><strong>库：</strong> libimage_ndk.z.so</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image">Image</a></p>    </div>    <div class="tiledSection">     <h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-ohosimagerect">OhosImageRect</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">定义图像矩形信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagenative-">ImageNative_</a></td>         <td class="cellrowborder" width="33.33333333333333%">ImageNative</td>         <td class="cellrowborder" width="33.33333333333333%">为图像接口定义native层图像对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-ohosimagecomponent">OhosImageComponent</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">定义图像组成信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="枚举" device-type="phone,2in1,tablet,wearable,tv">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.1" width="50%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#图像格式">图像格式</a></td>         <td class="cellrowborder" width="50%">图像格式枚举值。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#图像颜色通道类型">图像颜色通道类型</a></td>         <td class="cellrowborder" width="50%">图像颜色通道类型枚举值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" width="50%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_initimagenative">ImageNative* OH_Image_InitImageNative(napi_env env, napi_value source)</a></td>         <td class="cellrowborder" width="50%">从输入的JavaScript Native API图像对象中解析native ImageNative对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_cliprect">int32_t OH_Image_ClipRect(const ImageNative* native, struct OhosImageRect* rect)</a></td>         <td class="cellrowborder" width="50%">获取native ImageNative对象OhosImageRect信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_size">int32_t OH_Image_Size(const ImageNative* native, struct OhosImageSize* size)</a></td>         <td class="cellrowborder" width="50%">获取native ImageNative对象的OhosImageSize信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_format">int32_t OH_Image_Format(const ImageNative* native, int32_t* format)</a></td>         <td class="cellrowborder" width="50%">获取native ImageNative对象的图像格式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_getcomponent">int32_t OH_Image_GetComponent(const ImageNative* native, int32_t componentType, struct OhosImageComponent* componentNative)</a></td>         <td class="cellrowborder" width="50%">从native ImageNative对象中获取OhosImageComponent。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_release">int32_t OH_Image_Release(ImageNative* native)</a></td>         <td class="cellrowborder" width="50%">          <p>释放ImageNative native对象。</p>          <p>这个方法无法释放JavaScript Native API Image对象，而是释放被<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_initimagenative">OH_Image_InitImageNative</a>解析的ImageNative native对象。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="枚举类型说明" device-type="phone,2in1,tablet,wearable,tv">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="图像格式" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">图像格式<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="图像格式" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-uds-c106="" class="highlight-div"><div _ngcontent-uds-c106="" class="highlight-div-header"><div _ngcontent-uds-c106="" class="highlight-div-header-left"><div _ngcontent-uds-c106="" class="handle-button expand-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uds-c106="" class="highlight-div-header-right"><div _ngcontent-uds-c106="" class="handle-button ai-button"></div><div _ngcontent-uds-c106="" class="handle-button line-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uds-c106="" class="handle-button theme-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uds-c106="" class="handle-button copy-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uds-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">anonymous</span> <span class="hljs-keyword">enum</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>图像格式枚举值。</p>     <p><strong>起始版本：</strong> 10</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.1" width="50%">枚举项</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%">OHOS_IMAGE_FORMAT_YCBCR_422_SP = 1000</td>         <td class="cellrowborder" width="50%">YCBCR422 semi-planar格式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">OHOS_IMAGE_FORMAT_JPEG = 2000</td>         <td class="cellrowborder" width="50%">JPEG编码格式。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="图像颜色通道类型" device-type="phone,2in1,tablet,wearable,tv">图像颜色通道类型<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="图像颜色通道类型" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-uds-c106="" class="highlight-div"><div _ngcontent-uds-c106="" class="highlight-div-header"><div _ngcontent-uds-c106="" class="highlight-div-header-left"><div _ngcontent-uds-c106="" class="handle-button expand-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uds-c106="" class="highlight-div-header-right"><div _ngcontent-uds-c106="" class="handle-button ai-button"></div><div _ngcontent-uds-c106="" class="handle-button line-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uds-c106="" class="handle-button theme-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uds-c106="" class="handle-button copy-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uds-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">anonymous</span> <span class="hljs-keyword">enum</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>图像颜色通道类型枚举值。</p>     <p><strong>起始版本：</strong> 10</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.1" width="50%">枚举项</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%">OHOS_IMAGE_COMPONENT_FORMAT_YUV_Y = 1</td>         <td class="cellrowborder" width="50%">亮度信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">OHOS_IMAGE_COMPONENT_FORMAT_YUV_U = 2</td>         <td class="cellrowborder" width="50%">色度信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">OHOS_IMAGE_COMPONENT_FORMAT_YUV_V = 3</td>         <td class="cellrowborder" width="50%">色差值信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">OHOS_IMAGE_COMPONENT_FORMAT_JPEG = 4</td>         <td class="cellrowborder" width="50%">Jpeg格式。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="oh_image_initimagenative" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_Image_InitImageNative()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_initimagenative" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-uds-c106="" class="highlight-div"><div _ngcontent-uds-c106="" class="highlight-div-header"><div _ngcontent-uds-c106="" class="highlight-div-header-left"><div _ngcontent-uds-c106="" class="handle-button expand-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uds-c106="" class="highlight-div-header-right"><div _ngcontent-uds-c106="" class="handle-button ai-button"></div><div _ngcontent-uds-c106="" class="handle-button line-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uds-c106="" class="handle-button theme-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uds-c106="" class="handle-button copy-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uds-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>ImageNative* OH_Image_InitImageNative(napi_env <span class="hljs-built_in">env</span>, napi_value <span class="hljs-built_in">source</span>)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>从输入的JavaScript Native API图像对象中解析native ImageNative对象。</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%">napi_env env</td>         <td class="cellrowborder" width="50%">表示指向JNI环境的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">napi_value source</td>         <td class="cellrowborder" width="50%">表示JavaScript Native API图像对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagenative-">ImageNative</a>*</td>         <td class="cellrowborder" width="50%">如果操作成功返回ImageNative指针对象，如果操作失败返回空指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>参考：</strong></p>     <p><a href="/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_release">OH_Image_Release</a></p>    </div>    <div class="tiledSection">     <h3 id="oh_image_cliprect" device-type="phone,2in1,tablet,wearable,tv">OH_Image_ClipRect()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_cliprect" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-uds-c106="" class="highlight-div"><div _ngcontent-uds-c106="" class="highlight-div-header"><div _ngcontent-uds-c106="" class="highlight-div-header-left"><div _ngcontent-uds-c106="" class="handle-button expand-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uds-c106="" class="highlight-div-header-right"><div _ngcontent-uds-c106="" class="handle-button ai-button"></div><div _ngcontent-uds-c106="" class="handle-button line-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uds-c106="" class="handle-button theme-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uds-c106="" class="handle-button copy-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uds-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_ClipRect</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageNative* native, <span class="hljs-keyword">struct</span> OhosImageRect* rect)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取native ImageNative对象OhosImageRect信息。</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagenative-">ImageNative</a>* native</td>         <td class="cellrowborder" width="50%">表示指向ImageNative native层对象的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-ohosimagerect">OhosImageRect</a>* rect</td>         <td class="cellrowborder" width="50%">表示作为转换结果的OhosImageRect对象指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">int32_t</td>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p>          <p>IMAGE_RESULT_SUCCESS：操作成功。</p>          <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p>          <p>IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p>          <p>IMAGE_RESULT_SURFACE_GET_PARAMETER_FAILED：从surface获取参数失败。</p>          <p>IMAGE_RESULT_BAD_PARAMETER：参数错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_image_size" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Size()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_size" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-uds-c106="" class="highlight-div"><div _ngcontent-uds-c106="" class="highlight-div-header"><div _ngcontent-uds-c106="" class="highlight-div-header-left"><div _ngcontent-uds-c106="" class="handle-button expand-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uds-c106="" class="highlight-div-header-right"><div _ngcontent-uds-c106="" class="handle-button ai-button"></div><div _ngcontent-uds-c106="" class="handle-button line-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uds-c106="" class="handle-button theme-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uds-c106="" class="handle-button copy-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uds-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_Size</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageNative* native, <span class="hljs-keyword">struct</span> OhosImageSize* size)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取native ImageNative对象的OhosImageSize信息。</p>     <p>如果ImageNative对象所存储的是相机预览流数据，即YUV图像数据，那么获取到的OhosImageSize中的宽高分别对应YUV图像的宽高；如果ImageNative对象所存储的是相机拍照流数据，即JPEG图像，由于已经是编码后的数据，OhosImageSize中的宽等于JPEG数据大小，高等于1。</p>     <p>ImageNative对象所存储的数据是预览流还是拍照流，取决于应用将receiver中的surfaceId传给相机的previewOutput还是captureOutput。相机预览与拍照最佳实践请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/native-camera-preview-imagereceiver" target="_blank">预览流二次处理(C/C++)</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/native-camera-shooting" target="_blank">拍照(C/C++)</a>。</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagenative-">ImageNative</a>* native</td>         <td class="cellrowborder" width="50%">表示ImageNative native对象的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-ohosimagesize">OhosImageSize</a>* size</td>         <td class="cellrowborder" width="50%">表示作为转换结果的OhosImageSize对象的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">int32_t</td>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p>          <p>IMAGE_RESULT_SUCCESS：操作成功。</p>          <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p>          <p>IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p>          <p>IMAGE_RESULT_SURFACE_GET_PARAMETER_FAILED：从surface获取参数失败。</p>          <p>IMAGE_RESULT_BAD_PARAMETER：参数错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_image_format" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Format()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_format" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-uds-c106="" class="highlight-div"><div _ngcontent-uds-c106="" class="highlight-div-header"><div _ngcontent-uds-c106="" class="highlight-div-header-left"><div _ngcontent-uds-c106="" class="handle-button expand-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uds-c106="" class="highlight-div-header-right"><div _ngcontent-uds-c106="" class="handle-button ai-button"></div><div _ngcontent-uds-c106="" class="handle-button line-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uds-c106="" class="handle-button theme-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uds-c106="" class="handle-button copy-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uds-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_Format</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageNative* native, <span class="hljs-type">int32_t</span>* format)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取native ImageNative对象的图像格式。</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagenative-">ImageNative</a>* native</td>         <td class="cellrowborder" width="50%">表示ImageNative native对象的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t* format</td>         <td class="cellrowborder" width="50%">表示作为转换结果的图像格式对象的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">int32_t</td>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p>          <p>IMAGE_RESULT_SUCCESS：操作成功。</p>          <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p>          <p>IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p>          <p>IMAGE_RESULT_SURFACE_GET_PARAMETER_FAILED：从surface获取参数失败。</p>          <p>IMAGE_RESULT_BAD_PARAMETER：参数错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_image_getcomponent" device-type="phone,2in1,tablet,wearable,tv">OH_Image_GetComponent()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_getcomponent" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-uds-c106="" class="highlight-div"><div _ngcontent-uds-c106="" class="highlight-div-header"><div _ngcontent-uds-c106="" class="highlight-div-header-left"><div _ngcontent-uds-c106="" class="handle-button expand-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uds-c106="" class="highlight-div-header-right"><div _ngcontent-uds-c106="" class="handle-button ai-button"></div><div _ngcontent-uds-c106="" class="handle-button line-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uds-c106="" class="handle-button theme-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uds-c106="" class="handle-button copy-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uds-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_GetComponent</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageNative* native, <span class="hljs-type">int32_t</span> componentType, <span class="hljs-keyword">struct</span> OhosImageComponent* componentNative)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>从native ImageNative对象中获取OhosImageComponent。</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagenative-">ImageNative</a>* native</td>         <td class="cellrowborder" width="50%">表示ImageNative native对象的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t componentType</td>         <td class="cellrowborder" width="50%">表示所需组件的组件类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-ohosimagecomponent">OhosImageComponent</a>* componentNative</td>         <td class="cellrowborder" width="50%">表示转换结果的OhosImageComponent对象的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">int32_t</td>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p>          <p>IMAGE_RESULT_SUCCESS：操作成功。</p>          <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p>          <p>IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p>          <p>IMAGE_RESULT_SURFACE_GET_PARAMETER_FAILED：从surface获取参数失败。</p>          <p>IMAGE_RESULT_BAD_PARAMETER：参数错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_image_release" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Release()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_release" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-uds-c106="" class="highlight-div"><div _ngcontent-uds-c106="" class="highlight-div-header"><div _ngcontent-uds-c106="" class="highlight-div-header-left"><div _ngcontent-uds-c106="" class="handle-button expand-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uds-c106="" class="highlight-div-header-right"><div _ngcontent-uds-c106="" class="handle-button ai-button"></div><div _ngcontent-uds-c106="" class="handle-button line-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uds-c106="" class="handle-button theme-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uds-c106="" class="handle-button copy-button"><div _ngcontent-uds-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uds-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-title function_">OH_Image_Release</span><span class="hljs-params">(ImageNative* <span class="hljs-keyword">native</span>)</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>释放ImageNative native对象。</p>     <p>这个方法无法释放JavaScript Native API Image对象，而是释放被<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_initimagenative">OH_Image_InitImageNative</a>解析的ImageNative native对象。</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagenative-">ImageNative</a>* native</td>         <td class="cellrowborder" width="50%">表示ImageNative native对象的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">int32_t</td>         <td class="cellrowborder" width="50%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p>          <p>IMAGE_RESULT_SUCCESS：操作成功。</p>          <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p>          <p>IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p>          <p>IMAGE_RESULT_BAD_PARAMETER：参数错误。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>参考：</strong></p>     <p><a href="/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_initimagenative">OH_Image_InitImageNative</a></p>    </div>   </div>   <div></div></div>