<h1 _ngcontent-gme-c119="" class="doc-title ng-star-inserted" title="image_receiver_mdk.h"> image_receiver_mdk.h </h1>

<div _ngcontent-gme-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>声明从native层获取图片数据的方法。</p> <p><strong>库：</strong> libimage_receiver_ndk.z.so</p> <p><strong>引用文件：</strong> &lt;multimedia/image_framework/image_receiver_mdk.h&gt;</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p> <p><strong>起始版本：</strong> 10</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image">Image</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-ohosimagereceiverinfo">OhosImageReceiverInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">定义ImageReceiver的相关信息。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative_</a></td> <td class="cellrowborder" width="33.33333333333333%">ImageReceiverNative</td> <td class="cellrowborder" width="33.33333333333333%">用于定义ImageReceiverNative数据类型名称。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_on_callback">typedef void (*OH_Image_Receiver_On_Callback)()</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_Image_Receiver_On_Callback</td> <td class="cellrowborder" width="33.33333333333333%">定义native层图片的回调方法。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_createimagereceiver">int32_t OH_Image_Receiver_CreateImageReceiver(napi_env env, struct OhosImageReceiverInfo info, napi_value* res)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">创建应用层ImageReceiver对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_initimagereceivernative">ImageReceiverNative* OH_Image_Receiver_InitImageReceiverNative(napi_env env, napi_value source)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">通过应用层ImageReceiver对象初始化native层<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_getreceivingsurfaceid">int32_t OH_Image_Receiver_GetReceivingSurfaceId(const ImageReceiverNative* native, char* id, size_t len)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取receiver的id。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_readlatestimage">int32_t OH_Image_Receiver_ReadLatestImage(const ImageReceiverNative* native, napi_value* image)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取最新的一张图片。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_readnextimage">int32_t OH_Image_Receiver_ReadNextImage(const ImageReceiverNative* native, napi_value* image)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取下一张图片。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_on">int32_t OH_Image_Receiver_On(const ImageReceiverNative* native, OH_Image_Receiver_On_Callback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">注册一个<a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_on_callback">OH_Image_Receiver_On_Callback</a>回调事件。每当接收新图片，该回调事件就会响应。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_getsize">int32_t OH_Image_Receiver_GetSize(const ImageReceiverNative* native, struct OhosImageSize* size)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取ImageReceiver的大小。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_getcapacity">int32_t OH_Image_Receiver_GetCapacity(const ImageReceiverNative* native, int32_t* capacity)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取ImageReceiver的容量。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_getformat">int32_t OH_Image_Receiver_GetFormat(const ImageReceiverNative* native, int32_t* format)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取ImageReceiver的格式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_release">int32_t OH_Image_Receiver_Release(ImageReceiverNative* native)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>释放native层<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>对象。</p> <p>注意，此方法不能释放应用层ImageReceiver对象。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_image_receiver_on_callback" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_Image_Receiver_On_Callback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_on_callback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_Image_Receiver_On_Callback)(<span class="hljs-type">void</span>)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>定义native层图片的回调方法。</p> <p><strong>起始版本：</strong> 10</p> </div>  <div class="tiledSection"><h3 id="oh_image_receiver_createimagereceiver" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Receiver_CreateImageReceiver()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_createimagereceiver" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_Receiver_CreateImageReceiver</span><span class="hljs-params">(napi_env env, <span class="hljs-keyword">struct</span> OhosImageReceiverInfo info, napi_value* res)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建应用层ImageReceiver对象。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">napi_env env</td> <td class="cellrowborder" width="50%">napi的环境指针。</td> </tr> <tr><td class="cellrowborder" width="50%">struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-ohosimagereceiverinfo">OhosImageReceiverInfo</a> info</td> <td class="cellrowborder" width="50%">ImageReceiver数据设置项。</td> </tr> <tr><td class="cellrowborder" width="50%">napi_value* res</td> <td class="cellrowborder" width="50%">应用层的ImageReceiver对象的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p> <p> IMAGE_RESULT_SUCCESS：操作成功。</p> <p> IMAGE_RESULT_BAD_PARAMETER：参数错误。</p> <p> IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p> <p>IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：从surface获取参数失败。</p> <p> IMAGE_RESULT_CREATE_SURFACE_FAILED：创建surface失败。</p> <p> IMAGE_RESULT_SURFACE_GRALLOC_BUFFER_FAILED：surface分配内存失败。</p> <p> IMAGE_RESULT_GET_SURFACE_FAILED：获取surface失败。</p> <p> IMAGE_RESULT_MEDIA_RTSP_SURFACE_UNSUPPORT：媒体rtsp surface不支持。</p> <p> IMAGE_RESULT_DATA_UNSUPPORT：图像类型不支持。</p> <p> IMAGE_RESULT_MEDIA_DATA_UNSUPPORT：媒体类型不支持。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_image_receiver_initimagereceivernative" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Receiver_InitImageReceiverNative()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_initimagereceivernative" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-bash" data-highlighted="yes"><ol class="linenums"><li>ImageReceiverNative* OH_Image_Receiver_InitImageReceiverNative(napi_env <span class="hljs-built_in">env</span>, napi_value <span class="hljs-built_in">source</span>)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过应用层ImageReceiver对象初始化native层<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>对象。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">napi_env env</td> <td class="cellrowborder" width="50%">napi的环境指针。</td> </tr> <tr><td class="cellrowborder" width="50%">napi_value source</td> <td class="cellrowborder" width="50%">napi的ImageReceiver对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>*</td> <td class="cellrowborder" width="50%">操作成功则返回ImageReceiverNative指针；如果操作失败，则返回nullptr。</td> </tr>  </tbody></table></div> </div> <p><strong>参考：</strong></p> <p><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_release">OH_Image_Receiver_Release</a></p> </div>  <div class="tiledSection"><h3 id="oh_image_receiver_getreceivingsurfaceid" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Receiver_GetReceivingSurfaceId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_getreceivingsurfaceid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_Receiver_GetReceivingSurfaceId</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageReceiverNative* native, <span class="hljs-type">char</span>* id, <span class="hljs-type">size_t</span> len)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取receiver的id。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>* native</td> <td class="cellrowborder" width="50%">native层的ImageReceiverNative指针。</td> </tr> <tr><td class="cellrowborder" width="50%">char* id</td> <td class="cellrowborder" width="50%">指向字符缓冲区的指针，用于获取字符串的id。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t len</td> <td class="cellrowborder" width="50%">id所对应的字符缓冲区的大小。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p> <p>IMAGE_RESULT_SUCCESS：操作成功。</p> <p> IMAGE_RESULT_BAD_PARAMETER：参数错误。</p> <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：从surface获取参数失败。</p> <p> IMAGE_RESULT_GET_SURFACE_FAILED：获取surface失败。</p> <p> IMAGE_RESULT_DATA_UNSUPPORT：图像类型不支持。</p> <p> IMAGE_RESULT_MEDIA_DATA_UNSUPPORT：媒体类型不支持。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_image_receiver_readlatestimage" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Receiver_ReadLatestImage()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_readlatestimage" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_Receiver_ReadLatestImage</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageReceiverNative* native, napi_value* image)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取最新的一张图片。</p> <p>注意，此接口需要在<a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_on_callback">OH_Image_Receiver_On_Callback</a>回调后调用，才能正常的接收到数据。并且使用此接口返回Image对象创建的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagenative-">ImageNative</a>使用完毕后需要调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_release">OH_Image_Release</a>方法释放，释放后才可以继续接收新的数据。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>* native</td> <td class="cellrowborder" width="50%">native层的ImageReceiverNative指针。</td> </tr> <tr><td class="cellrowborder" width="50%">napi_value* image</td> <td class="cellrowborder" width="50%">获取到的应用层的Image指针对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p> <p>IMAGE_RESULT_SUCCESS：操作成功。</p> <p> IMAGE_RESULT_BAD_PARAMETER：参数错误。</p> <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：从surface获取参数失败。</p> <p> IMAGE_RESULT_CREATE_SURFACE_FAILED：创建surface失败。</p> <p> IMAGE_RESULT_SURFACE_GRALLOC_BUFFER_FAILED：surface分配内存失败。</p> <p> IMAGE_RESULT_GET_SURFACE_FAILED：获取surface失败。</p> <p> IMAGE_RESULT_MEDIA_RTSP_SURFACE_UNSUPPORT：媒体rtsp surface不支持。</p> <p> IMAGE_RESULT_DATA_UNSUPPORT：图像类型不支持。</p> <p> IMAGE_RESULT_MEDIA_DATA_UNSUPPORT：媒体类型不支持。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_image_receiver_readnextimage" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Receiver_ReadNextImage()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_readnextimage" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_Receiver_ReadNextImage</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageReceiverNative* native, napi_value* image)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取下一张图片。</p> <p>注意，此接口需要在<a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_on_callback">OH_Image_Receiver_On_Callback</a>回调后调用，才能正常的接收到数据。并且使用此接口返回Image对象创建的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagenative-">ImageNative</a>使用完毕后需要调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-h#oh_image_release">OH_Image_Release</a>方法释放，释放后才可以继续接收新的数据。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>* native</td> <td class="cellrowborder" width="50%">native层的ImageReceiverNative指针。</td> </tr> <tr><td class="cellrowborder" width="50%">napi_value* image</td> <td class="cellrowborder" width="50%">读取到的应用层的Image指针对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p> <p>IMAGE_RESULT_SUCCESS：操作成功。</p> <p> IMAGE_RESULT_BAD_PARAMETER：参数错误。</p> <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：从surface获取参数失败。</p> <p> IMAGE_RESULT_CREATE_SURFACE_FAILED：创建surface失败。</p> <p> IMAGE_RESULT_SURFACE_GRALLOC_BUFFER_FAILED：surface分配内存失败。</p> <p> IMAGE_RESULT_GET_SURFACE_FAILED：获取surface失败。</p> <p> IMAGE_RESULT_MEDIA_RTSP_SURFACE_UNSUPPORT：媒体rtsp surface不支持。</p> <p> IMAGE_RESULT_DATA_UNSUPPORT：图像类型不支持。</p> <p> IMAGE_RESULT_MEDIA_DATA_UNSUPPORT：媒体类型不支持。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_image_receiver_on" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Receiver_On()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_on" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_Receiver_On</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageReceiverNative* native, OH_Image_Receiver_On_Callback callback)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册一个<a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_on_callback">OH_Image_Receiver_On_Callback</a>回调事件。每当接收新图片，该回调事件就会响应。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>* native</td> <td class="cellrowborder" width="50%">native层的ImageReceiverNative指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_on_callback">OH_Image_Receiver_On_Callback</a> callback</td> <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-image-receiver-mdk-h#oh_image_receiver_on_callback">OH_Image_Receiver_On_Callback</a>事件的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p> <p>IMAGE_RESULT_SUCCESS：操作成功。</p> <p> IMAGE_RESULT_BAD_PARAMETER：参数错误。</p> <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：从surface获取参数失败。</p> <p> IMAGE_RESULT_GET_SURFACE_FAILED：获取surface失败。</p> <p> IMAGE_RESULT_DATA_UNSUPPORT：图像类型不支持。</p> <p> IMAGE_RESULT_MEDIA_DATA_UNSUPPORT：媒体类型不支持。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_image_receiver_getsize" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Receiver_GetSize()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_getsize" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_Receiver_GetSize</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageReceiverNative* native, <span class="hljs-keyword">struct</span> OhosImageSize* size)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取ImageReceiver的大小。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>* native</td> <td class="cellrowborder" width="50%">native层的ImageReceiverNative指针。</td> </tr> <tr><td class="cellrowborder" width="50%">struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-ohosimagesize">OhosImageSize</a>* size</td> <td class="cellrowborder" width="50%">作为结果的OhosImageSize指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p> <p>IMAGE_RESULT_SUCCESS：操作成功。</p> <p> IMAGE_RESULT_BAD_PARAMETER：参数错误。</p> <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p> <p> IMAGE_RESULT_DATA_UNSUPPORT：图像类型不支持。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_image_receiver_getcapacity" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Receiver_GetCapacity()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_getcapacity" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_Receiver_GetCapacity</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageReceiverNative* native, <span class="hljs-type">int32_t</span>* capacity)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取ImageReceiver的容量。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>* native</td> <td class="cellrowborder" width="50%">native层的ImageReceiverNative指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t* capacity</td> <td class="cellrowborder" width="50%">作为结果的指向容量的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p> <p>IMAGE_RESULT_SUCCESS：操作成功。</p> <p> IMAGE_RESULT_BAD_PARAMETER：参数错误。</p> <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p> <p> IMAGE_RESULT_DATA_UNSUPPORT：图像类型不支持。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_image_receiver_getformat" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Receiver_GetFormat()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_getformat" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Image_Receiver_GetFormat</span><span class="hljs-params">(<span class="hljs-type">const</span> ImageReceiverNative* native, <span class="hljs-type">int32_t</span>* format)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>获取ImageReceiver的格式。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>* native</td> <td class="cellrowborder" width="50%">native层的ImageReceiverNative指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t* format</td> <td class="cellrowborder" width="50%">作为结果的指向格式的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p> <p>IMAGE_RESULT_SUCCESS：操作成功。</p> <p> IMAGE_RESULT_BAD_PARAMETER：参数错误。</p> <p>IMAGE_RESULT_JNI_ENV_ABNORMAL：JNI环境异常。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p> <p> IMAGE_RESULT_DATA_UNSUPPORT：图像类型不支持。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_image_receiver_release" device-type="phone,2in1,tablet,wearable,tv">OH_Image_Receiver_Release()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_image_receiver_release" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gme-c106="" class="highlight-div"><div _ngcontent-gme-c106="" class="highlight-div-header"><div _ngcontent-gme-c106="" class="highlight-div-header-left"><div _ngcontent-gme-c106="" class="handle-button expand-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gme-c106="" class="highlight-div-header-right"><div _ngcontent-gme-c106="" class="handle-button ai-button"></div><div _ngcontent-gme-c106="" class="handle-button line-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gme-c106="" class="handle-button theme-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gme-c106="" class="handle-button copy-button"><div _ngcontent-gme-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gme-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-title function_">OH_Image_Receiver_Release</span><span class="hljs-params">(ImageReceiverNative* <span class="hljs-keyword">native</span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>释放native层<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>对象。</p> <p>注意，此方法不能释放应用层ImageReceiver对象。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-imagereceivernative-">ImageReceiverNative</a>* native</td> <td class="cellrowborder" width="50%">native层的ImageReceiverNative指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-image-mdk-common-h#irndkerrcode">IRNdkErrCode</a>：</p> <p>IMAGE_RESULT_SUCCESS：操作成功。</p> <p> IMAGE_RESULT_BAD_PARAMETER：参数错误。</p> <p> IMAGE_RESULT_INVALID_PARAMETER：参数无效。</p> <p> IMAGE_RESULT_DATA_UNSUPPORT：图像类型不支持。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>