<h1 _ngcontent-gsf-c119="" class="doc-title ng-star-inserted" title="insightIntent"> insightIntent </h1>

<div _ngcontent-gsf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>insightIntent是Intents Kit的子模块，提供意图开放能力，包括共享和删除InsightIntent。应用/元服务可以通过调用本模块接口，向系统共享数据。意图框架根据共享的数据学习规律，在合适的时机在系统入口将对应的InsightIntent推荐给用户，用户点击后，根据应用/元服务声明的InsightIntent API，跳转到对应页面。</p> <p>举例说明：视频类应用通过InsightIntent提供共享数据（如用户每天看视频的时间点、视频信息）和对应的开放API。意图框架将在用户每天看视频的时间点通过卡片推荐视频，用户点击卡片后，意图框架将调用该开放API打开视频。</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="tiledSection"><h2 id="section16609101116259" device-type="phone,tablet,2in1">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-gsf-c106="" class="highlight-div"><div _ngcontent-gsf-c106="" class="highlight-div-header"><div _ngcontent-gsf-c106="" class="highlight-div-header-left"><div _ngcontent-gsf-c106="" class="handle-button expand-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gsf-c106="" class="highlight-div-header-right"><div _ngcontent-gsf-c106="" class="handle-button ai-button"></div><div _ngcontent-gsf-c106="" class="handle-button line-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gsf-c106="" class="handle-button theme-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gsf-c106="" class="handle-button copy-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gsf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { insightIntent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IntentsKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1081123302517" device-type="phone,tablet,2in1">InsightIntent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1081123302517" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>InsightIntent，包括意图名称、意图版本号、标识、Action信息、Entity信息。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong>： SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>4.0.0(10)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.1" width="19.27%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.2" width="20.73%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.3" width="10.209999999999999%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.4" width="11.73%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.5" width="38.06%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.27%"><p>intentName</p> </td> <td class="cellrowborder" width="20.73%"><p>string</p> </td> <td class="cellrowborder" width="10.209999999999999%"><p>否</p> </td> <td class="cellrowborder" width="11.73%"><p>否</p> </td> <td class="cellrowborder" width="38.06%"><p>表示意图名称，例如：'PlayMusic'。</p> </td> </tr> <tr><td class="cellrowborder" width="19.27%"><p>intentVersion</p> </td> <td class="cellrowborder" width="20.73%"><p>string</p> </td> <td class="cellrowborder" width="10.209999999999999%"><p>否</p> </td> <td class="cellrowborder" width="11.73%"><p>否</p> </td> <td class="cellrowborder" width="38.06%"><p>表示意图版本，当前为初始版本'1.0'。</p> </td> </tr> <tr><td class="cellrowborder" width="19.27%"><p>identifier</p> </td> <td class="cellrowborder" width="20.73%"><p>string</p> </td> <td class="cellrowborder" width="10.209999999999999%"><p>否</p> </td> <td class="cellrowborder" width="11.73%"><p>否</p> </td> <td class="cellrowborder" width="38.06%"><p>表示意图的标识符，开发者按照自身业务需要生成，作为单条共享记录的唯一标识符。该字段的生成方式可参考UUID生成方式，或基于时间戳生成随机字符串。例如：'52dac3b0-6520-4974-81e5-25f0879449b5'。</p> </td> </tr> <tr><td class="cellrowborder" width="19.27%"><p>intentActionInfo</p> </td> <td class="cellrowborder" width="20.73%"><p><a href="/consumer/cn/doc/harmonyos-references/intents-arkts-api-insightintent#section13611343185915">IntentActionInfo</a></p> </td> <td class="cellrowborder" width="10.209999999999999%"><p>否</p> </td> <td class="cellrowborder" width="11.73%"><p>否</p> </td> <td class="cellrowborder" width="38.06%"><p>表示意图的执行信息，例如：已执行或预测将要执行意图的时间。示例请参考<a href="/consumer/cn/doc/harmonyos-references/intents-arkts-api-insightintent#section144826162913">shareIntent</a>的示例代码。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>在4.0.0(10)版本，参数类型为{[key: string]: Object}。</li><li>从5.0.0(12)版本开始，参数类型为<a href="/consumer/cn/doc/harmonyos-references/intents-arkts-api-insightintent#section13611343185915">IntentActionInfo</a>。该类型定义与5.0.0(12)前版本兼容。</li></ul> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="19.27%"><p>intentEntityInfo</p> </td> <td class="cellrowborder" width="20.73%"><p><a href="/consumer/cn/doc/harmonyos-references/intents-arkts-api-insightintent#section1934412225108">IntentEntityInfo</a></p> </td> <td class="cellrowborder" width="10.209999999999999%"><p>否</p> </td> <td class="cellrowborder" width="11.73%"><p>否</p> </td> <td class="cellrowborder" width="38.06%"><p>表示意图的实体信息，包含行为和事件。示例请参考<a href="/consumer/cn/doc/harmonyos-references/intents-arkts-api-insightintent#section144826162913">shareIntent</a>的示例代码。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ul><li>在4.0.0(10)版本，参数类型为{entityId: string; entityName: string; [key: string]: Object}。</li><li>从5.0.0(12)版本开始，参数类型为<a href="/consumer/cn/doc/harmonyos-references/intents-arkts-api-insightintent#section1934412225108">IntentEntityInfo</a>。该类型定义与5.0.0(12)前版本兼容。</li></ul> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section13611343185915" device-type="phone,tablet,2in1">IntentActionInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13611343185915" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>IntentActionInfo，表示意图的执行信息。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong>： SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.1" width="19.598040195980403%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.2" width="20.20797920207979%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.3" width="10.118988101189881%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.4" width="10.528947105289472%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.5" width="39.54604539546045%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.598040195980403%"><p>[key: string]</p> </td> <td class="cellrowborder" width="20.20797920207979%"><p>Object</p> </td> <td class="cellrowborder" width="10.118988101189881%"><p>否</p> </td> <td class="cellrowborder" width="10.528947105289472%"><p>否</p> </td> <td class="cellrowborder" width="39.54604539546045%"><p>表示值的类型为包含一个或多个键值对的对象。其中键的类型为字符，值的类型为Object，键和值的取值范围因意图名称而异，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/service/intents-schema-0000001901962713" target="_blank">各垂域意图Schema</a>。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1934412225108" device-type="phone,tablet,2in1">IntentEntityInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1934412225108" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>IntentEntityInfo，表示意图的实体信息。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong>： SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.1" width="19.27%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.2" width="20.73%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.3" width="10.209999999999999%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.4" width="11.73%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.5" width="38.06%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.27%"><p>entityId</p> </td> <td class="cellrowborder" width="20.73%"><p>string</p> </td> <td class="cellrowborder" width="10.209999999999999%"><p>否</p> </td> <td class="cellrowborder" width="11.73%"><p>否</p> </td> <td class="cellrowborder" width="38.06%"><p>表示意图实体的标识符，开发者按照自身业务需要生成，作为单条实体的唯一标识符。该字段的生成方式可参考UUID生成方式，或基于时间戳生成随机字符串。例如：'C10194368'。</p> </td> </tr> <tr><td class="cellrowborder" width="19.27%"><p>entityName</p> </td> <td class="cellrowborder" width="20.73%"><p>string</p> </td> <td class="cellrowborder" width="10.209999999999999%"><p>否</p> </td> <td class="cellrowborder" width="11.73%"><p>否</p> </td> <td class="cellrowborder" width="38.06%"><p>表示意图实体的名称。取值请参考<a href="https://developer.huawei.com/consumer/cn/doc/service/intents-schema-0000001901962713" target="_blank">各垂域意图Schema</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="19.27%"><p>[key: string]</p> </td> <td class="cellrowborder" width="20.73%"><p>Object</p> </td> <td class="cellrowborder" width="10.209999999999999%"><p>否</p> </td> <td class="cellrowborder" width="11.73%"><p>否</p> </td> <td class="cellrowborder" width="38.06%"><p>意图实体的其他信息，表示为一个或多个键值对。其中键的类型为字符，值的类型为Object，键和值的取值范围因意图名称而异，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/service/intents-schema-0000001901962713" target="_blank">各垂域意图Schema</a>。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section144826162913" device-type="phone,tablet,2in1">insightIntent.shareIntent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section144826162913" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>shareIntent(context: common.BaseContext, intents: InsightIntent[], callback: AsyncCallback&lt;void&gt;): void</p> <p>共享已执行或预期的InsightIntent ，使用callback异步回调。</p> <p>为避免共享能力滥用，默认每个应用每天最多共享20次，超出限制后会返回错误码：1000101104。每次共享的数据条数不限，但是每次最多50KB数据量，单次数据量超出限制后会返回错误码：1000101105。所有接入方每天共享总次数上限为3000次，超出总次数限制会返回错误码：1000101106。建议积攒一定量的数据后一次全部共享并控制共享次数。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.3" width="9.43%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.4" width="40.57%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="30.8%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="9.43%"><p>是</p> </td> <td class="cellrowborder" width="40.57%"><p>表示应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>intents</p> </td> <td class="cellrowborder" width="30.8%"><p><a href="/consumer/cn/doc/harmonyos-references/intents-arkts-api-insightintent#section1081123302517">InsightIntent</a>[]</p> </td> <td class="cellrowborder" width="9.43%"><p>是</p> </td> <td class="cellrowborder" width="40.57%"><p>表示共享的InsightIntent。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>callback</p> </td> <td class="cellrowborder" width="30.8%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="9.43%"><p>是</p> </td> <td class="cellrowborder" width="40.57%"><p>回调函数。当具体的操作（视具体接口功能描述）成功，err为undefined，否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/intents-arkts-api-errorcodes-insightintent">ArkTS API错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="49.95%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="50.05%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="49.95%"><p>401</p> </td> <td class="cellrowborder" width="50.05%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1000101101</p> </td> <td class="cellrowborder" width="50.05%"><p>The application has not been registered with the InsightIntent.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1000101104</p> </td> <td class="cellrowborder" width="50.05%"><p>The number of sharing times exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1000101105</p> </td> <td class="cellrowborder" width="50.05%"><p>The size of a single shared data exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1000101106</p> </td> <td class="cellrowborder" width="50.05%"><p>Exceeded the maximum number of sharing times of all applications.</p> </td> </tr> <tr><td class="cellrowborder" width="49.95%"><p>1000101201</p> </td> <td class="cellrowborder" width="50.05%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-gsf-c106="" class="highlight-div"><div _ngcontent-gsf-c106="" class="highlight-div-header"><div _ngcontent-gsf-c106="" class="highlight-div-header-left"><div _ngcontent-gsf-c106="" class="handle-button expand-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gsf-c106="" class="highlight-div-header-right"><div _ngcontent-gsf-c106="" class="handle-button ai-button"></div><div _ngcontent-gsf-c106="" class="handle-button line-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gsf-c106="" class="handle-button theme-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gsf-c106="" class="handle-button copy-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gsf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { insightIntent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IntentsKit'</span>;</li><li><span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">playMusicIntent</span></span><span class="">: </span><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-property">InsightIntent</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">intentName</span></span><span class="">: </span><span class=""><span class="hljs-string">'PlayMusic'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">intentVersion</span></span><span class="">: </span><span class=""><span class="hljs-string">'1.0'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">identifier</span></span><span class="">: </span><span class=""><span class="hljs-string">'52dac3b0-6520-4974-81e5-25f0879449b5'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">intentActionInfo</span></span><span class="">: </span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">actionMode</span></span><span class="">: </span><span class=""><span class="hljs-string">'EXECUTED'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">currentPercentage</span></span><span class="">: </span><span class=""><span class="hljs-number">50</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">executedTimeSlots</span></span><span class="">: </span><span class="">{</span></li><li>      <span class=""><span class="hljs-attr">executedEndTime</span></span><span class="">: </span><span class=""><span class="hljs-number">1637393112000</span></span><span class="">,</span></li><li>      <span class=""><span class="hljs-attr">executedStartTime</span></span><span class="">: </span><span class=""><span class="hljs-number">1637393212000</span></span></li><li>    <span class="">}</span></li><li>  <span class="">}</span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">intentEntityInfo</span></span><span class="">: </span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">entityName</span></span><span class="">: </span><span class=""><span class="hljs-string">'Music'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">entityId</span></span><span class="">: </span><span class=""><span class="hljs-string">'C10194368'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">entityGroupId</span></span><span class="">: </span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">热门</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">displayName</span></span><span class="">: </span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">歌曲名称</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">description</span></span><span class="">: </span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">歌曲解释</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">logoURL</span></span><span class="">: </span><span class=""><span class="hljs-string">'https://www-file.abc.com/-/media/corporate/images/home/logo/abc_logo.png'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">keywords</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">华为音乐</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">化妆</span></span><span class=""><span class="hljs-string">'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">rankingHint</span></span><span class="">: </span><span class=""><span class="hljs-number">99</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">expirationDate</span></span><span class="">: </span><span class=""><span class="hljs-number">1637393212000</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">metadataModificationDate</span></span><span class="">: </span><span class=""><span class="hljs-number">1637393212000</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">activityType</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'1'</span></span><span class="">, </span><span class=""><span class="hljs-string">'2'</span></span><span class="">, </span><span class=""><span class="hljs-string">'3'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">artist</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">张三</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">李四</span></span><span class=""><span class="hljs-string">'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">lyricist</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">李四</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">张三</span></span><span class=""><span class="hljs-string">'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">composer</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">张三</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">李四</span></span><span class=""><span class="hljs-string">'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">albumName</span></span><span class="">: </span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">专辑名称</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">duration</span></span><span class="">: </span><span class=""><span class="hljs-number">123456789</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">playCount</span></span><span class="">: </span><span class=""><span class="hljs-number">456213123</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">musicalGenre</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">民族风</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">摇滚</span></span><span class=""><span class="hljs-string">'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">isPublicData</span></span><span class="">: </span><span class="hljs-literal">false</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">共享数据</span></span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处仅为示例，请根据实际代码上下文自行传入合适的</span></span><span class=""><span class="hljs-comment">context</span></span></li><li>  <span class="hljs-keyword">let</span> context = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-property">get</span>&lt;common.<span class="hljs-property">UIAbilityContext</span>&gt;(<span class="hljs-string">"Context"</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>  <span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-title function_">shareIntent</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class="">[</span><span class="">playMusicIntent</span><span class="">]</span><span class="">, </span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">error</span><span class="">?.</span><span class=""><span class="hljs-property">code</span></span><span class="">) {</span></li><li>      <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">处理业务逻辑错误</span></span></li><li>      <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`shareIntent failed, error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, error.message: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>      <span class="hljs-keyword">return</span><span class="">;</span></li><li>    <span class="">}</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">执行正常业务</span></span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'shareIntent succeed'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) {</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">处理异常</span></span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, error.message: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section161911659112211" device-type="phone,tablet,2in1">insightIntent.shareIntent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section161911659112211" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>shareIntent(context: common.BaseContext, intents: InsightIntent[]): Promise&lt;void&gt;</p> <p>共享已执行或预期的InsightIntent 。使用Promise异步回调。</p> <p>为避免共享能力滥用，默认每个应用每天最多共享20次，超出限制后会返回错误码：1000101104。每次共享的数据条数不限，但是每次最多50KB数据量，单次数据量超出限制后会返回错误码：1000101105。所有接入方每天共享总次数上限为3000次，超出总次数限制会返回错误码：1000101106。建议积攒一定量的数据后一次全部共享并控制共享次数。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.3" width="9.25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.4" width="40.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="30.8%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>intents</p> </td> <td class="cellrowborder" width="30.8%"><p><a href="/consumer/cn/doc/harmonyos-references/intents-arkts-api-insightintent#section1081123302517">InsightIntent</a>[]</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示共享的InsightIntent 。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/intents-arkts-api-errorcodes-insightintent">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.14.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.14.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101101</p> </td> <td class="cellrowborder" width="50%"><p>The application has not been registered with the InsightIntent.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101104</p> </td> <td class="cellrowborder" width="50%"><p>The number of sharing times exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101105</p> </td> <td class="cellrowborder" width="50%"><p>The size of a single shared data exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101106</p> </td> <td class="cellrowborder" width="50%"><p>Exceeded the maximum number of sharing times of all applications.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101201</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gsf-c106="" class="highlight-div"><div _ngcontent-gsf-c106="" class="highlight-div-header"><div _ngcontent-gsf-c106="" class="highlight-div-header-left"><div _ngcontent-gsf-c106="" class="handle-button expand-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gsf-c106="" class="highlight-div-header-right"><div _ngcontent-gsf-c106="" class="handle-button ai-button"></div><div _ngcontent-gsf-c106="" class="handle-button line-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gsf-c106="" class="handle-button theme-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gsf-c106="" class="handle-button copy-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gsf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { insightIntent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IntentsKit'</span>;</li><li><span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;</li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">playMusicIntent</span></span><span class="">: </span><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-property">InsightIntent</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class=""><span class="hljs-attr">intentName</span></span><span class="">: </span><span class=""><span class="hljs-string">'PlayMusic'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">intentVersion</span></span><span class="">: </span><span class=""><span class="hljs-string">'1.0'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">identifier</span></span><span class="">: </span><span class=""><span class="hljs-string">'52dac3b0-6520-4974-81e5-25f0879449b5'</span></span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">intentActionInfo</span></span><span class="">: </span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">actionMode</span></span><span class="">: </span><span class=""><span class="hljs-string">'EXECUTED'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">currentPercentage</span></span><span class="">: </span><span class=""><span class="hljs-number">50</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">executedTimeSlots</span></span><span class="">: </span><span class="">{</span></li><li>      <span class=""><span class="hljs-attr">executedEndTime</span></span><span class="">: </span><span class=""><span class="hljs-number">1637393112000</span></span><span class="">,</span></li><li>      <span class=""><span class="hljs-attr">executedStartTime</span></span><span class="">: </span><span class=""><span class="hljs-number">1637393212000</span></span></li><li>    <span class="">}</span></li><li>  <span class="">}</span><span class="">,</span></li><li>  <span class=""><span class="hljs-attr">intentEntityInfo</span></span><span class="">: </span><span class="">{</span></li><li>    <span class=""><span class="hljs-attr">entityName</span></span><span class="">: </span><span class=""><span class="hljs-string">'Music'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">entityId</span></span><span class="">: </span><span class=""><span class="hljs-string">'C10194368'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">entityGroupId</span></span><span class="">: </span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">热门</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">displayName</span></span><span class="">: </span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">歌曲名称</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">description</span></span><span class="">: </span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">歌曲解释</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">logoURL</span></span><span class="">: </span><span class=""><span class="hljs-string">'https://www-file.abc.com/-/media/corporate/images/home/logo/abc_logo.png'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">keywords</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">华为音乐</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">化妆</span></span><span class=""><span class="hljs-string">'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">rankingHint</span></span><span class="">: </span><span class=""><span class="hljs-number">99</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">expirationDate</span></span><span class="">: </span><span class=""><span class="hljs-number">1637393212000</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">metadataModificationDate</span></span><span class="">: </span><span class=""><span class="hljs-number">1637393212000</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">activityType</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'1'</span></span><span class="">, </span><span class=""><span class="hljs-string">'2'</span></span><span class="">, </span><span class=""><span class="hljs-string">'3'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">artist</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">张三</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">李四</span></span><span class=""><span class="hljs-string">'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">lyricist</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">李四</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">张三</span></span><span class=""><span class="hljs-string">'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">composer</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">张三</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">李四</span></span><span class=""><span class="hljs-string">'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">albumName</span></span><span class="">: </span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">专辑名称</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">duration</span></span><span class="">: </span><span class=""><span class="hljs-number">123456789</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">playCount</span></span><span class="">: </span><span class=""><span class="hljs-number">456213123</span></span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">musicalGenre</span></span><span class="">: </span><span class="">[</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">民族风</span></span><span class=""><span class="hljs-string">'</span></span><span class="">,</span><span class=""><span class="hljs-string">'</span></span><span class=""><span class="hljs-string">摇滚</span></span><span class=""><span class="hljs-string">'</span></span><span class="">]</span><span class="">,</span></li><li>    <span class=""><span class="hljs-attr">isPublicData</span></span><span class="">: </span><span class="hljs-literal">false</span></li><li>  <span class="">}</span></li><li><span class="">}</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">共享数据</span></span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处仅为示例，请根据实际代码上下文自行传入合适的</span></span><span class=""><span class="hljs-comment">context</span></span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-property">get</span>&lt;common.<span class="hljs-property">UIAbilityContext</span>&gt;(<span class="hljs-string">"Context"</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-title function_">shareIntent</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class="">[</span><span class="">playMusicIntent</span><span class="">]</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'shareIntent succeed'</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(</span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, failed because </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">})</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section138017435231" device-type="phone,tablet,2in1">insightIntent.deleteIntent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section138017435231" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deleteIntent(context: common.BaseContext, intentName: string, identifiers: string[], callback: AsyncCallback&lt;void&gt;): void</p> <p>删除InsightIntent。如果设置了identifiers参数，则删除intent名称下的identifiers对应的记录。否则，删除意图名称下的所有记录。结果以Callback的形式返回。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="9.25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="40.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="30.8%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>intentName</p> </td> <td class="cellrowborder" width="30.8%"><p>string</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示意图的名称。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>identifiers</p> </td> <td class="cellrowborder" width="30.8%"><p>string[]</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示意图的标识符。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>callback</p> </td> <td class="cellrowborder" width="30.8%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>回调函数，返回删除InsightIntent接口调用是否成功的结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/intents-arkts-api-errorcodes-insightintent">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101101</p> </td> <td class="cellrowborder" width="50%"><p>The application has not been registered with the InsightIntent.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101201</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gsf-c106="" class="highlight-div"><div _ngcontent-gsf-c106="" class="highlight-div-header"><div _ngcontent-gsf-c106="" class="highlight-div-header-left"><div _ngcontent-gsf-c106="" class="handle-button expand-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gsf-c106="" class="highlight-div-header-right"><div _ngcontent-gsf-c106="" class="handle-button ai-button"></div><div _ngcontent-gsf-c106="" class="handle-button line-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gsf-c106="" class="handle-button theme-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gsf-c106="" class="handle-button copy-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gsf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { insightIntent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IntentsKit'</span>;</li><li><span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">删除意图下的某些记录</span></span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处仅为示例，请根据实际代码上下文自行传入合适的</span></span><span class=""><span class="hljs-comment">context</span></span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-property">get</span>&lt;common.<span class="hljs-property">UIAbilityContext</span>&gt;(<span class="hljs-string">"Context"</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>  <span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-title function_">deleteIntent</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class=""><span class="hljs-string">'PlayMusic'</span></span><span class="">, </span><span class="">[</span><span class=""><span class="hljs-string">'52dac3b0-6520-4974-81e5-25f0879449b5'</span></span><span class="">]</span><span class="">, </span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">error</span><span class="">?.</span><span class=""><span class="hljs-property">code</span></span><span class="">) {</span></li><li>      <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">处理业务逻辑错误</span></span></li><li>      <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`deleteIntent failed, error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, error.message: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>      <span class="hljs-keyword">return</span><span class="">;</span></li><li>    <span class="">}</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">执行正常业务</span></span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'deleteIntent succeed'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) {</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">处理异常</span></span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, error.message: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section96491691326" device-type="phone,tablet,2in1">insightIntent.deleteIntent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section96491691326" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deleteIntent(context: common.BaseContext, intentName: string, callback: AsyncCallback&lt;void&gt;): void</p> <p>删除InsightIntent。删除意图名称下的所有记录。结果以Callback的形式返回。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="9.25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="40.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="30.8%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>intentName</p> </td> <td class="cellrowborder" width="30.8%"><p>string</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示意图的名称。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>callback</p> </td> <td class="cellrowborder" width="30.8%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>回调函数，返回删除InsightIntent接口调用是否成功的结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/intents-arkts-api-errorcodes-insightintent">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101101</p> </td> <td class="cellrowborder" width="50%"><p>The application has not been registered with the InsightIntent.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101201</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gsf-c106="" class="highlight-div"><div _ngcontent-gsf-c106="" class="highlight-div-header"><div _ngcontent-gsf-c106="" class="highlight-div-header-left"><div _ngcontent-gsf-c106="" class="handle-button expand-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gsf-c106="" class="highlight-div-header-right"><div _ngcontent-gsf-c106="" class="handle-button ai-button"></div><div _ngcontent-gsf-c106="" class="handle-button line-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gsf-c106="" class="handle-button theme-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gsf-c106="" class="handle-button copy-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gsf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { insightIntent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IntentsKit'</span>;</li><li><span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">删除整个意图的数据</span></span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处仅为示例，请根据实际代码上下文自行传入合适的</span></span><span class=""><span class="hljs-comment">context</span></span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-property">get</span>&lt;common.<span class="hljs-property">UIAbilityContext</span>&gt;(<span class="hljs-string">"Context"</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>  <span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-title function_">deleteIntent</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class=""><span class="hljs-string">'PlayMusic'</span></span><span class="">, </span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">error</span><span class="">?.</span><span class=""><span class="hljs-property">code</span></span><span class="">) {</span></li><li>      <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">处理业务逻辑错误</span></span></li><li>      <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`deleteIntent failed, error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, error.message: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>      <span class="hljs-keyword">return</span><span class="">;</span></li><li>    <span class="">}</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">执行正常业务</span></span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'deleteIntent succeed'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) {</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">处理异常</span></span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, error.message: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section230153704210" device-type="phone,tablet,2in1">insightIntent.deleteIntent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section230153704210" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deleteIntent(context: common.BaseContext, intentName: string, identifiers?: string[]): Promise&lt;void&gt;</p> <p>删除InsightIntent。如果设置了identifiers参数，则删除intent名称下的identifiers对应的记录。否则，删除意图名称下的所有记录。结果以Promise的形式返回。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="8.61%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="41.39%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="30.8%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="8.61%"><p>是</p> </td> <td class="cellrowborder" width="41.39%"><p>表示应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>intentName</p> </td> <td class="cellrowborder" width="30.8%"><p>string</p> </td> <td class="cellrowborder" width="8.61%"><p>是</p> </td> <td class="cellrowborder" width="41.39%"><p>表示意图的名称。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>identifiers</p> </td> <td class="cellrowborder" width="30.8%"><p>string[]</p> </td> <td class="cellrowborder" width="8.61%"><p>否</p> </td> <td class="cellrowborder" width="41.39%"><p>表示意图的标识符。如果填写该字段，则删除指定标识符的意图；如果未填写该字段，则删除意图名称下的所有记录。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/intents-arkts-api-errorcodes-insightintent">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101101</p> </td> <td class="cellrowborder" width="50%"><p>The application has not been registered with the InsightIntent.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101201</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gsf-c106="" class="highlight-div"><div _ngcontent-gsf-c106="" class="highlight-div-header"><div _ngcontent-gsf-c106="" class="highlight-div-header-left"><div _ngcontent-gsf-c106="" class="handle-button expand-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gsf-c106="" class="highlight-div-header-right"><div _ngcontent-gsf-c106="" class="handle-button ai-button"></div><div _ngcontent-gsf-c106="" class="handle-button line-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gsf-c106="" class="handle-button theme-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gsf-c106="" class="handle-button copy-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gsf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { insightIntent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IntentsKit'</span>;</li><li><span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;</li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">删除意图下的某些记录</span></span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处仅为示例，请根据实际代码上下文自行传入合适的</span></span><span class=""><span class="hljs-comment">context</span></span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-property">get</span>&lt;common.<span class="hljs-property">UIAbilityContext</span>&gt;(<span class="hljs-string">"Context"</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-title function_">deleteIntent</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class=""><span class="hljs-string">'PlayMusic'</span></span><span class="">, </span><span class="">[</span><span class=""><span class="hljs-string">'52dac3b0-6520-4974-81e5-25f0879449b5'</span></span><span class="">]</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'deleteIntent succeed'</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(</span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, failed because </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">})</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section16488192120455" device-type="phone,tablet,2in1">insightIntent.deleteEntity<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16488192120455" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deleteEntity(context: common.BaseContext, entityName: string, entityIds: string[], callback: AsyncCallback&lt;void&gt;): void</p> <p>按实体名称下的实体ID删除InsightIntent实体。结果以Callback的形式返回。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="9.25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="40.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="30.8%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>entityName</p> </td> <td class="cellrowborder" width="30.8%"><p>string</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示实体的名称。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>entityIds</p> </td> <td class="cellrowborder" width="30.8%"><p>string[]</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示实体的id。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>callback</p> </td> <td class="cellrowborder" width="30.8%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>回调函数，返回删除InsightIntent实体接口调用是否成功的结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/intents-arkts-api-errorcodes-insightintent">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101101</p> </td> <td class="cellrowborder" width="50%"><p>The application has not been registered with the InsightIntent.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101201</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gsf-c106="" class="highlight-div"><div _ngcontent-gsf-c106="" class="highlight-div-header"><div _ngcontent-gsf-c106="" class="highlight-div-header-left"><div _ngcontent-gsf-c106="" class="handle-button expand-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gsf-c106="" class="highlight-div-header-right"><div _ngcontent-gsf-c106="" class="handle-button ai-button"></div><div _ngcontent-gsf-c106="" class="handle-button line-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gsf-c106="" class="handle-button theme-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gsf-c106="" class="handle-button copy-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gsf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { insightIntent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IntentsKit'</span>;</li><li><span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> <span class="">{</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">删除</span></span><span class=""><span class="hljs-comment">Entity</span></span><span class=""><span class="hljs-comment">数据</span></span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处仅为示例，请根据实际代码上下文自行传入合适的</span></span><span class=""><span class="hljs-comment">context</span></span></li><li>  <span class="hljs-keyword">let</span> context = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-property">get</span>&lt;common.<span class="hljs-property">UIAbilityContext</span>&gt;(<span class="hljs-string">"Context"</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>  <span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-title function_">deleteEntity</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class=""><span class="hljs-string">'PlayMusic'</span></span><span class="">, </span><span class="">[</span><span class=""><span class="hljs-string">'a5c9e9e3-3d0a-4e6a-9f3d-6b7c6b8d6b9f'</span></span><span class="">]</span><span class="">, </span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>    <span class="hljs-keyword">if</span> <span class="">(</span><span class="">error</span><span class="">?.</span><span class=""><span class="hljs-property">code</span></span><span class="">) {</span></li><li>      <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">处理业务逻辑错误</span></span></li><li>      <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`deleteEntity failed, error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, error.message: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>      <span class="hljs-keyword">return</span><span class="">;</span></li><li>    <span class="">}</span></li><li>    <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">执行正常业务</span></span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'deleteEntity succeed'</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">}</span><span class="">)</span><span class="">;</span></li><li><span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) {</span></li><li>  <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">处理异常</span></span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, error.message: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">error</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section04821911132017" device-type="phone,tablet,2in1">insightIntent.deleteEntity<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section04821911132017" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>deleteEntity(context: common.BaseContext, entityName: string, entityIds: string[]): Promise&lt;void&gt;</p> <p>按实体名称下的实体ID删除InsightIntent实体。使用Promise异步回调。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="9.25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="40.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="30.8%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>entityName</p> </td> <td class="cellrowborder" width="30.8%"><p>string</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示实体的名称。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>entityIds</p> </td> <td class="cellrowborder" width="30.8%"><p>string[]</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示实体的id。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/intents-arkts-api-errorcodes-insightintent">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101101</p> </td> <td class="cellrowborder" width="50%"><p>The application has not been registered with the InsightIntent.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101201</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gsf-c106="" class="highlight-div"><div _ngcontent-gsf-c106="" class="highlight-div-header"><div _ngcontent-gsf-c106="" class="highlight-div-header-left"><div _ngcontent-gsf-c106="" class="handle-button expand-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gsf-c106="" class="highlight-div-header-right"><div _ngcontent-gsf-c106="" class="handle-button ai-button"></div><div _ngcontent-gsf-c106="" class="handle-button line-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gsf-c106="" class="handle-button theme-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gsf-c106="" class="handle-button copy-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gsf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { insightIntent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IntentsKit'</span>;</li><li><span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;</li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">删除</span></span><span class=""><span class="hljs-comment">Entity</span></span><span class=""><span class="hljs-comment">数据</span></span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处仅为示例，请根据实际代码上下文自行传入合适的</span></span><span class=""><span class="hljs-comment">context</span></span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-property">get</span>&lt;common.<span class="hljs-property">UIAbilityContext</span>&gt;(<span class="hljs-string">"Context"</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-title function_">deleteEntity</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class=""><span class="hljs-string">'PlayMusic'</span></span><span class="">, </span><span class="">[</span><span class=""><span class="hljs-string">'a5c9e9e3-3d0a-4e6a-9f3d-6b7c6b8d6b9f'</span></span><span class="">]</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function">() </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'deleteEntity succeed'</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(</span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, failed because </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">})</span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section76701233209" device-type="phone,tablet,2in1">insightIntent.getSid<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section76701233209" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getSid(context: common.BaseContext, renew: boolean): Promise&lt;string&gt;</p> <p>获取Service Open ID。使用Promise异步回调。</p> <p><strong>元服务API</strong>： 从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.InsightIntent</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="9.25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="40.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="30.8%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">BaseContext</a></p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>表示应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>renew</p> </td> <td class="cellrowborder" width="30.8%"><p>boolean</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>是否强制从云端获取新的服务开放ID。如果为true，从云端获取新的服务开放ID；如果为false，则优先获取本地存储的服务开放ID。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;string&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回获取到的Service Open ID。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/intents-arkts-api-errorcodes-insightintent">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101101</p> </td> <td class="cellrowborder" width="50%"><p>The application has not been registered with the InsightIntent.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101102</p> </td> <td class="cellrowborder" width="50%"><p>HUAWEI Assistant has stopped providing services.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101107</p> </td> <td class="cellrowborder" width="50%"><p>Too many Service Open ID renew requests.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1000101201</p> </td> <td class="cellrowborder" width="50%"><p>The service is abnormal.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gsf-c106="" class="highlight-div"><div _ngcontent-gsf-c106="" class="highlight-div-header"><div _ngcontent-gsf-c106="" class="highlight-div-header-left"><div _ngcontent-gsf-c106="" class="handle-button expand-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gsf-c106="" class="highlight-div-header-right"><div _ngcontent-gsf-c106="" class="handle-button ai-button"></div><div _ngcontent-gsf-c106="" class="handle-button line-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gsf-c106="" class="handle-button theme-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gsf-c106="" class="handle-button copy-button"><div _ngcontent-gsf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gsf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { insightIntent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IntentsKit'</span>;</li><li><span class="hljs-keyword">import</span> common <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.common'</span>;</li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">获取</span></span><span class=""><span class="hljs-comment">SID</span></span></li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">此处仅为示例，请根据实际代码上下文自行传入合适的</span></span><span class=""><span class="hljs-comment">context</span></span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-property">get</span>&lt;common.<span class="hljs-property">UIAbilityContext</span>&gt;(<span class="hljs-string">"Context"</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="">insightIntent</span><span class="">.</span><span class=""><span class="hljs-title function_">getSid</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class="hljs-literal">false</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">then</span></span><span class="">(</span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">sid</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">'getSid succeed!'</span></span><span class="">)</span><span class="">;</span></li><li><span class="">}</span><span class="">)</span><span class="">.</span><span class=""><span class="hljs-title function_">catch</span></span><span class="">(</span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">BusinessError</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>  <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`error.code: </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, failed because </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">?.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li><span class="">})</span><span class="">;</span></li></ol></pre></div></div> </div> </div> <div></div></div>