<h1 _ngcontent-mfk-c119="" class="doc-title ng-star-inserted" title="ipc_cskeleton.h"> ipc_cskeleton.h </h1>

<div _ngcontent-mfk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供IPC框架tokenId、凭据、PID/UID、线程池配置等功能C接口。</p> <p><strong>库：</strong> libipc_capi.so</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohipcskeleton">OHIPCSkeleton</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_joinworkthread">void OH_IPCSkeleton_JoinWorkThread(void)</a></td> <td class="cellrowborder" width="50%">当前线程加入IPC工作线程池。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_stopworkthread">void OH_IPCSkeleton_StopWorkThread(void)</a></td> <td class="cellrowborder" width="50%">当前线程退出IPC工作线程池。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_getcallingtokenid">uint64_t OH_IPCSkeleton_GetCallingTokenId(void)</a></td> <td class="cellrowborder" width="50%">获取调用方TokenId。该接口需要在IPC上下文中调用，否则返回自身TokenId。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_getfirsttokenid">uint64_t OH_IPCSkeleton_GetFirstTokenId(void)</a></td> <td class="cellrowborder" width="50%">获取首调者TokenId。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_getselftokenid">uint64_t OH_IPCSkeleton_GetSelfTokenId(void)</a></td> <td class="cellrowborder" width="50%">获取自身TokenId。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_getcallingpid">uint64_t OH_IPCSkeleton_GetCallingPid(void)</a></td> <td class="cellrowborder" width="50%">获取调用方进程ID。该接口需要在IPC上下文中调用，否则返回当前进程ID。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_getcallinguid">uint64_t OH_IPCSkeleton_GetCallingUid(void)</a></td> <td class="cellrowborder" width="50%">获取调用方用户ID。该接口需要在IPC上下文中调用，否则返回当前用户ID。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_islocalcalling">int OH_IPCSkeleton_IsLocalCalling(void)</a></td> <td class="cellrowborder" width="50%">判断是否正在进行本地调用。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_setmaxworkthreadnum">int OH_IPCSkeleton_SetMaxWorkThreadNum(const int maxThreadNum)</a></td> <td class="cellrowborder" width="50%">设置最大工作线程数。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_resetcallingidentity">int OH_IPCSkeleton_ResetCallingIdentity(char **identity, int32_t *len, OH_IPC_MemAllocator allocator)</a></td> <td class="cellrowborder" width="50%">重置调用方身份凭证为自身进程的身份凭证（包括tokenid、UID和PID信息），并返回调用方的凭证信息。 该信息主要用于OH_IPCSkeleton_SetCallingIdentity接口调用。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_setcallingidentity">int OH_IPCSkeleton_SetCallingIdentity(const char *identity)</a></td> <td class="cellrowborder" width="50%">恢复调用方凭证信息至IPC上下文中。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-ipc-cskeleton-h#oh_ipcskeleton_ishandlingtransaction">int OH_IPCSkeleton_IsHandlingTransaction(void)</a></td> <td class="cellrowborder" width="50%">是否正在处理IPC请求。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_joinworkthread" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_IPCSkeleton_JoinWorkThread()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_joinworkthread" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">void</span> <span class="hljs-title function_">OH_IPCSkeleton_JoinWorkThread</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>当前线程加入IPC工作线程池。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_stopworkthread" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_StopWorkThread()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_stopworkthread" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">void</span> <span class="hljs-title function_">OH_IPCSkeleton_StopWorkThread</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>当前线程退出IPC工作线程池。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_getcallingtokenid" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_GetCallingTokenId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_getcallingtokenid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">uint64_t</span> <span class="hljs-title function_">OH_IPCSkeleton_GetCallingTokenId</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>获取调用方TokenId。该接口需要在IPC上下文中调用，否则返回自身TokenId。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t</td> <td class="cellrowborder" width="50%">返回调用方TokenId。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_getfirsttokenid" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_GetFirstTokenId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_getfirsttokenid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">uint64_t</span> <span class="hljs-title function_">OH_IPCSkeleton_GetFirstTokenId</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>获取首调者TokenId。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t</td> <td class="cellrowborder" width="50%">返回首调者TokenId。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_getselftokenid" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_GetSelfTokenId()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_getselftokenid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">uint64_t</span> <span class="hljs-title function_">OH_IPCSkeleton_GetSelfTokenId</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>获取自身TokenId。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t</td> <td class="cellrowborder" width="50%">返回自身TokenId。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_getcallingpid" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_GetCallingPid()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_getcallingpid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">uint64_t</span> <span class="hljs-title function_">OH_IPCSkeleton_GetCallingPid</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>获取调用方进程ID。该接口需要在IPC上下文中调用，否则返回当前进程ID。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t</td> <td class="cellrowborder" width="50%">返回调用方进程ID。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_getcallinguid" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_GetCallingUid()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_getcallinguid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">uint64_t</span> <span class="hljs-title function_">OH_IPCSkeleton_GetCallingUid</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>获取调用方用户ID。该接口需要在IPC上下文中调用，否则返回当前用户ID。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t</td> <td class="cellrowborder" width="50%">返回调用方用户ID。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_islocalcalling" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_IsLocalCalling()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_islocalcalling" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_IPCSkeleton_IsLocalCalling</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>判断是否正在进行本地调用。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%">正在进行本地调用，返回1；否则，返回0。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_setmaxworkthreadnum" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_SetMaxWorkThreadNum()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_setmaxworkthreadnum" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_IPCSkeleton_SetMaxWorkThreadNum</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span> maxThreadNum)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>设置最大工作线程数。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const int maxThreadNum</td> <td class="cellrowborder" width="50%">maxThreadNum 最大工作线程数，默认16，范围:[1, 32]。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>成功返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-error-code-h#oh_ipc_errorcode">OH_IPC_ErrorCode#OH_IPC_SUCCESS</a>；</p> <p> 参数错误返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-error-code-h#oh_ipc_errorcode">OH_IPC_ErrorCode#OH_IPC_CHECK_PARAM_ERROR</a>；</p> <p> 其它情况返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-error-code-h#oh_ipc_errorcode">OH_IPC_ErrorCode#OH_IPC_INNER_ERROR</a>。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_resetcallingidentity" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_ResetCallingIdentity()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_resetcallingidentity" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_IPCSkeleton_ResetCallingIdentity</span><span class="hljs-params">(<span class="hljs-type">char</span> **identity, <span class="hljs-type">int32_t</span> *len, OH_IPC_MemAllocator allocator)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>重置调用方身份凭证为自身进程的身份凭证（包括tokenid、UID和PID信息），并返回调用方的凭证信息。 该信息主要用于OH_IPCSkeleton_SetCallingIdentity接口调用。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">char **identity</td> <td class="cellrowborder" width="50%">identity 用于存储调凭证的内存地址，该内存由用户提供的分配器进行内存分配，用户使用完后需要主动释放，不能为空。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t *len</td> <td class="cellrowborder" width="50%">len 写入identity的数据长度，不能为空。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-cparcel-h#oh_ipc_memallocator">OH_IPC_MemAllocator</a> allocator</td> <td class="cellrowborder" width="50%">allocator 用户指定的用来分配identity的内存分配器，不能为空。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>成功返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-error-code-h#oh_ipc_errorcode">OH_IPC_ErrorCode#OH_IPC_SUCCESS</a>；</p> <p> 参数错误返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-error-code-h#oh_ipc_errorcode">OH_IPC_ErrorCode#OH_IPC_CHECK_PARAM_ERROR</a>；</p> <p> 内存分配失败返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-error-code-h#oh_ipc_errorcode">OH_IPC_ErrorCode#OH_IPC_MEM_ALLOCATOR_ERROR</a>；</p> <p> 其它情况返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-error-code-h#oh_ipc_errorcode">OH_IPC_ErrorCode#OH_IPC_INNER_ERROR</a>。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_setcallingidentity" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_SetCallingIdentity()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_setcallingidentity" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_IPCSkeleton_SetCallingIdentity</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *identity)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>恢复调用方凭证信息至IPC上下文中。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char *identity</td> <td class="cellrowborder" width="50%">identity 调用方凭证，不能为空。来源于OH_IPCSkeleton_ResetCallingIdentity的返回值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>成功返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-error-code-h#oh_ipc_errorcode">OH_IPC_ErrorCode#OH_IPC_SUCCESS</a>；</p> <p> 参数错误返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-error-code-h#oh_ipc_errorcode">OH_IPC_ErrorCode#OH_IPC_CHECK_PARAM_ERROR</a>；</p> <p> 其它情况返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ipc-error-code-h#oh_ipc_errorcode">OH_IPC_ErrorCode#OH_IPC_INNER_ERROR</a>。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ipcskeleton_ishandlingtransaction" device-type="phone,2in1,tablet,wearable,tv">OH_IPCSkeleton_IsHandlingTransaction()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ipcskeleton_ishandlingtransaction" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mfk-c106="" class="highlight-div"><div _ngcontent-mfk-c106="" class="highlight-div-header"><div _ngcontent-mfk-c106="" class="highlight-div-header-left"><div _ngcontent-mfk-c106="" class="handle-button expand-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mfk-c106="" class="highlight-div-header-right"><div _ngcontent-mfk-c106="" class="handle-button ai-button"></div><div _ngcontent-mfk-c106="" class="handle-button line-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mfk-c106="" class="handle-button theme-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mfk-c106="" class="handle-button copy-button"><div _ngcontent-mfk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mfk-c106="" class="highlight-scroll-div"><pre class="C prettyprint linenums hljs language-C" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_IPCSkeleton_IsHandlingTransaction</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>是否正在处理IPC请求。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.IPC.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%">正在处理IPC请求，返回1；否则，返回0。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>