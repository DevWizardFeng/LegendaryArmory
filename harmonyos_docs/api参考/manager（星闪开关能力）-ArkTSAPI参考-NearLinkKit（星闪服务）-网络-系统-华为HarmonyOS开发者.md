<h1 _ngcontent-ccc-c119="" class="doc-title ng-star-inserted" title="manager（星闪开关能力）"> manager（星闪开关能力） </h1>

<div _ngcontent-ccc-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供了管理星闪基础能力，包括获取设备信息、订阅状态变化事件等。</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="tiledSection"><h2 id="section148115414307" device-type="phone,2in1,tv,tablet,wearable">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section148115414307" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1976472485918" device-type="phone,2in1,tv,tablet,wearable">PairingState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1976472485918" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type PairingState = <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section1976472485918">constant.PairingState</a></p> <p>表示和远端设备的配对状态，为枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.1" width="26.179999999999996%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.2" width="73.82%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="26.179999999999996%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section1976472485918">constant.PairingState</a></p> </td> <td class="cellrowborder" width="73.82%"><p>和远端设备的配对状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section14942121015417" device-type="phone,2in1,tv,tablet,wearable">ConnectionState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14942121015417" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type ConnectionState = <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section14942121015417">constant.ConnectionState</a></p> <p>表示和远端设备的连接状态，为枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.6.1.3.1.1" width="26.179999999999996%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.3.1.2" width="73.82%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="26.179999999999996%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section14942121015417">constant.ConnectionState</a></p> </td> <td class="cellrowborder" width="73.82%"><p>和远端设备的连接状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section144650555553" device-type="phone,2in1,tv,tablet,wearable">AcbState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section144650555553" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type AcbState = <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section144650555553">constant.AcbState</a></p> <p>表示和远端设备的逻辑链路连接状态，为枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.3.1.1" width="26.179999999999996%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.3.1.2" width="73.82%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="26.179999999999996%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section144650555553">constant.AcbState</a></p> </td> <td class="cellrowborder" width="73.82%"><p>和远端设备的逻辑链路连接状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section87401754163116" device-type="phone,2in1,tv,tablet,wearable">getState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section87401754163116" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getState(): NearlinkState</p> <p>查询星闪开关状态。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.6.2.1.3.1.1" width="28.050000000000004%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.2.1.3.1.2" width="71.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="28.050000000000004%"><p><a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section454667203316">NearlinkState</a></p> </td> <td class="cellrowborder" width="71.95%"><p>表示星闪开关状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">state</span>: manager.<span class="hljs-property">NearlinkState</span> = manager.<span class="hljs-title function_">getState</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state));</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section816993083512" device-type="phone,2in1,tv,tablet,wearable">getLocalName<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section816993083512" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLocalName(): string</p> <p>查询本机星闪名称。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.2.1.3.1.1" width="28.050000000000004%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.2.1.3.1.2" width="71.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="28.050000000000004%"><p>string</p> </td> <td class="cellrowborder" width="71.95%"><p>表示星闪设备本地名称。最大长度为30。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Permission denied</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700003</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Nearlink is off</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = manager.<span class="hljs-title function_">getLocalName</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'state:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(name));</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section81381630101514" device-type="phone,2in1,tv,tablet,wearable">getPairedDevices<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section81381630101514" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPairedDevices(): Array&lt;string&gt;</p> <p>获取与当前设备配对的设备列表。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>6.0.1(21)</p> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.7.2.1.3.1.1" width="28.050000000000004%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.2.1.3.1.2" width="71.95%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="28.050000000000004%"><p>Array&lt;string&gt;</p> </td> <td class="cellrowborder" width="71.95%"><p>配对设备地址的列表。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Permission denied</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700003</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Nearlink is off</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pairedDevices</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = manager.<span class="hljs-title function_">getPairedDevices</span>();</li><li>  <span class="hljs-keyword">if</span> (pairedDevices.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getPairedDevices return: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(pairedDevices));</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'No Paired Devices found.'</span>);</li><li>    }</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section13106021163" device-type="phone,2in1,tv,tablet,wearable">on( 'stateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13106021163" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'stateChange', callback: Callback&lt;NearlinkState&gt;): void</p> <p>订阅星闪开关状态变化事件。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.6.2.1.5.1.1" width="13.320000000000002%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.2.1.5.1.2" width="25.319999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.2.1.5.1.3" width="7.12%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.2.1.5.1.4" width="54.24%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.320000000000002%"><p>type</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>固定填写"stateChange"字符串，表示星闪开关状态变化事件。</p> </td> </tr> <tr><td class="cellrowborder" width="13.320000000000002%"><p>callback</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section454667203316">NearlinkState</a>&gt;</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>表示开关状态变化回调函数的入参。回调函数由用户创建通过该接口注册。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Invalid parameter</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Callback</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">callback</span>: <span class="hljs-title class_">Callback</span>&lt;manager.<span class="hljs-property">NearlinkState</span>&gt; = <span class="hljs-function">(<span class="hljs-params">data: manager.NearlinkState</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (data === manager.<span class="hljs-property">NearlinkState</span>.<span class="hljs-property">STATE_TURNING_ON</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'nearlink STATE_TURNING_ON'</span>);</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data === manager.<span class="hljs-property">NearlinkState</span>.<span class="hljs-property">STATE_ON</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'nearlink STATE_ON'</span>);</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data === manager.<span class="hljs-property">NearlinkState</span>.<span class="hljs-property">STATE_TURNING_OFF</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'nearlink STATE_TURNING_OFF'</span>);</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data === manager.<span class="hljs-property">NearlinkState</span>.<span class="hljs-property">STATE_OFF</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'nearlink STATE_OFF'</span>);</li><li>  }</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  manager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'stateChange'</span>, callback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1552411314504" device-type="phone,2in1,tv,tablet,wearable">off( 'stateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1552411314504" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'stateChange', callback?: Callback&lt;NearlinkState&gt;): void</p> <p>取消订阅星闪开关状态变化事件。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.6.2.1.5.1.1" width="13.320000000000002%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.2.1.5.1.2" width="25.319999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.2.1.5.1.3" width="7.12%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.2.1.5.1.4" width="54.24%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.320000000000002%"><p>type</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>固定填写"stateChange"字符串，表示星闪开关状态变化事件。</p> </td> </tr> <tr><td class="cellrowborder" width="13.320000000000002%"><p>callback</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section454667203316">NearlinkState</a>&gt;</p> </td> <td class="cellrowborder" width="7.12%"><p>否</p> </td> <td class="cellrowborder" width="54.24%"><p>可选参数，需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Invalid parameter</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  manager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'stateChange'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section193483225314" device-type="phone,2in1,tv,tablet,wearable">on( 'pairingStateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section193483225314" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'pairingStateChange', callback: Callback&lt;PairingStateParam&gt;): void</p> <p>订阅配对请求事件。回调函数携带远端设备的随机地址。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.1" width="13.320000000000002%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.2" width="25.319999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.3" width="7.12%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.4" width="54.24%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.320000000000002%"><p>type</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>固定填写"pairingStateChange"字符串，表示配对请求事件。</p> </td> </tr> <tr><td class="cellrowborder" width="13.320000000000002%"><p>callback</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section185441313151716">PairingStateParam</a>&gt;</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>表示配对状态变化回调函数的入参。回调函数由用户创建通过该接口注册。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Permission denied</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Invalid parameter</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">onPairingStateEvent</span>:<span class="hljs-function">(<span class="hljs-params">data: manager.PairingStateParam</span>) =&gt;</span> <span class="hljs-keyword">void</span> = <span class="hljs-function">(<span class="hljs-params">data: manager.PairingStateParam</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onPairStateChange addr: '</span>+ data.<span class="hljs-property">address</span> + <span class="hljs-string">'state:'</span> + data.<span class="hljs-property">state</span>);</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  manager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pairingStateChange'</span>, onPairingStateEvent);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section15794103902913" device-type="phone,2in1,tv,tablet,wearable">off( 'pairingStateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15794103902913" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'pairingStateChange', callback?: Callback&lt;PairingStateParam&gt;): void</p> <p>取消订阅配对请求事件。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.1" width="13.320000000000002%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.2" width="25.319999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.3" width="7.12%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.4" width="54.24%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.320000000000002%"><p>type</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>固定填写'pairingStateChange'字符串，表示配对请求事件。</p> </td> </tr> <tr><td class="cellrowborder" width="13.320000000000002%"><p>callback</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section185441313151716">PairingStateParam</a>&gt;</p> </td> <td class="cellrowborder" width="7.12%"><p>否</p> </td> <td class="cellrowborder" width="54.24%"><p>可选参数，需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Permission denied</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Invalid parameter</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  manager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'pairingStateChange'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1731735913330" device-type="phone,2in1,tv,tablet,wearable">on( 'connectionStateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1731735913330" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'connectionStateChange', callback: Callback&lt;ConnectionStateParam&gt;): void</p> <p>订阅连接状态变化事件。回调函数携带远端设备的随机地址。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.1" width="13.320000000000002%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.2" width="25.319999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.3" width="7.12%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.4" width="54.24%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.320000000000002%"><p>type</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>固定填写"connectionStateChange"字符串，表示连接状态变化事件。</p> </td> </tr> <tr><td class="cellrowborder" width="13.320000000000002%"><p>callback</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section477651052718">ConnectionStateParam</a>&gt;</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>表示连接状态变化回调函数的入参。回调函数由用户创建通过该接口注册。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Permission denied</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Invalid parameter</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Callback</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">callback</span>: <span class="hljs-title class_">Callback</span>&lt;manager.<span class="hljs-property">ConnectionStateParam</span>&gt; = <span class="hljs-function">(<span class="hljs-params">data: manager.ConnectionStateParam</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  manager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'connectionStateChange'</span>, callback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section13175131394213" device-type="phone,2in1,tv,tablet,wearable">off( 'connectionStateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13175131394213" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'connectionStateChange', callback?: Callback&lt;ConnectionStateParam&gt;): void</p> <p>取消订阅连接状态变化事件。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.1" width="13.320000000000002%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.2" width="25.319999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.3" width="7.12%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.2.1.5.1.4" width="54.24%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.320000000000002%"><p>type</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>固定填写"connectionStateChange"字符串，表示连接状态变化事件。</p> </td> </tr> <tr><td class="cellrowborder" width="13.320000000000002%"><p>callback</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section477651052718">ConnectionStateParam</a>&gt;</p> </td> <td class="cellrowborder" width="7.12%"><p>否</p> </td> <td class="cellrowborder" width="54.24%"><p>可选参数，需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Permission denied</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Invalid parameter</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  manager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'connectionStateChange'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section74231094204" device-type="phone,2in1,tv,tablet,wearable">on('acbStateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section74231094204" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'acbStateChange', callback: Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section58892382115">AcbStateParam</a>&gt;): void</p> <p>订阅逻辑链路连接状态变化事件。回调函数携带远端设备的随机地址。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.1" width="13.320000000000002%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.2" width="25.319999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.3" width="7.12%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.2.1.5.1.4" width="54.24%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.320000000000002%"><p>type</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>固定填写"acbStateChange"字符串，表示逻辑链路连接状态变化事件。</p> </td> </tr> <tr><td class="cellrowborder" width="13.320000000000002%"><p>callback</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section58892382115">AcbStateParam</a>&gt;</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>表示逻辑链路连接状态变化回调函数的入参。回调函数由用户创建，通过该接口注册。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Permission denied</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Callback</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">callback</span>: <span class="hljs-title class_">Callback</span>&lt;manager.<span class="hljs-property">AcbStateParam</span>&gt; = <span class="hljs-function">(<span class="hljs-params">data: manager.AcbStateParam</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  manager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'acbStateChange'</span>, callback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section7425195205" device-type="phone,2in1,tv,tablet,wearable">off( 'acbStateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7425195205" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'acbStateChange', callback?: Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section58892382115">AcbStateParam</a>&gt;): void</p> <p>取消订阅逻辑链路连接状态变化事件。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_NEARLINK</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.1.0(18)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.5.1.1" width="13.320000000000002%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.5.1.2" width="25.319999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.5.1.3" width="7.12%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.2.1.5.1.4" width="54.24%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.320000000000002%"><p>type</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.12%"><p>是</p> </td> <td class="cellrowborder" width="54.24%"><p>固定填写"acbStateChange"字符串，表示逻辑链路连接状态变化事件。</p> </td> </tr> <tr><td class="cellrowborder" width="13.320000000000002%"><p>callback</p> </td> <td class="cellrowborder" width="25.319999999999997%"><p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section58892382115">AcbStateParam</a>&gt;</p> </td> <td class="cellrowborder" width="7.12%"><p>否</p> </td> <td class="cellrowborder" width="54.24%"><p>可选参数，需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" style="border: none;" width="49.419999999999995%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" style="border: none;" width="50.580000000000005%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>201</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Permission denied</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>401</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>801</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Capability not supported</p> </td> </tr> <tr><td class="cellrowborder" style="border: none;" width="49.419999999999995%"><p>1009700099</p> </td> <td class="cellrowborder" style="border: none;" width="50.580000000000005%"><p>Operation failed</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-ccc-c106="" class="highlight-div"><div _ngcontent-ccc-c106="" class="highlight-div-header"><div _ngcontent-ccc-c106="" class="highlight-div-header-left"><div _ngcontent-ccc-c106="" class="handle-button expand-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccc-c106="" class="highlight-div-header-right"><div _ngcontent-ccc-c106="" class="handle-button ai-button"></div><div _ngcontent-ccc-c106="" class="handle-button line-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccc-c106="" class="handle-button theme-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccc-c106="" class="handle-button copy-button"><div _ngcontent-ccc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccc-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { manager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.NearLinkKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  manager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'acbStateChange'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'errCode: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">', errMessage: '</span> + (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section185441313151716" device-type="phone,2in1,tv,tablet,wearable">PairingStateParam<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section185441313151716" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>订阅的配对状态变化结果。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.1" width="14.2985701429857%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.2" width="25.087491250874915%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.3" width="7.519248075192481%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.4" width="18.848115188481152%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.5" width="34.24657534246576%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.2985701429857%"><p>address</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p>string</p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>设备地址，表示和该设备的配对状态发生变化。地址格式参考："11:22:33:AA:BB:FF"。</p> </td> </tr> <tr><td class="cellrowborder" width="14.2985701429857%"><p>preState</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section1976472485918">PairingState</a></p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>本次上报之前的配对状态。</p> </td> </tr> <tr><td class="cellrowborder" width="14.2985701429857%"><p>state</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section1976472485918">PairingState</a></p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>当前配对状态。</p> </td> </tr> <tr><td class="cellrowborder" width="14.2985701429857%"><p>reason</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p><a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section985712528369">PairingReason</a></p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>原因值。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section295015817218" device-type="phone,2in1,tv,tablet,wearable">PairingRequestParam<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section295015817218" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示订阅的配对请求事件上报结果。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.5.1.6.1.1" width="14.2985701429857%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.6.1.2" width="25.087491250874915%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.6.1.3" width="7.519248075192481%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.6.1.4" width="18.848115188481152%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.6.1.5" width="34.24657534246576%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.2985701429857%"><p>address</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p>string</p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>设备地址，表示收到该设备的配对请求上报。地址格式参考："11:22:33:AA:BB:FF"。</p> </td> </tr> <tr><td class="cellrowborder" width="14.2985701429857%"><p>passkey</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p>string</p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>表示配对交互的配对码，显示给用户确认。长度固定为6，字符串内容为数字。</p> </td> </tr> <tr><td class="cellrowborder" width="14.2985701429857%"><p>pairingType</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p><a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section1080014428381">PairingType</a></p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>表示配对类型。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section477651052718" device-type="phone,2in1,tv,tablet,wearable">ConnectionStateParam<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section477651052718" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>订阅的连接状态变化事件上报结果。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.1" width="14.2985701429857%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.2" width="25.087491250874915%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.3" width="7.519248075192481%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.4" width="18.848115188481152%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.5" width="34.24657534246576%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.2985701429857%"><p>address</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p>string</p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>设备地址，表示和该设备的连接状态发生变化。地址格式参考："11:22:33:AA:BB:FF"。</p> </td> </tr> <tr><td class="cellrowborder" width="14.2985701429857%"><p>preState</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section14942121015417">ConnectionState</a></p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>本次上报之前的连接状态。</p> </td> </tr> <tr><td class="cellrowborder" width="14.2985701429857%"><p>state</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section14942121015417">ConnectionState</a></p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>当前连接状态。</p> </td> </tr> <tr><td class="cellrowborder" width="14.2985701429857%"><p>connectionReason</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p><a href="/consumer/cn/doc/harmonyos-references/nearlink-manager#section189609817294">ConnectionReason</a></p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>原因值。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section454667203316" device-type="phone,2in1,tv,tablet,wearable">NearlinkState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section454667203316" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>星闪的开关状态，为枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.5.1.4.1.1" width="21.912191219121908%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.5.1.4.1.2" width="16.31163116311631%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.5.1.4.1.3" width="61.776177617761775%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.912191219121908%"><p>STATE_TURNING_ON</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>0</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示星闪正在打开。</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>STATE_ON</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>1</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示星闪已打开。</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>STATE_TURNING_OFF</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>2</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示星闪正在关闭。</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>STATE_OFF</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>3</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示星闪已关闭。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section985712528369" device-type="phone,2in1,tv,tablet,wearable">PairingReason<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section985712528369" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示星闪配对状态变化结果的原因值，为枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.5.1.4.1.1" width="21.912191219121908%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.4.1.2" width="16.31163116311631%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.4.1.3" width="61.776177617761775%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.912191219121908%"><p>PAIRING_REASON_SUCCESS</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>0</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示配对成功。</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>PAIRING_REASON_FAILURE</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>1</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示配对失败。</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>PAIRING_REASON_PROFILE_UNSUPPORTED</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>2</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示对端设备不支持服务导致配对失败。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>PAIRING_REASON_EXCEED_ACB_MAX</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>3</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示连接设备数已达上限导致配对失败。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>PAIRING_REASON_REMOTE_CANCELED</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>4</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示对端设备取消配对导致配对失败。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>PAIRING_REASON_LOCAL_CANCELED</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>5</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示本端设备取消配对导致配对失败。</p> <p><strong>起始版本</strong>：5.1.0(18)</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1080014428381" device-type="phone,2in1,tv,tablet,wearable">PairingType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1080014428381" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>星闪配对类型，为枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.5.1.4.1.1" width="21.912191219121908%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.4.1.2" width="16.301630163016302%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.4.1.3" width="61.786178617861786%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.912191219121908%"><p>NO_PASSKEY_CONFIRMATION</p> </td> <td class="cellrowborder" width="16.301630163016302%"><p>0</p> </td> <td class="cellrowborder" width="61.786178617861786%"><p>表示不需要passkey的配对方式，用户无需检查配对码。</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>PAIRING_TYPE_PASSCODE</p> </td> <td class="cellrowborder" width="16.301630163016302%"><p>1</p> </td> <td class="cellrowborder" width="61.786178617861786%"><p>表示通行码鉴权方式，用户需在一端设备输入另一端设备显示的配对码。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>PAIRING_TYPE_NUMBER_COMPARE</p> </td> <td class="cellrowborder" width="16.301630163016302%"><p>2</p> </td> <td class="cellrowborder" width="61.786178617861786%"><p>表示数字比较鉴权方式，用户需在两端设备确认配对码一致。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section189609817294" device-type="phone,2in1,tv,tablet,wearable">ConnectionReason<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section189609817294" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>星闪连接状态变化结果的原因值。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.0.1(13)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.5.1.4.1.1" width="21.912191219121908%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.4.1.2" width="16.31163116311631%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.4.1.3" width="61.776177617761775%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.912191219121908%"><p>CONNECTION_SUCCESS</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>0</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示连接成功。</p> </td> </tr> <tr><td class="cellrowborder" width="21.912191219121908%"><p>CONNECTION_FAILURE</p> </td> <td class="cellrowborder" width="16.31163116311631%"><p>1</p> </td> <td class="cellrowborder" width="61.776177617761775%"><p>表示连接失败。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section58892382115" device-type="phone,2in1,tv,tablet,wearable">AcbStateParam<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section58892382115" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>订阅的逻辑链路连接状态变化事件上报结果。</p> <p><strong>系统能力：</strong>SystemCapability.Communication.NearLink.Core</p> <p><strong>起始版本：</strong>5.1.0(18)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.1" width="14.2985701429857%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.2" width="25.087491250874915%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.3" width="7.519248075192481%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.4" width="18.848115188481152%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.5" width="34.24657534246576%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.2985701429857%"><p>address</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p>string</p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>设备地址，表示和该设备的逻辑链路连接状态发生变化。地址格式参考："11:22:33:AA:BB:FF"。</p> </td> </tr> <tr><td class="cellrowborder" width="14.2985701429857%"><p>state</p> </td> <td class="cellrowborder" width="25.087491250874915%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/nearlink-constant#section144650555553">AcbState</a></p> </td> <td class="cellrowborder" width="7.519248075192481%"><p>否</p> </td> <td class="cellrowborder" width="18.848115188481152%"><p>否</p> </td> <td class="cellrowborder" width="34.24657534246576%"><p>当前逻辑链路连接状态。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>