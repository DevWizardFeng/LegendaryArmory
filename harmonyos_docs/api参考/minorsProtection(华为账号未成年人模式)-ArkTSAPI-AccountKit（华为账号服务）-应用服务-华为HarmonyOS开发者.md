<h1 _ngcontent-mjc-c119="" class="doc-title ng-star-inserted" title="minorsProtection (华为账号未成年人模式)"> minorsProtection (华为账号未成年人模式) </h1>

<div _ngcontent-mjc-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>当前模块提供Account Kit未成年人模式的相关能力，包括开启/关闭系统未成年人模式、获取系统未成年人模式的开启状态、年龄段信息等。开发者可调用本模块的能力，与系统未成年人模式联动，快速实现应用的未成年人模式的切换。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section07871521144519" device-type="phone,2in1,tablet,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section07871521144519" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mjc-c106="" class="highlight-div"><div _ngcontent-mjc-c106="" class="highlight-div-header"><div _ngcontent-mjc-c106="" class="highlight-div-header-left"><div _ngcontent-mjc-c106="" class="handle-button expand-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mjc-c106="" class="highlight-div-header-right"><div _ngcontent-mjc-c106="" class="handle-button ai-button"></div><div _ngcontent-mjc-c106="" class="handle-button line-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mjc-c106="" class="handle-button theme-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mjc-c106="" class="handle-button copy-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mjc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { minorsProtection } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section3551104714566" device-type="phone,2in1,tablet,tv">MinorsProtectionInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3551104714566" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>该类提供未成年人模式的开启状态，以及年龄段信息。应用可跟随未成年人模式开启状态，进行开启/关闭应用的未成年人模式，使用年龄段信息，展示适龄内容。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.1" width="17.330000000000002%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.2" width="11.76%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.3" width="20.200000000000003%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.4" width="14.499999999999998%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.5" width="36.21%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="17.330000000000002%"><p>minorsProtectionMode</p> </td> <td class="cellrowborder" width="11.76%"><p>boolean</p> </td> <td class="cellrowborder" width="20.200000000000003%"><p>否</p> </td> <td class="cellrowborder" width="14.499999999999998%"><p>否</p> </td> <td class="cellrowborder" width="36.21%"><p>是否开启未成年人模式。</p> <p>返回true表示未成年人模式为开启状态。</p> <p>返回false表示未成年人模式为关闭状态。</p> </td> </tr> <tr><td class="cellrowborder" width="17.330000000000002%"><p>ageGroup</p> </td> <td class="cellrowborder" width="11.76%"><p><a href="/consumer/cn/doc/harmonyos-references/account-api-minorsprotection#section397519409416">AgeGroup</a></p> </td> <td class="cellrowborder" width="20.200000000000003%"><p>否</p> </td> <td class="cellrowborder" width="14.499999999999998%"><p>是</p> </td> <td class="cellrowborder" width="36.21%"><p>年龄段信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><ol><li>仅当未成年人模式开启时才返回此字段。</li><li>当登录中国境内（不包含中国香港、中国澳门、中国台湾）儿童账号（14周岁及以下）开启未成年人模式，则可能返回年龄段信息为[0,3)、[3,8)、[8,12)或[12,16)。<ol><li>如用户登录4周岁儿童账号，则返回年龄段信息为[3,8)。</li><li>如用户登录9周岁儿童账号，则返回年龄段信息为[8,12)。</li></ol> </li><li>当登录中国境内（不包含中国香港、中国澳门、中国台湾）非儿童账号开启未成年人模式，则可能返回年龄段信息为[0,3)、[3,8)、[8,12)、[12,16)或[16,18)。<ol><li>如用户创建13岁临时使用者，则返回年龄段信息为[12,16)。</li><li>如用户创建17岁临时使用者，则返回年龄段信息为[16,18)。</li></ol> </li></ol> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section397519409416" device-type="phone,2in1,tablet,tv">AgeGroup<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section397519409416" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>该类为年龄段信息对象。开发者可根据当前年龄段信息，展示适龄内容。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.6.1.1" width="17.330000000000002%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.6.1.2" width="11.76%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.6.1.3" width="20.200000000000003%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.6.1.4" width="17.89%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.6.1.5" width="32.82%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="17.330000000000002%"><p>lowerAge</p> </td> <td class="cellrowborder" width="11.76%"><p>number</p> </td> <td class="cellrowborder" width="20.200000000000003%"><p>否</p> </td> <td class="cellrowborder" width="17.89%"><p>否</p> </td> <td class="cellrowborder" width="32.82%"><p>年龄段下限，包含下限值。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>该字段取值范围：0、3、8、12或16。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="17.330000000000002%"><p>upperAge</p> </td> <td class="cellrowborder" width="11.76%"><p>number</p> </td> <td class="cellrowborder" width="20.200000000000003%"><p>否</p> </td> <td class="cellrowborder" width="17.89%"><p>否</p> </td> <td class="cellrowborder" width="32.82%"><p>年龄段上限，不包含上限值。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>该字段取值范围：3、8、12、16或18。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section16629630232" device-type="phone,2in1,tablet,tv">MinorsModeErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16629630232" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>该枚举为未成年人模式模块的错误码。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.4.1.1" width="41.91%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.4.1.2" width="20.86%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.4.1.3" width="37.230000000000004%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="41.91%"><p>MINORS_MODE_NOT_ENABLED</p> </td> <td class="cellrowborder" width="20.86%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section5166694516">1009900002</a></p> </td> <td class="cellrowborder" width="37.230000000000004%"><p>未成年人模式未开启。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>USER_CANCELED</p> </td> <td class="cellrowborder" width="20.86%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section191691561188">1009900003</a></p> </td> <td class="cellrowborder" width="37.230000000000004%"><p>用户取消操作。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>MINORS_MODE_ALREADY_ON</p> </td> <td class="cellrowborder" width="20.86%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section35901828161314">1009900005</a></p> </td> <td class="cellrowborder" width="37.230000000000004%"><p>未成年人模式已经开启。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>MINORS_MODE_ALREADY_OFF</p> </td> <td class="cellrowborder" width="20.86%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section1451016215158">1009900006</a></p> </td> <td class="cellrowborder" width="37.230000000000004%"><p>未成年人模式已经关闭。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>UNSUPPORTED_ACCOUNT</p> </td> <td class="cellrowborder" width="20.86%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section2076682413462">1009900007</a></p> </td> <td class="cellrowborder" width="37.230000000000004%"><p>不支持的账号。</p> </td> </tr> <tr><td class="cellrowborder" width="41.91%"><p>SERVICE_NOT_AVAILABLE</p> </td> <td class="cellrowborder" width="20.86%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section13666164864818">1009900011</a></p> </td> <td class="cellrowborder" width="37.230000000000004%"><p>服务不可用。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section233519244152" device-type="phone,2in1,tablet,tv">supportMinorsMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section233519244152" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>supportMinorsMode(): boolean</p> <p>该方法为同步方法，调用该方法判断当前设备环境是否支持未成年人模式。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>boolean</p> </td> <td class="cellrowborder" width="50%"><p>返回boolean值。</p> <p>返回true表示支持未成年人模式。</p> <p>返回false表示不支持未成年人模式。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当登录海外华为账号、隐私空间均会返回false，其他场景均为true。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section17561151616317">1001502009</a></p> </td> <td class="cellrowborder" width="66.28%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-mjc-c106="" class="highlight-div"><div _ngcontent-mjc-c106="" class="highlight-div-header"><div _ngcontent-mjc-c106="" class="highlight-div-header-left"><div _ngcontent-mjc-c106="" class="handle-button expand-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mjc-c106="" class="highlight-div-header-right"><div _ngcontent-mjc-c106="" class="handle-button ai-button"></div><div _ngcontent-mjc-c106="" class="handle-button line-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mjc-c106="" class="handle-button theme-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mjc-c106="" class="handle-button copy-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mjc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { minorsProtection } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection'</span>)) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">supportMinorsMode</span>: <span class="hljs-built_in">boolean</span> = minorsProtection.<span class="hljs-title function_">supportMinorsMode</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting supportMinorsMode is: <span class="hljs-subst">${supportMinorsMode.valueOf()}</span>`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>      <span class="hljs-string">`Failed to invoke supportMinorsMode. errCode: <span class="hljs-subst">${error.code}</span>, errMessage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>} <span class="hljs-keyword">else</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>    <span class="hljs-string">'The current device does not support the invoking of the supportMinorsMode interface.'</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section11505356101217" device-type="phone,2in1,tablet,tv">getMinorsProtectionInfoSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11505356101217" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getMinorsProtectionInfoSync(): MinorsProtectionInfo</p> <p>该方法为同步方法，调用该方法获取未成年人模式的开启状态，以及年龄段信息。应用可跟随未成年人模式开启状态，进行开启/关闭应用的未成年人模式，使用年龄段信息，展示适龄内容。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/account-api-minorsprotection#section3551104714566">MinorsProtectionInfo</a></p> </td> <td class="cellrowborder" width="50%"><p>返回<a href="/consumer/cn/doc/harmonyos-references/account-api-minorsprotection#section3551104714566">MinorsProtectionInfo</a>对象。用于获取未成年人模式开启状态、年龄段信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section17561151616317">1001502009</a></p> </td> <td class="cellrowborder" width="66.28%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-mjc-c106="" class="highlight-div"><div _ngcontent-mjc-c106="" class="highlight-div-header"><div _ngcontent-mjc-c106="" class="highlight-div-header-left"><div _ngcontent-mjc-c106="" class="handle-button expand-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mjc-c106="" class="highlight-div-header-right"><div _ngcontent-mjc-c106="" class="handle-button ai-button"></div><div _ngcontent-mjc-c106="" class="handle-button line-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mjc-c106="" class="handle-button theme-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mjc-c106="" class="handle-button copy-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mjc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { minorsProtection } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection'</span>)) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">if</span> (minorsProtection.<span class="hljs-title function_">supportMinorsMode</span>()) {</li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">minorsProtectionInfo</span>: minorsProtection.<span class="hljs-property">MinorsProtectionInfo</span> =</li><li>        minorsProtection.<span class="hljs-title function_">getMinorsProtectionInfoSync</span>();</li><li>      <span class="hljs-comment">// 获取未成年人模式开启状态</span></li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">minorsProtectionMode</span>: <span class="hljs-built_in">boolean</span> = minorsProtectionInfo.<span class="hljs-property">minorsProtectionMode</span>;</li><li>      <span class="hljs-comment">// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态</span></li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>        <span class="hljs-string">`Succeeded in getting minorsProtectionMode is: <span class="hljs-subst">${minorsProtectionMode.valueOf()}</span>`</span>);</li><li>      <span class="hljs-comment">// 未成年人模式已开启，获取年龄段信息</span></li><li>      <span class="hljs-keyword">if</span> (minorsProtectionMode) {</li><li>        <span class="hljs-keyword">const</span> <span class="hljs-attr">ageGroup</span>: minorsProtection.<span class="hljs-property">AgeGroup</span> | <span class="hljs-literal">undefined</span> = minorsProtectionInfo.<span class="hljs-property">ageGroup</span>;</li><li>        <span class="hljs-keyword">if</span> (ageGroup) {</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting lowerAge is: <span class="hljs-subst">${ageGroup.lowerAge}</span>`</span>);</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting upperAge is: <span class="hljs-subst">${ageGroup.upperAge}</span>`</span>);</li><li>          <span class="hljs-comment">// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息</span></li><li>        }</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制</span></li><li>      }</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>        <span class="hljs-string">'The current device environment does not support the youth mode, please check the current device environment.'</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>      <span class="hljs-string">`Failed to invoke supportMinorsMode or getMinorsProtectionInfoSync. errCode: <span class="hljs-subst">${error.code}</span>,</span></li><li><span class="hljs-string">      errMessage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>} <span class="hljs-keyword">else</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>    <span class="hljs-string">'The current device does not support the invoking of the getMinorsProtectionInfoSync interface.'</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section82313184131" device-type="phone,2in1,tablet,tv">getMinorsProtectionInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section82313184131" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getMinorsProtectionInfo(): Promise&lt;MinorsProtectionInfo&gt;</p> <p>调用该方法获取未成年人模式的开启状态，以及年龄段信息。应用可跟随未成年人模式开启状态，进行开启/关闭应用的未成年人模式，使用年龄段信息，展示适龄内容。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/account-api-minorsprotection#section3551104714566">MinorsProtectionInfo</a>&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回<a href="/consumer/cn/doc/harmonyos-references/account-api-minorsprotection#section3551104714566">MinorsProtectionInfo</a>对象。用于获取未成年人模式开启状态、年龄段信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section17561151616317">1001502009</a></p> </td> <td class="cellrowborder" width="66.28%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-mjc-c106="" class="highlight-div"><div _ngcontent-mjc-c106="" class="highlight-div-header"><div _ngcontent-mjc-c106="" class="highlight-div-header-left"><div _ngcontent-mjc-c106="" class="handle-button expand-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mjc-c106="" class="highlight-div-header-right"><div _ngcontent-mjc-c106="" class="handle-button ai-button"></div><div _ngcontent-mjc-c106="" class="handle-button line-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mjc-c106="" class="handle-button theme-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mjc-c106="" class="handle-button copy-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mjc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { minorsProtection } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection'</span>)) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">if</span> (minorsProtection.<span class="hljs-title function_">supportMinorsMode</span>()) {</li><li>      minorsProtection.<span class="hljs-title function_">getMinorsProtectionInfo</span>()</li><li>        .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">minorsProtectionInfo: minorsProtection.MinorsProtectionInfo</span>) =&gt;</span> {</li><li>          <span class="hljs-comment">// 获取未成年人模式开启状态</span></li><li>          <span class="hljs-keyword">const</span> <span class="hljs-attr">minorsProtectionMode</span>: <span class="hljs-built_in">boolean</span> = minorsProtectionInfo.<span class="hljs-property">minorsProtectionMode</span>;</li><li>          <span class="hljs-comment">// 如开发者有频繁使用到未成年人模式开启状态，这里则需缓存未成年人模式开启状态</span></li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>            <span class="hljs-string">`Succeeded in getting minorsProtectionMode is: <span class="hljs-subst">${minorsProtectionMode.valueOf()}</span>`</span>);</li><li>          <span class="hljs-comment">// 未成年人模式已开启，获取年龄段信息</span></li><li>          <span class="hljs-keyword">if</span> (minorsProtectionMode) {</li><li>            <span class="hljs-keyword">const</span> <span class="hljs-attr">ageGroup</span>: minorsProtection.<span class="hljs-property">AgeGroup</span> | <span class="hljs-literal">undefined</span> = minorsProtectionInfo.<span class="hljs-property">ageGroup</span>;</li><li>            <span class="hljs-keyword">if</span> (ageGroup) {</li><li>              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting lowerAge is: <span class="hljs-subst">${ageGroup.lowerAge}</span>`</span>);</li><li>              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting upperAge is: <span class="hljs-subst">${ageGroup.upperAge}</span>`</span>);</li><li>              <span class="hljs-comment">// 根据年龄段刷新内容展示。如开发者有频繁使用到年龄段信息，这里则需缓存年龄段信息</span></li><li>            }</li><li>          } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-comment">// 未成年人模式未开启，应用需跟随系统未成年人模式，展示内容不做限制</span></li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError&lt;<span class="hljs-built_in">Object</span>&gt;</span>) =&gt;</span> {</li><li>          <span class="hljs-title function_">dealGetMinorsInfoAllError</span>(error);</li><li>        });</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>        <span class="hljs-string">'The current device environment does not support the youth mode, please check the current device environment.'</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>      <span class="hljs-string">`Failed to invoke supportMinorsMode. errCode: <span class="hljs-subst">${error.code}</span>, errMessage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>} <span class="hljs-keyword">else</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>    <span class="hljs-string">'The current device does not support the invoking of the getMinorsProtectionInfo interface.'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">dealGetMinorsInfoAllError</span>(<span class="hljs-params">error: BusinessError&lt;<span class="hljs-built_in">Object</span>&gt;</span>): <span class="hljs-built_in">void</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to getMinorsProtectionInfo. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section145101029104312" device-type="phone,2in1,tablet,tv">verifyMinorsProtectionCredential<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section145101029104312" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>verifyMinorsProtectionCredential(context: common.Context): Promise&lt;boolean&gt;</p> <p>当用户需要调整应用的未成年人模式相关设置时，调用该方法拉起未成年人模式密码验证页面，验证身份。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.5.1.1" width="10.530000000000001%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.5.1.2" width="17.810000000000002%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.5.1.3" width="28.93%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.5.1.4" width="42.730000000000004%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.530000000000001%"><p>context</p> </td> <td class="cellrowborder" width="17.810000000000002%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-common#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="28.93%"><p>是</p> </td> <td class="cellrowborder" width="42.730000000000004%"><p>Context上下文。</p> <p>应用可支持的Context有：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiextensioncontext" target="_blank">UIExtensionContext</a>。不支持应用在半模态、弹出框、子窗口等非全页面组件中使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiextensioncontext" target="_blank">UIExtensionContext</a>调用。</p> <p>元服务可支持的Context有：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;boolean&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。返回true表示密码验证通过；返回false表示密码验证未通过。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.14.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.14.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section88861315453">401</a></p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section17561151616317">1001502009</a></p> </td> <td class="cellrowborder" width="66.28%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section5166694516">1009900002</a></p> </td> <td class="cellrowborder" width="66.28%"><p>The minors mode is not enabled.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-mjc-c106="" class="highlight-div"><div _ngcontent-mjc-c106="" class="highlight-div-header"><div _ngcontent-mjc-c106="" class="highlight-div-header-left"><div _ngcontent-mjc-c106="" class="handle-button expand-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mjc-c106="" class="highlight-div-header-right"><div _ngcontent-mjc-c106="" class="handle-button ai-button"></div><div _ngcontent-mjc-c106="" class="handle-button line-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mjc-c106="" class="handle-button theme-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mjc-c106="" class="handle-button copy-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mjc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { minorsProtection } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection'</span>)) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">if</span> (minorsProtection.<span class="hljs-title function_">supportMinorsMode</span>()) {</li><li>      <span class="hljs-comment">// 此示例为代码片段，实际需在自定义组件实例中使用，以获取UIContext对象作为函数入参</span></li><li>      minorsProtection.<span class="hljs-title function_">verifyMinorsProtectionCredential</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>())</li><li>        .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>          hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Succeeded in getting verify result is: <span class="hljs-subst">${result.valueOf()}</span>`</span>);</li><li>          <span class="hljs-comment">// 使用结果判断验密是否通过，执行后续流程</span></li><li>        })</li><li>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError&lt;<span class="hljs-built_in">Object</span>&gt;</span>) =&gt;</span> {</li><li>          <span class="hljs-title function_">dealVerifyAllError</span>(error);</li><li>        });</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>        <span class="hljs-string">'The current device environment does not support the youth mode, please check the current device environment.'</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>      <span class="hljs-string">`Failed to invoke supportMinorsMode. errCode: <span class="hljs-subst">${error.code}</span>, errMessage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>} <span class="hljs-keyword">else</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>    <span class="hljs-string">'The current device does not support the invoking of the verifyMinorsProtectionCredential interface.'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">dealVerifyAllError</span>(<span class="hljs-params">error: BusinessError&lt;<span class="hljs-built_in">Object</span>&gt;</span>): <span class="hljs-built_in">void</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to verify. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section198884228396" device-type="phone,2in1,tablet,tv">leadToTurnOnMinorsMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section198884228396" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>leadToTurnOnMinorsMode(context: common.Context): Promise&lt;void&gt;</p> <p>应用提供开启未成年人模式入口，调用该方法拉起开启未成年人模式页面，引导用户开启未成年人模式。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.1" width="10.530000000000001%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.2" width="17.810000000000002%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.3" width="28.93%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.4" width="42.730000000000004%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.530000000000001%"><p>context</p> </td> <td class="cellrowborder" width="17.810000000000002%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-common#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="28.93%"><p>是</p> </td> <td class="cellrowborder" width="42.730000000000004%"><p>Context上下文。</p> <p>应用可支持的Context有：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiextensioncontext" target="_blank">UIExtensionContext</a>。不支持应用在半模态、弹出框、子窗口等非全页面组件中使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiextensioncontext" target="_blank">UIExtensionContext</a>调用。</p> <p>元服务可支持的Context有：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.14.1.3.1.1" width="33.56%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.14.1.3.1.2" width="66.44%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.56%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section88861315453">401</a></p> </td> <td class="cellrowborder" width="66.44%"><p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</p> </td> </tr> <tr><td class="cellrowborder" width="33.56%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section17561151616317">1001502009</a></p> </td> <td class="cellrowborder" width="66.44%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="33.56%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section191691561188">1009900003</a></p> </td> <td class="cellrowborder" width="66.44%"><p>The user canceled the operation.</p> </td> </tr> <tr><td class="cellrowborder" width="33.56%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section35901828161314">1009900005</a></p> </td> <td class="cellrowborder" width="66.44%"><p>The minors mode is already on.</p> </td> </tr> <tr><td class="cellrowborder" width="33.56%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section2076682413462">1009900007</a></p> </td> <td class="cellrowborder" width="66.44%"><p>Unsupported HUAWEI ID.</p> </td> </tr> <tr><td class="cellrowborder" width="33.56%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section13666164864818">1009900011</a></p> </td> <td class="cellrowborder" width="66.44%"><p>Service not available.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-mjc-c106="" class="highlight-div"><div _ngcontent-mjc-c106="" class="highlight-div-header"><div _ngcontent-mjc-c106="" class="highlight-div-header-left"><div _ngcontent-mjc-c106="" class="handle-button expand-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mjc-c106="" class="highlight-div-header-right"><div _ngcontent-mjc-c106="" class="handle-button ai-button"></div><div _ngcontent-mjc-c106="" class="handle-button line-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mjc-c106="" class="handle-button theme-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mjc-c106="" class="handle-button copy-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mjc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { minorsProtection } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection'</span>)) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">if</span> (minorsProtection.<span class="hljs-title function_">supportMinorsMode</span>()) {</li><li>      <span class="hljs-comment">// 此示例为代码片段，实际需在自定义组件实例中使用，以获取UIContext对象作为函数入参</span></li><li>      minorsProtection.<span class="hljs-title function_">leadToTurnOnMinorsMode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>())</li><li>        .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 接口调用完成，如需显示弹窗，请在此处处理</span></li><li>        })</li><li>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError&lt;<span class="hljs-built_in">Object</span>&gt;</span>) =&gt;</span> {</li><li>          <span class="hljs-title function_">dealTurnOnAllError</span>(error);</li><li>        });</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>        <span class="hljs-string">'The current device environment does not support the youth mode, please check the current device environment.'</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>      <span class="hljs-string">`Failed to invoke supportMinorsMode. errCode: <span class="hljs-subst">${error.code}</span>, errMessage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>} <span class="hljs-keyword">else</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>    <span class="hljs-string">'The current device does not support the invoking of the leadToTurnOnMinorsMode interface.'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">dealTurnOnAllError</span>(<span class="hljs-params">error: BusinessError&lt;<span class="hljs-built_in">Object</span>&gt;</span>): <span class="hljs-built_in">void</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to leadToTurnOnMinorsMode. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section525913399571" device-type="phone,2in1,tablet,tv">leadToTurnOffMinorsMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section525913399571" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>leadToTurnOffMinorsMode(context: common.Context): Promise&lt;void&gt;</p> <p>应用提供关闭未成年人模式入口，调用该方法拉起关闭未成年人模式页面，引导用户关闭未成年人模式。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.1" width="10.530000000000001%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.2" width="17.810000000000002%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.3" width="28.93%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.4" width="42.730000000000004%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.530000000000001%"><p>context</p> </td> <td class="cellrowborder" width="17.810000000000002%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-common#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="28.93%"><p>是</p> </td> <td class="cellrowborder" width="42.730000000000004%"><p>Context上下文。</p> <p>应用可支持的Context有：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiextensioncontext" target="_blank">UIExtensionContext</a>。不支持应用在半模态、弹出框、子窗口等非全页面组件中使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiextensioncontext" target="_blank">UIExtensionContext</a>调用。</p> <p>元服务可支持的Context有：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a>。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code">ArkTS错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.14.1.3.1.1" width="33.87%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.14.1.3.1.2" width="66.13%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.87%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section88861315453">401</a></p> </td> <td class="cellrowborder" width="66.13%"><p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</p> </td> </tr> <tr><td class="cellrowborder" width="33.87%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section17561151616317">1001502009</a></p> </td> <td class="cellrowborder" width="66.13%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="33.87%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section191691561188">1009900003</a></p> </td> <td class="cellrowborder" width="66.13%"><p>The user canceled the operation.</p> </td> </tr> <tr><td class="cellrowborder" width="33.87%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section1451016215158">1009900006</a></p> </td> <td class="cellrowborder" width="66.13%"><p>The minors mode is already off.</p> </td> </tr> <tr><td class="cellrowborder" width="33.87%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/account-api-error-code#section13666164864818">1009900011</a></p> </td> <td class="cellrowborder" width="66.13%"><p>Service not available.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-mjc-c106="" class="highlight-div"><div _ngcontent-mjc-c106="" class="highlight-div-header"><div _ngcontent-mjc-c106="" class="highlight-div-header-left"><div _ngcontent-mjc-c106="" class="handle-button expand-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mjc-c106="" class="highlight-div-header-right"><div _ngcontent-mjc-c106="" class="handle-button ai-button"></div><div _ngcontent-mjc-c106="" class="handle-button line-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mjc-c106="" class="handle-button theme-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mjc-c106="" class="handle-button copy-button"><div _ngcontent-mjc-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mjc-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { minorsProtection } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AccountKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">if</span> (<span class="hljs-title function_">canIUse</span>(<span class="hljs-string">'SystemCapability.AuthenticationServices.HuaweiID.MinorsProtection'</span>)) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">if</span> (minorsProtection.<span class="hljs-title function_">supportMinorsMode</span>()) {</li><li>      <span class="hljs-comment">// 此示例为代码片段，实际需在自定义组件实例中使用，以获取UIContext对象作为函数入参</span></li><li>      minorsProtection.<span class="hljs-title function_">leadToTurnOffMinorsMode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>())</li><li>        .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 接口调用完成，如需显示弹窗，请在此处处理</span></li><li>        })</li><li>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError&lt;<span class="hljs-built_in">Object</span>&gt;</span>) =&gt;</span> {</li><li>          <span class="hljs-title function_">dealTurnOffAllError</span>(error);</li><li>        });</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>        <span class="hljs-string">'The current device environment does not support the youth mode, please check the current device environment.'</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>      <span class="hljs-string">`Failed to invoke supportMinorsMode. errCode: <span class="hljs-subst">${error.code}</span>, errMessage: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>} <span class="hljs-keyword">else</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>,</li><li>    <span class="hljs-string">'The current device does not support the invoking of the leadToTurnOffMinorsMode interface.'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">dealTurnOffAllError</span>(<span class="hljs-params">error: BusinessError&lt;<span class="hljs-built_in">Object</span>&gt;</span>): <span class="hljs-built_in">void</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`Failed to leadToTurnOffMinorsMode. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> </div> <div></div></div>