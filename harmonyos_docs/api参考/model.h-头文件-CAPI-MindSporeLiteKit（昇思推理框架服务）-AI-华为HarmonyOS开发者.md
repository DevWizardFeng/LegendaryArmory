<h1 _ngcontent-bdr-c119="" class="doc-title ng-star-inserted" title="model.h"> model.h </h1>

<div _ngcontent-bdr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>提供了模型相关接口，可以用于模型创建、模型推理等，该接口是非线程安全的。</p> <p><strong>引用文件：</strong> &lt;mindspore/model.h&gt;</p> <p><strong>库：</strong> libmindspore_lite_ndk.so</p> <p><strong>系统能力：</strong> SystemCapability.Ai.MindSpore</p> <p><strong>起始版本：</strong> 9</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore">MindSpore</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandlearray">OH_AI_TensorHandleArray</a></td> <td class="cellrowborder" width="50%">张量数组结构体，用于存储张量数组指针和张量数组长度。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-shapeinfo">OH_AI_ShapeInfo</a></td> <td class="cellrowborder" width="50%">形状维度大小，预留最大维度是32，当前实际支持的最大维度是8。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-callbackparam">OH_AI_CallBackParam</a></td> <td class="cellrowborder" width="50%">回调函数中传入的算子信息。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a></td> <td class="cellrowborder" width="50%">指向模型对象的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-traincfghandle">OH_AI_TrainCfgHandle</a></td> <td class="cellrowborder" width="50%">指向训练配置对象的指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_kernelcallback">typedef bool (*OH_AI_KernelCallBack)(const OH_AI_TensorHandleArray inputs, const OH_AI_TensorHandleArray outputs,const OH_AI_CallBackParam kernel_Info)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AI_KernelCallBack</td> <td class="cellrowborder" width="33.33333333333333%"><p>回调函数指针。</p> <p> 该函数指针是用于设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelpredict">OH_AI_ModelPredict</a>函数参数中的两个回调函数。</p> <p> 该指针指向的函数需要包含三个参数，其中inputs和outputs对应了算子的输入和输出张量，kernel_Info表示当前算子的信息。</p> <p> 可以通过回调函数监控算子执行的情况，例如统计算子的执行时间，校验算子的正确性等等。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelcreate">OH_AI_API OH_AI_ModelHandle OH_AI_ModelCreate(void)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">创建一个模型对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modeldestroy">OH_AI_API void OH_AI_ModelDestroy(OH_AI_ModelHandle *model)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">释放一个模型对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelbuild">OH_AI_API OH_AI_Status OH_AI_ModelBuild(OH_AI_ModelHandle model, const void *model_data, size_t data_size,OH_AI_ModelType model_type, const OH_AI_ContextHandle model_context)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>从内存缓冲区加载并编译MindSpore Lite模型。</p> <p> 注意，同一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>对象仅能传递给<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelbuild">OH_AI_ModelBuild</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelbuildfromfile">OH_AI_ModelBuildFromFile</a>一次，如果多次调用该函数需要创建多个不同的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelbuildfromfile">OH_AI_API OH_AI_Status OH_AI_ModelBuildFromFile(OH_AI_ModelHandle model, const char *model_path,OH_AI_ModelType model_type, const OH_AI_ContextHandle model_context)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>通过模型文件加载并编译MindSpore Lite模型。</p> <p> 注意，同一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>对象仅能传递给<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelbuild">OH_AI_ModelBuild</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelbuildfromfile">OH_AI_ModelBuildFromFile</a>一次，如果多次调用该函数需要创建多个不同的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelresize">OH_AI_API OH_AI_Status OH_AI_ModelResize(OH_AI_ModelHandle model, const OH_AI_TensorHandleArray inputs,OH_AI_ShapeInfo *shape_infos, size_t shape_info_num)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">调整已编译模型的输入形状。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelpredict">OH_AI_API OH_AI_Status OH_AI_ModelPredict(OH_AI_ModelHandle model, const OH_AI_TensorHandleArray inputs,OH_AI_TensorHandleArray *outputs, const OH_AI_KernelCallBack before,const OH_AI_KernelCallBack after)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">执行模型推理。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelgetinputs">OH_AI_API OH_AI_TensorHandleArray OH_AI_ModelGetInputs(const OH_AI_ModelHandle model)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取模型的输入张量数组结构体。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelgetoutputs">OH_AI_API OH_AI_TensorHandleArray OH_AI_ModelGetOutputs(const OH_AI_ModelHandle model)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取模型的输出张量数组结构体。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelgetinputbytensorname">OH_AI_API OH_AI_TensorHandle OH_AI_ModelGetInputByTensorName(const OH_AI_ModelHandle model, const char *tensor_name)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">通过张量名获取模型的输入张量。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelgetoutputbytensorname">OH_AI_API OH_AI_TensorHandle OH_AI_ModelGetOutputByTensorName(const OH_AI_ModelHandle model, const char *tensor_name)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">通过张量名获取模型的输出张量。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_traincfgcreate">OH_AI_API OH_AI_TrainCfgHandle OH_AI_TrainCfgCreate()</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">创建训练配置对象指针，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_traincfgdestroy">OH_AI_API void OH_AI_TrainCfgDestroy(OH_AI_TrainCfgHandle *train_cfg)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">销毁训练配置对象指针，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_traincfggetlossname">OH_AI_API char **OH_AI_TrainCfgGetLossName(OH_AI_TrainCfgHandle train_cfg, size_t *num)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取损失函数的名称列表，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_traincfgsetlossname">OH_AI_API void OH_AI_TrainCfgSetLossName(OH_AI_TrainCfgHandle train_cfg, const char **loss_name, size_t num)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置损失函数的名称列表，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_traincfggetoptimizationlevel">OH_AI_API OH_AI_OptimizationLevel OH_AI_TrainCfgGetOptimizationLevel(OH_AI_TrainCfgHandle train_cfg)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取训练配置的优化等级，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_traincfgsetoptimizationlevel">OH_AI_API void OH_AI_TrainCfgSetOptimizationLevel(OH_AI_TrainCfgHandle train_cfg, OH_AI_OptimizationLevel level)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置训练配置的优化等级，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_trainmodelbuild">OH_AI_API OH_AI_Status OH_AI_TrainModelBuild(OH_AI_ModelHandle model, const void *model_data, size_t data_size,OH_AI_ModelType model_type, const OH_AI_ContextHandle model_context,const OH_AI_TrainCfgHandle train_cfg)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">从内存缓冲区加载训练模型，并将模型编译至可在Device上运行的状态，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_trainmodelbuildfromfile">OH_AI_API OH_AI_Status OH_AI_TrainModelBuildFromFile(OH_AI_ModelHandle model, const char *model_path,OH_AI_ModelType model_type,const OH_AI_ContextHandle model_context,const OH_AI_TrainCfgHandle train_cfg)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">根据路径读取加载训练模型，并将模型编译至可在Device上运行的状态，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_runstep">OH_AI_API OH_AI_Status OH_AI_RunStep(OH_AI_ModelHandle model, const OH_AI_KernelCallBack before,const OH_AI_KernelCallBack after)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">单步训练模型，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelsetlearningrate">OH_AI_API OH_AI_Status OH_AI_ModelSetLearningRate(OH_AI_ModelHandle model, float learning_rate)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置训练的学习率，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelgetlearningrate">OH_AI_API float OH_AI_ModelGetLearningRate(OH_AI_ModelHandle model)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取训练的学习率，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelgetweights">OH_AI_API OH_AI_TensorHandleArray OH_AI_ModelGetWeights(OH_AI_ModelHandle model)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取模型的所有权重Tensors，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelupdateweights">OH_AI_API OH_AI_Status OH_AI_ModelUpdateWeights(OH_AI_ModelHandle model, const OH_AI_TensorHandleArray new_weights)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">更新模型的权重Tensor内容，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelgettrainmode">OH_AI_API bool OH_AI_ModelGetTrainMode(OH_AI_ModelHandle model)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取训练模式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelsettrainmode">OH_AI_API OH_AI_Status OH_AI_ModelSetTrainMode(OH_AI_ModelHandle model, bool train)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置训练模式，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelsetupvirtualbatch">OH_AI_API OH_AI_Status OH_AI_ModelSetupVirtualBatch(OH_AI_ModelHandle model, int virtual_batch_multiplier, float lr,float momentum)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置虚拟batch用于训练，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_exportmodel">OH_AI_API OH_AI_Status OH_AI_ExportModel(OH_AI_ModelHandle model, OH_AI_ModelType model_type, const char *model_file,OH_AI_QuantizationType quantization_type, bool export_inference_only,char **output_tensor_name, size_t num)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">导出训练模型，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_exportmodelbuffer">OH_AI_API OH_AI_Status OH_AI_ExportModelBuffer(OH_AI_ModelHandle model, OH_AI_ModelType model_type, void *model_data,size_t *data_size, OH_AI_QuantizationType quantization_type,bool export_inference_only, char **output_tensor_name, size_t num)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">导出训练模型内存缓存，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_exportweightscollaboratewithmicro">OH_AI_API OH_AI_Status OH_AI_ExportWeightsCollaborateWithMicro(OH_AI_ModelHandle model, OH_AI_ModelType model_type,const char *weight_file, bool is_inference,bool enable_fp16, char **changeable_weights_name,size_t num)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">导出模型权重，只能用于micro推理，仅用于端侧训练。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelloadconfig">OH_AI_API OH_AI_Status OH_AI_ModelLoadConfig(OH_AI_ModelHandle model, const char *config_path)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">加载模型配置文件。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div>  <div class="tiledSection"><h3 id="oh_ai_kernelcallback" device-type="phone,2in1,tablet,tv" class="firsth2">OH_AI_KernelCallBack()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_kernelcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">bool</span> (*OH_AI_KernelCallBack)(<span class="hljs-keyword">const</span> OH_AI_TensorHandleArray inputs, <span class="hljs-keyword">const</span> OH_AI_TensorHandleArray outputs,<span class="hljs-keyword">const</span> OH_AI_CallBackParam kernel_Info)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>回调函数指针。</p> <p>该函数指针是用于设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelpredict">OH_AI_ModelPredict</a>函数参数中的两个回调函数。</p> <p>该指针指向的函数需要包含三个参数，其中inputs和outputs对应了算子的输入和输出张量，kernel_Info表示当前算子的信息。</p> <p>可以通过回调函数监控算子执行的情况，例如统计算子的执行时间，校验算子的正确性等等。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandlearray">OH_AI_TensorHandleArray</a> inputs</td> <td class="cellrowborder" width="50%">模型输入对应的张量数组结构体。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandlearray">OH_AI_TensorHandleArray</a> outputs</td> <td class="cellrowborder" width="50%">模型输出对应的张量数组结构体。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-callbackparam">OH_AI_CallBackParam</a> kernel_Info</td> <td class="cellrowborder" width="50%">当前算子的信息。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%">回调执行是否成功，若成功返回true，失败则返回false。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelcreate" device-type="phone,2in1,tablet,tv">OH_AI_ModelCreate()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelcreate" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API OH_AI_ModelHandle <span class="hljs-title function_">OH_AI_ModelCreate</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建一个模型对象。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a></td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modeldestroy" device-type="phone,2in1,tablet,tv">OH_AI_ModelDestroy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modeldestroy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API <span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_AI_ModelDestroy</span><span class="hljs-params">(OH_AI_ModelHandle *model)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>释放一个模型对象。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> *model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelbuild" device-type="phone,2in1,tablet,tv">OH_AI_ModelBuild()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelbuild" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_ModelBuild</span><span class="hljs-params">(OH_AI_ModelHandle model, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *model_data, <span class="hljs-type">size_t</span> data_size,OH_AI_ModelType model_type, <span class="hljs-type">const</span> OH_AI_ContextHandle model_context)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从内存缓冲区加载并编译MindSpore Lite模型。</p> <p>注意，同一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>对象仅能传递给<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelbuild">OH_AI_ModelBuild</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelbuildfromfile">OH_AI_ModelBuildFromFile</a>一次，如果多次调用该函数需要创建多个不同的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const void *model_data</td> <td class="cellrowborder" width="50%">内存中已经加载的模型数据地址。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t data_size</td> <td class="cellrowborder" width="50%">模型数据的长度。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a> model_type</td> <td class="cellrowborder" width="50%">模型文件类型，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a> model_context</td> <td class="cellrowborder" width="50%">模型运行时的上下文环境，具体见 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelbuildfromfile" device-type="phone,2in1,tablet,tv">OH_AI_ModelBuildFromFile()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelbuildfromfile" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_ModelBuildFromFile</span><span class="hljs-params">(OH_AI_ModelHandle model, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *model_path,OH_AI_ModelType model_type, <span class="hljs-type">const</span> OH_AI_ContextHandle model_context)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过模型文件加载并编译MindSpore Lite模型。</p> <p>注意，同一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>对象仅能传递给<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelbuild">OH_AI_ModelBuild</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_modelbuildfromfile">OH_AI_ModelBuildFromFile</a>一次，如果多次调用该函数需要创建多个不同的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *model_path</td> <td class="cellrowborder" width="50%">模型文件路径。字符串长度限制跟随文件系统。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a> model_type</td> <td class="cellrowborder" width="50%">模型文件类型，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a> model_context</td> <td class="cellrowborder" width="50%">模型运行时的上下文环境，具体见 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelresize" device-type="phone,2in1,tablet,tv">OH_AI_ModelResize()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelresize" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_ModelResize</span><span class="hljs-params">(OH_AI_ModelHandle model, <span class="hljs-type">const</span> OH_AI_TensorHandleArray inputs,OH_AI_ShapeInfo *shape_infos, <span class="hljs-type">size_t</span> shape_info_num)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>调整已编译模型的输入形状。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandlearray">const OH_AI_TensorHandleArray</a> inputs</td> <td class="cellrowborder" width="50%">模型输入对应的张量数组结构体。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-shapeinfo">OH_AI_ShapeInfo</a> *shape_infos</td> <td class="cellrowborder" width="50%">输入形状信息数组，按模型输入顺序排列的由形状信息组成的数组，模型会按顺序依次调整张量形状。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t shape_info_num</td> <td class="cellrowborder" width="50%">形状信息数组的长度。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelpredict" device-type="phone,2in1,tablet,tv">OH_AI_ModelPredict()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelpredict" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_ModelPredict</span><span class="hljs-params">(OH_AI_ModelHandle model, <span class="hljs-type">const</span> OH_AI_TensorHandleArray inputs,OH_AI_TensorHandleArray *outputs, <span class="hljs-type">const</span> OH_AI_KernelCallBack before,<span class="hljs-type">const</span> OH_AI_KernelCallBack after)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>执行模型推理。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandlearray">const OH_AI_TensorHandleArray</a> inputs</td> <td class="cellrowborder" width="50%">模型输入对应的张量数组结构体。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandlearray">OH_AI_TensorHandleArray</a> *outputs</td> <td class="cellrowborder" width="50%">模型输出对应的张量数组结构体的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_kernelcallback">const OH_AI_KernelCallBack</a> before</td> <td class="cellrowborder" width="50%">模型推理前执行的回调函数。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_kernelcallback">const OH_AI_KernelCallBack</a> after</td> <td class="cellrowborder" width="50%">模型推理后执行的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelgetinputs" device-type="phone,2in1,tablet,tv">OH_AI_ModelGetInputs()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelgetinputs" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API OH_AI_TensorHandleArray <span class="hljs-built_in">OH_AI_ModelGetInputs</span>(const OH_AI_ModelHandle model)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取模型的输入张量数组结构体。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandlearray">OH_AI_TensorHandleArray</a></td> <td class="cellrowborder" width="50%">模型输入对应的张量数组结构体。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelgetoutputs" device-type="phone,2in1,tablet,tv">OH_AI_ModelGetOutputs()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelgetoutputs" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API OH_AI_TensorHandleArray <span class="hljs-built_in">OH_AI_ModelGetOutputs</span>(const OH_AI_ModelHandle model)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取模型的输出张量数组结构体。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandlearray">OH_AI_TensorHandleArray</a></td> <td class="cellrowborder" width="50%">模型输出对应的张量数组结构体。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelgetinputbytensorname" device-type="phone,2in1,tablet,tv">OH_AI_ModelGetInputByTensorName()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelgetinputbytensorname" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_TensorHandle <span class="hljs-title">OH_AI_ModelGetInputByTensorName</span><span class="hljs-params">(<span class="hljs-type">const</span> OH_AI_ModelHandle model, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *tensor_name)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过张量名获取模型的输入张量。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *tensor_name</td> <td class="cellrowborder" width="50%">张量名称。字符串长度跟随系统限制。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandle">OH_AI_TensorHandle</a></td> <td class="cellrowborder" width="50%">tensor_name所对应的输入张量的张量指针，如果输入中没有该张量则返回空。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelgetoutputbytensorname" device-type="phone,2in1,tablet,tv">OH_AI_ModelGetOutputByTensorName()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelgetoutputbytensorname" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_TensorHandle <span class="hljs-title">OH_AI_ModelGetOutputByTensorName</span><span class="hljs-params">(<span class="hljs-type">const</span> OH_AI_ModelHandle model, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *tensor_name)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过张量名获取模型的输出张量。</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *tensor_name</td> <td class="cellrowborder" width="50%">张量名称。字符串长度跟随系统限制。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandle">OH_AI_TensorHandle</a></td> <td class="cellrowborder" width="50%">tensor_name所对应的输入张量的张量指针，如果输出中没有该张量则返回空。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_traincfgcreate" device-type="phone,2in1,tablet,tv">OH_AI_TrainCfgCreate()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_traincfgcreate" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API OH_AI_TrainCfgHandle <span class="hljs-built_in">OH_AI_TrainCfgCreate</span>()</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建训练配置对象指针，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-traincfghandle">OH_AI_TrainCfgHandle</a></td> <td class="cellrowborder" width="50%">训练配置对象指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_traincfgdestroy" device-type="phone,2in1,tablet,tv">OH_AI_TrainCfgDestroy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_traincfgdestroy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API <span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_AI_TrainCfgDestroy</span><span class="hljs-params">(OH_AI_TrainCfgHandle *train_cfg)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>销毁训练配置对象指针，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-traincfghandle">OH_AI_TrainCfgHandle</a> *train_cfg</td> <td class="cellrowborder" width="50%">训练配置对象指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_traincfggetlossname" device-type="phone,2in1,tablet,tv">OH_AI_TrainCfgGetLossName()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_traincfggetlossname" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API char **<span class="hljs-built_in">OH_AI_TrainCfgGetLossName</span>(OH_AI_TrainCfgHandle train_cfg, size_t *num)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取损失函数的名称列表，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-traincfghandle">OH_AI_TrainCfgHandle</a> train_cfg</td> <td class="cellrowborder" width="50%">训练配置对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t *num</td> <td class="cellrowborder" width="50%">损失函数数量。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API char **</td> <td class="cellrowborder" width="50%">损失函数的名称列表。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_traincfgsetlossname" device-type="phone,2in1,tablet,tv">OH_AI_TrainCfgSetLossName()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_traincfgsetlossname" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API <span class="hljs-type">void</span> <span class="hljs-title">OH_AI_TrainCfgSetLossName</span><span class="hljs-params">(OH_AI_TrainCfgHandle train_cfg, <span class="hljs-type">const</span> <span class="hljs-type">char</span> **loss_name, <span class="hljs-type">size_t</span> num)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置损失函数的名称列表，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-traincfghandle">OH_AI_TrainCfgHandle</a> train_cfg</td> <td class="cellrowborder" width="50%">训练配置对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char **loss_name</td> <td class="cellrowborder" width="50%">损失函数的名称列表。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t num</td> <td class="cellrowborder" width="50%">损失函数数量。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_traincfggetoptimizationlevel" device-type="phone,2in1,tablet,tv">OH_AI_TrainCfgGetOptimizationLevel()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_traincfggetoptimizationlevel" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API OH_AI_OptimizationLevel <span class="hljs-built_in">OH_AI_TrainCfgGetOptimizationLevel</span>(OH_AI_TrainCfgHandle train_cfg)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取训练配置的优化等级，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-traincfghandle">OH_AI_TrainCfgHandle</a> train_cfg</td> <td class="cellrowborder" width="50%">训练配置对象指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_optimizationlevel">OH_AI_OptimizationLevel</a></td> <td class="cellrowborder" width="50%">优化等级。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_traincfgsetoptimizationlevel" device-type="phone,2in1,tablet,tv">OH_AI_TrainCfgSetOptimizationLevel()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_traincfgsetoptimizationlevel" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API <span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_AI_TrainCfgSetOptimizationLevel</span><span class="hljs-params">(OH_AI_TrainCfgHandle train_cfg, OH_AI_OptimizationLevel level)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置训练配置的优化等级，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-traincfghandle">OH_AI_TrainCfgHandle</a> train_cfg</td> <td class="cellrowborder" width="50%">训练配置对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_optimizationlevel">OH_AI_OptimizationLevel</a> level</td> <td class="cellrowborder" width="50%">优化等级。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_trainmodelbuild" device-type="phone,2in1,tablet,tv">OH_AI_TrainModelBuild()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_trainmodelbuild" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_TrainModelBuild</span><span class="hljs-params">(OH_AI_ModelHandle model, <span class="hljs-type">const</span> <span class="hljs-type">void</span> *model_data, <span class="hljs-type">size_t</span> data_size,OH_AI_ModelType model_type, <span class="hljs-type">const</span> OH_AI_ContextHandle model_context,<span class="hljs-type">const</span> OH_AI_TrainCfgHandle train_cfg)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从内存缓冲区加载训练模型，并将模型编译至可在Device上运行的状态，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const void *model_data</td> <td class="cellrowborder" width="50%">指向存储读入模型文件缓冲区的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t data_size</td> <td class="cellrowborder" width="50%">缓冲区大小。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a> model_type</td> <td class="cellrowborder" width="50%">模型文件类型，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a> model_context</td> <td class="cellrowborder" width="50%">模型运行时的上下文环境，具体见 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-traincfghandle">OH_AI_TrainCfgHandle</a> train_cfg</td> <td class="cellrowborder" width="50%">训练配置对象指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_trainmodelbuildfromfile" device-type="phone,2in1,tablet,tv">OH_AI_TrainModelBuildFromFile()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_trainmodelbuildfromfile" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_TrainModelBuildFromFile</span><span class="hljs-params">(OH_AI_ModelHandle model, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *model_path,OH_AI_ModelType model_type,<span class="hljs-type">const</span> OH_AI_ContextHandle model_context,<span class="hljs-type">const</span> OH_AI_TrainCfgHandle train_cfg)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据路径读取加载训练模型，并将模型编译至可在Device上运行的状态，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *model_path</td> <td class="cellrowborder" width="50%">模型文件路径。字符串长度限制跟随文件系统。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a> model_type</td> <td class="cellrowborder" width="50%">模型文件类型，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a> model_context</td> <td class="cellrowborder" width="50%">模型运行时的上下文环境，具体见 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-contexthandle">OH_AI_ContextHandle</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-traincfghandle">OH_AI_TrainCfgHandle</a> train_cfg</td> <td class="cellrowborder" width="50%">训练配置对象指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_runstep" device-type="phone,2in1,tablet,tv">OH_AI_RunStep()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_runstep" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_RunStep</span><span class="hljs-params">(OH_AI_ModelHandle model, <span class="hljs-type">const</span> OH_AI_KernelCallBack before,<span class="hljs-type">const</span> OH_AI_KernelCallBack after)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>单步训练模型，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_kernelcallback">const OH_AI_KernelCallBack</a> before</td> <td class="cellrowborder" width="50%">模型推理前执行的回调函数。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-model-h#oh_ai_kernelcallback">const OH_AI_KernelCallBack</a> after</td> <td class="cellrowborder" width="50%">模型推理后执行的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelsetlearningrate" device-type="phone,2in1,tablet,tv">OH_AI_ModelSetLearningRate()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelsetlearningrate" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API OH_AI_Status <span class="hljs-title function_">OH_AI_ModelSetLearningRate</span><span class="hljs-params">(OH_AI_ModelHandle model, <span class="hljs-type">float</span> learning_rate)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置训练的学习率，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">float learning_rate</td> <td class="cellrowborder" width="50%">学习率。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelgetlearningrate" device-type="phone,2in1,tablet,tv">OH_AI_ModelGetLearningRate()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelgetlearningrate" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API <span class="hljs-attribute">float</span> <span class="hljs-built_in">OH_AI_ModelGetLearningRate</span>(OH_AI_ModelHandle model)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取训练的学习率，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API float</td> <td class="cellrowborder" width="50%">学习率，没有设置优化器时为0.0。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelgetweights" device-type="phone,2in1,tablet,tv">OH_AI_ModelGetWeights()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelgetweights" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API OH_AI_TensorHandleArray <span class="hljs-built_in">OH_AI_ModelGetWeights</span>(OH_AI_ModelHandle model)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取模型的所有权重Tensors，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandlearray">OH_AI_TensorHandleArray</a></td> <td class="cellrowborder" width="50%">模型的所有权重Tensor。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelupdateweights" device-type="phone,2in1,tablet,tv">OH_AI_ModelUpdateWeights()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelupdateweights" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API OH_AI_Status <span class="hljs-built_in">OH_AI_ModelUpdateWeights</span>(OH_AI_ModelHandle model, const OH_AI_TensorHandleArray new_weights)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>更新模型的权重Tensor内容，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-tensorhandlearray">const OH_AI_TensorHandleArray</a> new_weights</td> <td class="cellrowborder" width="50%">要更新的权重Tensor。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelgettrainmode" device-type="phone,2in1,tablet,tv">OH_AI_ModelGetTrainMode()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelgettrainmode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API bool <span class="hljs-built_in">OH_AI_ModelGetTrainMode</span>(OH_AI_ModelHandle model)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取训练模式。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API bool</td> <td class="cellrowborder" width="50%">表示是否是训练模式。true表示是训练模式，false表示不是训练模式。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelsettrainmode" device-type="phone,2in1,tablet,tv">OH_AI_ModelSetTrainMode()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelsettrainmode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API OH_AI_Status <span class="hljs-built_in">OH_AI_ModelSetTrainMode</span>(OH_AI_ModelHandle model, bool train)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置训练模式，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">bool train</td> <td class="cellrowborder" width="50%">是否为训练模式。true表示是训练模式，false表示不是训练模式。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.31.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelsetupvirtualbatch" device-type="phone,2in1,tablet,tv">OH_AI_ModelSetupVirtualBatch()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelsetupvirtualbatch" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AI_API OH_AI_Status <span class="hljs-title function_">OH_AI_ModelSetupVirtualBatch</span><span class="hljs-params">(OH_AI_ModelHandle model, <span class="hljs-type">int</span> virtual_batch_multiplier, <span class="hljs-type">float</span> lr,<span class="hljs-type">float</span> momentum)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置虚拟batch用于训练，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int virtual_batch_multiplier</td> <td class="cellrowborder" width="50%">虚拟batch乘法器，当设置值小于1时，表示禁用虚拟batch。长度跟随系统限制。</td> </tr> <tr><td class="cellrowborder" width="50%">float lr</td> <td class="cellrowborder" width="50%">学习率，默认为-1.0f。</td> </tr> <tr><td class="cellrowborder" width="50%">float momentum</td> <td class="cellrowborder" width="50%">动量，默认为-1.0f。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_exportmodel" device-type="phone,2in1,tablet,tv">OH_AI_ExportModel()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_exportmodel" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_ExportModel</span><span class="hljs-params">(OH_AI_ModelHandle model, OH_AI_ModelType model_type, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *model_file,OH_AI_QuantizationType quantization_type, <span class="hljs-type">bool</span> export_inference_only,<span class="hljs-type">char</span> **output_tensor_name, <span class="hljs-type">size_t</span> num)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>导出训练模型，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a> model_type</td> <td class="cellrowborder" width="50%">模型文件类型，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *model_file</td> <td class="cellrowborder" width="50%">导出的模型文件路径。字符串长度限制跟随文件系统。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_quantizationtype">OH_AI_QuantizationType</a> quantization_type</td> <td class="cellrowborder" width="50%">量化类型。</td> </tr> <tr><td class="cellrowborder" width="50%">bool export_inference_only</td> <td class="cellrowborder" width="50%">是否导出推理模型。true表示导出推理模型，false表示不导出推理模型。</td> </tr> <tr><td class="cellrowborder" width="50%">char **output_tensor_name</td> <td class="cellrowborder" width="50%">设置导出模型的输出Tensor，默认为空表示全量导出。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t num</td> <td class="cellrowborder" width="50%">输出Tensor的数量。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_exportmodelbuffer" device-type="phone,2in1,tablet,tv">OH_AI_ExportModelBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_exportmodelbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_ExportModelBuffer</span><span class="hljs-params">(OH_AI_ModelHandle model, OH_AI_ModelType model_type, <span class="hljs-type">void</span> *model_data,<span class="hljs-type">size_t</span> *data_size, OH_AI_QuantizationType quantization_type,<span class="hljs-type">bool</span> export_inference_only, <span class="hljs-type">char</span> **output_tensor_name, <span class="hljs-type">size_t</span> num)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>导出训练模型内存缓存，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a> model_type</td> <td class="cellrowborder" width="50%">模型文件类型，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">void *model_data</td> <td class="cellrowborder" width="50%">指向导出模型文件缓冲区的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t *data_size</td> <td class="cellrowborder" width="50%">缓冲区大小。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_quantizationtype">OH_AI_QuantizationType</a> quantization_type</td> <td class="cellrowborder" width="50%">量化类型。</td> </tr> <tr><td class="cellrowborder" width="50%">bool export_inference_only</td> <td class="cellrowborder" width="50%">是否导出推理模型。true表示导出推理模型，false表示不导出推理模型。</td> </tr> <tr><td class="cellrowborder" width="50%">char **output_tensor_name</td> <td class="cellrowborder" width="50%">设置导出模型的输出Tensor，默认为空表示全量导出。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t num</td> <td class="cellrowborder" width="50%">输出Tensor的数量。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_exportweightscollaboratewithmicro" device-type="phone,2in1,tablet,tv">OH_AI_ExportWeightsCollaborateWithMicro()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_exportweightscollaboratewithmicro" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_ExportWeightsCollaborateWithMicro</span><span class="hljs-params">(OH_AI_ModelHandle model, OH_AI_ModelType model_type,<span class="hljs-type">const</span> <span class="hljs-type">char</span> *weight_file, <span class="hljs-type">bool</span> is_inference,<span class="hljs-type">bool</span> enable_fp16, <span class="hljs-type">char</span> **changeable_weights_name,<span class="hljs-type">size_t</span> num)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>导出模型权重，只能用于micro推理，仅用于端侧训练。</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a> model_type</td> <td class="cellrowborder" width="50%">模型文件类型，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-types-h#oh_ai_modeltype">OH_AI_ModelType</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *weight_file</td> <td class="cellrowborder" width="50%">导出的权重文件路径。字符串长度限制跟随文件系统。</td> </tr> <tr><td class="cellrowborder" width="50%">bool is_inference</td> <td class="cellrowborder" width="50%">是否导出推理模型，当前只支持设置为true。</td> </tr> <tr><td class="cellrowborder" width="50%">bool enable_fp16</td> <td class="cellrowborder" width="50%">浮点权重是否保存为float16格式。true表示保存为float16格式，false表示不保存为float16格式。</td> </tr> <tr><td class="cellrowborder" width="50%">char **changeable_weights_name</td> <td class="cellrowborder" width="50%">shape可变的权重Tensor名称。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t num</td> <td class="cellrowborder" width="50%">shape可变的权重Tensor名称的数量。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_ai_modelloadconfig" device-type="phone,2in1,tablet,tv">OH_AI_ModelLoadConfig()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_ai_modelloadconfig" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-bdr-c106="" class="highlight-div"><div _ngcontent-bdr-c106="" class="highlight-div-header"><div _ngcontent-bdr-c106="" class="highlight-div-header-left"><div _ngcontent-bdr-c106="" class="handle-button expand-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bdr-c106="" class="highlight-div-header-right"><div _ngcontent-bdr-c106="" class="handle-button ai-button"></div><div _ngcontent-bdr-c106="" class="handle-button line-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bdr-c106="" class="handle-button theme-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bdr-c106="" class="handle-button copy-button"><div _ngcontent-bdr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bdr-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AI_API OH_AI_Status <span class="hljs-title">OH_AI_ModelLoadConfig</span><span class="hljs-params">(OH_AI_ModelHandle model, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *config_path)</span></span>;</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>加载模型配置文件。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-mindspore-oh-ai-modelhandle">OH_AI_ModelHandle</a> model</td> <td class="cellrowborder" width="50%">模型对象指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *config_path</td> <td class="cellrowborder" width="50%">配置文件路径。字符串长度限制跟随文件系统。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">OH_AI_API <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a></td> <td class="cellrowborder" width="50%">枚举类型的状态码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-status-h#oh_ai_status">OH_AI_Status</a>，若成功返回OH_AI_STATUS_SUCCESS，失败则返回具体错误码。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>