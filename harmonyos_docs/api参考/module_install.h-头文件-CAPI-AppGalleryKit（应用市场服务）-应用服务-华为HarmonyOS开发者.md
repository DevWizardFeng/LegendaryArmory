<h1 _ngcontent-ifi-c119="" class="doc-title ng-star-inserted" title="module_install.h"> module_install.h </h1>

<div _ngcontent-ifi-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>声明按需分发能力的API。</p> <p><strong>库：</strong> libhmsmoduleinstall.so</p> <p><strong>系统能力：</strong> SystemCapability.AppGalleryService.Distribution.OnDemandInstall</p> <p><strong>起始版本：</strong> 5.0.2(14)</p> <p><strong>相关模块：</strong><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall">ModuleInstall</a></p> </div> <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div> <div class="tiledSection"><h3 id="section1795419549133" device-type="phone,2in1,tablet,tv" class="firsth2">类型<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1795419549133" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>typedef struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#osaccount_errcode">ModuleInstall_InstalledModule</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#osaccount_errcode">ModuleInstall_InstalledModule</a></p> </td> <td class="cellrowborder" width="50%"><p>安装模块信息。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section115389533615">ModuleInstall_FetchModulesResult</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section115389533615">ModuleInstall_FetchModulesResult</a></p> </td> <td class="cellrowborder" width="50%"><p>安装模块结果。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section48269177812">ModuleInstall_StatusCallback</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section48269177812">ModuleInstall_StatusCallback</a></p> </td> <td class="cellrowborder" width="50%"><p>模块安装状态回调。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section9881414171010">ModuleInstall_OnStatusCallback</a></p> </td> <td class="cellrowborder" width="50%"><p>监听回调函数</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section2421177191415" device-type="phone,2in1,tablet,tv">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2421177191415" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>typedef enum <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#osaccount_errcode-1">ModuleInstall_ErrCode</a> {</p> <p>E_NO_ERROR = 0,</p> <p>E_PARAMS = 401,</p> <p>E_QUERY_MODULE = 1006500001,</p> <p>E_REPEATED_CALL = 1006500002,</p> <p>E_CONNECT_SA = 1006500004,</p> <p>E_OFF_WITHOUT_ON = 1006500006,</p> <p>E_CONNECT_SERVICE_EXTENSION = 1006500007,</p> <p>E_WRITE_PARAM = 1006500008,</p> <p>E_REQUEST_SERVER = 1006500009,</p> <p>E_RESPONSE_INVALID = 1006500010,</p> <p>E_INNER_ERROR = 1006500011</p> <p>}</p> </td> <td class="cellrowborder" width="50%"><p>枚举错误码。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef enum <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section19925459265">ModuleInstall_InstallStatus</a> {</p> <p>INSTALLED = 0,</p> <p>NOT_INSTALLED = 1</p> <p>}</p> </td> <td class="cellrowborder" width="50%"><p>枚举安装状态。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef enum <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section10742174163618">ModuleInstall_RequestCode</a> {</p> <p>MODULE_ALREADY_EXISTS = -8,</p> <p>MODULE_UNAVAILABLE = -7,</p> <p>INVALID_REQUEST = -6,</p> <p>NETWORK_ERROR = -5,</p> <p>INVOKER_VERIFICATION_FAILED = -4,</p> <p>FOREGROUND_REQUIRED = -3,</p> <p>ACTIVE_SESSION_LIMIT_EXCEEDED = -2,</p> <p>FAILURE = -1,</p> <p>SUCCESS = 0,</p> <p>DOWNLOAD_WAIT_WIFI = 1</p> <p>}</p> </td> <td class="cellrowborder" width="50%"><p>枚举请求码。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef enum <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section14463723193715">ModuleInstall_TaskStatus</a> {</p> <p>CREATE_TASK_FAILED = -4,</p> <p>HIGHER_VERSION_INSTALLED = -3,</p> <p>TASK_ALREADY_EXISTS = -2,</p> <p>TASK_UNFOUND = -1,</p> <p>TASK_CREATED = 0,</p> <p>DOWNLOADING = 1,</p> <p>DOWNLOAD_PAUSED = 2,</p> <p>DOWNLOAD_WAITING = 3,</p> <p>DOWNLOAD_SUCCESSFUL = 4,</p> <p>DOWNLOAD_FAILED = 5,</p> <p>DOWNLOAD_WAIT_FOR_WIFI = 6,</p> <p>INSTALL_WAITING = 20,</p> <p>INSTALLING = 21,</p> <p>INSTALL_SUCCESSFUL = 22,</p> <p>INSTALL_FAILED = 23</p> <p>}</p> </td> <td class="cellrowborder" width="50%"><p>枚举任务状态。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#oh_osaccount_getname">HMS_ModuleInstall_GetInstalledModule</a></p> </td> <td class="cellrowborder" width="50%"><p>查询模块是否安装。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section19475184213526">HMS_ModuleInstall_GetInstalledModuleName</a></p> </td> <td class="cellrowborder" width="50%"><p>获取模块名。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section39341746155513">HMS_ModuleInstall_GetInstalledModuleType</a></p> </td> <td class="cellrowborder" width="50%"><p>获取模块类型。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section84699521566">HMS_ModuleInstall_GetModuleInstallStatus</a></p> </td> <td class="cellrowborder" width="50%"><p>获取模块安装状态。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section1533121613581">HMS_ModuleInstall_FetchModules</a></p> </td> <td class="cellrowborder" width="50%"><p>请求下载模块。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section191414113614">HMS_ModuleInstall_GetFetchModulesRequestCode</a></p> </td> <td class="cellrowborder" width="50%"><p>获取模块下载请求码。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section142448141910">HMS_ModuleInstall_GetFetchModulesTaskStatus</a></p> </td> <td class="cellrowborder" width="50%"><p>获取模块下载任务状态。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section979412409101">HMS_ModuleInstall_GetFetchModulesTaskId</a></p> </td> <td class="cellrowborder" width="50%"><p>获取模块下载任务id。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section762681812121">HMS_ModuleInstall_GetFetchModulesDesc</a></p> </td> <td class="cellrowborder" width="50%"><p>获取模块下载描述。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section55521545111313">HMS_ModuleInstall_GetFetchModules</a></p> </td> <td class="cellrowborder" width="50%"><p>获取模块下载模块名。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section1071043411515">HMS_ModuleInstall_GetFetchModulesTotalSize</a></p> </td> <td class="cellrowborder" width="50%"><p>获取模块下载总大小。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section04641118168">HMS_ModuleInstall_GetFetchModulesDownloadedSize</a></p> </td> <td class="cellrowborder" width="50%"><p>获取模块下载已下载大小。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section1177619221712">HMS_ModuleInstall_CancelTask</a></p> </td> <td class="cellrowborder" width="50%"><p>取消下载任务。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section1897653081720">HMS_ModuleInstall_ShowCellularDataConfirmation</a></p> </td> <td class="cellrowborder" width="50%"><p>展示流量弹窗。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section1710031151816">HMS_ModuleInstall_CreateStatusCallback</a></p> </td> <td class="cellrowborder" width="50%"><p>创建下载进度监听回调。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section18492123951816">HMS_ModuleInstall_On</a></p> </td> <td class="cellrowborder" width="50%"><p>下载进度监听。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section1541418516194">HMS_ModuleInstall_ReleaseStatusCallback</a></p> </td> <td class="cellrowborder" width="50%"><p>释放下载进度监听回调。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-c-moduleinstall#section1260162551917">HMS_ModuleInstall_Off</a></p> </td> <td class="cellrowborder" width="50%"><p>取消下载进度监听。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>