<h1 _ngcontent-gjv-c119="" class="doc-title ng-star-inserted" title="native_audio_routing_manager.h"> native_audio_routing_manager.h </h1>

<div _ngcontent-gjv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>声明与音频路由管理器相关的接口。</p> <p> 包含用于创建audioRoutingManager，设备连接状态发生变化时的注册和注销功能，以及存储设备信息的指针数组的释放。</p> <p><strong>引用文件：</strong> &lt;ohaudio/native_audio_routing_manager.h&gt;</p> <p><strong>库：</strong> libohaudio.so</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio">OHAudio</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioRoutingManager</td> <td class="cellrowborder" width="33.33333333333333%">声明音频路由管理器。用于管理音频路由相关功能。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_ondevicechangedcallback">typedef int32_t (*OH_AudioRoutingManager_OnDeviceChangedCallback)(OH_AudioDevice_ChangeType type, OH_AudioDeviceDescriptorArray *audioDeviceDescriptorArray)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioRoutingManager_OnDeviceChangedCallback</td> <td class="cellrowborder" width="33.33333333333333%">此函数指针将指向用于返回更改的音频设备描述符的回调函数，可能返回多个音频设备描述符。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioCommon_Result OH_AudioManager_GetAudioRoutingManager(OH_AudioRoutingManager **audioRoutingManager)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">查询音频路由管理器句柄，该句柄应设置为路由相关函数中的第一个参数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_getdevices">OH_AudioCommon_Result OH_AudioRoutingManager_GetDevices(OH_AudioRoutingManager *audioRoutingManager, OH_AudioDevice_Flag deviceFlag, OH_AudioDeviceDescriptorArray **audioDeviceDescriptorArray)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">根据输入的deviceFlag查询可用的设备。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_getavailabledevices">OH_AudioCommon_Result OH_AudioRoutingManager_GetAvailableDevices(OH_AudioRoutingManager *audioRoutingManager, OH_AudioDevice_Usage deviceUsage, OH_AudioDeviceDescriptorArray **audioDeviceDescriptorArray)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取音频可选设备列表。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_getpreferredoutputdevice">OH_AudioCommon_Result OH_AudioRoutingManager_GetPreferredOutputDevice(OH_AudioRoutingManager *audioRoutingManager, OH_AudioStream_Usage streamUsage, OH_AudioDeviceDescriptorArray **audioDeviceDescriptorArray)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">根据音频输出流的使用场景，获取优先级最高的输出设备。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_getpreferredinputdevice">OH_AudioCommon_Result OH_AudioRoutingManager_GetPreferredInputDevice(OH_AudioRoutingManager *audioRoutingManager, OH_AudioStream_SourceType sourceType, OH_AudioDeviceDescriptorArray **audioDeviceDescriptorArray)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">根据音频输入流的使用场景，获取优先级最高的输入设备。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_registerdevicechangecallback">OH_AudioCommon_Result OH_AudioRoutingManager_RegisterDeviceChangeCallback(OH_AudioRoutingManager *audioRoutingManager, OH_AudioDevice_Flag deviceFlag, OH_AudioRoutingManager_OnDeviceChangedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">注册音频路由管理器的设备更改回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_unregisterdevicechangecallback">OH_AudioCommon_Result OH_AudioRoutingManager_UnregisterDeviceChangeCallback(OH_AudioRoutingManager *audioRoutingManager, OH_AudioRoutingManager_OnDeviceChangedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">取消注册音频路由管理器的设备更改回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_releasedevices">OH_AudioCommon_Result OH_AudioRoutingManager_ReleaseDevices(OH_AudioRoutingManager *audioRoutingManager, OH_AudioDeviceDescriptorArray *audioDeviceDescriptorArray)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">释放音频设备描述符数组对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_ondeviceblockstatuscallback">typedef void (*OH_AudioRoutingManager_OnDeviceBlockStatusCallback)(OH_AudioDeviceDescriptorArray *audioDeviceDescriptorArray, OH_AudioDevice_BlockStatus status, void *userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioRoutingManager_OnDeviceBlockStatusCallback</td> <td class="cellrowborder" width="33.33333333333333%">此函数指针将指向用于返回音频设备堵塞状态的回调函数，可能返回多个音频设备描述符。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_ismicblockdetectionsupported">OH_AudioCommon_Result OH_AudioRoutingManager_IsMicBlockDetectionSupported(OH_AudioRoutingManager *audioRoutingManager, bool *supported)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">查询当前设备是否支持麦克风堵塞状态检测。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_setmicblockstatuscallback">OH_AudioCommon_Result OH_AudioRoutingManager_SetMicBlockStatusCallback(OH_AudioRoutingManager *audioRoutingManager, OH_AudioRoutingManager_OnDeviceBlockStatusCallback callback, void *userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>设置麦克风是否堵塞状态回调。</p> <p>在使用此功能之前，用户应查询当前设备是否支持检测，应用只有在使用麦克风录音时，并且所使用的麦克风的堵塞状态发生改变，才会收到回调，目前此检测功能仅支持麦克风位于本地设备上。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_ondevicechangedcallback" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_AudioRoutingManager_OnDeviceChangedCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_ondevicechangedcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>typedef int32_t (*OH_AudioRoutingManager_OnDeviceChangedCallback)(OH_AudioDevice_ChangeType type, OH_AudioDeviceDescriptorArray *audioDeviceDescriptorArray</li><li>)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此函数指针将指向用于返回更改的音频设备描述符的回调函数，可能返回多个音频设备描述符。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_changetype">OH_AudioDevice_ChangeType</a> type</td> <td class="cellrowborder" width="50%">设备连接状态类型。 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_changetype">OH_AudioDevice_ChangeType</a> 已连接或断开。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> *audioDeviceDescriptorArray</td> <td class="cellrowborder" width="50%">音频设备描述符数组，指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a>设置音频设备描述符值的指针变量，不要单独释放audioDeviceDescriptorArray指针，而是调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_releasedevices">OH_AudioRoutingManager_ReleaseDevices</a>来释放DeviceDescriptor数组。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audiomanager_getaudioroutingmanager" device-type="phone,2in1,tablet,wearable,tv">OH_AudioManager_GetAudioRoutingManager()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiomanager_getaudioroutingmanager" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioManager_GetAudioRoutingManager</span>(OH_AudioRoutingManager **audioRoutingManager)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询音频路由管理器句柄，该句柄应设置为路由相关函数中的第一个参数。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a> **audioRoutingManager</td> <td class="cellrowborder" width="50%">音频路由管理器句柄。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioManager_GetAudioRoutingManager</a>获取句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%">AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_getdevices" device-type="phone,2in1,tablet,wearable,tv">OH_AudioRoutingManager_GetDevices()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_getdevices" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioRoutingManager_GetDevices</span>(OH_AudioRoutingManager *audioRoutingManager, OH_AudioDevice_Flag deviceFlag, OH_AudioDeviceDescriptorArray **audioDeviceDescriptorArray)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据输入的deviceFlag查询可用的设备。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a> *audioRoutingManager</td> <td class="cellrowborder" width="50%">音频路由管理器句柄。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioManager_GetAudioRoutingManager</a>获取句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_flag">OH_AudioDevice_Flag</a> deviceFlag</td> <td class="cellrowborder" width="50%">音频设备标志，用于选择目标设备的滤波器参数。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> **audioDeviceDescriptorArray</td> <td class="cellrowborder" width="50%">音频设备描述符数组。设置音频设备描述符值的指针变量，不要单独释放audioDeviceDescriptorArray指针，而是调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_releasedevices">OH_AudioRoutingManager_ReleaseDevices</a>来释放DeviceDescriptor数组。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioRoutingManager为nullptr；</p> <p> 2. 参数deviceFlag无效；</p> <p> 3. 参数audioDeviceDescriptorArray为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_NO_MEMORY：内存不足。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_getavailabledevices" device-type="phone,2in1,tablet,wearable,tv">OH_AudioRoutingManager_GetAvailableDevices()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_getavailabledevices" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioRoutingManager_GetAvailableDevices</span>(OH_AudioRoutingManager *audioRoutingManager, OH_AudioDevice_Usage deviceUsage, OH_AudioDeviceDescriptorArray **audioDeviceDescriptorArray)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取音频可选设备列表。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a> *audioRoutingManager</td> <td class="cellrowborder" width="50%">音频路由管理器句柄。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioManager_GetAudioRoutingManager</a>获取句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_usage">OH_AudioDevice_Usage</a> deviceUsage</td> <td class="cellrowborder" width="50%">指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_usage">OH_AudioDevice_Usage</a>用于设置要获取的设备种类。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> **audioDeviceDescriptorArray</td> <td class="cellrowborder" width="50%">音频设备描述符数组。设置音频设备描述符值的指针变量，不要单独释放audioDeviceDescriptorArray指针，而是调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_releasedevices">OH_AudioRoutingManager_ReleaseDevices</a>来释放DeviceDescriptor数组。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1.参数audioRoutingManager为nullptr；</p> <p> 2.参数deviceUsage无效;</p> <p> 3.参数audioDeviceDescriptorArray为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_NO_MEMORY：内存不足。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_getpreferredoutputdevice" device-type="phone,2in1,tablet,wearable,tv">OH_AudioRoutingManager_GetPreferredOutputDevice()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_getpreferredoutputdevice" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioRoutingManager_GetPreferredOutputDevice</span>(OH_AudioRoutingManager *audioRoutingManager, OH_AudioStream_Usage streamUsage, OH_AudioDeviceDescriptorArray **audioDeviceDescriptorArray)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据音频输出流的使用场景，获取优先级最高的输出设备。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a> *audioRoutingManager</td> <td class="cellrowborder" width="50%">音频路由管理器句柄。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioManager_GetAudioRoutingManager</a>获取句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_usage">OH_AudioStream_Usage</a> streamUsage</td> <td class="cellrowborder" width="50%">指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_usage">OH_AudioStream_Usage</a>用于设置音频输出流的使用场景。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> **audioDeviceDescriptorArray</td> <td class="cellrowborder" width="50%">音频设备描述符数组。设置音频设备描述符值的指针变量，不要单独释放audioDeviceDescriptorArray指针，而是调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_releasedevices">OH_AudioRoutingManager_ReleaseDevices</a>来释放DeviceDescriptor数组。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1.参数audioRoutingManager为nullptr;</p> <p> 2.参数streamUsage无效;</p> <p> 3.参数audioDeviceDescriptorArray为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_NO_MEMORY：内存不足。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_getpreferredinputdevice" device-type="phone,2in1,tablet,wearable,tv">OH_AudioRoutingManager_GetPreferredInputDevice()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_getpreferredinputdevice" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioRoutingManager_GetPreferredInputDevice</span>(OH_AudioRoutingManager *audioRoutingManager, OH_AudioStream_SourceType sourceType, OH_AudioDeviceDescriptorArray **audioDeviceDescriptorArray)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据音频输入流的使用场景，获取优先级最高的输入设备。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a> *audioRoutingManager</td> <td class="cellrowborder" width="50%">音频路由管理器句柄。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioManager_GetAudioRoutingManager</a>获取句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_sourcetype">OH_AudioStream_SourceType</a> sourceType</td> <td class="cellrowborder" width="50%">指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_sourcetype">OH_AudioStream_SourceType</a>用于设置音频输入流的使用场景。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> **audioDeviceDescriptorArray</td> <td class="cellrowborder" width="50%">音频设备描述符数组。设置音频设备描述符值的指针变量，不要单独释放audioDeviceDescriptorArray指针，而是调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_releasedevices">OH_AudioRoutingManager_ReleaseDevices</a>来释放DeviceDescriptor数组。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1.参数audioRoutingManager为nullptr;</p> <p> 2.参数sourceType无效;</p> <p> 3.参数audioDeviceDescriptorArray为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_NO_MEMORY：内存不足。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_registerdevicechangecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioRoutingManager_RegisterDeviceChangeCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_registerdevicechangecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioRoutingManager_RegisterDeviceChangeCallback</span>(OH_AudioRoutingManager *audioRoutingManager, OH_AudioDevice_Flag deviceFlag, OH_AudioRoutingManager_OnDeviceChangedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册音频路由管理器的设备更改回调。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a> *audioRoutingManager</td> <td class="cellrowborder" width="50%">音频路由管理器句柄。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioManager_GetAudioRoutingManager</a>获取句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_flag">OH_AudioDevice_Flag</a> deviceFlag</td> <td class="cellrowborder" width="50%">音频设备标志，用来注册回调。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_ondevicechangedcallback">OH_AudioRoutingManager_OnDeviceChangedCallback</a> callback</td> <td class="cellrowborder" width="50%">函数指针将指向用于返回更改的音频设备描述符的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioRoutingManager为nullptr；</p> <p> 2. 参数deviceFlag无效；</p> <p> 3. 参数callback为nullptr。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_unregisterdevicechangecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioRoutingManager_UnregisterDeviceChangeCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_unregisterdevicechangecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioRoutingManager_UnregisterDeviceChangeCallback</span>(OH_AudioRoutingManager *audioRoutingManager, OH_AudioRoutingManager_OnDeviceChangedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>取消注册音频路由管理器的设备更改回调。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a> *audioRoutingManager</td> <td class="cellrowborder" width="50%">音频路由管理器句柄。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioManager_GetAudioRoutingManager</a>获取句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_ondevicechangedcallback">OH_AudioRoutingManager_OnDeviceChangedCallback</a> callback</td> <td class="cellrowborder" width="50%">函数指针将指向用于返回更改的音频设备描述符的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioRoutingManager为nullptr；</p> <p> 2. 参数callback为nullptr。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_releasedevices" device-type="phone,2in1,tablet,wearable,tv">OH_AudioRoutingManager_ReleaseDevices()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_releasedevices" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioRoutingManager_ReleaseDevices</span>(OH_AudioRoutingManager *audioRoutingManager, OH_AudioDeviceDescriptorArray *audioDeviceDescriptorArray)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>释放音频设备描述符数组对象。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a> *audioRoutingManager</td> <td class="cellrowborder" width="50%">音频路由管理器句柄。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioManager_GetAudioRoutingManager</a>获取句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> *audioDeviceDescriptorArray</td> <td class="cellrowborder" width="50%">音频设备描述符数组应当被释放，获取请调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_getdevices">OH_AudioRoutingManager_GetDevices</a>接口。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioRoutingManager为nullptr；</p> <p> 2. 参数audioDeviceDescriptorArray为nullptr。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_ondeviceblockstatuscallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioRoutingManager_OnDeviceBlockStatusCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_ondeviceblockstatuscallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_AudioRoutingManager_OnDeviceBlockStatusCallback)(OH_AudioDeviceDescriptorArray *audioDeviceDescriptorArray, OH_AudioDevice_BlockStatus status, <span class="hljs-type">void</span> *userData)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此函数指针将指向用于返回音频设备堵塞状态的回调函数，可能返回多个音频设备描述符。</p> <p><strong>起始版本：</strong> 13</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> *audioDeviceDescriptorArray</td> <td class="cellrowborder" width="50%">音频设备描述符数组应当被释放，获取请调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_getdevices">OH_AudioRoutingManager_GetDevices</a>接口。设置音频设备描述符值的指针变量，不要单独释放audioDeviceDescriptorArray指针，而是调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_releasedevices">OH_AudioRoutingManager_ReleaseDevices</a>来释放DeviceDescriptor数组。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_blockstatus">OH_AudioDevice_BlockStatus</a> status</td> <td class="cellrowborder" width="50%">音频设备的堵塞状态。</td> </tr> <tr><td class="cellrowborder" width="50%">void *userData</td> <td class="cellrowborder" width="50%">用户自定义数据指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_ismicblockdetectionsupported" device-type="phone,2in1,tablet,wearable,tv">OH_AudioRoutingManager_IsMicBlockDetectionSupported()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_ismicblockdetectionsupported" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioRoutingManager_IsMicBlockDetectionSupported</span>(OH_AudioRoutingManager *audioRoutingManager, bool *supported)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询当前设备是否支持麦克风堵塞状态检测。</p> <p><strong>起始版本：</strong> 13</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a> *audioRoutingManager</td> <td class="cellrowborder" width="50%">音频路由管理器句柄。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioManager_GetAudioRoutingManager</a>获取句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">bool *supported</td> <td class="cellrowborder" width="50%">查询当前设备是否支持麦克风堵塞状态检测的结果。true表示支持，false表示不支持。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1.参数audioRoutingManager为nullptr；</p> <p> 2.参数supported为nullptr。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audioroutingmanager_setmicblockstatuscallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioRoutingManager_SetMicBlockStatusCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audioroutingmanager_setmicblockstatuscallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gjv-c106="" class="highlight-div"><div _ngcontent-gjv-c106="" class="highlight-div-header"><div _ngcontent-gjv-c106="" class="highlight-div-header-left"><div _ngcontent-gjv-c106="" class="handle-button expand-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gjv-c106="" class="highlight-div-header-right"><div _ngcontent-gjv-c106="" class="handle-button ai-button"></div><div _ngcontent-gjv-c106="" class="handle-button line-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gjv-c106="" class="handle-button theme-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gjv-c106="" class="handle-button copy-button"><div _ngcontent-gjv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gjv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-title function_">OH_AudioRoutingManager_SetMicBlockStatusCallback</span><span class="hljs-params">(OH_AudioRoutingManager *audioRoutingManager, OH_AudioRoutingManager_OnDeviceBlockStatusCallback callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置麦克风是否堵塞状态回调。</p> <p> 在使用此功能之前，用户应查询当前设备是否支持检测，应用只有在使用麦克风录音时，并且所使用的麦克风的堵塞状态发生改变，才会收到回调，目前此检测功能仅支持麦克风位于本地设备上。</p> <p><strong>起始版本：</strong> 13</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audioroutingmanager">OH_AudioRoutingManager</a> *audioRoutingManager</td> <td class="cellrowborder" width="50%">音频路由管理器句柄。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audiomanager_getaudioroutingmanager">OH_AudioManager_GetAudioRoutingManager</a>获取句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_ondeviceblockstatuscallback">OH_AudioRoutingManager_OnDeviceBlockStatusCallback</a> callback</td> <td class="cellrowborder" width="50%">函数指针将指向用于返回接受设备麦克风堵塞状态<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-routing-manager-h#oh_audioroutingmanager_ondeviceblockstatuscallback">OH_AudioRoutingManager_OnDeviceBlockStatusCallback</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">void *userData</td> <td class="cellrowborder" width="50%">用户自定义数据指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1.参数audioRoutingManager为nullptr；</p> <p> 2.参数callback为nullptr。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>