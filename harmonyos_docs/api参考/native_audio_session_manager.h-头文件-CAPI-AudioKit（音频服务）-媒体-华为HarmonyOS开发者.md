<h1 _ngcontent-snw-c119="" class="doc-title ng-star-inserted" title="native_audio_session_manager.h"> native_audio_session_manager.h </h1>

<div _ngcontent-snw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div> <div class="tiledSection" style="contain-intrinsic-size: auto 422px;"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>声明音频会话管理相关的接口。</p> <p> 包含创建音频会话管理器、激活/停用音频会话、检查音频会话是否已激活，以及监听音频会话停用事件。</p> <p><strong>引用文件：</strong> &lt;ohaudio/native_audio_session_manager.h&gt;</p> <p><strong>库：</strong> libohaudio.so</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Audio.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio">OHAudio</a></p> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 146px;"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 396px;"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosession-strategy">OH_AudioSession_Strategy</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_Strategy</td> <td class="cellrowborder" width="33.33333333333333%">音频会话策略。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosession-deactivatedevent">OH_AudioSession_DeactivatedEvent</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_DeactivatedEvent</td> <td class="cellrowborder" width="33.33333333333333%">音频会话已停用事件。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosession-statechangedevent">OH_AudioSession_StateChangedEvent</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_StateChangedEvent</td> <td class="cellrowborder" width="33.33333333333333%">音频会话状态变更事件。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSessionManager</td> <td class="cellrowborder" width="33.33333333333333%">声明音频会话管理器。用于管理音频会话相关功能。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 502px;"><h3 id="枚举" device-type="phone,2in1,tablet,wearable,tv">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_concurrencymode">OH_AudioSession_ConcurrencyMode</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_ConcurrencyMode</td> <td class="cellrowborder" width="33.33333333333333%">音频并发模式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_scene">OH_AudioSession_Scene</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_Scene</td> <td class="cellrowborder" width="33.33333333333333%">音频会话场景。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_statechangehint">OH_AudioSession_StateChangeHint</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_StateChangeHint</td> <td class="cellrowborder" width="33.33333333333333%">音频会话状态变更的提示信息。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_outputdevicechangerecommendedaction">OH_AudioSession_OutputDeviceChangeRecommendedAction</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_OutputDeviceChangeRecommendedAction</td> <td class="cellrowborder" width="33.33333333333333%">输出设备变更后推荐的操作。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_deactivatedreason">OH_AudioSession_DeactivatedReason</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_DeactivatedReason</td> <td class="cellrowborder" width="33.33333333333333%">音频会话停用原因。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_bluetoothandnearlinkpreferredrecordcategory">OH_AudioSession_BluetoothAndNearlinkPreferredRecordCategory</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_BluetoothAndNearlinkPreferredRecordCategory</td> <td class="cellrowborder" width="33.33333333333333%">在使用蓝牙或星闪进行录音时，应用程序的设备偏好分类。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 5353px;"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_statechangedcallback">typedef void (*OH_AudioSession_StateChangedCallback)(OH_AudioSession_StateChangedEvent event)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_StateChangedCallback</td> <td class="cellrowborder" width="33.33333333333333%">这个函数指针将指向用于监听音频会话状态变更事件的回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_availabledevicechangedcallback">typedef void (*OH_AudioSession_AvailableDeviceChangedCallback)(OH_AudioDevice_ChangeType type, OH_AudioDeviceDescriptorArray *audioDeviceDescriptorArray)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_AvailableDeviceChangedCallback</td> <td class="cellrowborder" width="33.33333333333333%">此函数指针将指向用于返回变化的音频设备描述符的回调函数，可能会返回多个音频设备描述符。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_currentinputdevicechangedcallback">typedef void (*OH_AudioSession_CurrentInputDeviceChangedCallback)(OH_AudioDeviceDescriptorArray *devices, OH_AudioStream_DeviceChangeReason changeReason)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_CurrentInputDeviceChangedCallback</td> <td class="cellrowborder" width="33.33333333333333%">这个函数指针将指向用于监听当前输入设备变化事件的回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_currentoutputdevicechangedcallback">typedef void (*OH_AudioSession_CurrentOutputDeviceChangedCallback)(OH_AudioDeviceDescriptorArray *devices, OH_AudioStream_DeviceChangeReason changeReason, OH_AudioSession_OutputDeviceChangeRecommendedAction recommendedAction)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_CurrentOutputDeviceChangedCallback</td> <td class="cellrowborder" width="33.33333333333333%">这个函数指针将指向用于监听当前输出设备变化事件的回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_deactivatedcallback">typedef int32_t (*OH_AudioSession_DeactivatedCallback)(OH_AudioSession_DeactivatedEvent event)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioSession_DeactivatedCallback</td> <td class="cellrowborder" width="33.33333333333333%">这个函数指针将指向用于监听音频会话停用事件的回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioCommon_Result OH_AudioManager_GetAudioSessionManager(OH_AudioSessionManager **audioSessionManager)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取音频会话管理器。使用音频会话管理器相关功能，首先需要获取音频会话管理器实例。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_activateaudiosession">OH_AudioCommon_Result OH_AudioSessionManager_ActivateAudioSession(OH_AudioSessionManager *audioSessionManager, const OH_AudioSession_Strategy *strategy)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">激活音频会话。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_deactivateaudiosession">OH_AudioCommon_Result OH_AudioSessionManager_DeactivateAudioSession(OH_AudioSessionManager *audioSessionManager)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">停用音频会话。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_isaudiosessionactivated">bool OH_AudioSessionManager_IsAudioSessionActivated(OH_AudioSessionManager *audioSessionManager)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">检查音频会话是否已激活。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_registersessiondeactivatedcallback">OH_AudioCommon_Result OH_AudioSessionManager_RegisterSessionDeactivatedCallback(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_DeactivatedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">注册音频会话停用事件回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_unregistersessiondeactivatedcallback">OH_AudioCommon_Result OH_AudioSessionManager_UnregisterSessionDeactivatedCallback(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_DeactivatedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">取消注册音频会话停用事件回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_setscene">OH_AudioCommon_Result OH_AudioSessionManager_SetScene(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_Scene scene)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置音频会话场景参数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_registerstatechangecallback">OH_AudioCommon_Result OH_AudioSessionManager_RegisterStateChangeCallback(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_StateChangedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">注册音频会话状态变更事件回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_unregisterstatechangecallback">OH_AudioCommon_Result OH_AudioSessionManager_UnregisterStateChangeCallback(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_StateChangedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">取消音频会话状态变更事件回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_setdefaultoutputdevice">OH_AudioCommon_Result OH_AudioSessionManager_SetDefaultOutputDevice(OH_AudioSessionManager *audioSessionManager, OH_AudioDevice_Type deviceType)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置默认本机内置发声设备。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_getdefaultoutputdevice">OH_AudioCommon_Result OH_AudioSessionManager_GetDefaultOutputDevice(OH_AudioSessionManager *audioSessionManager, OH_AudioDevice_Type *deviceType)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_setdefaultoutputdevice">OH_AudioSessionManager_SetDefaultOutputDevice</a>设置的默认发声设备。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_releasedevices">OH_AudioCommon_Result OH_AudioSessionManager_ReleaseDevices(OH_AudioSessionManager *audioSessionManager, OH_AudioDeviceDescriptorArray *audioDeviceDescriptorArray)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">释放音频设备描述符数组对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_registercurrentoutputdevicechangecallback">OH_AudioCommon_Result OH_AudioSessionManager_RegisterCurrentOutputDeviceChangeCallback(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_CurrentOutputDeviceChangedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">注册当前输出设备变化回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_unregistercurrentoutputdevicechangecallback">OH_AudioCommon_Result OH_AudioSessionManager_UnregisterCurrentOutputDeviceChangeCallback(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_CurrentOutputDeviceChangedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">取消注册当前输出设备变化回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_getavailabledevices">OH_AudioCommon_Result OH_AudioSessionManager_GetAvailableDevices(OH_AudioSessionManager *audioSessionManager, OH_AudioDevice_Usage deviceUsage, OH_AudioDeviceDescriptorArray **audioDeviceDescriptorArray)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取音频可选设备列表。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_registeravailabledeviceschangecallback">OH_AudioCommon_Result OH_AudioSessionManager_RegisterAvailableDevicesChangeCallback(OH_AudioSessionManager *audioSessionManager, OH_AudioDevice_Usage deviceUsage, OH_AudioSession_AvailableDeviceChangedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">注册可用设备更改回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_unregisteravailabledeviceschangecallback">OH_AudioCommon_Result OH_AudioSessionManager_UnregisterAvailableDevicesChangeCallback(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_AvailableDeviceChangedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">取消注册可用设备更改回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_selectmediainputdevice">OH_AudioCommon_Result OH_AudioSessionManager_SelectMediaInputDevice(OH_AudioSessionManager *audioSessionManager, OH_AudioDeviceDescriptor *deviceDescriptor)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>设置媒体输入设备。此功能不适用于呼叫录音，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_sourcetype">SourceType</a>为SOURCE_TYPE_VOICE_COMMUNICATION的场景不适用。</p> <p> 在存在更高优先级的并发录音流的场景中，应用程序实际使用的输入设备可能与所选设备不同。</p> <p> 应用程序可以使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_registercurrentinputdevicechangecallback">OH_AudioSessionManager_RegisterCurrentInputDeviceChangeCallback</a>注册一个回调来监听实际的输入设备。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_getselectedmediainputdevice">OH_AudioCommon_Result OH_AudioSessionManager_GetSelectedMediaInputDevice(OH_AudioSessionManager *audioSessionManager, OH_AudioDeviceDescriptor **audioDeviceDescriptor)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获得通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_selectmediainputdevice">OH_AudioSessionManager_SelectMediaInputDevice</a>设置的媒体输入设备。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_setbluetoothandnearlinkpreferredrecordcategory">OH_AudioCommon_Result OH_AudioSessionManager_SetBluetoothAndNearlinkPreferredRecordCategory(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_BluetoothAndNearlinkPreferredRecordCategory category)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>设置在使用蓝牙或星闪进行录音时，应用程序的设备偏好分类。应用程序可以在蓝牙或星闪连接之前设置此分类，系统将在设备连接时优先使用蓝牙或星闪进行录音。</p> <p> 在更高优先级的并发录音流的场景中，应用程序实际使用的输入设备可能与当前设置的偏好设备不同。</p> <p> 应用程序可以使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_registercurrentinputdevicechangecallback">OH_AudioSessionManager_RegisterCurrentInputDeviceChangeCallback</a>注册一个回调来监听实际的输入设备。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_getbluetoothandnearlinkpreferredrecordcategory">OH_AudioCommon_Result OH_AudioSessionManager_GetBluetoothAndNearlinkPreferredRecordCategory(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_BluetoothAndNearlinkPreferredRecordCategory *category)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取应用程序设置的在使用蓝牙或星闪进行录音时的设备偏好分类。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_registercurrentinputdevicechangecallback">OH_AudioCommon_Result OH_AudioSessionManager_RegisterCurrentInputDeviceChangeCallback(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_CurrentInputDeviceChangedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">注册音频会话管理器的输入设备更改回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_unregistercurrentinputdevicechangecallback">OH_AudioCommon_Result OH_AudioSessionManager_UnregisterCurrentInputDeviceChangeCallback(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_CurrentInputDeviceChangedCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">取消注册音频会话管理器的输入设备更改回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_releasedevice">OH_AudioCommon_Result OH_AudioSessionManager_ReleaseDevice(OH_AudioSessionManager *audioSessionManager, OH_AudioDeviceDescriptor *audioDeviceDescriptor)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">释放音频设备描述符对象。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 146px;"><h2 id="枚举类型说明" device-type="phone,2in1,tablet,wearable,tv">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection" style="contain-intrinsic-size: auto 650px;"><h3 id="oh_audiosession_concurrencymode" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_AudioSession_ConcurrencyMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_concurrencymode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AudioSession_ConcurrencyMode</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>音频并发模式。</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">CONCURRENCY_DEFAULT = 0</td> <td class="cellrowborder" width="50%">默认使用系统策略。</td> </tr> <tr><td class="cellrowborder" width="50%">CONCURRENCY_MIX_WITH_OTHERS = 1</td> <td class="cellrowborder" width="50%">和其它正在播放应用进行混音。</td> </tr> <tr><td class="cellrowborder" width="50%">CONCURRENCY_DUCK_OTHERS = 2</td> <td class="cellrowborder" width="50%">后来播放应用压低正在播放应用的音量。</td> </tr> <tr><td class="cellrowborder" width="50%">CONCURRENCY_PAUSE_OTHERS = 3</td> <td class="cellrowborder" width="50%">后来播放应用暂停正在播放应用。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 611px;"><h3 id="oh_audiosession_scene" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSession_Scene<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_scene" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AudioSession_Scene</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>音频会话场景。</p> <p><strong>起始版本：</strong> 20</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">AUDIO_SESSION_SCENE_MEDIA = 0</td> <td class="cellrowborder" width="50%">媒体音频会话场景。</td> </tr> <tr><td class="cellrowborder" width="50%">AUDIO_SESSION_SCENE_GAME = 1</td> <td class="cellrowborder" width="50%">游戏音频会话场景。</td> </tr> <tr><td class="cellrowborder" width="50%">AUDIO_SESSION_SCENE_VOICE_COMMUNICATION = 2</td> <td class="cellrowborder" width="50%">VoIP语音通话音频会话场景。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 848px;"><h3 id="oh_audiosession_statechangehint" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSession_StateChangeHint<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_statechangehint" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AudioSession_StateChangeHint</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>音频会话状态变更的提示信息。</p> <p><strong>起始版本：</strong> 20</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">AUDIO_SESSION_STATE_CHANGE_HINT_RESUME = 0</td> <td class="cellrowborder" width="50%">提示音频会话恢复，应用可主动触发开始渲染等相关操作。</td> </tr> <tr><td class="cellrowborder" width="50%">AUDIO_SESSION_STATE_CHANGE_HINT_PAUSE = 1</td> <td class="cellrowborder" width="50%">提示音频会话暂停，暂时失去音频焦点。当焦点再次可用时，会收到AUDIO_SESSION_STATE_CHANGE_HINT_RESUME事件。</td> </tr> <tr><td class="cellrowborder" width="50%">AUDIO_SESSION_STATE_CHANGE_HINT_STOP = 2</td> <td class="cellrowborder" width="50%">提示音频会话在焦点被抢占后停止，彻底失去音频焦点。</td> </tr> <tr><td class="cellrowborder" width="50%">AUDIO_SESSION_STATE_CHANGE_HINT_TIME_OUT_STOP = 3</td> <td class="cellrowborder" width="50%">提示长时间没有音频业务，音频会话将被系统停止，彻底失去音频焦点。</td> </tr> <tr><td class="cellrowborder" width="50%">AUDIO_SESSION_STATE_CHANGE_HINT_DUCK = 4</td> <td class="cellrowborder" width="50%">提示音频会话躲避开始，降低音量播放。</td> </tr> <tr><td class="cellrowborder" width="50%">AUDIO_SESSION_STATE_CHANGE_HINT_UNDUCK = 5</td> <td class="cellrowborder" width="50%">提示音频会话躲避结束，恢复音量播放。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 556px;"><h3 id="oh_audiosession_outputdevicechangerecommendedaction" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSession_OutputDeviceChangeRecommendedAction<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_outputdevicechangerecommendedaction" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AudioSession_OutputDeviceChangeRecommendedAction</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>输出设备变更后推荐的操作。</p> <p><strong>起始版本：</strong> 20</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">DEVICE_CHANGE_RECOMMEND_TO_CONTINUE = 0</td> <td class="cellrowborder" width="50%">推荐继续播放。</td> </tr> <tr><td class="cellrowborder" width="50%">DEVICE_CHANGE_RECOMMEND_TO_STOP = 1</td> <td class="cellrowborder" width="50%">推荐停止播放。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 556px;"><h3 id="oh_audiosession_deactivatedreason" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSession_DeactivatedReason<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_deactivatedreason" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AudioSession_DeactivatedReason</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>音频会话停用原因。</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">DEACTIVATED_LOWER_PRIORITY = 0</td> <td class="cellrowborder" width="50%">应用焦点被抢占。</td> </tr> <tr><td class="cellrowborder" width="50%">DEACTIVATED_TIMEOUT = 1</td> <td class="cellrowborder" width="50%">应用停流后超时。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 690px;"><h3 id="oh_audiosession_bluetoothandnearlinkpreferredrecordcategory" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSession_BluetoothAndNearlinkPreferredRecordCategory<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_bluetoothandnearlinkpreferredrecordcategory" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AudioSession_BluetoothAndNearlinkPreferredRecordCategory</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>在使用蓝牙或星闪进行录音时，应用程序的设备偏好分类。</p> <p><strong>起始版本：</strong> 21</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">PREFERRED_NONE = 0</td> <td class="cellrowborder" width="50%">无指定设备偏好。</td> </tr> <tr><td class="cellrowborder" width="50%">PREFERRED_DEFAULT = 1</td> <td class="cellrowborder" width="50%">更偏好使用蓝牙或星闪录音。是否使用低延迟或高质量录音取决于系统。</td> </tr> <tr><td class="cellrowborder" width="50%">PREFERRED_LOW_LATENCY = 2</td> <td class="cellrowborder" width="50%">更偏好使用蓝牙或星闪低延迟模式进行录音。</td> </tr> <tr><td class="cellrowborder" width="50%">PREFERRED_HIGH_QUALITY = 3</td> <td class="cellrowborder" width="50%">更偏好使用蓝牙或星闪高质量模式进行录音。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 146px;"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection" style="contain-intrinsic-size: auto 533px;"><h3 id="oh_audiosession_statechangedcallback" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_AudioSession_StateChangedCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_statechangedcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_AudioSession_StateChangedCallback)(OH_AudioSession_StateChangedEvent event)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>这个函数指针将指向用于监听音频会话状态变更事件的回调函数。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosession-statechangedevent">OH_AudioSession_StateChangedEvent</a> event</td> <td class="cellrowborder" width="50%">音频会话状态变更事件。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 652px;"><h3 id="oh_audiosession_availabledevicechangedcallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSession_AvailableDeviceChangedCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_availabledevicechangedcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_AudioSession_AvailableDeviceChangedCallback)(OH_AudioDevice_ChangeType type, OH_AudioDeviceDescriptorArray *audioDeviceDescriptorArray)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此函数指针将指向用于返回变化的音频设备描述符的回调函数，可能会返回多个音频设备描述符。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_changetype">OH_AudioDevice_ChangeType</a> type</td> <td class="cellrowborder" width="50%">设备连接状态类型，已连接或断开。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> *audioDeviceDescriptorArray</td> <td class="cellrowborder" width="50%"><p>音频设备描述符数组。</p> <p> 不再继续使用audioDeviceDescriptorArray指针时，请使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_releasedevices">OH_AudioSessionManager_ReleaseDevices</a>进行释放。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 652px;"><h3 id="oh_audiosession_currentinputdevicechangedcallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSession_CurrentInputDeviceChangedCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_currentinputdevicechangedcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_AudioSession_CurrentInputDeviceChangedCallback)(OH_AudioDeviceDescriptorArray *devices, OH_AudioStream_DeviceChangeReason changeReason)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>这个函数指针将指向用于监听当前输入设备变化事件的回调函数。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> *devices</td> <td class="cellrowborder" width="50%"><p>音频设备描述符数组。</p> <p> 不再继续使用devices指针时，请使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_releasedevices">OH_AudioSessionManager_ReleaseDevices</a>进行释放。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_devicechangereason">OH_AudioStream_DeviceChangeReason</a> changeReason</td> <td class="cellrowborder" width="50%">设备变更原因。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 851px;"><h3 id="oh_audiosession_currentoutputdevicechangedcallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSession_CurrentOutputDeviceChangedCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_currentoutputdevicechangedcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_AudioSession_CurrentOutputDeviceChangedCallback)(OH_AudioDeviceDescriptorArray *devices, OH_AudioStream_DeviceChangeReason changeReason, OH_AudioSession_OutputDeviceChangeRecommendedAction recommendedAction)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>这个函数指针将指向用于监听当前输出设备变化事件的回调函数。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> *devices</td> <td class="cellrowborder" width="50%">音频设备描述符数组，指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a>设置音频设备描述符值的指针变量，不要单独释放audioDeviceDescriptorArray指针，而是调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_releasedevices">OH_AudioSessionManager_ReleaseDevices</a>来释放DeviceDescriptor数组。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_devicechangereason">OH_AudioStream_DeviceChangeReason</a> changeReason</td> <td class="cellrowborder" width="50%">指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_devicechangereason">OH_AudioStream_DeviceChangeReason</a>，用于接收设备变更原因。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_outputdevicechangerecommendedaction">OH_AudioSession_OutputDeviceChangeRecommendedAction</a> recommendedAction</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_outputdevicechangerecommendedaction">OH_AudioSession_OutputDeviceChangeRecommendedAction</a>，用于接收设备变更后推荐的操作。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 549px;"><h3 id="oh_audiosession_deactivatedcallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSession_DeactivatedCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosession_deactivatedcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>typedef int32_t (*OH_AudioSession_DeactivatedCallback)(OH_AudioSession_DeactivatedEvent event)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>这个函数指针将指向用于监听音频会话停用事件的回调函数。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosession-deactivatedevent">OH_AudioSession_DeactivatedEvent</a> event</td> <td class="cellrowborder" width="50%">音频会话已停用事件。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 744px;"><h3 id="oh_audiomanager_getaudiosessionmanager" device-type="phone,2in1,tablet,wearable,tv">OH_AudioManager_GetAudioSessionManager()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiomanager_getaudiosessionmanager" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioManager_GetAudioSessionManager</span>(OH_AudioSessionManager **audioSessionManager)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取音频会话管理器。使用音频会话管理器相关功能，首先需要获取音频会话管理器实例。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> **audioSessionManager</td> <td class="cellrowborder" width="50%">音频会话管理器实例。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 943px;"><h3 id="oh_audiosessionmanager_activateaudiosession" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_ActivateAudioSession()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_activateaudiosession" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_ActivateAudioSession</span>(OH_AudioSessionManager *audioSessionManager, const OH_AudioSession_Strategy *strategy)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>激活音频会话。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosession-strategy">OH_AudioSession_Strategy</a> *strategy</td> <td class="cellrowborder" width="50%">指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosession-strategy">OH_AudioSession_Strategy</a>，用于设置音频会话策略。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>函数返回值：</p> <p> AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数strategy无效。</p> <p> AUDIOCOMMON_RESULT_ERROR_ILLEGAL_STATE：非法状态。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 840px;"><h3 id="oh_audiosessionmanager_deactivateaudiosession" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_DeactivateAudioSession()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_deactivateaudiosession" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_DeactivateAudioSession</span>(OH_AudioSessionManager *audioSessionManager)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>停用音频会话。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：参数audioSessionManager为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_ILLEGAL_STATE：非法状态。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 768px;"><h3 id="oh_audiosessionmanager_isaudiosessionactivated" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_IsAudioSessionActivated()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_isaudiosessionactivated" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>bool <span class="hljs-built_in">OH_AudioSessionManager_IsAudioSessionActivated</span>(OH_AudioSessionManager *audioSessionManager)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>检查音频会话是否已激活。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%">用于返回当前应用的音频会话是否已激活，true表示已激活，false表示已停用。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_audiosessionmanager_registersessiondeactivatedcallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_RegisterSessionDeactivatedCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_registersessiondeactivatedcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_RegisterSessionDeactivatedCallback</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_DeactivatedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册音频会话停用事件回调。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_deactivatedcallback">OH_AudioSession_DeactivatedCallback</a> callback</td> <td class="cellrowborder" width="50%">用于接收音频会话已停用事件。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数callback为nullptr。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_audiosessionmanager_unregistersessiondeactivatedcallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_UnregisterSessionDeactivatedCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_unregistersessiondeactivatedcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_UnregisterSessionDeactivatedCallback</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_DeactivatedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>取消注册音频会话停用事件回调。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_deactivatedcallback">OH_AudioSession_DeactivatedCallback</a> callback</td> <td class="cellrowborder" width="50%">用于接收音频会话已停用事件。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数callback为nullptr。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 967px;"><h3 id="oh_audiosessionmanager_setscene" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_SetScene()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_setscene" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_SetScene</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_Scene scene)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置音频会话场景参数。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_scene">OH_AudioSession_Scene</a> scene</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_scene">OH_AudioSession_Scene</a>要设置的音频会话场景。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数scene为枚举范围外的值。</p> <p> AUDIOCOMMON_RESULT_ERROR_ILLEGAL_STATE：系统当前状态下不允许设置，例如audio session未处于ready态。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 967px;"><h3 id="oh_audiosessionmanager_registerstatechangecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_RegisterStateChangeCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_registerstatechangecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_RegisterStateChangeCallback</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_StateChangedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册音频会话状态变更事件回调。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_statechangedcallback">OH_AudioSession_StateChangedCallback</a> callback</td> <td class="cellrowborder" width="50%">用于接收音频会话状态变更事件。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数callback为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_NO_MEMORY：系统内存申请异常。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 919px;"><h3 id="oh_audiosessionmanager_unregisterstatechangecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_UnregisterStateChangeCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_unregisterstatechangecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_UnregisterStateChangeCallback</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_StateChangedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>取消音频会话状态变更事件回调。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_statechangedcallback">OH_AudioSession_StateChangedCallback</a> callback</td> <td class="cellrowborder" width="50%">用于接收音频会话状态变更事件。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数callback为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1387px;"><h3 id="oh_audiosessionmanager_setdefaultoutputdevice" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_SetDefaultOutputDevice()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_setdefaultoutputdevice" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_SetDefaultOutputDevice</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioDevice_Type deviceType)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置默认本机内置发声设备。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>本接口适用范围如下：</p>  </div></div></div> <ul><li>当设置的<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_scene">OH_AudioSession_Scene</a>为VoIP场景时，激活AudioSession后立即生效。</li><li>如果<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_scene">OH_AudioSession_Scene</a>为非VoIP场景，激活AudioSession时不会生效。</li><li>直到启动播放的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_usage">OH_AudioStream_Usage</a>为语音消息、VoIP语音通话或VoIP视频通话时才生效。支持听筒、扬声器和系统默认设备。</li><li>本接口允许在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a>创建后随时调用。系统记录应用设置的默认本机内置发声设备，但只有激活AudioSession后才能生效。</li><li>应用启动播放时，若外接设备如蓝牙耳机或有线耳机已接入，系统优先从外接设备发声；否则，系统遵循应用设置的默认本机内置发声设备。</li><li>本接口优先级低于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ohos-multimedia-avcastpicker#avcastpicker">AVCastPicker</a>。如果使用AVCastPicker切换过发声设备，再次调用本接口切换设备将不生效。</li></ul> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_type">OH_AudioDevice_Type</a> deviceType</td> <td class="cellrowborder" width="50%"><p>指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_type">OH_AudioDevice_Type</a>用于设置发声设备类型。可设置的设备类型包括：</p> <p> AUDIO_DEVICE_TYPE_EARPIECE：听筒。</p> <p> AUDIO_DEVICE_TYPE_SPEAKER：扬声器。</p> <p> AUDIO_DEVICE_TYPE_DEFAULT：系统默认设备。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数deviceType超出枚举OH_AudioDevice_Type范围。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1039px;"><h3 id="oh_audiosessionmanager_getdefaultoutputdevice" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_GetDefaultOutputDevice()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_getdefaultoutputdevice" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_GetDefaultOutputDevice</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioDevice_Type *deviceType)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_setdefaultoutputdevice">OH_AudioSessionManager_SetDefaultOutputDevice</a>设置的默认发声设备。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_type">OH_AudioDevice_Type</a> *deviceType</td> <td class="cellrowborder" width="50%"><p>指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_type">OH_AudioDevice_Type</a>用于获取发声设备类型参数指针。返回的设备类型包括：</p> <p> AUDIO_DEVICE_TYPE_EARPIECE：听筒。</p> <p> AUDIO_DEVICE_TYPE_SPEAKER：扬声器。</p> <p> AUDIO_DEVICE_TYPE_DEFAULT：系统默认设备。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数deviceType为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_ILLEGAL_STATE：系统当前状态下不允许获取默认设备类型，例如audio session未处于ready态。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 895px;"><h3 id="oh_audiosessionmanager_releasedevices" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_ReleaseDevices()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_releasedevices" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_ReleaseDevices</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioDeviceDescriptorArray *audioDeviceDescriptorArray)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>释放音频设备描述符数组对象。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> *audioDeviceDescriptorArray</td> <td class="cellrowborder" width="50%">需要释放的音频设备描述符数组。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数audioDeviceDescriptorArray为nullptr。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 991px;"><h3 id="oh_audiosessionmanager_registercurrentoutputdevicechangecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_RegisterCurrentOutputDeviceChangeCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_registercurrentoutputdevicechangecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_RegisterCurrentOutputDeviceChangeCallback</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_CurrentOutputDeviceChangedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册当前输出设备变化回调。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_currentoutputdevicechangedcallback">OH_AudioSession_CurrentOutputDeviceChangedCallback</a> callback</td> <td class="cellrowborder" width="50%">用于返回音频设备变更信息的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.31.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数callback为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_NO_MEMORY：系统内存申请异常。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 943px;"><h3 id="oh_audiosessionmanager_unregistercurrentoutputdevicechangecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_UnregisterCurrentOutputDeviceChangeCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_unregistercurrentoutputdevicechangecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_UnregisterCurrentOutputDeviceChangeCallback</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_CurrentOutputDeviceChangedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>取消注册当前输出设备变化回调。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_currentoutputdevicechangedcallback">OH_AudioSession_CurrentOutputDeviceChangedCallback</a> callback</td> <td class="cellrowborder" width="50%">用于返回音频设备变更信息的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数callback为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1046px;"><h3 id="oh_audiosessionmanager_getavailabledevices" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_GetAvailableDevices()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_getavailabledevices" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_GetAvailableDevices</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioDevice_Usage deviceUsage, OH_AudioDeviceDescriptorArray **audioDeviceDescriptorArray)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取音频可选设备列表。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_usage">OH_AudioDevice_Usage</a> deviceUsage</td> <td class="cellrowborder" width="50%">用于设置要获取的设备种类。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptorarray">OH_AudioDeviceDescriptorArray</a> **audioDeviceDescriptorArray</td> <td class="cellrowborder" width="50%"><p>音频设备描述符数组。</p> <p> 不再继续使用audioDeviceDescriptorArray指针时，请使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_releasedevices">OH_AudioSessionManager_ReleaseDevices</a>进行释放。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1.参数audioSessionManager为nullptr；</p> <p> 2.参数deviceUsage无效;</p> <p> 3.参数audioDeviceDescriptorArray为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1022px;"><h3 id="oh_audiosessionmanager_registeravailabledeviceschangecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_RegisterAvailableDevicesChangeCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_registeravailabledeviceschangecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_RegisterAvailableDevicesChangeCallback</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioDevice_Usage deviceUsage, OH_AudioSession_AvailableDeviceChangedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册可用设备更改回调。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-device-base-h#oh_audiodevice_usage">OH_AudioDevice_Usage</a> deviceUsage</td> <td class="cellrowborder" width="50%">用于设置要获取的设备种类。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_availabledevicechangedcallback">OH_AudioSession_AvailableDeviceChangedCallback</a> callback</td> <td class="cellrowborder" width="50%">用于返回可用音频设备变更信息的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数deviceUsage无效；</p> <p> 3. 参数callback为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 943px;"><h3 id="oh_audiosessionmanager_unregisteravailabledeviceschangecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_UnregisterAvailableDevicesChangeCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_unregisteravailabledeviceschangecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_UnregisterAvailableDevicesChangeCallback</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_AvailableDeviceChangedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>取消注册可用设备更改回调。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_availabledevicechangedcallback">OH_AudioSession_AvailableDeviceChangedCallback</a> callback</td> <td class="cellrowborder" width="50%">用于返回可用音频设备变更信息的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数callback为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1087px;"><h3 id="oh_audiosessionmanager_selectmediainputdevice" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_SelectMediaInputDevice()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_selectmediainputdevice" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_SelectMediaInputDevice</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioDeviceDescriptor *deviceDescriptor)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置媒体输入设备。此功能不适用于呼叫录音，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audiostream-base-h#oh_audiostream_sourcetype">SourceType</a>为SOURCE_TYPE_VOICE_COMMUNICATION的场景不适用。</p> <p> 在存在更高优先级的并发录音流的场景中，应用程序实际使用的输入设备可能与所选设备不同。</p> <p> 应用程序可以使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_registercurrentinputdevicechangecallback">OH_AudioSessionManager_RegisterCurrentInputDeviceChangeCallback</a>注册一个回调来监听实际的输入设备。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptor">OH_AudioDeviceDescriptor</a> *deviceDescriptor</td> <td class="cellrowborder" width="50%"><p>目标设备。可用设备必须位于由<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_getavailabledevices">OH_AudioSessionManager_GetAvailableDevices</a>返回的数组中。</p> <p> 当传递nullptr时，系统将清除上一次的设置。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：参数audioSessionManager为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1015px;"><h3 id="oh_audiosessionmanager_getselectedmediainputdevice" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_GetSelectedMediaInputDevice()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_getselectedmediainputdevice" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_GetSelectedMediaInputDevice</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioDeviceDescriptor **audioDeviceDescriptor)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获得通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_selectmediainputdevice">OH_AudioSessionManager_SelectMediaInputDevice</a>设置的媒体输入设备。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptor">OH_AudioDeviceDescriptor</a> **audioDeviceDescriptor</td> <td class="cellrowborder" width="50%"><p>通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_selectmediainputdevice">OH_AudioSessionManager_SelectMediaInputDevice</a>设置的媒体设备，如果没有设置，返回一个类型为AUDIO_DEVICE_TYPE_INVALID的设备。</p> <p> 不再继续使用audioDeviceDescriptor指针时，请使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_releasedevice">OH_AudioSessionManager_ReleaseDevice</a>进行释放。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数audioDeviceDescriptor为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1087px;"><h3 id="oh_audiosessionmanager_setbluetoothandnearlinkpreferredrecordcategory" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_SetBluetoothAndNearlinkPreferredRecordCategory()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_setbluetoothandnearlinkpreferredrecordcategory" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_SetBluetoothAndNearlinkPreferredRecordCategory</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_BluetoothAndNearlinkPreferredRecordCategory category)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置在使用蓝牙或星闪进行录音时，应用程序的设备偏好分类。应用程序可以在蓝牙或星闪连接之前设置此分类，系统将在设备连接时优先使用蓝牙或星闪进行录音。</p> <p> 在更高优先级的并发录音流的场景中，应用程序实际使用的输入设备可能与当前设置的偏好设备不同。</p> <p> 应用程序可以使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosessionmanager_registercurrentinputdevicechangecallback">OH_AudioSessionManager_RegisterCurrentInputDeviceChangeCallback</a>注册一个回调来监听实际的输入设备。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_bluetoothandnearlinkpreferredrecordcategory">OH_AudioSession_BluetoothAndNearlinkPreferredRecordCategory</a> category</td> <td class="cellrowborder" width="50%">在使用蓝牙或星闪进行录音时，应用程序的设备偏好分类。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数category错误。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 943px;"><h3 id="oh_audiosessionmanager_getbluetoothandnearlinkpreferredrecordcategory" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_GetBluetoothAndNearlinkPreferredRecordCategory()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_getbluetoothandnearlinkpreferredrecordcategory" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_GetBluetoothAndNearlinkPreferredRecordCategory</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_BluetoothAndNearlinkPreferredRecordCategory *category)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取应用程序设置的在使用蓝牙或星闪进行录音时的设备偏好分类。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_bluetoothandnearlinkpreferredrecordcategory">OH_AudioSession_BluetoothAndNearlinkPreferredRecordCategory</a> *category</td> <td class="cellrowborder" width="50%">在使用蓝牙或星闪进行录音时，应用程序的设备偏好分类。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数category为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 991px;"><h3 id="oh_audiosessionmanager_registercurrentinputdevicechangecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_RegisterCurrentInputDeviceChangeCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_registercurrentinputdevicechangecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_RegisterCurrentInputDeviceChangeCallback</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_CurrentInputDeviceChangedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册音频会话管理器的输入设备更改回调。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_currentinputdevicechangedcallback">OH_AudioSession_CurrentInputDeviceChangedCallback</a> callback</td> <td class="cellrowborder" width="50%">用于返回音频输入设备变更信息的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数callback为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_NO_MEMORY：内存不足。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 943px;"><h3 id="oh_audiosessionmanager_unregistercurrentinputdevicechangecallback" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_UnregisterCurrentInputDeviceChangeCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_unregistercurrentinputdevicechangecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_UnregisterCurrentInputDeviceChangeCallback</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioSession_CurrentInputDeviceChangedCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>取消注册音频会话管理器的输入设备更改回调。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiosession_currentinputdevicechangedcallback">OH_AudioSession_CurrentInputDeviceChangedCallback</a> callback</td> <td class="cellrowborder" width="50%">用于返回音频输入设备变更信息的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数callback为nullptr。</p> <p> AUDIOCOMMON_RESULT_ERROR_SYSTEM：系统异常，例如系统服务异常退出等。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 871px;"><h3 id="oh_audiosessionmanager_releasedevice" device-type="phone,2in1,tablet,wearable,tv">OH_AudioSessionManager_ReleaseDevice()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiosessionmanager_releasedevice" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-snw-c106="" class="highlight-div"><div _ngcontent-snw-c106="" class="highlight-div-header"><div _ngcontent-snw-c106="" class="highlight-div-header-left"><div _ngcontent-snw-c106="" class="handle-button expand-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-snw-c106="" class="highlight-div-header-right"><div _ngcontent-snw-c106="" class="handle-button ai-button"></div><div _ngcontent-snw-c106="" class="handle-button line-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-snw-c106="" class="handle-button theme-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-snw-c106="" class="handle-button copy-button"><div _ngcontent-snw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-snw-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AudioCommon_Result <span class="hljs-built_in">OH_AudioSessionManager_ReleaseDevice</span>(OH_AudioSessionManager *audioSessionManager, OH_AudioDeviceDescriptor *audioDeviceDescriptor)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>释放音频设备描述符对象。</p> <p><strong>起始版本：</strong> 21</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiosessionmanager">OH_AudioSessionManager</a> *audioSessionManager</td> <td class="cellrowborder" width="50%">指向<a href="/consumer/cn/doc/harmonyos-references/capi-native-audio-session-manager-h#oh_audiomanager_getaudiosessionmanager">OH_AudioManager_GetAudioSessionManager</a>创建的音频会话管理实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohaudio-oh-audiodevicedescriptor">OH_AudioDeviceDescriptor</a> *audioDeviceDescriptor</td> <td class="cellrowborder" width="50%">需要被释放的音频设备描述符对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-audio-common-h#oh_audiocommon_result">OH_AudioCommon_Result</a></td> <td class="cellrowborder" width="50%"><p>AUDIOCOMMON_RESULT_SUCCESS：函数执行成功。</p> <p> AUDIOCOMMON_RESULT_ERROR_INVALID_PARAM：</p> <p> 1. 参数audioSessionManager为nullptr；</p> <p> 2. 参数audioDeviceDescriptor为nullptr。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>