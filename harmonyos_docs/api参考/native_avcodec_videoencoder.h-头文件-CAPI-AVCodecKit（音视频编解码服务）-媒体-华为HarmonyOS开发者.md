<h1 _ngcontent-bmj-c119="" class="doc-title ng-star-inserted" title="native_avcodec_videoencoder.h"> native_avcodec_videoencoder.h </h1>

<div _ngcontent-bmj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div class="tiledSection">     <h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>声明用于视频编码的接口。</p>     <p><strong>引用文件：</strong> &lt;multimedia/player_framework/native_avcodec_videoencoder.h&gt;</p>     <p><strong>库：</strong> libnative_media_venc.so</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-videoencoder">VideoEncoder</a></p>     <p><strong>相关示例：</strong> <a href="https://gitcode.com/openharmony/applications_app_samples/tree/master/code/BasicFeature/Media/AVCodec" target="_blank">AVCodec</a></p>     <p>接口在每个版本，对每种模式的支持情况说明，如下图所示。</p>     <p><span><img originheight="307" originwidth="541" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115211.68846315699240967083729069004736:50001231000000:2800:9BEFA536F2B85CD9C4FE55D90EC55DD8A8574C80B2FBD64A455B5189461ECBE4.png" width="541" height="307"></span></p>     <p><span><img originheight="2008" originwidth="3320" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115211.79809259634554024193725803120618:50001231000000:2800:F7555FC2436F95C9F75A41EA929E28DC044C634D879EC9D65A5522A145B75AA5.png" width="920" height="556.433734939759"></span></p>    </div>    <div class="tiledSection">     <h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="枚举" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencodebitratemode">OH_VideoEncodeBitrateMode</a></td>         <td class="cellrowborder" width="33.33333333333333%">OH_VideoEncodeBitrateMode</td>         <td class="cellrowborder" width="33.33333333333333%">视频编码器的码率控制模式。(API14废弃)</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_onneedinputparameter">typedef void (*OH_VideoEncoder_OnNeedInputParameter)(OH_AVCodec *codec, uint32_t index, OH_AVFormat *parameter, void *userData)</a></td>         <td class="cellrowborder" width="33.33333333333333%">OH_VideoEncoder_OnNeedInputParameter</td>         <td class="cellrowborder" width="33.33333333333333%">配置随帧参数，当需要设置index对应帧的编码参数时，可以通过该接口设置。只在Surface模式生效。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_createbymime">OH_AVCodec *OH_VideoEncoder_CreateByMime(const char *mime)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">根据MIME类型创建视频编码器实例，推荐使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_createbyname">OH_AVCodec *OH_VideoEncoder_CreateByName(const char *name)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">根据视频编码器名称创建视频编码器实例。使用此接口的前提是知道编码器的确切名称，编码器的名称可以通过能力查询获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_destroy">OH_AVErrCode OH_VideoEncoder_Destroy(OH_AVCodec *codec)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">清理编码器内部资源，销毁编码器实例。不能重复销毁。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_setcallback">OH_AVErrCode OH_VideoEncoder_SetCallback(OH_AVCodec *codec, OH_AVCodecAsyncCallback callback, void *userData)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">设置OH_AVCodecCallback回调函数，让应用可以响应视频编码器生成的事件。在调用OH_VideoEncoder_Prepare接口之前，必须调用此接口。(API11废弃)</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_registercallback">OH_AVErrCode OH_VideoEncoder_RegisterCallback(OH_AVCodec *codec, OH_AVCodecCallback callback, void *userData)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">注册OH_AVCodecCallback回调函数，让应用可以响应视频编码器生成的事件。在调用OH_VideoEncoder_Prepare接口之前，必须调用此接口。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_registerparametercallback">OH_AVErrCode OH_VideoEncoder_RegisterParameterCallback(OH_AVCodec *codec, OH_VideoEncoder_OnNeedInputParameter onInputParameter, void *userData)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>注册OH_AVCodecCallback输入参数回调函数，让应用可以响应视频编码器生成的事件。编码Surface模式，需要设置随帧参数时，须使用该接口。</p>          <p>如果使用该接口，必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_configure">OH_VideoEncoder_Configure</a>之前调用该接口。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_configure">OH_AVErrCode OH_VideoEncoder_Configure(OH_AVCodec *codec, OH_AVFormat *format)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">配置视频编码器的编码参数，通常需要配置要编码的视频轨的描述信息，如宽、高、像素格式等。必须在调用OH_VideoEncoder_Prepare接口之前，调用此接口。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_prepare">OH_AVErrCode OH_VideoEncoder_Prepare(OH_AVCodec *codec)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">准备编码器的内部资源，在OH_VideoEncoder_Configure接口后调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_start">OH_AVErrCode OH_VideoEncoder_Start(OH_AVCodec *codec)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_prepare">OH_VideoEncoder_Prepare</a>接口成功后调用此接口启动编码器。成功启动后，编码器将开始报告注册的回调事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_stop">OH_AVErrCode OH_VideoEncoder_Stop(OH_AVCodec *codec)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">停止编码器，释放输入输出buffer。停止之后，可以通过调用OH_VideoEncoder_Start接口重新进入Running状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_flush">OH_AVErrCode OH_VideoEncoder_Flush(OH_AVCodec *codec)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>清除编码器中缓存的输入和输出数据及参数集如H.264格式的PPS/SPS。</p>          <p>调用此接口后，以前通过异步回调上报的所有缓冲区index都将失效，请确保不要访问这些index对应的缓冲区。该接口不能连续调用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_reset">OH_AVErrCode OH_VideoEncoder_Reset(OH_AVCodec *codec)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">重置编码器，编码器回到初始化状态。如果要继续编码，需要再次调用OH_VideoEncoder_Configure接口配置编码器实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_getoutputdescription">OH_AVFormat *OH_VideoEncoder_GetOutputDescription(OH_AVCodec *codec)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>获取编码器输出数据的OH_AVFormat信息。</p>          <p>需要注意的是，返回值指向的OH_AVFormat实例的生命周期需要开发者通过调用接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_destroy">OH_AVFormat_Destroy</a>释放。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_setparameter">OH_AVErrCode OH_VideoEncoder_SetParameter(OH_AVCodec *codec, OH_AVFormat *format)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>在编码器运行时设置编码器参数。</p>          <p>注意，此接口只有在编码器启动后才能调用。同时，不正确的参数设置可能会导致编码失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_getsurface">OH_AVErrCode OH_VideoEncoder_GetSurface(OH_AVCodec *codec, OHNativeWindow **window)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">从视频编码器获取输入surface，必须在调用OH_VideoEncoder_Configure接口之后OH_VideoEncoder_Prepare接口之前调用此接口。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_freeoutputdata">OH_AVErrCode OH_VideoEncoder_FreeOutputData(OH_AVCodec *codec, uint32_t index)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">将处理后的输出缓冲区返回给编码器。(API11废弃)</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_notifyendofstream">OH_AVErrCode OH_VideoEncoder_NotifyEndOfStream(OH_AVCodec *codec)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">通知视频编码器输入流已结束。建议使用此接口进行通知。该接口只在Surface模式下使用，Buffer模式通过OH_AVBuffer携带EOS信息，通知输入流的结束。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_pushinputdata">OH_AVErrCode OH_VideoEncoder_PushInputData(OH_AVCodec *codec, uint32_t index, OH_AVCodecBufferAttr attr)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">将填入数据的输入缓冲区提交给视频编码器。(API11废弃)</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_pushinputbuffer">OH_AVErrCode OH_VideoEncoder_PushInputBuffer(OH_AVCodec *codec, uint32_t index)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">Buffer模式下，将index对应的OH_AVBuffer送入编码器编码。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_pushinputparameter">OH_AVErrCode OH_VideoEncoder_PushInputParameter(OH_AVCodec *codec, uint32_t index)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">Surface模式下，将index对应帧的编码参数送入编码器编码。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_freeoutputbuffer">OH_AVErrCode OH_VideoEncoder_FreeOutputBuffer(OH_AVCodec *codec, uint32_t index)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">将处理后的index对应的OH_AVBuffer退回给编码器。开发者使用完需要及时调用此接口释放输出缓存区，否则会阻塞编码流程。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_getinputdescription">OH_AVFormat *OH_VideoEncoder_GetInputDescription(OH_AVCodec *codec)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>编码器接收到的图像的描述信息。调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_configure">OH_VideoEncoder_Configure</a>后调用此接口。</p>          <p>需要注意的是，返回指针所指向的OH_AVFormat实例的生命周期需要由开发者通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_destroy">OH_AVFormat_Destroy</a>接口释放。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_isvalid">OH_AVErrCode OH_VideoEncoder_IsValid(OH_AVCodec *codec, bool *isValid)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">在编码器实例存在的情况下，检查当前编码器服务是否有效。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_queryinputbuffer">OH_AVErrCode OH_VideoEncoder_QueryInputBuffer(struct OH_AVCodec *codec, uint32_t *index, int64_t timeoutUs)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>查询下一个可用输入缓冲区的索引。</p>          <p>调用此接口后需要接着调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_getinputbuffer">OH_VideoEncoder_GetInputBuffer</a>接口获取缓冲区实例，并通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_pushinputbuffer">OH_VideoEncoder_PushInputBuffer</a>接口传递给编码器。</p>          <p>需要注意的是，上述操作仅在同步模式下支持。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_getinputbuffer">OH_AVBuffer *OH_VideoEncoder_GetInputBuffer(struct OH_AVCodec *codec, uint32_t index)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>获取可用输入缓冲区的实例。</p>          <p>需要注意的是，此接口仅适用于同步模式。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_queryoutputbuffer">OH_AVErrCode OH_VideoEncoder_QueryOutputBuffer(struct OH_AVCodec *codec, uint32_t *index, int64_t timeoutUs)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>查询下一个可用输出缓冲区的索引。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_getoutputbuffer">OH_VideoEncoder_GetOutputBuffer</a>接口获取的缓冲区实例可以通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_freeoutputbuffer">OH_VideoEncoder_FreeOutputBuffer</a>接口将处理后的输出缓冲区返回到编码器。</p>          <p>需要注意的是，上述操作仅在同步模式下支持。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_getoutputbuffer">OH_AVBuffer *OH_VideoEncoder_GetOutputBuffer(struct OH_AVCodec *codec, uint32_t index)</a></td>         <td class="cellrowborder" width="33.33333333333333%">-</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>获取可用输出缓冲区的实例。</p>          <p>需要注意的是，此接口仅适用于同步模式。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="枚举类型说明" device-type="phone,2in1,tablet,wearable,tv">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="oh_videoencodebitratemode" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_VideoEncodeBitrateMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencodebitratemode" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_VideoEncodeBitrateMode</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>视频编码器的码率控制模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>废弃版本：</strong> 14</p>     <p><strong>替代接口：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_bitratemode">OH_BitrateMode</a></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">枚举项</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%">CBR = 0</td>         <td class="cellrowborder" width="50%">          <p>恒定码率模式。</p>          <p><strong>废弃版本：</strong> 14</p>          <p><strong>替代接口：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_bitratemode">BITRATE_MODE_CBR</a></p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">VBR = 1</td>         <td class="cellrowborder" width="50%">          <p>可变码率模式。</p>          <p><strong>废弃版本：</strong> 14</p>          <p><strong>替代接口：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_bitratemode">BITRATE_MODE_VBR</a></p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">CQ = 2</td>         <td class="cellrowborder" width="50%">          <p>恒定QP模式。</p>          <p><strong>废弃版本：</strong> 14</p>          <p><strong>替代接口：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_bitratemode">BITRATE_MODE_CQ</a></p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection">     <h3 id="oh_videoencoder_onneedinputparameter" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_VideoEncoder_OnNeedInputParameter()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_onneedinputparameter" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*OH_VideoEncoder_OnNeedInputParameter)</span><span class="hljs-params">(OH_AVCodec *codec, <span class="hljs-type">uint32_t</span> index, OH_AVFormat *parameter, <span class="hljs-type">void</span> *userData)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>配置随帧参数，当需要设置index对应帧的编码参数时，可以通过该接口设置。只在Surface模式生效。</p>     <p>该接口只能在Surface模式下使用，使用前需要调用OH_VideoEncoder_RegisterParameterCallback接口注册。</p>     <p>在Buffer模式下，OH_AVBuffer可以直接携带帧的编码参数，当前可以支持的随帧参数有帧级QPMin/QPMax，指定LTR设置参考帧。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint32_t index</td>         <td class="cellrowborder" width="50%">对应编码帧的index。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">OH_AVFormat</a> *parameter</td>         <td class="cellrowborder" width="50%">编码参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">开发者执行回调所依赖的数据。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_createbymime" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_CreateByMime()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_createbymime" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVCodec *<span class="hljs-title">OH_VideoEncoder_CreateByMime</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *mime)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>根据MIME类型创建视频编码器实例，推荐使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%">const char *mime</td>         <td class="cellrowborder" width="50%">MIME类型描述字符串，请参阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">AVCODEC_MIME_TYPE</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *</td>         <td class="cellrowborder" width="50%">          <p>成功则返回一个指向视频编码实例的指针。</p>          <p>如果输入为不支持的编码器类型或内存不足时，则返回NULL。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_createbyname" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_CreateByName()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_createbyname" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVCodec *<span class="hljs-title">OH_VideoEncoder_CreateByName</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *name)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>根据视频编码器名称创建视频编码器实例。使用此接口的前提是知道编码器的确切名称，编码器的名称可以通过能力查询获取。</p>     <p>详情请参见：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/obtain-supported-codecs#创建指定名称的编解码器" target="_blank">获取支持的编解码能力</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%">const char *name</td>         <td class="cellrowborder" width="50%">视频编码器名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *</td>         <td class="cellrowborder" width="50%">          <p>成功则返回一个指向视频编码实例的指针。</p>          <p>如果输入是不支持编码器名称或者内存资源不足，则返回NULL。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_destroy" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_Destroy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_destroy" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_Destroy</span>(OH_AVCodec *codec)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>清理编码器内部资源，销毁编码器实例。不能重复销毁。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_setcallback" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_SetCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_setcallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_VideoEncoder_SetCallback</span><span class="hljs-params">(OH_AVCodec *codec, OH_AVCodecAsyncCallback callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置OH_AVCodecCallback回调函数，让应用可以响应视频编码器生成的事件。在调用OH_VideoEncoder_Prepare接口之前，必须调用此接口。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>废弃版本：</strong> 11</p>     <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_registercallback">OH_VideoEncoder_RegisterCallback</a></p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodecasynccallback">OH_AVCodecAsyncCallback</a> callback</td>         <td class="cellrowborder" width="50%">所有回调函数的集合。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">开发者执行回调所依赖的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_registercallback" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_RegisterCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_registercallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_VideoEncoder_RegisterCallback</span><span class="hljs-params">(OH_AVCodec *codec, OH_AVCodecCallback callback, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>注册OH_AVCodecCallback回调函数，让应用可以响应视频编码器生成的事件。在调用OH_VideoEncoder_Prepare接口之前，必须调用此接口。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 11</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodecasynccallback">OH_AVCodecCallback</a> callback</td>         <td class="cellrowborder" width="50%">所有回调函数的集合。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">开发者执行回调所依赖的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_registerparametercallback" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_RegisterParameterCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_registerparametercallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-title function_">OH_VideoEncoder_RegisterParameterCallback</span><span class="hljs-params">(OH_AVCodec *codec, OH_VideoEncoder_OnNeedInputParameter onInputParameter, <span class="hljs-keyword">void</span> *userData)</span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>注册OH_AVCodecCallback输入参数回调函数，让应用可以响应视频编码器生成的事件。编码Surface模式，需要设置随帧参数时，须使用该接口。</p>     <p>如果使用该接口，必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_configure">OH_VideoEncoder_Configure</a>之前调用该接口。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_onneedinputparameter">OH_VideoEncoder_OnNeedInputParameter</a> onInputParameter</td>         <td class="cellrowborder" width="50%">输入参数回调指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">开发者执行回调所依赖的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：本接口必须在OH_VideoEncoder_Prepare接口前调用，如果在其他状态时调用，则返回此错误码。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_configure" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_Configure()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_configure" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_Configure</span>(OH_AVCodec *codec, OH_AVFormat *format)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>配置视频编码器的编码参数，通常需要配置要编码的视频轨的描述信息，如宽、高、像素格式等。必须在调用OH_VideoEncoder_Prepare接口之前，调用此接口。</p>     <p>该接口对配置参数进行合法性校验，部分非法参数不会强校验，使用默认值或直接丢弃。部分非法参数会强校验，具体规则如下：</p>     <p>以下参数的配置范围可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/obtain-supported-codecs" target="_blank">能力查询</a>获取，OH_MD_KEY_I_FRAME_INTERVAL暂不支持。</p>     <p>设置OH_MD_KEY_VIDEO_ENCODER_ENABLE_TEMPORAL_SCALABILITY、OH_MD_KEY_VIDEO_ENCODER_LTR_FRAME_COUNT接口时如果当前平台不支持，不报错，走正常编码流程。</p>     <p>参数校验：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.1" width="25%">Key</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.2" width="25%">配置正常范围的值</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.3" width="25%">配置超出范围的值</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.4" width="25%">不配置该参数</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">OH_MD_KEY_WIDTH</td>         <td class="cellrowborder" width="25%">AV_ERR_OK</td>         <td class="cellrowborder" width="25%">AV_ERR_INVALID_VAL</td>         <td class="cellrowborder" width="25%">AV_ERR_INVALID_VAL</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">OH_MD_KEY_HEIGHT</td>         <td class="cellrowborder" width="25%">AV_ERR_OK</td>         <td class="cellrowborder" width="25%">AV_ERR_INVALID_VAL</td>         <td class="cellrowborder" width="25%">AV_ERR_INVALID_VAL</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">OH_MD_KEY_PIXEL_FORMAT 请参阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avpixelformat">OH_AVPixelFormat</a></td>         <td class="cellrowborder" width="25%">AV_ERR_OK</td>         <td class="cellrowborder" width="25%">AV_ERR_UNSUPPORT</td>         <td class="cellrowborder" width="25%">AV_ERR_OK</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">OH_MD_KEY_FRAME_RATE</td>         <td class="cellrowborder" width="25%">AV_ERR_OK</td>         <td class="cellrowborder" width="25%">AV_ERR_INVALID_VAL</td>         <td class="cellrowborder" width="25%">AV_ERR_OK</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">OH_MD_KEY_PROFILE 请参阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">OH_MD_KEY_PROFILE</a></td>         <td class="cellrowborder" width="25%">AV_ERR_OK</td>         <td class="cellrowborder" width="25%">AV_ERR_INVALID_VAL</td>         <td class="cellrowborder" width="25%">AV_ERR_OK</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">OH_MD_KEY_I_FRAME_INTERVAL</td>         <td class="cellrowborder" width="25%">AV_ERR_OK</td>         <td class="cellrowborder" width="25%">\</td>         <td class="cellrowborder" width="25%">AV_ERR_OK</td>        </tr>             </tbody></table></div>     </div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.6.1.1" width="20%">          <p>OH_MD_KEY_</p>          <p>BITRATE</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.6.1.2" width="20%">          <p>OH_MD_KEY_</p>          <p>QUALITY</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.6.1.3" width="20%">          <p>OH_MD_KEY_</p>          <p>VIDEO_ENCODER_BITRATE_MODE</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.6.1.4" width="20%">返回值</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">AV_ERR_OK</td>         <td class="cellrowborder" width="20%">使用编码器默认值</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">超出范围</td>         <td class="cellrowborder" width="20%">超出范围</td>         <td class="cellrowborder" width="20%">不支持的模式</td>         <td class="cellrowborder" width="20%">AV_ERR_INVALID_VAL</td>         <td class="cellrowborder" width="20%">异常值均报错</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">正常值</td>         <td class="cellrowborder" width="20%">正常值</td>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">AV_ERR_INVALID_VAL</td>         <td class="cellrowborder" width="20%">Bitrate 与 Quality 冲突</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">正常值</td>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">AV_ERR_OK</td>         <td class="cellrowborder" width="20%">使能默认码控模式</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">正常值</td>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">BITRATE_MODE_VBR、BITRATE_MODE_CBR</td>         <td class="cellrowborder" width="20%">AV_ERR_OK</td>         <td class="cellrowborder" width="20%"></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">正常值</td>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">BITRATE_MODE_CQ</td>         <td class="cellrowborder" width="20%">AV_ERR_INVALID_VAL</td>         <td class="cellrowborder" width="20%">Bitrate 与 CQ 模式冲突</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">正常值</td>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">AV_ERR_OK</td>         <td class="cellrowborder" width="20%">使能 CQ 模式</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">正常值</td>         <td class="cellrowborder" width="20%">BITRATE_MODE_CQ</td>         <td class="cellrowborder" width="20%">AV_ERR_OK</td>         <td class="cellrowborder" width="20%"></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">正常值</td>         <td class="cellrowborder" width="20%">BITRATE_MODE_VBR、BITRATE_MODE_CBR</td>         <td class="cellrowborder" width="20%">AV_ERR_INVALID_VAL</td>         <td class="cellrowborder" width="20%">Quality 与 VBR、CBR 模式冲突</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">BITRATE_MODE_VBR、BITRATE_MODE_CBR</td>         <td class="cellrowborder" width="20%">AV_ERR_OK</td>         <td class="cellrowborder" width="20%">使用编码器默认码率</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">\</td>         <td class="cellrowborder" width="20%">BITRATE_MODE_CQ</td>         <td class="cellrowborder" width="20%">AV_ERR_OK</td>         <td class="cellrowborder" width="20%">使用默认quality</td>        </tr>             </tbody></table></div>     </div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.14.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.14.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">OH_AVFormat</a> *format</td>         <td class="cellrowborder" width="50%">指向OH_AVFormat的指针，用于给出要编码的视频轨的描述。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.16.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.16.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：1. 输入的codec指针为非编码器实例，或者为空指针；2. 输入format参数不支持。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：本接口必须在OH_VideoEncoder_Prepare接口前调用，如果在其他状态时调用，则返回此错误码。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_prepare" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_Prepare()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_prepare" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_Prepare</span>(OH_AVCodec *codec)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>准备编码器的内部资源，在OH_VideoEncoder_Configure接口后调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_start" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_Start()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_start" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_Start</span>(OH_AVCodec *codec)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_prepare">OH_VideoEncoder_Prepare</a>接口成功后调用此接口启动编码器。成功启动后，编码器将开始报告注册的回调事件。</p>     <p>Surface模式下，在surface中有正确的输入后，每完成一帧编码会触发OnNewOutputBuffer。</p>     <p>Buffer模式下，编码器会立即触发输入回调，开发者每完成一次输入，编码器执行编码，每完成一帧编码会触发OnNewOutputBuffer。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_stop" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_Stop()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_stop" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_Stop</span>(OH_AVCodec *codec)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>停止编码器，释放输入输出buffer。停止之后，可以通过调用OH_VideoEncoder_Start接口重新进入Running状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_flush" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_Flush()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_flush" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_Flush</span>(OH_AVCodec *codec)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>清除编码器中缓存的输入和输出数据及参数集如H.264格式的PPS/SPS。</p>     <p>调用此接口后，以前通过异步回调上报的所有缓冲区index都将失效，请确保不要访问这些index对应的缓冲区。该接口不能连续调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_reset" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_Reset()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_reset" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_Reset</span>(OH_AVCodec *codec)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>重置编码器，编码器回到初始化状态。如果要继续编码，需要再次调用OH_VideoEncoder_Configure接口配置编码器实例。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_getoutputdescription" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_GetOutputDescription()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_getoutputdescription" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVFormat *<span class="hljs-built_in">OH_VideoEncoder_GetOutputDescription</span>(OH_AVCodec *codec)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取编码器输出数据的OH_AVFormat信息。</p>     <p>需要注意的是，返回值指向的OH_AVFormat实例的生命周期需要开发者通过调用接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_destroy">OH_AVFormat_Destroy</a>释放。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">OH_AVFormat</a> *</td>         <td class="cellrowborder" width="50%">          <p>返回指向OH_AVFormat实例的指针。</p>          <p>当输入的codec指针非编码实例，或者为空指针，则返回NULL。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_setparameter" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_SetParameter()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_setparameter" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_SetParameter</span>(OH_AVCodec *codec, OH_AVFormat *format)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>在编码器运行时设置编码器参数。</p>     <p>注意，此接口只有在编码器启动后才能调用。同时，不正确的参数设置可能会导致编码失败。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">OH_AVFormat</a> *format</td>         <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：1. 输入的codec指针为非编码器实例，或者为空指针；2. 输入format参数不支持。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_getsurface" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_GetSurface()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_getsurface" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_GetSurface</span>(OH_AVCodec *codec, OHNativeWindow **window)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>从视频编码器获取输入surface，必须在调用OH_VideoEncoder_Configure接口之后OH_VideoEncoder_Prepare接口之前调用此接口。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> **window</td>         <td class="cellrowborder" width="50%">指向OHNativeWindow实例的指针。应用负责管理window的生命周期，结束时调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-external-window-h#oh_nativewindow_destroynativewindow">OH_NativeWindow_DestroyNativeWindow</a>释放。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_freeoutputdata" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_FreeOutputData()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_freeoutputdata" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_FreeOutputData</span>(OH_AVCodec *codec, uint32_t index)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>将处理后的输出缓冲区返回给编码器。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>废弃版本：</strong> 11</p>     <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_freeoutputbuffer">OH_VideoEncoder_FreeOutputBuffer</a></p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint32_t index</td>         <td class="cellrowborder" width="50%">输出缓冲区对应的索引值。由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_avcodeconnewoutputdata">OH_AVCodecOnNewOutputData</a>给出。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_notifyendofstream" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_NotifyEndOfStream()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_notifyendofstream" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_NotifyEndOfStream</span>(OH_AVCodec *codec)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>通知视频编码器输入流已结束。建议使用此接口进行通知。该接口只在Surface模式下使用，Buffer模式通过OH_AVBuffer携带EOS信息，通知输入流的结束。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 9</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_pushinputdata" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_PushInputData()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_pushinputdata" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_PushInputData</span>(OH_AVCodec *codec, uint32_t index, OH_AVCodecBufferAttr attr)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>将填入数据的输入缓冲区提交给视频编码器。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>废弃版本：</strong> 11</p>     <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_pushinputbuffer">OH_VideoEncoder_PushInputBuffer</a></p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint32_t index</td>         <td class="cellrowborder" width="50%">输入缓冲区对应的索引值。由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_avcodeconneedinputdata">OH_AVCodecOnNeedInputData</a>给出。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avcodecbufferattr">OH_AVCodecBufferAttr</a> attr</td>         <td class="cellrowborder" width="50%">缓冲区中包含数据的描述信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_pushinputbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_PushInputBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_pushinputbuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_PushInputBuffer</span>(OH_AVCodec *codec, uint32_t index)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>Buffer模式下，将index对应的OH_AVBuffer送入编码器编码。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 11</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint32_t index</td>         <td class="cellrowborder" width="50%">输入缓冲区对应的索引值。由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_avcodeconneedinputbuffer">OH_AVCodecOnNeedInputBuffer</a>给出。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：1. 输入的codec指针为非编码器实例，或者为空指针；2. 输入format参数不支持。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_pushinputparameter" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_PushInputParameter()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_pushinputparameter" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_PushInputParameter</span>(OH_AVCodec *codec, uint32_t index)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>Surface模式下，将index对应帧的编码参数送入编码器编码。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint32_t index</td>         <td class="cellrowborder" width="50%">输入参数缓冲区对应的索引值。由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_avcodeconneedinputbuffer">OH_AVCodecOnNeedInputBuffer</a>给出。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_freeoutputbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_FreeOutputBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_freeoutputbuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_FreeOutputBuffer</span>(OH_AVCodec *codec, uint32_t index)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>将处理后的index对应的OH_AVBuffer退回给编码器。开发者使用完需要及时调用此接口释放输出缓存区，否则会阻塞编码流程。</p>     <p>详情请参见：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-encoding" target="_blank">视频编码</a> “Surface模式的步骤-13或Buffer模式步骤-11”。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 11</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint32_t index</td>         <td class="cellrowborder" width="50%">输出缓冲区对应的索引值。由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_avcodeconneedinputbuffer">OH_AVCodecOnNeedInputBuffer</a>给出。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码实例内部异常，如内部出现异常空指针。</p>          <p>AV_ERR_INVALID_VAL：</p>          <p>1. 输入的 codec 指针为非编码器实例，或者为空指针；</p>          <p>2. 输入format参数不支持；</p>          <p>3. index非法或者连续给同一个index，该错误不影响后续编码流程。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：内部执行错误。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_getinputdescription" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_GetInputDescription()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_getinputdescription" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVFormat *<span class="hljs-built_in">OH_VideoEncoder_GetInputDescription</span>(OH_AVCodec *codec)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>编码器接收到的图像的描述信息。调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_configure">OH_VideoEncoder_Configure</a>后调用此接口。</p>     <p>需要注意的是，返回指针所指向的OH_AVFormat实例的生命周期需要由开发者通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_destroy">OH_AVFormat_Destroy</a>接口释放。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">OH_AVFormat</a> *</td>         <td class="cellrowborder" width="50%">          <p>返回指向OH_AVFormat实例的指针。</p>          <p>当codec指针非编码实例，或者为空指针，则返回NULL。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_isvalid" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_IsValid()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_isvalid" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_VideoEncoder_IsValid</span>(OH_AVCodec *codec, bool *isValid)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>在编码器实例存在的情况下，检查当前编码器服务是否有效。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bool *isValid</td>         <td class="cellrowborder" width="50%">输出参数，指向布尔类型的指针。只有当接口返回AV_ERR_OK时，该值表示编码器服务的有效性（true为有效，false为无效）。建议开发者将isValid初始化为false。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_queryinputbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_QueryInputBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_queryinputbuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVErrCode <span class="hljs-title">OH_VideoEncoder_QueryInputBuffer</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVCodec *codec, <span class="hljs-type">uint32_t</span> *index, <span class="hljs-type">int64_t</span> timeoutUs)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>查询下一个可用输入缓冲区的索引。</p>     <p>调用此接口后需要接着调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_getinputbuffer">OH_VideoEncoder_GetInputBuffer</a>接口获取缓冲区实例，并通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_pushinputbuffer">OH_VideoEncoder_PushInputBuffer</a>接口传递给编码器。</p>     <p>需要注意的是，上述操作仅在同步模式下支持。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">struct OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint32_t *index</td>         <td class="cellrowborder" width="50%">输入buffer对应的索引值。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int64_t timeoutUs</td>         <td class="cellrowborder" width="50%">超时时长，单位为微秒。负值：无限等待；0：立即退出；正值：等待指定时长后退出。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码器实例已经销毁。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_SERVICE_DIED：编解码服务已终止。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：禁止异步模式下使用。</p>          <p>AV_ERR_TRY_AGAIN_LATER：查询失败，建议等待短暂间隔后重试。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_getinputbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_GetInputBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_getinputbuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVBuffer *<span class="hljs-title">OH_VideoEncoder_GetInputBuffer</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVCodec *codec, <span class="hljs-type">uint32_t</span> index)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取可用输入缓冲区的实例。</p>     <p>需要注意的是，此接口仅适用于同步模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">struct OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint32_t index</td>         <td class="cellrowborder" width="50%">输入buffer对应的索引值，可通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_queryinputbuffer">OH_VideoEncoder_QueryInputBuffer</a> 接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avbuffer">OH_AVBuffer</a> *</td>         <td class="cellrowborder" width="50%">如果执行成功，则返回一个指向OH_AVBuffer实例的指针，否则返回NULL。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_queryoutputbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_QueryOutputBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_queryoutputbuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVErrCode <span class="hljs-title">OH_VideoEncoder_QueryOutputBuffer</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVCodec *codec, <span class="hljs-type">uint32_t</span> *index, <span class="hljs-type">int64_t</span> timeoutUs)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>查询下一个可用输出缓冲区的索引。通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_getoutputbuffer">OH_VideoEncoder_GetOutputBuffer</a>接口获取的缓冲区实例可以通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_freeoutputbuffer">OH_VideoEncoder_FreeOutputBuffer</a>接口将处理后的输出缓冲区返回到编码器。</p>     <p>需要注意的是，上述操作仅在同步模式下支持。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">struct OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint32_t *index</td>         <td class="cellrowborder" width="50%">输出buffer对应的索引值。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int64_t timeoutUs</td>         <td class="cellrowborder" width="50%">超时时长，单位为微秒。负值：无限等待；0：立即退出；正值：等待指定时长后退出。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_ERR_OK：执行成功。</p>          <p>AV_ERR_NO_MEMORY：输入的编码器实例已经销毁。</p>          <p>AV_ERR_INVALID_VAL：输入的codec指针为非编码器实例，或者为空指针。</p>          <p>AV_ERR_UNKNOWN：未知错误。</p>          <p>AV_ERR_SERVICE_DIED：编解码服务已终止。</p>          <p>AV_ERR_INVALID_STATE：编码器状态不支持调用本接口时调用。</p>          <p>AV_ERR_OPERATE_NOT_PERMIT：禁止异步模式下使用。</p>          <p>AV_ERR_STREAM_CHANGED：流格式已变更，可以通过调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_getoutputdescription">OH_VideoEncoder_GetOutputDescription</a>接口获取新的流信息。</p>          <p>AV_ERR_TRY_AGAIN_LATER：查询失败，建议等待短暂间隔后重试。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="oh_videoencoder_getoutputbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_VideoEncoder_GetOutputBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videoencoder_getoutputbuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bmj-c106="" class="highlight-div"><div _ngcontent-bmj-c106="" class="highlight-div-header"><div _ngcontent-bmj-c106="" class="highlight-div-header-left"><div _ngcontent-bmj-c106="" class="handle-button expand-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bmj-c106="" class="highlight-div-header-right"><div _ngcontent-bmj-c106="" class="handle-button ai-button"></div><div _ngcontent-bmj-c106="" class="handle-button line-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bmj-c106="" class="handle-button theme-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bmj-c106="" class="handle-button copy-button"><div _ngcontent-bmj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bmj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVBuffer *<span class="hljs-title">OH_VideoEncoder_GetOutputBuffer</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVCodec *codec, <span class="hljs-type">uint32_t</span> index)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取可用输出缓冲区的实例。</p>     <p>需要注意的是，此接口仅适用于同步模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.VideoEncoder</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase-oh-avcodec">struct OH_AVCodec</a> *codec</td>         <td class="cellrowborder" width="50%">指向视频编码实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint32_t index</td>         <td class="cellrowborder" width="50%">输出buffer对应的索引值，可通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-avcodec-videoencoder-h#oh_videoencoder_queryoutputbuffer">OH_VideoEncoder_QueryOutputBuffer</a>接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avbuffer">OH_AVBuffer</a> *</td>         <td class="cellrowborder" width="50%">如果执行成功，则返回一个指向OH_AVBuffer实例的指针，否则返回NULL。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>