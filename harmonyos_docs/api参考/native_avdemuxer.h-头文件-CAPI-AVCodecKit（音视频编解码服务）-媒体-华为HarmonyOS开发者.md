<h1 _ngcontent-dru-c119="" class="doc-title ng-star-inserted" title="native_avdemuxer.h"> native_avdemuxer.h </h1>

<div _ngcontent-dru-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>声明用于音视频媒体数据解析的接口。</p> <p><strong>引用文件：</strong> &lt;multimedia/player_framework/native_avdemuxer.h&gt;</p> <p><strong>库：</strong> libnative_media_avdemuxer.so</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 10</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer">AVDemuxer</a></p> <p><strong>相关示例：</strong><a href="https://gitcode.com/openharmony/applications_app_samples/tree/master/code/BasicFeature/Media/AVCodec" target="_blank">AVCodec</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVDemuxer</td> <td class="cellrowborder" width="33.33333333333333%">为OH_AVDemuxer接口定义native层对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-drm-mediakeysysteminfo">DRM_MediaKeySystemInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">DRM_MediaKeySystemInfo</td> <td class="cellrowborder" width="33.33333333333333%">为DRM_MediaKeySystemInf接口定义native层对象。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#drm_mediakeysysteminfocallback">typedef void (*DRM_MediaKeySystemInfoCallback)(DRM_MediaKeySystemInfo* mediaKeySystemInfo)</a></td> <td class="cellrowborder" width="33.33333333333333%">DRM_MediaKeySystemInfoCallback</td> <td class="cellrowborder" width="33.33333333333333%"><p>DRM_MediaKeySystemInfo回调函数指针类型，不返回解封装器实例，适用于单个解封装器实例场景。</p> <p> 需要使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_setmediakeysysteminfocallback">OH_AVDemuxer_SetMediaKeySystemInfoCallback</a>接口将其设置为回调。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#demuxer_mediakeysysteminfocallback">typedef void (*Demuxer_MediaKeySystemInfoCallback)(OH_AVDemuxer *demuxer, DRM_MediaKeySystemInfo *mediaKeySystemInfo)</a></td> <td class="cellrowborder" width="33.33333333333333%">Demuxer_MediaKeySystemInfoCallback</td> <td class="cellrowborder" width="33.33333333333333%"><p>DRM_MediaKeySystemInfo回调函数指针类型，返回解封装器实例，适用于多个解封装器实例场景。</p> <p> 需要使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_setdemuxermediakeysysteminfocallback">OH_AVDemuxer_SetDemuxerMediaKeySystemInfoCallback</a>接口将其设置为回调，推荐使用。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_createwithsource">OH_AVDemuxer *OH_AVDemuxer_CreateWithSource(OH_AVSource *source)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>通过source实例创建OH_AVDemuxer实例。</p> <p> source的创建、销毁及使用，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avsource">OH_AVSource</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_destroy">OH_AVErrCode OH_AVDemuxer_Destroy(OH_AVDemuxer *demuxer)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>销毁OH_AVDemuxer实例并清理内部资源。同一实例只能被销毁一次。</p> <p> 注意，销毁的实例在被重新创建之前不能再被使用。建议实例销毁成功后将指针置为NULL。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_selecttrackbyid">OH_AVErrCode OH_AVDemuxer_SelectTrackByID(OH_AVDemuxer *demuxer, uint32_t trackIndex)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>指定读取sample的轨道，解封装器将会从该轨道中读取数据，未指定的轨道不会读取。</p> <p> 注意，通过多次调用接口并传入不同轨道的索引来选中多个轨道。</p> <p> 调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_readsample">OH_AVDemuxer_ReadSample</a>时只会读取被选中的轨道中数据，同一轨道被选择多次时，接口会返回AV_ERR_OK，并且只会生效一次。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_unselecttrackbyid">OH_AVErrCode OH_AVDemuxer_UnselectTrackByID(OH_AVDemuxer *demuxer, uint32_t trackIndex)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>移除读取sample的轨道，未选中的轨道的数据不会被解封装器读取。</p> <p> 注意，通过多次调用接口并传入不同轨道的索引来取消对多个轨道的选择。</p> <p> 同一轨道被多次取消选择时，接口会返回AV_ERR_OK，并且只会生效一次。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_readsample">OH_AVErrCode OH_AVDemuxer_ReadSample(OH_AVDemuxer *demuxer, uint32_t trackIndex, OH_AVMemory *sample, OH_AVCodecBufferAttr *info)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>获取指定轨道的sample及相关信息。</p> <p> 注意，读取轨道sample前，轨道必须被选中。调用接口后解封装器将自动前进到下一帧。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_readsamplebuffer">OH_AVErrCode OH_AVDemuxer_ReadSampleBuffer(OH_AVDemuxer *demuxer, uint32_t trackIndex, OH_AVBuffer *sample)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>获取指定轨道的sample及相关信息。</p> <p> 注意，读取轨道sample前，轨道必须被选中。调用接口后解封装器将自动前进到下一帧。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_seektotime">OH_AVErrCode OH_AVDemuxer_SeekToTime(OH_AVDemuxer *demuxer, int64_t millisecond, OH_AVSeekMode mode)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">根据设定的跳转模式，将所有选中的轨道到指定时间附近。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_setmediakeysysteminfocallback">OH_AVErrCode OH_AVDemuxer_SetMediaKeySystemInfoCallback(OH_AVDemuxer *demuxer, DRM_MediaKeySystemInfoCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置DRM信息回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_setdemuxermediakeysysteminfocallback">OH_AVErrCode OH_AVDemuxer_SetDemuxerMediaKeySystemInfoCallback(OH_AVDemuxer *demuxer, Demuxer_MediaKeySystemInfoCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置DRM信息回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_getmediakeysysteminfo">OH_AVErrCode OH_AVDemuxer_GetMediaKeySystemInfo(OH_AVDemuxer *demuxer, DRM_MediaKeySystemInfo *mediaKeySystemInfo)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取DRM信息。在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#demuxer_mediakeysysteminfocallback">Demuxer_MediaKeySystemInfoCallback</a>或<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#drm_mediakeysysteminfocallback">DRM_MediaKeySystemInfoCallback</a>接口成功回调以后，调用此接口才能获取到DRM信息。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="drm_mediakeysysteminfocallback" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">DRM_MediaKeySystemInfoCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="drm_mediakeysysteminfocallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*DRM_MediaKeySystemInfoCallback)(DRM_MediaKeySystemInfo* mediaKeySystemInfo)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>DRM_MediaKeySystemInfo回调函数指针类型，不返回解封装器实例，适用于单个解封装器实例场景。</p> <p> 需要使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_setmediakeysysteminfocallback">OH_AVDemuxer_SetMediaKeySystemInfoCallback</a>接口将其设置为回调。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 11</p> <p><strong>废弃版本：</strong> 14</p> <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#demuxer_mediakeysysteminfocallback">Demuxer_MediaKeySystemInfoCallback</a></p> </div>  <div class="tiledSection"><h3 id="demuxer_mediakeysysteminfocallback" device-type="phone,2in1,tablet,wearable,tv">Demuxer_MediaKeySystemInfoCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="demuxer_mediakeysysteminfocallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*Demuxer_MediaKeySystemInfoCallback)(OH_AVDemuxer *demuxer, DRM_MediaKeySystemInfo *mediaKeySystemInfo)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>DRM_MediaKeySystemInfo回调函数指针类型，返回解封装器实例，适用于多个解封装器实例场景。</p> <p> 需要使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_setdemuxermediakeysysteminfocallback">OH_AVDemuxer_SetDemuxerMediaKeySystemInfoCallback</a>接口将其设置为回调，推荐使用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 12</p> </div>  <div class="tiledSection"><h3 id="oh_avdemuxer_createwithsource" device-type="phone,2in1,tablet,wearable,tv">OH_AVDemuxer_CreateWithSource()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avdemuxer_createwithsource" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVDemuxer *<span class="hljs-built_in">OH_AVDemuxer_CreateWithSource</span>(OH_AVSource *source)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过source实例创建OH_AVDemuxer实例。</p> <p> source的创建、销毁及使用，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avsource">OH_AVSource</a>。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avsource-oh-avsource">OH_AVSource</a> *source</td> <td class="cellrowborder" width="50%">指向OH_AVSource实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a> *</td> <td class="cellrowborder" width="50%"><p>返回一个指向OH_AVDemuxer实例的指针。</p> <p> 如果执行成功，则返回指向OH_AVDemuxer实例的指针，否则返回NULL。</p> <p> 可能的失败原因：</p> <p> 1. source无效，即空指针或非OH_AVSource实例。</p> <p> 2. 非OH_AVSource实例。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avdemuxer_destroy" device-type="phone,2in1,tablet,wearable,tv">OH_AVDemuxer_Destroy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avdemuxer_destroy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVDemuxer_Destroy</span>(OH_AVDemuxer *demuxer)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>销毁OH_AVDemuxer实例并清理内部资源。同一实例只能被销毁一次。</p> <p> 注意，销毁的实例在被重新创建之前不能再被使用。建议实例销毁成功后将指针置为NULL。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a> *demuxer</td> <td class="cellrowborder" width="50%">指向OH_AVDemuxer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：当输入的demuxer指针为空或非解封装器实例。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avdemuxer_selecttrackbyid" device-type="phone,2in1,tablet,wearable,tv">OH_AVDemuxer_SelectTrackByID()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avdemuxer_selecttrackbyid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVDemuxer_SelectTrackByID</span>(OH_AVDemuxer *demuxer, uint32_t trackIndex)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>指定读取sample的轨道，解封装器将会从该轨道中读取数据，未指定的轨道不会读取。</p> <p> 注意，通过多次调用接口并传入不同轨道的索引来选中多个轨道。</p> <p> 调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_readsample">OH_AVDemuxer_ReadSample</a>时只会读取被选中的轨道中数据，同一轨道被选择多次时，接口会返回AV_ERR_OK，并且只会生效一次。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a> *demuxer</td> <td class="cellrowborder" width="50%">指向OH_AVDemuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t trackIndex</td> <td class="cellrowborder" width="50%">需选择的轨道的索引。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：</p> <p> 1. 输入的demuxer指针为空或为非解封装器实例。</p> <p> 2. 轨道的索引超出范围。</p> <p> 3. 不支持读取轨道。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：demuxer没有正确的初始化。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avdemuxer_unselecttrackbyid" device-type="phone,2in1,tablet,wearable,tv">OH_AVDemuxer_UnselectTrackByID()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avdemuxer_unselecttrackbyid" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVDemuxer_UnselectTrackByID</span>(OH_AVDemuxer *demuxer, uint32_t trackIndex)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>移除读取sample的轨道，未选中的轨道的数据不会被解封装器读取。</p> <p> 注意，通过多次调用接口并传入不同轨道的索引来取消对多个轨道的选择。</p> <p> 同一轨道被多次取消选择时，接口会返回AV_ERR_OK，并且只会生效一次。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a> *demuxer</td> <td class="cellrowborder" width="50%">指向OH_AVDemuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t trackIndex</td> <td class="cellrowborder" width="50%">需取消选择的轨道的索引。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：输入的demuxer指针为空或为非解封装器实例。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：demuxer没有正确的初始化。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avdemuxer_readsample" device-type="phone,2in1,tablet,wearable,tv">OH_AVDemuxer_ReadSample()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avdemuxer_readsample" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVDemuxer_ReadSample</span>(OH_AVDemuxer *demuxer, uint32_t trackIndex, OH_AVMemory *sample, OH_AVCodecBufferAttr *info)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取指定轨道的sample及相关信息。</p> <p> 注意，读取轨道sample前，轨道必须被选中。调用接口后解封装器将自动前进到下一帧。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 10</p> <p><strong>废弃版本：</strong> 11</p> <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_readsamplebuffer">OH_AVDemuxer_ReadSampleBuffer</a></p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a> *demuxer</td> <td class="cellrowborder" width="50%">指向OH_AVDemuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t trackIndex</td> <td class="cellrowborder" width="50%">本次读取压缩帧的轨道的索引。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avmemory">OH_AVMemory</a> *sample</td> <td class="cellrowborder" width="50%">指向OH_AVMemory实例的指针，用于储存压缩帧数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avcodecbufferattr">OH_AVCodecBufferAttr</a> *info</td> <td class="cellrowborder" width="50%">指向OH_AVCodecBufferAttr实例的指针，用于储存压缩帧的相关信息。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：</p> <p> 1. 输入的demuxer指针为空或为非解封装器实例。</p> <p> 2. 轨道的索引超出范围。</p> <p> 3. 不支持读取轨道。</p> <p> 4. 输入sample为空。</p> <p> 5. 输入info为空。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：</p> <p> 1. 轨道的索引没有被选中。</p> <p> 2. demuxer没有正确的初始化。</p> <p> AV_ERR_NO_MEMORY：sample容量不足以存储所有帧数据。</p> <p> AV_ERR_UNKNOWN：无法从文件中读取或解析帧。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avdemuxer_readsamplebuffer" device-type="phone,2in1,tablet,wearable,tv">OH_AVDemuxer_ReadSampleBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avdemuxer_readsamplebuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVDemuxer_ReadSampleBuffer</span>(OH_AVDemuxer *demuxer, uint32_t trackIndex, OH_AVBuffer *sample)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取指定轨道的sample及相关信息。</p> <p>注意，读取轨道sample前，轨道必须被选中，可使用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_selecttrackbyid">OH_AVDemuxer_SelectTrackByID</a>。调用接口后解封装器将自动前进到下一帧。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a> *demuxer</td> <td class="cellrowborder" width="50%">指向OH_AVDemuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t trackIndex</td> <td class="cellrowborder" width="50%">本次读取压缩帧的轨道的索引。.</td> </tr> <tr><td class="cellrowborder" width="50%">OH_AVBuffer *sample</td> <td class="cellrowborder" width="50%">指向OH_AVBuffer实例的指针，用于储存压缩帧数据以及相关信息。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：</p> <p> 1. 输入的demuxer指针为空或为非解封装器实例。</p> <p> 2. sample为空指针。</p> <p> 3. 轨道的索引超出范围。</p> <p> 4. 输入sample为空。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：</p> <p> 1. 轨道的索引没有被选中。</p> <p> 2. demuxer没有正确的初始化。</p> <p> AV_ERR_NO_MEMORY：sample容量不足以存储所有帧数据。</p> <p> AV_ERR_UNKNOWN：无法从文件中读取或解析帧。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avdemuxer_seektotime" device-type="phone,2in1,tablet,wearable,tv">OH_AVDemuxer_SeekToTime()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avdemuxer_seektotime" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVDemuxer_SeekToTime</span>(OH_AVDemuxer *demuxer, int64_t millisecond, OH_AVSeekMode mode)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据设定的跳转模式，将所有选中的轨道到指定时间附近。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a> *demuxer</td> <td class="cellrowborder" width="50%">指向OH_AVDemuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t millisecond</td> <td class="cellrowborder" width="50%">期望跳转位置对应的时间，单位为毫秒，该时间戳是相对文件开始的位置。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_avseekmode">OH_AVSeekMode</a> mode</td> <td class="cellrowborder" width="50%">跳转的模式。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：</p> <p> 1. 输入的demuxer指针为空或为非解封装器实例。</p> <p> 2. 毫秒值超出范围。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：</p> <p> 1. 轨道的索引没有被选中。</p> <p> 2. demuxer没有正确的初始化。</p> <p> 3. 资源无法seek。</p> <p> AV_ERR_UNKNOWN：</p> <p> 1. seek失败。</p> <p> 2. OH_AVSeekMode选择SEEK_MODE_NEXT_SYNC，并且时间点后无I帧，可能会跳转失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avdemuxer_setmediakeysysteminfocallback" device-type="phone,2in1,tablet,wearable,tv">OH_AVDemuxer_SetMediaKeySystemInfoCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avdemuxer_setmediakeysysteminfocallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVDemuxer_SetMediaKeySystemInfoCallback</span>(OH_AVDemuxer *demuxer, DRM_MediaKeySystemInfoCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置DRM信息回调函数。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 11</p> <p><strong>废弃版本：</strong> 14</p> <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#oh_avdemuxer_setdemuxermediakeysysteminfocallback">OH_AVDemuxer_SetDemuxerMediaKeySystemInfoCallback</a></p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a> *demuxer</td> <td class="cellrowborder" width="50%">指向OH_AVDemuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#drm_mediakeysysteminfocallback">DRM_MediaKeySystemInfoCallback</a> callback</td> <td class="cellrowborder" width="50%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：操作成功。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：demuxer没有正确的初始化。</p> <p> AV_ERR_INVALID_VAL：输入的demuxer指针为空或为非解封装器实例。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avdemuxer_setdemuxermediakeysysteminfocallback" device-type="phone,2in1,tablet,wearable,tv">OH_AVDemuxer_SetDemuxerMediaKeySystemInfoCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avdemuxer_setdemuxermediakeysysteminfocallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVDemuxer_SetDemuxerMediaKeySystemInfoCallback</span>(OH_AVDemuxer *demuxer, Demuxer_MediaKeySystemInfoCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置DRM信息回调函数。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a> *demuxer</td> <td class="cellrowborder" width="50%">指向OH_AVDemuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#demuxer_mediakeysysteminfocallback">Demuxer_MediaKeySystemInfoCallback</a> callback</td> <td class="cellrowborder" width="50%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：操作成功。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：demuxer没有正确的初始化。</p> <p> AV_ERR_INVALID_VAL：输入的demuxer指针为空或为非解封装器实例。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avdemuxer_getmediakeysysteminfo" device-type="phone,2in1,tablet,wearable,tv">OH_AVDemuxer_GetMediaKeySystemInfo()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avdemuxer_getmediakeysysteminfo" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dru-c106="" class="highlight-div"><div _ngcontent-dru-c106="" class="highlight-div-header"><div _ngcontent-dru-c106="" class="highlight-div-header-left"><div _ngcontent-dru-c106="" class="handle-button expand-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dru-c106="" class="highlight-div-header-right"><div _ngcontent-dru-c106="" class="handle-button ai-button"></div><div _ngcontent-dru-c106="" class="handle-button line-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dru-c106="" class="handle-button theme-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dru-c106="" class="handle-button copy-button"><div _ngcontent-dru-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dru-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVDemuxer_GetMediaKeySystemInfo</span>(OH_AVDemuxer *demuxer, DRM_MediaKeySystemInfo *mediaKeySystemInfo)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取DRM信息。在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#demuxer_mediakeysysteminfocallback">Demuxer_MediaKeySystemInfoCallback</a>或<a href="/consumer/cn/doc/harmonyos-references/capi-native-avdemuxer-h#drm_mediakeysysteminfocallback">DRM_MediaKeySystemInfoCallback</a>接口成功回调以后，调用此接口才能获取到DRM信息。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Spliter</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-oh-avdemuxer">OH_AVDemuxer</a> *demuxer</td> <td class="cellrowborder" width="50%">指向OH_AVDemuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avdemuxer-drm-mediakeysysteminfo">DRM_MediaKeySystemInfo</a> *mediaKeySystemInfo</td> <td class="cellrowborder" width="50%">指向DRM信息的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：操作成功。</p> <p> AV_ERR_INVALID_VAL：</p> <p> 1. 输入的demuxer指针为空或为非解封装器实例。</p> <p> 2. mediaKeySystemInfo为nullptr。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>