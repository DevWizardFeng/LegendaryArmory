<h1 _ngcontent-wtm-c119="" class="doc-title ng-star-inserted" title="native_avformat.h"> native_avformat.h </h1>

<div _ngcontent-wtm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>声明了OH_AVFormat相关的函数和枚举。</p> <p><strong>引用文件：</strong> &lt;multimedia/player_framework/native_avformat.h&gt;</p> <p><strong>库：</strong> libnative_media_core.so</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core">Core</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">OH_AVFormat</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVFormat</td> <td class="cellrowborder" width="33.33333333333333%">为OH_AVFormat接口定义native层对象。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="枚举" device-type="phone,2in1,tablet,wearable,tv">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avpixelformat">OH_AVPixelFormat</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVPixelFormat</td> <td class="cellrowborder" width="33.33333333333333%">视频像素格式的枚举类。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_create">struct OH_AVFormat *OH_AVFormat_Create(void)</a></td> <td class="cellrowborder" width="50%">创建OH_AVFormat实例，用于读取数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_createaudioformat">struct OH_AVFormat *OH_AVFormat_CreateAudioFormat(const char *mimeType, int32_t sampleRate, int32_t channelCount)</a></td> <td class="cellrowborder" width="50%">创建音频OH_AVFormat实例指针并预设置指定参数，用于读写数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_createvideoformat">struct OH_AVFormat *OH_AVFormat_CreateVideoFormat(const char *mimeType, int32_t width, int32_t height)</a></td> <td class="cellrowborder" width="50%">创建视频OH_AVFormat实例指针并预设置指定参数，用于读写数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_destroy">void OH_AVFormat_Destroy(struct OH_AVFormat *format)</a></td> <td class="cellrowborder" width="50%">销毁OH_AVFormat实例，不允许重复销毁。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_copy">bool OH_AVFormat_Copy(struct OH_AVFormat *to, struct OH_AVFormat *from)</a></td> <td class="cellrowborder" width="50%">复制OH_AVFormat实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_setintvalue">bool OH_AVFormat_SetIntValue(struct OH_AVFormat *format, const char *key, int32_t value)</a></td> <td class="cellrowborder" width="50%">对OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>赋int类型的值。该接口仅能设置int类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_setlongvalue">bool OH_AVFormat_SetLongValue(struct OH_AVFormat *format, const char *key, int64_t value)</a></td> <td class="cellrowborder" width="50%">对OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>赋long类型的值。该接口仅能设置long类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_setfloatvalue">bool OH_AVFormat_SetFloatValue(struct OH_AVFormat *format, const char *key, float value)</a></td> <td class="cellrowborder" width="50%">对OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>赋float类型的值。该接口仅能设置float类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_setdoublevalue">bool OH_AVFormat_SetDoubleValue(struct OH_AVFormat *format, const char *key, double value)</a></td> <td class="cellrowborder" width="50%">对OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>赋double类型的值。该接口仅能设置double类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_setstringvalue">bool OH_AVFormat_SetStringValue(struct OH_AVFormat *format, const char *key, const char *value)</a></td> <td class="cellrowborder" width="50%">对OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>赋string类型的值。该接口仅能设置string类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_setbuffer">bool OH_AVFormat_SetBuffer(struct OH_AVFormat *format, const char *key, const uint8_t *addr, size_t size)</a></td> <td class="cellrowborder" width="50%">将指定长度的数据块写入OH_AVFormat。该接口仅能设置buffer类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_getintvalue">bool OH_AVFormat_GetIntValue(struct OH_AVFormat *format, const char *key, int32_t *out)</a></td> <td class="cellrowborder" width="50%">从OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>获取int类型的值。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_getlongvalue">bool OH_AVFormat_GetLongValue(struct OH_AVFormat *format, const char *key, int64_t *out)</a></td> <td class="cellrowborder" width="50%">从OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>获取long类型的值。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_getfloatvalue">bool OH_AVFormat_GetFloatValue(struct OH_AVFormat *format, const char *key, float *out)</a></td> <td class="cellrowborder" width="50%">从OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>获取float类型的值。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_getdoublevalue">bool OH_AVFormat_GetDoubleValue(struct OH_AVFormat *format, const char *key, double *out)</a></td> <td class="cellrowborder" width="50%">从OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>获取double类型的值。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_getstringvalue">bool OH_AVFormat_GetStringValue(struct OH_AVFormat *format, const char *key, const char **out)</a></td> <td class="cellrowborder" width="50%">从OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>获取string类型的值。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_getbuffer">bool OH_AVFormat_GetBuffer(struct OH_AVFormat *format, const char *key, uint8_t **addr, size_t *size)</a></td> <td class="cellrowborder" width="50%">从OH_AVFormat中读取指定长度的数据块。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_getintbuffer">bool OH_AVFormat_GetIntBuffer(struct OH_AVFormat *format, const char *key, int32_t **addr, size_t *size)</a></td> <td class="cellrowborder" width="50%"><p>从OH_AVFormat中读取一个int32_t数据的数组。</p> <p> 需要注意的是，获取的buffer生命周期与OH_AVFormat对象绑定，当format销毁时自动失效。</p> <p> 如果开发者需要长时间保持绑定，应用程序必须将数据显式复制到新分配的内存。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_dumpinfo">const char *OH_AVFormat_DumpInfo(struct OH_AVFormat *format)</a></td> <td class="cellrowborder" width="50%">返回OH_AVFormat中包含的key-value组成的字符串。最大可返回1024字节的字符串，销毁format时释放字符串指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avformat-h#oh_avformat_setintbuffer">bool OH_AVFormat_SetIntBuffer(struct OH_AVFormat *format, const char *key, const int32_t *addr, size_t size)</a></td> <td class="cellrowborder" width="50%">将指定长度int32_t类型的数据块写入OH_AVFormat。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="枚举类型说明" device-type="phone,2in1,tablet,wearable,tv">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_avpixelformat" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_AVPixelFormat<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avpixelformat" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AVPixelFormat</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>视频像素格式的枚举类。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">AV_PIXEL_FORMAT_YUVI420 = 1</td> <td class="cellrowborder" width="50%">yuv 420 planar。</td> </tr> <tr><td class="cellrowborder" width="50%">AV_PIXEL_FORMAT_NV12 = 2</td> <td class="cellrowborder" width="50%">NV12. yuv 420 semiplanar。</td> </tr> <tr><td class="cellrowborder" width="50%">AV_PIXEL_FORMAT_NV21 = 3</td> <td class="cellrowborder" width="50%">NV21. yvu 420 semiplanar。</td> </tr> <tr><td class="cellrowborder" width="50%">AV_PIXEL_FORMAT_SURFACE_FORMAT = 4</td> <td class="cellrowborder" width="50%">像素格式从surface获取。只作用于Surface模式，Buffer模式不生效。</td> </tr> <tr><td class="cellrowborder" width="50%">AV_PIXEL_FORMAT_RGBA = 5</td> <td class="cellrowborder" width="50%">RGBA8888。</td> </tr> <tr><td class="cellrowborder" width="50%">AV_PIXEL_FORMAT_RGBA1010102 = 6</td> <td class="cellrowborder" width="50%"><p>RGBA1010102。</p> <p><strong>起始版本：</strong> 20</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_avformat_create" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_AVFormat_Create()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_create" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">OH_AVFormat</span> *<span class="hljs-built_in">OH_AVFormat_Create</span>(<span class="hljs-type">void</span>)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建OH_AVFormat实例，用于读取数据。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *</td> <td class="cellrowborder" width="50%">返回指向OH_AVFormat实例的指针。系统资源不足时返回NULL。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_createaudioformat" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_CreateAudioFormat()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_createaudioformat" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">OH_AVFormat</span> *<span class="hljs-built_in">OH_AVFormat_CreateAudioFormat</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *mimeType, <span class="hljs-type">int32_t</span> sampleRate, <span class="hljs-type">int32_t</span> channelCount)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建音频OH_AVFormat实例指针并预设置指定参数，用于读写数据。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char *mimeType</td> <td class="cellrowborder" width="50%">MIME类型描述字符串，请参阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">AVCODEC_MIMETYPE</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t sampleRate</td> <td class="cellrowborder" width="50%">采样率，单位Hz。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t channelCount</td> <td class="cellrowborder" width="50%">声道个数，如1为单声道，2为双声道。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *</td> <td class="cellrowborder" width="50%"><p>如果创建成功，返回指向OH_AVFormat实例的指针，如果失败，则返回NULL。</p> <p> 可能的失败原因：</p> <p> 1. 传入的mimeType为NULL。</p> <p> 2. 系统资源不足。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_createvideoformat" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_CreateVideoFormat()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_createvideoformat" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">OH_AVFormat</span> *<span class="hljs-built_in">OH_AVFormat_CreateVideoFormat</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *mimeType, <span class="hljs-type">int32_t</span> width, <span class="hljs-type">int32_t</span> height)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建视频OH_AVFormat实例指针并预设置指定参数，用于读写数据。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char *mimeType</td> <td class="cellrowborder" width="50%">MIME类型描述字符串，请参阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">AVCODEC_MIMETYPE</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t width</td> <td class="cellrowborder" width="50%">图像的宽度，单位为pixel。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t height</td> <td class="cellrowborder" width="50%">图像的高度，单位为pixel。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *</td> <td class="cellrowborder" width="50%"><p>如果创建成功，返回指向OH_AVFormat实例的指针，如果失败，则返回NULL。</p> <p> 可能的失败原因：</p> <p> 1. 传入的mimeType为NULL。</p> <p> 2. 系统资源不足。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_destroy" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_Destroy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_destroy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_AVFormat_Destroy</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>销毁OH_AVFormat实例，不允许重复销毁。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_copy" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_Copy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_copy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">OH_AVFormat_Copy</span>(<span class="hljs-params"><span class="hljs-keyword">struct</span> OH_AVFormat *to, <span class="hljs-keyword">struct</span> OH_AVFormat *<span class="hljs-keyword">from</span></span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>复制OH_AVFormat实例。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *to</td> <td class="cellrowborder" width="50%">OH_AVFormat实例，用于接收数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *from</td> <td class="cellrowborder" width="50%">指向复制数据的OH_AVFormat实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入参数为空指针。</p> <p> 2. 输入的OH_AVFormat参数结构校验失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_setintvalue" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_SetIntValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_setintvalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_SetIntValue</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">int32_t</span> value)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>对OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>赋int类型的值。该接口仅能设置int类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">写入数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t value</td> <td class="cellrowborder" width="50%">写入数据的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 设置的key对应的value类型错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_setlongvalue" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_SetLongValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_setlongvalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_SetLongValue</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">int64_t</span> value)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>对OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>赋long类型的值。该接口仅能设置long类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">写入数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t value</td> <td class="cellrowborder" width="50%">写入数据的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 设置的key对应的value类型错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_setfloatvalue" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_SetFloatValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_setfloatvalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_SetFloatValue</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">float</span> value)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>对OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>赋float类型的值。该接口仅能设置float类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">写入数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">float value</td> <td class="cellrowborder" width="50%">写入数据的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 设置的key对应的value类型错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_setdoublevalue" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_SetDoubleValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_setdoublevalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_SetDoubleValue</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">double</span> value)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>对OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>赋double类型的值。该接口仅能设置double类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">写入数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">double value</td> <td class="cellrowborder" width="50%">写入数据的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 设置的key对应的value类型错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_setstringvalue" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_SetStringValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_setstringvalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_SetStringValue</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *value)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>对OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>赋string类型的值。该接口仅能设置string类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">写入数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *value</td> <td class="cellrowborder" width="50%">写入字符串数据（使用建议：设置字符长度不超过256字节）。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 输入value为空指针。</p> <p> 5. 设置的key对应的value类型错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_setbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_SetBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_setbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_SetBuffer</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">const</span> <span class="hljs-type">uint8_t</span> *addr, <span class="hljs-type">size_t</span> size)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将指定长度的数据块写入OH_AVFormat。该接口仅能设置buffer类型的参数，参数类型定义详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#变量">native_avcodec_base.h</a>。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">写入数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">const uint8_t *addr</td> <td class="cellrowborder" width="50%">写入数据的地址，生命周期由开发者管理。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t size</td> <td class="cellrowborder" width="50%">写入数据的长度，范围为(0, 1]MB。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 输入addr为空指针。</p> <p> 5. size为0或超过限制1MB。</p> <p> 6. 设置的key对应的value类型错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_getintvalue" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_GetIntValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_getintvalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_GetIntValue</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">int32_t</span> *out)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>获取int类型的值。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">读取数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t *out</td> <td class="cellrowborder" width="50%">读取数据的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 输入out为空指针。</p> <p> 5. 获取的key不存在或者未设置。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_getlongvalue" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_GetLongValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_getlongvalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_GetLongValue</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">int64_t</span> *out)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>获取long类型的值。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">读取数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t *out</td> <td class="cellrowborder" width="50%">读取数据的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 输入out为空指针。</p> <p> 5. 获取的key不存在或者未设置。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_getfloatvalue" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_GetFloatValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_getfloatvalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">OH_AVFormat_GetFloatValue</span>(<span class="hljs-params"><span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-keyword">const</span> <span class="hljs-built_in">char</span> *key, <span class="hljs-built_in">float</span> *<span class="hljs-keyword">out</span></span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>获取float类型的值。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">读取数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">float *out</td> <td class="cellrowborder" width="50%">读取数据的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 输入out为空指针。</p> <p> 5. 获取的key不存在或者未设置。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_getdoublevalue" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_GetDoubleValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_getdoublevalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">OH_AVFormat_GetDoubleValue</span>(<span class="hljs-params"><span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-keyword">const</span> <span class="hljs-built_in">char</span> *key, <span class="hljs-built_in">double</span> *<span class="hljs-keyword">out</span></span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>获取double类型的值。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">读取数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">double *out</td> <td class="cellrowborder" width="50%">读取数据的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 输入out为空指针。</p> <p> 5. 获取的key不存在或者未设置。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_getstringvalue" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_GetStringValue()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_getstringvalue" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-built_in">bool</span> <span class="hljs-title">OH_AVFormat_GetStringValue</span>(<span class="hljs-params"><span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-keyword">const</span> <span class="hljs-built_in">char</span> *key, <span class="hljs-keyword">const</span> <span class="hljs-built_in">char</span> **<span class="hljs-keyword">out</span></span>)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从OH_AVFormat的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-codecbase#媒体数据键值对">key</a>获取string类型的值。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">读取数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">const char **out</td> <td class="cellrowborder" width="50%">读取string指针，out数据的生命周期与format内string对应，如果开发者需要长时间保持它，必须进行拷贝内存。out最大输出字符串长度为256字节，如果长度超过256字节，会报false。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 输入out为空指针。</p> <p> 5. malloc出的out字符串资源不足。</p> <p> 6. 获取的key不存在或者未设置。</p> <p> 7. 输出out的长度超过256字节。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_getbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_GetBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_getbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_GetBuffer</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">uint8_t</span> **addr, <span class="hljs-type">size_t</span> *size)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从OH_AVFormat中读取指定长度的数据块。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">要读取数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t **addr</td> <td class="cellrowborder" width="50%">生命周期与format相同，与format一同销毁。如果开发者需要长时间保持它，必须进行内存拷贝。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t *size</td> <td class="cellrowborder" width="50%">读到数据的长度。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 输入addr为空指针。</p> <p> 5. 输入size为空指针。</p> <p> 6. 获取的key不存在或者未设置。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_getintbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_GetIntBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_getintbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_GetIntBuffer</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">int32_t</span> **addr, <span class="hljs-type">size_t</span> *size)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从OH_AVFormat中读取一个int32_t数据的数组。</p> <p> 需要注意的是，获取的buffer生命周期与OH_AVFormat对象绑定，当format销毁时自动失效。</p> <p> 如果开发者需要长时间保持绑定，应用程序必须将数据显式复制到新分配的内存。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">要读取数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t **addr</td> <td class="cellrowborder" width="50%">保存数据内存的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t *size</td> <td class="cellrowborder" width="50%">读到数据的元素数量。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回值为true表示成功，为false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 输入addr为空指针。</p> <p> 5. 输入size为空指针。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_dumpinfo" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_DumpInfo()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_dumpinfo" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">const</span> <span class="hljs-type">char</span> *<span class="hljs-title">OH_AVFormat_DumpInfo</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>返回OH_AVFormat中包含的key-value组成的字符串。最大可返回1024字节的字符串，销毁format时释放字符串指针。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 9</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">const char *</td> <td class="cellrowborder" width="50%"><p>如果创建成功，返回一个由key-value组成的字符串，如果失败，则返回NULL。</p> <p> 可能的失败原因：</p> <p> 1. 传入的format为NULL。</p> <p> 2. 系统资源不足。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avformat_setintbuffer" device-type="phone,2in1,tablet,wearable,tv">OH_AVFormat_SetIntBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avformat_setintbuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wtm-c106="" class="highlight-div"><div _ngcontent-wtm-c106="" class="highlight-div-header"><div _ngcontent-wtm-c106="" class="highlight-div-header-left"><div _ngcontent-wtm-c106="" class="handle-button expand-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wtm-c106="" class="highlight-div-header-right"><div _ngcontent-wtm-c106="" class="handle-button ai-button"></div><div _ngcontent-wtm-c106="" class="handle-button line-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wtm-c106="" class="handle-button theme-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wtm-c106="" class="handle-button copy-button"><div _ngcontent-wtm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wtm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_AVFormat_SetIntBuffer</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVFormat *format, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">const</span> <span class="hljs-type">int32_t</span> *addr, <span class="hljs-type">size_t</span> size)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将指定长度int32_t类型的数据块写入OH_AVFormat。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Core</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">struct OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *key</td> <td class="cellrowborder" width="50%">写入数据的键。</td> </tr> <tr><td class="cellrowborder" width="50%">const int32_t *addr</td> <td class="cellrowborder" width="50%">写入数据的地址，生命周期由开发者管理。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t size</td> <td class="cellrowborder" width="50%">写入数据的长度（以元素为单位，不是字节数）。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回true表示成功，返回false表示失败。</p> <p> 可能的失败原因：</p> <p> 1. 输入format为空指针。</p> <p> 2. 输入format参数结构校验失败。</p> <p> 3. 输入key为空指针。</p> <p> 4. 输入addr为空指针。</p> <p> 5. 输入size为0。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>