<h1 _ngcontent-kfs-c119="" class="doc-title ng-star-inserted" title="native_avmuxer.h"> native_avmuxer.h </h1>

<div _ngcontent-kfs-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>声明用于音视频封装的Native API。</p> <p><strong>引用文件：</strong> &lt;multimedia/player_framework/native_avmuxer.h&gt;</p> <p><strong>库：</strong> libnative_media_avmuxer.so</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Muxer</p> <p><strong>起始版本：</strong> 10</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer">AVMuxer</a></p> <p><strong>相关示例：</strong><a href="https://gitcode.com/openharmony/applications_app_samples/tree/master/code/BasicFeature/Media/AVCodec" target="_blank">AVCodec</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer-oh-avmuxer">OH_AVMuxer</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVMuxer</td> <td class="cellrowborder" width="33.33333333333333%">定义封装接口native层对象类型。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_create">OH_AVMuxer *OH_AVMuxer_Create(int32_t fd, OH_AVOutputFormat format)</a></td> <td class="cellrowborder" width="50%">通过文件描述符fd和封装格式创建OH_AVMuxer实例。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_setrotation">OH_AVErrCode OH_AVMuxer_SetRotation(OH_AVMuxer *muxer, int32_t rotation)</a></td> <td class="cellrowborder" width="50%">设置视频的旋转角度（顺时针，且旋转角度必须为0、90、180或270）。该接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_start">OH_AVMuxer_Start</a>前调用。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_setformat">OH_AVErrCode OH_AVMuxer_SetFormat(OH_AVMuxer *muxer, OH_AVFormat *format)</a></td> <td class="cellrowborder" width="50%"><p>设置format数据到封装器。</p> <p> API version 14起，支持设置创建时间OH_MD_KEY_CREATION_TIME。若创建时间未写入成功，请排查OH_MD_KEY_CREATION_TIME字符串设置是否符合ISO 8601标准的时间格式且为UTC时间。</p> <p> API version 20起，支持：</p> <p> - 设置文件的描述性文本信息OH_MD_KEY_COMMENT。若文件描述信息未写入成功，请排查OH_MD_KEY_COMMENT是否为字符串类型或字符长度大于等于1且小于等于256。</p> <p> - 设置MP4 moov的位置OH_MD_KEY_ENABLE_MOOV_FRONT。OH_MD_KEY_ENABLE_MOOV_FRONT为0时moov后置，为1时前置，默认后置。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_addtrack">OH_AVErrCode OH_AVMuxer_AddTrack(OH_AVMuxer *muxer, int32_t *trackIndex, OH_AVFormat *trackFormat)</a></td> <td class="cellrowborder" width="50%">向封装器添加音视频轨。每调用一次本接口可以在封装器中添加一个音视频轨。该接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_start">OH_AVMuxer_Start</a>前调用。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_start">OH_AVErrCode OH_AVMuxer_Start(OH_AVMuxer *muxer)</a></td> <td class="cellrowborder" width="50%">开始封装。该接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_addtrack">OH_AVMuxer_AddTrack</a>后，<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_writesample">OH_AVMuxer_WriteSample</a>前调用。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_writesample">OH_AVErrCode OH_AVMuxer_WriteSample(OH_AVMuxer *muxer, uint32_t trackIndex, OH_AVMemory *sample, OH_AVCodecBufferAttr info)</a></td> <td class="cellrowborder" width="50%">将sample写入封装器。 该接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_start">OH_AVMuxer_Start</a>后，<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_stop">OH_AVMuxer_Stop</a>前调用。调用者需要按info中的时间顺序将sample写入正确的音视频轨。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_writesamplebuffer">OH_AVErrCode OH_AVMuxer_WriteSampleBuffer(OH_AVMuxer *muxer, uint32_t trackIndex, const OH_AVBuffer *sample)</a></td> <td class="cellrowborder" width="50%">将sample写入封装器。该接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_start">OH_AVMuxer_Start</a>后，<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_stop">OH_AVMuxer_Stop</a>前调用。调用者需要按sample中的时间顺序将sample写入正确的音视频轨。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_stop">OH_AVErrCode OH_AVMuxer_Stop(OH_AVMuxer *muxer)</a></td> <td class="cellrowborder" width="50%">停止封装。封装器停止后不支持重新开始。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_destroy">OH_AVErrCode OH_AVMuxer_Destroy(OH_AVMuxer *muxer)</a></td> <td class="cellrowborder" width="50%"><p>清理内部资源，销毁OH_AVMuxer实例。</p> <p> 注意不能重复销毁，否则会导致程序崩溃。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_avmuxer_create" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_AVMuxer_Create()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avmuxer_create" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kfs-c106="" class="highlight-div"><div _ngcontent-kfs-c106="" class="highlight-div-header"><div _ngcontent-kfs-c106="" class="highlight-div-header-left"><div _ngcontent-kfs-c106="" class="handle-button expand-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfs-c106="" class="highlight-div-header-right"><div _ngcontent-kfs-c106="" class="handle-button ai-button"></div><div _ngcontent-kfs-c106="" class="handle-button line-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfs-c106="" class="handle-button theme-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfs-c106="" class="handle-button copy-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVMuxer *<span class="hljs-built_in">OH_AVMuxer_Create</span>(int32_t fd, OH_AVOutputFormat format)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过文件描述符fd和封装格式创建OH_AVMuxer实例。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Muxer</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">int32_t fd</td> <td class="cellrowborder" width="50%">用读写方式打开（O_RDWR），由调用者关闭该fd。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avcodec-base-h#oh_avoutputformat">OH_AVOutputFormat</a> format</td> <td class="cellrowborder" width="50%">封装输出的文件格式。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer-oh-avmuxer">OH_AVMuxer</a> *</td> <td class="cellrowborder" width="50%">返回一个指向OH_AVMuxer实例的指针，需要调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_destroy">OH_AVMuxer_Destroy</a>销毁。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avmuxer_setrotation" device-type="phone,2in1,tablet,wearable,tv">OH_AVMuxer_SetRotation()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avmuxer_setrotation" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kfs-c106="" class="highlight-div"><div _ngcontent-kfs-c106="" class="highlight-div-header"><div _ngcontent-kfs-c106="" class="highlight-div-header-left"><div _ngcontent-kfs-c106="" class="handle-button expand-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfs-c106="" class="highlight-div-header-right"><div _ngcontent-kfs-c106="" class="handle-button ai-button"></div><div _ngcontent-kfs-c106="" class="handle-button line-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfs-c106="" class="handle-button theme-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfs-c106="" class="handle-button copy-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVMuxer_SetRotation</span>(OH_AVMuxer *muxer, int32_t rotation)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置视频的旋转角度（顺时针，且旋转角度必须为0、90、180或270）。该接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_start">OH_AVMuxer_Start</a>前调用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Muxer</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer-oh-avmuxer">OH_AVMuxer</a> *muxer</td> <td class="cellrowborder" width="50%">指向OH_AVMuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t rotation</td> <td class="cellrowborder" width="50%">角度，必须为0、90、180 或 270。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：muxer为空指针，或rotation无效。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：不允许调用该接口，请检查接口调用顺序。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avmuxer_setformat" device-type="phone,2in1,tablet,wearable,tv">OH_AVMuxer_SetFormat()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avmuxer_setformat" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kfs-c106="" class="highlight-div"><div _ngcontent-kfs-c106="" class="highlight-div-header"><div _ngcontent-kfs-c106="" class="highlight-div-header-left"><div _ngcontent-kfs-c106="" class="handle-button expand-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfs-c106="" class="highlight-div-header-right"><div _ngcontent-kfs-c106="" class="handle-button ai-button"></div><div _ngcontent-kfs-c106="" class="handle-button line-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfs-c106="" class="handle-button theme-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfs-c106="" class="handle-button copy-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVMuxer_SetFormat</span>(OH_AVMuxer *muxer, OH_AVFormat *format)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置format数据到封装器。</p> <p> API version 14起，支持设置创建时间OH_MD_KEY_CREATION_TIME。若创建时间未写入成功，请排查OH_MD_KEY_CREATION_TIME字符串设置是否符合ISO 8601标准的时间格式且为UTC时间。</p> <p> API version 20起，支持：</p> <ul><li>设置文件的描述性文本信息OH_MD_KEY_COMMENT。若文件描述信息未写入成功，请排查OH_MD_KEY_COMMENT是否为字符串类型或字符长度大于等于1且小于等于256。</li><li>设置MP4 moov的位置OH_MD_KEY_ENABLE_MOOV_FRONT。OH_MD_KEY_ENABLE_MOOV_FRONT为0时moov后置，为1时前置，默认后置。</li></ul> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Muxer</p> <p><strong>起始版本：</strong> 14</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer-oh-avmuxer">OH_AVMuxer</a> *muxer</td> <td class="cellrowborder" width="50%">指向OH_AVMuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">OH_AVFormat</a> *format</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。文件级元数据集。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：设置format参数正确。</p> <p> AV_ERR_INVALID_VAL：muxer为空指针，或format无效。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：不允许调用该接口，请检查接口调用顺序。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avmuxer_addtrack" device-type="phone,2in1,tablet,wearable,tv">OH_AVMuxer_AddTrack()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avmuxer_addtrack" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kfs-c106="" class="highlight-div"><div _ngcontent-kfs-c106="" class="highlight-div-header"><div _ngcontent-kfs-c106="" class="highlight-div-header-left"><div _ngcontent-kfs-c106="" class="handle-button expand-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfs-c106="" class="highlight-div-header-right"><div _ngcontent-kfs-c106="" class="handle-button ai-button"></div><div _ngcontent-kfs-c106="" class="handle-button line-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfs-c106="" class="handle-button theme-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfs-c106="" class="handle-button copy-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVMuxer_AddTrack</span>(OH_AVMuxer *muxer, int32_t *trackIndex, OH_AVFormat *trackFormat)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>向封装器添加音视频轨。每调用一次本接口可以在封装器中添加一个音视频轨。该接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_start">OH_AVMuxer_Start</a>前调用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Muxer</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer-oh-avmuxer">OH_AVMuxer</a> *muxer</td> <td class="cellrowborder" width="50%">指向OH_AVMuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t *trackIndex</td> <td class="cellrowborder" width="50%">用于获取该轨的索引，该值在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_writesample">OH_AVMuxer_WriteSample</a>接口中使用。如果媒体轨添加成功，该值大于或等于0，否则小于0。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avformat">OH_AVFormat</a> *trackFormat</td> <td class="cellrowborder" width="50%">指向OH_AVFormat实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：muxer为空指针，或trackIndex无效，或trackFormat无效。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：不允许调用该接口，请检查接口调用顺序。</p> <p> AV_ERR_UNSUPPORT：不支持的mime类型。</p> <p> AV_ERR_NO_MEMORY：申请内存失败。</p> <p> AV_ERR_UNKNOWN：未知错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avmuxer_start" device-type="phone,2in1,tablet,wearable,tv">OH_AVMuxer_Start()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avmuxer_start" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kfs-c106="" class="highlight-div"><div _ngcontent-kfs-c106="" class="highlight-div-header"><div _ngcontent-kfs-c106="" class="highlight-div-header-left"><div _ngcontent-kfs-c106="" class="handle-button expand-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfs-c106="" class="highlight-div-header-right"><div _ngcontent-kfs-c106="" class="handle-button ai-button"></div><div _ngcontent-kfs-c106="" class="handle-button line-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfs-c106="" class="handle-button theme-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfs-c106="" class="handle-button copy-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVMuxer_Start</span>(OH_AVMuxer *muxer)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>开始封装。该接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_addtrack">OH_AVMuxer_AddTrack</a>后，<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_writesample">OH_AVMuxer_WriteSample</a>前调用。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Muxer</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer-oh-avmuxer">OH_AVMuxer</a> *muxer</td> <td class="cellrowborder" width="50%">指向OH_AVMuxer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：muxer为空指针。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：不允许调用该接口，请检查接口调用顺序。</p> <p> AV_ERR_UNKNOWN：未知错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avmuxer_writesample" device-type="phone,2in1,tablet,wearable,tv">OH_AVMuxer_WriteSample()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avmuxer_writesample" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kfs-c106="" class="highlight-div"><div _ngcontent-kfs-c106="" class="highlight-div-header"><div _ngcontent-kfs-c106="" class="highlight-div-header-left"><div _ngcontent-kfs-c106="" class="handle-button expand-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfs-c106="" class="highlight-div-header-right"><div _ngcontent-kfs-c106="" class="handle-button ai-button"></div><div _ngcontent-kfs-c106="" class="handle-button line-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfs-c106="" class="handle-button theme-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfs-c106="" class="handle-button copy-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVMuxer_WriteSample</span>(OH_AVMuxer *muxer, uint32_t trackIndex, OH_AVMemory *sample, OH_AVCodecBufferAttr info)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将sample写入封装器。该接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_start">OH_AVMuxer_Start</a>后，<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_stop">OH_AVMuxer_Stop</a>前调用。调用者需要按info中的时间顺序将sample写入正确的音视频轨。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Muxer</p> <p><strong>起始版本：</strong> 10</p> <p><strong>废弃版本：</strong> 11</p> <p><strong>替代接口：</strong> <a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_writesamplebuffer">OH_AVMuxer_WriteSampleBuffer</a></p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer-oh-avmuxer">OH_AVMuxer</a> *muxer</td> <td class="cellrowborder" width="50%">指向OH_AVMuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t trackIndex</td> <td class="cellrowborder" width="50%">数据对应的音视频轨的索引。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avmemory">OH_AVMemory</a> *sample</td> <td class="cellrowborder" width="50%">编码或解封装得到的数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avcodecbufferattr">OH_AVCodecBufferAttr</a> info</td> <td class="cellrowborder" width="50%">sample对应的描述信息。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：muxer为空指针，或trackIndex无效，或sample无效，或info无效。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：不允许调用该接口，请检查接口调用顺序。</p> <p> AV_ERR_NO_MEMORY：申请内存失败。</p> <p> AV_ERR_UNKNOWN：未知错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avmuxer_writesamplebuffer" device-type="phone,2in1,tablet,wearable,tv">OH_AVMuxer_WriteSampleBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avmuxer_writesamplebuffer" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kfs-c106="" class="highlight-div"><div _ngcontent-kfs-c106="" class="highlight-div-header"><div _ngcontent-kfs-c106="" class="highlight-div-header-left"><div _ngcontent-kfs-c106="" class="handle-button expand-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfs-c106="" class="highlight-div-header-right"><div _ngcontent-kfs-c106="" class="handle-button ai-button"></div><div _ngcontent-kfs-c106="" class="handle-button line-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfs-c106="" class="handle-button theme-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfs-c106="" class="handle-button copy-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVErrCode <span class="hljs-title">OH_AVMuxer_WriteSampleBuffer</span><span class="hljs-params">(OH_AVMuxer *muxer, <span class="hljs-type">uint32_t</span> trackIndex, <span class="hljs-type">const</span> OH_AVBuffer *sample)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将sample写入封装器。该接口必须在<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_start">OH_AVMuxer_Start</a>后，<a href="/consumer/cn/doc/harmonyos-references/capi-native-avmuxer-h#oh_avmuxer_stop">OH_AVMuxer_Stop</a>前调用。调用者需要按sample中的时间顺序将sample写入正确的音视频轨。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Muxer</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer-oh-avmuxer">OH_AVMuxer</a> *muxer</td> <td class="cellrowborder" width="50%">指向OH_AVMuxer实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t trackIndex</td> <td class="cellrowborder" width="50%">数据对应的音视频轨的索引。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avbuffer">OH_AVBuffer</a> *sample</td> <td class="cellrowborder" width="50%">编码或解封装得到的数据及属性。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：muxer为空指针，或trackIndex无效，或sample无效。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：不允许调用该接口，请检查接口调用顺序。</p> <p> AV_ERR_NO_MEMORY：申请内存失败。</p> <p> AV_ERR_UNKNOWN：未知错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avmuxer_stop" device-type="phone,2in1,tablet,wearable,tv">OH_AVMuxer_Stop()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avmuxer_stop" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kfs-c106="" class="highlight-div"><div _ngcontent-kfs-c106="" class="highlight-div-header"><div _ngcontent-kfs-c106="" class="highlight-div-header-left"><div _ngcontent-kfs-c106="" class="handle-button expand-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfs-c106="" class="highlight-div-header-right"><div _ngcontent-kfs-c106="" class="handle-button ai-button"></div><div _ngcontent-kfs-c106="" class="handle-button line-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfs-c106="" class="handle-button theme-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfs-c106="" class="handle-button copy-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVMuxer_Stop</span>(OH_AVMuxer *muxer)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>停止封装。封装器停止后不支持重新开始。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Muxer</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer-oh-avmuxer">OH_AVMuxer</a> *muxer</td> <td class="cellrowborder" width="50%">指向OH_AVMuxer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：muxer为空指针。</p> <p> AV_ERR_OPERATE_NOT_PERMIT：不允许调用该接口，请检查接口调用顺序。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avmuxer_destroy" device-type="phone,2in1,tablet,wearable,tv">OH_AVMuxer_Destroy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avmuxer_destroy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kfs-c106="" class="highlight-div"><div _ngcontent-kfs-c106="" class="highlight-div-header"><div _ngcontent-kfs-c106="" class="highlight-div-header-left"><div _ngcontent-kfs-c106="" class="handle-button expand-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kfs-c106="" class="highlight-div-header-right"><div _ngcontent-kfs-c106="" class="handle-button ai-button"></div><div _ngcontent-kfs-c106="" class="handle-button line-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kfs-c106="" class="handle-button theme-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kfs-c106="" class="handle-button copy-button"><div _ngcontent-kfs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kfs-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVErrCode <span class="hljs-built_in">OH_AVMuxer_Destroy</span>(OH_AVMuxer *muxer)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>清理内部资源，销毁OH_AVMuxer实例。</p> <p> 注意不能重复销毁，否则会导致程序崩溃。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.Muxer</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avmuxer-oh-avmuxer">OH_AVMuxer</a> *muxer</td> <td class="cellrowborder" width="50%">指向OH_AVMuxer实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-averrors-h#oh_averrcode">OH_AVErrCode</a></td> <td class="cellrowborder" width="50%"><p>AV_ERR_OK：执行成功。</p> <p> AV_ERR_INVALID_VAL：muxer为空指针。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>