<h1 _ngcontent-eoj-c119="" class="doc-title ng-star-inserted" title="native_avscreen_capture.h"> native_avscreen_capture.h </h1>

<div _ngcontent-eoj-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <div class="tiledSection" style="contain-intrinsic-size: auto 422px;">     <h2 id="概述" device-type="phone,2in1,tablet,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>声明用于构造屏幕录制对象的API。</p>     <p><strong>引用文件：</strong> &lt;multimedia/player_framework/native_avscreen_capture.h&gt;</p>     <p><strong>库：</strong> libnative_avscreen_capture.so</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture">AVScreenCapture</a></p>     <p><strong>相关示例：</strong> <a href="https://gitcode.com/openharmony/applications_app_samples/tree/master/code/DocsSample/Media/ScreenCapture/ScreenCaptureSample" target="_blank">NativeAvScreenCapture</a></p>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 146px;">     <h2 id="汇总" device-type="phone,2in1,tablet,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 9064px;">     <h3 id="函数" device-type="phone,2in1,tablet,tv" class="firsth2">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_create">struct OH_AVScreenCapture *OH_AVScreenCapture_Create(void)</a></td>         <td class="cellrowborder" width="50%">          <p>实例化对象，创建OH_AVScreenCapture。</p>          <p>可以通过调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_release">OH_AVScreenCapture_Release</a>释放实例。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_init">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_Init(struct OH_AVScreenCapture *capture, OH_AVScreenCaptureConfig config)</a></td>         <td class="cellrowborder" width="50%">初始化<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a>相关参数，包括下发的音频麦克风采样相关参数（可选）、音频内录采样相关参数、视频分辨率相关参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_startscreencapture">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StartScreenCapture(struct OH_AVScreenCapture *capture)</a></td>         <td class="cellrowborder" width="50%">开始录屏，采集原始码流。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_stopscreencapture">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StopScreenCapture(struct OH_AVScreenCapture *capture)</a></td>         <td class="cellrowborder" width="50%">结束录屏，与<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_startscreencapture">OH_AVScreenCapture_StartScreenCapture</a>配合使用。调用后针对调用该接口的应用会停止录屏或屏幕共享，释放麦克风。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_startscreenrecording">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StartScreenRecording(struct OH_AVScreenCapture *capture)</a></td>         <td class="cellrowborder" width="50%">启动录屏，调用此接口，可保存录屏文件。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_stopscreenrecording">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StopScreenRecording(struct OH_AVScreenCapture *capture)</a></td>         <td class="cellrowborder" width="50%">停止录屏，与<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_startscreenrecording">OH_AVScreenCapture_StartScreenRecording</a>配合使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_acquireaudiobuffer">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_AcquireAudioBuffer(struct OH_AVScreenCapture *capture, OH_AudioBuffer **audiobuffer, OH_AudioCaptureSourceType type)</a></td>         <td class="cellrowborder" width="50%">          <p>获取音频buffer。应用调用时需分配audiobuffer对应结构体大小的内存，否则影响音频buffer的获取。</p>          <p>从API version 12开始，推荐使用接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_acquirevideobuffer">OH_NativeBuffer* OH_AVScreenCapture_AcquireVideoBuffer(struct OH_AVScreenCapture *capture, int32_t *fence, int64_t *timestamp, struct OH_Rect *region)</a></td>         <td class="cellrowborder" width="50%">          <p>获取视频buffer。应用通过此接口获取视频缓存区及时间戳等信息。</p>          <p>buffer使用完成后，调用OH_AVScreenCapture_ReleaseVideoBuffer接口进行视频buffer的释放。</p>          <p>从API version 12开始，推荐使用接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_releaseaudiobuffer">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ReleaseAudioBuffer(struct OH_AVScreenCapture *capture, OH_AudioCaptureSourceType type)</a></td>         <td class="cellrowborder" width="50%">          <p>根据音频类型释放buffer。当某一帧音频buffer使用完成后，调用此接口进行释放对应的音频buffer。</p>          <p>从API version 12开始，推荐使用接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_releasevideobuffer">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ReleaseVideoBuffer(struct OH_AVScreenCapture *capture)</a></td>         <td class="cellrowborder" width="50%">          <p>根据视频类型释放buffer。当某一帧视频buffer使用完成后，调用此接口释放对应的视频buffer。</p>          <p>从API version 12开始，推荐使用接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setcallback">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetCallback(struct OH_AVScreenCapture *capture, struct OH_AVScreenCaptureCallback callback)</a></td>         <td class="cellrowborder" width="50%">          <p>设置监听接口，通过设置监听，可以监听到调用过程中的错误信息，以及是否有可用的视频buffer和音频buffer。</p>          <p>从API version 12开始，推荐使用接口<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_seterrorcallback">OH_AVScreenCapture_SetErrorCallback</a>、<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setdatacallback">OH_AVScreenCapture_SetDataCallback</a>替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_release">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_Release(struct OH_AVScreenCapture *capture)</a></td>         <td class="cellrowborder" width="50%">释放创建的OH_AVScreenCapture实例，对应<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_create">OH_AVScreenCapture_Create</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setmicrophoneenabled">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetMicrophoneEnabled(struct OH_AVScreenCapture *capture, bool isMicrophone)</a></td>         <td class="cellrowborder" width="50%">          <p>设置麦克风开关。</p>          <p>当isMicrophone为true时，则打开麦克风，通过调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_startscreencapture">OH_AVScreenCapture_StartScreenCapture</a>和<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_acquireaudiobuffer">OH_AVScreenCapture_AcquireAudioBuffer</a>可以正常获取到音频的麦克风原始PCM数据；isMicrophone为false时，获取到的音频数据为无声数据。</p>          <p>默认麦克风开关为开启。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setstatecallback">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetStateCallback(struct OH_AVScreenCapture *capture, OH_AVScreenCapture_OnStateChange callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">设置状态变更处理回调方法，在开始录制前调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setdatacallback">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetDataCallback(struct OH_AVScreenCapture *capture, OH_AVScreenCapture_OnBufferAvailable callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">设置数据处理回调方法，在开始录制前调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_seterrorcallback">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetErrorCallback(struct OH_AVScreenCapture *capture, OH_AVScreenCapture_OnError callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">设置错误处理回调方法，在开始录制前调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_startscreencapturewithsurface">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StartScreenCaptureWithSurface(struct OH_AVScreenCapture *capture, OHNativeWindow *window)</a></td>         <td class="cellrowborder" width="50%">使用Surface模式录屏。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setcanvasrotation">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetCanvasRotation(struct OH_AVScreenCapture *capture, bool canvasRotation)</a></td>         <td class="cellrowborder" width="50%">          <p>设置录屏屏幕数据旋转。</p>          <p>调用该方法可以设置录屏屏幕数据是否旋转，当canvasRotation为true时，打开录屏屏幕数据旋转功能，录制的屏幕数据保持正向。</p>          <p>默认为false。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_createcontentfilter">struct OH_AVScreenCapture_ContentFilter *OH_AVScreenCapture_CreateContentFilter(void)</a></td>         <td class="cellrowborder" width="50%">创建ContentFilter。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_releasecontentfilter">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ReleaseContentFilter(struct OH_AVScreenCapture_ContentFilter *filter)</a></td>         <td class="cellrowborder" width="50%">释放ContentFilter。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_contentfilter_addaudiocontent">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ContentFilter_AddAudioContent(struct OH_AVScreenCapture_ContentFilter *filter, OH_AVScreenCaptureFilterableAudioContent content)</a></td>         <td class="cellrowborder" width="50%">向ContentFilter实例添加可过滤的声音类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_excludecontent">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ExcludeContent(struct OH_AVScreenCapture *capture,struct OH_AVScreenCapture_ContentFilter *filter)</a></td>         <td class="cellrowborder" width="50%">设置OH_AVScreenCapture实例的内容过滤器ContentFilter。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_contentfilter_addwindowcontent">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ContentFilter_AddWindowContent(struct OH_AVScreenCapture_ContentFilter *filter, int32_t *windowIDs, int32_t windowCount)</a></td>         <td class="cellrowborder" width="50%">向ContentFilter实例添加可被过滤的窗口ID列表。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_resizecanvas">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ResizeCanvas(struct OH_AVScreenCapture *capture, int32_t width, int32_t height)</a></td>         <td class="cellrowborder" width="50%">          <p>调整屏幕的分辨率。</p>          <p>调用该方法可以设置录屏屏幕数据的分辨率，width为屏幕的宽度，height为屏幕的高度。</p>          <p>该接口目前仅支持录屏取码流的场景，不支持录屏存文件的场景。并且调用该接口的调用者以及视频数据的消费者需要确保自身能够支持收到的视频数据分辨率发生变化。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_skipprivacymode">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SkipPrivacyMode(struct OH_AVScreenCapture *capture, int32_t *windowIDs, int32_t windowCount)</a></td>         <td class="cellrowborder" width="50%">          <p>录屏时豁免隐私窗口。</p>          <p>调用该方法可以豁免隐私窗口，windowIDs为需要豁免的隐私窗口ID指针，windowCount 为隐私窗口ID列表的长度，目前豁免需要传入所有隐私子窗口和主窗口ID。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setmaxvideoframerate">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetMaxVideoFrameRate(struct OH_AVScreenCapture *capture, int32_t frameRate)</a></td>         <td class="cellrowborder" width="50%">          <p>设置录屏时的最大帧率。</p>          <p>该接口应在录屏启动之后被调用。</p>          <p>调用该方法可以设置录屏时的最大帧率，frameRate为想要设置的最大帧率。</p>          <p>该接口设置最大帧率时，实际设置的帧率受限设备的能力，由底层的系统能力决定。</p>          <p>调用该接口设置录屏最大帧率时，实际帧率将受限于设备能力。目前接口入参的最大值不设限制，但当前支持的最高帧率为60FPS，当入参设置超过60FPS，将以60FPS处理。不超过上限时，则按照实际入参值处理。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_showcursor">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ShowCursor(struct OH_AVScreenCapture *capture, bool showCursor)</a></td>         <td class="cellrowborder" width="50%">设置光标显示开关。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setdisplaycallback">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetDisplayCallback(struct OH_AVScreenCapture *capture, OH_AVScreenCapture_OnDisplaySelected callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">设置获取录屏屏幕Id的回调。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_createcapturestrategy">OH_AVScreenCapture_CaptureStrategy* OH_AVScreenCapture_CreateCaptureStrategy(void)</a></td>         <td class="cellrowborder" width="50%">创建录屏策略对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_releasecapturestrategy">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ReleaseCaptureStrategy(OH_AVScreenCapture_CaptureStrategy* strategy)</a></td>         <td class="cellrowborder" width="50%">释放录屏策略对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setcapturestrategy">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetCaptureStrategy(struct OH_AVScreenCapture *capture, OH_AVScreenCapture_CaptureStrategy *strategy)</a></td>         <td class="cellrowborder" width="50%">          <p>给指定的OH_AVScreenCapture实例设置捕获策略。</p>          <p>该接口应在录屏启动之前被调用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_strategyforcanvasfollowrotation">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StrategyForCanvasFollowRotation(OH_AVScreenCapture_CaptureStrategy *strategy, bool value)</a></td>         <td class="cellrowborder" width="50%">          <p>设置屏幕录屏自动跟随旋转配置。设为true，表示跟随屏幕旋转，并在横竖屏旋转后，自动调换虚拟屏尺寸，确保输出画面及时跟随旋转。</p>          <p>设置是否自动跟随旋转配置后，在旋转通知后，无需再手动调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_resizecanvas">OH_AVScreenCapture_ResizeCanvas</a>接口。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_strategyforkeepcaptureduringcall">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StrategyForKeepCaptureDuringCall(OH_AVScreenCapture_CaptureStrategy *strategy, bool value)</a></td>         <td class="cellrowborder" width="50%">          <p>向CaptureStrategy实例设置蜂窝通话时是否保持录屏。</p>          <p>value设置为true时并且录屏时接听蜂窝通话的过程中，出于隐私要求，双方通话的声音（本地麦克风和对方说话声音）不会被录制，其他系统音录制正常。电话挂断之后，录屏框架恢复麦克风录制。注意，如果挂断电话时录屏应用在后台运行，麦克风录制会启动失败，原因是音频模块不允许后台应用启动麦克风录制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setcapturecontentchangedcallback">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetCaptureContentChangedCallback(struct OH_AVScreenCapture *capture, OH_AVScreenCapture_OnCaptureContentChanged callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">设置录屏内容变更回调事件，需在录屏启动前被调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setcapturearea">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetCaptureArea(struct OH_AVScreenCapture *capture, uint64_t displayId, OH_Rect* area)</a></td>         <td class="cellrowborder" width="50%">          <p>设置或更新捕获区域。</p>          <p>接口在开始录屏前后都可以设置，设置的坐标和宽高不能为负数，捕获区域不能跨屏幕，区域位置设置失败后仍按照上一次的区域进行捕获。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_strategyforprivacymaskmode">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StrategyForPrivacyMaskMode(OH_AVScreenCapture_CaptureStrategy *strategy, int32_t value)</a></td>         <td class="cellrowborder" width="50%">设置隐私窗口屏蔽模式。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setselectioncallback">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_SetSelectionCallback(struct OH_AVScreenCapture *capture, OH_AVScreenCapture_OnUserSelected callback, void *userData)</a></td>         <td class="cellrowborder" width="50%">注册手工确认界面用户选择结果的回调，需在录屏启动前被调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_getcapturetypeselected">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_GetCaptureTypeSelected(OH_AVScreenCapture_UserSelectionInfo *selection, int32_t* type)</a></td>         <td class="cellrowborder" width="50%">获取用户在确认界面选择的屏幕捕获对象类型。在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onuserselected">OH_AVScreenCapture_OnUserSelected</a>回调中使用，selection指针在回调结束后销毁。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_getdisplayidselected">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_GetDisplayIdSelected(OH_AVScreenCapture_UserSelectionInfo *selection, uint64_t* displayId)</a></td>         <td class="cellrowborder" width="50%">获取确认页面，用户选择录制的屏幕ID。在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onuserselected">OH_AVScreenCapture_OnUserSelected</a>回调中使用，selection指针在回调结束后销毁。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_strategyforbframesencoding">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StrategyForBFramesEncoding(OH_AVScreenCapture_CaptureStrategy *strategy, bool value)</a></td>         <td class="cellrowborder" width="50%">          <p>向CaptureStrategy实例设置是否使能B帧编码，用于减小录制文件的大小。</p>          <p>B帧视频编码相关的约束和限制可以参考文档<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-encoding-b-frame#约束和限制" target="_blank">B帧视频编码约束和限制</a>。如果当前不符合B帧视频编码的约束和限制，则正常录制不含B帧的视频，不会返回错误。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_strategyforpickerpopup">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StrategyForPickerPopUp(OH_AVScreenCapture_CaptureStrategy *strategy, bool value)</a></td>         <td class="cellrowborder" width="50%">设置是否弹出屏幕捕获Picker。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_strategyforfillmode">OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_StrategyForFillMode(OH_AVScreenCapture_CaptureStrategy *strategy, OH_AVScreenCapture_FillMode mode)</a></td>         <td class="cellrowborder" width="50%">设置捕获图像在目标区域的填充模式。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="函数说明" device-type="phone,2in1,tablet,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 629px;">     <h3 id="oh_avscreencapture_create" device-type="phone,2in1,tablet,tv" class="firsth2">OH_AVScreenCapture_Create()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_create" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">OH_AVScreenCapture</span> *<span class="hljs-built_in">OH_AVScreenCapture_Create</span>(<span class="hljs-type">void</span>)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>实例化对象，创建OH_AVScreenCapture。</p>     <p>可以通过调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_release">OH_AVScreenCapture_Release</a>释放实例。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *</td>         <td class="cellrowborder" width="50%">返回一个指向OH_AVScreenCapture实例的指针。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1279px;">     <h3 id="oh_avscreencapture_init" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_Init()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_init" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_Init</span>(struct OH_AVScreenCapture *capture,OH_AVScreenCaptureConfig config)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>初始化<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a>相关参数，包括下发的音频麦克风采样相关参数（可选）、音频内录采样相关参数、视频分辨率相关参数。</p>     <p>录屏存文件场景，应用需要保证视频编码参数、视频采样参数、音频编码参数、音频内录采样参数均合法，音频麦克风采样参数合法（可选）。</p>     <p>录屏出码流场景，应用需要保证音频内录采样参数、视频采样参数至少一个合法，音频麦克风采样参数合法（可选）。</p>     <p>由于结构体变量在初始化时不会对成员进行初始化，应用必须根据使用场景正确设置各项参数。建议应用先将OH_AVScreenCaptureConfig结构体变量的所有内存字节均设置为0，然后再根据录屏场景设置合法参数。</p>     <p>音频采样参数结构体<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-audiocaptureinfo">OH_AudioCaptureInfo</a>，若audioSampleRate和audioChannels同时为0，则录屏实例OH_AVScreenCapture将忽略该类型的音频参数，且不采集该类型的音频数据。</p>     <p>视频采样参数结构体<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-videocaptureinfo">OH_VideoCaptureInfo</a>，若videoFrameWidth和videoFrameHeight同时为0，则录屏实例OH_AVScreenCapture将忽略对应视频参数，且不采集屏幕数据。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencaptureconfig">OH_AVScreenCaptureConfig</a> config</td>         <td class="cellrowborder" width="50%">录屏初始化相关参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.15.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.15.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，初始化配置失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1056px;">     <h3 id="oh_avscreencapture_startscreencapture" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StartScreenCapture()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_startscreencapture" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StartScreenCapture</span>(struct OH_AVScreenCapture *capture)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>开始录屏，采集原始码流。</p>     <p>调用后可以通过回调的监听（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>）来监听当前是否有码流的产生,通过回调的监听（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onstatechange">OH_AVScreenCapture_OnStateChange</a>）来监听启动状态。</p>     <p>通过调用获取音频buffer（<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_acquireaudiobuffer">OH_AVScreenCapture_AcquireAudioBuffer</a>）和视频buffer（<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_acquirevideobuffer">OH_AVScreenCapture_AcquireVideoBuffer</a>）的接口来获取录屏的原始码流。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_UNSUPPORT（API version 20新增）：设备不支持该操作。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置隐私权限启用失败或启动录屏失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 888px;">     <h3 id="oh_avscreencapture_stopscreencapture" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StopScreenCapture()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_stopscreencapture" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StopScreenCapture</span>(struct OH_AVScreenCapture *capture)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>结束录屏，与<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_startscreencapture">OH_AVScreenCapture_StartScreenCapture</a>配合使用。调用后针对调用该接口的应用会停止录屏或屏幕共享，释放麦克风。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，结束录屏失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 912px;">     <h3 id="oh_avscreencapture_startscreenrecording" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StartScreenRecording()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_startscreenrecording" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StartScreenRecording</span>(struct OH_AVScreenCapture *capture)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>启动录屏，调用此接口，可保存录屏文件。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_UNSUPPORT（API version 20新增）：设备不支持该操作。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置隐私权限启用失败或启用屏幕录制失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 864px;">     <h3 id="oh_avscreencapture_stopscreenrecording" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StopScreenRecording()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_stopscreenrecording" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StopScreenRecording</span>(struct OH_AVScreenCapture *capture)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>停止录屏，与<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_startscreenrecording">OH_AVScreenCapture_StartScreenRecording</a>配合使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，停止屏幕录制失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1118px;">     <h3 id="oh_avscreencapture_acquireaudiobuffer" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_AcquireAudioBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_acquireaudiobuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-go" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_AcquireAudioBuffer(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,OH_AudioBuffer **audiobuffer, OH_AudioCaptureSourceType <span class="hljs-keyword">type</span>)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取音频buffer。应用调用时需分配audiobuffer对应结构体大小的内存，否则影响音频buffer的获取。</p>     <p>从API version 12开始，推荐使用接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-audiobuffer">OH_AudioBuffer</a> **audiobuffer</td>         <td class="cellrowborder" width="50%">保存音频buffer的结构体，通过该结构体获取到音频buffer以及buffer的时间戳等信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_audiocapturesourcetype">OH_AudioCaptureSourceType</a> type</td>         <td class="cellrowborder" width="50%">音频buffer的类型，区分是麦克风录制的外部流还是系统内部播放音频的内录流。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针或输入参数audiobuffer为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_NO_MEMORY：内存不足，audiobuffer分配失败。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置隐私权限启用失败或获取音频buffer失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1053px;">     <h3 id="oh_avscreencapture_acquirevideobuffer" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_AcquireVideoBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_acquirevideobuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_NativeBuffer* <span class="hljs-title">OH_AVScreenCapture_AcquireVideoBuffer</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,<span class="hljs-type">int32_t</span> *fence, <span class="hljs-type">int64_t</span> *timestamp, <span class="hljs-keyword">struct</span> OH_Rect *region)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取视频buffer。应用通过此接口获取视频缓存区及时间戳等信息。</p>     <p>buffer使用完成后，调用OH_AVScreenCapture_ReleaseVideoBuffer接口进行视频buffer的释放。</p>     <p>从API version 12开始，推荐使用接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t *fence</td>         <td class="cellrowborder" width="50%">用于同步的显示相关参数信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int64_t *timestamp</td>         <td class="cellrowborder" width="50%">视频帧的时间戳。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-rect">struct OH_Rect</a> *region</td>         <td class="cellrowborder" width="50%">视频显示相关的坐标信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pi-avscreencapture-avscreencapture-oh-nativebuffer">OH_NativeBuffer</a>*</td>         <td class="cellrowborder" width="50%">执行成功返回OH_NativeBuffer对象，通过OH_NativeBuffer对象相关接口可以获取到视频buffer和分辨率等信息参数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1015px;">     <h3 id="oh_avscreencapture_releaseaudiobuffer" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_ReleaseAudioBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_releaseaudiobuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-go" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ReleaseAudioBuffer(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,OH_AudioCaptureSourceType <span class="hljs-keyword">type</span>)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>根据音频类型释放buffer。当某一帧音频buffer使用完成后，调用此接口进行释放对应的音频buffer。</p>     <p>从API version 12开始，推荐使用接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_audiocapturesourcetype">OH_AudioCaptureSourceType</a> type</td>         <td class="cellrowborder" width="50%">音频buffer的类型，区分麦克风录制的外部流还是系统内部播放音频的内录流。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，不允许用于已设置过DataCallback或释放音频buffer失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 936px;">     <h3 id="oh_avscreencapture_releasevideobuffer" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_ReleaseVideoBuffer()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_releasevideobuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_ReleaseVideoBuffer</span>(struct OH_AVScreenCapture *capture)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>根据视频类型释放buffer。当某一帧视频buffer使用完成后，调用此接口释放对应的视频buffer。</p>     <p>从API version 12开始，推荐使用接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，不允许用于已设置过DataCallback或释放视频buffer失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 991px;">     <h3 id="oh_avscreencapture_setcallback" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setcallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetCallback</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,<span class="hljs-keyword">struct</span> OH_AVScreenCaptureCallback callback)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置监听接口，通过设置监听，可以监听到调用过程中的错误信息，以及是否有可用的视频buffer和音频buffer。</p>     <p>从API version 12开始，推荐使用接口<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_seterrorcallback">OH_AVScreenCapture_SetErrorCallback</a>、<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setdatacallback">OH_AVScreenCapture_SetDataCallback</a>替代。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapturecallback">struct OH_AVScreenCaptureCallback</a> callback</td>         <td class="cellrowborder" width="50%">OH_AVScreenCaptureCallback的结构体，保存相关回调函数指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针或输入参数callback为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置监听接口失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 864px;">     <h3 id="oh_avscreencapture_release" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_Release()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_release" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_Release</span>(struct OH_AVScreenCapture *capture)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>释放创建的OH_AVScreenCapture实例，对应<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_create">OH_AVScreenCapture_Create</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，OH_AVScreenCapture实例释放失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1111px;">     <h3 id="oh_avscreencapture_setmicrophoneenabled" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetMicrophoneEnabled()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setmicrophoneenabled" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetMicrophoneEnabled</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,<span class="hljs-type">bool</span> isMicrophone)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置麦克风开关。</p>     <p>当isMicrophone为true时，则打开麦克风，通过调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_startscreencapture">OH_AVScreenCapture_StartScreenCapture</a>和<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_acquireaudiobuffer">OH_AVScreenCapture_AcquireAudioBuffer</a>可以正常获取到音频的麦克风原始PCM数据；isMicrophone为false时，获取到的音频数据为无声数据。</p>     <p>默认麦克风开关为开启。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 10</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bool isMicrophone</td>         <td class="cellrowborder" width="50%">          <p>麦克风开关参数。</p>          <p>true表示打开麦克风，false表示关闭麦克风。</p>          <p>默认是true。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置麦克风开关失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1382px;">     <h3 id="oh_avscreencapture_setstatecallback" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetStateCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setstatecallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetStateCallback</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,OH_AVScreenCapture_OnStateChange callback, <span class="hljs-type">void</span> *userData)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置状态变更处理回调方法，在开始录制前调用。</p>     <p>调用该方法设置状态变更处理回调方法，当OH_AVScreenCapture实例发生状态变更时，该状态变更处理回调方法将会被调用。</p>     <p>调用该设置方法成功后，在启动录屏时将通过隐私弹窗方式征求用户同意：</p>     <p>1. 如果用户同意则开始启动录屏流程，在启动录屏成功后，通过该状态处理回调方法上报<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturestatecode">OH_AVScreenCaptureStateCode</a>.OH_SCREEN_CAPTURE_STATE_STARTED状态，告知应用启动录屏成功，并在屏幕显示录屏通知。如果启动录屏失败，则通过该状态处理回调方法上报失败状态信息（如，若麦克风不可用则上报<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturestatecode">OH_AVScreenCaptureStateCode</a>.OH_SCREEN_CAPTURE_STATE_MIC_UNAVAILABLE状态），或通过错误处理回调方法<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onerror">OH_AVScreenCapture_OnError</a>上报错误信息。</p>     <p>2. 如果用户拒绝，则终止启动录屏，通过该状态处理回调方法上报<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturestatecode">OH_AVScreenCaptureStateCode</a>.OH_SCREEN_CAPTURE_STATE_CANCELED状态，告知应用用户拒绝启动录屏，启动录屏失败。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onstatechange">OH_AVScreenCapture_OnStateChange</a> callback</td>         <td class="cellrowborder" width="50%">指向状态处理回调方法实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">指向应用提供的自定义数据的指针，在状态处理回调方法被调用时作为入参回传。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.14.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.14.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针或输入参数callback为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_NO_MEMORY：内存不足，内存分配失败。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置StateCallback失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1382px;">     <h3 id="oh_avscreencapture_setdatacallback" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetDataCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setdatacallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetDataCallback</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,OH_AVScreenCapture_OnBufferAvailable callback, <span class="hljs-type">void</span> *userData)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置数据处理回调方法，在开始录制前调用。</p>     <p>调用该方法设置数据处理回调方法，当OH_AVScreenCapture操作期间有音频或视频数据缓存区可用时，将调用该数据处理回调方法。</p>     <p>应用需要在该数据处理回调方法中根据数据类型完成处理麦克风音频、内录音频、视频数据，当该数据处理回调方法返回后数据缓存区将不再有效。</p>     <p>调用该方法成功后：</p>     <p>1. 当OH_AVScreenCapture操作期间有音视频缓存区可用时，将不再调用通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setcallback">OH_AVScreenCapture_SetCallback</a>设置的数据回调方法<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencaptureonaudiobufferavailable">OH_AVScreenCaptureOnAudioBufferAvailable</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencaptureonvideobufferavailable">OH_AVScreenCaptureOnVideoBufferAvailable</a>。</p>     <p>2. 不允许应用调用如下4个方法<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_acquireaudiobuffer">OH_AVScreenCapture_AcquireAudioBuffer</a>、<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_releaseaudiobuffer">OH_AVScreenCapture_ReleaseAudioBuffer</a>、<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_acquirevideobuffer">OH_AVScreenCapture_AcquireVideoBuffer</a>和<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_releasevideobuffer">OH_AVScreenCapture_ReleaseVideoBuffer</a>，直接返回失败。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a> callback</td>         <td class="cellrowborder" width="50%">指向数据处理回调方法实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">指向应用提供的自定义数据的指针，在数据处理回调方法被调用时作为入参回传。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.15.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.15.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针或输入参数callback为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_NO_MEMORY：内存不足，内存分配失败。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置DataCallback失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1166px;">     <h3 id="oh_avscreencapture_seterrorcallback" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetErrorCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_seterrorcallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetErrorCallback</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,OH_AVScreenCapture_OnError callback, <span class="hljs-type">void</span> *userData)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置错误处理回调方法，在开始录制前调用。</p>     <p>调用该方法设置错误处理回调方法，当OH_AVScreenCapture实例发生错误时，该错误处理回调方法将会被调用。</p>     <p>调用该设置方法成功后，当OH_AVScreenCapture实例发生错误时，将不再调用通过<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_setcallback">OH_AVScreenCapture_SetCallback</a>设置的错误处理回调方法<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencaptureonerror">OH_AVScreenCaptureOnError</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onerror">OH_AVScreenCapture_OnError</a> callback</td>         <td class="cellrowborder" width="50%">指向错误处理回调方法实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">指向应用提供的自定义数据的指针，在错误处理回调方法被调用时作为入参回传。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针或输入参数callback为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_NO_MEMORY：内存不足，内存分配失败。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置ErrorCallback失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1015px;">     <h3 id="oh_avscreencapture_startscreencapturewithsurface" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StartScreenCaptureWithSurface()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_startscreencapturewithsurface" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StartScreenCaptureWithSurface</span>(struct OH_AVScreenCapture *capture,OHNativeWindow *window)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>使用Surface模式录屏。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-nativewindow-nativewindow">OHNativeWindow</a> *window</td>         <td class="cellrowborder" width="50%">指向OHNativeWindow实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针或输入参数window为空指针或window指向的windowSurface为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_UNSUPPORT（API version 20新增）：设备不支持该操作。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置隐私权限启用失败或启动ScreenCaptureWithSurface失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1183px;">     <h3 id="oh_avscreencapture_setcanvasrotation" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetCanvasRotation()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setcanvasrotation" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetCanvasRotation</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,<span class="hljs-type">bool</span> canvasRotation)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置录屏屏幕数据旋转。</p>     <p>调用该方法可以设置录屏屏幕数据是否旋转，当canvasRotation为true时，打开录屏屏幕数据旋转功能，录制的屏幕数据保持正向。</p>     <p>默认为false。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bool canvasRotation</td>         <td class="cellrowborder" width="50%">          <p>指示屏幕数据旋转参数。</p>          <p>true表示打开录屏屏幕数据旋转功能，录制的屏幕数据保持正向，false表示关闭录屏屏幕数据旋转功能，录制的屏幕数据跟随屏幕旋转。</p>          <p>默认是false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_UNSUPPORT（API version 20新增）：设备不支持该操作。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置录屏屏幕数据旋转失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 621px;">     <h3 id="oh_avscreencapture_createcontentfilter" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_CreateContentFilter()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_createcontentfilter" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">struct</span> <span class="hljs-title class_">OH_AVScreenCapture_ContentFilter</span> *<span class="hljs-built_in">OH_AVScreenCapture_CreateContentFilter</span>(<span class="hljs-type">void</span>)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>创建ContentFilter。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/i-avscreencapture-oh-avscreencapture-contentfilter">OH_AVScreenCapture_ContentFilter</a> *</td>         <td class="cellrowborder" width="50%">执行成功返回OH_AVScreenCapture_ContentFilter实例，否则返回空指针。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 816px;">     <h3 id="oh_avscreencapture_releasecontentfilter" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_ReleaseContentFilter()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_releasecontentfilter" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_ReleaseContentFilter</span>(struct OH_AVScreenCapture_ContentFilter *filter)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>释放ContentFilter。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/i-avscreencapture-oh-avscreencapture-contentfilter">struct OH_AVScreenCapture_ContentFilter</a> *filter</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_ContentFilter实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数filter为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 871px;">     <h3 id="oh_avscreencapture_contentfilter_addaudiocontent" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_ContentFilter_AddAudioContent()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_contentfilter_addaudiocontent" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-css" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode OH_AVScreenCapture_ContentFilter_AddAudioContent(struct OH_AVScreenCapture_ContentFilter *<span class="hljs-attribute">filter</span>, OH_AVScreenCaptureFilterableAudioContent <span class="hljs-attribute">content</span>)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>向ContentFilter实例添加可过滤的声音类型。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/i-avscreencapture-oh-avscreencapture-contentfilter">struct OH_AVScreenCapture_ContentFilter</a> *filter</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_ContentFilter实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturefilterableaudiocontent">OH_AVScreenCaptureFilterableAudioContent</a> content</td>         <td class="cellrowborder" width="50%">OH_AVScreenCaptureFilterableAudioContent实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数filter为空指针或输入参数content无效。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 943px;">     <h3 id="oh_avscreencapture_excludecontent" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_ExcludeContent()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_excludecontent" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_ExcludeContent</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,<span class="hljs-keyword">struct</span> OH_AVScreenCapture_ContentFilter *filter)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置OH_AVScreenCapture实例的内容过滤器ContentFilter。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/i-avscreencapture-oh-avscreencapture-contentfilter">struct OH_AVScreenCapture_ContentFilter</a> *filter</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_ContentFilter实例的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针或输入参数filter为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_UNSUPPORT：操作不支持。对于流，启动时应该调用AudioCapturer接口。</p>          <p>对于capture文件，启动时调用Recorder接口。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 902px;">     <h3 id="oh_avscreencapture_contentfilter_addwindowcontent" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_ContentFilter_AddWindowContent()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_contentfilter_addwindowcontent" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_ContentFilter_AddWindowContent</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture_ContentFilter *filter, <span class="hljs-type">int32_t</span> *windowIDs, <span class="hljs-type">int32_t</span> windowCount)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>向ContentFilter实例添加可被过滤的窗口ID列表。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/i-avscreencapture-oh-avscreencapture-contentfilter">struct OH_AVScreenCapture_ContentFilter</a> *filter</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_ContentFilter实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t *windowIDs</td>         <td class="cellrowborder" width="50%">指向窗口ID的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t windowCount</td>         <td class="cellrowborder" width="50%">窗口ID列表的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">执行成功返回AV_SCREEN_CAPTURE_ERR_OK，否则返回具体错误码。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1142px;">     <h3 id="oh_avscreencapture_resizecanvas" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_ResizeCanvas()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_resizecanvas" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_ResizeCanvas</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,<span class="hljs-type">int32_t</span> width, <span class="hljs-type">int32_t</span> height)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>调整屏幕的分辨率。</p>     <p>调用该方法可以设置录屏屏幕数据的分辨率，width为屏幕的宽度，height为屏幕的高度。</p>     <p>该接口目前仅支持录屏取码流的场景，不支持录屏存文件的场景。并且调用该接口的调用者以及视频数据的消费者需要确保自身能够支持收到的视频数据分辨率发生变化。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t width</td>         <td class="cellrowborder" width="50%">录屏屏幕的宽度。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t height</td>         <td class="cellrowborder" width="50%">录屏屏幕的高度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_UNSUPPORT（API version 20新增）：设备不支持该操作。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1094px;">     <h3 id="oh_avscreencapture_skipprivacymode" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SkipPrivacyMode()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_skipprivacymode" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SkipPrivacyMode</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,<span class="hljs-type">int32_t</span> *windowIDs, <span class="hljs-type">int32_t</span> windowCount)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>录屏时豁免隐私窗口。</p>     <p>调用该方法可以豁免隐私窗口，windowIDs为需要豁免的隐私窗口ID指针，windowCount 为隐私窗口ID列表的长度，目前豁免需要传入所有隐私子窗口和主窗口ID。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 12</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t *windowIDs</td>         <td class="cellrowborder" width="50%">向隐私窗口ID的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t windowCount</td>         <td class="cellrowborder" width="50%">隐私窗口ID列表的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_UNSUPPORT（API version 20新增）：设备不支持该操作。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1183px;">     <h3 id="oh_avscreencapture_setmaxvideoframerate" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetMaxVideoFrameRate()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setmaxvideoframerate" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetMaxVideoFrameRate</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,<span class="hljs-type">int32_t</span> frameRate)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置录屏时的最大帧率。</p>     <p>该接口应在录屏启动之后被调用。</p>     <p>调用该方法可以设置录屏时的最大帧率，frameRate为想要设置的最大帧率。</p>     <p>该接口设置最大帧率时，实际设置的帧率受限设备的能力，由底层的系统能力决定。</p>     <p>调用该接口设置录屏最大帧率时，实际帧率将受限于设备能力。目前接口入参的最大值不设限制，但当前支持的最高帧率为60FPS，当入参设置超过60FPS，将以60FPS处理。不超过上限时，则按照实际入参值处理。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 14</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t frameRate</td>         <td class="cellrowborder" width="50%">录屏的最大帧率。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.14.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.14.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针或者输入参数frameRate不支持。</p>          <p>AV_SCREEN_CAPTURE_ERR_UNSUPPORT（API version 20新增）：设备不支持该操作。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1015px;">     <h3 id="oh_avscreencapture_showcursor" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_ShowCursor()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_showcursor" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_ShowCursor</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,<span class="hljs-type">bool</span> showCursor)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置光标显示开关。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 15</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bool showCursor</td>         <td class="cellrowborder" width="50%">          <p>光标显示参数。</p>          <p>true表示显示光标，false表示隐藏光标。</p>          <p>默认是true。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_UNSUPPORT（API version 20新增）：设备不支持该操作。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置光标失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1046px;">     <h3 id="oh_avscreencapture_setdisplaycallback" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetDisplayCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setdisplaycallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetDisplayCallback</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,OH_AVScreenCapture_OnDisplaySelected callback, <span class="hljs-type">void</span> *userData)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置获取录屏屏幕Id的回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 15</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_ondisplayselected">OH_AVScreenCapture_OnDisplaySelected</a> callback</td>         <td class="cellrowborder" width="50%">指向录屏屏幕Id回调方法实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">指向应用提供的自定义数据的指针，在状态处理回调方法被调用时作为入参回传。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针或输入参数callback为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_NO_MEMORY：内存不足，内存分配失败。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_STATE：回调必须在start方法前调用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 621px;">     <h3 id="oh_avscreencapture_createcapturestrategy" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_CreateCaptureStrategy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_createcapturestrategy" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVScreenCapture_CaptureStrategy* <span class="hljs-built_in">OH_AVScreenCapture_CreateCaptureStrategy</span>(void)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>创建录屏策略对象。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/avscreencapture-oh-avscreencapture-capturestrategy">OH_AVScreenCapture_CaptureStrategy</a>*</td>         <td class="cellrowborder" width="50%">执行成功返回OH_AVScreenCapture_CaptureStrategy实例，否则返回空指针。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 816px;">     <h3 id="oh_avscreencapture_releasecapturestrategy" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_ReleaseCaptureStrategy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_releasecapturestrategy" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_ReleaseCaptureStrategy</span>(OH_AVScreenCapture_CaptureStrategy* strategy)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>释放录屏策略对象。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/avscreencapture-oh-avscreencapture-capturestrategy">OH_AVScreenCapture_CaptureStrategy</a>* strategy</td>         <td class="cellrowborder" width="50%">指向录屏策略对象的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数strategy为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 967px;">     <h3 id="oh_avscreencapture_setcapturestrategy" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetCaptureStrategy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setcapturestrategy" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_SetCaptureStrategy</span>(struct OH_AVScreenCapture *capture, OH_AVScreenCapture_CaptureStrategy *strategy)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>给指定的OH_AVScreenCapture实例设置捕获策略。</p>     <p>该接口应在录屏启动之前被调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/avscreencapture-oh-avscreencapture-capturestrategy">OH_AVScreenCapture_CaptureStrategy</a> *strategy</td>         <td class="cellrowborder" width="50%">指向捕获策略对象的指针。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture或strategy为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_STATE：在录屏启动之后调用该接口。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 967px;">     <h3 id="oh_avscreencapture_strategyforcanvasfollowrotation" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StrategyForCanvasFollowRotation()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_strategyforcanvasfollowrotation" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StrategyForCanvasFollowRotation</span>(OH_AVScreenCapture_CaptureStrategy *strategy, bool value)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置屏幕录屏自动跟随旋转配置。设为true，表示跟随屏幕旋转，并在横竖屏旋转后，自动调换虚拟屏尺寸，确保输出画面及时跟随旋转。</p>     <p>设置是否自动跟随旋转配置后，在旋转通知后，无需再手动调用<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-h#oh_avscreencapture_resizecanvas">OH_AVScreenCapture_ResizeCanvas</a>接口。</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/avscreencapture-oh-avscreencapture-capturestrategy">OH_AVScreenCapture_CaptureStrategy</a> *strategy</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_CaptureStrategy实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bool value</td>         <td class="cellrowborder" width="50%">          <p>虚拟屏的宽和高是否跟随屏幕旋转而旋转。</p>          <p>true表示虚拟屏的宽和高随着屏幕的旋转而旋转，false表示虚拟屏的宽和高保持初始设定。</p>          <p>默认是false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数strategy为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1039px;">     <h3 id="oh_avscreencapture_strategyforkeepcaptureduringcall" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StrategyForKeepCaptureDuringCall()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_strategyforkeepcaptureduringcall" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StrategyForKeepCaptureDuringCall</span>(OH_AVScreenCapture_CaptureStrategy *strategy, bool value)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>向CaptureStrategy实例设置蜂窝通话时是否保持录屏。</p>     <p>value设置为true时并且录屏时接听蜂窝通话的过程中，出于隐私要求，双方通话的声音（本地麦克风和对方说话声音）不会被录制，其他系统音录制正常。电话挂断之后，录屏框架恢复麦克风录制。注意，如果挂断电话时录屏应用在后台运行，麦克风录制会启动失败，原因是音频模块不允许后台应用启动麦克风录制。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/avscreencapture-oh-avscreencapture-capturestrategy">OH_AVScreenCapture_CaptureStrategy</a> *strategy</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_CaptureStrategy对象的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bool value</td>         <td class="cellrowborder" width="50%">          <p>蜂窝通话时是否可以进行屏幕录制。</p>          <p>true表示蜂窝通话时可以录屏，false表示蜂窝通话时不允许录屏。</p>          <p>默认是false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数strategy为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1022px;">     <h3 id="oh_avscreencapture_setcapturecontentchangedcallback" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetCaptureContentChangedCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setcapturecontentchangedcallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetCaptureContentChangedCallback</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,OH_AVScreenCapture_OnCaptureContentChanged callback, <span class="hljs-type">void</span> *userData)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置录屏内容变更回调事件，需在录屏启动前被调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_oncapturecontentchanged">OH_AVScreenCapture_OnCaptureContentChanged</a> callback</td>         <td class="cellrowborder" width="50%">指向录屏内容变更回调方法实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">指向应用提供的自定义数据的指针，在错误处理回调方法被调用时作为入参回传。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：操作成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：参数无效，输入参数capture或callback为空指针。</p>          <p>AV_SCREEN_CAPTURE_ERR_OPERATE_NOT_PERMIT：不允许操作，设置录屏内容回调失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 974px;">     <h3 id="oh_avscreencapture_setcapturearea" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetCaptureArea()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setcapturearea" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetCaptureArea</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,<span class="hljs-type">uint64_t</span> displayId, OH_Rect* area)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置或更新捕获区域。</p>     <p>接口在开始录屏前后都可以设置，设置的坐标和宽高不能为负数，捕获区域不能跨屏幕，区域位置设置失败后仍按照上一次的区域进行捕获。</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint64_t displayId</td>         <td class="cellrowborder" width="50%">需要执行屏幕捕获的屏幕ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-rect">OH_Rect</a>* area</td>         <td class="cellrowborder" width="50%">指定捕获的区域。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针、输入displayId不存在或输入的捕获区域异常。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 919px;">     <h3 id="oh_avscreencapture_strategyforprivacymaskmode" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StrategyForPrivacyMaskMode()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_strategyforprivacymaskmode" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StrategyForPrivacyMaskMode</span>(OH_AVScreenCapture_CaptureStrategy *strategy, int32_t value)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置隐私窗口屏蔽模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/avscreencapture-oh-avscreencapture-capturestrategy">OH_AVScreenCapture_CaptureStrategy</a> *strategy</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_CaptureStrategy实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t value</td>         <td class="cellrowborder" width="50%">          <p>设置为0，表示存在隐私窗口时，采用全屏屏蔽模式。</p>          <p>设置为1，表示存在隐私窗口时，采用隐私窗口屏蔽模式，设置为其他值时返回错误。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数strategy为空指针或输入value为无效值。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 878px;">     <h3 id="oh_avscreencapture_setselectioncallback" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_SetSelectionCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_setselectioncallback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-title">OH_AVScreenCapture_SetSelectionCallback</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,OH_AVScreenCapture_OnUserSelected callback, <span class="hljs-type">void</span> *userData)</span></span></li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>注册手工确认界面用户选择结果的回调，需在录屏启动前被调用。</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">struct OH_AVScreenCapture</a> *capture</td>         <td class="cellrowborder" width="50%">需要注册该回调的屏幕捕获对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onuserselected">OH_AVScreenCapture_OnUserSelected</a> callback</td>         <td class="cellrowborder" width="50%">用户在界面确认后，通过该函数通知应用进行逻辑处理。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">void *userData</td>         <td class="cellrowborder" width="50%">应用传入的控制块指针，在返回时携带给应用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数capture为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 847px;">     <h3 id="oh_avscreencapture_getcapturetypeselected" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_GetCaptureTypeSelected()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_getcapturetypeselected" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_GetCaptureTypeSelected</span>(OH_AVScreenCapture_UserSelectionInfo *selection,int32_t* type)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取用户在确认界面选择的屏幕捕获对象类型。在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onuserselected">OH_AVScreenCapture_OnUserSelected</a>回调中使用，selection指针在回调结束后销毁。</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/screencapture-oh-avscreencapture-userselectioninfo">OH_AVScreenCapture_UserSelectionInfo</a> *selection</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_UserSelectionInfo实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">int32_t* type</td>         <td class="cellrowborder" width="50%">用户选择的捕获对象类型，0：代表屏幕，1：代表窗口。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数selection为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 847px;">     <h3 id="oh_avscreencapture_getdisplayidselected" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_GetDisplayIdSelected()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_getdisplayidselected" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_GetDisplayIdSelected</span>(OH_AVScreenCapture_UserSelectionInfo *selection,uint64_t* displayId)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>获取确认页面，用户选择录制的屏幕ID。在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onuserselected">OH_AVScreenCapture_OnUserSelected</a>回调中使用，selection指针在回调结束后销毁。</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/screencapture-oh-avscreencapture-userselectioninfo">OH_AVScreenCapture_UserSelectionInfo</a> *selection</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_UserSelectionInfo实例的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">uint64_t* displayId</td>         <td class="cellrowborder" width="50%">返回用户选择的屏幕ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数selection为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1015px;">     <h3 id="oh_avscreencapture_strategyforbframesencoding" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StrategyForBFramesEncoding()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_strategyforbframesencoding" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StrategyForBFramesEncoding</span>(OH_AVScreenCapture_CaptureStrategy *strategy, bool value)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>向CaptureStrategy实例设置是否使能B帧编码，用于减小录制文件的大小。</p>     <p>B帧视频编码相关的约束和限制可以参考文档<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/video-encoding-b-frame#约束和限制" target="_blank">B帧视频编码约束和限制</a>。如果当前不符合B帧视频编码的约束和限制，则正常录制不含B帧的视频，不会返回错误。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/avscreencapture-oh-avscreencapture-capturestrategy">OH_AVScreenCapture_CaptureStrategy</a> *strategy</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_CaptureStrategy对象的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bool value</td>         <td class="cellrowborder" width="50%">          <p>录屏文件是否使能B帧编码。</p>          <p>true表示录屏文件使能B帧编码，false表示录屏文件禁用B帧编码。</p>          <p>默认是false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数strategy为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 871px;">     <h3 id="oh_avscreencapture_strategyforpickerpopup" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StrategyForPickerPopUp()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_strategyforpickerpopup" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StrategyForPickerPopUp</span>(OH_AVScreenCapture_CaptureStrategy *strategy, bool value)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置是否弹出屏幕捕获Picker。</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/avscreencapture-oh-avscreencapture-capturestrategy">OH_AVScreenCapture_CaptureStrategy</a> *strategy</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_CaptureStrategy对象的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bool value</td>         <td class="cellrowborder" width="50%">设置为false，代表APP已经指定了录屏内容，录屏启动后无需弹出Picker；设置为true代表录屏启动后统一弹出Picker；不设置，代表使用系统推荐行为。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数strategy为空指针或输入value为无效值。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 823px;">     <h3 id="oh_avscreencapture_strategyforfillmode" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_StrategyForFillMode()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_strategyforfillmode" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-eoj-c106="" class="highlight-div"><div _ngcontent-eoj-c106="" class="highlight-div-header"><div _ngcontent-eoj-c106="" class="highlight-div-header-left"><div _ngcontent-eoj-c106="" class="handle-button expand-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eoj-c106="" class="highlight-div-header-right"><div _ngcontent-eoj-c106="" class="handle-button ai-button"></div><div _ngcontent-eoj-c106="" class="handle-button line-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eoj-c106="" class="handle-button theme-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eoj-c106="" class="handle-button copy-button"><div _ngcontent-eoj-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eoj-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_AVSCREEN_CAPTURE_ErrCode <span class="hljs-built_in">OH_AVScreenCapture_StrategyForFillMode</span>(OH_AVScreenCapture_CaptureStrategy *strategy, OH_AVScreenCapture_FillMode mode)</li></ol></pre></div></div>     <p><strong>描述</strong></p>     <p>设置捕获图像在目标区域的填充模式。</p>     <p><strong>起始版本：</strong> 20</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.3.1.1" width="50%">参数项</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.3.1.2" width="50%">描述</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/avscreencapture-oh-avscreencapture-capturestrategy">OH_AVScreenCapture_CaptureStrategy</a> *strategy</td>         <td class="cellrowborder" width="50%">指向OH_AVScreenCapture_CaptureStrategy对象的指针。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_fillmode">OH_AVScreenCapture_FillMode</a> mode</td>         <td class="cellrowborder" width="50%">捕获图像在输出图像上的填充模式。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-errors-h#oh_avscreen_capture_errcode">OH_AVSCREEN_CAPTURE_ErrCode</a></td>         <td class="cellrowborder" width="50%">          <p>AV_SCREEN_CAPTURE_ERR_OK：执行成功。</p>          <p>AV_SCREEN_CAPTURE_ERR_INVALID_VAL：输入参数strategy为空指针。</p></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>