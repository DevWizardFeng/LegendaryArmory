<h1 _ngcontent-mrm-c119="" class="doc-title ng-star-inserted" title="native_avscreen_capture_base.h"> native_avscreen_capture_base.h </h1>

<div _ngcontent-mrm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>声明用于运行屏幕录制通用的结构体、字符常量、枚举。</p> <p><strong>引用文件：</strong> &lt;multimedia/player_framework/native_avscreen_capture_base.h&gt;</p> <p><strong>库：</strong> libnative_avscreen_capture.so</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture">AVScreenCapture</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-audiocaptureinfo">OH_AudioCaptureInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioCaptureInfo</td> <td class="cellrowborder" width="33.33333333333333%"><p>音频采样信息。</p> <p> 当audioSampleRate和audioChannels同时为0时，忽略该类型音频相关参数，不录制该类型音频数据。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-audioencinfo">OH_AudioEncInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioEncInfo</td> <td class="cellrowborder" width="33.33333333333333%">音频编码信息。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-audioinfo">OH_AudioInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioInfo</td> <td class="cellrowborder" width="33.33333333333333%"><p>音频信息。</p> <p> 同时采集音频麦克风和音频内录数据时，两路音频的audioSampleRate和audioChannels采样参数需要相同。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-videocaptureinfo">OH_VideoCaptureInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_VideoCaptureInfo</td> <td class="cellrowborder" width="33.33333333333333%">视频录制信息。当videoFrameWidth和videoFrameHeight同时为0时，忽略视频相关参数不录制屏幕数据。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-videoencinfo">OH_VideoEncInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_VideoEncInfo</td> <td class="cellrowborder" width="33.33333333333333%">视频编码参数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-videoinfo">OH_VideoInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_VideoInfo</td> <td class="cellrowborder" width="33.33333333333333%">视频信息。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-recorderinfo">OH_RecorderInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_RecorderInfo</td> <td class="cellrowborder" width="33.33333333333333%">录制文件信息。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencaptureconfig">OH_AVScreenCaptureConfig</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCaptureConfig</td> <td class="cellrowborder" width="33.33333333333333%">屏幕录制配置参数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapturecallback">OH_AVScreenCaptureCallback</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCaptureCallback</td> <td class="cellrowborder" width="33.33333333333333%"><p>OH_AVScreenCapture中所有异步回调函数指针的集合。将该结构体的实例注册到OH_AVScreenCapture实例中，并处理回调上报的信息，以保证OH_AVScreenCapture的正常运行。</p> <p> 从API version 12开始，推荐使用接口<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onerror">OH_AVScreenCapture_OnError</a>、<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-rect">OH_Rect</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_Rect</td> <td class="cellrowborder" width="33.33333333333333%">定义录屏界面的宽高以及画面信息。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-audiobuffer">OH_AudioBuffer</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioBuffer</td> <td class="cellrowborder" width="33.33333333333333%">定义了音频数据的大小、类型、时间戳等配置信息。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pi-avscreencapture-avscreencapture-oh-nativebuffer">OH_NativeBuffer</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_NativeBuffer</td> <td class="cellrowborder" width="33.33333333333333%">提供录屏的视频原始码流类。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture</td> <td class="cellrowborder" width="33.33333333333333%">通过OH_AVScreenCapture可以获取视频与音频的原始码流。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/i-avscreencapture-oh-avscreencapture-contentfilter">OH_AVScreenCapture_ContentFilter</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture_ContentFilter</td> <td class="cellrowborder" width="33.33333333333333%">通过OH_AVScreenCapture_ContentFilter过滤音视频内容。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/avscreencapture-oh-avscreencapture-capturestrategy">OH_AVScreenCapture_CaptureStrategy</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture_CaptureStrategy</td> <td class="cellrowborder" width="33.33333333333333%">通过OH_AVScreenCapture_CaptureStrategy设置录屏策略。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/screencapture-oh-avscreencapture-userselectioninfo">OH_AVScreenCapture_UserSelectionInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture_UserSelectionInfo</td> <td class="cellrowborder" width="33.33333333333333%">通过OH_AVScreenCapture_UserSelectionInfo获取用户在授权界面（选择界面）选择的参数。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="枚举" device-type="phone,2in1,tablet,tv">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_capturemode">OH_CaptureMode</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_CaptureMode</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示屏幕录制的不同模式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_audiocapturesourcetype">OH_AudioCaptureSourceType</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioCaptureSourceType</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示屏幕录制时的音频源类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_audiocodecformat">OH_AudioCodecFormat</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AudioCodecFormat</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示音频编码格式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_videocodecformat">OH_VideoCodecFormat</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_VideoCodecFormat</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示视频编码格式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_datatype">OH_DataType</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_DataType</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示屏幕录制流的数据格式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_videosourcetype">OH_VideoSourceType</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_VideoSourceType</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示视频源格式。当前仅支持RGBA格式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_containerformattype">OH_ContainerFormatType</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_ContainerFormatType</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示屏幕录制生成的文件类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturestatecode">OH_AVScreenCaptureStateCode</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCaptureStateCode</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示状态码。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturebuffertype">OH_AVScreenCaptureBufferType</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCaptureBufferType</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示buffer类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturefilterableaudiocontent">OH_AVScreenCaptureFilterableAudioContent</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCaptureFilterableAudioContent</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示可过滤的音频类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturecontentchangedevent">OH_AVScreenCaptureContentChangedEvent</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCaptureContentChangedEvent</td> <td class="cellrowborder" width="33.33333333333333%">枚举，表示录屏内容变更事件。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_fillmode">OH_AVScreenCapture_FillMode</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture_FillMode</td> <td class="cellrowborder" width="33.33333333333333%">图像填充模式。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencaptureonerror">typedef void (*OH_AVScreenCaptureOnError)(OH_AVScreenCapture *capture, int32_t errorCode)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCaptureOnError</td> <td class="cellrowborder" width="33.33333333333333%"><p>当OH_AVScreenCapture实例运行出错时，将调用函数指针。</p> <p> 从API version 12开始，推荐使用接口<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onerror">OH_AVScreenCapture_OnError</a>替代。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencaptureonaudiobufferavailable">typedef void (*OH_AVScreenCaptureOnAudioBufferAvailable)(OH_AVScreenCapture *capture, bool isReady, OH_AudioCaptureSourceType type)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCaptureOnAudioBufferAvailable</td> <td class="cellrowborder" width="33.33333333333333%"><p>当OH_AVScreenCapture实例操作期间音频缓存区可用时，将调用函数指针。</p> <p> 从API version 12开始，推荐使用接口<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencaptureonvideobufferavailable">typedef void (*OH_AVScreenCaptureOnVideoBufferAvailable)(OH_AVScreenCapture *capture, bool isReady)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCaptureOnVideoBufferAvailable</td> <td class="cellrowborder" width="33.33333333333333%"><p>当OH_AVScreenCapture实例操作期间视频缓存区可用时，将调用函数指针。</p> <p> 从API version 12开始，推荐使用接口<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onstatechange">typedef void (*OH_AVScreenCapture_OnStateChange)(struct OH_AVScreenCapture *capture, OH_AVScreenCaptureStateCode stateCode, void *userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture_OnStateChange</td> <td class="cellrowborder" width="33.33333333333333%">当OH_AVScreenCapture实例操作期间发生状态变更时，将调用函数指针。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onerror">typedef void (*OH_AVScreenCapture_OnError)(OH_AVScreenCapture *capture, int32_t errorCode, void *userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture_OnError</td> <td class="cellrowborder" width="33.33333333333333%">当OH_AVScreenCapture实例操作期间发生错误时，将调用函数指针。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">typedef void (*OH_AVScreenCapture_OnBufferAvailable)(OH_AVScreenCapture *capture, OH_AVBuffer *buffer, OH_AVScreenCaptureBufferType bufferType, int64_t timestamp, void *userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture_OnBufferAvailable</td> <td class="cellrowborder" width="33.33333333333333%">当OH_AVScreenCapture实例操作期间音频或视频缓存区可用时，将调用该函数指针。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_ondisplayselected">typedef void (*OH_AVScreenCapture_OnDisplaySelected)(OH_AVScreenCapture *capture, uint64_t displayId, void *userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture_OnDisplaySelected</td> <td class="cellrowborder" width="33.33333333333333%">当录屏事件开始时，将调用函数指针。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_oncapturecontentchanged">typedef void (*OH_AVScreenCapture_OnCaptureContentChanged)(OH_AVScreenCapture* capture, OH_AVScreenCaptureContentChangedEvent event, OH_Rect* area, void *userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture_OnCaptureContentChanged</td> <td class="cellrowborder" width="33.33333333333333%">当OH_AVScreenCapture实例操作期间录屏内容变化时，将调用函数指针。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onuserselected">typedef void (*OH_AVScreenCapture_OnUserSelected)(OH_AVScreenCapture* capture, OH_AVScreenCapture_UserSelectionInfo* selections, void *userData)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_AVScreenCapture_OnUserSelected</td> <td class="cellrowborder" width="33.33333333333333%">当用户在授权界面（选择界面）选择参数时，功能接口将参数返回给应用程序。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="枚举类型说明" device-type="phone,2in1,tablet,tv">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div>  <div class="tiledSection"><h3 id="oh_capturemode" device-type="phone,2in1,tablet,tv" class="firsth2">OH_CaptureMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_capturemode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_CaptureMode</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示屏幕录制的不同模式。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_CAPTURE_HOME_SCREEN = 0</td> <td class="cellrowborder" width="50%">录制主屏幕。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_CAPTURE_SPECIFIED_SCREEN = 1</td> <td class="cellrowborder" width="50%">录制指定屏幕。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_CAPTURE_SPECIFIED_WINDOW = 2</td> <td class="cellrowborder" width="50%">录制指定窗口。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_CAPTURE_INVAILD = -1</td> <td class="cellrowborder" width="50%">无效模式。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audiocapturesourcetype" device-type="phone,2in1,tablet,tv">OH_AudioCaptureSourceType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiocapturesourcetype" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AudioCaptureSourceType</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示屏幕录制时的音频源类型。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_SOURCE_INVALID = -1</td> <td class="cellrowborder" width="50%">无效音频源。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SOURCE_DEFAULT = 0</td> <td class="cellrowborder" width="50%">默认音频源，默认为麦克风。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_MIC = 1</td> <td class="cellrowborder" width="50%">麦克风录制的外部音频流。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_ALL_PLAYBACK = 2</td> <td class="cellrowborder" width="50%">系统播放的所有内部音频流。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_APP_PLAYBACK = 3</td> <td class="cellrowborder" width="50%">指定应用播放的内部音频流。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_audiocodecformat" device-type="phone,2in1,tablet,tv">OH_AudioCodecFormat<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_audiocodecformat" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AudioCodecFormat</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示音频编码格式。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_AUDIO_DEFAULT = 0</td> <td class="cellrowborder" width="50%">默认音频编码，默认为AAC_LC。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_AAC_LC = 3</td> <td class="cellrowborder" width="50%">AAC_LC音频编码。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_AUDIO_CODEC_FORMAT_BUTT</td> <td class="cellrowborder" width="50%">无效格式。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_videocodecformat" device-type="phone,2in1,tablet,tv">OH_VideoCodecFormat<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videocodecformat" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_VideoCodecFormat</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示视频编码格式。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_VIDEO_DEFAULT = 0</td> <td class="cellrowborder" width="50%">默认视频编码，默认为H.264。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_H264 = 2</td> <td class="cellrowborder" width="50%">H.264。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_H265 = 4</td> <td class="cellrowborder" width="50%">H.265/HEVC。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_MPEG4 = 6</td> <td class="cellrowborder" width="50%">MPEG4。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_VP8 = 8</td> <td class="cellrowborder" width="50%">VP8。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_VP9 = 10</td> <td class="cellrowborder" width="50%">VP9。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_VIDEO_CODEC_FORMAT_BUTT</td> <td class="cellrowborder" width="50%">无效格式。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_datatype" device-type="phone,2in1,tablet,tv">OH_DataType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_datatype" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_DataType</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示屏幕录制流的数据格式。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_ORIGINAL_STREAM = 0</td> <td class="cellrowborder" width="50%">原始流格式，如YUV/RGBA/PCM等。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_ENCODED_STREAM = 1</td> <td class="cellrowborder" width="50%">编码格式，如H264/AAC等。当前版本暂不支持。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_CAPTURE_FILE = 2</td> <td class="cellrowborder" width="50%">保存文件格式，支持mp4。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_INVAILD = -1</td> <td class="cellrowborder" width="50%">无效格式。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_videosourcetype" device-type="phone,2in1,tablet,tv">OH_VideoSourceType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_videosourcetype" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_VideoSourceType</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示视频源格式。当前仅支持RGBA格式。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_VIDEO_SOURCE_SURFACE_YUV = 0</td> <td class="cellrowborder" width="50%">YUV格式。当前版本暂不支持。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_VIDEO_SOURCE_SURFACE_ES</td> <td class="cellrowborder" width="50%">raw格式。当前版本暂不支持。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_VIDEO_SOURCE_SURFACE_RGBA</td> <td class="cellrowborder" width="50%">RGBA格式。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_VIDEO_SOURCE_BUTT</td> <td class="cellrowborder" width="50%">无效格式。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_containerformattype" device-type="phone,2in1,tablet,tv">OH_ContainerFormatType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_containerformattype" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_ContainerFormatType</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示屏幕录制生成的文件类型。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">CFT_MPEG_4A = 0</td> <td class="cellrowborder" width="50%">音频格式 m4a。</td> </tr> <tr><td class="cellrowborder" width="50%">CFT_MPEG_4 = 1</td> <td class="cellrowborder" width="50%">视频格式 mp4。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapturestatecode" device-type="phone,2in1,tablet,tv">OH_AVScreenCaptureStateCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapturestatecode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AVScreenCaptureStateCode</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示状态码。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_STARTED = 0</td> <td class="cellrowborder" width="50%">已开始录屏。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_CANCELED = 1</td> <td class="cellrowborder" width="50%">已取消录屏。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_STOPPED_BY_USER = 2</td> <td class="cellrowborder" width="50%">已停止录屏。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_INTERRUPTED_BY_OTHER = 3</td> <td class="cellrowborder" width="50%">录屏被其他录屏中断。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_STOPPED_BY_CALL = 4</td> <td class="cellrowborder" width="50%">录屏被通话中断。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_MIC_UNAVAILABLE = 5</td> <td class="cellrowborder" width="50%">麦克风不可用。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_MIC_MUTED_BY_USER = 6</td> <td class="cellrowborder" width="50%">麦克风被静音。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_MIC_UNMUTED_BY_USER = 7</td> <td class="cellrowborder" width="50%">麦克风被取消静音。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_ENTER_PRIVATE_SCENE = 8</td> <td class="cellrowborder" width="50%">进入隐私界面。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_EXIT_PRIVATE_SCENE = 9</td> <td class="cellrowborder" width="50%">隐私界面退出。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_STATE_STOPPED_BY_USER_SWITCHES = 10</td> <td class="cellrowborder" width="50%">系统用户切换，录屏中断。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapturebuffertype" device-type="phone,2in1,tablet,tv">OH_AVScreenCaptureBufferType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapturebuffertype" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AVScreenCaptureBufferType</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示buffer类型。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_BUFFERTYPE_VIDEO = 0</td> <td class="cellrowborder" width="50%">视频数据。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_BUFFERTYPE_AUDIO_INNER = 1</td> <td class="cellrowborder" width="50%">内录音频数据。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_BUFFERTYPE_AUDIO_MIC = 2</td> <td class="cellrowborder" width="50%">麦克风音频数据。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapturefilterableaudiocontent" device-type="phone,2in1,tablet,tv">OH_AVScreenCaptureFilterableAudioContent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapturefilterableaudiocontent" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AVScreenCaptureFilterableAudioContent</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示可过滤的音频类型。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_NOTIFICATION_AUDIO = 0</td> <td class="cellrowborder" width="50%">通知音。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_CURRENT_APP_AUDIO = 1</td> <td class="cellrowborder" width="50%">应用自身声音。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapturecontentchangedevent" device-type="phone,2in1,tablet,tv">OH_AVScreenCaptureContentChangedEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapturecontentchangedevent" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AVScreenCaptureContentChangedEvent</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>枚举，表示录屏内容变更事件。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 20</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_CONTENT_HIDE = 0</td> <td class="cellrowborder" width="50%">录屏内容变为隐藏。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_CONTENT_VISIBLE = 1</td> <td class="cellrowborder" width="50%">录屏内容变为可见。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREEN_CAPTURE_CONTENT_UNAVAILABLE = 2</td> <td class="cellrowborder" width="50%">录屏内容状态变化为不可用，如录屏窗口关闭。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapture_fillmode" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_FillMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_fillmode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_AVScreenCapture_FillMode</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>图像填充模式。</p> <p><strong>起始版本：</strong> 20</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_SCREENCAPTURE_FILLMODE_ASPECT_SCALE_FIT = 0</td> <td class="cellrowborder" width="50%">保持图像原始宽高比匹配目标图像大小，若比例不一致可能存在黑边。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_SCREENCAPTURE_FILLMODE_SCALE_TO_FILL = 1</td> <td class="cellrowborder" width="50%">图像拉伸匹配目标图像大小，若比例不一致图像变形。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div>  <div class="tiledSection"><h3 id="oh_avscreencaptureonerror" device-type="phone,2in1,tablet,tv" class="firsth2">OH_AVScreenCaptureOnError()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencaptureonerror" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*OH_AVScreenCaptureOnError)</span><span class="hljs-params">(OH_AVScreenCapture *capture, <span class="hljs-type">int32_t</span> errorCode)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>当OH_AVScreenCapture实例运行出错时，将调用函数指针。</p> <p> 从API version 12开始，推荐使用接口<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onerror">OH_AVScreenCapture_OnError</a>替代。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a> *capture</td> <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t errorCode</td> <td class="cellrowborder" width="50%">指定错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencaptureonaudiobufferavailable" device-type="phone,2in1,tablet,tv">OH_AVScreenCaptureOnAudioBufferAvailable()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencaptureonaudiobufferavailable" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_AVScreenCaptureOnAudioBufferAvailable)(OH_AVScreenCapture *capture, <span class="hljs-type">bool</span> isReady,OH_AudioCaptureSourceType type)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>当OH_AVScreenCapture实例操作期间音频缓存区可用时，将调用函数指针。</p> <p> 从API version 12开始，推荐使用接口<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a> *capture</td> <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">bool isReady</td> <td class="cellrowborder" width="50%">音频缓存区是否可用。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_audiocapturesourcetype">OH_AudioCaptureSourceType</a> type</td> <td class="cellrowborder" width="50%">音频源类型。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencaptureonvideobufferavailable" device-type="phone,2in1,tablet,tv">OH_AVScreenCaptureOnVideoBufferAvailable()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencaptureonvideobufferavailable" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_AVScreenCaptureOnVideoBufferAvailable)(OH_AVScreenCapture *capture, <span class="hljs-type">bool</span> isReady)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>当OH_AVScreenCapture实例操作期间视频缓存区可用时，将调用函数指针。</p> <p> 从API version 12开始，推荐使用接口<a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapture_onbufferavailable">OH_AVScreenCapture_OnBufferAvailable</a>替代。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a> *capture</td> <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">bool isReady</td> <td class="cellrowborder" width="50%">视频缓存区是否可用。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapture_onstatechange" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_OnStateChange()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_onstatechange" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_AVScreenCapture_OnStateChange)(<span class="hljs-keyword">struct</span> OH_AVScreenCapture *capture,OH_AVScreenCaptureStateCode stateCode, <span class="hljs-type">void</span> *userData)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>当OH_AVScreenCapture实例操作期间发生状态变更时，将调用函数指针。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">struct <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a> *capture</td> <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturestatecode">OH_AVScreenCaptureStateCode</a> stateCode</td> <td class="cellrowborder" width="50%">指定状态码。</td> </tr> <tr><td class="cellrowborder" width="50%">void *userData</td> <td class="cellrowborder" width="50%">指向应用设置该回调处理方法时提供的自定义数据的指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapture_onerror" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_OnError()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_onerror" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*OH_AVScreenCapture_OnError)</span><span class="hljs-params">(OH_AVScreenCapture *capture, <span class="hljs-type">int32_t</span> errorCode, <span class="hljs-type">void</span> *userData)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>当OH_AVScreenCapture实例操作期间发生错误时，将调用函数指针。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a> *capture</td> <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t errorCode</td> <td class="cellrowborder" width="50%">指定错误码。</td> </tr> <tr><td class="cellrowborder" width="50%">void *userData</td> <td class="cellrowborder" width="50%">指向应用设置该回调处理方法时提供的自定义数据的指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapture_onbufferavailable" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_OnBufferAvailable()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_onbufferavailable" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*OH_AVScreenCapture_OnBufferAvailable)</span><span class="hljs-params">(OH_AVScreenCapture *capture, OH_AVBuffer *buffer,OH_AVScreenCaptureBufferType bufferType, <span class="hljs-type">int64_t</span> timestamp, <span class="hljs-type">void</span> *userData)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>当OH_AVScreenCapture实例操作期间音频或视频缓存区可用时，将调用该函数指针。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a> *capture</td> <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-core-oh-avbuffer">OH_AVBuffer</a> *buffer</td> <td class="cellrowborder" width="50%">指向OH_AVBuffer缓存区实例的指针，该回调方法执行结束返回后，数据缓存区不再有效。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturebuffertype">OH_AVScreenCaptureBufferType</a> bufferType</td> <td class="cellrowborder" width="50%">可用缓存区的数据类型。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t timestamp</td> <td class="cellrowborder" width="50%">时间戳，单位纳秒。</td> </tr> <tr><td class="cellrowborder" width="50%">void *userData</td> <td class="cellrowborder" width="50%">指向应用设置该回调处理方法时提供的自定义数据的指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapture_ondisplayselected" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_OnDisplaySelected()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_ondisplayselected" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*OH_AVScreenCapture_OnDisplaySelected)</span><span class="hljs-params">(OH_AVScreenCapture *capture, <span class="hljs-type">uint64_t</span> displayId, <span class="hljs-type">void</span> *userData)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>当录屏事件开始时，将调用函数指针。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 15</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a> *capture</td> <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">uint64_t displayId</td> <td class="cellrowborder" width="50%">录屏屏幕的Id。</td> </tr> <tr><td class="cellrowborder" width="50%">void *userData</td> <td class="cellrowborder" width="50%">指向应用设置该回调处理方法时提供的自定义数据的指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapture_oncapturecontentchanged" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_OnCaptureContentChanged()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_oncapturecontentchanged" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_AVScreenCapture_OnCaptureContentChanged)(OH_AVScreenCapture* capture,OH_AVScreenCaptureContentChangedEvent event, OH_Rect* area, <span class="hljs-type">void</span> *userData)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>当OH_AVScreenCapture实例操作期间录屏内容变化时，将调用函数指针。</p> <p><strong>系统能力：</strong> SystemCapability.Multimedia.Media.AVScreenCapture</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a>* capture</td> <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-avscreen-capture-base-h#oh_avscreencapturecontentchangedevent">OH_AVScreenCaptureContentChangedEvent</a> event</td> <td class="cellrowborder" width="50%">录屏内容变更事件。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-rect">OH_Rect</a>* area</td> <td class="cellrowborder" width="50%">录屏内容可见时，对应位置信息。</td> </tr> <tr><td class="cellrowborder" width="50%">void *userData</td> <td class="cellrowborder" width="50%">指向应用设置该回调处理方法时提供的自定义数据的指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_avscreencapture_onuserselected" device-type="phone,2in1,tablet,tv">OH_AVScreenCapture_OnUserSelected()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_avscreencapture_onuserselected" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-mrm-c106="" class="highlight-div"><div _ngcontent-mrm-c106="" class="highlight-div-header"><div _ngcontent-mrm-c106="" class="highlight-div-header-left"><div _ngcontent-mrm-c106="" class="handle-button expand-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mrm-c106="" class="highlight-div-header-right"><div _ngcontent-mrm-c106="" class="handle-button ai-button"></div><div _ngcontent-mrm-c106="" class="handle-button line-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mrm-c106="" class="handle-button theme-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mrm-c106="" class="handle-button copy-button"><div _ngcontent-mrm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mrm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_AVScreenCapture_OnUserSelected)(OH_AVScreenCapture* capture,OH_AVScreenCapture_UserSelectionInfo* selections, <span class="hljs-type">void</span> *userData)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>当用户在授权界面（选择界面）选择参数时，功能接口将参数返回给应用程序。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-avscreencapture-oh-avscreencapture">OH_AVScreenCapture</a>* capture</td> <td class="cellrowborder" width="50%">指向OH_AVScreenCapture实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/screencapture-oh-avscreencapture-userselectioninfo">OH_AVScreenCapture_UserSelectionInfo</a>* selections</td> <td class="cellrowborder" width="50%">用户在授权界面选择的录制参数信息。</td> </tr> <tr><td class="cellrowborder" width="50%">void *userData</td> <td class="cellrowborder" width="50%">指向用户数据的指针。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>