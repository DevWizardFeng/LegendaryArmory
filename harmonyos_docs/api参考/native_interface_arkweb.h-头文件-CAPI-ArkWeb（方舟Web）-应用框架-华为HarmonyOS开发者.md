<h1 _ngcontent-ksl-c119="" class="doc-title ng-star-inserted" title="native_interface_arkweb.h"> native_interface_arkweb.h </h1>

<div _ngcontent-ksl-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>声明API接口供开发者使用注入对象和执行JavaScript代码等功能。</p> <p><strong>引用文件：</strong> &lt;web/native_interface_arkweb.h&gt;</p> <p><strong>库：</strong> libohweb.so</p> <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-web">Web</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-web-arkweb-blanklessinfo">ArkWeb_BlanklessInfo</a></td> <td class="cellrowborder" width="33.33333333333333%">ArkWeb_BlanklessInfo</td> <td class="cellrowborder" width="33.33333333333333%">页面首屏加载预测信息，主要包括首屏相似度预测值，首屏加载耗时预测值，预测错误码，应用需根据此信息来决策是否启用无白屏加载插帧方案。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="枚举" device-type="phone,2in1,tablet,wearable,tv">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#arkwebengineversion">ArkWebEngineVersion</a></td> <td class="cellrowborder" width="33.33333333333333%">ArkWebEngineVersion</td> <td class="cellrowborder" width="33.33333333333333%">ArkWeb内核版本，请参考<a href="https://gitcode.com/openharmony-tpc/chromium_src/blob/132_trunk/web/ReleaseNote/CompatibleWithLegacyWebEngine.md" target="_blank">M114内核在HarmonyOS6.0系统上的适配指导</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#nativearkweb_onjavascriptcallback">typedef void (*NativeArkWeb_OnJavaScriptCallback)(const char*)</a></td> <td class="cellrowborder" width="33.33333333333333%">NativeArkWeb_OnJavaScriptCallback</td> <td class="cellrowborder" width="33.33333333333333%">定义执行JavaScript代码后返回结果的回调函数的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#nativearkweb_onjavascriptproxycallback">typedef char* (*NativeArkWeb_OnJavaScriptProxyCallback)(const char** argv, int32_t argc)</a></td> <td class="cellrowborder" width="33.33333333333333%">NativeArkWeb_OnJavaScriptProxyCallback</td> <td class="cellrowborder" width="33.33333333333333%">定义注入对象的回调函数的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#nativearkweb_onvalidcallback">typedef void (*NativeArkWeb_OnValidCallback)(const char*)</a></td> <td class="cellrowborder" width="33.33333333333333%">NativeArkWeb_OnValidCallback</td> <td class="cellrowborder" width="33.33333333333333%">定义Web组件可用时的回调函数的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#nativearkweb_ondestroycallback">typedef void (*NativeArkWeb_OnDestroyCallback)(const char*)</a></td> <td class="cellrowborder" width="33.33333333333333%">NativeArkWeb_OnDestroyCallback</td> <td class="cellrowborder" width="33.33333333333333%">定义Web组件销毁时的回调函数的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_arkweb_oncookiesavecallback">typedef void (*OH_ArkWeb_OnCookieSaveCallback)(ArkWeb_ErrorCode errorCode)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_ArkWeb_OnCookieSaveCallback</td> <td class="cellrowborder" width="33.33333333333333%"><p>定义保存cookie的回调函数的类型。</p> <p><strong>起始版本：</strong> 20</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_runjavascript">void OH_NativeArkWeb_RunJavaScript(const char* webTag, const char* jsCode, NativeArkWeb_OnJavaScriptCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">在当前显示页面的环境下，加载并异步执行一段JavaScript代码。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_registerjavascriptproxy">void OH_NativeArkWeb_RegisterJavaScriptProxy(const char* webTag, const char* objName, const char** methodList,NativeArkWeb_OnJavaScriptProxyCallback* callback, int32_t size, bool needRefresh)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">注册对象及函数名称列表。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_unregisterjavascriptproxy">void OH_NativeArkWeb_UnregisterJavaScriptProxy(const char* webTag, const char* objName)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">删除已注册的对象及其下的回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_setjavascriptproxyvalidcallback">void OH_NativeArkWeb_SetJavaScriptProxyValidCallback(const char* webTag, NativeArkWeb_OnValidCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置对象可注册时的回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_getjavascriptproxyvalidcallback">NativeArkWeb_OnValidCallback OH_NativeArkWeb_GetJavaScriptProxyValidCallback(const char* webTag)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取已注册的对象可注册时的回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_setdestroycallback">void OH_NativeArkWeb_SetDestroyCallback(const char* webTag, NativeArkWeb_OnDestroyCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置组件销毁时的回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_getdestroycallback">NativeArkWeb_OnDestroyCallback OH_NativeArkWeb_GetDestroyCallback(const char* webTag)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取已注册的组件销毁时的回调函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_loaddata">ArkWeb_ErrorCode OH_NativeArkWeb_LoadData(const char* webTag,const char* data,const char* mimeType,const char* encoding,const char* baseUrl,const char* historyUrl)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">加载数据或URL，此函数应在主线程中调用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_registerasyncthreadjavascriptproxy">void OH_NativeArkWeb_RegisterAsyncThreadJavaScriptProxy(const char* webTag,const ArkWeb_ProxyObjectWithResult* proxyObject, const char* permission)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">注册一个包含回调方法的 JavaScript 对象，这些方法可带有返回值。该对象将被注入到当前页面的所有frame中，包括所有的 iframe，并且可以通过在 ArkWeb_ProxyObjectWithResult 中指定的名称进行访问。该对象只会在下一次加载或重新加载页面后在 JavaScript 中生效。这些方法将在 ArkWeb 的工作线程中执行。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_arkwebcookiemanager_savecookiesync">ArkWeb_ErrorCode OH_ArkWebCookieManager_SaveCookieSync()</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>将当前可通过CookieManager API访问的所有Cookie持久化到磁盘。如果要在非UI线程中使用此接口，则需要先使用OH_ArkWeb_GetNativeAPI初始化CookieManager接口。</p> <p><strong>起始版本：</strong> 20</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_arkwebcookiemanager_savecookieasync">void OH_ArkWebCookieManager_SaveCookieAsync(OH_ArkWeb_OnCookieSaveCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>将当前可通过CookieManager API访问的所有Cookie持久化到磁盘。在不初始化CookieManager接口的情况下，此接口将在UI线程上自动执行。</p> <p><strong>起始版本：</strong> 20</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_getblanklessinfowithkey">ArkWeb_BlanklessInfo OH_NativeArkWeb_GetBlanklessInfoWithKey(const char* webTag, const char* key)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取页面首屏加载预测信息（详细说明见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-web-arkweb-blanklessinfo">ArkWeb_BlanklessInfo</a>），并开始本次加载过渡帧生成，应用根据此信息确定是否需要启用无白屏加载。必须与<a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_setblanklessloadingwithkey">OH_NativeArkWeb_SetBlanklessLoadingWithKey</a>接口配套使用，并且必须在触发加载页面的接口之前调用。需在WebViewController与Web组件绑定后才能使用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_setblanklessloadingwithkey">ArkWeb_BlanklessErrorCode OH_NativeArkWeb_SetBlanklessLoadingWithKey(const char* webTag, const char* key, bool isStarted)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置无白屏加载是否启用。本接口必须与<a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_getblanklessinfowithkey">OH_NativeArkWeb_GetBlanklessInfoWithKey</a>接口配套使用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_clearblanklessloadingcache">void OH_NativeArkWeb_ClearBlanklessLoadingCache(const char* key[], uint32_t size)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">清除指定key值页面无白屏优化缓存，本接口只清除缓存。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_setblanklessloadingcachecapacity">uint32_t OH_NativeArkWeb_SetBlanklessLoadingCacheCapacity(uint32_t capacity)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置无白屏加载方案的持久化缓存容量，返回实际生效值。默认缓存容量为30MB，最大值为100MB。当实际缓存超过容量时，将采用淘汰不常用的过渡帧的方式清理。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_setactivewebengineversion">void OH_NativeArkWeb_SetActiveWebEngineVersion(ArkWebEngineVersion webEngineVersion)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">设置ArkWeb内核版本。若系统不支持指定版本，则设置无效。该接口为全局静态方法，须在调用initializeWebEngine前执行，若已加载任何Web组件，则该设置无效。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_getactivewebengineversion">ArkWebEngineVersion OH_NativeArkWeb_GetActiveWebEngineVersion()</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取当前使用的ArkWeb内核版本。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="枚举类型说明" device-type="phone,2in1,tablet,wearable,tv">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="arkwebengineversion" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">ArkWebEngineVersion<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="arkwebengineversion" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">ArkWebEngineVersion</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>ArkWeb内核版本，请参考<a href="https://gitcode.com/openharmony-tpc/chromium_src/blob/132_trunk/web/ReleaseNote/CompatibleWithLegacyWebEngine.md" target="_blank">M114内核在HarmonyOS6.0系统上的适配指导</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.1.4.1.1" width="33.33333333333333%"><strong>内核类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.4.1.2" width="33.33333333333333%"><strong>英文</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.4.1.3" width="33.33333333333333%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">常青内核</td> <td class="cellrowborder" width="33.33333333333333%">EVERGREEN WebCore</td> <td class="cellrowborder" width="33.33333333333333%">当前系统的最新Web内核，系统基于此内核进行完整的功能实现，推荐应用使用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">遗留内核</td> <td class="cellrowborder" width="33.33333333333333%">LEGACY WebCore</td> <td class="cellrowborder" width="33.33333333333333%">复用上一版本的内核，只做安全补丁及舆情问题修复，仅作为兼容性回滚使用，且遗留内核的支持有时间限制。</td> </tr>  </tbody></table></div> </div> <p><strong>起始版本：</strong> 20</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">SYSTEM_DEFAULT = 0</td> <td class="cellrowborder" width="50%">系统默认内核，HarmonyOS 6.0版本默认为M132。</td> </tr> <tr><td class="cellrowborder" width="50%">ARKWEB_M114 = 1</td> <td class="cellrowborder" width="50%">HarmonyOS 6.0版本的遗留内核。开发者可选择此遗留内核，若系统版本上不存在此内核则设置无效。</td> </tr> <tr><td class="cellrowborder" width="50%">ARKWEB_M132 = 2</td> <td class="cellrowborder" width="50%">HarmonyOS 6.0版本的常青内核，M132为此版本的默认内核。若系统版本上不存在此内核则设置无效。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="nativearkweb_onjavascriptcallback" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">NativeArkWeb_OnJavaScriptCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nativearkweb_onjavascriptcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*NativeArkWeb_OnJavaScriptCallback)(<span class="hljs-keyword">const</span> <span class="hljs-type">char</span>*)</li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>定义执行JavaScript代码后返回结果的回调函数的类型。</p> <p><strong>起始版本：</strong> 11</p> </div>  <div class="tiledSection"><h3 id="nativearkweb_onjavascriptproxycallback" device-type="phone,2in1,tablet,wearable,tv">NativeArkWeb_OnJavaScriptProxyCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nativearkweb_onjavascriptproxycallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">char</span>* (*NativeArkWeb_OnJavaScriptProxyCallback)(<span class="hljs-type">const</span> <span class="hljs-type">char</span>** argv, <span class="hljs-type">int32_t</span> argc)</li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>定义注入对象的回调函数的类型。</p> <p><strong>起始版本：</strong> 11</p> </div>  <div class="tiledSection"><h3 id="nativearkweb_onvalidcallback" device-type="phone,2in1,tablet,wearable,tv">NativeArkWeb_OnValidCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nativearkweb_onvalidcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*NativeArkWeb_OnValidCallback)(<span class="hljs-keyword">const</span> <span class="hljs-type">char</span>*)</li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>定义Web组件可用时的回调函数的类型。</p> <p><strong>起始版本：</strong> 11</p> </div>  <div class="tiledSection"><h3 id="nativearkweb_ondestroycallback" device-type="phone,2in1,tablet,wearable,tv">NativeArkWeb_OnDestroyCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nativearkweb_ondestroycallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*NativeArkWeb_OnDestroyCallback)(<span class="hljs-keyword">const</span> <span class="hljs-type">char</span>*)</li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>定义Web组件销毁时的回调函数的类型。</p> <p><strong>起始版本：</strong> 11</p> </div>  <div class="tiledSection"><h3 id="oh_arkweb_oncookiesavecallback" device-type="phone,2in1,tablet,wearable,tv">OH_ArkWeb_OnCookieSaveCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_arkweb_oncookiesavecallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_ArkWeb_OnCookieSaveCallback)(ArkWeb_ErrorCode errorCode)</li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>定义保存cookie的回调函数的类型。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ArkWeb_ErrorCode</a> errorCode</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_SUCCESS</a> 保存cookie成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_COOKIE_SAVE_FAILED</a> 保存cookie失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_COOKIE_MANAGER_INITIALIZE_FAILED</a> CookieManager初始化失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_runjavascript" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_RunJavaScript()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_runjavascript" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_NativeArkWeb_RunJavaScript</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* webTag, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* jsCode, NativeArkWeb_OnJavaScriptCallback callback)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>在当前显示页面的环境下，加载并异步执行一段JavaScript代码。</p> <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件的名称。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* jsCode</td> <td class="cellrowborder" width="50%">一段JavaScript的代码脚本。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#nativearkweb_onjavascriptcallback">NativeArkWeb_OnJavaScriptCallback</a> callback</td> <td class="cellrowborder" width="50%">代码执行完后通知开发者结果的回调函数。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_registerjavascriptproxy" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_RegisterJavaScriptProxy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_registerjavascriptproxy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_NativeArkWeb_RegisterJavaScriptProxy</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* webTag, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* objName, <span class="hljs-type">const</span> <span class="hljs-type">char</span>** methodList,NativeArkWeb_OnJavaScriptProxyCallback* callback, <span class="hljs-type">int32_t</span> size, <span class="hljs-type">bool</span> needRefresh)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>注册对象及函数名称列表。</p> <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件的名称。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* objName</td> <td class="cellrowborder" width="50%">注入对象的名称。</td> </tr> <tr><td class="cellrowborder" width="50%">const char** methodList</td> <td class="cellrowborder" width="50%">注入函数列表的名称。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#nativearkweb_onjavascriptproxycallback">NativeArkWeb_OnJavaScriptProxyCallback</a>* callback</td> <td class="cellrowborder" width="50%">注入的回调函数。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t size</td> <td class="cellrowborder" width="50%">注入的回调函数的个数。</td> </tr> <tr><td class="cellrowborder" width="50%">bool needRefresh</td> <td class="cellrowborder" width="50%">是否需要刷新页面。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_unregisterjavascriptproxy" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_UnregisterJavaScriptProxy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_unregisterjavascriptproxy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_NativeArkWeb_UnregisterJavaScriptProxy</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* webTag, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* objName)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>删除已注册的对象及其下的回调函数。</p> <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件的名称。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* objName</td> <td class="cellrowborder" width="50%">注入对象的名称。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_setjavascriptproxyvalidcallback" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_SetJavaScriptProxyValidCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_setjavascriptproxyvalidcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_NativeArkWeb_SetJavaScriptProxyValidCallback</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* webTag, NativeArkWeb_OnValidCallback callback)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>设置对象可注册时的回调函数。</p> <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件的名称。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#nativearkweb_onvalidcallback">NativeArkWeb_OnValidCallback</a> callback</td> <td class="cellrowborder" width="50%">对象可注册时的回调函数。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_getjavascriptproxyvalidcallback" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_GetJavaScriptProxyValidCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_getjavascriptproxyvalidcallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">NativeArkWeb_OnValidCallback <span class="hljs-title">OH_NativeArkWeb_GetJavaScriptProxyValidCallback</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* webTag)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>获取已注册的对象可注册时的回调函数。</p> <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件的名称。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#nativearkweb_onvalidcallback">NativeArkWeb_OnValidCallback</a></td> <td class="cellrowborder" width="50%">已注册的对象可注册时的回调函数。如果未设置由参数webTag指定的有效回调函数，则将返回空指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_setdestroycallback" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_SetDestroyCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_setdestroycallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_NativeArkWeb_SetDestroyCallback</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* webTag, NativeArkWeb_OnDestroyCallback callback)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>设置组件销毁时的回调函数。</p> <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件的名称。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#nativearkweb_ondestroycallback">NativeArkWeb_OnDestroyCallback</a> callback</td> <td class="cellrowborder" width="50%">组件销毁时的回调函数。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_getdestroycallback" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_GetDestroyCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_getdestroycallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">NativeArkWeb_OnDestroyCallback <span class="hljs-title">OH_NativeArkWeb_GetDestroyCallback</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* webTag)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>获取已注册的组件销毁时的回调函数。</p> <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件的名称。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#nativearkweb_ondestroycallback">NativeArkWeb_OnDestroyCallback</a></td> <td class="cellrowborder" width="50%">return 已注册的组件销毁时的回调函数。如果未设置由参数webTag指定的销毁回调函数，则将返回空指针。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_loaddata" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_LoadData()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_loaddata" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">ArkWeb_ErrorCode <span class="hljs-title">OH_NativeArkWeb_LoadData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* webTag,<span class="hljs-type">const</span> <span class="hljs-type">char</span>* data,<span class="hljs-type">const</span> <span class="hljs-type">char</span>* mimeType,<span class="hljs-type">const</span> <span class="hljs-type">char</span>* encoding,<span class="hljs-type">const</span> <span class="hljs-type">char</span>* baseUrl,<span class="hljs-type">const</span> <span class="hljs-type">char</span>* historyUrl)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>加载数据或URL，此函数应在主线程中调用。</p> <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p> <p><strong>起始版本：</strong> 15</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件的名称。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* data</td> <td class="cellrowborder" width="50%">"Base64"或"URL"编码的字符串，不能为空。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* mimeType</td> <td class="cellrowborder" width="50%">媒体类型，例如"text/html"，不能为空。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* encoding</td> <td class="cellrowborder" width="50%">编码类型，例如"UTF-8"，不能为空。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* baseUrl</td> <td class="cellrowborder" width="50%">指定的URL路径("http"/"https"/"data"协议),由Web组件分配给window.origin。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* historyUrl</td> <td class="cellrowborder" width="50%">历史URL，当它不为空时，可以通过历史记录来管理，实现前进和后退功能。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ArkWeb_ErrorCode</a></td> <td class="cellrowborder" width="50%"><p>LoadData 错误码。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_SUCCESS</a> 加载数据成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_INVALID_PARAM</a> 必填参数未指定或参数类型不正确或参数校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_INIT_ERROR</a> 初始化失败，根据传入的"webTag"找不到有效的Web组件。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_LIBRARY_OPEN_FAILURE</a> 打开动态链接库失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_LIBRARY_SYMBOL_NOT_FOUND</a> 动态链接库中未找到所需的符号。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_registerasyncthreadjavascriptproxy" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_RegisterAsyncThreadJavaScriptProxy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_registerasyncthreadjavascriptproxy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_NativeArkWeb_RegisterAsyncThreadJavaScriptProxy</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* webTag,<span class="hljs-type">const</span> ArkWeb_ProxyObjectWithResult* proxyObject, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* permission)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>注册一个包含回调方法的 JavaScript 对象，这些方法可带有返回值。该对象将被注入到当前页面的所有frame中，包括所有的 iframe，并且可以通过在 ArkWeb_ProxyObjectWithResult 中指定的名称进行访问。该对象只会在下一次加载或重新加载页面后在 JavaScript 中生效。这些方法将在 ArkWeb 的工作线程中执行。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件名称。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-web-arkweb-proxyobjectwithresult">ArkWeb_ProxyObjectWithResult</a>* proxyObject</td> <td class="cellrowborder" width="50%">注册的对象。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* permission</td> <td class="cellrowborder" width="50%">json格式字符串，默认值为空。该字符串用来配置JSBridge的权限限制，可以配置对象和方法级别。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_arkwebcookiemanager_savecookiesync" device-type="phone,2in1,tablet,wearable,tv">OH_ArkWebCookieManager_SaveCookieSync()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_arkwebcookiemanager_savecookiesync" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>ArkWeb_ErrorCode <span class="hljs-built_in">OH_ArkWebCookieManager_SaveCookieSync</span>()</li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>将当前可通过CookieManager API访问的所有Cookie持久化到磁盘。如果要在非UI线程中使用此接口，则需要先使用OH_ArkWeb_GetNativeAPI初始化CookieManager接口。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ArkWeb_ErrorCode</a></td> <td class="cellrowborder" width="50%"><p>SaveCookieSync错误码。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_SUCCESS</a> 保存cookie成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_COOKIE_SAVE_FAILED</a> 保存cookie失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_COOKIE_MANAGER_INITIALIZE_FAILED</a> CookieManager初始化失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_errorcode">ARKWEB_COOKIE_MANAGER_NOT_INITIALIZED</a> 在非UI线程中，不允许在不初始化CookieManager接口的情况下调用该接口。请先使用OH_ArkWeb_GetNativeAPI初始化CookieManager接口。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_arkwebcookiemanager_savecookieasync" device-type="phone,2in1,tablet,wearable,tv">OH_ArkWebCookieManager_SaveCookieAsync()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_arkwebcookiemanager_savecookieasync" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_ArkWebCookieManager_SaveCookieAsync</span><span class="hljs-params">(OH_ArkWeb_OnCookieSaveCallback callback)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>将当前可通过CookieManager API访问的所有Cookie持久化到磁盘。在不初始化CookieManager接口的情况下，此接口将在UI线程上自动执行。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_arkweb_oncookiesavecallback">OH_ArkWeb_OnCookieSaveCallback</a>* callback</td> <td class="cellrowborder" width="50%">保存cookie完成后执行该回调。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_getblanklessinfowithkey" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_GetBlanklessInfoWithKey()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_getblanklessinfowithkey" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-vbnet" data-highlighted="yes"><ol class="linenums"><li>ArkWeb_BlanklessInfo OH_NativeArkWeb_GetBlanklessInfoWithKey(<span class="hljs-keyword">const</span> <span class="hljs-type">char</span>* webTag, <span class="hljs-keyword">const</span> <span class="hljs-type">char</span>* <span class="hljs-keyword">key</span>)</li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>获取页面首屏加载预测信息（详细说明见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-web-arkweb-blanklessinfo">ArkWeb_BlanklessInfo</a>），并开始本次加载过渡帧生成，应用根据此信息确定是否需要启用无白屏加载。必须与<a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_setblanklessloadingwithkey">OH_NativeArkWeb_SetBlanklessLoadingWithKey</a>接口配套使用，并且必须在触发加载页面的接口之前调用。需在WebViewController与Web组件绑定后才能使用。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li>持久缓存容量：默认大小为30MB（约30页），可以通过接口<a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_setblanklessloadingcachecapacity">OH_NativeArkWeb_SetBlanklessLoadingCacheCapacity</a>设置缓存容量，具体见该接口说明。超过容量时根据LRU（Least Recently Used，淘汰不常用缓存的策略）机制更新缓存。自动清理超过7天的持久缓存数据，缓存清除后第三次加载页面开始有优化效果。</li><li>如果发现相似度（即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-web-arkweb-blanklessinfo">ArkWeb_BlanklessInfo</a>中的similarity）极低，请检查key值是否正确传递。</li><li>调用本接口后，会启用页面加载快照检测及生成过渡帧计算，产生一定资源开销。</li><li>启用无白屏加载的页面会带来一定的资源开销，开销的大小与Web组件的分辨率相关。假设分辨率的宽度和高度分别为：w, h。页面在打开阶段会增加峰值内存，增加量约为12wh B。页面打开后，内存会被回收，不影响稳态内存。增加固态应用缓存的大小，每个页面增加的缓存约w*h/10 B，缓存位于应用缓存的位置。</li></ul>  </div></div></div> <p><strong>需要权限：</strong> ohos.permission.INTERNET和ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 20</p> <p><strong>设备行为差异：</strong> 该接口在Phone中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件名称。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* key</td> <td class="cellrowborder" width="50%"><p>唯一标识本页面的key值。</p> <p>合法取值范围：非空，长度不超过2048个字符。</p> <p>设置非法值时不生效。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-web-arkweb-blanklessinfo">ArkWeb_BlanklessInfo</a></td> <td class="cellrowborder" width="50%">页面首屏加载预测信息，主要包括首屏相似度预测值，首屏加载耗时预测值，应用需根据此信息来决策是否启用无白屏加载插帧。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_setblanklessloadingwithkey" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_SetBlanklessLoadingWithKey()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_setblanklessloadingwithkey" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">ArkWeb_BlanklessErrorCode <span class="hljs-title">OH_NativeArkWeb_SetBlanklessLoadingWithKey</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* webTag, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* key, <span class="hljs-type">bool</span> isStarted)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>设置无白屏加载是否启用。本接口必须与<a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_getblanklessinfowithkey">OH_NativeArkWeb_GetBlanklessInfoWithKey</a>接口配套使用。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li>需在触发页面加载的接口之后调用。其他约束同<a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_getblanklessinfowithkey">OH_NativeArkWeb_GetBlanklessInfoWithKey</a>。</li><li>页面的加载必须在调用本套接口的组件中进行。</li><li>当相似度较低时，系统将判定为跳变过大，启用插帧会失败。</li></ul>  </div></div></div> <p><strong>需要权限：</strong> ohos.permission.INTERNET和ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* webTag</td> <td class="cellrowborder" width="50%">Web组件名称。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* key</td> <td class="cellrowborder" width="50%"><p>唯一标识本页面的key值。必须与<a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_getblanklessinfowithkey">OH_NativeArkWeb_GetBlanklessInfoWithKey</a>接口的key值相同。</p> <p>合法取值范围：非空，长度不超过2048个字符。</p> <p>非法值设置行为：返回错误码<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_blanklesserrorcode">ArkWeb_BlanklessErrorCode</a>，插帧不生效。</p> </td> </tr> <tr><td class="cellrowborder" width="50%">bool isStarted</td> <td class="cellrowborder" width="50%"><p>是否启用开始插帧，true：启用，false：不启用。</p> <p>默认值：false。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_blanklesserrorcode">ArkWeb_BlanklessErrorCode</a></td> <td class="cellrowborder" width="50%">返回接口调用是否成功，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-arkweb-error-code-h#arkweb_blanklesserrorcode">ArkWeb_BlanklessErrorCode</a>定义。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_clearblanklessloadingcache" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_ClearBlanklessLoadingCache()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_clearblanklessloadingcache" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_NativeArkWeb_ClearBlanklessLoadingCache</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* key[], <span class="hljs-type">uint32_t</span> size)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>清除指定key值页面无白屏优化缓存，本接口只清除缓存。</p> <p>在小程序或Web应用场景中，当页面加载时内容变化显著，可能会出现一次明显的跳变。若对此跳变有所顾虑，可使用该接口清除页面缓存。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li>清除之后的页面，需在第三次加载页面时才会产生优化效果。</li></ul>  </div></div></div> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* key[]</td> <td class="cellrowborder" width="50%"><p>清除Blankless优化方案页面的key值列表，key值为<a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#oh_nativearkweb_getblanklessinfowithkey">OH_NativeArkWeb_GetBlanklessInfoWithKey</a>中指定过的。</p> <p>默认值：所有Blankless优化方案缓存的页面key列表。</p> <p>合法取值范围：长度不超过2048，key列表长度&lt;=100。key和加载页面时输入给ArkWeb的相同。</p> <p>非法值设置行为：key长度超过2048时该key不生效；长度超过100时，取前100个；当为NULL时，使用默认值。</p> </td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t size</td> <td class="cellrowborder" width="50%"><p>keys数组的大小。</p> <p>默认值：0。</p> <p>合法取值范围：0~100。取值超过100时，keys数组取前100个。</p> <p>非法值设置行为：0。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_setblanklessloadingcachecapacity" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_SetBlanklessLoadingCacheCapacity()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_setblanklessloadingcachecapacity" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">uint32_t</span> <span class="hljs-title">OH_NativeArkWeb_SetBlanklessLoadingCacheCapacity</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> capacity)</span></span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>设置无白屏加载方案的持久化缓存容量，返回实际生效值。默认缓存容量为30MB，最大值为100MB。当实际缓存超过容量时，将采用淘汰不常用的过渡帧的方式清理。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">uint32_t capacity</td> <td class="cellrowborder" width="50%"><p>设置持久化缓存设置，单位MB，最大设置不超过100MB。</p> <p>默认值：30MB。</p> <p>合法取值范围：0~100，当设置为0时，无缓存空间，则功能全局不开启。</p> <p>非法值设置行为：小于0时生效值为0，大于100时生效值为100。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">uint32_t</td> <td class="cellrowborder" width="50%"><p>返回实际生效的容量值，范围0~100。</p> <p>小于0时生效值为0，大于100时生效值为100。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_setactivewebengineversion" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_SetActiveWebEngineVersion()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_setactivewebengineversion" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_NativeArkWeb_SetActiveWebEngineVersion</span><span class="hljs-params">(ArkWebEngineVersion webEngineVersion)</span></li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>设置ArkWeb内核版本。若系统不支持指定版本，则设置无效。</p> <p>该接口为全局静态方法，须在调用initializeWebEngine前执行，若已加载任何Web组件，则该设置无效。</p> <p><strong>遗留内核适配：</strong></p> <p>在HarmonyOS 6.0及以后，使用遗留内核时，部分ArkWeb接口不会生效，参考<a href="https://gitcode.com/openharmony-tpc/chromium_src/blob/132_trunk/web/ReleaseNote/CompatibleWithLegacyWebEngine.md" target="_blank">M114内核在HarmonyOS6.0系统上的适配指导</a>。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">ArkWebEngineVersion webEngineVersion</td> <td class="cellrowborder" width="50%">ArkWeb内核版本（详细说明见<a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#arkwebengineversion">ArkWebEngineVersion</a>）。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_nativearkweb_getactivewebengineversion" device-type="phone,2in1,tablet,wearable,tv">OH_NativeArkWeb_GetActiveWebEngineVersion()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_nativearkweb_getactivewebengineversion" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ksl-c106="" class="highlight-div"><div _ngcontent-ksl-c106="" class="highlight-div-header"><div _ngcontent-ksl-c106="" class="highlight-div-header-left"><div _ngcontent-ksl-c106="" class="handle-button expand-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ksl-c106="" class="highlight-div-header-right"><div _ngcontent-ksl-c106="" class="handle-button ai-button"></div><div _ngcontent-ksl-c106="" class="handle-button line-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ksl-c106="" class="handle-button theme-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ksl-c106="" class="handle-button copy-button"><div _ngcontent-ksl-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ksl-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>ArkWebEngineVersion <span class="hljs-built_in">OH_NativeArkWeb_GetActiveWebEngineVersion</span>()</li></ol></pre></div></div> <p><strong>描述：</strong></p> <p>获取当前使用的ArkWeb内核版本。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">ArkWebEngineVersion</td> <td class="cellrowborder" width="50%">返回由<a href="/consumer/cn/doc/harmonyos-references/capi-native-interface-arkweb-h#arkwebengineversion">ArkWebEngineVersion</a>枚举所定义的当前使用的ArkWeb内核版本。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>