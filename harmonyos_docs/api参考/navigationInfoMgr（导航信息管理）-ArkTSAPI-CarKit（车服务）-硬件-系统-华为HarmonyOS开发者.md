<h1 _ngcontent-krt-c119="" class="doc-title ng-star-inserted" title="navigationInfoMgr（导航信息管理）"> navigationInfoMgr（导航信息管理） </h1>

<div _ngcontent-krt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供地图导航功能集，包括向地图发送导航指令（如发起/结束导航等）、地图更新导航信息<span>(</span>如POI信息等<span>)</span>和导航元数据<span>(</span>Turn By Turn信息，简称TBT信息<span>)</span>等，用于导航流转、仪表/ARHUD显示等。</p> <p class="typescript"><strong>起始版本：</strong>4.1.0(11)</p> <div class="tiledSection"><h2 id="zh-cn_topic_0000001245084266_s56d19203690d4782bfc74069abb6bd71" device-type="phone,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zh-cn_topic_0000001245084266_s56d19203690d4782bfc74069abb6bd71" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><div _ngcontent-krt-c106="" class="highlight-div"><div _ngcontent-krt-c106="" class="highlight-div-header"><div _ngcontent-krt-c106="" class="highlight-div-header-left"><div _ngcontent-krt-c106="" class="handle-button expand-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krt-c106="" class="highlight-div-header-right"><div _ngcontent-krt-c106="" class="handle-button ai-button"></div><div _ngcontent-krt-c106="" class="handle-button line-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krt-c106="" class="handle-button theme-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krt-c106="" class="handle-button copy-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { navigationInfoMgr } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CarKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section153711644737" device-type="phone,tablet">NavigationStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section153711644737" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>该类为导航信息状态对象，定义了导航的状态信息，包括地图状态、导航类型、导航目的地、导航途经点、路线、地图和主题等。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.1" width="20.880000000000003%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.2" width="20.61%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.4" width="8.52%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.5" width="42.47%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.880000000000003%"><p>status</p> </td> <td class="cellrowborder" width="20.61%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section66501518181418">MapStatus</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>地图状态。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>naviType</p> </td> <td class="cellrowborder" width="20.61%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section12883193118184">NaviType</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>导航类型。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>destLocation</p> </td> <td class="cellrowborder" width="20.61%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section546213416209">Location</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>目的地。不同status对应的目的地信息不一样，具体如下：</p> <p>当status是MapStatus.NAVIGATION时，该字段表示目的地地址。</p> <p>当status是MapStatus.POI时，该字段表示POI信息。</p> <p>当status是MapStatus.CRUISE时，该字段表示CRUISE信息。</p> <p>当status是MapStatus.IDLE时，该字段无实际意义。</p> <p>当status是MapStatus.ROUTE时，该字段表示目的地地址。</p> <p>当status是MapStatus.UNAVAILABLE时，该字段无实际意义。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>passPoint</p> </td> <td class="cellrowborder" width="20.61%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section546213416209">Location</a>[]</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>途经点数组。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>routeIndex</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>路线编号，大于等于0的整数。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>routePreference</p> </td> <td class="cellrowborder" width="20.61%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section1697318441154">RoutePreference</a>[]</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>路线偏好。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>theme</p> </td> <td class="cellrowborder" width="20.61%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section129109467221">ThemeType</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>地图主题色。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>customData</p> </td> <td class="cellrowborder" width="20.61%"><p>String</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>自定义数据。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section66501518181418" device-type="phone,tablet">MapStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section66501518181418" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>地图状态枚举值，列举出地图具体的状态。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.1" width="24.51%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.2" width="25.64%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.3" width="49.85%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.51%"><p>IDLE</p> </td> <td class="cellrowborder" width="25.64%"><p>0</p> </td> <td class="cellrowborder" width="49.85%"><p>地图处于空闲态，地图应用未启动时，默认为该值。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>NAVIGATION</p> </td> <td class="cellrowborder" width="25.64%"><p>1</p> </td> <td class="cellrowborder" width="49.85%"><p>地图处于导航中。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>CRUISE</p> </td> <td class="cellrowborder" width="25.64%"><p>2</p> </td> <td class="cellrowborder" width="49.85%"><p>地图处于巡航中。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>POI</p> </td> <td class="cellrowborder" width="25.64%"><p>3</p> </td> <td class="cellrowborder" width="49.85%"><p>地图处于地图选点状态。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>ROUTE</p> </td> <td class="cellrowborder" width="25.64%"><p>4</p> </td> <td class="cellrowborder" width="49.85%"><p>地图处于路线选择状态。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>UNAVAILABLE</p> </td> <td class="cellrowborder" width="25.64%"><p>5</p> </td> <td class="cellrowborder" width="49.85%"><p>地图服务不可用，地图应用内部错误无法提供服务时，设置该值。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section12883193118184" device-type="phone,tablet">NaviType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12883193118184" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>导航类型枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.1" width="24.51%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.2" width="25.64%"><p><strong>值</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.3" width="49.85%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.51%"><p>DRIVING</p> </td> <td class="cellrowborder" width="25.64%"><p>0</p> </td> <td class="cellrowborder" width="49.85%"><p>驾车类型。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>MOTORCYCLE</p> </td> <td class="cellrowborder" width="25.64%"><p>1</p> </td> <td class="cellrowborder" width="49.85%"><p>摩托车类型。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>CYCLING</p> </td> <td class="cellrowborder" width="25.64%"><p>2</p> </td> <td class="cellrowborder" width="49.85%"><p>骑行类型。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>WALKING</p> </td> <td class="cellrowborder" width="25.64%"><p>3</p> </td> <td class="cellrowborder" width="49.85%"><p>步行类型。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section546213416209" device-type="phone,tablet">Location<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section546213416209" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>地理位置坐标编码。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="20.880000000000003%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="21.84%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="7.290000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="42.47%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.880000000000003%"><p>name</p> </td> <td class="cellrowborder" width="21.84%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.290000000000001%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>地址名称。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>coordType</p> </td> <td class="cellrowborder" width="21.84%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section18414131420206">LocationCoordType</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.290000000000001%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>地理位置坐标系编码。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>longitude</p> </td> <td class="cellrowborder" width="21.84%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.290000000000001%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>目的地经度，结合coordType使用，取值范围：[-180, 180]。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>latitude</p> </td> <td class="cellrowborder" width="21.84%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.290000000000001%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>目的地纬度，结合coordType使用，取值范围：[-90, 90]。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>altitude</p> </td> <td class="cellrowborder" width="21.84%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.290000000000001%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>目的地海拔高度，单位：m，默认值：0。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section18414131420206" device-type="phone,tablet">LocationCoordType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18414131420206" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>地理位置坐标系编码枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.1" width="24.51%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.2" width="25.64%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.4.1.3" width="49.85%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.51%"><p>GCJ02</p> </td> <td class="cellrowborder" width="25.64%"><p>0</p> </td> <td class="cellrowborder" width="49.85%"><p>国内坐标编码。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>WGS84</p> </td> <td class="cellrowborder" width="25.64%"><p>1</p> </td> <td class="cellrowborder" width="49.85%"><p>国际坐标编码。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1697318441154" device-type="phone,tablet">RoutePreference<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1697318441154" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>路线偏好枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.5.1.4.1.1" width="24.51%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.4.1.2" width="25.64%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.4.1.3" width="49.85%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.51%"><p>INTELLIGENT_RECOMMENDATION</p> </td> <td class="cellrowborder" width="25.64%"><p>0</p> </td> <td class="cellrowborder" width="49.85%"><p>智能推荐。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>HIGHWAY_FIRST</p> </td> <td class="cellrowborder" width="25.64%"><p>1</p> </td> <td class="cellrowborder" width="49.85%"><p>高速优先。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>AVOID_HIGHWAY</p> </td> <td class="cellrowborder" width="25.64%"><p>2</p> </td> <td class="cellrowborder" width="49.85%"><p>不走高速。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>AVOID_CONGESTION</p> </td> <td class="cellrowborder" width="25.64%"><p>3</p> </td> <td class="cellrowborder" width="49.85%"><p>躲避拥堵。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>LESS_CHARGE</p> </td> <td class="cellrowborder" width="25.64%"><p>4</p> </td> <td class="cellrowborder" width="49.85%"><p>少收费。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>MAIN_ROAD_FIRST</p> </td> <td class="cellrowborder" width="25.64%"><p>5</p> </td> <td class="cellrowborder" width="49.85%"><p>大路优先。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>TIME_FIRST</p> </td> <td class="cellrowborder" width="25.64%"><p>6</p> </td> <td class="cellrowborder" width="49.85%"><p>时间优先。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section129109467221" device-type="phone,tablet">ThemeType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section129109467221" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>地图主题颜色枚举值。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.1" width="24.51%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.2" width="25.64%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.4.1.3" width="49.85%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.51%"><p>LIGHT</p> </td> <td class="cellrowborder" width="25.64%"><p>0</p> </td> <td class="cellrowborder" width="49.85%"><p>地图是浅色主题。</p> </td> </tr> <tr><td class="cellrowborder" width="24.51%"><p>DARK</p> </td> <td class="cellrowborder" width="25.64%"><p>1</p> </td> <td class="cellrowborder" width="49.85%"><p>地图是深色主题。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section12118327148" device-type="phone,tablet">NavigationMetadata<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12118327148" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>该类为导航信息数据对象，定义了导航的数据信息，包括导航转向模式、引导距离、当前道路名、即将进入的下一个道路名等。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.1" width="20.880000000000003%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.2" width="20.61%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.4" width="8.52%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.5" width="42.47%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.880000000000003%"><p>naviTurnMode</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>导航转向模式，十六进制，取值范围0~3E7，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/car-appendix-naviturnmode">naviTurnMode</a>，按照16进制的格式传递。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>segmentLeftDis</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>下一次动作剩余距离，即引导距离，单位：m。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>currentRoadName</p> </td> <td class="cellrowborder" width="20.61%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>当前道路名。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>nextRoadName</p> </td> <td class="cellrowborder" width="20.61%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>下一次进入的道路名。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>intersectionView</p> </td> <td class="cellrowborder" width="20.61%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>路口放大图。</p> <p>图片的Base64字节编码值 。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>viewWidth</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>路口放大图片宽度，单位：pixel。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>viewHeight</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>路口放大图片高度，单位：pixel。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>trafficLane</p> </td> <td class="cellrowborder" width="20.61%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>车道线，从最左边到最右边按序排列。通讯以四位为一个单元进行解析，每个单元对应一个车道线，根据需求可以传多个车道线，图标编码为枚举值，具体参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/car-appendix-trafficlane">trafficLane</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>cameraSpeedLimitValid</p> </td> <td class="cellrowborder" width="20.61%"><p>boolean</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>电子眼限速有效位。true表示有效，false表示无效。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>cameraSpeedLimit</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>电子眼限速值，单位：m/s。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>naviSpeedLimitValid</p> </td> <td class="cellrowborder" width="20.61%"><p>boolean</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>导航限速有效位。true表示有效，false表示无效。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>naviSpeedLimit</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>导航限速值，单位：m/s。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>currentSpeed</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>当前车速，单位：m/s。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>naviBearing</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>导航方向角度，即相对正北方的角度。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>totalLeftDis</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>全程剩余距离，单位：m。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>remainingTime</p> </td> <td class="cellrowborder" width="20.61%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>否</p> </td> <td class="cellrowborder" width="42.47%"><p>剩余时间，单位：min。</p> </td> </tr> <tr><td class="cellrowborder" width="20.880000000000003%"><p>customData</p> </td> <td class="cellrowborder" width="20.61%"><p>Record&lt;string, Object&gt;</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="8.52%"><p>是</p> </td> <td class="cellrowborder" width="42.47%"><p>按自定义模式传递导航元数据。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section12455103872013" device-type="phone,tablet">SystemNavigationListener<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12455103872013" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>系统导航监听回调。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p> </div> <div class="tiledSection"><h3 id="section4797907482" device-type="phone,tablet" class="firsth2">onQueryNavigationInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section4797907482" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>onQueryNavigationInfo(query: QueryType, args: Record&lt;string, Object&gt;): Promise&lt;ResultData&gt;</p> <p>应用收到系统的查询请求，返回查询结果。</p> <p>使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="9.25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="40.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>query</p> </td> <td class="cellrowborder" width="30.8%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section5929173314151">QueryType</a></p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>查询命令。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>args</p> </td> <td class="cellrowborder" width="30.8%"><p>Record&lt;string, Object&gt;</p> </td> <td class="cellrowborder" width="9.25%"><p>是</p> </td> <td class="cellrowborder" width="40.75%"><p>query参数的附加参数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="43.04%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="56.96%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="43.04%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section268420482562">ResultData</a>&gt;</p> </td> <td class="cellrowborder" width="56.96%"><p>Promise对象，返回查询导航信息的结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>回调方法，具体代码示例见<a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section66695411419">registerSystemNavigationListener</a>示例。</p> </div> <div class="tiledSection"><h3 id="section1794319394151" device-type="phone,tablet">onReceiveNavigationCmd<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1794319394151" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>onReceiveNavigationCmd(command: CommandType, args: Record&lt;string, Object&gt;): Promise&lt;ResultData&gt;</p> <p>应用收到系统发送的指令，返回执行指令的结果。</p> <p>使用Promise异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="22.439999999999998%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="8.73%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="49.63%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>command</p> </td> <td class="cellrowborder" width="22.439999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section1255014591510">CommandType</a></p> </td> <td class="cellrowborder" width="8.73%"><p>是</p> </td> <td class="cellrowborder" width="49.63%"><p>系统服务需要应用执行的命令。</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>args</p> </td> <td class="cellrowborder" width="22.439999999999998%"><p>Record&lt;string, Object&gt;</p> </td> <td class="cellrowborder" width="8.73%"><p>是</p> </td> <td class="cellrowborder" width="49.63%"><p>命令的参数。其取值与具体的command有关，具体如下：</p> <p>当command为START_NAVIGATION时，</p> <p>其取值为"destLocation"：导航目的地，其参数类型为Location。</p> <p>当command为START_MAP_LAYER或STOP_MAP_LAYER时，</p> <p>其取值为"mapLayerDisplayId"：将地图图层启动到屏幕的displayId。</p> <p>当command为CHANGE_THEME时，</p> <p>其取值为"newTheme"：通知应用改变新主题，如浅色深色切换。</p> <p>当command为SEARCH_POI时，</p> <p>其取值为"address": 通知应用搜索对应的地址。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="43.04%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="56.96%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="43.04%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section268420482562">ResultData</a>&gt;</p> </td> <td class="cellrowborder" width="56.96%"><p>Promise对象，返回发送指令的结果。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>回调方法，具体代码示例见<a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section66695411419">registerSystemNavigationListener</a>示例。</p> </div> <div class="tiledSection"><h2 id="section5929173314151" device-type="phone,tablet">QueryType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5929173314151" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>查询导航信息枚举类型。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.1" width="21.15%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.2" width="33.94%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.3" width="44.91%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.15%"><p>NAVIGATION_STATUS</p> </td> <td class="cellrowborder" width="33.94%"><p>navigationStatus</p> </td> <td class="cellrowborder" width="44.91%"><p>查看导航状态，callback返回数据为<a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section153711644737">NavigationStatus</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>NAVIGATION_METADATA</p> </td> <td class="cellrowborder" width="33.94%"><p>navigationMetadata</p> </td> <td class="cellrowborder" width="44.91%"><p>查看导航TBT信息，callback返回数据为<a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section12118327148">NavigationMetadata</a>。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1255014591510" device-type="phone,tablet">CommandType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1255014591510" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>发送指令枚举类型。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.5.1.4.1.1" width="21.15%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.4.1.2" width="33.94%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.4.1.3" width="44.91%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.15%"><p>START_NAVIGATION</p> </td> <td class="cellrowborder" width="33.94%"><p>startNavigation</p> </td> <td class="cellrowborder" width="44.91%"><p>发起导航接口。</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>STOP_NAVIGATION</p> </td> <td class="cellrowborder" width="33.94%"><p>stopNavigation</p> </td> <td class="cellrowborder" width="44.91%"><p>停止导航接口。</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>GO_HOME</p> </td> <td class="cellrowborder" width="33.94%"><p>goHome</p> </td> <td class="cellrowborder" width="44.91%"><p>导航回家。</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>GO_TO_COMPANY</p> </td> <td class="cellrowborder" width="33.94%"><p>goToCompany</p> </td> <td class="cellrowborder" width="44.91%"><p>导航去公司。</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>START_MAP_LAYER</p> </td> <td class="cellrowborder" width="33.94%"><p>startMapLayer</p> </td> <td class="cellrowborder" width="44.91%"><p>启动地图图层到其他屏幕。</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>STOP_MAP_LAYER</p> </td> <td class="cellrowborder" width="33.94%"><p>stopMapLayer</p> </td> <td class="cellrowborder" width="44.91%"><p>销毁其他屏幕上的地图图层。</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>ZOOM_IN_MAP</p> </td> <td class="cellrowborder" width="33.94%"><p>zoomInMap</p> </td> <td class="cellrowborder" width="44.91%"><p>放大地图。</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>ZOOM_OUT_MAP</p> </td> <td class="cellrowborder" width="33.94%"><p>zoomOutMap</p> </td> <td class="cellrowborder" width="44.91%"><p>缩小地图。</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>CHANGE_THEME</p> </td> <td class="cellrowborder" width="33.94%"><p>changeTheme</p> </td> <td class="cellrowborder" width="44.91%"><p>更改主题。</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>START_UPDATE_NAVIGATION_STATUS</p> </td> <td class="cellrowborder" width="33.94%"><p>startUpdateNavigationStatus</p> </td> <td class="cellrowborder" width="44.91%"><p>开始更新导航状态。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>STOP_UPDATE_NAVIGATION_STATUS</p> </td> <td class="cellrowborder" width="33.94%"><p>stopUpdateNavigationStatus</p> </td> <td class="cellrowborder" width="44.91%"><p>停止更新导航状态。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> </td> </tr> <tr><td class="cellrowborder" width="21.15%"><p>SEARCH_POI</p> </td> <td class="cellrowborder" width="33.94%"><p>searchPOI</p> </td> <td class="cellrowborder" width="44.91%"><p>POI搜索。</p> <p><strong>起始版本：</strong>5.1.0(18)</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section268420482562" device-type="phone,tablet">ResultData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section268420482562" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>查询导航信息或发送指令的结果。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.1" width="17.76%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.2" width="28.34%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.3" width="7.66%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.4" width="8.55%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.5" width="37.69%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="17.76%"><p>code</p> </td> <td class="cellrowborder" width="28.34%"><p>number</p> </td> <td class="cellrowborder" width="7.66%"><p>否</p> </td> <td class="cellrowborder" width="8.55%"><p>否</p> </td> <td class="cellrowborder" width="37.69%"><p>错误码，0表示执行成功，非0表示执行失败（非0以三方地图应用传递的值为准）。</p> </td> </tr> <tr><td class="cellrowborder" width="17.76%"><p>message</p> </td> <td class="cellrowborder" width="28.34%"><p>string</p> </td> <td class="cellrowborder" width="7.66%"><p>否</p> </td> <td class="cellrowborder" width="8.55%"><p>否</p> </td> <td class="cellrowborder" width="37.69%"><p>错误信息，需结合code确定具体的错误信息：</p> <p>当code为0时表示执行成功的信息，如execute success。</p> <p>当code为非0时表示执行失败的信息，如 execute fail。</p> <p>具体以地图应用传递的值为准。</p> </td> </tr> <tr><td class="cellrowborder" width="17.76%"><p>data</p> </td> <td class="cellrowborder" width="28.34%"><p>{ [key: string]: object }</p> </td> <td class="cellrowborder" width="7.66%"><p>否</p> </td> <td class="cellrowborder" width="8.55%"><p>否</p> </td> <td class="cellrowborder" width="37.69%"><p>附加信息，应用可以根据实际需要以键值对的形式返回给系统。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section697819482586" device-type="phone,tablet">getNavigationController<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section697819482586" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>getNavigationController(): NavigationController</p> <p>用于获取导航信息服务的控制器。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>设备行为差异</strong>：该接口在Phone中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_SERVICE_NAVIGATION_INFO</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="43.04%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="56.96%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="43.04%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section5525718748">NavigationController</a></p> </td> <td class="cellrowborder" width="56.96%"><p>导航信息服务的控制器。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/car-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.1" width="40.550000000000004%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.2" width="59.45%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="40.550000000000004%"><p>201</p> </td> <td class="cellrowborder" width="59.45%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="40.550000000000004%"><p>801</p> </td> <td class="cellrowborder" width="59.45%"><p>Capability not supported.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-krt-c106="" class="highlight-div"><div _ngcontent-krt-c106="" class="highlight-div-header"><div _ngcontent-krt-c106="" class="highlight-div-header-left"><div _ngcontent-krt-c106="" class="handle-button expand-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krt-c106="" class="highlight-div-header-right"><div _ngcontent-krt-c106="" class="handle-button ai-button"></div><div _ngcontent-krt-c106="" class="handle-button line-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krt-c106="" class="handle-button theme-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krt-c106="" class="handle-button copy-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { navigationInfoMgr } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CarKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">naviInfoController</span>: navigationInfoMgr.<span class="hljs-property">NavigationController</span> = navigationInfoMgr.<span class="hljs-title function_">getNavigationController</span>();</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section5525718748" device-type="phone,tablet">NavigationController<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5525718748" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>导航信息服务的控制器，用于获取导航信息服务。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>起始版本：</strong>4.1.0(11)</p> </div> <div class="tiledSection"><h3 id="section126311558181112" device-type="phone,tablet" class="firsth2">updateNavigationStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section126311558181112" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>updateNavigationStatus(navigationStatus: NavigationStatus): void</p> <p>设置导航状态，包含地图状态、导航类型、导航目的地、导航途径点、路线、地图和主题等。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>设备行为差异</strong>：该接口在Phone中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_SERVICE_NAVIGATION_INFO</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.3" width="9.24%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.4" width="40.760000000000005%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>navigationStatus</p> </td> <td class="cellrowborder" width="30.8%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section153711644737">NavigationStatus</a></p> </td> <td class="cellrowborder" width="9.24%"><p>是</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>导航状态，包含地图状态、导航类型、导航目的地、导航途径点、路线、地图和主题等。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/car-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.1" width="40.550000000000004%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.2" width="59.45%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="40.550000000000004%"><p>201</p> </td> <td class="cellrowborder" width="59.45%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="40.550000000000004%"><p>801</p> </td> <td class="cellrowborder" width="59.45%"><p>Capability not supported.</p> </td> </tr> <tr><td class="cellrowborder" width="40.550000000000004%"><p>1003810001</p> </td> <td class="cellrowborder" width="59.45%"><p>Invalid parameter value.</p> </td> </tr> <tr><td class="cellrowborder" width="40.550000000000004%"><p>1003810002</p> </td> <td class="cellrowborder" width="59.45%"><p>The total size of all parameters exceeds the limit.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-krt-c106="" class="highlight-div"><div _ngcontent-krt-c106="" class="highlight-div-header"><div _ngcontent-krt-c106="" class="highlight-div-header-left"><div _ngcontent-krt-c106="" class="handle-button expand-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krt-c106="" class="highlight-div-header-right"><div _ngcontent-krt-c106="" class="handle-button ai-button"></div><div _ngcontent-krt-c106="" class="handle-button line-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krt-c106="" class="handle-button theme-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krt-c106="" class="handle-button copy-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { navigationInfoMgr } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CarKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 设置目的地</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">location</span>: navigationInfoMgr.<span class="hljs-property">Location</span> = {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">'location'</span>,</li><li>  <span class="hljs-attr">coordType</span>: navigationInfoMgr.<span class="hljs-property">LocationCoordType</span>.<span class="hljs-property">GCJ02</span>,</li><li>  <span class="hljs-attr">longitude</span>: <span class="hljs-number">0.000000000000001</span>,</li><li>  <span class="hljs-attr">latitude</span>: <span class="hljs-number">1.000000000000001</span>,</li><li>  <span class="hljs-attr">altitude</span>: <span class="hljs-number">2.000000000000001</span>,</li><li>};</li><li><span class="hljs-comment">// 设置途经点（可选）</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">passPoint0</span>: navigationInfoMgr.<span class="hljs-property">Location</span> = {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">'passPoint0'</span>,</li><li>  <span class="hljs-attr">coordType</span>: navigationInfoMgr.<span class="hljs-property">LocationCoordType</span>.<span class="hljs-property">GCJ02</span>,</li><li>  <span class="hljs-attr">longitude</span>: <span class="hljs-number">29.53851890563965</span>,</li><li>  <span class="hljs-attr">latitude</span>: <span class="hljs-number">16.50643920898438</span>,</li><li>  <span class="hljs-attr">altitude</span>: <span class="hljs-number">3.00015949516846</span>,</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">passPoint1</span>: navigationInfoMgr.<span class="hljs-property">Location</span> = {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">'passPoint1'</span>,</li><li>  <span class="hljs-attr">coordType</span>: navigationInfoMgr.<span class="hljs-property">LocationCoordType</span>.<span class="hljs-property">WGS84</span>,</li><li>  <span class="hljs-attr">longitude</span>: <span class="hljs-number">4.4445874651238</span>,</li><li>  <span class="hljs-attr">latitude</span>: <span class="hljs-number">5.55565329843751</span>,</li><li>  <span class="hljs-attr">altitude</span>: <span class="hljs-number">6.66641578943265</span>,</li><li>};</li><li><span class="hljs-comment">// 设置导航状态属性</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">navigationStatus</span>: navigationInfoMgr.<span class="hljs-property">NavigationStatus</span> = {</li><li>  <span class="hljs-attr">status</span>: navigationInfoMgr.<span class="hljs-property">MapStatus</span>.<span class="hljs-property">NAVIGATION</span>,</li><li>  <span class="hljs-attr">naviType</span>: navigationInfoMgr.<span class="hljs-property">NaviType</span>.<span class="hljs-property">DRIVING</span>,</li><li>  <span class="hljs-attr">destLocation</span>: location,</li><li>  <span class="hljs-attr">passPoint</span>: [passPoint0, passPoint1],</li><li>  <span class="hljs-attr">routeIndex</span>: <span class="hljs-number">101</span>,</li><li>  <span class="hljs-attr">customData</span>: <span class="hljs-string">"customData"</span>,</li><li>  <span class="hljs-attr">routePreference</span>: [</li><li>    navigationInfoMgr.<span class="hljs-property">RoutePreference</span>.<span class="hljs-property">TIME_FIRST</span>,</li><li>    navigationInfoMgr.<span class="hljs-property">RoutePreference</span>.<span class="hljs-property">MAIN_ROAD_FIRST</span></li><li>  ],</li><li>  <span class="hljs-attr">theme</span>: navigationInfoMgr.<span class="hljs-property">ThemeType</span>.<span class="hljs-property">LIGHT</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 获取 NavigationController</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">naviInfoController</span>: navigationInfoMgr.<span class="hljs-property">NavigationController</span> = navigationInfoMgr.<span class="hljs-title function_">getNavigationController</span>();</li><li>  naviInfoController.<span class="hljs-title function_">updateNavigationStatus</span>(navigationStatus);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-comment">// 捕获接口调用异常时的错误码并做相应处理</span></li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`update navigation status error, error code: <span class="hljs-subst">${e?.code}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section206991458141312" device-type="phone,tablet">updateNavigationMetadata<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section206991458141312" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>updateNavigationMetadata(navigationMetadata: NavigationMetadata): void</p> <p>设置导航数据，包含导航转向模式、引导距离、当前道路名、下一次进入道路名等。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>设备行为差异</strong>：该接口在Phone中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_SERVICE_NAVIGATION_INFO</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.9.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.5.1.3" width="9.24%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.5.1.4" width="40.760000000000005%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>navigationMetadata</p> </td> <td class="cellrowborder" width="30.8%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section12118327148">NavigationMetadata</a></p> </td> <td class="cellrowborder" width="9.24%"><p>是</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>导航数据，包含导航转向模式、引导距离、当前道路名、下一次进入道路名等。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/car-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.12.1.3.1.1" width="40.550000000000004%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.12.1.3.1.2" width="59.45%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="40.550000000000004%"><p>201</p> </td> <td class="cellrowborder" width="59.45%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="40.550000000000004%"><p>801</p> </td> <td class="cellrowborder" width="59.45%"><p>Capability not supported.</p> </td> </tr> <tr><td class="cellrowborder" width="40.550000000000004%"><p>1003810001</p> </td> <td class="cellrowborder" width="59.45%"><p>Invalid parameter value.</p> </td> </tr> <tr><td class="cellrowborder" width="40.550000000000004%"><p>1003810002</p> </td> <td class="cellrowborder" width="59.45%"><p>The total size of all parameters exceeds the limit.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-krt-c106="" class="highlight-div"><div _ngcontent-krt-c106="" class="highlight-div-header"><div _ngcontent-krt-c106="" class="highlight-div-header-left"><div _ngcontent-krt-c106="" class="handle-button expand-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krt-c106="" class="highlight-div-header-right"><div _ngcontent-krt-c106="" class="handle-button ai-button"></div><div _ngcontent-krt-c106="" class="handle-button line-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krt-c106="" class="handle-button theme-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krt-c106="" class="handle-button copy-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { navigationInfoMgr } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CarKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 设置数据属性</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: navigationInfoMgr.<span class="hljs-property">NavigationMetadata</span> = {</li><li>  <span class="hljs-attr">naviTurnMode</span>: <span class="hljs-number">0x0001</span>,</li><li>  <span class="hljs-attr">segmentLeftDis</span>: <span class="hljs-number">100</span>,</li><li>  <span class="hljs-attr">currentRoadName</span>: <span class="hljs-string">'currentRoad'</span>,</li><li>  <span class="hljs-attr">nextRoadName</span>: <span class="hljs-string">'nextRoad'</span>,</li><li>  <span class="hljs-attr">intersectionView</span>: <span class="hljs-string">'intersectionView'</span>,</li><li>  <span class="hljs-attr">viewWidth</span>: <span class="hljs-number">960</span>,</li><li>  <span class="hljs-attr">viewHeight</span>: <span class="hljs-number">450</span>,</li><li>  <span class="hljs-attr">trafficLane</span>: <span class="hljs-string">'0001'</span>,</li><li>  <span class="hljs-attr">cameraSpeedLimitValid</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">cameraSpeedLimit</span>: <span class="hljs-number">120</span>,</li><li>  <span class="hljs-attr">naviSpeedLimitValid</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">naviSpeedLimit</span>: <span class="hljs-number">80</span>,</li><li>  <span class="hljs-attr">currentSpeed</span>: <span class="hljs-number">75</span>,</li><li>  <span class="hljs-attr">naviBearing</span>: <span class="hljs-number">90.00000000000000</span>,</li><li>  <span class="hljs-attr">totalLeftDis</span>: <span class="hljs-number">1546</span>,</li><li>  <span class="hljs-attr">remainingTime</span>: <span class="hljs-number">5</span>,</li><li>  <span class="hljs-attr">customData</span>: { <span class="hljs-string">'sample'</span>: <span class="hljs-string">'sampleData'</span> }</li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 获取 NavigationController</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">navInfoController</span>: navigationInfoMgr.<span class="hljs-property">NavigationController</span> = navigationInfoMgr.<span class="hljs-title function_">getNavigationController</span>();</li><li>  navInfoController.<span class="hljs-title function_">updateNavigationMetadata</span>(data);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-comment">// 捕获接口调用异常时的错误码并做相应处理</span></li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`update navigation metadata error, error code: <span class="hljs-subst">${e?.code}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section66695411419" device-type="phone,tablet">registerSystemNavigationListener<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section66695411419" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>registerSystemNavigationListener(listener: SystemNavigationListener): void</p> <p>注册监听系统导航信息和指令，应用启动时需要调用该方法。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>设备行为差异</strong>：该接口在Phone中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_SERVICE_NAVIGATION_INFO</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.2" width="30.8%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.3" width="9.24%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.4" width="40.760000000000005%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>listener</p> </td> <td class="cellrowborder" width="30.8%"><p><a href="/consumer/cn/doc/harmonyos-references/car-navigationinfomgr#section12455103872013">SystemNavigationListener</a></p> </td> <td class="cellrowborder" width="9.24%"><p>是</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>注册监听系统导航信息和指令。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/car-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.1" width="40.550000000000004%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.2" width="59.45%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="40.550000000000004%"><p>201</p> </td> <td class="cellrowborder" width="59.45%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="40.550000000000004%"><p>801</p> </td> <td class="cellrowborder" width="59.45%"><p>Capability not supported.</p> </td> </tr> <tr><td class="cellrowborder" width="40.550000000000004%"><p>1003810001</p> </td> <td class="cellrowborder" width="59.45%"><p>Invalid parameter value.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-krt-c106="" class="highlight-div"><div _ngcontent-krt-c106="" class="highlight-div-header"><div _ngcontent-krt-c106="" class="highlight-div-header-left"><div _ngcontent-krt-c106="" class="handle-button expand-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krt-c106="" class="highlight-div-header-right"><div _ngcontent-krt-c106="" class="handle-button ai-button"></div><div _ngcontent-krt-c106="" class="handle-button line-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krt-c106="" class="handle-button theme-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krt-c106="" class="handle-button copy-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { navigationInfoMgr } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CarKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 实现SystemNavigationListener接口</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Listener</span> <span class="hljs-keyword">implements</span> navigationInfoMgr.<span class="hljs-property">SystemNavigationListener</span> {</li><li>  <span class="hljs-comment">// 实现onQueryNavigationInfo方法</span></li><li>  <span class="hljs-title function_">onQueryNavigationInfo</span>(<span class="hljs-attr">query</span>: navigationInfoMgr.<span class="hljs-property">QueryType</span>, <span class="hljs-attr">args</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;): <span class="hljs-title class_">Promise</span>&lt;navigationInfoMgr.<span class="hljs-property">ResultData</span>&gt; {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">ret</span>: navigationInfoMgr.<span class="hljs-property">ResultData</span> = {</li><li>        <span class="hljs-attr">code</span>: <span class="hljs-number">1001</span>,</li><li>        <span class="hljs-attr">message</span>: <span class="hljs-string">'message test1'</span>,</li><li>        <span class="hljs-attr">data</span>: args</li><li>      }</li><li>      <span class="hljs-title function_">resolve</span>(ret);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 实现onReceiveNavigationCmd方法</span></li><li>  <span class="hljs-title function_">onReceiveNavigationCmd</span>(<span class="hljs-attr">command</span>: navigationInfoMgr.<span class="hljs-property">CommandType</span>, <span class="hljs-attr">args</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;): <span class="hljs-title class_">Promise</span>&lt;navigationInfoMgr.<span class="hljs-property">ResultData</span>&gt; {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">ret</span>: navigationInfoMgr.<span class="hljs-property">ResultData</span> = {</li><li>        <span class="hljs-attr">code</span>: <span class="hljs-number">1002</span>,</li><li>        <span class="hljs-attr">message</span>: <span class="hljs-string">'message test2'</span>,</li><li>        <span class="hljs-attr">data</span>: args</li><li>      }</li><li>      <span class="hljs-title function_">resolve</span>(ret);</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 获取 NavigationController</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">navInfoController</span>: navigationInfoMgr.<span class="hljs-property">NavigationController</span> = navigationInfoMgr.<span class="hljs-title function_">getNavigationController</span>();</li><li>  navInfoController.<span class="hljs-title function_">registerSystemNavigationListener</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Listener</span>());</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-comment">// 捕获接口调用异常时的错误码并做相应处理</span></li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`register system navigation listener error, error code: <span class="hljs-subst">${e?.code}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section1567066181615" device-type="phone,tablet">unregisterSystemNavigationListener<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1567066181615" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>unregisterSystemNavigationListener(): void</p> <p>取消注册监听系统导航信息和指令。</p> <p><strong>系统能力：</strong>SystemCapability.CarService.NavigationInfo</p> <p><strong>设备行为差异</strong>：该接口在Phone中可正常调用，在其他设备类型中返回801错误码。</p> <p><strong>需要权限：</strong>ohos.permission.ACCESS_SERVICE_NAVIGATION_INFO</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/car-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="40.550000000000004%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="59.45%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="40.550000000000004%"><p>201</p> </td> <td class="cellrowborder" width="59.45%"><p>Permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="40.550000000000004%"><p>801</p> </td> <td class="cellrowborder" width="59.45%"><p>Capability not supported.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-krt-c106="" class="highlight-div"><div _ngcontent-krt-c106="" class="highlight-div-header"><div _ngcontent-krt-c106="" class="highlight-div-header-left"><div _ngcontent-krt-c106="" class="handle-button expand-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krt-c106="" class="highlight-div-header-right"><div _ngcontent-krt-c106="" class="handle-button ai-button"></div><div _ngcontent-krt-c106="" class="handle-button line-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krt-c106="" class="handle-button theme-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krt-c106="" class="handle-button copy-button"><div _ngcontent-krt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krt-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { navigationInfoMgr } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CarKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 获取 NavigationController</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">navInfoController</span>: navigationInfoMgr.<span class="hljs-property">NavigationController</span> = navigationInfoMgr.<span class="hljs-title function_">getNavigationController</span>();</li><li>  navInfoController.<span class="hljs-title function_">unregisterSystemNavigationListener</span>();</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-comment">// 捕获接口调用异常时的错误码并做相应处理</span></li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`unregister system navigation listener error, error code: <span class="hljs-subst">${e?.code}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>