<h1 _ngcontent-eke-c119="" class="doc-title ng-star-inserted" title="net_connection.h"> net_connection.h </h1>

<div _ngcontent-eke-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>为网络管理数据网络连接模块提供C接口。</p> <p><strong>引用文件：</strong> &lt;network/netmanager/net_connection.h&gt;</p> <p><strong>库：</strong> libnet_connection.so</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection">NetConnection</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_hasdefaultnet">int32_t OH_NetConn_HasDefaultNet(int32_t *hasDefaultNet)</a></td> <td class="cellrowborder" width="50%">查询是否有默认激活的数据网络。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_getdefaultnet">int32_t OH_NetConn_GetDefaultNet(NetConn_NetHandle *netHandle)</a></td> <td class="cellrowborder" width="50%">获取激活的默认的数据网络。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_isdefaultnetmetered">int32_t OH_NetConn_IsDefaultNetMetered(int32_t *isMetered)</a></td> <td class="cellrowborder" width="50%">查询默认网络是否按流量计费。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_getconnectionproperties">int32_t OH_NetConn_GetConnectionProperties(NetConn_NetHandle *netHandle, NetConn_ConnectionProperties *prop)</a></td> <td class="cellrowborder" width="50%">查询某个数据网络的链路信息。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_getnetcapabilities">int32_t OH_NetConn_GetNetCapabilities(NetConn_NetHandle *netHandle, NetConn_NetCapabilities *netCapabilities)</a></td> <td class="cellrowborder" width="50%">查询某个网络的能力集。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_getdefaulthttpproxy">int32_t OH_NetConn_GetDefaultHttpProxy(NetConn_HttpProxy *httpProxy)</a></td> <td class="cellrowborder" width="50%">查询默认的网络代理。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_getaddrinfo">int32_t OH_NetConn_GetAddrInfo(char *host, char *serv, struct addrinfo *hint, struct addrinfo **res, int32_t netId)</a></td> <td class="cellrowborder" width="50%">通过netId获取DNS结果。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_freednsresult">int32_t OH_NetConn_FreeDnsResult(struct addrinfo *res)</a></td> <td class="cellrowborder" width="50%">释放DNS结果。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_getallnets">int32_t OH_NetConn_GetAllNets(NetConn_NetHandleList *netHandleList)</a></td> <td class="cellrowborder" width="50%">查询所有激活的数据网络。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#ohos_netconn_registerdnsresolver">int32_t OHOS_NetConn_RegisterDnsResolver(OH_NetConn_CustomDnsResolver resolver)</a></td> <td class="cellrowborder" width="50%">注册自定义DNS解析器。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#ohos_netconn_unregisterdnsresolver">int32_t OHOS_NetConn_UnregisterDnsResolver(void)</a></td> <td class="cellrowborder" width="50%">取消注册自定义DNS解析器。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_registerdnsresolver">int32_t OH_NetConn_RegisterDnsResolver(OH_NetConn_CustomDnsResolver resolver)</a></td> <td class="cellrowborder" width="50%">注册自定义DNS解析器。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_unregisterdnsresolver">int32_t OH_NetConn_UnregisterDnsResolver(void)</a></td> <td class="cellrowborder" width="50%">取消注册自定义DNS解析器。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_bindsocket">int32_t OH_NetConn_BindSocket(int32_t socketFd, NetConn_NetHandle *netHandle)</a></td> <td class="cellrowborder" width="50%">将套接字绑定到特定的网络。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_setapphttpproxy">int32_t OH_NetConn_SetAppHttpProxy(NetConn_HttpProxy *httpProxy)</a></td> <td class="cellrowborder" width="50%">为当前应用设置http代理配置信息。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_registerapphttpproxycallback">int32_t OH_NetConn_RegisterAppHttpProxyCallback(OH_NetConn_AppHttpProxyChange appHttpProxyChange, uint32_t *callbackId)</a></td> <td class="cellrowborder" width="50%">注册监听应用http代理变化的回调。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_unregisterapphttpproxycallback">void OH_NetConn_UnregisterAppHttpProxyCallback(uint32_t callbackId)</a></td> <td class="cellrowborder" width="50%">注销监听应用http代理变化的回调。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_registernetconncallback">int32_t OH_NetConn_RegisterNetConnCallback(NetConn_NetSpecifier *specifier, NetConn_NetConnCallback *netConnCallback,uint32_t timeout, uint32_t *callbackId)</a></td> <td class="cellrowborder" width="50%">注册监听网络状态变化的回调。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_registerdefaultnetconncallback">int32_t OH_NetConn_RegisterDefaultNetConnCallback(NetConn_NetConnCallback *netConnCallback, uint32_t *callbackId)</a></td> <td class="cellrowborder" width="50%">注册监听默认网络状态变化的回调。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_unregisternetconncallback">int32_t OH_NetConn_UnregisterNetConnCallback(uint32_t callBackId)</a></td> <td class="cellrowborder" width="50%">注销监听网络状态变化的回调。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_setpacurl">NetConn_ErrorCode OH_NetConn_SetPacUrl(const char *pacUrl)</a></td> <td class="cellrowborder" width="50%">设置系统级代理自动配置（PAC）脚本地址。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_getpacurl">NetConn_ErrorCode OH_NetConn_GetPacUrl(char *pacUrl)</a></td> <td class="cellrowborder" width="50%">获取系统级代理自动配置（PAC）脚本地址。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_queryproberesult">int32_t OH_NetConn_QueryProbeResult(char *destination, int32_t duration, NetConn_ProbeResultInfo *probeResultInfo)</a></td> <td class="cellrowborder" width="50%">查询网络探测结果。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-net-connection-h#oh_netconn_querytraceroute">int32_t OH_NetConn_QueryTraceRoute(char *destination, NetConn_TraceRouteOption *option,NetConn_TraceRouteInfo *traceRouteInfo)</a></td> <td class="cellrowborder" width="50%">查询网络跟踪路由。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_netconn_hasdefaultnet" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_NetConn_HasDefaultNet()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_hasdefaultnet" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_HasDefaultNet</span><span class="hljs-params">(<span class="hljs-type">int32_t</span> *hasDefaultNet)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询是否有默认激活的数据网络。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">int32_t *hasDefaultNet</td> <td class="cellrowborder" width="50%">是否有默认网络。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。 201 - 缺少权限。</p> <p> 401 - 参数错误。 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_getdefaultnet" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_GetDefaultNet()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_getdefaultnet" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NetConn_GetDefaultNet</span>(NetConn_NetHandle *netHandle)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取激活的默认的数据网络。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-nethandle">NetConn_NetHandle</a> *netHandle</td> <td class="cellrowborder" width="50%">存放网络ID。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。 201 - 缺少权限。</p> <p> 401 - 参数错误。 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_isdefaultnetmetered" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_IsDefaultNetMetered()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_isdefaultnetmetered" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_IsDefaultNetMetered</span><span class="hljs-params">(<span class="hljs-type">int32_t</span> *isMetered)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询默认数据网络是否计流量。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">int32_t *isMetered</td> <td class="cellrowborder" width="50%">是否激活。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。 201 - 缺少权限。</p> <p> 401 - 参数错误。 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_getconnectionproperties" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_GetConnectionProperties()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_getconnectionproperties" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NetConn_GetConnectionProperties</span>(NetConn_NetHandle *netHandle, NetConn_ConnectionProperties *prop)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询某个数据网络的链路信息。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-nethandle">NetConn_NetHandle</a> *netHandle</td> <td class="cellrowborder" width="50%">存放网络ID。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-connectionproperties">NetConn_ConnectionProperties</a> *prop</td> <td class="cellrowborder" width="50%">存放链路信息。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。 201 - 缺少权限。</p> <p> 401 - 参数错误。 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_getnetcapabilities" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_GetNetCapabilities()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_getnetcapabilities" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NetConn_GetNetCapabilities</span>(NetConn_NetHandle *netHandle, NetConn_NetCapabilities *netCapabilities)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询某个网络的能力集。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-nethandle">NetConn_NetHandle</a> *netHandle</td> <td class="cellrowborder" width="50%">存放网络ID。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-netcapabilities">NetConn_NetCapabilities</a> *netCapabilities</td> <td class="cellrowborder" width="50%">存放能力集。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。 201 - 缺少权限。</p> <p> 401 - 参数错误. 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_getdefaulthttpproxy" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_GetDefaultHttpProxy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_getdefaulthttpproxy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NetConn_GetDefaultHttpProxy</span>(NetConn_HttpProxy *httpProxy)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询默认的网络代理。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-httpproxy">NetConn_HttpProxy</a> *httpProxy</td> <td class="cellrowborder" width="50%">存放代理配置信息。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。 201 - 缺少权限。</p> <p> 401 - 参数错误. 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_getaddrinfo" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_GetAddrInfo()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_getaddrinfo" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_GetAddrInfo</span><span class="hljs-params">(<span class="hljs-type">char</span> *host, <span class="hljs-type">char</span> *serv, <span class="hljs-keyword">struct</span> addrinfo *hint, <span class="hljs-keyword">struct</span> addrinfo **res, <span class="hljs-type">int32_t</span> netId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>通过netId获取DNS结果。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.INTERNET</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">char *host</td> <td class="cellrowborder" width="50%">所需查询的host名。</td> </tr> <tr><td class="cellrowborder" width="50%">char *serv</td> <td class="cellrowborder" width="50%">服务名。</td> </tr> <tr><td class="cellrowborder" width="50%">struct addrinfo *hint</td> <td class="cellrowborder" width="50%">指向addrinfo结构体的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">struct addrinfo **res</td> <td class="cellrowborder" width="50%">存放DNS查询结果，以链表形式返回。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t netId</td> <td class="cellrowborder" width="50%">DNS查询netId为0时，使用默认netid查询。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。 201 - 缺少权限。</p> <p> 401 - 参数错误。 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_freednsresult" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_FreeDnsResult()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_freednsresult" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_FreeDnsResult</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> addrinfo *res)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>释放DNS结果。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.INTERNET</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">struct addrinfo *res</td> <td class="cellrowborder" width="50%">DNS查询结果链表头。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。 201 - 缺少权限。</p> <p> 401 - 参数错误。 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_getallnets" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_GetAllNets()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_getallnets" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NetConn_GetAllNets</span>(NetConn_NetHandleList *netHandleList)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询所有激活的数据网络。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 11</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-nethandlelist">NetConn_NetHandleList</a> *netHandleList</td> <td class="cellrowborder" width="50%">网络信息列表。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。 201 - 缺少权限。</p> <p> 401 - 参数错误。 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="ohos_netconn_registerdnsresolver" device-type="phone,2in1,tablet,wearable,tv">OHOS_NetConn_RegisterDnsResolver()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ohos_netconn_registerdnsresolver" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OHOS_NetConn_RegisterDnsResolver</span>(OH_NetConn_CustomDnsResolver resolver)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册自定义DNS解析器。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>废弃版本：</strong> 13</p> <p><strong>替代接口：</strong> OH_NetConn_RegisterDnsResolver</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#oh_netconn_customdnsresolver">OH_NetConn_CustomDnsResolver</a> resolver</td> <td class="cellrowborder" width="50%">指向自定义DNS解析器的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。 401 - 参数错误。</p> <p> 2100002 - 无法连接到服务。 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="ohos_netconn_unregisterdnsresolver" device-type="phone,2in1,tablet,wearable,tv">OHOS_NetConn_UnregisterDnsResolver()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ohos_netconn_unregisterdnsresolver" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OHOS_NetConn_UnregisterDnsResolver</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>取消注册自定义DNS解析器。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>起始版本：</strong> 11</p> <p><strong>废弃版本：</strong> 13</p> <p><strong>替代接口：</strong> OH_NetConn_UnregisterDnsResolver</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p>2100002 - 无法连接到服务。 </p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_registerdnsresolver" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_RegisterDnsResolver()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_registerdnsresolver" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NetConn_RegisterDnsResolver</span>(OH_NetConn_CustomDnsResolver resolver)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册自定义DNS解析器。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>起始版本：</strong> 13</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#oh_netconn_customdnsresolver">OH_NetConn_CustomDnsResolver</a> resolver</td> <td class="cellrowborder" width="50%">指向自定义DNS解析器的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>返回结果码。</p> <p> NETMANAGER_EXT_SUCCESS 如果操作成功。 </p> <p> NETMANAGER_ERR_PARAMETER_ERROR 参数错误。请输入正确的参数。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_unregisterdnsresolver" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_UnregisterDnsResolver()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_unregisterdnsresolver" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_UnregisterDnsResolver</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>取消注册自定义DNS解析器。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>起始版本：</strong> 13</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_bindsocket" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_BindSocket()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_bindsocket" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_BindSocket</span><span class="hljs-params">(<span class="hljs-type">int32_t</span> socketFd, NetConn_NetHandle *netHandle)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将套接字绑定到特定的网络。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">int32_t socketFd</td> <td class="cellrowborder" width="50%">由用户构造的套接字。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-nethandle">NetConn_NetHandle</a> *netHandle</td> <td class="cellrowborder" width="50%">指针类型，指向包含网络ID的网络句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> 401 - 参数错误。</p> <p> 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_setapphttpproxy" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_SetAppHttpProxy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_setapphttpproxy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_NetConn_SetAppHttpProxy</span>(NetConn_HttpProxy *httpProxy)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>为当前应用设置http代理配置信息。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-httpproxy">NetConn_HttpProxy</a> *httpProxy</td> <td class="cellrowborder" width="50%">需要设置的http代理配置信息。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> 401 - 参数错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_registerapphttpproxycallback" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_RegisterAppHttpProxyCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_registerapphttpproxycallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_RegisterAppHttpProxyCallback</span><span class="hljs-params">(OH_NetConn_AppHttpProxyChange appHttpProxyChange, <span class="hljs-type">uint32_t</span> *callbackId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册监听应用http代理变化的回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#oh_netconn_apphttpproxychange">OH_NetConn_AppHttpProxyChange</a> appHttpProxyChange</td> <td class="cellrowborder" width="50%">需要注册的监听回调。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t *callbackId</td> <td class="cellrowborder" width="50%">回调注册后生成的id, 关联已注册的回调。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> 401 - 参数错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_unregisterapphttpproxycallback" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_UnregisterAppHttpProxyCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_unregisterapphttpproxycallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OH_NetConn_UnregisterAppHttpProxyCallback</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> callbackId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注销监听应用http代理变化的回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">uint32_t callbackId</td> <td class="cellrowborder" width="50%">需要被注销的回调所对应的id。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_registernetconncallback" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_RegisterNetConnCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_registernetconncallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_RegisterNetConnCallback</span><span class="hljs-params">(NetConn_NetSpecifier *specifier, NetConn_NetConnCallback *netConnCallback,<span class="hljs-type">uint32_t</span> timeout, <span class="hljs-type">uint32_t</span> *callbackId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册监听网络状态变化的回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">netSpecifier</td> <td class="cellrowborder" width="50%">网络特征集。</td> </tr> <tr><td class="cellrowborder" width="50%">callback</td> <td class="cellrowborder" width="50%">注册的回调函数集合。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t timeout</td> <td class="cellrowborder" width="50%">超时时间，单位为毫秒，为0时表示无限等待。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t *callbackId</td> <td class="cellrowborder" width="50%">出参，对应本次注册成功的回调。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> 201 - 缺少权限。</p> <p> 401 - 参数错误。</p> <p> 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> <p> 2101008 - 回调已注册。</p> <p> 2101022 - 请求数超出了允许的最大值。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_registerdefaultnetconncallback" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_RegisterDefaultNetConnCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_registerdefaultnetconncallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_RegisterDefaultNetConnCallback</span><span class="hljs-params">(NetConn_NetConnCallback *netConnCallback, <span class="hljs-type">uint32_t</span> *callbackId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注册监听默认网络状态变化的回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">callback</td> <td class="cellrowborder" width="50%">注册的回调函数集合。</td> </tr> <tr><td class="cellrowborder" width="50%">uint32_t *callbackId</td> <td class="cellrowborder" width="50%">出参，对应本次注册成功的回调。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> 201 - 缺少权限。</p> <p> 401 - 参数错误。</p> <p> 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> <p> 2101008 - 回调已注册。</p> <p> 2101022 - 请求数超出了允许的最大值。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_unregisternetconncallback" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_UnregisterNetConnCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_unregisternetconncallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_UnregisterNetConnCallback</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> callBackId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>注销监听网络状态变化的回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.NetManager.Core</p> <p><strong>需要权限：</strong> ohos.permission.GET_NETWORK_INFO</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">uint32_t callBackId</td> <td class="cellrowborder" width="50%">需要被注销的回调对应id。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> 201 - 缺少权限。</p> <p> 401 - 参数错误。</p> <p> 2100002 - 无法连接到服务。</p> <p> 2100003 - 内部错误。</p> <p> 2101007 - 回调不存在。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_setpacurl" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_SetPacUrl()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_setpacurl" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">NetConn_ErrorCode <span class="hljs-title">OH_NetConn_SetPacUrl</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *pacUrl)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置当前PAC脚本（Proxy Auto-Configuration Script，代理自动配置脚本）的URL地址，比如：http://127.0.0.1:21998/PacProxyScript.pac。通过解析脚本地址可以获取代理信息。</p> <p><strong>需要权限：</strong> ohos.permission.SET_PAC_URL</p> <p><strong>起始版本：</strong> 15</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char *pacUrl</td> <td class="cellrowborder" width="50%">需要设置的PAC脚本地址。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NetConn_ErrorCode</a></td> <td class="cellrowborder" width="50%"><p>结果定义在 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NetConn_ErrorCode</a>。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NETCONN_SUCCESS</a> 成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NETCONN_PERMISSION_DENIED</a> 缺少权限。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NETCONN_PARAMETER_ERROR</a> 参数错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NETCONN_OPERATION_FAILED</a> 无法连接到服务。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NETCONN_INTERNAL_ERROR</a> 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_getpacurl" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_GetPacUrl()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_getpacurl" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li>NetConn_ErrorCode <span class="hljs-title function_">OH_NetConn_GetPacUrl</span><span class="hljs-params">(<span class="hljs-type">char</span> *pacUrl)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取系统级代理自动配置（PAC）脚本地址。</p> <p><strong>起始版本：</strong> 15</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">char *pacUrl</td> <td class="cellrowborder" width="50%">获取的PAC脚本地址。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NetConn_ErrorCode</a></td> <td class="cellrowborder" width="50%"><p>结果定义在 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NetConn_ErrorCode</a>。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NETCONN_SUCCESS</a> 成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NETCONN_PARAMETER_ERROR</a> 参数错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NETCONN_OPERATION_FAILED</a> 无法连接到服务。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-net-connection-type-h#netconn_errorcode">NETCONN_INTERNAL_ERROR</a> 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_queryproberesult" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_QueryProbeResult()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_queryproberesult" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_QueryProbeResult</span><span class="hljs-params">(<span class="hljs-type">char</span> *destination, <span class="hljs-type">int32_t</span> duration, NetConn_ProbeResultInfo *probeResultInfo)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询网络探测结果。</p> <p><strong>需要权限：</strong> ohos.permission.INTERNET</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">char *destination</td> <td class="cellrowborder" width="50%">目的地址。</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t duration</td> <td class="cellrowborder" width="50%">探测持续时间。单位：秒。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-proberesultinfo">NetConn_ProbeResultInfo</a> *probeResultInfo</td> <td class="cellrowborder" width="50%">丢包率和往返时间（RTT）。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> 201 - 缺少权限。</p> <p> 401 - 参数错误。</p> <p> 2100003 - 内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_netconn_querytraceroute" device-type="phone,2in1,tablet,wearable,tv">OH_NetConn_QueryTraceRoute()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_netconn_querytraceroute" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-eke-c106="" class="highlight-div"><div _ngcontent-eke-c106="" class="highlight-div-header"><div _ngcontent-eke-c106="" class="highlight-div-header-left"><div _ngcontent-eke-c106="" class="handle-button expand-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-eke-c106="" class="highlight-div-header-right"><div _ngcontent-eke-c106="" class="handle-button ai-button"></div><div _ngcontent-eke-c106="" class="handle-button line-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-eke-c106="" class="handle-button theme-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-eke-c106="" class="handle-button copy-button"><div _ngcontent-eke-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-eke-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_NetConn_QueryTraceRoute</span><span class="hljs-params">(<span class="hljs-type">char</span> *destination, NetConn_TraceRouteOption *option,NetConn_TraceRouteInfo *traceRouteInfo)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询网络跟踪路由。</p> <p><strong>需要权限：</strong> ohos.permission.INTERNET、ohos.permission.LOCATION 和 ohos.permission.ACCESS_NET_TRACE_INFO</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">char *destination</td> <td class="cellrowborder" width="50%">目的地址。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-tracerouteoption">NetConn_TraceRouteOption</a> *option</td> <td class="cellrowborder" width="50%">路由参数选项。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-netconnection-netconn-tracerouteinfo">NetConn_TraceRouteInfo</a> *traceRouteInfo</td> <td class="cellrowborder" width="50%">路由结果。需传入数组指针，数组大小代表路由跳数，默认30跳。若自定义跳数，则需保证数组大小与option字段中的maxJumpNumber数值保持一致。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p>0 - 成功。</p> <p> 201 - 缺少权限。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>