<h1 _ngcontent-bld-c119="" class="doc-title ng-star-inserted" title="nfctech (标准NFC-Tag Nfc 技术)"> nfctech (标准NFC-Tag Nfc 技术) </h1>

<div _ngcontent-bld-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>本模块主要用于采用不同Nfc技术的Tag的读写操作。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 7开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">      <p>导入tag模块编辑器报错，在某个具体设备型号上能力可能超出工程默认设备定义的能力集范围，如需要使用此部分能力需额外配置自定义syscap，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/syscap#syscap开发指导" target="_blank">syscap开发指南</a>。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,wearable">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 326px;">     <h2 id="nfcatag" device-type="phone,wearable">NfcATag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcatag" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>NfcATag 提供 NFC-A(ISO 14443-3A)技术的属性和I/O操作的访问，继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>TagSession是所有NFC Tag技术类型的基类， 提供建立连接和发送数据等共同接口。具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>NfcATag获取方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nfc-tag-access-guide" target="_blank">nfc-tag开发指南</a>。</p>     <p>以下是NfcATag的独有接口。</p>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 730px;">     <h3 id="nfcataggetsak" device-type="phone,wearable" class="firsth2">NfcATag.getSak<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcataggetsak" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getSak(): number</p>     <p>获取NFC-A标签的SAK值。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">NfcA 标签的SAK值，十六进制表示，范围是0x00~0xFF。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 nfcA</span></li><li><span class="hljs-keyword">let</span> sak : number = nfcA.<span class="hljs-title function_">getSak</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"nfcA sak: "</span> + sak);</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 770px;">     <h3 id="nfcataggetatqa" device-type="phone,wearable">NfcATag.getAtqa<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcataggetatqa" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getAtqa(): number[]</p>     <p>获取NFC-A标签的Atqa值。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number[]</td>         <td class="cellrowborder" width="50%">NfcA 标签的Atqa值，每个number十六进制表示，范围是0x00~0xFF。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 nfcA</span></li><li><span class="hljs-keyword">let</span> atqa : number[] = nfcA.<span class="hljs-title function_">getAtqa</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"nfcA atqa: "</span> + atqa);</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 326px;">     <h2 id="nfcbtag" device-type="phone,wearable">NfcBTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcbtag" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>NfcBTag 提供对NFC-B(ISO 14443-3B)技术的属性和I/O操作的访问，继承自TagSession。</p>     <p>TagSession是所有NFC Tag技术类型的基类，提供建立连接和发送数据等共同接口。具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>NfcBTag获取方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nfc-tag-access-guide" target="_blank">nfc-tag开发指南</a>。</p>     <p>以下是NfcBTag的独有接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 754px;">     <h3 id="nfcbtaggetrespappdata" device-type="phone,wearable" class="firsth2">NfcBTag.getRespAppData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcbtaggetrespappdata" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getRespAppData(): number[]</p>     <p>获取标签的应用程序数据。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number[]</td>         <td class="cellrowborder" width="50%">NfcB 标签的应用程序数据，每个number十六进制表示，范围是0x00~0xFF。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 nfcB</span></li><li><span class="hljs-keyword">let</span> respAppData : number[] = nfcB.<span class="hljs-title function_">getRespAppData</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"nfcB respAppData: "</span> + respAppData);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 770px;">     <h3 id="nfcbtaggetrespprotocol" device-type="phone,wearable">NfcBTag.getRespProtocol<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcbtaggetrespprotocol" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getRespProtocol(): number[]</p>     <p>获取标签的协议信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number[]</td>         <td class="cellrowborder" width="50%">NfcB 标签的协议信息，每个number十六进制表示，范围是0x00~0xFF。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 nfcB</span></li><li><span class="hljs-keyword">let</span> respProtocol : number[] = nfcB.<span class="hljs-title function_">getRespProtocol</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"nfcB respProtocol: "</span> + respProtocol);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="nfcftag" device-type="phone,wearable">NfcFTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcftag" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>NfcFTag 提供对NFC-F(JIS 6319-4)技术的属性和I/O操作的访问，继承自TagSession。</p>     <p>TagSession是所有NFC Tag技术类型的基类， 提供建立连接和发送数据等共同接口。具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>NfcFTag获取方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nfc-tag-access-guide" target="_blank">nfc-tag开发指南</a>。</p>     <p>以下是NfcFTag的独有接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 754px;">     <h3 id="nfcftaggetsystemcode" device-type="phone,wearable" class="firsth2">NfcFTag.getSystemCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcftaggetsystemcode" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getSystemCode(): number[]</p>     <p>从标签实例获取系统代码。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number[]</td>         <td class="cellrowborder" width="50%">NfcF 标签的系统代码，每个number十六进制表示，范围是0x00~0xFF。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 nfcF</span></li><li><span class="hljs-keyword">let</span> systemCode : number[] = nfcF.<span class="hljs-title function_">getSystemCode</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"nfcF systemCode: "</span> + systemCode);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 770px;">     <h3 id="nfcftaggetpmm" device-type="phone,wearable">NfcFTag.getPmm<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcftaggetpmm" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getPmm(): number[]</p>     <p>从标签实例获取PMm（由IC代码和制造商参数组成）。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number[]</td>         <td class="cellrowborder" width="50%">NfcF 标签的PMm信息，每个number十六进制表示，范围是0x00~0xFF。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 nfcF</span></li><li><span class="hljs-keyword">let</span> pmm : number[] = nfcF.<span class="hljs-title function_">getPmm</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"nfcF pmm: "</span> + pmm);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="nfcvtag" device-type="phone,wearable">NfcVTag<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcvtag" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>NfcVTag 提供对NFC-V(ISO 15693)技术的属性和I/O操作的访问，继承自TagSession。</p>     <p>TagSession是所有NFC Tag技术类型的基类， 提供建立连接和发送数据等共同接口。具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>NfcVTag获取方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nfc-tag-access-guide" target="_blank">nfc-tag开发指南</a>。</p>     <p>以下是NfcVTag的独有接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 730px;">     <h3 id="nfcvtaggetresponseflags" device-type="phone,wearable" class="firsth2">NfcvTag.getResponseFlags<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcvtaggetresponseflags" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getResponseFlags(): number</p>     <p>从标签实例获取响应标志。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">NfcV 标签的响应标志，十六进制表示，范围是0x00~0xFF。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 nfcV</span></li><li><span class="hljs-keyword">let</span> responseFlags : number = nfcV.<span class="hljs-title function_">getResponseFlags</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"nfcV responseFlags: "</span> + responseFlags);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 770px;">     <h3 id="nfcvtaggetdsfid" device-type="phone,wearable">NfcvTag.getDsfId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nfcvtaggetdsfid" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getDsfId(): number</p>     <p>从标签实例获取数据存储格式标识符（DSFID）。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">NfcV 标签的数据存储格式标识符，十六进制表示，范围是0x00~0xFF。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 nfcV</span></li><li><span class="hljs-keyword">let</span> dsfId : number = nfcV.<span class="hljs-title function_">getDsfId</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"nfcV dsfId: "</span> + dsfId);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="isodeptag9" device-type="phone,wearable">IsoDepTag<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isodeptag9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>IsoDepTag 提供对ISO-DEP(ISO 14443-4)技术的属性和I/O操作的访问，继承自TagSession。</p>     <p>TagSession是所有NFC Tag技术类型的基类， 提供建立连接和发送数据等共同接口。具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>IsoDepTag获取方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nfc-tag-access-guide" target="_blank">nfc-tag开发指南</a>。</p>     <p>以下是IsoDepTag的独有接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 778px;">     <h3 id="isodeptaggethistoricalbytes9" device-type="phone,wearable" class="firsth2">IsoDepTag.getHistoricalBytes<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isodeptaggethistoricalbytes9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getHistoricalBytes(): number[]</p>     <p>获取标签的历史字节，针对基于NfcA通信技术的IsoDep卡片。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number[]</td>         <td class="cellrowborder" width="50%">IsoDepTag 标签的历史字节，每个number十六进制表示，范围是0x00~0xFF。如果该IsoDep类型Tag是基于NfcB技术的，则该返回值为空。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 isoDep</span></li><li><span class="hljs-keyword">let</span> historicalBytes : number[] = isoDep.<span class="hljs-title function_">getHistoricalBytes</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"isoDep historicalBytes: "</span> + historicalBytes);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 794px;">     <h3 id="isodeptaggethilayerresponse9" device-type="phone,wearable">IsoDepTag.getHiLayerResponse<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isodeptaggethilayerresponse9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getHiLayerResponse(): number[]</p>     <p>获取标签的更高层响应字节，针对基于NfcB通信技术的IsoDep卡片。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number[]</td>         <td class="cellrowborder" width="50%">IsoDepTag 标签的更高层响应字节，每个number十六进制表示，范围是0x00~0xFF。如果该IsoDep类型Tag是基于NfcA技术的，则该返回值为空。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 isoDep</span></li><li><span class="hljs-keyword">let</span> hiLayerResponse : number[] = isoDep.<span class="hljs-title function_">getHiLayerResponse</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"isoDep hiLayerResponse: "</span> + hiLayerResponse);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1682px;">     <h3 id="isodeptagisextendedapdusupported9" device-type="phone,wearable">IsoDepTag.isExtendedApduSupported<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isodeptagisextendedapdusupported9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>isExtendedApduSupported(): Promise&lt;boolean&gt;</p>     <p>检查是否支持扩展的APDU，使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回true表示支持；返回false表示不支持。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 isoDep</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!isoDep.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!isoDep.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"isoDep connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        isoDep.<span class="hljs-title function_">isExtendedApduSupported</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response: boolean</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"isoDep isExtendedApduSupported Promise response: "</span> + response);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`isoDep isExtendedApduSupported Promise Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`isoDep isExtendedApduSupported Promise Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1734px;">     <h3 id="isodeptagisextendedapdusupported9-1" device-type="phone,wearable">IsoDepTag.isExtendedApduSupported<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isodeptagisextendedapdusupported9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>isExtendedApduSupported(callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>检查是否支持扩展的APDU。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，true: 支持， false: 不支持。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 isoDep</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!isoDep.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!isoDep.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"isoDep connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        isoDep.<span class="hljs-title function_">isExtendedApduSupported</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, response: boolean</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`isoDep isExtendedApduSupported AsyncCallback Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err. message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"isoDep isExtendedApduSupported AsyncCallback response: "</span> + response);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`isoDep isExtendedApduSupported AsyncCallback Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> Business).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> Business).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="ndefmessage9" device-type="phone,wearable">NdefMessage<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndefmessage9" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 826px;">     <h3 id="ndefmessagegetndefrecords9" device-type="phone,wearable" class="firsth2">NdefMessage.getNdefRecords<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndefmessagegetndefrecords9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getNdefRecords(): <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#ndefrecord9">tag.NdefRecord</a>[]</p>     <p>获取NDEF消息中的所有记录。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#ndefrecord9">tag.NdefRecord</a>[]</td>         <td class="cellrowborder" width="50%">NDEF标签的Record列表，详见NDEF技术规范《NFCForum-TS-NDEF_1.0》。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 从 tag.ndef.createNdefMessage 或 ndefTag.getNdefMessage 获取 ndefMessage。</span></li><li><span class="hljs-comment">// let ndefMessage : tag.NdefMessage = tag.ndef.createNdefMessage(...);</span></li><li><span class="hljs-comment">// let ndefMessage : tag.NdefMessage = ndefTag.getNdefMessage();</span></li><li>
</li><li><span class="hljs-keyword">let</span> ndefRecords : tag.<span class="hljs-property">NdefRecord</span>[] = ndefMessage.<span class="hljs-title function_">getNdefRecords</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef ndefRecords number: "</span> + ndefRecords.<span class="hljs-property">length</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="ndeftag9" device-type="phone,wearable">NdefTag<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftag9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>提供对已格式化为NDEF的NFC标签的数据和操作的访问，继承自TagSession。</p>     <p>TagSession是所有NFC Tag技术类型的基类，提供建立连接和发送数据等共同接口。具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>NdefTag获取方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nfc-tag-access-guide" target="_blank">nfc-tag开发指南</a>。</p>     <p>以下是NdefTag的独有接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 730px;">     <h3 id="ndeftaggetndeftagtype9" device-type="phone,wearable" class="firsth2">NdefTag.getNdefTagType<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftaggetndeftagtype9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getNdefTagType(): <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#nfcforumtype9">tag.NfcForumType</a></p>     <p>获取NDEF标签的类型。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#nfcforumtype9">tag.NfcForumType</a></td>         <td class="cellrowborder" width="50%">NDEF标签类型，包括NFC FORUM TYPE 1/2/3/4等。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li><span class="hljs-keyword">let</span> ndefTagType : tag.<span class="hljs-property">NfcForumType</span> = ndefTag.<span class="hljs-title function_">getNdefTagType</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef ndefTagType: "</span> + ndefTagType);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 770px;">     <h3 id="ndeftaggetndefmessage9" device-type="phone,wearable">NdefTag.getNdefMessage<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftaggetndefmessage9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getNdefMessage(): <a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a></p>     <p>获取发现NDEF标签时，从标签读取的Message。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a></td>         <td class="cellrowborder" width="50%">NDEF标签的Message，详见NDEF技术规范《NFCForum-TS-NDEF_1.0》。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li><span class="hljs-keyword">let</span> ndefMessage : tag.<span class="hljs-property">NdefMessage</span> = ndefTag.<span class="hljs-title function_">getNdefMessage</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef ndefMessage: "</span> + ndefMessage);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 746px;">     <h3 id="ndeftagisndefwritable9" device-type="phone,wearable">NdefTag.isNdefWritable<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftagisndefwritable9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>isNdefWritable(): boolean</p>     <p>检查NDEF标签是否可写。在调用写数据接口前，需要先判断是否支持写操作。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">检查结果，true: 可写， false: 不可写。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li><span class="hljs-keyword">let</span> isWritable : boolean = ndefTag.<span class="hljs-title function_">isNdefWritable</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef isNdefWritable: "</span> + isWritable);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1706px;">     <h3 id="ndeftagreadndef9" device-type="phone,wearable">NdefTag.readNdef<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftagreadndef9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>readNdef(): Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a>&gt;</p>     <p>读取标签上的NDEF消息。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回从NDEF标签中读取到的Message数据对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>){</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndefTag connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        ndefTag.<span class="hljs-title function_">readNdef</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">ndefmessage : tag.NdefMessage</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef readNdef Promise ndefmessage: "</span> + ndefmessage);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndef readNdef Promise err Code: ${err.code}, message: ${err.message}"</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndef readNdef Promise catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1734px;">     <h3 id="ndeftagreadndef9-1" device-type="phone,wearable">NdefTag.readNdef<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftagreadndef9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>readNdef(callback: AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a>&gt;): void</p>     <p>读取标签上的NDEF消息。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回从NDEF标签中读取到的Message信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndefTag connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        ndefTag.<span class="hljs-title function_">readNdef</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError, ndefmessage : tag.NdefMessage</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndef readNdef AsyncCallback err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef readNdef AsyncCallback ndefmessage: "</span> + ndefmessage);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndef readNdef AsyncCallback catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1953px;">     <h3 id="ndeftagwritendef9" device-type="phone,wearable">NdefTag.writeNdef<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftagwritendef9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>writeNdef(msg: <a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a>): Promise&lt;void&gt;</p>     <p>将NDEF Message数据对象写入标签。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">msg</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">NDEF Message数据对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li><span class="hljs-comment">// 从原始数据创建的ndefMessage，例如：</span></li><li><span class="hljs-keyword">let</span> ndefMessage : tag.<span class="hljs-property">NdefMessage</span> =</li><li>    tag.<span class="hljs-property">ndef</span>.<span class="hljs-title function_">createNdefMessage</span>([<span class="hljs-number">0xD1</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x54</span>, <span class="hljs-number">0x4E</span>, <span class="hljs-number">0x46</span>, <span class="hljs-number">0x43</span>]);  <span class="hljs-comment">// 必须是可以被解析的NDEF记录。</span></li><li><span class="hljs-comment">// 或从 tag.ndef.createNdefMessage(ndefRecords:NdefRecord[]) 创建 ndefMessage</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndefTag connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        ndefTag.<span class="hljs-title function_">writeNdef</span>(ndefMessage).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef writeNdef Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndef writeNdef err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndef writeNdef Promise catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1947px;">     <h3 id="ndeftagwritendef9-1" device-type="phone,wearable">NdefTag.writeNdef<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftagwritendef9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>writeNdef(msg: <a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a>, callback: AsyncCallback&lt;void&gt;): void</p>     <p>将NDEF Message数据对象写入此标签。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">msg</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">NDEF Message数据对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当NDEF Message数据对象写入成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li><span class="hljs-comment">// 从原始数据创建的ndefMessage，例如：</span></li><li><span class="hljs-keyword">let</span> ndefMessage : tag.<span class="hljs-property">NdefMessage</span> =</li><li>    tag.<span class="hljs-property">ndef</span>.<span class="hljs-title function_">createNdefMessage</span>([<span class="hljs-number">0xD1</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x54</span>, <span class="hljs-number">0x4E</span>, <span class="hljs-number">0x46</span>, <span class="hljs-number">0x43</span>]);  <span class="hljs-comment">// 必须是可以被解析的NDEF记录。</span></li><li><span class="hljs-comment">// 或从 tag.ndef.createNdefMessage(ndefRecords:NdefRecord[]) 创建 ndefMessage</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndefTag connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        ndefTag.<span class="hljs-title function_">writeNdef</span>(ndefMessage, <span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndef writeNdef AsyncCallback Code: ${err.code}, message: ${err.message}"</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef writeNdef AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndef writeNdef AsyncCallback catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1092px;">     <h3 id="ndeftagcansetreadonly9" device-type="phone,wearable">NdefTag.canSetReadOnly<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftagcansetreadonly9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>canSetReadOnly(): boolean</p>     <p>检查NDEF标签是否可以设置为只读。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">true: NDEF标签可设置为只读， false: NDEF标签不可设置为只读。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li><span class="hljs-keyword">let</span> canSetReadOnly : boolean = ndefTag.<span class="hljs-title function_">canSetReadOnly</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef canSetReadOnly: "</span> + canSetReadOnly);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1706px;">     <h3 id="ndeftagsetreadonly9" device-type="phone,wearable">NdefTag.setReadOnly<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftagsetreadonly9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>setReadOnly(): Promise&lt;void&gt;</p>     <p>将NDEF标签设置为只读。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndefTag connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        ndefTag.<span class="hljs-title function_">setReadOnly</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef setReadOnly Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndef setReadOnly Promise err Code: ${err.code}, message: ${err.message}"</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndef setReadOnly Promise catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1806px;">     <h3 id="ndeftagsetreadonly9-1" device-type="phone,wearable">NdefTag.setReadOnly<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftagsetreadonly9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>setReadOnly(callback: AsyncCallback&lt;void&gt;): void</p>     <p>将NDEF标签设置为只读。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当NDEF标签设置为只读成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!ndefTag.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndefTag connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        ndefTag.<span class="hljs-title function_">setReadOnly</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndef setReadOnly AsyncCallback err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef setReadOnly AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndef setReadOnly AsyncCallback catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1356px;">     <h3 id="ndeftaggetndeftagtypestring9" device-type="phone,wearable">NdefTag.getNdefTagTypeString<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndeftaggetndeftagtypestring9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getNdefTagTypeString(type: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#nfcforumtype9">tag.NfcForumType</a>): string</p>     <p>将NFC论坛类型，转换为NFC论坛中定义的字符串描述。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#nfcforumtype9">tag.NfcForumType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">NDEF标签类型，包括NFC FORUM TYPE 1/2/3/4等。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">NFC论坛类型的字符串描述。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefTag</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> ndefTypeString : string = ndefTag.<span class="hljs-title function_">getNdefTagTypeString</span>(tag.<span class="hljs-property">NfcForumType</span>.<span class="hljs-property">NFC_FORUM_TYPE_1</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndef ndefTypeString: "</span> + ndefTypeString);</li><li>} <span class="hljs-keyword">catch</span> (businessError) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndef getNdefTagTypeString catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="mifareclassictag9" device-type="phone,wearable">MifareClassicTag<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictag9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>MifareClassicTag提供对MIFARE Classic属性和I/O操作的访问，继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>TagSession是所有NFC Tag技术类型的基类， 提供建立连接和发送数据等共同接口。具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>MifareClassicTag获取方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nfc-tag-access-guide" target="_blank">nfc-tag开发指南</a>。</p>     <p>以下是MifareClassicTag的独有接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2051px;">     <h3 id="mifareclassictagauthenticatesector9" device-type="phone,wearable" class="firsth2">MifareClassicTag.authenticateSector<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagauthenticatesector9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>authenticateSector(sectorIndex: number, key: number[], isKeyA: boolean): Promise&lt;void&gt;</p>     <p>使用密钥对扇区进行身份验证，只有身份验证成功的扇区可以进行操作。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sectorIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待验证的扇区索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">number[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于扇区验证的密钥（6字节）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">isKeyA</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">isKeyA标志。true 表示KeyA，false 表示KeyB。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> sectorIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        <span class="hljs-keyword">let</span> key = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>]  <span class="hljs-comment">//必须是6个字节，将其更改为正确的key</span></li><li>        mifareClassic.<span class="hljs-title function_">authenticateSector</span>(sectorIndex, key, <span class="hljs-literal">true</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic authenticateSector Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic authenticateSector Promise errCode: ${err.code}, "</span> + <span class="hljs-string">"message: ${err.message}"</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic authenticateSector Promise catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2037px;">     <h3 id="mifareclassictagauthenticatesector9-1" device-type="phone,wearable">MifareClassicTag.authenticateSector<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagauthenticatesector9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>authenticateSector(sectorIndex: number, key: number[], isKeyA: boolean, callback: AsyncCallback&lt;void&gt;): void</p>     <p>使用密钥对扇区进行身份验证，只有身份验证成功的扇区可以进行操作。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sectorIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待验证的扇区索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">number[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于扇区验证的密钥（6字节）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">isKeyA</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">isKeyA标志。true 表示KeyA，false 表示KeyB。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当身份验证成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> sectorIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        <span class="hljs-keyword">let</span> key = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>]  <span class="hljs-comment">// 必须是6个字节，将其更改为正确的key</span></li><li>        mifareClassic.<span class="hljs-title function_">authenticateSector</span>(sectorIndex, key, <span class="hljs-literal">true</span>, <span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic authenticateSector AsyncCallback errCode: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic authenticateSector AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic authenticateSector AsyncCallback catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1881px;">     <h3 id="mifareclassictagreadsingleblock9" device-type="phone,wearable">MifareClassicTag.readSingleBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagreadsingleblock9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>readSingleBlock(blockIndex: number): Promise&lt;number[]&gt;</p>     <p>读取标签中一个块存储的内容，一个块大小为16字节。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要读取的块索引，从0开始。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回读取的块数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        mifareClassic.<span class="hljs-title function_">readSingleBlock</span>(blockIndex).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data : number[]</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic readSingleBlock Promise data: "</span> + data);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic readSingleBlock Promise errCode: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic readSingleBlock Promise catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1827px;">     <h3 id="mifareclassictagreadsingleblock9-1" device-type="phone,wearable">MifareClassicTag.readSingleBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagreadsingleblock9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>readSingleBlock(blockIndex: number, callback: AsyncCallback&lt;number[]&gt;): void</p>     <p>读取标签中一个块存储的内容，一个块大小为16字节。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要读取的块索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number[]&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">以callback形式异步返回读取到的块数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>;  <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        mifareClassic.<span class="hljs-title function_">readSingleBlock</span>(blockIndex, <span class="hljs-function">(<span class="hljs-params">err : BusinessError, data : number[]</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic readSingleBlock AsyncCallback err: "</span> + err);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic readSingleBlock AsyncCallback data: "</span> + data);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic readSingleBlock AsyncCallback catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1998px;">     <h3 id="mifareclassictagwritesingleblock9" device-type="phone,wearable">MifareClassicTag.writeSingleBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagwritesingleblock9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>writeSingleBlock(blockIndex: number, data: number[]): Promise&lt;void&gt;</p>     <p>向标签中一个块存储写入内容，一个块大小为16字节。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写入的块索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">data</td>         <td class="cellrowborder" width="25%">number[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写入的数据，大小必须是16个字节。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        <span class="hljs-keyword">let</span> rawData = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x0A</span>,</li><li>            <span class="hljs-number">0x0B</span>, <span class="hljs-number">0x0C</span>, <span class="hljs-number">0x0D</span>, <span class="hljs-number">0x0E</span>, <span class="hljs-number">0x0F</span>, <span class="hljs-number">0x10</span>]; <span class="hljs-comment">// 必须是16个字节，将其更改为正确的key</span></li><li>        mifareClassic.<span class="hljs-title function_">writeSingleBlock</span>(blockIndex, rawData).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic writeSingleBlock Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic writeSingleBlock Promise errCode: ${err.code}, message: ${err.message}"</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic writeSingleBlock Promise catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1992px;">     <h3 id="mifareclassictagwritesingleblock9-1" device-type="phone,wearable">MifareClassicTag.writeSingleBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagwritesingleblock9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>writeSingleBlock(blockIndex: number, data: number[], callback: AsyncCallback&lt;void&gt;): void</p>     <p>向标签中一个块存储写入内容，一个块大小为16字节。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写入的块索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">data</td>         <td class="cellrowborder" width="25%">number[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写入的数据，大小必须是16个字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当向块存储写入内容成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        <span class="hljs-keyword">let</span> rawData = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span>, <span class="hljs-number">0x09</span>, <span class="hljs-number">0x0A</span>,</li><li>            <span class="hljs-number">0x0B</span>, <span class="hljs-number">0x0C</span>, <span class="hljs-number">0x0D</span>, <span class="hljs-number">0x0E</span>, <span class="hljs-number">0x0F</span>, <span class="hljs-number">0x10</span>]; <span class="hljs-comment">//必须是16个字节，将其更改为正确的data</span></li><li>        mifareClassic.<span class="hljs-title function_">writeSingleBlock</span>(blockIndex, rawData, <span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic writeSingleBlock AsyncCallback err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic writeSingleBlock AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic writeSingleBlock AsyncCallback catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1998px;">     <h3 id="mifareclassictagincrementblock9" device-type="phone,wearable">MifareClassicTag.incrementBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagincrementblock9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>incrementBlock(blockIndex: number, value: number): Promise&lt;void&gt;</p>     <p>对指定块的内容，增加指定的数值，并将结果存储在内部传输缓冲器中。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要指定增加的块索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要指定增加的数据，非负数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        <span class="hljs-keyword">let</span> value = <span class="hljs-number">0x20</span>; <span class="hljs-comment">// 将其更改为正确的数据</span></li><li>        mifareClassic.<span class="hljs-title function_">incrementBlock</span>(blockIndex, value).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic incrementBlock Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic incrementBlock Promise err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic incrementBlock Promise catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1968px;">     <h3 id="mifareclassictagincrementblock9-1" device-type="phone,wearable">MifareClassicTag.incrementBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagincrementblock9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>incrementBlock(blockIndex: number, value: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>对指定块的内容，增加指定的数值，并将结果存储在内部传输缓冲器中。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要被运算的块索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要增加的数值，非负数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当对块增加指定数值成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        <span class="hljs-keyword">let</span> value = <span class="hljs-number">0x20</span>; <span class="hljs-comment">// 将其更改为正确的数据</span></li><li>        mifareClassic.<span class="hljs-title function_">incrementBlock</span>(blockIndex, value, <span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic incrementBlock AsyncCallback err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic incrementBlock AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic incrementBlock AsyncCallback catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1974px;">     <h3 id="mifareclassictagdecrementblock9" device-type="phone,wearable">MifareClassicTag.decrementBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagdecrementblock9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>decrementBlock(blockIndex: number, value: number): Promise&lt;void&gt;</p>     <p>对指定块的内容，减少指定的数值，并将结果存储在内部传输缓冲器中。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要被运算的块索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要减少的数值，非负数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        <span class="hljs-keyword">let</span> value = <span class="hljs-number">0x20</span>; <span class="hljs-comment">// 将其更改为正确的数据</span></li><li>        mifareClassic.<span class="hljs-title function_">decrementBlock</span>(blockIndex, value).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic decrementBlock Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic decrementBlock Promise errCode: ${err.code}, message: ${err.message}"</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic decrementBlock Promise catch businessError: Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1992px;">     <h3 id="mifareclassictagdecrementblock9-1" device-type="phone,wearable">MifareClassicTag.decrementBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagdecrementblock9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>decrementBlock(blockIndex: number, value: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>对指定块的内容，减少指定的数值。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要被运算的块索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要减少的数值，非负数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当对块减少指定数值成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        <span class="hljs-keyword">let</span> value = <span class="hljs-number">0x20</span>; <span class="hljs-comment">// 将其更改为正确的数据</span></li><li>        mifareClassic.<span class="hljs-title function_">decrementBlock</span>(blockIndex, value, <span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic decrementBlock AsyncCallback errCode:"</span> +</li><li>                  <span class="hljs-string">"${err.code}, message: ${err.message}"</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic decrementBlock AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic decrementBlock AsyncCallback catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1905px;">     <h3 id="mifareclassictagtransfertoblock9" device-type="phone,wearable">MifareClassicTag.transferToBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagtransfertoblock9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>transferToBlock(blockIndex: number): Promise&lt;void&gt;</p>     <p>将临时寄存器的值转移到指定的块。使用Promise异步异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">被操作的块的索引，从0开始。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        mifareClassic.<span class="hljs-title function_">transferToBlock</span>(blockIndex).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic transferToBlock Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic transferToBlock Promise err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic transferToBlock Promise catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>");</span></li><li><span class="hljs-string">    }</span></li><li><span class="hljs-string">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1899px;">     <h3 id="mifareclassictagtransfertoblock9-1" device-type="phone,wearable">MifareClassicTag.transferToBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagtransfertoblock9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>transferToBlock(blockIndex: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>将临时寄存器的值转移到指定的块。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">被操作的块的索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当临时寄存器的值转移到指定块成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        mifareClassic.<span class="hljs-title function_">transferToBlock</span>(blockIndex, <span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic transferToBlock AsyncCallback errCode: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic transferToBlock AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic transferToBlock AsyncCallback catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1905px;">     <h3 id="mifareclassictagrestorefromblock9" device-type="phone,wearable">MifareClassicTag.restoreFromBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagrestorefromblock9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>restoreFromBlock(blockIndex: number): Promise&lt;void&gt;</p>     <p>将指定块的值复制到临时寄存器。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">被操作的块的索引，从0开始。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        mifareClassic.<span class="hljs-title function_">restoreFromBlock</span>(blockIndex).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic restoreFromBlock Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic restoreFromBlock Promise errCode: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic restoreFromBlock Promise catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1899px;">     <h3 id="mifareclassictagrestorefromblock9-1" device-type="phone,wearable">MifareClassicTag.restoreFromBlock<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagrestorefromblock9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>restoreFromBlock(blockIndex: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>将指定块的值复制到临时寄存器。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">被操作的块的索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当复制指定块内容到临时寄存器成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareClassic.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareClassic connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        mifareClassic.<span class="hljs-title function_">restoreFromBlock</span>(blockIndex, <span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic restoreFromBlock AsyncCallback err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic restoreFromBlock AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic restoreFromBlock AsyncCallback catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 770px;">     <h3 id="mifareclassictaggetsectorcount9" device-type="phone,wearable">MifareClassicTag.getSectorCount<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictaggetsectorcount9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getSectorCount(): number</p>     <p>获取MIFARE Classic标签中的扇区数。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">标签中的扇区数量。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li><span class="hljs-keyword">let</span> sectorCount : number = mifareClassic.<span class="hljs-title function_">getSectorCount</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic sectorCount: "</span> + sectorCount);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1356px;">     <h3 id="mifareclassictaggetblockcountinsector9" device-type="phone,wearable">MifareClassicTag.getBlockCountInSector<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictaggetblockcountinsector9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getBlockCountInSector(sectorIndex: number): number</p>     <p>获取指定扇区中的块数。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sectorIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">扇区序号，从0开始。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.9.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.52.9.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">该扇区内的块数量。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> sectorIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>    <span class="hljs-keyword">let</span> blockCnt : number = mifareClassic.<span class="hljs-title function_">getBlockCountInSector</span>(sectorIndex);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic blockCnt: "</span> + blockCnt);</li><li>} <span class="hljs-keyword">catch</span> (businessError) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic getBlockCountInSector catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 746px;">     <h3 id="mifareclassictaggettype9" device-type="phone,wearable">MifareClassicTag.getType<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictaggettype9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getType(): <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#mifareclassictype9">tag.MifareClassicType</a></p>     <p>获取MIFARE Classic标签的类型。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#mifareclassictype9">tag.MifareClassicType</a></td>         <td class="cellrowborder" width="50%">MifareClassic标签的类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li><span class="hljs-keyword">let</span> getType : tag.<span class="hljs-property">MifareClassicType</span> = mifareClassic.<span class="hljs-title function_">getType</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic getType: "</span> + getType);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 770px;">     <h3 id="mifareclassictaggettagsize9" device-type="phone,wearable">MifareClassicTag.getTagSize<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictaggettagsize9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getTagSize(): number</p>     <p>获取标签的存储空间大小，具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#mifareclassicsize9">MifareClassicSize</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">标签的大小，单位为字节，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#mifareclassicsize9">MifareClassicSize</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li><span class="hljs-keyword">let</span> tagSize : number = mifareClassic.<span class="hljs-title function_">getTagSize</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic tagSize: "</span> + tagSize);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 770px;">     <h3 id="mifareclassictagisemulatedtag9" device-type="phone,wearable">MifareClassicTag.isEmulatedTag<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictagisemulatedtag9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>isEmulatedTag(): boolean</p>     <p>检查标签是不是被模拟的。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">检查结果，true: 是；false：否。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li><span class="hljs-keyword">let</span> isEmulatedTag : boolean = mifareClassic.<span class="hljs-title function_">isEmulatedTag</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic isEmulatedTag: "</span> + isEmulatedTag);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1356px;">     <h3 id="mifareclassictaggetblockindex9" device-type="phone,wearable">MifareClassicTag.getBlockIndex<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictaggetblockindex9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getBlockIndex(sectorIndex: number): number</p>     <p>获取特定扇区的第一个块的序号。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sectorIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">扇区序号，从0开始。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.9.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.56.9.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">该扇区内的第一个块的序号，从0开始。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> sectorIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>    <span class="hljs-keyword">let</span> blockIndex : number = mifareClassic.<span class="hljs-title function_">getBlockIndex</span>(sectorIndex);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic blockIndex: "</span> + blockIndex);</li><li>} <span class="hljs-keyword">catch</span> (businessError) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic getBlockIndex catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1356px;">     <h3 id="mifareclassictaggetsectorindex9" device-type="phone,wearable">MifareClassicTag.getSectorIndex<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareclassictaggetsectorindex9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getSectorIndex(blockIndex: number): number</p>     <p>获取包含指定块号的扇区序号。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">blockIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">块序号，从0开始。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.9.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.57.9.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">扇区序号，从0开始。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareClassic</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> blockIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>    <span class="hljs-keyword">let</span> sectorIndex : number = mifareClassic.<span class="hljs-title function_">getSectorIndex</span>(blockIndex);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareClassic sectorIndex: "</span> + sectorIndex);</li><li>} <span class="hljs-keyword">catch</span> (businessError) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareClassic getSectorIndex catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="mifareultralighttag9" device-type="phone,wearable">MifareUltralightTag<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareultralighttag9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>MifareUltralightTag 提供对MIFARE Ultralight属性和I/O操作的访问，继承自TagSession。</p>     <p>TagSession是所有NFC Tag技术类型的基类， 提供建立连接和发送数据等共同接口。具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>MifareUltralightTag获取方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nfc-tag-access-guide" target="_blank">nfc-tag开发指南</a>。</p>     <p>以下是MifareUltralightTag的独有接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1913px;">     <h3 id="mifareultralighttagreadmultiplepages9" device-type="phone,wearable" class="firsth2">MifareUltralightTag.readMultiplePages<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareultralighttagreadmultiplepages9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>readMultiplePages(pageIndex: number): Promise&lt;number[]&gt;</p>     <p>读取标签的4页数据，共16字节的数据。每个页面数据大小为4字节。使用Promise异步回调</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">pageIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要读取页面的索引，从0开始。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.10.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.59.10.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。以Promise形式返回读取的4页的数据，共16字节。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareUltralight</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareUltralight.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareUltralight.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareUltralight connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> pageIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        mifareUltralight.<span class="hljs-title function_">readMultiplePages</span>(pageIndex).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data : number[]</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareUltralight readMultiplePages Promise data = "</span> + data);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareUltralight readMultiplePages Promise Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareUltralight readMultiplePages Promise catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1875px;">     <h3 id="mifareultralighttagreadmultiplepages9-1" device-type="phone,wearable">MifareUltralightTag.readMultiplePages<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareultralighttagreadmultiplepages9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>readMultiplePages(pageIndex: number, callback: AsyncCallback&lt;number[]&gt;): void</p>     <p>读取标签的4页数据，共16字节的数据。每个页面数据大小为4字节。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">pageIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要读取页面的索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number[]&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">以callback形式异步返回页操作结果。返回读取到的数据，共16字节。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.60.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareUltralight</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareUltralight.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareUltralight.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareUltralight connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> pageIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        mifareUltralight.<span class="hljs-title function_">readMultiplePages</span>(pageIndex, <span class="hljs-function">(<span class="hljs-params">err : BusinessError, data : number[]</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`mifareUltralight readMultiplePages AsyncCallback Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareUltralight readMultiplePages AsyncCallback data: "</span> + data);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareUltralight readMultiplePages AsyncCallback catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1998px;">     <h3 id="mifareultralighttagwritesinglepage9" device-type="phone,wearable">MifareUltralightTag.writeSinglePage<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareultralighttagwritesinglepage9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>writeSinglePage(pageIndex: number, data: number[]): Promise&lt;void&gt;</p>     <p>写入一页数据，数据大小为4字节。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">pageIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写入页面的索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">data</td>         <td class="cellrowborder" width="25%">number[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写入页面的数据内容，必须是4个字节大小。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareUltralight</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareUltralight.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareUltralight.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareUltralight connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> pageIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        <span class="hljs-keyword">let</span> rawData = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>]; <span class="hljs-comment">//必须是4个字节，将其更改为正确的data</span></li><li>        mifareUltralight.<span class="hljs-title function_">writeSinglePage</span>(pageIndex, rawData).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareUltralight writeSinglePage Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareUltralight writeSinglePage Promise err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareUltralight writeSinglePage Promise catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1968px;">     <h3 id="mifareultralighttagwritesinglepage9-1" device-type="phone,wearable">MifareUltralightTag.writeSinglePage<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareultralighttagwritesinglepage9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>writeSinglePage(pageIndex: number, data: number[], callback: AsyncCallback&lt;void&gt;): void</p>     <p>写入一页数据，数据大小为4字节。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.62.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">pageIndex</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写入页面的索引，从0开始。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">data</td>         <td class="cellrowborder" width="25%">number[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写入页面的数据内容，必须是4个字节大小。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当写入数据成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareUltralight</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!mifareUltralight.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!mifareUltralight.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"mifareUltralight connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> pageIndex = <span class="hljs-number">1</span>; <span class="hljs-comment">// 将其更改为正确的 index</span></li><li>        <span class="hljs-keyword">let</span> rawData = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>];  <span class="hljs-comment">//必须是4个字节，将其更改为正确的data</span></li><li>        mifareUltralight.<span class="hljs-title function_">writeSinglePage</span>(pageIndex, rawData, <span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareUltralight writeSinglePage AsyncCallback Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareUltralight writeSinglePage AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`mifareUltralight writeSinglePage AsyncCallback catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 746px;">     <h3 id="mifareultralighttaggettype9" device-type="phone,wearable">MifareUltralightTag.getType<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mifareultralighttaggettype9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getType(): <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#mifareultralighttype9">tag.MifareUltralightType</a></p>     <p>获取MIFARE Ultralight标签的类型。</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.3.1.1" width="50%"><strong>类型</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.3.1.2" width="50%"><strong>说明</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-nfctag#mifareultralighttype9">tag.MifareUltralightType</a></td>         <td class="cellrowborder" width="50%">MIFARE Ultralight标签的类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 mifareUltralight</span></li><li><span class="hljs-keyword">let</span> getType : tag.<span class="hljs-property">MifareUltralightType</span> = mifareClassic.<span class="hljs-title function_">getType</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"mifareUltralight getType: "</span> + getType);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="ndefformatabletag9" device-type="phone,wearable">NdefFormatableTag<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndefformatabletag9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>NdefFormatableTag为NDEF Formattable的标签提供格式化操作，继承自TagSession。</p>     <p>TagSession是所有NFC Tag 技术类型的基类， 提供建立连接和发送数据等共同接口。具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>NdefFormatableTag获取方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nfc-tag-access-guide" target="_blank">nfc-tag开发指南</a>。</p>     <p>以下是NdefFormatableTag的独有接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2033px;">     <h3 id="ndefformatabletagformat9" device-type="phone,wearable" class="firsth2">NdefFormatableTag.format<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndefformatabletagformat9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>format(message: <a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a>): Promise&lt;void&gt;</p>     <p>将标签格式化为NDEF标签，将NDEF消息写入NDEF标签。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.65.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">message</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">格式化成功时要写入的NDEF消息。可以为null，为null时仅格式化标签，不写入内容。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.65.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.65.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefFormatable</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!ndefFormatable.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!ndefFormatable.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndefFormatable connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">//从原始数据创建的ndefMessage，例如：</span></li><li>        <span class="hljs-keyword">let</span> ndefMessage = tag.<span class="hljs-property">ndef</span>.<span class="hljs-title function_">createNdefMessage</span>([<span class="hljs-number">0xD1</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x54</span>, <span class="hljs-number">0x4E</span>, <span class="hljs-number">0x46</span>, <span class="hljs-number">0x43</span>]);</li><li>        <span class="hljs-comment">// 必须是可以被解析的NDEF记录</span></li><li>        <span class="hljs-comment">//或从 tag.ndef.createNdefMessage(ndefRecords:NdefRecord[]) 创建 ndefMessage</span></li><li>
</li><li>        ndefFormatable.<span class="hljs-title function_">format</span>(ndefMessage).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndefFormatable format Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`defFormatable format Promise err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndefFormatable format Promise catch businessError Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2019px;">     <h3 id="ndefformatabletagformat9-1" device-type="phone,wearable">NdefFormatableTag.format<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndefformatabletagformat9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>format(message: <a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a>, callback: AsyncCallback&lt;void&gt;): void</p>     <p>将标签格式化为NDEF标签，然后将NDEF消息写入NDEF标签。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">message</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">格式化成功时要写入的Ndef消息。可以为null，为null时仅格式化标签，不写入内容。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当NDEF消息写入标签成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.66.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefFormatable</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!ndefFormatable.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!ndefFormatable.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndefFormatable connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">//从原始数据创建的ndefMessage，例如：</span></li><li>        <span class="hljs-keyword">let</span> ndefMessage = tag.<span class="hljs-property">ndef</span>.<span class="hljs-title function_">createNdefMessage</span>([<span class="hljs-number">0xD1</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x54</span>, <span class="hljs-number">0x4E</span>, <span class="hljs-number">0x46</span>, <span class="hljs-number">0x43</span>]);  <span class="hljs-comment">// 必须是可以被解析的NDEF记录</span></li><li>        <span class="hljs-comment">//或从 tag.ndef.createNdefMessage(ndefRecords:NdefRecord[]) 创建 ndefMessage</span></li><li>
</li><li>        ndefFormatable.<span class="hljs-title function_">format</span>(ndefMessage, <span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndefFormatable format AsyncCallback Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndefFormatable format AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndefFormatable format AsyncCallback catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2049px;">     <h3 id="ndefformatabletagformatreadonly9" device-type="phone,wearable">NdefFormatableTag.formatReadOnly<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndefformatabletagformatreadonly9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>formatReadOnly(message: <a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a>): Promise&lt;void&gt;</p>     <p>将标签格式化为NDEF标签，将NDEF消息写入NDEF标签，之后将标签设置为只读。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.67.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">message</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">格式化成功时要写入的NDEF消息。可以为null，为null时仅格式化标签，不写入内容。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.67.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.67.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefFormatable</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!ndefFormatable.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!ndefFormatable.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndefFormatable connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">//从原始数据创建的ndefMessage，例如：</span></li><li>        <span class="hljs-keyword">let</span> ndefMessage = tag.<span class="hljs-property">ndef</span>.<span class="hljs-title function_">createNdefMessage</span>([<span class="hljs-number">0xD1</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x54</span>, <span class="hljs-number">0x4E</span>, <span class="hljs-number">0x46</span>, <span class="hljs-number">0x43</span>]);</li><li>        <span class="hljs-comment">// 必须是可以被解析的NDEF记录</span></li><li>        <span class="hljs-comment">//或从 tag.ndef.createNdefMessage(ndefRecords:NdefRecord[]) 创建 ndefMessage</span></li><li>
</li><li>        ndefFormatable.<span class="hljs-title function_">formatReadOnly</span>(ndefMessage).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndefFormatable formatReadOnly Promise success."</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndefFormatable formatReadOnly Promise Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndefFormatable formatReadOnly Promise catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2043px;">     <h3 id="ndefformatabletagformatreadonly9-1" device-type="phone,wearable">NdefFormatableTag.formatReadOnly<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ndefformatabletagformatreadonly9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>formatReadOnly(message: <a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a>, callback: AsyncCallback&lt;void&gt;): void</p>     <p>将标签格式化为NDEF标签，然后将NDEF消息写入NDEF标签，之后将标签设置为只读。使用callback异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.68.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">message</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-nfctech#ndefmessage9">NdefMessage</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">格式化成功时要写入的NDEF消息。可以为null，为null时仅格式化标签，不写入内容。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当NDEF消息写入NDEF标签成功时，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.68.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameters types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The Tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-bld-c106="" class="highlight-div"><div _ngcontent-bld-c106="" class="highlight-div-header"><div _ngcontent-bld-c106="" class="highlight-div-header-left"><div _ngcontent-bld-c106="" class="handle-button expand-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-bld-c106="" class="highlight-div-header-right"><div _ngcontent-bld-c106="" class="handle-button ai-button"></div><div _ngcontent-bld-c106="" class="handle-button line-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-bld-c106="" class="handle-button theme-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-bld-c106="" class="handle-button copy-button"><div _ngcontent-bld-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-bld-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { tag } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 参考 @ohos.nfc.tag（标准NFC-Tag）中 tag.TagInfo 接口，获取正确的 ndefFormatable</span></li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">nfcTechDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 如果没有连接Tag，请先连接</span></li><li>    <span class="hljs-keyword">if</span> (!ndefFormatable.<span class="hljs-title function_">isTagConnected</span>()) {</li><li>        <span class="hljs-keyword">if</span> (!ndefFormatable.<span class="hljs-title function_">connectTag</span>()) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ndefFormatable connectTag failed."</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">//从原始数据创建的ndefMessage，例如：</span></li><li>        <span class="hljs-keyword">let</span> ndefMessage = tag.<span class="hljs-property">ndef</span>.<span class="hljs-title function_">createNdefMessage</span>([<span class="hljs-number">0xD1</span>, <span class="hljs-number">0x01</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x54</span>, <span class="hljs-number">0x4E</span>, <span class="hljs-number">0x46</span>, <span class="hljs-number">0x43</span>]);</li><li>        <span class="hljs-comment">//必须是可以被解析的NDEF记录</span></li><li>        <span class="hljs-comment">//或从 tag.ndef.createNdefMessage(ndefRecords:NdefRecord[]) 创建 ndefMessage</span></li><li>
</li><li>        ndefFormatable.<span class="hljs-title function_">formatReadOnly</span>(ndefMessage, <span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>)=&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndefFormatable formatReadOnly AsyncCallback err Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"ndefFormatable formatReadOnly AsyncCallback success."</span>);</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (businessError) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ndefFormatable formatReadOnly AsyncCallback catch Code: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).code}</span>, message: <span class="hljs-subst">${(businessError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="barcodetag18" device-type="phone,wearable">BarcodeTag<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="barcodetag18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>BarcodeTag提供读取条形码标签的属性和访问I/O操作的能力，继承自TagSession。</p>     <p>TagSession是所有NFC Tag 技术类型的基类， 提供建立连接和发送数据等共同接口。具体请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-tagsession">TagSession</a>。</p>     <p>BarcodeTag获取方式请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/nfc-tag-access-guide" target="_blank">nfc-tag开发指南</a>。</p>     <p>以下是BarcodeTag的独有接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 850px;">     <h3 id="barcodetaggetbarcode18" device-type="phone,wearable" class="firsth2">BarcodeTag.getBarcode<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="barcodetaggetbarcode18" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Wearable</span></div><p>getBarcode(): Promise&lt;ArrayBuffer&gt;</p>     <p>获取读到的Barcode类型的完整Tag。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.NFC_TAG</p>     <p><strong>系统能力：</strong> SystemCapability.Communication.NFC.Tag</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.70.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;ArrayBuffer&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回BarCode类型的 tag。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.70.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100201</td>         <td class="cellrowborder" width="50%">The tag running state is abnormal in the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">3100204</td>         <td class="cellrowborder" width="50%">The tag I/O operation failed.</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>