<h1 _ngcontent-qut-c119="" class="doc-title ng-star-inserted" title="oh_rdb_transaction.h"> oh_rdb_transaction.h </h1>

<div _ngcontent-qut-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供与数据库事务相关的函数和枚举。</p> <p><strong>引用文件：</strong> &lt;database/rdb/oh_rdb_transaction.h&gt;</p> <p><strong>库：</strong> libnative_rdb_ndk.z.so</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.RelationalStore.Core</p> <p><strong>起始版本：</strong> 18</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb">RDB</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transoptions">OH_RDB_TransOptions</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_RDB_TransOptions</td> <td class="cellrowborder" width="33.33333333333333%">定义<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transoptions">OH_RDB_TransOptions</a>结构类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_Rdb_Transaction</td> <td class="cellrowborder" width="33.33333333333333%">定义<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transoptions">OH_RDB_TransOptions</a>结构类型。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="枚举" device-type="phone,2in1,tablet,wearable,tv">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdb_transtype">OH_RDB_TransType</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_RDB_TransType</td> <td class="cellrowborder" width="33.33333333333333%">表示关系型数据库事务类型。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_createoptions">OH_RDB_TransOptions *OH_RdbTrans_CreateOptions(void)</a></td> <td class="cellrowborder" width="50%">创建事务配置对象。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_destroyoptions">int OH_RdbTrans_DestroyOptions(OH_RDB_TransOptions *options)</a></td> <td class="cellrowborder" width="50%">销毁事务配置对象。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtransoption_settype">int OH_RdbTransOption_SetType(OH_RDB_TransOptions *options, OH_RDB_TransType type)</a></td> <td class="cellrowborder" width="50%">设置关系型数据库事务类型。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_commit">int OH_RdbTrans_Commit(OH_Rdb_Transaction *trans)</a></td> <td class="cellrowborder" width="50%">提交事务。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_rollback">int OH_RdbTrans_Rollback(OH_Rdb_Transaction *trans)</a></td> <td class="cellrowborder" width="50%">回滚事务。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_insert">int OH_RdbTrans_Insert(OH_Rdb_Transaction *trans, const char *table, const OH_VBucket *row, int64_t *rowId)</a></td> <td class="cellrowborder" width="50%">将一行数据插入到目标表中。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_insertwithconflictresolution">int OH_RdbTrans_InsertWithConflictResolution(OH_Rdb_Transaction *trans, const char *table, const OH_VBucket *row,Rdb_ConflictResolution resolution, int64_t *rowId)</a></td> <td class="cellrowborder" width="50%">将一行数据插入到目标表中，支持冲突解决。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_batchinsert">int OH_RdbTrans_BatchInsert(OH_Rdb_Transaction *trans, const char *table, const OH_Data_VBuckets *rows,Rdb_ConflictResolution resolution, int64_t *changes)</a></td> <td class="cellrowborder" width="50%">将一组数据批量插入到目标表中。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_update">int OH_RdbTrans_Update(OH_Rdb_Transaction *trans, const OH_VBucket *row, const OH_Predicates *predicates,int64_t *changes)</a></td> <td class="cellrowborder" width="50%">根据指定的条件更新数据库中的数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_updatewithconflictresolution">int OH_RdbTrans_UpdateWithConflictResolution(OH_Rdb_Transaction *trans, const OH_VBucket *row,const OH_Predicates *predicates, Rdb_ConflictResolution resolution, int64_t *changes)</a></td> <td class="cellrowborder" width="50%">根据指定条件更新数据库中的数据，并支持冲突解决。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_delete">int OH_RdbTrans_Delete(OH_Rdb_Transaction *trans, const OH_Predicates *predicates, int64_t *changes)</a></td> <td class="cellrowborder" width="50%">根据指定条件从数据库中删除数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_query">OH_Cursor *OH_RdbTrans_Query(OH_Rdb_Transaction *trans, const OH_Predicates *predicates, const char *columns[],int len)</a></td> <td class="cellrowborder" width="50%">根据指定的条件查询数据库中的数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_querysql">OH_Cursor *OH_RdbTrans_QuerySql(OH_Rdb_Transaction *trans, const char *sql, const OH_Data_Values *args)</a></td> <td class="cellrowborder" width="50%">根据SQL语句查询数据库中的数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_execute">int OH_RdbTrans_Execute(OH_Rdb_Transaction *trans, const char *sql, const OH_Data_Values *args, OH_Data_Value **result)</a></td> <td class="cellrowborder" width="50%">执行包含指定参数的SQL语句。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_destroy">int OH_RdbTrans_Destroy(OH_Rdb_Transaction *trans)</a></td> <td class="cellrowborder" width="50%">销毁事务对象。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="枚举类型说明" device-type="phone,2in1,tablet,wearable,tv">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_rdb_transtype" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_RDB_TransType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdb_transtype" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_RDB_TransType</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>表示关系型数据库事务类型。</p> <p><strong>起始版本：</strong> 18</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">RDB_TRANS_DEFERRED = 0</td> <td class="cellrowborder" width="50%">在首次访问数据库之前，事务默认设置不会启动。</td> </tr> <tr><td class="cellrowborder" width="50%">RDB_TRANS_IMMEDIATE</td> <td class="cellrowborder" width="50%">数据库连接立即开始新的写入，而无需等待写入语句。</td> </tr> <tr><td class="cellrowborder" width="50%">RDB_TRANS_EXCLUSIVE</td> <td class="cellrowborder" width="50%"><p>与RDB_TRANS_IMMEDIATE类型相似，写事务会立即启动。</p> <p>RDB_TRANS_EXCLUSIVE和RDB_TRANS_IMMEDIATE类型在WAL模式下相同，但在其他日志模式下，RDB_TRANS_EXCLUSIVE会阻止其他数据库连接在事务进行时读取数据库。</p> </td> </tr> <tr><td class="cellrowborder" width="50%">RDB_TRANS_BUTT</td> <td class="cellrowborder" width="50%">RDB事务类型的最大值。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_rdbtrans_createoptions" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_RdbTrans_CreateOptions()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_createoptions" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_RDB_TransOptions *<span class="hljs-built_in">OH_RdbTrans_CreateOptions</span>(void)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建事务配置对象。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transoptions">OH_RDB_TransOptions</a></td> <td class="cellrowborder" width="50%"><p>执行成功时返回指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transoptions">OH_RDB_TransOptions</a>实例的指针。否则返回nullptr。</p> <p>使用完成后，必须通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdbtrans_destroyoptions">OH_RdbTrans_DestroyOptions</a>接口释放内存。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_destroyoptions" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_DestroyOptions()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_destroyoptions" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_RdbTrans_DestroyOptions</span><span class="hljs-params">(OH_RDB_TransOptions *options)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>销毁事务配置对象。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transoptions">OH_RDB_TransOptions</a> *options</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transoptions">OH_RDB_TransOptions</a>实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回错误码。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_INVALID_ARGS表示无效参数。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtransoption_settype" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTransOption_SetType()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtransoption_settype" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-go" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> OH_RdbTransOption_SetType(OH_RDB_TransOptions *options, OH_RDB_TransType <span class="hljs-keyword">type</span>)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>设置关系型数据库事务类型。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transoptions">OH_RDB_TransOptions</a> *options</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transoptions">OH_RDB_TransOptions</a>实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-oh-rdb-transaction-h#oh_rdb_transtype">OH_RDB_TransType</a> type</td> <td class="cellrowborder" width="50%">表示关系型数据库事务类型。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回错误码。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_INVALID_ARGS表示无效参数。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_commit" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_Commit()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_commit" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_RdbTrans_Commit</span><span class="hljs-params">(OH_Rdb_Transaction *trans)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>提交事务。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回执行结果。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_ERROR表示数据库常见错误。</p> <p>返回RDB_E_INVALID_ARGS表示无效参数。</p> <p>返回RDB_E_ALREADY_CLOSED表示数据库已经关闭。</p> <p>返回RDB_E_SQLITE_FULL表示SQLite错误码：数据库已满。</p> <p>返回RDB_E_SQLITE_CORRUPT表示数据库损坏。</p> <p>返回RDB_E_SQLITE_PERM表示SQLite错误码：访问权限被拒绝。</p> <p>返回RDB_E_SQLITE_BUSY表示SQLite错误码：数据库文件被锁定。</p> <p>返回RDB_E_SQLITE_NOMEM表示SQLite错误码：数据库内存不足。</p> <p>返回RDB_E_SQLITE_READONLY表示SQLite错误码：尝试写入只读数据库。</p> <p>返回RDB_E_SQLITE_IOERR表示SQLite错误码：磁盘I/O错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_rollback" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_Rollback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_rollback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_RdbTrans_Rollback</span><span class="hljs-params">(OH_Rdb_Transaction *trans)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>回滚事务。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回执行结果。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_ERROR表示数据库常见错误。</p> <p>返回RDB_E_INVALID_ARGS表示无效参数。</p> <p>返回RDB_E_ALREADY_CLOSED表示数据库已经关闭。</p> <p>返回RDB_E_SQLITE_FULL表示SQLite错误码：数据库已满。</p> <p>返回RDB_E_SQLITE_CORRUPT表示数据库损坏。</p> <p>返回RDB_E_SQLITE_PERM表示SQLite错误码：访问权限被拒绝。</p> <p>返回RDB_E_SQLITE_BUSY表示SQLite错误码：数据库文件被锁定。</p> <p>返回RDB_E_SQLITE_NOMEM表示SQLite错误码：数据库内存不足。</p> <p>返回RDB_E_SQLITE_READONLY表示SQLite错误码：尝试写入只读数据库。</p> <p>返回RDB_E_SQLITE_IOERR表示SQLite错误码：磁盘I/O错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_insert" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_Insert()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_insert" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">OH_RdbTrans_Insert</span><span class="hljs-params">(OH_Rdb_Transaction *trans, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *table, <span class="hljs-type">const</span> OH_VBucket *row, <span class="hljs-type">int64_t</span> *rowId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将一行数据插入到目标表中。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *table</td> <td class="cellrowborder" width="50%">表示目标表。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-vbucket">OH_VBucket</a> *row</td> <td class="cellrowborder" width="50%">表示要插入到表中的数据行。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t *rowId</td> <td class="cellrowborder" width="50%">输出参数，表示插入后返回的行号。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回执行结果。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_ERROR表示数据库常见错误。</p> <p>返回RDB_E_INVALID_ARGS表示无效参数。</p> <p>返回RDB_E_ALREADY_CLOSED表示数据库已经关闭。</p> <p>返回RDB_E_WAL_SIZE_OVER_LIMIT表示WAL日志文件大小超过默认值。</p> <p>返回RDB_E_SQLITE_FULL表示SQLite错误码：数据库已满。</p> <p>返回RDB_E_SQLITE_CORRUPT表示数据库损坏。</p> <p>返回RDB_E_SQLITE_PERM表示SQLite错误码：访问权限被拒绝。</p> <p>返回RDB_E_SQLITE_BUSY表示SQLite错误码：数据库文件被锁定。</p> <p>返回RDB_E_SQLITE_LOCKED表示SQLite错误码：数据库中的表被锁定。</p> <p>返回RDB_E_SQLITE_NOMEM表示SQLite错误码：数据库内存不足。</p> <p>返回RDB_E_SQLITE_READONLY表示SQLite错误码：尝试写入只读数据库。</p> <p>返回RDB_E_SQLITE_IOERR表示SQLite错误码：磁盘I/O错误。</p> <p>返回RDB_E_SQLITE_TOO_BIG表示SQLite错误码：TEXT或BLOB超出大小限制。</p> <p>返回RDB_E_SQLITE_MISMATCH表示SQLite错误码：数据类型不匹配。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_insertwithconflictresolution" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_InsertWithConflictResolution()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_insertwithconflictresolution" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">OH_RdbTrans_InsertWithConflictResolution</span><span class="hljs-params">(OH_Rdb_Transaction *trans, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *table, <span class="hljs-type">const</span> OH_VBucket *row,Rdb_ConflictResolution resolution, <span class="hljs-type">int64_t</span> *rowId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将一行数据插入到目标表中，支持冲突解决。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *table</td> <td class="cellrowborder" width="50%">表示目标表名称。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-vbucket">OH_VBucket</a> *row</td> <td class="cellrowborder" width="50%">表示要插入到表中的数据。</td> </tr> <tr><td class="cellrowborder" width="50%">Rdb_ConflictResolution resolution</td> <td class="cellrowborder" width="50%">表示发生冲突时的解决策略。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t *rowId</td> <td class="cellrowborder" width="50%">输出参数，表示插入成功后返回的行号。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回执行结果。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_ERROR表示数据库常见错误。</p> <p>返回RDB_E_INVALID_ARGS表示输入参数无效。</p> <p>返回RDB_E_ALREADY_CLOSED表示数据库已关闭。</p> <p>返回RDB_E_WAL_SIZE_OVER_LIMIT表示WAL日志文件大小超过默认值。</p> <p>返回RDB_E_SQLITE_FULL表示SQLite错误码：数据库已满。</p> <p>返回RDB_E_SQLITE_CORRUPT表示数据库损坏。</p> <p>返回RDB_E_SQLITE_PERM表示SQLite错误码：访问权限被拒绝。</p> <p>返回RDB_E_SQLITE_BUSY表示SQLite错误码：数据库文件被锁定。</p> <p>返回RDB_E_SQLITE_LOCKED表示SQLite错误码：数据库中的表被锁定。</p> <p>返回RDB_E_SQLITE_NOMEM表示SQLite错误码：数据库内存不足。</p> <p>返回RDB_E_SQLITE_READONLY表示SQLite错误码：尝试写入只读数据库。</p> <p>返回RDB_E_SQLITE_IOERR表示SQLite错误码：磁盘I/O错误。</p> <p>返回RDB_E_SQLITE_TOO_BIG表示SQLite错误码：TEXT或BLOB超出大小限制。</p> <p>返回RDB_E_SQLITE_MISMATCH表示SQLite错误码：数据类型不匹配。</p> <p>返回RDB_E_SQLITE_CONSTRAINT表示SQLite错误码：违反约束导致操作中止。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_batchinsert" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_BatchInsert()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_batchinsert" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">OH_RdbTrans_BatchInsert</span><span class="hljs-params">(OH_Rdb_Transaction *trans, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *table, <span class="hljs-type">const</span> OH_Data_VBuckets *rows, Rdb_ConflictResolution resolution, <span class="hljs-type">int64_t</span> *changes)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将一组数据批量插入到目标表中。</p> <p>单次插入参数的最大数量限制为32766，超出上限会返回RDB_E_INVALID_ARGS错误码。参数数量计算方式为插入数据条数乘以插入数据的所有字段的并集大小。</p> <p>例如：插入数据的所有字段的并集大小为10，则最多可以插入3276条数据（3276*10=32760）。</p> <p>请确保在调用接口时遵守此限制，以避免因参数数量过多而导致错误。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *table</td> <td class="cellrowborder" width="50%">表示目标表。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-data-vbuckets">OH_Data_VBuckets</a> *rows</td> <td class="cellrowborder" width="50%">表示要插入到表中的一组数据。</td> </tr> <tr><td class="cellrowborder" width="50%">Rdb_ConflictResolution resolution</td> <td class="cellrowborder" width="50%">表示发生冲突时的解决策略。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t *changes</td> <td class="cellrowborder" width="50%">输出参数，表示插入成功的次数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回执行结果。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_ERROR表示数据库常见错误。</p> <p>返回RDB_E_INVALID_ARGS表示无效参数。</p> <p>返回RDB_E_ALREADY_CLOSED表示数据库已经关闭。</p> <p>返回RDB_E_WAL_SIZE_OVER_LIMIT表示WAL日志文件大小超过默认值。</p> <p>返回RDB_E_SQLITE_FULL表示SQLite错误码：数据库已满。</p> <p>返回RDB_E_SQLITE_CORRUPT表示数据库损坏。</p> <p>返回RDB_E_SQLITE_PERM表示SQLite错误码：访问权限被拒绝。</p> <p>返回RDB_E_SQLITE_BUSY表示SQLite错误码：数据库文件被锁定。</p> <p>返回RDB_E_SQLITE_LOCKED表示SQLite错误码：数据库中的表被锁定。</p> <p>返回RDB_E_SQLITE_NOMEM表示SQLite错误码：数据库内存不足。</p> <p>返回RDB_E_SQLITE_READONLY表示SQLite错误码：尝试写入只读数据库。</p> <p>返回RDB_E_SQLITE_IOERR表示SQLite错误码：磁盘I/O错误。</p> <p>返回RDB_E_SQLITE_TOO_BIG表示SQLite错误码：TEXT或BLOB超出大小限制。</p> <p>返回RDB_E_SQLITE_MISMATCH表示SQLite错误码：数据类型不匹配。</p> <p>返回RDB_E_SQLITE_CONSTRAINT表示SQLite错误码：SQLite约束。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_update" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_Update()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_update" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">OH_RdbTrans_Update</span><span class="hljs-params">(OH_Rdb_Transaction *trans, <span class="hljs-type">const</span> OH_VBucket *row, <span class="hljs-type">const</span> OH_Predicates *predicates, <span class="hljs-type">int64_t</span> *changes)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据指定的条件更新数据库中的数据。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-vbucket">OH_VBucket</a> *row</td> <td class="cellrowborder" width="50%">表示要更新到表中的数据行。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-predicates">OH_Predicates</a> *predicates</td> <td class="cellrowborder" width="50%">表示<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-predicates">OH_Predicates</a>指定的更新条件。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t *changes</td> <td class="cellrowborder" width="50%">输出参数，表示更新成功的次数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回执行结果。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_ERROR表示数据库常见错误。</p> <p>返回RDB_E_INVALID_ARGS表示无效参数。</p> <p>返回RDB_E_ALREADY_CLOSED表示数据库已经关闭。</p> <p>返回RDB_E_WAL_SIZE_OVER_LIMIT表示WAL日志文件大小超过默认值。</p> <p>返回RDB_E_SQLITE_FULL表示SQLite错误码：数据库已满。</p> <p>返回RDB_E_SQLITE_CORRUPT表示数据库损坏。</p> <p>返回RDB_E_SQLITE_PERM表示SQLite错误码：访问权限被拒绝。</p> <p>返回RDB_E_SQLITE_BUSY表示SQLite错误码：数据库文件被锁定。</p> <p>返回RDB_E_SQLITE_LOCKED表示SQLite错误码：数据库中的表被锁定。</p> <p>返回RDB_E_SQLITE_NOMEM表示SQLite错误码：数据库内存不足。</p> <p>返回RDB_E_SQLITE_READONLY表示SQLite错误码：尝试写入只读数据库。</p> <p>返回RDB_E_SQLITE_IOERR表示SQLite错误码：磁盘I/O错误。</p> <p>返回RDB_E_SQLITE_TOO_BIG表示SQLite错误码：TEXT或BLOB超出大小限制。</p> <p>返回RDB_E_SQLITE_MISMATCH表示SQLite错误码：数据类型不匹配。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_updatewithconflictresolution" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_UpdateWithConflictResolution()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_updatewithconflictresolution" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">OH_RdbTrans_UpdateWithConflictResolution</span><span class="hljs-params">(OH_Rdb_Transaction *trans, <span class="hljs-type">const</span> OH_VBucket *row,<span class="hljs-type">const</span> OH_Predicates *predicates, Rdb_ConflictResolution resolution, <span class="hljs-type">int64_t</span> *changes)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据指定条件更新数据库中的数据，并支持冲突解决。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-vbucket">OH_VBucket</a> *row</td> <td class="cellrowborder" width="50%">表示要更新到表中的数据。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-predicates">OH_Predicates</a> *predicates</td> <td class="cellrowborder" width="50%">表示<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-predicates">OH_Predicates</a>指定的更新条件。</td> </tr> <tr><td class="cellrowborder" width="50%">Rdb_ConflictResolution resolution</td> <td class="cellrowborder" width="50%">表示发生冲突时的解决策略。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t *changes</td> <td class="cellrowborder" width="50%">输出参数，表示更新成功的行数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回执行结果。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_ERROR表示数据库常见错误。</p> <p>返回RDB_E_INVALID_ARGS表示输入参数无效。</p> <p>返回RDB_E_ALREADY_CLOSED表示数据库已关闭。</p> <p>返回RDB_E_WAL_SIZE_OVER_LIMIT表示WAL日志文件大小超过默认值。</p> <p>返回RDB_E_SQLITE_FULL表示SQLite错误码：数据库已满。</p> <p>返回RDB_E_SQLITE_CORRUPT表示数据库损坏。</p> <p>返回RDB_E_SQLITE_PERM表示SQLite错误码：访问权限被拒绝。</p> <p>返回RDB_E_SQLITE_BUSY表示SQLite错误码：数据库文件被锁定。</p> <p>返回RDB_E_SQLITE_LOCKED表示SQLite错误码：数据库中的表被锁定。</p> <p>返回RDB_E_SQLITE_NOMEM表示SQLite错误码：数据库内存不足。</p> <p>返回RDB_E_SQLITE_READONLY表示SQLite错误码：尝试写入只读数据库。</p> <p>返回RDB_E_SQLITE_IOERR表示SQLite错误码：磁盘I/O错误。</p> <p>返回RDB_E_SQLITE_TOO_BIG表示SQLite错误码：TEXT或BLOB超出大小限制。</p> <p>返回RDB_E_SQLITE_MISMATCH表示SQLite错误码：数据类型不匹配。</p> <p>返回RDB_E_SQLITE_CONSTRAINT表示SQLite错误码：违反约束导致操作中止。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_delete" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_Delete()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_delete" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">OH_RdbTrans_Delete</span><span class="hljs-params">(OH_Rdb_Transaction *trans, <span class="hljs-type">const</span> OH_Predicates *predicates, <span class="hljs-type">int64_t</span> *changes)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据指定条件从数据库中删除数据。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-predicates">OH_Predicates</a> *predicates</td> <td class="cellrowborder" width="50%">表示<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-predicates">OH_Predicates</a>指定的删除条件。</td> </tr> <tr><td class="cellrowborder" width="50%">int64_t *changes</td> <td class="cellrowborder" width="50%">表示删除成功的次数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回执行结果。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_ERROR表示数据库常见错误。</p> <p>返回RDB_E_INVALID_ARGS表示无效参数。</p> <p>返回RDB_E_ALREADY_CLOSED表示数据库已经关闭。</p> <p>返回RDB_E_WAL_SIZE_OVER_LIMIT表示WAL日志文件大小超过默认值。</p> <p>返回RDB_E_SQLITE_FULL表示SQLite错误码：数据库已满。</p> <p>返回RDB_E_SQLITE_CORRUPT表示数据库损坏。</p> <p>返回RDB_E_SQLITE_PERM表示SQLite错误码：访问权限被拒绝。</p> <p>返回RDB_E_SQLITE_BUSY表示SQLite错误码：数据库文件被锁定。</p> <p>返回RDB_E_SQLITE_LOCKED表示SQLite错误码：数据库中的表被锁定。</p> <p>返回RDB_E_SQLITE_NOMEM表示SQLite错误码：数据库内存不足。</p> <p>返回RDB_E_SQLITE_READONLY表示SQLite错误码：尝试写入只读数据库。</p> <p>返回RDB_E_SQLITE_IOERR表示SQLite错误码：磁盘I/O错误。</p> <p>返回RDB_E_SQLITE_TOO_BIG表示SQLite错误码：TEXT或BLOB超出大小限制。</p> <p>返回RDB_E_SQLITE_MISMATCH表示SQLite错误码：数据类型不匹配。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_query" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_Query()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_query" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_Cursor *<span class="hljs-title">OH_RdbTrans_Query</span><span class="hljs-params">(OH_Rdb_Transaction *trans, <span class="hljs-type">const</span> OH_Predicates *predicates, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *columns[], <span class="hljs-type">int</span> len)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据指定的条件查询数据库中的数据。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-predicates">OH_Predicates</a> *predicates</td> <td class="cellrowborder" width="50%">表示<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-predicates">OH_Predicates</a>指定的查询条件。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *columns[]</td> <td class="cellrowborder" width="50%">表示要查询的列，如果传入空值，则查询适用于所有列。</td> </tr> <tr><td class="cellrowborder" width="50%">int len</td> <td class="cellrowborder" width="50%">表示列中元素的个数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-cursor">OH_Cursor</a></td> <td class="cellrowborder" width="50%">如果执行成功，则返回指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-cursor">OH_Cursor</a>实例的指针。如果数据库已关闭或数据库没有响应，则返回空。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_querysql" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_QuerySql()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_querysql" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_Cursor *<span class="hljs-title">OH_RdbTrans_QuerySql</span><span class="hljs-params">(OH_Rdb_Transaction *trans, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql, <span class="hljs-type">const</span> OH_Data_Values *args)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>根据SQL语句查询数据库中的数据。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *sql</td> <td class="cellrowborder" width="50%">表示要执行的SQL语句。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-data-values">OH_Data_Values</a> *args</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-data-values">OH_Data_Values</a>的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-cursor">OH_Cursor</a></td> <td class="cellrowborder" width="50%">如果执行成功，则返回指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-cursor">OH_Cursor</a>实例的指针。如果数据库已关闭或数据库没有响应，则返回空。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_execute" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_Execute()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_execute" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">OH_RdbTrans_Execute</span><span class="hljs-params">(OH_Rdb_Transaction *trans, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *sql, <span class="hljs-type">const</span> OH_Data_Values *args, OH_Data_Value **result)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>执行包含指定参数的SQL语句。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr> <tr><td class="cellrowborder" width="50%">const char *sql</td> <td class="cellrowborder" width="50%">表示要执行的SQL语句。</td> </tr> <tr><td class="cellrowborder" width="50%">const <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-data-values">OH_Data_Values</a> *args</td> <td class="cellrowborder" width="50%">SQL语句中包含的参数。</td> </tr> <tr><td class="cellrowborder" width="50%">OH_Data_Value **result</td> <td class="cellrowborder" width="50%">执行成功时指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-data-value">OH_Data_Value</a>实例的指针。使用完成后，必须通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-data-value-h#oh_value_destroy">OH_Value_Destroy</a>接口释放内存。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回执行结果。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_ERROR表示数据库常见错误。</p> <p>返回RDB_E_INVALID_ARGS表示无效参数。</p> <p>返回RDB_E_ALREADY_CLOSED表示数据库已经关闭。</p> <p>返回RDB_E_WAL_SIZE_OVER_LIMIT表示WAL日志文件大小超过默认值。</p> <p>返回RDB_E_SQLITE_FULL表示SQLite错误码：数据库已满。</p> <p>返回RDB_E_SQLITE_CORRUPT表示数据库损坏。</p> <p>返回RDB_E_SQLITE_PERM表示SQLite错误码：访问权限被拒绝。</p> <p>返回RDB_E_SQLITE_BUSY表示SQLite错误码：数据库文件被锁定。</p> <p>返回RDB_E_SQLITE_LOCKED表示SQLite错误码：数据库中的表被锁定。</p> <p>返回RDB_E_SQLITE_NOMEM表示SQLite错误码：数据库内存不足。</p> <p>返回RDB_E_SQLITE_READONLY表示SQLite错误码：尝试写入只读数据库。</p> <p>返回RDB_E_SQLITE_IOERR表示SQLite错误码：磁盘I/O错误。</p> <p>返回RDB_E_SQLITE_TOO_BIG表示SQLite错误码：TEXT或BLOB超出大小限制。</p> <p>返回RDB_E_SQLITE_MISMATCH表示SQLite错误码：数据类型不匹配。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_rdbtrans_destroy" device-type="phone,2in1,tablet,wearable,tv">OH_RdbTrans_Destroy()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_rdbtrans_destroy" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-qut-c106="" class="highlight-div"><div _ngcontent-qut-c106="" class="highlight-div-header"><div _ngcontent-qut-c106="" class="highlight-div-header-left"><div _ngcontent-qut-c106="" class="handle-button expand-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qut-c106="" class="highlight-div-header-right"><div _ngcontent-qut-c106="" class="handle-button ai-button"></div><div _ngcontent-qut-c106="" class="handle-button line-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qut-c106="" class="handle-button theme-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qut-c106="" class="handle-button copy-button"><div _ngcontent-qut-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qut-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_RdbTrans_Destroy</span><span class="hljs-params">(OH_Rdb_Transaction *trans)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>销毁事务对象。</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a> *trans</td> <td class="cellrowborder" width="50%">表示指向<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-rdb-oh-rdb-transaction">OH_Rdb_Transaction</a>实例的指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%"><p>返回错误码。</p> <p>返回RDB_OK表示成功。</p> <p>返回RDB_E_INVALID_ARGS表示无效参数。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>