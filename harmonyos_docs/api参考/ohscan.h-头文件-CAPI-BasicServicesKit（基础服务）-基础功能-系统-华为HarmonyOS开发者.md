<h1 _ngcontent-ucm-c119="" class="doc-title ng-star-inserted" title="ohscan.h"> ohscan.h </h1>

<div _ngcontent-ucm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>声明用于发现和连接扫描仪、从扫描仪扫描图像、获取页面扫描进度和设置扫描图像参数等功能的API</p> <p><strong>库：</strong> libohscan.so</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>起始版本：</strong> 12</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-scan">OH_Scan</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-scan-scan-scannerdevice">Scan_ScannerDevice</a></td> <td class="cellrowborder" width="33.33333333333333%">Scan_ScannerDevice</td> <td class="cellrowborder" width="33.33333333333333%">表示扫描仪设备信息</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-scan-scan-picturescanprogress">Scan_PictureScanProgress</a></td> <td class="cellrowborder" width="33.33333333333333%">Scan_PictureScanProgress</td> <td class="cellrowborder" width="33.33333333333333%">表示扫描仪扫描图片的进度</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-scan-scan-scanneroptions">Scan_ScannerOptions</a></td> <td class="cellrowborder" width="33.33333333333333%">Scan_ScannerOptions</td> <td class="cellrowborder" width="33.33333333333333%">表示一个扫描仪的所有参数选项</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="枚举" device-type="phone,2in1,tablet">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ErrorCode</a></td> <td class="cellrowborder" width="33.33333333333333%">Scan_ErrorCode</td> <td class="cellrowborder" width="33.33333333333333%">定义错误码</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_scannerdiscoverycallback">typedef void (*Scan_ScannerDiscoveryCallback)(Scan_ScannerDevice** devices, int32_t deviceCount)</a></td> <td class="cellrowborder" width="33.33333333333333%">Scan_ScannerDiscoveryCallback</td> <td class="cellrowborder" width="33.33333333333333%">扫描仪设备发现回调，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_startscannerdiscovery">OH_Scan_StartScannerDiscovery</a>注册指针指向的内存将在回调函数结束时释放</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_init">int32_t OH_Scan_Init()</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">此API检查并拉起扫描服务，初始化扫描客户端，并建立与扫描服务的连接</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_startscannerdiscovery">int32_t OH_Scan_StartScannerDiscovery(Scan_ScannerDiscoveryCallback callback)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">此API开始发现扫描仪，注册回调函数处理发现的扫描仪设备</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_openscanner">int32_t OH_Scan_OpenScanner(const char* scannerId)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">此API连接到扫描仪设备</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_closescanner">int32_t OH_Scan_CloseScanner(const char* scannerId)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">此API用于关闭已连接的扫描仪设备</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_getscannerparameter">Scan_ScannerOptions* OH_Scan_GetScannerParameter(const char* scannerId, int32_t* errorCode)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">此API可用于获取扫描仪可设置的选项列表返回的结构体指针指向的内存会在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_exit">OH_Scan_Exit</a>时自动释放，每个型号在内存中只会存储一份副本</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_setscannerparameter">int32_t OH_Scan_SetScannerParameter(const char* scannerId, const int32_t option, const char* value)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">此API可用于设置扫描仪的某个选项参数传入的选项和值从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_getscannerparameter">OH_Scan_GetScannerParameter</a>获取</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_startscan">int32_t OH_Scan_StartScan(const char* scannerId, bool batchMode)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">此API允许扫描仪开始扫描</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_cancelscan">int32_t OH_Scan_CancelScan(const char* scannerId)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">此API允许扫描仪取消扫描</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_getpicturescanprogress">int32_t OH_Scan_GetPictureScanProgress(const char* scannerId, Scan_PictureScanProgress* prog)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">此API可获取扫描仪扫描图片的进度。必须传入非空值，扫描进度将写入指针指向的结构体</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_exit">int32_t OH_Scan_Exit()</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">此API可用于退出扫描服务，释放扫描框架内存，并注销扫描仪发现回调</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="枚举类型说明" device-type="phone,2in1,tablet">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div></div>  <div class="tiledSection"><h3 id="scan_errorcode" device-type="phone,2in1,tablet" class="firsth2">Scan_ErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scan_errorcode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Scan_ErrorCode</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>定义错误码</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">SCAN_ERROR_NONE = 0</td> <td class="cellrowborder" width="50%">操作成功</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_NO_PERMISSION = 201</td> <td class="cellrowborder" width="50%">权限验证失败</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_INVALID_PARAMETER = 401</td> <td class="cellrowborder" width="50%">参数无效。例如指针为空或字符串为空</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_GENERIC_FAILURE = 24300101</td> <td class="cellrowborder" width="50%">通用内部错误</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_RPC_FAILURE = 24300102</td> <td class="cellrowborder" width="50%">RPC通信错误</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_SERVER_FAILURE = 24300103</td> <td class="cellrowborder" width="50%">服务器错误</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_UNSUPPORTED = 24300104</td> <td class="cellrowborder" width="50%">不支持的操作</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_CANCELED = 24300105</td> <td class="cellrowborder" width="50%">操作已取消</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_DEVICE_BUSY = 24300106</td> <td class="cellrowborder" width="50%">设备繁忙，请稍后重试</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_INVALID = 24300107</td> <td class="cellrowborder" width="50%">数据无效（包括打开时无设备）</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_JAMMED = 24300108</td> <td class="cellrowborder" width="50%">文档进纸器卡纸</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_NO_DOCS = 24300109</td> <td class="cellrowborder" width="50%">文档进纸器缺纸</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_COVER_OPEN = 24300110</td> <td class="cellrowborder" width="50%">扫描仪盖板打开</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_IO_ERROR = 24300111</td> <td class="cellrowborder" width="50%">设备I/O错误</td> </tr> <tr><td class="cellrowborder" width="50%">SCAN_ERROR_NO_MEMORY = 24300112</td> <td class="cellrowborder" width="50%">内存不足</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div></div>  <div class="tiledSection"><h3 id="scan_scannerdiscoverycallback" device-type="phone,2in1,tablet" class="firsth2">Scan_ScannerDiscoveryCallback()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scan_scannerdiscoverycallback" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">void</span> <span class="hljs-params">(*Scan_ScannerDiscoveryCallback)</span><span class="hljs-params">(Scan_ScannerDevice** devices, <span class="hljs-type">int32_t</span> deviceCount)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>扫描仪设备发现回调，通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_startscannerdiscovery">OH_Scan_StartScannerDiscovery</a>注册指针指向的内存将在回调函数结束时释放</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-scan-scan-scannerdevice">Scan_ScannerDevice</a>** devices</td> <td class="cellrowborder" width="50%">所有发现的扫描仪设备列表</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t deviceCount</td> <td class="cellrowborder" width="50%">发现的扫描仪数量</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scan_init" device-type="phone,2in1,tablet">OH_Scan_Init()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scan_init" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_Scan_Init</span>()</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此API检查并拉起扫描服务，初始化扫描客户端，并建立与扫描服务的连接</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>需要权限：</strong> ohos.permission.PRINT</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a> 表示扫描服务成功启动</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_PERMISSION</a> 表示无权限使用此接口</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_RPC_FAILURE</a> 表示RPC通信错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_SERVER_FAILURE</a> 表示扫描过程中发生错误</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scan_startscannerdiscovery" device-type="phone,2in1,tablet">OH_Scan_StartScannerDiscovery()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scan_startscannerdiscovery" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_Scan_StartScannerDiscovery</span>(Scan_ScannerDiscoveryCallback callback)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此API开始发现扫描仪，注册回调函数处理发现的扫描仪设备</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>需要权限：</strong> ohos.permission.PRINT</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_scannerdiscoverycallback">Scan_ScannerDiscoveryCallback</a> callback</td> <td class="cellrowborder" width="50%">扫描仪发现事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_scannerdiscoverycallback">Scan_ScannerDiscoveryCallback</a>回调函数</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a> 表示成功开始扫描仪搜索</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_PERMISSION</a> 表示无权限使用此接口</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_RPC_FAILURE</a> 表示RPC通信错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_SERVER_FAILURE</a> 表示扫描过程中发生错误</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scan_openscanner" device-type="phone,2in1,tablet">OH_Scan_OpenScanner()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scan_openscanner" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Scan_OpenScanner</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* scannerId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此API连接到扫描仪设备</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>需要权限：</strong> ohos.permission.PRINT</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* scannerId</td> <td class="cellrowborder" width="50%">用于连接扫描仪的ID</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a> 表示扫描仪成功连接</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_PERMISSION</a> 表示无权限使用此接口</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_RPC_FAILURE</a> 表示RPC通信错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_SERVER_FAILURE</a> 表示扫描过程中发生错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_DEVICE_BUSY</a> 表示扫描仪繁忙</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_INVALID_PARAMETER</a> 表示输入参数无效</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_IO_ERROR</a> 表示与设备通信时发生错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_MEMORY</a> 表示可用内存不足</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scan_closescanner" device-type="phone,2in1,tablet">OH_Scan_CloseScanner()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scan_closescanner" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Scan_CloseScanner</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* scannerId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此API用于关闭已连接的扫描仪设备</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>需要权限：</strong> ohos.permission.PRINT</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* scannerId</td> <td class="cellrowborder" width="50%">用于断开扫描仪连接的ID</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a> 表示扫描仪连接成功关闭</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_PERMISSION</a> 表示无权限使用此接口</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_RPC_FAILURE</a> 表示RPC通信错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_SERVER_FAILURE</a> 表示扫描过程中发生错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_INVALID_PARAMETER</a> 表示输入参数无效</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scan_getscannerparameter" device-type="phone,2in1,tablet">OH_Scan_GetScannerParameter()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scan_getscannerparameter" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">Scan_ScannerOptions* <span class="hljs-title">OH_Scan_GetScannerParameter</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* scannerId, <span class="hljs-type">int32_t</span>* errorCode)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此API可用于获取扫描仪可设置的选项列表返回的结构体指针指向的内存会在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_exit">OH_Scan_Exit</a>时自动释放，每个型号在内存中只会存储一份副本</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>需要权限：</strong> ohos.permission.PRINT</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* scannerId</td> <td class="cellrowborder" width="50%">用于获取扫描仪参数的ID</td> </tr> <tr><td class="cellrowborder" width="50%">int32_t* errorCode</td> <td class="cellrowborder" width="50%">如果执行成功，errorCode返回<a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a>，否则返回特定的错误码，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohprint-h#print_errorcode">Print_ErrorCode</a></td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-scan-scan-scanneroptions">Scan_ScannerOptions*</a></td> <td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a> 表示成功获取扫描仪参数选项</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_PERMISSION</a> 表示无权限使用此接口</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_RPC_FAILURE</a> 表示RPC通信错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_SERVER_FAILURE</a> 表示扫描过程中发生错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_INVALID_PARAMETER</a> 表示参数无效</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scan_setscannerparameter" device-type="phone,2in1,tablet">OH_Scan_SetScannerParameter()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scan_setscannerparameter" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Scan_SetScannerParameter</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* scannerId, <span class="hljs-type">const</span> <span class="hljs-type">int32_t</span> option, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* value)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此API可用于设置扫描仪的某个选项参数传入的选项和值从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#oh_scan_getscannerparameter">OH_Scan_GetScannerParameter</a>获取</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>需要权限：</strong> ohos.permission.PRINT</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* scannerId</td> <td class="cellrowborder" width="50%">此ID用于设置特定扫描仪的选项</td> </tr> <tr><td class="cellrowborder" width="50%">const int32_t option</td> <td class="cellrowborder" width="50%">要设置的选项编号。取值范围从0到 optionCount - 1，从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-scan-scan-scanneroptions">Scan_ScannerOptions</a>获取</td> </tr> <tr><td class="cellrowborder" width="50%">const char* value</td> <td class="cellrowborder" width="50%">要设置的选项值，有效值从ranges获取，从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-scan-scan-scanneroptions">Scan_ScannerOptions</a>获取</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a> 表示扫描仪参数设置成功</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_PERMISSION</a> 表示无权限使用此接口</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_RPC_FAILURE</a> 表示RPC通信错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_SERVER_FAILURE</a> 表示扫描过程中发生错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_INVALID_PARAMETER</a> 表示参数无效</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scan_startscan" device-type="phone,2in1,tablet">OH_Scan_StartScan()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scan_startscan" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Scan_StartScan</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* scannerId, <span class="hljs-type">bool</span> batchMode)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此API允许扫描仪开始扫描</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>需要权限：</strong> code ohos.permission.PRINT</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* scannerId</td> <td class="cellrowborder" width="50%">此ID用于启动指定扫描仪的扫描任务</td> </tr> <tr><td class="cellrowborder" width="50%">bool batchMode</td> <td class="cellrowborder" width="50%">是否以批处理模式启动扫描仪</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a> 表示扫描仪成功启动扫描任务</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_PERMISSION</a> 表示无权限使用此接口</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_RPC_FAILURE</a> 表示RPC通信错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_SERVER_FAILURE</a> 表示扫描过程中发生错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_JAMMED</a> 表示文档进纸器卡纸</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_DOCS</a> 表示文档进纸器缺纸</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_COVER_OPEN</a> 表示扫描仪盖板打开</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_IO_ERROR</a> 表示与设备通信时发生错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_MEMORY</a> 表示可用内存不足</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_INVALID_PARAMETER</a> 表示输入参数无效</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_DEVICE_BUSY</a> 表示设备繁忙，应稍后重试操作</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scan_cancelscan" device-type="phone,2in1,tablet">OH_Scan_CancelScan()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scan_cancelscan" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Scan_CancelScan</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* scannerId)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此API允许扫描仪取消扫描</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>需要权限：</strong> ohos.permission.PRINT</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* scannerId</td> <td class="cellrowborder" width="50%">此ID用于取消指定扫描仪的扫描任务</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a> 表示扫描仪成功取消扫描任务</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_PERMISSION</a> 表示无权限使用此接口</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_INVALID_PARAMETER</a> 表示指针为空或字符串为空</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_RPC_FAILURE</a> 表示RPC通信错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_SERVER_FAILURE</a> 表示扫描过程中发生错误</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scan_getpicturescanprogress" device-type="phone,2in1,tablet">OH_Scan_GetPictureScanProgress()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scan_getpicturescanprogress" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_Scan_GetPictureScanProgress</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* scannerId, Scan_PictureScanProgress* prog)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此API可获取扫描仪扫描图片的进度。必须传入非空值，扫描进度将写入指针指向的结构体</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>需要权限：</strong> ohos.permission.PRINT</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* scannerId</td> <td class="cellrowborder" width="50%">用于查询扫描仪图像扫描进度的ID</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-scan-scan-picturescanprogress">Scan_PictureScanProgress</a>* prog</td> <td class="cellrowborder" width="50%">扫描图片的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-oh-scan-scan-picturescanprogress">Scan_PictureScanProgress</a>，必须为非空值</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a> 表示扫描仪成功查询到扫描图像的进度</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_PERMISSION</a> 表示无权限使用此接口</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_INVALID_PARAMETER</a> 表示指针为空或字符串为空</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_RPC_FAILURE</a> 表示RPC通信错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_SERVER_FAILURE</a> 表示扫描过程中发生错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_JAMMED</a> 表示文档进纸器卡纸</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_DOCS</a> 表示文档进纸器缺纸</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_COVER_OPEN</a> 表示扫描仪盖板打开</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_IO_ERROR</a> 表示与扫描仪通信时发生错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_MEMORY</a> 表示可用内存不足</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_DEVICE_BUSY</a> 表示设备繁忙，应稍后重试操作</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scan_exit" device-type="phone,2in1,tablet">OH_Scan_Exit()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scan_exit" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ucm-c106="" class="highlight-div"><div _ngcontent-ucm-c106="" class="highlight-div-header"><div _ngcontent-ucm-c106="" class="highlight-div-header-left"><div _ngcontent-ucm-c106="" class="handle-button expand-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ucm-c106="" class="highlight-div-header-right"><div _ngcontent-ucm-c106="" class="handle-button ai-button"></div><div _ngcontent-ucm-c106="" class="handle-button line-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ucm-c106="" class="handle-button theme-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ucm-c106="" class="handle-button copy-button"><div _ngcontent-ucm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ucm-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_Scan_Exit</span>()</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>此API可用于退出扫描服务，释放扫描框架内存，并注销扫描仪发现回调</p> <p><strong>系统能力：</strong> SystemCapability.Print.PrintFramework</p> <p><strong>需要权限：</strong> ohos.permission.PRINT</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">Scan_ERROR_NONE</a> 表示扫描服务成功退出</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_NO_PERMISSION</a> 表示无权限使用此接口</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_RPC_FAILURE</a> 表示RPC通信错误</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-ohscan-h#scan_errorcode">SCAN_ERROR_SERVER_FAILURE</a> 表示扫描过程中发生错误</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>