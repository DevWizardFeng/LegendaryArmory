<h1 _ngcontent-aal-c119="" class="doc-title ng-star-inserted" title="openFileBoost（文件打开加速）"> openFileBoost（文件打开加速） </h1>

<div _ngcontent-aal-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块为应用提供文件打开加速状态感知能力。应用可以通过接入对应API，感知文件的加速状态，进而应用可以实现对已加速文件给出独特的UI（user interface）标识等功能，优化用户文件打开体验。</p>    <p><strong>起始版本：</strong>5.0.5(17)</p>    <div class="tiledSection">     <h2 id="section16609101116259" device-type="2in1">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-aal-c106="" class="highlight-div"><div _ngcontent-aal-c106="" class="highlight-div-header"><div _ngcontent-aal-c106="" class="highlight-div-header-left"><div _ngcontent-aal-c106="" class="handle-button expand-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aal-c106="" class="highlight-div-header-right"><div _ngcontent-aal-c106="" class="handle-button ai-button"></div><div _ngcontent-aal-c106="" class="handle-button line-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aal-c106="" class="handle-button theme-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aal-c106="" class="handle-button copy-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aal-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { openFileBoost } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PreviewKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1081123302517" device-type="2in1">FilePreloadState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1081123302517" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>表示文件预加载状态的枚举。</p>     <p><strong>系统能力：</strong> SystemCapability.PCService.OpenFileBoost</p>     <p><strong>起始版本：</strong>5.0.5(17)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.1" width="33.33333333333333%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.2" width="33.33333333333333%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.3" width="33.33333333333333%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>NOT_PRELOADED</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>0</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>文件未预加载</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>PRELOADING</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>1</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>文件预加载中</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>PRELOADED</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>2</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>文件预加载完成</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section2913441120" device-type="2in1">FilePreloadStatusInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2913441120" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>文件预加载回调返回的接口实例，表示文件的预加载状态信息。</p>     <p><strong>系统能力：</strong> SystemCapability.PCService.OpenFileBoost</p>     <p><strong>起始版本：</strong>5.0.5(17)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="20%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="20%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>sandboxPath</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>文件的沙箱路径</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>progress</p></td>         <td class="cellrowborder" width="20%">          <p>number</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>文件预加载进度</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>state</p></td>         <td class="cellrowborder" width="20%">          <p><a href="/consumer/cn/doc/harmonyos-references/preview-arkts-openfileboost-api#section1081123302517">FilePreloadState</a></p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>文件预加载状态</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section298512619713" device-type="2in1">openFileBoost.on('filePreloadStateChanged')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section298512619713" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>on(type: 'filePreloadStateChanged', callback: Callback&lt;FilePreloadStatusInfo&gt;): void</p>     <p>文件预加载状态回调，应用通过注册回调函数获取文件预加载的状态变化。</p>     <p><strong>系统能力：</strong> SystemCapability.PCService.OpenFileBoost</p>     <p><strong>起始版本：</strong>5.0.5(17)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="8.32%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="41.68%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="8.32%">          <p>是</p></td>         <td class="cellrowborder" width="41.68%">          <p>事件回调类型，固定为'filePreloadStateChanged'，每当预加载文件状态变化时都会触发该事件并返回对应信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/preview-arkts-openfileboost-api#section2913441120">FilePreloadStatusInfo</a>&gt;</p></td>         <td class="cellrowborder" width="8.32%">          <p>是</p></td>         <td class="cellrowborder" width="41.68%">          <p>回调函数，用于应用获取预加载文件状态变化信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>通用错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/preview-arkts-errcode">模块错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="49.96%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50.03999999999999%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="49.96%">          <p>401</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>参数检查失败</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220001</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>内部失败</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220002</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>服务不可用</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aal-c106="" class="highlight-div"><div _ngcontent-aal-c106="" class="highlight-div-header"><div _ngcontent-aal-c106="" class="highlight-div-header-left"><div _ngcontent-aal-c106="" class="handle-button expand-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aal-c106="" class="highlight-div-header-right"><div _ngcontent-aal-c106="" class="handle-button ai-button"></div><div _ngcontent-aal-c106="" class="handle-button line-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aal-c106="" class="handle-button theme-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aal-c106="" class="handle-button copy-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aal-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { openFileBoost } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PreviewKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span>  <span class="hljs-title function_">callback</span>(<span class="hljs-params">filePreloadStatusInfo: openFileBoost.FilePreloadStatusInfo</span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">if</span> (filePreloadStatusInfo.<span class="hljs-property">state</span> === openFileBoost.<span class="hljs-property">FilePreloadState</span>.<span class="hljs-property">PRELOADING</span>) {</li><li>    <span class="hljs-comment">// 预加载过程中，应用可以根据自己设计对应UX</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`file is PRELOADING, suggest to show loading animation`</span>);</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (filePreloadStatusInfo.<span class="hljs-property">state</span> === openFileBoost.<span class="hljs-property">FilePreloadState</span>.<span class="hljs-property">PRELOADED</span>) {</li><li>    <span class="hljs-comment">// 预加载完成，应用可以通过UX显示提示用户加速完成</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`file is PRELOADED, suggest to show loaded animation`</span>);</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (filePreloadStatusInfo.<span class="hljs-property">state</span> === openFileBoost.<span class="hljs-property">FilePreloadState</span>.<span class="hljs-property">NOT_PRELOADED</span>) {</li><li>    <span class="hljs-comment">// 没有预加载，应用可以不显示任何额外UX</span></li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`file is UNPRELOADED, suggest do not show animation `</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">register</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    openFileBoost.<span class="hljs-title function_">on</span>(<span class="hljs-string">'filePreloadStateChanged'</span>, callback);</li><li>  } <span class="hljs-keyword">catch</span>(error) {</li><li>    <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on filePreloadStateChanged failed, error code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>.`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section71518511321" device-type="2in1">openFileBoost.off('filePreloadStateChanged')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section71518511321" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>off(type: 'filePreloadStateChanged', callback?: Callback&lt;FilePreloadStatusInfo&gt;): void</p>     <p>文件预加载状态注销回调，通过注销回调函数取消获取文件预加载的状态变化。</p>     <p><strong>系统能力：</strong> SystemCapability.PCService.OpenFileBoost</p>     <p><strong>起始版本：</strong>5.0.5(17)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="8.32%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="41.68%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>type</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="8.32%">          <p>是</p></td>         <td class="cellrowborder" width="41.68%">          <p>事件回调用类型，固定为'filePreloadStateChanged'，当预加载文件状态变化时会触发该事件并返回对应信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/preview-arkts-openfileboost-api#section2913441120">FilePreloadStatusInfo</a>&gt;</p></td>         <td class="cellrowborder" width="8.32%">          <p>否</p></td>         <td class="cellrowborder" width="41.68%">          <p>回调函数，如果指定参数则取消对应callback（callback对象不可是匿名函数），否则取消所有callback。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>通用错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/preview-arkts-errcode">模块错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="49.96%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50.03999999999999%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="49.96%">          <p>401</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>参数检查失败</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220001</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>内部失败</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220002</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>服务不可用</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aal-c106="" class="highlight-div"><div _ngcontent-aal-c106="" class="highlight-div-header"><div _ngcontent-aal-c106="" class="highlight-div-header-left"><div _ngcontent-aal-c106="" class="handle-button expand-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aal-c106="" class="highlight-div-header-right"><div _ngcontent-aal-c106="" class="handle-button ai-button"></div><div _ngcontent-aal-c106="" class="handle-button line-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aal-c106="" class="handle-button theme-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aal-c106="" class="handle-button copy-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aal-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { openFileBoost } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PreviewKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callback1</span>(<span class="hljs-params">filePreloadStatusInfo: openFileBoost.FilePreloadStatusInfo</span>): <span class="hljs-built_in">void</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on filePreloadStateChanged in callback1`</span>);</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callback2</span>(<span class="hljs-params">filePreloadStatusInfo: openFileBoost.FilePreloadStatusInfo</span>): <span class="hljs-built_in">void</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on filePreloadStateChanged in callback2`</span>);</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callback3</span>(<span class="hljs-params">filePreloadStatusInfo: openFileBoost.FilePreloadStatusInfo</span>): <span class="hljs-built_in">void</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on filePreloadStateChanged in callback3`</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testUnregister</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    openFileBoost.<span class="hljs-title function_">on</span>(<span class="hljs-string">'filePreloadStateChanged'</span>, callback1);</li><li>    openFileBoost.<span class="hljs-title function_">on</span>(<span class="hljs-string">'filePreloadStateChanged'</span>, callback2);</li><li>    openFileBoost.<span class="hljs-title function_">on</span>(<span class="hljs-string">'filePreloadStateChanged'</span>, callback3);</li><li>    <span class="hljs-comment">// 单独取消callback1的监听，传入callback1作为参数，后续不会再调用callback1的回调做通知</span></li><li>    openFileBoost.<span class="hljs-title function_">off</span>(<span class="hljs-string">'filePreloadStateChanged'</span>, callback1);</li><li>    <span class="hljs-comment">// 取消所有callback的监听，不传第二个可选参数，后续不会再调用callback2和callback3做通知</span></li><li>    openFileBoost.<span class="hljs-title function_">off</span>(<span class="hljs-string">'filePreloadStateChanged'</span>);</li><li>  } <span class="hljs-keyword">catch</span>(error) {</li><li>    <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`off filePreloadStateChanged failed, error code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>.`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section2046715683616" device-type="2in1">openFileBoost.addFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2046715683616" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>addFile(file: string): void</p>     <p>监听一个文件的预加载状态，应用传入文件路径后系统开始监听该文件的预加载状态。后续该文件状态有变化时系统通过'filePreloadStateChanged'事件回调向应用返回文件预加载状态变化。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>1. 需要先调用<a href="/consumer/cn/doc/harmonyos-references/preview-arkts-openfileboost-api#section298512619713">openFileBoost.on('filePreloadStateChanged')</a>接口后再调用该接口添加文件预加载状态监听。</p>       <p>2. 当前一个应用最多添加50个文件监听。</p>      </div></div></div>     <p>当前支持加速的文件类型见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/preview-introduction#section7910758192912" target="_blank">文件打开加速支持的文件类型</a>，不支持的文件类型默认为未预加载状态，不需要调用该接口监听文件预加载状态变更。</p>     <p><strong>系统能力：</strong> SystemCapability.PCService.OpenFileBoost</p>     <p><strong>起始版本：</strong>5.0.5(17)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.3" width="8.32%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.4" width="41.68%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>file</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="8.32%">          <p>是</p></td>         <td class="cellrowborder" width="41.68%">          <p>文件的沙箱路径</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>通用错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/preview-arkts-errcode">模块错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="49.96%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="50.03999999999999%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="49.96%">          <p>401</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>参数检查失败</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220001</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>内部失败</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220002</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>服务不可用</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220003</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>添加的文件个数超过上限</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aal-c106="" class="highlight-div"><div _ngcontent-aal-c106="" class="highlight-div-header"><div _ngcontent-aal-c106="" class="highlight-div-header-left"><div _ngcontent-aal-c106="" class="handle-button expand-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aal-c106="" class="highlight-div-header-right"><div _ngcontent-aal-c106="" class="handle-button ai-button"></div><div _ngcontent-aal-c106="" class="handle-button line-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aal-c106="" class="handle-button theme-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aal-c106="" class="handle-button copy-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aal-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { openFileBoost } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PreviewKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">file</span>:<span class="hljs-built_in">string</span> = <span class="hljs-string">"/storage/Users/currentUser/Desktop/10MB_file.docx"</span>;</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">fileStateChangedCallback</span>(<span class="hljs-params">filePreloadStatusInfo: openFileBoost.FilePreloadStatusInfo</span>): <span class="hljs-built_in">void</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`on filePreloadStateChanged, state: <span class="hljs-subst">${filePreloadStatusInfo.state}</span>}`</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testAddFile</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    openFileBoost.<span class="hljs-title function_">on</span>(<span class="hljs-string">'filePreloadStateChanged'</span>, fileStateChangedCallback);</li><li>    openFileBoost.<span class="hljs-title function_">addFile</span>(file);</li><li>  } <span class="hljs-keyword">catch</span>(error) {</li><li>    <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`addFile failed, error code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>.`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section19623053194020" device-type="2in1">openFileBoost.removeFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19623053194020" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>removeFile(file: string): void</p>     <p>取消监听一个文件的预加载状态，取消后文件的预加载状态变化不会通过回调再通知应用。</p>     <p><strong>系统能力：</strong> SystemCapability.PCService.OpenFileBoost</p>     <p><strong>起始版本：</strong>5.0.5(17)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="8.32%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="41.68%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>file</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="8.32%">          <p>是</p></td>         <td class="cellrowborder" width="41.68%">          <p>文件的沙箱路径</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>通用错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/preview-arkts-errcode">模块错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="49.96%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50.03999999999999%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="49.96%">          <p>401</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>参数检查失败</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220001</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>内部失败</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220002</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>服务不可用</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aal-c106="" class="highlight-div"><div _ngcontent-aal-c106="" class="highlight-div-header"><div _ngcontent-aal-c106="" class="highlight-div-header-left"><div _ngcontent-aal-c106="" class="handle-button expand-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aal-c106="" class="highlight-div-header-right"><div _ngcontent-aal-c106="" class="handle-button ai-button"></div><div _ngcontent-aal-c106="" class="handle-button line-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aal-c106="" class="handle-button theme-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aal-c106="" class="handle-button copy-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aal-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { openFileBoost } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PreviewKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">file</span>:<span class="hljs-built_in">string</span> = <span class="hljs-string">"/storage/Users/currentUser/Desktop/10MB_file.docx"</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  openFileBoost.<span class="hljs-title function_">removeFile</span>(file);</li><li>} <span class="hljs-keyword">catch</span>(error) {</li><li>  <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`removeFile failed, error code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section6753165718422" device-type="2in1">openFileBoost.queryFilePreloadStatusInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section6753165718422" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>queryFilePreloadStatusInfo(file: string): FilePreloadStatusInfo</p>     <p>查询文件预加载状态，传入文件路径，通过返回值返回该文件当前的预加载状态。</p>     <p><strong>系统能力：</strong> SystemCapability.PCService.OpenFileBoost</p>     <p><strong>起始版本：</strong>5.0.5(17)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="8.32%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="41.68%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>file</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="8.32%">          <p>是</p></td>         <td class="cellrowborder" width="41.68%">          <p>文件的沙箱路径</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p><a href="/consumer/cn/doc/harmonyos-references/preview-arkts-openfileboost-api#section2913441120">FilePreloadStatusInfo</a></p></td>         <td class="cellrowborder" width="50%">          <p>文件预加载状态信息</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>通用错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/preview-arkts-errcode">模块错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="49.96%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50.03999999999999%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="49.96%">          <p>401</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>参数检查失败</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220001</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>内部失败</p></td>        </tr>        <tr>         <td class="cellrowborder" width="49.96%">          <p>1017220002</p></td>         <td class="cellrowborder" width="50.03999999999999%">          <p>服务不可用</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aal-c106="" class="highlight-div"><div _ngcontent-aal-c106="" class="highlight-div-header"><div _ngcontent-aal-c106="" class="highlight-div-header-left"><div _ngcontent-aal-c106="" class="handle-button expand-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aal-c106="" class="highlight-div-header-right"><div _ngcontent-aal-c106="" class="handle-button ai-button"></div><div _ngcontent-aal-c106="" class="handle-button line-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aal-c106="" class="handle-button theme-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aal-c106="" class="handle-button copy-button"><div _ngcontent-aal-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aal-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { openFileBoost } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PreviewKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">file</span>:<span class="hljs-built_in">string</span> = <span class="hljs-string">"/storage/Users/currentUser/Desktop/10MB_file.docx"</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> statusInfo : openFileBoost.<span class="hljs-property">FilePreloadStatusInfo</span> = openFileBoost.<span class="hljs-title function_">queryFilePreloadStatusInfo</span>(file);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'file, %{public}s, progress:%{public}d  preloadState:%{public}d'</span>,</li><li>    statusInfo.<span class="hljs-property">sandboxPath</span>, statusInfo.<span class="hljs-property">progress</span>, statusInfo.<span class="hljs-property">state</span>);</li><li>} <span class="hljs-keyword">catch</span>(error) {</li><li>  <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`query failed, error code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${message}</span>.`</span>);</li><li>}</li></ol></pre></div></div>     <p></p>    </div>   </div>   <div></div></div>