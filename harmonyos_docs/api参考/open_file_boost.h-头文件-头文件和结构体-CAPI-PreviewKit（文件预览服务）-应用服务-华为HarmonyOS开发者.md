<h1 _ngcontent-yix-c119="" class="doc-title ng-star-inserted" title="open_file_boost.h"> open_file_boost.h </h1>

<div _ngcontent-yix-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section1423109270112053" device-type="2in1">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1423109270112053" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>声明文件打开加速的API集合</p> <p><strong>库：</strong> libopen_file_boost.so</p> <p><strong>系统能力：</strong> SystemCapability.PCService.OpenFileBoost</p> <p><strong>起始版本：</strong> 5.0.3(15)</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview">Preview</a></p> </div> <div class="tiledSection"><h2 id="section1606068236112053" device-type="2in1">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1606068236112053" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div></div> <div class="tiledSection"><h3 id="define-members" device-type="2in1" class="firsth2">宏定义<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="define-members" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#gaa8a8ed5c9e057542ff818fde39a94f07">MAX_BUFFER_LENGTH</a>   1024</p> </td> <td class="cellrowborder" width="50%"><p>沙箱路径最大长度。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="typedef-members" device-type="2in1">类型定义<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="typedef-members" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>typedef <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#gafae4452b9e410d76236258ec57e0af62">OpenFileBoost_AppState</a>(*<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga8de1d5d3db37e7701a91f24a56dee641">HMS_OpenFileBoost_QueryAppState</a>) (void)</p> </td> <td class="cellrowborder" width="50%"><p>系统查询app状态的回调函数定义，该函数在调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga7cb236400dadbd94b0586c7f234ad23b">HMS_OpenFileBoost_OnFilePreload</a>推荐文件之前先回调app。该函数用于系统向app查询当前是否允许推荐文件给app。如果应用处于前台焦点或者某些特殊状态，不适合预加载文件，app返回特定枚举值拒绝预加载。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>typedef <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga773c6beb8645cfe54e1ce7eab67b8161">OpenFileBoost_CbErrCode</a>(*<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga7cb236400dadbd94b0586c7f234ad23b">HMS_OpenFileBoost_OnFilePreload</a>) (void* fileInfo)</p> </td> <td class="cellrowborder" width="50%"><p>系统向应用推荐或取消推荐预加载文件的回调函数定义。 系统预测用户可能打开的文件，并通过该回调函数通知app，另外在某些场景下，比如当前系统可用内存不足，或者有其他文件更有可能被用户打开，则系统会通知app取消某些文件的预加载。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="enum-members" device-type="2in1">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enum-members" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga5716dcdf88f1609b3466aadc675a0efc">OpenFileBoost_ErrCode</a> {</p> <p>OPEN_FILE_BOOST_SUCCESS = 0,</p> <p>OPEN_FILE_BOOST_PERMISSION_NOT_GRANTED = 201,</p> <p>OPEN_FILE_BOOST_INVALID_PARAM = 401,</p> <p>OPEN_FILE_BOOST_INTERNAL_ERROR = 1017200001,</p> <p>OPEN_FILE_BOOST_INSUFFICIENT_BUFFER = 1017200002,</p> <p>OPEN_FILE_BOOST_SERVICE_UNAVAILABLE = 1017200003,</p> <p>OPEN_FILE_BOOST_NO_MEMORY = 1017200004</p> <p>}</p> </td> <td class="cellrowborder" width="50%"><p>文件打开加速的错误码定义。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga773c6beb8645cfe54e1ce7eab67b8161">OpenFileBoost_CbErrCode</a> {</p> <p>OPEN_FILE_BOOST_CALLBACK_SUCCESS = 0,</p> <p>OPEN_FILE_BOOST_CALLBACK_FAILURE = 1017210000</p> <p>}</p> </td> <td class="cellrowborder" width="50%"><p>回调函数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga7cb236400dadbd94b0586c7f234ad23b">HMS_OpenFileBoost_OnFilePreload</a>的错误码定义， 它用于app向系统返回回调函数执行结果。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#gafae4452b9e410d76236258ec57e0af62">OpenFileBoost_AppState</a> {</p> <p>OPEN_FILE_BOOST_APP_STATE_ALLOW_PRELOAD = 0,</p> <p>OPEN_FILE_BOOST_APP_STATE_REJECT_PRELOAD = 1,</p> <p>OPEN_FILE_BOOST_APP_STATE_FOREVER_REJECT_PRELOAD = 2</p> <p>}</p> </td> <td class="cellrowborder" width="50%"><p>app状态，用于指示app当前是否允许系统推荐预加载文件。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="func-members" device-type="2in1">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="func-members" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.2.1.3.1.1" width="50%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.3.1.2" width="50%"><p>描述</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga5716dcdf88f1609b3466aadc675a0efc">OpenFileBoost_ErrCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga13429f2e33ddd0805274b46223a3f5b3">HMS_OpenFileBoost_GetFdFromPreloadFileInfo</a> (void* fileInfo, int32_t* fd)</p> </td> <td class="cellrowborder" width="50%"><p>获取文件描述符信息。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga5716dcdf88f1609b3466aadc675a0efc">OpenFileBoost_ErrCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga16b482acdc9b56ebd8d01efed6875e95">HMS_OpenFileBoost_GetSandboxPathFromPreloadFileInfo</a> (void* fileInfo, char* sandboxPath, int32_t pathLen)</p> </td> <td class="cellrowborder" width="50%"><p>获取沙箱路径信息。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga5716dcdf88f1609b3466aadc675a0efc">OpenFileBoost_ErrCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga0ff9ab52e40e265bc90a9cca779d0fd1">HMS_OpenFileBoost_RegisterFilePreload</a> (<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga8de1d5d3db37e7701a91f24a56dee641">HMS_OpenFileBoost_QueryAppState</a> queryAppState, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga7cb236400dadbd94b0586c7f234ad23b">HMS_OpenFileBoost_OnFilePreload</a> filePreload, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga7cb236400dadbd94b0586c7f234ad23b">HMS_OpenFileBoost_OnFilePreload</a> cancelFilePreload)</p> </td> <td class="cellrowborder" width="50%"><p>注册预加载回调。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga5716dcdf88f1609b3466aadc675a0efc">OpenFileBoost_ErrCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#gafdef9962cc4c394dad2103bd8c773e90">HMS_OpenFileBoost_UnregisterFilePreload</a> (void)</p> </td> <td class="cellrowborder" width="50%"><p>取消注册预加载回调。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga5716dcdf88f1609b3466aadc675a0efc">OpenFileBoost_ErrCode</a> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/openfileboost_preview#ga613e9855b8e471157a522ba19bac4d5e">HMS_OpenFileBoost_NotifyPreloadHit</a> (int32_t fd, char* sandboxPath, int32_t pathLen)</p> </td> <td class="cellrowborder" width="50%"><p>当用户打开预加载文件时，app调用该接口通知系统预加载命中，这将有助于提高预加载文件预测的准确性。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>