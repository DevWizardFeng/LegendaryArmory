<h1 _ngcontent-rin-c119="" class="doc-title ng-star-inserted" title="productViewManager (应用市场推荐)"> productViewManager (应用市场推荐) </h1>

<div _ngcontent-rin-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>提供展示应用/元服务详情页、应用内快捷方式加桌的能力。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>调用接口需捕获异常。</p>     </div></div></div>    <p><strong>起始版本：</strong>4.1.0(11)</p>    <div class="tiledSection">     <h2 id="section16609101116259" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-rin-c106="" class="highlight-div"><div _ngcontent-rin-c106="" class="highlight-div-header"><div _ngcontent-rin-c106="" class="highlight-div-header-left"><div _ngcontent-rin-c106="" class="handle-button expand-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rin-c106="" class="highlight-div-header-right"><div _ngcontent-rin-c106="" class="handle-button ai-button"></div><div _ngcontent-rin-c106="" class="handle-button line-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rin-c106="" class="handle-button theme-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rin-c106="" class="handle-button copy-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rin-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { productViewManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppGalleryKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1744815172418" device-type="phone,2in1,tablet">ProductViewCallback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1744815172418" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>在加载应用详情页面时作为入参用于接收加载过程中的状态变化。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.1" width="17.16%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.2" width="16.56%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.3" width="23.36%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.4" width="11.18%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.6.1.5" width="31.740000000000002%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="17.16%">          <p>onError</p></td>         <td class="cellrowborder" width="16.56%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback" target="_blank">ErrorCallback</a></p></td>         <td class="cellrowborder" width="23.36%">          <p>否</p></td>         <td class="cellrowborder" width="11.18%">          <p>是</p></td>         <td class="cellrowborder" width="31.740000000000002%">          <p>回调函数，接收应用详情页加载失败的错误码。</p>          <ul>           <li>1011表示拉起/切前台失败。</li>           <li>1012表示切后台失败。</li>           <li>1013表示销毁失败。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="17.16%">          <p>onAppear</p></td>         <td class="cellrowborder" width="16.56%">          <p>Callback&lt;void&gt;</p></td>         <td class="cellrowborder" width="23.36%">          <p>否</p></td>         <td class="cellrowborder" width="11.18%">          <p>是</p></td>         <td class="cellrowborder" width="31.740000000000002%">          <p>回调函数，当应用详情页成功打开时回调该方法。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p><strong>起始版本：</strong>5.0.2(14)。</p>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" width="17.16%">          <p>onDisappear</p></td>         <td class="cellrowborder" width="16.56%">          <p>Callback&lt;void&gt;</p></td>         <td class="cellrowborder" width="23.36%">          <p>否</p></td>         <td class="cellrowborder" width="11.18%">          <p>是</p></td>         <td class="cellrowborder" width="31.740000000000002%">          <p>回调函数，当应用详情页关闭时回调该方法。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p><strong>起始版本：</strong>5.0.2(14)。</p>           </div></div></div></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section428319231351" device-type="phone,2in1,tablet">ServiceViewCallback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section428319231351" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>在加载元服务卡片加桌页面时作为入参用于接收加载过程中的状态变化。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.1" width="17.16%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.2" width="21.01%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.3" width="18.39%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.4" width="11.43%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.6.1.5" width="32.01%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="17.16%">          <p>onReceive</p></td>         <td class="cellrowborder" width="21.01%">          <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/store-productviewmanager#section530571318012">ServiceViewReceiveData</a>&gt;</p></td>         <td class="cellrowborder" width="18.39%">          <p>否</p></td>         <td class="cellrowborder" width="11.43%">          <p>是</p></td>         <td class="cellrowborder" width="32.01%">          <p>当打开元服务卡片加桌页成功，点击加桌，收到加桌结果。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="17.16%">          <p>onError</p></td>         <td class="cellrowborder" width="21.01%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback" target="_blank">ErrorCallback</a></p></td>         <td class="cellrowborder" width="18.39%">          <p>否</p></td>         <td class="cellrowborder" width="11.43%">          <p>是</p></td>         <td class="cellrowborder" width="32.01%">          <p>回调函数，接收元服务卡片加桌页加载失败的错误码。</p>          <ul>           <li>1011表示拉起/切前台失败。</li>           <li>1012表示切后台失败。</li>           <li>1013表示销毁失败。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="17.16%">          <p>onAppear</p></td>         <td class="cellrowborder" width="21.01%">          <p>Callback&lt;void&gt;</p></td>         <td class="cellrowborder" width="18.39%">          <p>否</p></td>         <td class="cellrowborder" width="11.43%">          <p>是</p></td>         <td class="cellrowborder" width="32.01%">          <p>回调函数，当元服务卡片加桌页成功打开时回调该方法。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p><strong>起始版本</strong>：5.0.2(14)。</p>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" width="17.16%">          <p>onDisappear</p></td>         <td class="cellrowborder" width="21.01%">          <p>Callback&lt;void&gt;</p></td>         <td class="cellrowborder" width="18.39%">          <p>否</p></td>         <td class="cellrowborder" width="11.43%">          <p>是</p></td>         <td class="cellrowborder" width="32.01%">          <p>回调函数，当元服务卡片加桌页关闭时回调该方法。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p><strong>起始版本</strong>：5.0.2(14)。</p>           </div></div></div></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section530571318012" device-type="phone,2in1,tablet">ServiceViewReceiveData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section530571318012" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>元服务加桌回调数据。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.1" width="16.960000000000004%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.2" width="23.6%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.3" width="14.370000000000003%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.4" width="18.140000000000004%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.6.1.5" width="26.930000000000003%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="16.960000000000004%">          <p>result</p></td>         <td class="cellrowborder" width="23.6%">          <p><a href="/consumer/cn/doc/harmonyos-references/store-productviewmanager#section1690663817619">ReceiveDataResult</a></p></td>         <td class="cellrowborder" width="14.370000000000003%">          <p>是</p></td>         <td class="cellrowborder" width="18.140000000000004%">          <p>否</p></td>         <td class="cellrowborder" width="26.930000000000003%">          <p>加桌结果。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="16.960000000000004%">          <p>msg</p></td>         <td class="cellrowborder" width="23.6%">          <p>string</p></td>         <td class="cellrowborder" width="14.370000000000003%">          <p>是</p></td>         <td class="cellrowborder" width="18.140000000000004%">          <p>否</p></td>         <td class="cellrowborder" width="26.930000000000003%">          <p>加桌结果描述信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="16.960000000000004%">          <p>formInfo</p></td>         <td class="cellrowborder" width="23.6%">          <p>{[key: string]: Object;}</p></td>         <td class="cellrowborder" width="14.370000000000003%">          <p>是</p></td>         <td class="cellrowborder" width="18.140000000000004%">          <p>否</p></td>         <td class="cellrowborder" width="26.930000000000003%">          <p>加桌卡片数据。有以下必填属性：</p>          <ul>           <li>bundleName表示元服务包名。</li>           <li>name表示卡片名称。</li>           <li>abilityName表示ability名称。</li>           <li>moduleName表示元服务模块名。</li>           <li>defaultDimension表示卡片尺寸。</li>          </ul></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1690663817619" device-type="phone,2in1,tablet">ReceiveDataResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1690663817619" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>元服务加桌结果码类型的枚举。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.4.1.1" width="33.33333333333333%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.4.1.2" width="33.33333333333333%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.4.1.3" width="33.33333333333333%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>SUCCESS</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>1000</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>成功。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>FAILURE</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>1001</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">          <p>EXCEPTION</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>1002</p></td>         <td class="cellrowborder" width="33.33333333333333%">          <p>异常。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1548317391199" device-type="phone,2in1,tablet">CheckShortcutResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1548317391199" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>快捷方式校验结果。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>5.0.2(14)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.1" width="20%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.2" width="20%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>tid</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>基于应用的快捷方式信息生成的Transaction ID。若快捷方式信息发生变化，则每次覆盖生成新的tid，否则返回历史tid以及剩余过期时间expired。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>expired</p></td>         <td class="cellrowborder" width="20%">          <p>number</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>Transaction ID的过期时间，单位是ms。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>code</p></td>         <td class="cellrowborder" width="20%">          <p>number</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>校验的结果码，0表示校验成功，否则具体的失败原因，可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-error-code">ArkTS API错误码</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>limit</p></td>         <td class="cellrowborder" width="20%">          <p>number</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>允许应用添加快捷方式的数量。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1346915243448" device-type="phone,2in1,tablet">SKExposure<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1346915243448" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>登记归因来源的广告曝光数据。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>5.0.2(14)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.6.1.1" width="20%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.6.1.2" width="20%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>adTechId</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>分发平台对应的归因角色ID，本次登记归因来源对应营销任务所归属的分发平台的标识符。</p>          <p>分发平台向应用归因云侧<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/store-attribution-register#section11218192952612" target="_blank">注册归因角色</a>时，由应用归因服务分配，长度固定为8字符。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>campaignId</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>营销任务ID，登记归因来源对应的营销任务的ID，长度不超过6字符。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>destinationId</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>应用上架华为应用市场的AppId，长度不超过64个字符。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <p>您的应用ID参考<a href="https://developer.huawei.com/consumer/cn/doc/app/agc-help-appinfo-0000001100014694" target="_blank">查看应用基本信息</a>获取。</p>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>mmpIds</p></td>         <td class="cellrowborder" width="20%">          <p>string[]</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>本次广告投放，使用的归因监测平台对应的归因角色ID。最大数量2个，每个ID字符串长度固定为8字符。</p>          <p>如果调用方传递了归因监测平台ID，应用归因服务会向归因监测平台回传归因结果；如果调用方没有传递监测平台ID，则归因监测平台收不到回传的归因结果。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>serviceTag</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>是</p></td>         <td class="cellrowborder" width="20%">          <p>分发平台关注的业务信息，如创意、素材等，长度不超过32字符。</p>          <p>serviceTag通过白名单方式向分发平台开放，白名单开放方式请联系华为运营。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>nonce</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>用于计算签名的随机数，不带'-'，每次广告请求，nonce唯一。长度固定为32字符。</p>          <p>同一个adTechId，同一个nonce最多可以登记5次曝光，5次点击类型的归因来源信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>timestamp</p></td>         <td class="cellrowborder" width="20%">          <p>number</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>unix时间戳，单位：毫秒，请求广告的时间戳。（即广告投放时间，登记归因来源时，要求广告时间与当前时间偏差不超过10分钟）</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>signature</p></td>         <td class="cellrowborder" width="20%">          <p>string</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>签名值，分发平台/媒体根据广告相应信息按照<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/appgallery-attribution-appendix-triger#section4208115642013" target="_blank">归因来源签名计算规则</a>计算生成签名并提供，长度不超过800字符。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rin-c106="" class="highlight-div"><div _ngcontent-rin-c106="" class="highlight-div-header"><div _ngcontent-rin-c106="" class="highlight-div-header-left"><div _ngcontent-rin-c106="" class="handle-button expand-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rin-c106="" class="highlight-div-header-right"><div _ngcontent-rin-c106="" class="handle-button ai-button"></div><div _ngcontent-rin-c106="" class="handle-button line-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rin-c106="" class="handle-button theme-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rin-c106="" class="handle-button copy-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rin-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { productViewManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppGalleryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'LoadProduct'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">LoadProduct</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"load_product"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">const</span> <span class="hljs-attr">exposureData</span>: productViewManager.<span class="hljs-property">SKExposure</span> = {</li><li>              <span class="hljs-attr">adTechId</span>: <span class="hljs-string">'20****e8'</span>,</li><li>              <span class="hljs-attr">campaignId</span>: <span class="hljs-string">'123456'</span>,</li><li>              <span class="hljs-attr">destinationId</span>: <span class="hljs-string">'10******'</span>,</li><li>              <span class="hljs-attr">mmpIds</span>: [<span class="hljs-string">'2f****5'</span>, <span class="hljs-string">'2f7***5'</span>],</li><li>              <span class="hljs-attr">serviceTag</span>: <span class="hljs-string">'123***2'</span>,</li><li>              <span class="hljs-attr">nonce</span>: <span class="hljs-string">'123***2'</span>,</li><li>              <span class="hljs-attr">timestamp</span>: <span class="hljs-number">1705536488</span>,</li><li>              <span class="hljs-attr">signature</span>: <span class="hljs-string">'MEQCIEQlmZ****zKBSE8QnhLTIHZZZ****ZpRqRxHss65Ko****JgJKjdrWdkL****juEx2RmFS7da****ZRVZ8RyMyUXg=='</span></li><li>            };</li><li>
</li><li>            <span class="hljs-keyword">const</span> <span class="hljs-attr">request</span>: <span class="hljs-title class_">Want</span> = {</li><li>              <span class="hljs-attr">parameters</span>: {</li><li>                <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.huawei.hmsapp.books'</span>,</li><li>                <span class="hljs-attr">skExposure</span>: exposureData</li><li>              }</li><li>            };</li><li>            productViewManager.<span class="hljs-title function_">loadProduct</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, request, {</li><li>              <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`loadProduct onError.code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>              }</li><li>            });</li><li>          } <span class="hljs-keyword">catch</span> (err) {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`loadProduct failed.code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">16</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section144826162913" device-type="phone,2in1,tablet">productViewManager.loadProduct<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section144826162913" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>loadProduct(context: common.UIAbilityContext, want: Want, callback?: ProductViewCallback): void</p>     <p>展示应用详情页，下载安装目标应用。使用Callback回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="24.98%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25.019999999999996%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">common.UIAbilityContext</a></p></td>         <td class="cellrowborder" width="24.98%">          <p>是</p></td>         <td class="cellrowborder" width="25.019999999999996%">          <p>调用方应用的上下文。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>want</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want" target="_blank">Want</a></p></td>         <td class="cellrowborder" width="24.98%">          <p>是</p></td>         <td class="cellrowborder" width="25.019999999999996%">          <p>展示应用详情页的请求参数。parameters 是该参数中的必填属性，为一个结构体。</p>          <p>该结构体包含两个属性：</p>          <ul>           <li>bundleName，必填，表示需要展示详情页的应用包名。</li>           <li>skExposure，可选，表示需要传递登记归因来源的广告曝光数据。具体参考示例代码。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>callback</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/store-productviewmanager#section1744815172418">ProductViewCallback</a></p></td>         <td class="cellrowborder" width="24.98%">          <p>否</p></td>         <td class="cellrowborder" width="25.019999999999996%">          <p>在加载应用详情页面时作为入参用于接收加载过程中的状态变化。若不填此参数，当加载应用详情页失败时，无法获取失败的错误码。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="30%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="70%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="30%">          <p>401</p></td>         <td class="cellrowborder" width="70%">          <p>Parameter error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rin-c106="" class="highlight-div"><div _ngcontent-rin-c106="" class="highlight-div-header"><div _ngcontent-rin-c106="" class="highlight-div-header-left"><div _ngcontent-rin-c106="" class="handle-button expand-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rin-c106="" class="highlight-div-header-right"><div _ngcontent-rin-c106="" class="handle-button ai-button"></div><div _ngcontent-rin-c106="" class="handle-button line-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rin-c106="" class="handle-button theme-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rin-c106="" class="handle-button copy-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rin-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { productViewManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppGalleryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'LoadProduct'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">LoadProduct</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"load_product"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">const</span> <span class="hljs-attr">request</span>: <span class="hljs-title class_">Want</span> = {</li><li>              <span class="hljs-attr">parameters</span>: {</li><li>                <span class="hljs-comment">// 此处填入要加载的应用包名，例如： bundleName: "com.huawei.hmsapp.appgallery"</span></li><li>                <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.xxx'</span></li><li>              }</li><li>            };</li><li>            productViewManager.<span class="hljs-title function_">loadProduct</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, request, {</li><li>              <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`loadProduct onError.code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>              },</li><li>              <span class="hljs-attr">onAppear</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`loadProduct onAppear.`</span>);</li><li>              },</li><li>              <span class="hljs-attr">onDisappear</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`loadProduct onDisappear.`</span>);</li><li>              }</li><li>            });</li><li>          } <span class="hljs-keyword">catch</span> (err) {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`loadProduct failed.code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">16</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section16879449144620" device-type="phone,2in1,tablet">productViewManager.loadService<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16879449144620" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>loadService(context: common.UIAbilityContext, want: Want, callback?: ServiceViewCallback): void</p>     <p>展示元服务详情页，添加至桌面。使用Callback回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">common.UIAbilityContext</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>调用方应用的上下文。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>want</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want" target="_blank">Want</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>加载元服务详情页面接口的请求参数。uri为必填参数，其值为元服务加桌链接。具体可参考下文中的示例代码。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>callback</p></td>         <td class="cellrowborder" width="25%">          <p><a href="/consumer/cn/doc/harmonyos-references/store-productviewmanager#section428319231351">ServiceViewCallback</a></p></td>         <td class="cellrowborder" width="25%">          <p>否</p></td>         <td class="cellrowborder" width="25%">          <p>在加载元服务详情页面时作为入参用于接收加载过程中的状态变化。若不填此参数，当加载元服务详情页失败时，无法返回失败的错误码；当加载元服务详情页成功时，点击加桌，无法获取加桌结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="30%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="70%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="30%">          <p>401</p></td>         <td class="cellrowborder" width="70%">          <p>Parameter error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rin-c106="" class="highlight-div"><div _ngcontent-rin-c106="" class="highlight-div-header"><div _ngcontent-rin-c106="" class="highlight-div-header-left"><div _ngcontent-rin-c106="" class="handle-button expand-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rin-c106="" class="highlight-div-header-right"><div _ngcontent-rin-c106="" class="handle-button ai-button"></div><div _ngcontent-rin-c106="" class="handle-button line-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rin-c106="" class="handle-button theme-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rin-c106="" class="handle-button copy-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rin-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { productViewManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppGalleryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'LoadService'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">LoadService</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"load_service"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">const</span> <span class="hljs-attr">request</span>: <span class="hljs-title class_">Want</span> = {</li><li>              <span class="hljs-comment">// 请输入元服务的加桌链接</span></li><li>              <span class="hljs-attr">uri</span>: <span class="hljs-string">'store://appgallery.huawei.com/oper/addhome?referrer=xxxx&amp;id=xxxx&amp;installType=xxxx&amp;s=xxxx'</span></li><li>            };</li><li>            productViewManager.<span class="hljs-title function_">loadService</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>, request, {</li><li>              <span class="hljs-attr">onReceive</span>: <span class="hljs-function">(<span class="hljs-params">data: productViewManager.ServiceViewReceiveData</span>) =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`Succeeded in loading Service onReceive.result is <span class="hljs-subst">${data.result}</span>, msg is <span class="hljs-subst">${data.msg}</span>`</span>);</li><li>              },</li><li>              <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`loadService onError.code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>)</li><li>              },</li><li>              <span class="hljs-attr">onAppear</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`loadService onAppear.`</span>);</li><li>              },</li><li>              <span class="hljs-attr">onDisappear</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`loadService onDisappear.`</span>);</li><li>              }</li><li>            });</li><li>          } <span class="hljs-keyword">catch</span> (err) {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`loadService failed.code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">16</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section5665513519" device-type="phone,2in1,tablet">productViewManager.checkPinShortcutPermitted<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5665513519" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>checkPinShortcutPermitted(context: common.UIAbilityContext, shortcutId: string, want: Want, labelResName: string, iconResName: string): Promise&lt;CheckShortcutResult&gt;</p>     <p>以静态资源方式校验快捷方式是否允许加桌，使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>5.0.2(14)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">common.UIAbilityContext</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>调用方应用的上下文。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>shortcutId</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>快捷方式ID，取值为长度不超过63字节的字符串。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>want</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want" target="_blank">Want</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>点击快捷方式后被拉起方的want信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>labelResName</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>快捷方式显示在桌面名称的label资源索引名称。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>iconResName</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>快捷方式显示在桌面图标的icon资源索引名称。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/store-productviewmanager#section1548317391199">CheckShortcutResult</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回快捷方式校验结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.13.1.3.1.1" width="24.279999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.13.1.3.1.2" width="75.72%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>401</p></td>         <td class="cellrowborder" width="75.72%">          <p>Parameter error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620001</p></td>         <td class="cellrowborder" width="75.72%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620002</p></td>         <td class="cellrowborder" width="75.72%">          <p>Request to service error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620003</p></td>         <td class="cellrowborder" width="75.72%">          <p>Shortcut id already exists.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620004</p></td>         <td class="cellrowborder" width="75.72%">          <p>The number of shortcuts has reached the maximum.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620005</p></td>         <td class="cellrowborder" width="75.72%">          <p>Shortcut verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rin-c106="" class="highlight-div"><div _ngcontent-rin-c106="" class="highlight-div-header"><div _ngcontent-rin-c106="" class="highlight-div-header-left"><div _ngcontent-rin-c106="" class="handle-button expand-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rin-c106="" class="highlight-div-header-right"><div _ngcontent-rin-c106="" class="handle-button ai-button"></div><div _ngcontent-rin-c106="" class="handle-button line-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rin-c106="" class="handle-button theme-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rin-c106="" class="handle-button copy-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rin-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { productViewManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppGalleryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'CheckPinShortcutPermitted'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CheckPinShortcutPermitted</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"checkPinShortcutPermitted"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">const</span> uiContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>            <span class="hljs-keyword">const</span> shortcutId = <span class="hljs-string">"id_test1"</span>; <span class="hljs-comment">// 对应shortcuts标签中配置的shortcutId, 例如: "shortcutId": "id_test1"</span></li><li>            <span class="hljs-keyword">const</span> labelResName = <span class="hljs-string">"shortcut"</span>; <span class="hljs-comment">// 对应shortcuts标签中配置的label资源索引名称, 例如: "label": "$string:shortcut"</span></li><li>            <span class="hljs-keyword">const</span> iconResName = <span class="hljs-string">"aa_icon"</span>; <span class="hljs-comment">// 对应shortcuts标签中配置的icon资源索引名称, 例如: "icon": "$media:aa_icon"</span></li><li>            <span class="hljs-keyword">const</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>              <span class="hljs-attr">bundleName</span>: <span class="hljs-string">"com.example.appgallery.kit.demo"</span>,</li><li>              <span class="hljs-attr">moduleName</span>: <span class="hljs-string">"entry"</span>,</li><li>              <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span>,</li><li>              <span class="hljs-attr">parameters</span>: {</li><li>                <span class="hljs-attr">testKey</span>: <span class="hljs-string">"testValue"</span></li><li>              }</li><li>            };</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">checkShortcutResult</span>: productViewManager.<span class="hljs-property">CheckShortcutResult</span>;</li><li>            productViewManager.<span class="hljs-title function_">checkPinShortcutPermitted</span>(uiContext, shortcutId, want, labelResName, iconResName)</li><li>              .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: productViewManager.CheckShortcutResult</span>) =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`checkPinShortcutPermitted success result is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>                checkShortcutResult = result;</li><li>              }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`checkPinShortcutPermitted error. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>            })</li><li>          } <span class="hljs-keyword">catch</span> (err) {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`checkPinShortcutPermitted failed, code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">16</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section41029172212" device-type="phone,2in1,tablet">productViewManager.checkPinShortcutPermitted<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section41029172212" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>checkPinShortcutPermitted(context: common.UIAbilityContext, shortcutId: string, want: Want, label: string, foregroundIcon: string, backgroundIcon: string): Promise&lt;CheckShortcutResult&gt;</p>     <p>以自定义资源方式校验快捷方式是否允许加桌，使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>5.0.2(14)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">common.UIAbilityContext</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>上下文。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>shortcutId</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>快捷方式ID，取值为长度不超过63字节的字符串。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>want</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want" target="_blank">Want</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>点击快捷方式后被拉起方的want信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>label</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>快捷方式显示在桌面名称的文本，长度不超过255个字符。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>foregroundIcon</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>快捷方式显示在桌面图标的沙箱地址，图标最大不超过100KB，格式为png和webp。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>backgroundIcon</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>预留字段，目前只支持传入空字符串。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/store-productviewmanager#section1548317391199">CheckShortcutResult</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回快捷方式校验结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.1" width="24.279999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.2" width="75.72%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>401</p></td>         <td class="cellrowborder" width="75.72%">          <p>Parameter error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620001</p></td>         <td class="cellrowborder" width="75.72%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620002</p></td>         <td class="cellrowborder" width="75.72%">          <p>Request to service error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620003</p></td>         <td class="cellrowborder" width="75.72%">          <p>Shortcut id already exists.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620004</p></td>         <td class="cellrowborder" width="75.72%">          <p>The number of shortcuts has reached the maximum.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620005</p></td>         <td class="cellrowborder" width="75.72%">          <p>Shortcut verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rin-c106="" class="highlight-div"><div _ngcontent-rin-c106="" class="highlight-div-header"><div _ngcontent-rin-c106="" class="highlight-div-header-left"><div _ngcontent-rin-c106="" class="handle-button expand-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rin-c106="" class="highlight-div-header-right"><div _ngcontent-rin-c106="" class="handle-button ai-button"></div><div _ngcontent-rin-c106="" class="handle-button line-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rin-c106="" class="handle-button theme-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rin-c106="" class="handle-button copy-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rin-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { productViewManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppGalleryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'CheckPinShortcutPermitted'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CheckPinShortcutPermitted</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"checkPinShortcutPermitted"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">const</span> uiContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>            <span class="hljs-keyword">const</span> shortcutId = <span class="hljs-string">`shortcutId_1`</span>;</li><li>            <span class="hljs-keyword">const</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>              <span class="hljs-attr">bundleName</span>: <span class="hljs-string">"com.example.appgallery.kit.demo"</span>,</li><li>              <span class="hljs-attr">moduleName</span>: <span class="hljs-string">"entry"</span>,</li><li>              <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span>,</li><li>              <span class="hljs-attr">parameters</span>: {</li><li>                <span class="hljs-attr">testKey</span>: <span class="hljs-string">"testValue"</span></li><li>              }</li><li>            }</li><li>            <span class="hljs-keyword">const</span> label = <span class="hljs-string">"shortcut"</span>;</li><li>            <span class="hljs-keyword">const</span> foregroundIcon = uiContext.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/icon.png"</span>;</li><li>            <span class="hljs-keyword">const</span> backgroundIcon = <span class="hljs-string">""</span>;</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">checkShortcutResult</span>: productViewManager.<span class="hljs-property">CheckShortcutResult</span>;</li><li>            productViewManager.<span class="hljs-title function_">checkPinShortcutPermitted</span>(uiContext, shortcutId, want, label, foregroundIcon, backgroundIcon)</li><li>              .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: productViewManager.CheckShortcutResult</span>) =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`checkPinShortcutPermitted success result is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>                checkShortcutResult = result;</li><li>              }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`checkPinShortcutPermitted error. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>            })</li><li>          } <span class="hljs-keyword">catch</span> (err) {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`checkPinShortcutPermitted failed, code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">16</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section2891132652315" device-type="phone,2in1,tablet">productViewManager.requestNewPinShortcut<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2891132652315" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>requestNewPinShortcut(context: common.UIAbilityContext, tid: string): Promise&lt;void&gt;</p>     <p>创建快捷方式加桌，使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.AppGalleryService.Distribution.Recommendations</p>     <p><strong>起始版本：</strong>5.0.2(14)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>context</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">common.UIAbilityContext</a></p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>上下文。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>tid</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>快捷方式校验结果<a href="/consumer/cn/doc/harmonyos-references/store-productviewmanager#section1548317391199">CheckShortcutResult</a>返回的tid。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/store-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.1" width="24.279999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.2" width="75.72%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>401</p></td>         <td class="cellrowborder" width="75.72%">          <p>Parameter error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620001</p></td>         <td class="cellrowborder" width="75.72%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620003</p></td>         <td class="cellrowborder" width="75.72%">          <p>Shortcut id already exists.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620004</p></td>         <td class="cellrowborder" width="75.72%">          <p>The number of shortcuts has reached the maximum.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620005</p></td>         <td class="cellrowborder" width="75.72%">          <p>Shortcut verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620006</p></td>         <td class="cellrowborder" width="75.72%">          <p>The shortcut is not verified or has expired.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.279999999999998%">          <p>1006620007</p></td>         <td class="cellrowborder" width="75.72%">          <p>User refused to add shortcut.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rin-c106="" class="highlight-div"><div _ngcontent-rin-c106="" class="highlight-div-header"><div _ngcontent-rin-c106="" class="highlight-div-header-left"><div _ngcontent-rin-c106="" class="handle-button expand-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rin-c106="" class="highlight-div-header-right"><div _ngcontent-rin-c106="" class="handle-button ai-button"></div><div _ngcontent-rin-c106="" class="handle-button line-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rin-c106="" class="handle-button theme-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rin-c106="" class="handle-button copy-button"><div _ngcontent-rin-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rin-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { productViewManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppGalleryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'RequestNewPinShortcut'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">RequestNewPinShortcut</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"RequestNewPinShortcut"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">const</span> uiContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>            <span class="hljs-keyword">const</span> tid = <span class="hljs-string">'xxx'</span>; <span class="hljs-comment">// 通过checkPinShortcutPermitted接口获取</span></li><li>            productViewManager.<span class="hljs-title function_">requestNewPinShortcut</span>(uiContext, tid)</li><li>              .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`requestNewPinShortcut success.`</span>);</li><li>              }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`requestNewPinShortcut error. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>            })</li><li>          } <span class="hljs-keyword">catch</span> (err) {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">`requestNewPinShortcut failed, code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">margin</span>(<span class="hljs-number">16</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>