<h1 _ngcontent-yny-c119="" class="doc-title ng-star-inserted" title="purgeable_memory.h"> purgeable_memory.h </h1>

<div _ngcontent-yny-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述">概述<i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><p>提供可丢弃内存的内存管理功能。</p> <p>提供的功能包括创建、开始读取、结束读取、开始写入、结束写入、重建等。</p> <p>使用时需要链接libpurgeable_memory_ndk.z.so。</p> <p><strong>引用文件：</strong> &lt;purgeable_memory/purgeable_memory.h&gt;</p> <p><strong>库：</strong> libpurgeable_memory_ndk.z.so</p> <p><strong>系统能力：</strong> SystemCapability.Kernel.Memory</p> <p><strong>起始版本：</strong> 10</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory">memory</a></p> </div>  <div class="tiledSection"><h2 id="汇总">汇总<i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="结构体" class="firsth2">结构体<i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_PurgeableMemory</td> <td class="cellrowborder" width="33.33333333333333%">可清除的内存结构。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数">函数<i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_modifyfunc">typedef bool (*OH_PurgeableMemory_ModifyFunc)(void *, size_t, void *)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_PurgeableMemory_ModifyFunc</td> <td class="cellrowborder" width="33.33333333333333%">函数指针，它指向一个用于构建可丢弃内存对象的内容的函数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_create">OH_PurgeableMemory *OH_PurgeableMemory_Create(size_t size, OH_PurgeableMemory_ModifyFunc func, void *funcPara)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">创建一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_destroy">bool OH_PurgeableMemory_Destroy(OH_PurgeableMemory *purgObj)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">销毁<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>对象。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_beginread">bool OH_PurgeableMemory_BeginRead(OH_PurgeableMemory *purgObj)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">开始读取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_endread">void OH_PurgeableMemory_EndRead(OH_PurgeableMemory *purgObj)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">结束读取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_beginwrite">bool OH_PurgeableMemory_BeginWrite(OH_PurgeableMemory *purgObj)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">开始修改<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_endwrite">void OH_PurgeableMemory_EndWrite(OH_PurgeableMemory *purgObj)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">结束修改<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_getcontent">void *OH_PurgeableMemory_GetContent(OH_PurgeableMemory *purgObj)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>的内容的指针。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_contentsize">size_t OH_PurgeableMemory_ContentSize(OH_PurgeableMemory *purgObj)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>对象的内容大小。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_appendmodify">bool OH_PurgeableMemory_AppendModify(OH_PurgeableMemory *purgObj, OH_PurgeableMemory_ModifyFunc func, void *funcPara)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">将修改附加到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明">函数说明<i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2></div>  <div class="tiledSection"><h3 id="oh_purgeablememory_modifyfunc" class="firsth2">OH_PurgeableMemory_ModifyFunc()<i class="anchor-icon anchor-icon-link" anchorid="oh_purgeablememory_modifyfunc" tips="复制节点链接"></i></h3><div _ngcontent-yny-c106="" class="highlight-div"><div _ngcontent-yny-c106="" class="highlight-div-header"><div _ngcontent-yny-c106="" class="highlight-div-header-left"><div _ngcontent-yny-c106="" class="handle-button expand-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yny-c106="" class="highlight-div-header-right"><div _ngcontent-yny-c106="" class="handle-button ai-button"></div><div _ngcontent-yny-c106="" class="handle-button line-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yny-c106="" class="handle-button theme-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yny-c106="" class="handle-button copy-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yny-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">bool</span> <span class="hljs-params">(*OH_PurgeableMemory_ModifyFunc)</span><span class="hljs-params">(<span class="hljs-type">void</span> *, <span class="hljs-type">size_t</span>, <span class="hljs-type">void</span> *)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>函数指针，它指向一个用于构建可丢弃内存对象的内容的函数。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">void *</td> <td class="cellrowborder" width="50%">数据指针，指向可丢弃内存对象的内容的起始地址。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t</td> <td class="cellrowborder" width="50%">内容的数据大小。</td> </tr> <tr><td class="cellrowborder" width="50%">void *</td> <td class="cellrowborder" width="50%">其他私有参数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%">返回构建内容是否成功。true表示成功；false表示失败。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_purgeablememory_create">OH_PurgeableMemory_Create()<i class="anchor-icon anchor-icon-link" anchorid="oh_purgeablememory_create" tips="复制节点链接"></i></h3><div _ngcontent-yny-c106="" class="highlight-div"><div _ngcontent-yny-c106="" class="highlight-div-header"><div _ngcontent-yny-c106="" class="highlight-div-header-left"><div _ngcontent-yny-c106="" class="handle-button expand-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yny-c106="" class="highlight-div-header-right"><div _ngcontent-yny-c106="" class="handle-button ai-button"></div><div _ngcontent-yny-c106="" class="handle-button line-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yny-c106="" class="handle-button theme-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yny-c106="" class="handle-button copy-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yny-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_PurgeableMemory *<span class="hljs-title">OH_PurgeableMemory_Create</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size, OH_PurgeableMemory_ModifyFunc func, <span class="hljs-type">void</span> *funcPara)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>对象。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">size_t size</td> <td class="cellrowborder" width="50%">可丢弃内存对象内容的数据大小。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_modifyfunc">OH_PurgeableMemory_ModifyFunc</a> func</td> <td class="cellrowborder" width="50%">函数指针，用于在可丢弃内存对象的内容被清除时恢复数据。</td> </tr> <tr><td class="cellrowborder" width="50%">void *funcPara</td> <td class="cellrowborder" width="50%">@func 使用的参数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">OH_PurgeableMemory *</a></td> <td class="cellrowborder" width="50%">可丢弃内存对象。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_purgeablememory_destroy">OH_PurgeableMemory_Destroy()<i class="anchor-icon anchor-icon-link" anchorid="oh_purgeablememory_destroy" tips="复制节点链接"></i></h3><div _ngcontent-yny-c106="" class="highlight-div"><div _ngcontent-yny-c106="" class="highlight-div-header"><div _ngcontent-yny-c106="" class="highlight-div-header-left"><div _ngcontent-yny-c106="" class="handle-button expand-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yny-c106="" class="highlight-div-header-right"><div _ngcontent-yny-c106="" class="handle-button ai-button"></div><div _ngcontent-yny-c106="" class="handle-button line-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yny-c106="" class="handle-button theme-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yny-c106="" class="handle-button copy-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yny-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>bool <span class="hljs-built_in">OH_PurgeableMemory_Destroy</span>(OH_PurgeableMemory *purgObj)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>销毁<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>对象。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">OH_PurgeableMemory</a> *purgObj</td> <td class="cellrowborder" width="50%">待销毁的可丢弃内存对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回销毁是否成功，true表示成功，false表示失败。如果可丢弃内存对象为NULL，则返回true。</p> <p> 如果销毁成功，返回true，可丢弃内存对象将被设置为NULL以避免Use-After-Free。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_purgeablememory_beginread">OH_PurgeableMemory_BeginRead()<i class="anchor-icon anchor-icon-link" anchorid="oh_purgeablememory_beginread" tips="复制节点链接"></i></h3><div _ngcontent-yny-c106="" class="highlight-div"><div _ngcontent-yny-c106="" class="highlight-div-header"><div _ngcontent-yny-c106="" class="highlight-div-header-left"><div _ngcontent-yny-c106="" class="handle-button expand-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yny-c106="" class="highlight-div-header-right"><div _ngcontent-yny-c106="" class="handle-button ai-button"></div><div _ngcontent-yny-c106="" class="handle-button line-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yny-c106="" class="handle-button theme-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yny-c106="" class="handle-button copy-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yny-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>bool <span class="hljs-built_in">OH_PurgeableMemory_BeginRead</span>(OH_PurgeableMemory *purgObj)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>开始读取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">OH_PurgeableMemory</a> *purgObj</td> <td class="cellrowborder" width="50%">可丢弃内存对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>返回读取是否成功，如果可丢弃内存对象的内容存在则返回true。</p> <p> 如果内容被清除（即不存在），系统将尝试恢复其数据。</p> <p> 如果恢复失败，则返回false。</p> <p> 如果恢复成功，则返回true。</p> <p> 当此函数返回true时，系统无法回收可丢弃内存对象的内容的内存，直到调用<a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_endread">OH_PurgeableMemory_EndRead()</a></p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_purgeablememory_endread">OH_PurgeableMemory_EndRead()<i class="anchor-icon anchor-icon-link" anchorid="oh_purgeablememory_endread" tips="复制节点链接"></i></h3><div _ngcontent-yny-c106="" class="highlight-div"><div _ngcontent-yny-c106="" class="highlight-div-header"><div _ngcontent-yny-c106="" class="highlight-div-header-left"><div _ngcontent-yny-c106="" class="handle-button expand-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yny-c106="" class="highlight-div-header-right"><div _ngcontent-yny-c106="" class="handle-button ai-button"></div><div _ngcontent-yny-c106="" class="handle-button line-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yny-c106="" class="handle-button theme-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yny-c106="" class="handle-button copy-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yny-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_PurgeableMemory_EndRead</span><span class="hljs-params">(OH_PurgeableMemory *purgObj)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>结束读取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">OH_PurgeableMemory</a> *purgObj</td> <td class="cellrowborder" width="50%">可丢弃内存对象。当此函数执行结束，操作系统可能会稍后回收可丢弃内存对象的内容的内存。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_purgeablememory_beginwrite">OH_PurgeableMemory_BeginWrite()<i class="anchor-icon anchor-icon-link" anchorid="oh_purgeablememory_beginwrite" tips="复制节点链接"></i></h3><div _ngcontent-yny-c106="" class="highlight-div"><div _ngcontent-yny-c106="" class="highlight-div-header"><div _ngcontent-yny-c106="" class="highlight-div-header-left"><div _ngcontent-yny-c106="" class="handle-button expand-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yny-c106="" class="highlight-div-header-right"><div _ngcontent-yny-c106="" class="handle-button ai-button"></div><div _ngcontent-yny-c106="" class="handle-button line-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yny-c106="" class="handle-button theme-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yny-c106="" class="handle-button copy-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yny-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>bool <span class="hljs-built_in">OH_PurgeableMemory_BeginWrite</span>(OH_PurgeableMemory *purgObj)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>开始修改<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">OH_PurgeableMemory</a> *purgObj</td> <td class="cellrowborder" width="50%">可丢弃内存对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%"><p>表示可丢弃内存对象的内容是否存在，如果可丢弃内存对象的内容存在则返回 true。</p> <p> 如果内容被清除（不存在），系统将恢复其数据，</p> <p> 如果内容被清除并且恢复失败，则返回 false。</p> <p> 如果内容恢复成功则返回 true。</p> <p> 当此函数返回true时，操作系统无法回收可丢弃内存对象的内容的内存，直到调用 <a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_endwrite">OH_PurgeableMemory_EndWrite()</a>。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_purgeablememory_endwrite">OH_PurgeableMemory_EndWrite()<i class="anchor-icon anchor-icon-link" anchorid="oh_purgeablememory_endwrite" tips="复制节点链接"></i></h3><div _ngcontent-yny-c106="" class="highlight-div"><div _ngcontent-yny-c106="" class="highlight-div-header"><div _ngcontent-yny-c106="" class="highlight-div-header-left"><div _ngcontent-yny-c106="" class="handle-button expand-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yny-c106="" class="highlight-div-header-right"><div _ngcontent-yny-c106="" class="handle-button ai-button"></div><div _ngcontent-yny-c106="" class="handle-button line-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yny-c106="" class="handle-button theme-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yny-c106="" class="handle-button copy-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yny-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">void</span> <span class="hljs-title function_">OH_PurgeableMemory_EndWrite</span><span class="hljs-params">(OH_PurgeableMemory *purgObj)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>结束修改<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">OH_PurgeableMemory</a> *purgObj</td> <td class="cellrowborder" width="50%">可丢弃内存对象。当此函数执行结束时，操作系统可能会稍后回收可丢弃内存对象的内容的内存。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_purgeablememory_getcontent">OH_PurgeableMemory_GetContent()<i class="anchor-icon anchor-icon-link" anchorid="oh_purgeablememory_getcontent" tips="复制节点链接"></i></h3><div _ngcontent-yny-c106="" class="highlight-div"><div _ngcontent-yny-c106="" class="highlight-div-header"><div _ngcontent-yny-c106="" class="highlight-div-header-left"><div _ngcontent-yny-c106="" class="handle-button expand-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yny-c106="" class="highlight-div-header-right"><div _ngcontent-yny-c106="" class="handle-button ai-button"></div><div _ngcontent-yny-c106="" class="handle-button line-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yny-c106="" class="handle-button theme-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yny-c106="" class="handle-button copy-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yny-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>void *<span class="hljs-built_in">OH_PurgeableMemory_GetContent</span>(OH_PurgeableMemory *purgObj)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>的内容的指针。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">OH_PurgeableMemory</a> *purgObj</td> <td class="cellrowborder" width="50%">可丢弃内存对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">void *</td> <td class="cellrowborder" width="50%"><p>返回可丢弃内存对象的内容的起始地址。</p> <p> 如果可丢弃内存对象为NULL，则返回NULL。</p> <p> 此函数应受<a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_beginread">OH_PurgeableMemory_BeginRead()</a>/<a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_endread">OH_PurgeableMemory_EndRead()</a>或者<a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_beginwrite">OH_PurgeableMemory_BeginWrite()</a>/<a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_endwrite">OH_PurgeableMemory_EndWrite()</a>保护</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_purgeablememory_contentsize">OH_PurgeableMemory_ContentSize()<i class="anchor-icon anchor-icon-link" anchorid="oh_purgeablememory_contentsize" tips="复制节点链接"></i></h3><div _ngcontent-yny-c106="" class="highlight-div"><div _ngcontent-yny-c106="" class="highlight-div-header"><div _ngcontent-yny-c106="" class="highlight-div-header-left"><div _ngcontent-yny-c106="" class="handle-button expand-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yny-c106="" class="highlight-div-header-right"><div _ngcontent-yny-c106="" class="handle-button ai-button"></div><div _ngcontent-yny-c106="" class="handle-button line-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yny-c106="" class="handle-button theme-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yny-c106="" class="handle-button copy-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yny-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>size_t <span class="hljs-built_in">OH_PurgeableMemory_ContentSize</span>(OH_PurgeableMemory *purgObj)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>对象的内容大小。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">OH_PurgeableMemory</a> *purgObj</td> <td class="cellrowborder" width="50%">可丢弃内存对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">size_t</td> <td class="cellrowborder" width="50%"><p>返回可丢弃内存对象的内容的大小。</p> <p> 如果可丢弃内存对象为NULL，则返回0。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_purgeablememory_appendmodify">OH_PurgeableMemory_AppendModify()<i class="anchor-icon anchor-icon-link" anchorid="oh_purgeablememory_appendmodify" tips="复制节点链接"></i></h3><div _ngcontent-yny-c106="" class="highlight-div"><div _ngcontent-yny-c106="" class="highlight-div-header"><div _ngcontent-yny-c106="" class="highlight-div-header-left"><div _ngcontent-yny-c106="" class="handle-button expand-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-yny-c106="" class="highlight-div-header-right"><div _ngcontent-yny-c106="" class="handle-button ai-button"></div><div _ngcontent-yny-c106="" class="handle-button line-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-yny-c106="" class="handle-button theme-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-yny-c106="" class="handle-button copy-button"><div _ngcontent-yny-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-yny-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">OH_PurgeableMemory_AppendModify</span><span class="hljs-params">(OH_PurgeableMemory *purgObj, OH_PurgeableMemory_ModifyFunc func, <span class="hljs-type">void</span> *funcPara)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>将修改附加到<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">PurgMem</a>。</p> <p><strong>起始版本：</strong> 10</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-memory-purgmem">OH_PurgeableMemory</a> *purgObj</td> <td class="cellrowborder" width="50%">可丢弃内存对象。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-purgeable-memory-h#oh_purgeablememory_modifyfunc">OH_PurgeableMemory_ModifyFunc</a> func</td> <td class="cellrowborder" width="50%">函数指针，用于修改可丢弃内存对象的内容。</td> </tr> <tr><td class="cellrowborder" width="50%">void *funcPara</td> <td class="cellrowborder" width="50%">@func 使用的参数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bool</td> <td class="cellrowborder" width="50%">返回追加结果。true表示成功；false表示失败。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>