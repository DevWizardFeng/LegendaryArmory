<h1 _ngcontent-nfu-c119="" class="doc-title ng-star-inserted" title="pushService（推送服务基础能力）"> pushService（推送服务基础能力） </h1>

<div _ngcontent-nfu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供Push Kit（推送服务）的基础能力，包括获取和删除推送服务Token、绑定和解绑账号、接收场景化消息、注册和解除注册token更新，以及注册和解除注册分布式消息接收事件监听的功能。</p>    <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>    <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>    <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>    <p><strong>起始版本：</strong>4.0.0(10)</p>    <div class="tiledSection">     <h2 id="section16609101116259" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { pushService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section163204312464" device-type="phone,2in1,tablet,wearable,tv">pushService.getToken<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section163204312464" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getToken(callback: AsyncCallback&lt;string&gt;): void</p>     <p>获取推送服务的Token，使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>设备行为差异</strong>：对于5.1.0(18)以前版本，该接口在Phone、Tablet、PC/2in1中可正常使用，在其他设备类型中无效果。对于5.1.0(18)版本，该接口在Phone、Tablet、PC/2in1、Wearable中可正常使用，在其他设备类型中无效果。对于5.1.1(19)及之后版本，该接口在Phone、Tablet、PC/2in1、Wearable、TV中均可正常使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.2" width="23.669999999999998%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.3" width="12.46%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.4" width="44.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="23.669999999999998%">          <p>AsyncCallback&lt;string&gt;</p></td>         <td class="cellrowborder" width="12.46%">          <p>是</p></td>         <td class="cellrowborder" width="44.67%">          <p>回调函数。Token获取成功时，字符长度为112，err为undefined；Token获取失败时返回错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.1" width="26.05%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.2" width="73.95%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.05%">          <p>401</p></td>         <td class="cellrowborder" width="73.95%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.95%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900008</p></td>         <td class="cellrowborder" width="73.95%">          <p>Failed to connect to the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900009</p></td>         <td class="cellrowborder" width="73.95%">          <p>Internal error of the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900010</p></td>         <td class="cellrowborder" width="73.95%">          <p>Illegal application identity.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900011</p></td>         <td class="cellrowborder" width="73.95%">          <p>The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900012</p></td>         <td class="cellrowborder" width="73.95%">          <p>Push rights are not activated.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900013</p></td>         <td class="cellrowborder" width="73.95%">          <p>Cross-location application is not allowed to obtain the token.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900014</p></td>         <td class="cellrowborder" width="73.95%">          <p>The device does not support getting token.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { pushService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  pushService.<span class="hljs-title function_">getToken</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to get push token: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in getting push token'</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to get push token: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section562973524818" device-type="phone,2in1,tablet,wearable,tv">pushService.getToken<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section562973524818" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getToken(): Promise&lt;string&gt;</p>     <p>获取推送服务的Token，使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：对于5.1.0(18)以前版本，该接口在Phone、Tablet、PC/2in1中可正常使用，在其他设备类型中无效果。对于5.1.0(18)版本，该接口在Phone、Tablet、PC/2in1、Wearable中可正常使用，在其他设备类型中无效果。对于5.1.1(19)及之后版本，该接口在Phone、Tablet、PC/2in1、Wearable、TV中均可正常使用。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="34.88%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="65.12%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="34.88%">          <p>Promise&lt;string&gt;</p></td>         <td class="cellrowborder" width="65.12%">          <p>Promise对象。返回Token，字符长度为112。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.1" width="26.05%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.2" width="73.95%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.05%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.95%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900008</p></td>         <td class="cellrowborder" width="73.95%">          <p>Failed to connect to the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900009</p></td>         <td class="cellrowborder" width="73.95%">          <p>Internal error of the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900010</p></td>         <td class="cellrowborder" width="73.95%">          <p>Illegal application identity.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900011</p></td>         <td class="cellrowborder" width="73.95%">          <p>The network is unavailable.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900012</p></td>         <td class="cellrowborder" width="73.95%">          <p>Push rights are not activated.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900013</p></td>         <td class="cellrowborder" width="73.95%">          <p>Cross-location application is not allowed to obtain the token.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900014</p></td>         <td class="cellrowborder" width="73.95%">          <p>The device does not support getting token.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { pushService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  pushService.<span class="hljs-title function_">getToken</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in getting push token.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to get push token: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to get push token: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section108761115154914" device-type="phone,2in1,tablet,wearable,tv">pushService.deleteToken<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section108761115154914" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteToken(callback: AsyncCallback&lt;void&gt;): void</p>     <p>删除推送服务的Token，使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：对于5.1.0(18)以前版本，该接口在Phone、Tablet、PC/2in1中可正常使用，在其他设备类型中无效果。对于5.1.0(18)版本，该接口在Phone、Tablet、PC/2in1、Wearable中可正常使用，在其他设备类型中无效果。对于5.1.1(19)及之后版本，该接口在Phone、Tablet、PC/2in1、Wearable、TV中均可正常使用。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.2" width="23.669999999999998%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.3" width="12.46%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.4" width="44.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="23.669999999999998%">          <p>AsyncCallback&lt;void&gt;</p></td>         <td class="cellrowborder" width="12.46%">          <p>是</p></td>         <td class="cellrowborder" width="44.67%">          <p>回调函数。当删除Token成功，err为undefined，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.1" width="26.05%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.2" width="73.95%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.05%">          <p>401</p></td>         <td class="cellrowborder" width="73.95%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.95%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900008</p></td>         <td class="cellrowborder" width="73.95%">          <p>Failed to connect to the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900009</p></td>         <td class="cellrowborder" width="73.95%">          <p>Internal error of the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900010</p></td>         <td class="cellrowborder" width="73.95%">          <p>Illegal application identity.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900011</p></td>         <td class="cellrowborder" width="73.95%">          <p>The network is unavailable.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { pushService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  pushService.<span class="hljs-title function_">deleteToken</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to delete push token: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in deleting push token.'</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to delete push token: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1298316346493" device-type="phone,2in1,tablet,wearable,tv">pushService.deleteToken<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1298316346493" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteToken(): Promise&lt;void&gt;</p>     <p>删除推送服务的Token，使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：对于5.1.0(18)以前版本，该接口在Phone、Tablet、PC/2in1中可正常使用，在其他设备类型中无效果。对于5.1.0(18)版本，该接口在Phone、Tablet、PC/2in1、Wearable中可正常使用，在其他设备类型中无效果。对于5.1.1(19)及之后版本，该接口在Phone、Tablet、PC/2in1、Wearable、TV中均可正常使用。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="34.88%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="65.12%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="34.88%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="65.12%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="26.05%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="73.95%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.05%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.95%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900008</p></td>         <td class="cellrowborder" width="73.95%">          <p>Failed to connect to the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900009</p></td>         <td class="cellrowborder" width="73.95%">          <p>Internal error of the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900010</p></td>         <td class="cellrowborder" width="73.95%">          <p>Illegal application identity.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.05%">          <p>1000900011</p></td>         <td class="cellrowborder" width="73.95%">          <p>The network is unavailable.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { pushService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  pushService.<span class="hljs-title function_">deleteToken</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in deleting push token.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to delete push token: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to delete push token: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section295861710507" device-type="phone,2in1,tablet,wearable,tv">pushService.bindAppProfileId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section295861710507" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>bindAppProfileId(appProfileType: pushCommon.AppProfileType, appProfileId: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>绑定应用内账号匿名标识，使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：对于5.1.0(18)以前版本，该接口在Phone、Tablet、PC/2in1中可正常使用，在其他设备类型中无效果。对于5.1.0(18)版本，该接口在Phone、Tablet、PC/2in1、Wearable中可正常使用，在其他设备类型中无效果。对于5.1.1(19)及之后版本，该接口在Phone、Tablet、PC/2in1、Wearable、TV中均可正常使用。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.1" width="15.18%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.2" width="30.37%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.3" width="6.01%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.4" width="48.44%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="15.18%">          <p>appProfileType</p></td>         <td class="cellrowborder" width="30.37%">          <p>pushCommon.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-pushcommon#section411410371767">AppProfileType</a></p></td>         <td class="cellrowborder" width="6.01%">          <p>是</p></td>         <td class="cellrowborder" width="48.44%">          <p><span style="color: rgb(73,73,73);">绑定账号类型</span>，分为华为账号和应用账号。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15.18%">          <p>appProfileId</p></td>         <td class="cellrowborder" width="30.37%">          <p>string</p></td>         <td class="cellrowborder" width="6.01%">          <p>是</p></td>         <td class="cellrowborder" width="48.44%">          <p><span style="color: rgb(73,73,73);">账号匿名标识</span><span style="color: rgb(73,73,73);">，不可为空字符串。</span><span style="color: rgb(73,73,73);">不建议使用真实的账号</span><span style="color: rgb(73,73,73);">id</span><span style="color: rgb(73,73,73);">，推荐使用账号</span><span style="color: rgb(73,73,73);">id</span><span style="color: rgb(73,73,73);">自行生成对应的匿名标识，能与该账号id建立唯一映射关系即可，生成算法无限制。</span>最大长度为64。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15.18%">          <p>callback</p></td>         <td class="cellrowborder" width="30.37%">          <p>AsyncCallback&lt;void&gt;</p></td>         <td class="cellrowborder" width="6.01%">          <p>是</p></td>         <td class="cellrowborder" width="48.44%">          <p>回调函数。当绑定应用内账号成功，err为undefined，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="26.26%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="73.74000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.26%">          <p>401</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900008</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Failed to connect to the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900009</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Internal error of the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900010</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Illegal application identity.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900015</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>The number of bound profile-app relationships exceeds the maximum.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900016</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>The os distributed account is not logged in.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { pushService, pushCommon } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 定义需要绑定的profileId</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">profileId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'1****9'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  pushService.<span class="hljs-title function_">bindAppProfileId</span>(pushCommon.<span class="hljs-property">AppProfileType</span>.<span class="hljs-property">PROFILE_TYPE_APPLICATION_ACCOUNT</span>, profileId, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to bind app profile id: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in binding app profile id.'</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to bind app profile id: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section20575105524912" device-type="phone,2in1,tablet,wearable,tv">pushService.bindAppProfileId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section20575105524912" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>bindAppProfileId(appProfileType: pushCommon.AppProfileType, appProfileId: string): Promise&lt;void&gt;</p>     <p>绑定应用内账号匿名标识，使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：对于5.1.0(18)以前版本，该接口在Phone、Tablet、PC/2in1中可正常使用，在其他设备类型中无效果。对于5.1.0(18)版本，该接口在Phone、PC/2in1、Tablet、Wearable中可正常使用，在其他设备类型中无效果。对于5.1.1(19)及之后版本，该接口在Phone、Tablet、PC/2in1、Wearable、TV中均可正常使用。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.1" width="15.790000000000001%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.2" width="30.009999999999998%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.3" width="6.260000000000001%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.4" width="47.94%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="15.790000000000001%">          <p>appProfileType</p></td>         <td class="cellrowborder" width="30.009999999999998%">          <p>pushCommon.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-pushcommon#section411410371767">AppProfileType</a></p></td>         <td class="cellrowborder" width="6.260000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="47.94%">          <p><span style="color: rgb(73,73,73);">绑定账号类型</span>，分为华为账号和应用账号。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15.790000000000001%">          <p>appProfileId</p></td>         <td class="cellrowborder" width="30.009999999999998%">          <p>string</p></td>         <td class="cellrowborder" width="6.260000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="47.94%">          <p>账号匿名标识，不可为空字符串。不建议使用真实的账号id，推荐使用账号id自行生成对应的匿名标识，能与该账号id建立唯一映射关系即可，生成算法无限制。最大长度为64。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="34.88%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="65.12%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="34.88%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="65.12%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.14.1.3.1.1" width="26.26%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.14.1.3.1.2" width="73.74000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.26%">          <p>401</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900008</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Failed to connect to the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900009</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Internal error of the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900010</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Illegal application identity.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900015</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>The number of bound profile-app relationships exceeds the maximum.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900016</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>The os distributed account is not logged in.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { pushService, pushCommon } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 定义需要绑定的profileId</span></li><li><span class="hljs-keyword">const</span> profileId = <span class="hljs-string">'1****9'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 绑定应用账号</span></li><li>  pushService.<span class="hljs-title function_">bindAppProfileId</span>(pushCommon.<span class="hljs-property">AppProfileType</span>.<span class="hljs-property">PROFILE_TYPE_APPLICATION_ACCOUNT</span>, profileId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in binding app profile id.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to bind app profile id: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to bind app profile id: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section11363128165313" device-type="phone,2in1,tablet,wearable,tv">pushService.unbindAppProfileId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11363128165313" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unbindAppProfileId(appProfileId: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>解绑应用内账号匿名标识，使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：对于5.1.0(18)以前版本，该接口在Phone、Tablet、PC/2in1中可正常使用，在其他设备类型中无效果。对于5.1.0(18)版本，该接口在Phone、Tablet、PC/2in1、Wearable中可正常使用，在其他设备类型中无效果。对于5.1.1(19)及之后版本，该接口在Phone、Tablet、PC/2in1、Wearable、TV中均可正常使用。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.5.1.1" width="16.400000000000002%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.5.1.2" width="21.32%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.5.1.3" width="7.340000000000001%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.5.1.4" width="54.94%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="16.400000000000002%">          <p>appProfileId</p></td>         <td class="cellrowborder" width="21.32%">          <p>string</p></td>         <td class="cellrowborder" width="7.340000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="54.94%">          <p><span style="color: rgb(73,73,73);">账号匿名标识，配置为调用</span><a href="/consumer/cn/doc/harmonyos-references/push-pushservice#section20575105524912">bindAppProfileId</a><span style="color: rgb(73,73,73);">()时设置的</span>appProfileId。最大长度为64。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="16.400000000000002%">          <p>callback</p></td>         <td class="cellrowborder" width="21.32%">          <p>AsyncCallback&lt;void&gt;</p></td>         <td class="cellrowborder" width="7.340000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="54.94%">          <p>回调函数。当解绑应用内账号成功，err为undefined，否则为错误对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.1" width="26.26%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.12.1.3.1.2" width="73.74000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.26%">          <p>401</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900008</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Failed to connect to the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900009</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Internal error of the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900010</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Illegal application identity.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { pushService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 定义需要解绑的profileId</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">profileId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'1****9'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  pushService.<span class="hljs-title function_">unbindAppProfileId</span>(profileId, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to unbind app profile id: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in unbinding app profile id.'</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to unbind app profile id: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section915174525214" device-type="phone,2in1,tablet,wearable,tv">pushService.unbindAppProfileId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section915174525214" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unbindAppProfileId(appProfileId: string): Promise&lt;void&gt;</p>     <p>解绑应用内账号匿名标识，使用Promise异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：对于5.1.0(18)以前版本，该接口在Phone、Tablet、PC/2in1中可正常使用，在其他设备类型中无效果。对于5.1.0(18)版本，该接口在Phone、Tablet、PC/2in1、Wearable中可正常使用，在其他设备类型中无效果。对于5.1.1(19)及之后版本，该接口在Phone、Tablet、PC/2in1、Wearable、TV中均可正常使用。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.1" width="19.39%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.2" width="17.549999999999997%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.3" width="7.7%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.4" width="55.36%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.39%">          <p>appProfileId</p></td>         <td class="cellrowborder" width="17.549999999999997%">          <p>string</p></td>         <td class="cellrowborder" width="7.7%">          <p>是</p></td>         <td class="cellrowborder" width="55.36%">          <p>账号匿名标识，配置为调用<a href="/consumer/cn/doc/harmonyos-references/push-pushservice#section20575105524912">bindAppProfileId</a>()时设置的appProfileId。最大长度为64。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="34.88%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="65.12%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="34.88%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="65.12%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.14.1.3.1.1" width="26.26%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.14.1.3.1.2" width="73.74000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.26%">          <p>401</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900008</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Failed to connect to the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900009</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Internal error of the push service.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900010</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Illegal application identity.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { pushService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 定义需要解绑的profileId</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">profileId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'1****9'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  pushService.<span class="hljs-title function_">unbindAppProfileId</span>(profileId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Succeeded in unbinding app profile id.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to unbind app profile id: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to unbind app profile id: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section5507492425" device-type="phone,2in1,tablet,wearable,tv">pushService.PushType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5507492425" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type PushType = 'DEFAULT' |'IM' | 'VoIP' | 'BACKGROUND' | 'EMERGENCY'</p>     <p>场景化消息类型，取值类型为下表类型中的并集。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：对于5.1.0(18)以前版本，该接口在Phone、Tablet、PC/2in1中可正常使用，在其他设备类型中无效果。对于5.1.0(18)版本，该接口在Phone、Tablet、PC/2in1、Wearable中可正常使用，在其他设备类型中无效果。对于5.1.1(19)及之后版本，该接口在Phone、Tablet、PC/2in1、Wearable、TV中均可正常使用。</p>     <p><strong>起始版本：</strong>5.0.2(14)</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="48.559999999999995%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="51.44%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="48.559999999999995%">          <p>'DEFAULT'</p></td>         <td class="cellrowborder" width="51.44%">          <p>通知消息场景。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="48.559999999999995%">          <p>'IM'</p></td>         <td class="cellrowborder" width="51.44%">          <p>通知扩展消息场景。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="48.559999999999995%">          <p>'VoIP'</p></td>         <td class="cellrowborder" width="51.44%">          <p>应用内通话消息场景。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="48.559999999999995%">          <p>'BACKGROUND'</p></td>         <td class="cellrowborder" width="51.44%">          <p>后台消息场景。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="48.559999999999995%">          <p>'EMERGENCY'</p></td>         <td class="cellrowborder" width="51.44%">          <p>紧急事件消息场景。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section125883044911" device-type="phone,2in1,tablet,wearable,tv">pushService.receiveMessage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section125883044911" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>receiveMessage(pushType: PushType, ability: Ability, onMessage: Callback&lt;pushCommon.PushPayload&gt;): void</p>     <p>接收Push场景化消息。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：对于5.1.0(18)以前版本，该接口在Phone、Tablet、PC/2in1中可正常使用，在其他设备类型中无效果。对于5.1.0(18)版本，该接口在Phone、Tablet、PC/2in1、Wearable中可正常使用，在其他设备类型中无效果。对于5.1.1(19)及之后版本，该接口在Phone、Tablet、PC/2in1、Wearable、TV中均可正常使用。</p>     <p><strong>起始版本：</strong>4.0.0(10)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.5.1.1" width="12.368763123687632%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.5.1.2" width="34.33656634336566%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.5.1.3" width="9.609039096090392%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.5.1.4" width="43.68563143685631%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>pushType</p></td>         <td class="cellrowborder" width="34.33656634336566%">          <p><a href="/consumer/cn/doc/harmonyos-references/push-pushservice#section5507492425">PushType</a></p></td>         <td class="cellrowborder" width="9.609039096090392%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>场景化消息类型。</p>          <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">            <ul>             <li>pushService.PushType中EMERGENCY（紧急事件消息场景）起始版本：5.0.0(12)。本场景仅为地震灾害等特殊场景使用。</li>             <li>pushService.PushType中DEFAULT（通知消息场景）起始版本：5.0.2(14)。调用示例代码请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-send-alert#section99251359545" target="_blank">应用在前台时处理通知消息</a>中步骤3。</li>             <li>IM（通知扩展消息场景）调用示例代码请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-send-extend-noti#section7799156112814" target="_blank">开发步骤</a>中步骤3。</li>             <li>VoIP（应用内通话消息场景）              <p>调用示例代码请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-voip#section41452724812" target="_blank">开发步骤</a>中步骤2。</p></li>             <li>BACKGROUND（后台消息场景）              <p>调用示例代码请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/push-background#section8986919144115" target="_blank">开发步骤</a>中步骤5。</p></li>            </ul>           </div></div></div></td>        </tr>        <tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>ability</p></td>         <td class="cellrowborder" width="34.33656634336566%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-ability" target="_blank">Ability</a></p></td>         <td class="cellrowborder" width="9.609039096090392%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>UIAbility。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>onMessage</p></td>         <td class="cellrowborder" width="34.33656634336566%">          <p>Callback&lt;pushCommon.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-pushcommon#section16335431712">PushPayload</a>&gt;</p></td>         <td class="cellrowborder" width="9.609039096090392%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>回调函数，返回接收场景化消息的数据。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.1" width="26.26%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.2" width="73.74000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.26%">          <p>401</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>System internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900005</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Messages of the same push type cannot be received repeatedly.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">UIAbility</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.AbilityKit'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">pushService</span><span class="">, </span><span class="">pushCommon </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.PushKit'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">hilog </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.PerformanceAnalysisKit'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li>
</li><li><span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">无需新增</span></span><span class=""><span class="hljs-comment">UIAbility</span></span><span class=""><span class="hljs-comment">，在原有</span></span><span class=""><span class="hljs-comment">UIAbility</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">onCreate</span></span><span class=""><span class="hljs-comment">方法中调用即可。以</span></span><span class=""><span class="hljs-comment">PushMessageAbility</span></span><span class=""><span class="hljs-comment">为例</span></span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class=""><span class="hljs-title class_">PushMessageAbility</span> </span><span class="hljs-keyword">extends</span> <span class=""><span class="hljs-title class_ inherited__">UIAbility</span> </span><span class="">{</span></li><li>  <span class=""><span class="hljs-comment">// onCreate()</span></span><span class=""><span class="hljs-comment">为同步接口，不支持异步回调</span></span></li><li>  <span class=""><span class="hljs-title function_">onCreate</span></span><span class="">()</span><span class="">: </span><span class=""><span class="hljs-built_in">void</span> </span><span class="">{</span></li><li>    <span class="hljs-keyword">try</span> <span class="">{</span></li><li>      <span class=""><span class="hljs-comment">// receiveMessage()</span></span><span class=""><span class="hljs-comment">不能放在异步方法之后，否则可能影响消息接收</span></span></li><li>      <span class=""><span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">注册</span></span><span class=""><span class="hljs-comment">BACKGROUND</span></span><span class=""><span class="hljs-comment">场景化消息</span></span></li><li>      <span class="">pushService</span><span class="">.</span><span class=""><span class="hljs-title function_">receiveMessage</span></span><span class="">(</span><span class=""><span class="hljs-string">'BACKGROUND'</span></span><span class="">, </span><span class="hljs-variable language_">this</span><span class="">, </span><span class=""><span class="hljs-function">(</span></span><span class=""><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">: </span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">pushCommon</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">.</span></span></span><span class=""><span class="hljs-function"><span class="hljs-params">PushPayload</span></span></span><span class=""><span class="hljs-function">) </span></span><span class=""><span class="hljs-function">=</span></span><span class=""><span class="hljs-function">&gt;</span></span> <span class="">{</span></li><li>        <span class=""><span class="hljs-comment">// process message</span></span><span class=""><span class="hljs-comment">，并建议对</span></span><span class=""><span class="hljs-comment">Callback</span></span><span class=""><span class="hljs-comment">进行</span></span><span class=""><span class="hljs-comment">try-catch</span></span></li><li>        <span class="hljs-keyword">try</span> <span class="">{</span></li><li>          <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'testTag'</span></span><span class="">, </span><span class=""><span class="hljs-string">'Receive background message : %{public}s'</span></span><span class="">, </span><span class=""><span class="hljs-title class_">JSON</span></span><span class="">.</span><span class=""><span class="hljs-title function_">stringify</span></span><span class="">(</span><span class="">data</span><span class="">))</span><span class="">;</span></li><li>        <span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">e</span><span class="">) </span><span class="">{</span></li><li>          <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">errRes</span></span><span class="">: </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">= </span><span class="">e </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">BusinessError</span></span><span class="">;</span></li><li>          <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'testTag'</span></span><span class="">, </span><span class=""><span class="hljs-string">'Failed to process data: %{public}d %{public}s'</span></span><span class="">, </span><span class="">errRes</span><span class="">.</span><span class=""><span class="hljs-property">code</span></span><span class="">, </span><span class="">errRes</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li>        <span class="">}</span></li><li><span class="">      }</span><span class="">)</span><span class="">;</span></li><li>    <span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">err</span><span class="">) </span><span class="">{</span></li><li>      <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">e</span></span><span class="">: </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">= </span><span class="">err </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">BusinessError</span></span><span class="">;</span></li><li>      <span class="">hilog</span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(<span class="hljs-number">0x0000</span></span><span class="">, </span><span class=""><span class="hljs-string">'testTag'</span></span><span class="">, </span><span class=""><span class="hljs-string">'Failed to receive message: %{public}d %{public}s'</span></span><span class="">, </span><span class="">e</span><span class="">.</span><span class=""><span class="hljs-property">code</span></span><span class="">, </span><span class="">e</span><span class="">.</span><span class=""><span class="hljs-property">message</span></span><span class="">)</span><span class="">;</span></li><li>    <span class="">}</span></li><li><span class="">  }</span></li><li><span class="">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1730794845210" device-type="phone,2in1,tablet,wearable,tv">pushService.on('tokenUpdate')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1730794845210" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'tokenUpdate', ability: Ability, callback: Callback&lt;string&gt;): void</p>     <p>注册token更新，使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：该接口在Wearable中可正常调用，在其他设备类型中无效果。</p>     <p><strong>起始版本：</strong>5.1.0(18)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.1" width="12.368763123687632%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.2" width="34.33656634336566%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.3" width="9.609039096090392%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.5.1.4" width="43.68563143685631%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>type</p></td>         <td class="cellrowborder" width="34.33656634336566%">          <p>string</p></td>         <td class="cellrowborder" width="9.609039096090392%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>监听事件，固定为'tokenUpdate'，即token更新事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>ability</p></td>         <td class="cellrowborder" width="34.33656634336566%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-ability" target="_blank">Ability</a></p></td>         <td class="cellrowborder" width="9.609039096090392%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>UIAbility，包含UI界面的应用组件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>callback</p></td>         <td class="cellrowborder" width="34.33656634336566%">          <p>Callback&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.609039096090392%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>回调函数，返回token更新的数据。Token长度为112。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.1" width="26.26%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.2" width="73.74000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.26%">          <p>401</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>System internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { pushService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 无需新增UIAbility，在原有UIAbility的onCreate方法中调用即可。以PushMessageAbility为例 </span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PushMessageAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">callBack</span> = (<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) =&gt; {</li><li>      <span class="hljs-keyword">try</span> {</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'update token: %{public}s'</span>, data);</li><li>      } <span class="hljs-keyword">catch</span> (e) {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to update data: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>      }</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// 注册token更新回调场景</span></li><li>      pushService.<span class="hljs-title function_">on</span>(<span class="hljs-string">'tokenUpdate'</span>, <span class="hljs-variable language_">this</span>, callBack);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Register on success'</span>);</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Register on error: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section111121842145313" device-type="phone,2in1,tablet,wearable,tv">pushService.off('tokenUpdate')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section111121842145313" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'tokenUpdate', callback?: Callback&lt;string&gt;): void</p>     <p>解除注册token更新，使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：该接口在Wearable中可正常调用，在其他设备类型中无效果。</p>     <p><strong>起始版本：</strong>5.1.0(18)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.1" width="12.368763123687632%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.2" width="34.2965703429657%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.3" width="9.649035096490351%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.5.1.4" width="43.68563143685631%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>type</p></td>         <td class="cellrowborder" width="34.2965703429657%">          <p>string</p></td>         <td class="cellrowborder" width="9.649035096490351%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>监听事件，固定为'tokenUpdate'，即token更新事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>callback</p></td>         <td class="cellrowborder" width="34.2965703429657%">          <p>Callback&lt;string&gt;</p></td>         <td class="cellrowborder" width="9.649035096490351%">          <p>否</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>回调函数， 用于取消注册tokenUpdate监听事件。</p>          <p>注：若取消注册时不传入callback，则会取消注册tokenUpdate事件下所有的callback。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.1" width="26.26%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.2" width="73.74000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.26%">          <p>401</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>System internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { pushService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 无需新增UIAbility，在原有UIAbility的onDestroy方法中调用即可。以PushMessageAbility为例</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PushMessageAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onDestroy</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// 解除注册token更新回调场景</span></li><li>      pushService.<span class="hljs-title function_">off</span>(<span class="hljs-string">'tokenUpdate'</span>);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Register off success'</span>);</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Register off error: %{public}d %{public}s'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section679412149361" device-type="phone,2in1,tablet,wearable,tv">pushService.on('distributedMessageReceive')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section679412149361" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'distributedMessageReceive', callee: Callee, callback: DistributedMessageCallback): void</p>     <p>注册分布式消息接收事件监听，使用callback异步回调。应用需要在UIAbility的onCreate()方法进行注册，每个应用只能注册一次。该UIAbility对应action为<strong>action.ohos.push.distribute.listener</strong>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>若调用接收场景化消息接口（<a href="/consumer/cn/doc/harmonyos-references/push-pushservice#section125883044911">pushService.receiveMessage</a>）和注册分布式消息事件在同一个UIAbility中，则action.ohos.push.distribute.listener和action.ohos.push.listener定义在同一个actions数组中，否则分别定义在对应UIAbility中的actions中。</p>      </div></div></div>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：该接口在Phone、Tablet中可正常调用，在其他设备类型中无效果。</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.1" width="12.368763123687632%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.2" width="34.2965703429657%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.3" width="9.649035096490351%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.4" width="43.68563143685631%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>type</p></td>         <td class="cellrowborder" width="34.2965703429657%">          <p>string</p></td>         <td class="cellrowborder" width="9.649035096490351%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>监听事件，固定为'distributedMessageReceive'，即分布式消息接收事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>callee</p></td>         <td class="cellrowborder" width="34.2965703429657%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#callee" target="_blank">Callee</a></p></td>         <td class="cellrowborder" width="9.649035096490351%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>通用组件服务端注册和解除客户端<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#caller" target="_blank">Caller</a>通知送信的callback接口，从UIAbility中获取。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>callback</p></td>         <td class="cellrowborder" width="34.2965703429657%">          <p><a href="/consumer/cn/doc/harmonyos-references/push-pushservice#section411410371767">DistributedMessageCallback</a></p></td>         <td class="cellrowborder" width="9.649035096490351%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>回调函数，注册分布式消息接收事件监听的回调，在收到分布式消息后异步执行。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.1" width="26.26%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.2" width="73.74000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.26%">          <p>1000900031</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>The same type of callback can be registered only once.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="26.26%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>System internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { pushService, pushCommon } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PushMessageAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">callback</span>: pushService.<span class="hljs-property">DistributedMessageCallback</span> = <span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>:  pushCommon.<span class="hljs-property">PushPayload</span>) =&gt; {</li><li>    <span class="hljs-keyword">let</span> resultCode = pushService.<span class="hljs-property">ResultCode</span>.<span class="hljs-property">SUCCESS</span>;</li><li>    <span class="hljs-keyword">try</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Distribute message: %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>      <span class="hljs-comment">// 处理业务逻辑，如将数据内容发布到穿戴设备上等</span></li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      resultCode = pushService.<span class="hljs-property">ResultCode</span>.<span class="hljs-property">FAILED</span>;</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">errRes</span>: <span class="hljs-title class_">BusinessError</span> = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to receive distribute data: %{public}d %{public}s'</span>, errRes.<span class="hljs-property">code</span>, errRes.<span class="hljs-property">message</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 处理结束后，返回执行结果</span></li><li>    <span class="hljs-keyword">return</span> { resultCode };</li><li>  };</li><li>
</li><li>  <span class="hljs-title function_">onCreate</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// 注册distributeMessageReceive分布式消息接收回调场景</span></li><li>      pushService.<span class="hljs-title function_">on</span>(<span class="hljs-string">'distributedMessageReceive'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">callee</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">callback</span>);</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Register on error: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section6140748113710" device-type="phone,2in1,tablet,wearable,tv">pushService.off('distributedMessageReceive')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section6140748113710" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'distributedMessageReceive', callback?: DistributedMessageCallback): void</p>     <p>解除注册分布式消息接收事件监听，使用callback异步回调。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：该接口在Phone、Tablet中可正常调用，在其他设备类型中无效果。</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.1" width="12.368763123687632%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.2" width="34.2965703429657%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.3" width="9.649035096490351%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.5.1.4" width="43.68563143685631%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>type</p></td>         <td class="cellrowborder" width="34.2965703429657%">          <p>string</p></td>         <td class="cellrowborder" width="9.649035096490351%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>监听事件，固定为'distributedMessageReceive'即分布式消息接收事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>callback</p></td>         <td class="cellrowborder" width="34.2965703429657%">          <p><a href="/consumer/cn/doc/harmonyos-references/push-pushservice#section411410371767">DistributedMessageCallback</a></p></td>         <td class="cellrowborder" width="9.649035096490351%">          <p>否</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>回调函数，用于取消注册distributedMessageReceive监听事件。取消注册后，应用无法在该callback方法中接收分布式消息。</p>          <p>注：若取消注册时不传入callback，则会取消注册distributedMessageReceive事件下所有的callback。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-error-code">ArkTS API错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.1" width="26.26%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.2" width="73.74000000000001%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="26.26%">          <p>1000900001</p></td>         <td class="cellrowborder" width="73.74000000000001%">          <p>System internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nfu-c106="" class="highlight-div"><div _ngcontent-nfu-c106="" class="highlight-div-header"><div _ngcontent-nfu-c106="" class="highlight-div-header-left"><div _ngcontent-nfu-c106="" class="handle-button expand-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfu-c106="" class="highlight-div-header-right"><div _ngcontent-nfu-c106="" class="handle-button ai-button"></div><div _ngcontent-nfu-c106="" class="handle-button line-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfu-c106="" class="handle-button theme-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfu-c106="" class="handle-button copy-button"><div _ngcontent-nfu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfu-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { pushCommon, pushService } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PushKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PushMessageAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">callback</span>: pushService.<span class="hljs-property">DistributedMessageCallback</span> = <span class="hljs-keyword">async</span> (<span class="hljs-attr">data</span>:  pushCommon.<span class="hljs-property">PushPayload</span>) =&gt; {</li><li>    <span class="hljs-keyword">let</span> resultCode = pushService.<span class="hljs-property">ResultCode</span>.<span class="hljs-property">SUCCESS</span>;</li><li>    <span class="hljs-keyword">try</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Distribute message: %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>      <span class="hljs-comment">// 处理业务逻辑，如将数据内容发布到穿戴设备上等</span></li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      resultCode = pushService.<span class="hljs-property">ResultCode</span>.<span class="hljs-property">FAILED</span>;</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">errRes</span>: <span class="hljs-title class_">BusinessError</span> = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Failed to receive distribute data: %{public}d %{public}s'</span>, errRes.<span class="hljs-property">code</span>, errRes.<span class="hljs-property">message</span>);</li><li>    }</li><li>    <span class="hljs-comment">// 处理结束后，返回执行结果</span></li><li>    <span class="hljs-keyword">return</span> { resultCode };</li><li>  };</li><li>
</li><li>  <span class="hljs-title function_">onDestroy</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// 解除注册distributedMessageReceive分布式消息接收回调场景</span></li><li>      pushService.<span class="hljs-title function_">off</span>(<span class="hljs-string">'distributedMessageReceive'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">callback</span>);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Register off success'</span>);</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Register off error: %{public}d %{public}s'</span>, e.<span class="hljs-property">code</span>, e.<span class="hljs-property">message</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section411410371767" device-type="phone,2in1,tablet,wearable,tv">DistributedMessageCallback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section411410371767" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type DistributedMessageCallback = (PushPayload: pushCommon.PushPayload) =&gt; Promise&lt;DistributedMessageResult&gt;</p>     <p>分布式消息接收事件中使用的回调函数。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：该接口在Phone、Tablet中可正常调用，在其他设备类型中无效果。</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.5.1.1" width="12.368763123687632%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.5.1.2" width="34.2965703429657%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.5.1.3" width="9.649035096490351%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.5.1.4" width="43.68563143685631%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.368763123687632%">          <p>PushPayload</p></td>         <td class="cellrowborder" width="34.2965703429657%">          <p>pushCommon.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/push-pushcommon#section16335431712">PushPayload</a></p></td>         <td class="cellrowborder" width="9.649035096490351%">          <p>是</p></td>         <td class="cellrowborder" width="43.68563143685631%">          <p>分布式消息数据的参数定义。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="34.88%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="65.12%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="34.88%">          <p>Promise&lt;DistributedMessageResult&gt;</p></td>         <td class="cellrowborder" width="65.12%">          <p>Promise对象。返回DistributedMessageResult对象，见<a href="/consumer/cn/doc/harmonyos-references/push-pushservice#section015518411017">DistributedMessageResult</a>说明。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section015518411017" device-type="phone,2in1,tablet,wearable,tv">DistributedMessageResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section015518411017" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>distributedMessageReceive事件中使用的回调类型。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：该接口在Phone、Tablet中可正常调用，在其他设备类型中无效果。</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.6.1.1" width="11.44%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.6.1.2" width="31.72%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.6.1.4" width="8.92%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.6.1.5" width="40.400000000000006%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="11.44%">          <p>resultCode</p></td>         <td class="cellrowborder" width="31.72%">          <p><a href="/consumer/cn/doc/harmonyos-references/push-pushservice#section016942713918">ResultCode</a></p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="8.92%">          <p>否</p></td>         <td class="cellrowborder" width="40.400000000000006%">          <p>回调函数执行结果，枚举类型，见枚举<a href="/consumer/cn/doc/harmonyos-references/push-pushservice#section016942713918">ResultCode</a>说明。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section016942713918" device-type="phone,2in1,tablet,wearable,tv">ResultCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section016942713918" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示<a href="/consumer/cn/doc/harmonyos-references/push-pushservice#section411410371767">DistributedMessageCallback</a>回调函数执行结果的枚举。</p>     <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力：</strong>SystemCapability.Push.PushService</p>     <p><strong>设备行为差异</strong>：该枚举值在Phone、Tablet中可正常使用，在其他设备类型中无效果。</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.4.1.1" width="44.1%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.4.1.2" width="9.180000000000001%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.4.1.3" width="46.72%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="44.1%">          <p>SUCCESS</p></td>         <td class="cellrowborder" width="9.180000000000001%">          <p>0</p></td>         <td class="cellrowborder" width="46.72%">          <p>执行成功。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="44.1%">          <p>FAILED</p></td>         <td class="cellrowborder" width="9.180000000000001%">          <p>1</p></td>         <td class="cellrowborder" width="46.72%">          <p>执行失败。</p></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>