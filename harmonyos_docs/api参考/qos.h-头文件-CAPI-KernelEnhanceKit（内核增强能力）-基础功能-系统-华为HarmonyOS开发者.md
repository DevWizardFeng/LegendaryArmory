<h1 _ngcontent-ygh-c119="" class="doc-title ng-star-inserted" title="qos.h"> qos.h </h1>

<div _ngcontent-ygh-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="phone,2in1,tablet,wearable,tv">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>声明QoS提供的C接口。</p> <p><strong>引用文件：</strong> &lt;qos/qos.h&gt;</p> <p><strong>系统能力：</strong> SystemCapability.Resourceschedule.QoS.Core</p> <p><strong>库：</strong> libqos.so</p> <p><strong>起始版本：</strong> 12</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos">QoS</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="phone,2in1,tablet,wearable,tv">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="结构体" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">结构体<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="结构体" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-oh-qos-gewucreatesessionresult">OH_QoS_GewuCreateSessionResult</a></td> <td class="cellrowborder" width="50%">创建出来的会话句柄</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-oh-qos-gewusubmitrequestresult">OH_QoS_GewuSubmitRequestResult</a></td> <td class="cellrowborder" width="50%"><p>错误码</p> <p>- 创建会话成功返回OH_QOS_GEWU_OK。</p> <p>- 由于没有足够的内存而创建会话失败返回OH_QOS_GEWU_NOMEM。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="枚举" device-type="phone,2in1,tablet,wearable,tv">枚举<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.4.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#qos_level">QoS_Level</a></td> <td class="cellrowborder" width="33.33333333333333%">QoS_Level</td> <td class="cellrowborder" width="33.33333333333333%">描述QoS等级。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_gewuerrorcode">OH_QoS_GewuErrorCode</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_QoS_GewuErrorCode</td> <td class="cellrowborder" width="33.33333333333333%">格物错误码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="宏定义" device-type="phone,2in1,tablet,wearable,tv">宏定义<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="宏定义" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_QOS_GEWU_INVALID_SESSION_ID (static_cast&lt;OH_QoS_GewuSession&gt;(0xffffffffU))</td> <td class="cellrowborder" width="50%"><p>无效会话句柄，用于错误返回。</p> <p><strong>起始版本：</strong> 20</p> </td> </tr> <tr><td class="cellrowborder" width="50%">OH_QOS_GEWU_INVALID_REQUEST_ID (static_cast&lt;OH_QoS_GewuRequest&gt;(0xffffffffU))</td> <td class="cellrowborder" width="50%"><p>无效请求句柄，用于错误返回。</p> <p><strong>起始版本：</strong> 20</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="函数" device-type="phone,2in1,tablet,wearable,tv">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.2.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.4.1.2" width="33.33333333333333%">typedef关键字</th> <th align="left" class="cellrowborder" id="mcps1.3.6.2.1.4.1.3" width="33.33333333333333%">描述</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_setthreadqos">int OH_QoS_SetThreadQoS(QoS_Level level)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">为当前线程设置QoS等级。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_resetthreadqos">int OH_QoS_ResetThreadQoS()</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">取消当前线程的QoS等级。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_getthreadqos">int OH_QoS_GetThreadQoS(QoS_Level *level)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">获得当前线程的QoS等级。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_gewuonresponse">typedef void (*OH_QoS_GewuOnResponse)(void* context, const char* response)</a></td> <td class="cellrowborder" width="33.33333333333333%">OH_QoS_GewuOnResponse</td> <td class="cellrowborder" width="33.33333333333333%">用于接收回复的回调。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_gewucreatesession">OH_QoS_GewuCreateSessionResult OH_QoS_GewuCreateSession(const char* attributes)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>创建格物会话。会话对象的生命周期从CreateSession函数返回开始，到调用DestroySession为止。会话属性的json字符串。该json字符串支持以下字段：- model: string. 表示会话使用的模型的路径。attributes json字符串例子：</p> <p>{</p> <p>    "model": "/data/storage/el2/base/files/qwen2/"</p> <p> }</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_gewudestroysession">OH_QoS_GewuErrorCode OH_QoS_GewuDestroySession(OH_QoS_GewuSession session)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">销毁格物会话。建议用户应当等待至所有请求都已完成或中止，然后再调用该接口来销毁会话。如果调用该接口时还有正在进行的请求，那些请求将会被中止，且用户不会再收到回复。注意，在调用完该接口后，会话对象无法再被使用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_gewuabortrequest">OH_QoS_GewuErrorCode OH_QoS_GewuAbortRequest(OH_QoS_GewuSession session, OH_QoS_GewuRequest request)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%">停止指定的请求。成功调用该函数后，client不会再收到该请求的回复，且该请求句柄无法再被使用。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_gewusubmitrequest">OH_QoS_GewuSubmitRequestResult OH_QoS_GewuSubmitRequest(OH_QoS_GewuSession session, const char* request, OH_QoS_GewuOnResponse callback, void* context)</a></td> <td class="cellrowborder" width="33.33333333333333%">-</td> <td class="cellrowborder" width="33.33333333333333%"><p>提交请求。请求的json字符串，支持以下字段：- messages: array. 表示消息的数组其中每个元素支持以下字段：- role: string. 消息的角色类型。- "developer": 开发者或系统提供的指示。- "user":用户输入。- "assistant": 模型生成结果。- content: string. 消息内容。- stream: boolean or null; 可选。是否使能流式推理，默认为非流式。json字符串例子：</p> <p>{</p> <p>    "messages": [</p> <p>    {</p> <p>        "role": "developer",</p> <p>        "content": "Your are a helpful assistant."</p> <p>    },</p> <p>    {</p> <p>        "role": "user",</p> <p>        "content": "What is HarmonyOS"</p> <p>    }</p> <p>    ],</p> <p>    "stream": true</p> <p>}</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="变量" device-type="phone,2in1,tablet,wearable,tv">变量<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="变量" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.7.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_QoS_GewuSession</td> <td class="cellrowborder" width="50%">会话句柄</td> </tr> <tr><td class="cellrowborder" width="50%">OH_QoS_GewuRequest</td> <td class="cellrowborder" width="50%">请求句柄</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="枚举类型说明" device-type="phone,2in1,tablet,wearable,tv">枚举类型说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="枚举类型说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="qos_level" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">QoS_Level<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="qos_level" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ygh-c106="" class="highlight-div"><div _ngcontent-ygh-c106="" class="highlight-div-header"><div _ngcontent-ygh-c106="" class="highlight-div-header-left"><div _ngcontent-ygh-c106="" class="handle-button expand-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ygh-c106="" class="highlight-div-header-right"><div _ngcontent-ygh-c106="" class="handle-button ai-button"></div><div _ngcontent-ygh-c106="" class="handle-button line-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ygh-c106="" class="handle-button theme-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ygh-c106="" class="handle-button copy-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ygh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">QoS_Level</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>描述QoS等级。</p> <p><strong>起始版本：</strong> 12</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">QOS_BACKGROUND = 0</td> <td class="cellrowborder" width="50%">表示QoS等级为用户不可见任务。</td> </tr> <tr><td class="cellrowborder" width="50%">QOS_UTILITY</td> <td class="cellrowborder" width="50%">表示QoS等级为后台重要任务。</td> </tr> <tr><td class="cellrowborder" width="50%">QOS_DEFAULT</td> <td class="cellrowborder" width="50%">表示QoS等级为默认。</td> </tr> <tr><td class="cellrowborder" width="50%">QOS_USER_INITIATED</td> <td class="cellrowborder" width="50%">表示QoS等级为用户触发任务。</td> </tr> <tr><td class="cellrowborder" width="50%">QOS_DEADLINE_REQUEST</td> <td class="cellrowborder" width="50%">表示QoS等级为限时任务。</td> </tr> <tr><td class="cellrowborder" width="50%">QOS_USER_INTERACTIVE</td> <td class="cellrowborder" width="50%">表示QoS等级为用户交互任务。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_qos_gewuerrorcode" device-type="phone,2in1,tablet,wearable,tv">OH_QoS_GewuErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_qos_gewuerrorcode" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ygh-c106="" class="highlight-div"><div _ngcontent-ygh-c106="" class="highlight-div-header"><div _ngcontent-ygh-c106="" class="highlight-div-header-left"><div _ngcontent-ygh-c106="" class="handle-button expand-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ygh-c106="" class="highlight-div-header-right"><div _ngcontent-ygh-c106="" class="handle-button ai-button"></div><div _ngcontent-ygh-c106="" class="handle-button line-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ygh-c106="" class="handle-button theme-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ygh-c106="" class="handle-button copy-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ygh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">enum</span> <span class="hljs-title class_">OH_QoS_GewuErrorCode</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>格物错误码。</p> <p><strong>起始版本：</strong> 20</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.6.1.3.1.1" width="50%">枚举项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">OH_QOS_GEWU_OK = 0</td> <td class="cellrowborder" width="50%">成功</td> </tr> <tr><td class="cellrowborder" width="50%">OH_QOS_GEWU_NOPERM = 201</td> <td class="cellrowborder" width="50%">权限错误</td> </tr> <tr><td class="cellrowborder" width="50%">OH_QOS_GEWU_NOMEM = 203</td> <td class="cellrowborder" width="50%">内存错误</td> </tr> <tr><td class="cellrowborder" width="50%">OH_QOS_GEWU_INVAL = 401</td> <td class="cellrowborder" width="50%">参数错误</td> </tr> <tr><td class="cellrowborder" width="50%">OH_QOS_GEWU_EXIST = 501</td> <td class="cellrowborder" width="50%">已存在句柄</td> </tr> <tr><td class="cellrowborder" width="50%">OH_QOS_GEWU_NOENT = 502</td> <td class="cellrowborder" width="50%">找不到句柄</td> </tr> <tr><td class="cellrowborder" width="50%">OH_QOS_GEWU_NOSYS = 801</td> <td class="cellrowborder" width="50%">找不到符号</td> </tr> <tr><td class="cellrowborder" width="50%">OH_QOS_GEWU_FAULT = 901</td> <td class="cellrowborder" width="50%">其它错误</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="phone,2in1,tablet,wearable,tv">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>  <div class="tiledSection"><h3 id="oh_qos_setthreadqos" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">OH_QoS_SetThreadQoS()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_qos_setthreadqos" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ygh-c106="" class="highlight-div"><div _ngcontent-ygh-c106="" class="highlight-div-header"><div _ngcontent-ygh-c106="" class="highlight-div-header-left"><div _ngcontent-ygh-c106="" class="handle-button expand-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ygh-c106="" class="highlight-div-header-right"><div _ngcontent-ygh-c106="" class="handle-button ai-button"></div><div _ngcontent-ygh-c106="" class="handle-button line-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ygh-c106="" class="handle-button theme-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ygh-c106="" class="handle-button copy-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ygh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_QoS_SetThreadQoS</span><span class="hljs-params">(QoS_Level level)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>为当前线程设置QoS等级。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-h#qos_level">QoS_Level</a> level</td> <td class="cellrowborder" width="50%">表示设置的QoS等级，详细信息可以查看<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-h#qos_level">QoS_Level</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%">成功返回0，失败返回负值。</td> </tr>  </tbody></table></div> </div> <p><strong>参考：</strong></p> <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-h#qos_level">QoS_Level</a></p> </div>  <div class="tiledSection"><h3 id="oh_qos_resetthreadqos" device-type="phone,2in1,tablet,wearable,tv">OH_QoS_ResetThreadQoS()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_qos_resetthreadqos" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ygh-c106="" class="highlight-div"><div _ngcontent-ygh-c106="" class="highlight-div-header"><div _ngcontent-ygh-c106="" class="highlight-div-header-left"><div _ngcontent-ygh-c106="" class="handle-button expand-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ygh-c106="" class="highlight-div-header-right"><div _ngcontent-ygh-c106="" class="handle-button ai-button"></div><div _ngcontent-ygh-c106="" class="handle-button line-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ygh-c106="" class="handle-button theme-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ygh-c106="" class="handle-button copy-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ygh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-csharp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">OH_QoS_ResetThreadQoS</span>()</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>取消当前线程的QoS等级。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%">成功返回0，失败返回负值。</td> </tr>  </tbody></table></div> </div> <p><strong>参考：</strong></p> <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-h#qos_level">QoS_Level</a></p> </div>  <div class="tiledSection"><h3 id="oh_qos_getthreadqos" device-type="phone,2in1,tablet,wearable,tv">OH_QoS_GetThreadQoS()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_qos_getthreadqos" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ygh-c106="" class="highlight-div"><div _ngcontent-ygh-c106="" class="highlight-div-header"><div _ngcontent-ygh-c106="" class="highlight-div-header-left"><div _ngcontent-ygh-c106="" class="handle-button expand-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ygh-c106="" class="highlight-div-header-right"><div _ngcontent-ygh-c106="" class="handle-button ai-button"></div><div _ngcontent-ygh-c106="" class="handle-button line-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ygh-c106="" class="handle-button theme-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ygh-c106="" class="handle-button copy-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ygh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-java" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-type">int</span> <span class="hljs-title function_">OH_QoS_GetThreadQoS</span><span class="hljs-params">(QoS_Level *level)</span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获得当前线程的QoS等级。</p> <p><strong>起始版本：</strong> 12</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-h#qos_level">QoS_Level</a> *level</td> <td class="cellrowborder" width="50%">参数是输出参数，线程的QoS等级会以<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-h#qos_level">QoS_Level</a>形式写入该变量。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int</td> <td class="cellrowborder" width="50%">成功返回0，失败返回负值。</td> </tr>  </tbody></table></div> </div> <p><strong>参考：</strong></p> <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-h#qos_level">QoS_Level</a></p> </div>  <div class="tiledSection"><h3 id="oh_qos_gewuonresponse" device-type="phone,2in1,tablet,wearable,tv">OH_QoS_GewuOnResponse()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_qos_gewuonresponse" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ygh-c106="" class="highlight-div"><div _ngcontent-ygh-c106="" class="highlight-div-header"><div _ngcontent-ygh-c106="" class="highlight-div-header-left"><div _ngcontent-ygh-c106="" class="handle-button expand-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ygh-c106="" class="highlight-div-header-right"><div _ngcontent-ygh-c106="" class="handle-button ai-button"></div><div _ngcontent-ygh-c106="" class="handle-button line-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ygh-c106="" class="handle-button theme-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ygh-c106="" class="handle-button copy-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ygh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-objectivec" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">typedef</span> <span class="hljs-type">void</span> (*OH_QoS_GewuOnResponse)(<span class="hljs-type">void</span>* context, <span class="hljs-keyword">const</span> <span class="hljs-type">char</span>* response)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>用于接收回复的回调。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">void* context</td> <td class="cellrowborder" width="50%">提交请求时指定的用户上下文句柄。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* response</td> <td class="cellrowborder" width="50%"><p>回复的json字符串，包含以下参数：</p> <p>- message: 包含下列字段的消息。</p> <p>    - role: string. 消息的角色类型，应为"assistant".</p> <p>    - content: string。消息内容。</p> <p>- finish_reason: string or null. 停止原因，可能的值如下：</p> <p>    - null: 表示没有停止。流式推理中会有多次回复，只有最后一次回复有非空的"finish_reason"。而非流式推理只有一次回复，且"finish_reason"非空。</p> <p>    - "stop": 正常停止。</p> <p>    - "abort": 用户主动提前中止。</p> <p>    - "length": token数超过限制。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_qos_gewucreatesession" device-type="phone,2in1,tablet,wearable,tv">OH_QoS_GewuCreateSession()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_qos_gewucreatesession" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ygh-c106="" class="highlight-div"><div _ngcontent-ygh-c106="" class="highlight-div-header"><div _ngcontent-ygh-c106="" class="highlight-div-header-left"><div _ngcontent-ygh-c106="" class="handle-button expand-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ygh-c106="" class="highlight-div-header-right"><div _ngcontent-ygh-c106="" class="handle-button ai-button"></div><div _ngcontent-ygh-c106="" class="handle-button line-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ygh-c106="" class="handle-button theme-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ygh-c106="" class="handle-button copy-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ygh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_QoS_GewuCreateSessionResult <span class="hljs-title">OH_QoS_GewuCreateSession</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* attributes)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建格物会话。会话对象的声明周期从CreateSession函数返回开始，到调用DestroySession为止。会话属性的json字符串。该json字符串支持以下字段：- model: string. 表示会话使用的模型的路径。attributes json字符串例子：</p> <p>{</p> <p>    "model": "/data/storage/el2/base/files/qwen2/"</p> <p> }</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">const char* attributes</td> <td class="cellrowborder" width="50%">会话attributes的json字符串。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-oh-qos-gewucreatesessionresult">OH_QoS_GewuCreateSessionResult</a></td> <td class="cellrowborder" width="50%">创建会话的结果。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_qos_gewudestroysession" device-type="phone,2in1,tablet,wearable,tv">OH_QoS_GewuDestroySession()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_qos_gewudestroysession" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ygh-c106="" class="highlight-div"><div _ngcontent-ygh-c106="" class="highlight-div-header"><div _ngcontent-ygh-c106="" class="highlight-div-header-left"><div _ngcontent-ygh-c106="" class="handle-button expand-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ygh-c106="" class="highlight-div-header-right"><div _ngcontent-ygh-c106="" class="handle-button ai-button"></div><div _ngcontent-ygh-c106="" class="handle-button line-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ygh-c106="" class="handle-button theme-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ygh-c106="" class="handle-button copy-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ygh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_QoS_GewuErrorCode <span class="hljs-built_in">OH_QoS_GewuDestroySession</span>(OH_QoS_GewuSession session)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>销毁格物会话。建议用户应当等待至所有请求都已完成或中止，然后再调用该接口来销毁会话。如果调用该接口时还有正在进行的请求，那些请求将会被中止，且用户不会再收到回复。注意，在调用完该接口后，会话对象无法再被使用。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#变量">OH_QoS_GewuSession</a> session</td> <td class="cellrowborder" width="50%">要销毁的会话的句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_gewuerrorcode">OH_QoS_GewuErrorCode</a></td> <td class="cellrowborder" width="50%"><p>错误码</p> <p> - 会话销毁成功，返回值为OH_QOS_GEWU_OK。</p> <p> - 找不到会话返回OH_QOS_GEWU_NOENT。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_qos_gewuabortrequest" device-type="phone,2in1,tablet,wearable,tv">OH_QoS_GewuAbortRequest()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_qos_gewuabortrequest" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ygh-c106="" class="highlight-div"><div _ngcontent-ygh-c106="" class="highlight-div-header"><div _ngcontent-ygh-c106="" class="highlight-div-header-left"><div _ngcontent-ygh-c106="" class="handle-button expand-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ygh-c106="" class="highlight-div-header-right"><div _ngcontent-ygh-c106="" class="handle-button ai-button"></div><div _ngcontent-ygh-c106="" class="handle-button line-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ygh-c106="" class="handle-button theme-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ygh-c106="" class="handle-button copy-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ygh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>OH_QoS_GewuErrorCode <span class="hljs-built_in">OH_QoS_GewuAbortRequest</span>(OH_QoS_GewuSession session, OH_QoS_GewuRequest request)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>停止指定的请求。成功调用该函数后，client不会再收到该请求的回复，且该请求句柄无法再被使用。</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#变量">OH_QoS_GewuSession</a> session</td> <td class="cellrowborder" width="50%">请求提交到的会话句柄。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#变量">OH_QoS_GewuRequest</a> request</td> <td class="cellrowborder" width="50%">请求的句柄。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_gewuerrorcode">OH_QoS_GewuErrorCode</a></td> <td class="cellrowborder" width="50%"><p>错误码。</p> <p> - 成功停止请求返回OH_QOS_GEWU_OK。</p> <p> - 找不到请求返回OH_QOS_GEWU_NOENT。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_qos_gewusubmitrequest" device-type="phone,2in1,tablet,wearable,tv">OH_QoS_GewuSubmitRequest()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_qos_gewusubmitrequest" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ygh-c106="" class="highlight-div"><div _ngcontent-ygh-c106="" class="highlight-div-header"><div _ngcontent-ygh-c106="" class="highlight-div-header-left"><div _ngcontent-ygh-c106="" class="handle-button expand-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ygh-c106="" class="highlight-div-header-right"><div _ngcontent-ygh-c106="" class="handle-button ai-button"></div><div _ngcontent-ygh-c106="" class="handle-button line-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ygh-c106="" class="handle-button theme-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ygh-c106="" class="handle-button copy-button"><div _ngcontent-ygh-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ygh-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function">OH_QoS_GewuSubmitRequestResult <span class="hljs-title">OH_QoS_GewuSubmitRequest</span><span class="hljs-params">(OH_QoS_GewuSession session, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* request, OH_QoS_GewuOnResponse callback, <span class="hljs-type">void</span>* context)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>提交请求。请求的json字符串，支持以下字段：- messages: array. 表示消息的数组其中每个元素支持以下字段：- role: string. 消息的角色类型。- "developer": 开发者或系统提供的指示。- "user":用户输入。- "assistant": 模型生成结果。- content: string. 消息内容。- stream: boolean or null; 可选。是否使能流式推理，默认为非流式。json字符串例子：</p> <p>{</p> <p>    "messages": [</p> <p>    {</p> <p>        "role": "developer",</p> <p>        "content": "Your are a helpful assistant."</p> <p>    },</p> <p>    {</p> <p>        "role": "user",</p> <p>        "content": "What is HarmonyOS"</p> <p>    }</p> <p>    ],</p> <p>    "stream": true</p> <p>}</p> <p><strong>起始版本：</strong> 20</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.20.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.20.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-qos-h#变量">OH_QoS_GewuSession</a> session</td> <td class="cellrowborder" width="50%">会话句柄，表示请求要提交到哪个会话。</td> </tr> <tr><td class="cellrowborder" width="50%">const char* request</td> <td class="cellrowborder" width="50%">请求的json字符串。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-h#oh_qos_gewuonresponse">OH_QoS_GewuOnResponse</a> callback</td> <td class="cellrowborder" width="50%">接受回复的回调。</td> </tr> <tr><td class="cellrowborder" width="50%">void* context</td> <td class="cellrowborder" width="50%">要传给回调的用户上下文指针。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.22.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.22.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-qos-oh-qos-gewusubmitrequestresult">OH_QoS_GewuSubmitRequestResult</a></td> <td class="cellrowborder" width="50%"><p>格物提交请求结果。</p> <p> - 提交请求成功，返回值OH_QoS_GewuSubmitRequestResult里的error为OH_QOS_GEWU_OK，request为请求句柄。</p> <p> - 提交请求失败，返回值OH_QoS_GewuSubmitRequestResult里的error为错误原因，其中OH_QOS_GEWU_NOMEM表示没有足够的内存处理该请求。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>