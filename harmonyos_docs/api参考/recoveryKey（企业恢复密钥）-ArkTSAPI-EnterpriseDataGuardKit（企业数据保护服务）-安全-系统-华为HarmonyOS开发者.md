<h1 _ngcontent-rhy-c119="" class="doc-title ng-star-inserted" title="recoveryKey（企业恢复密钥）"> recoveryKey（企业恢复密钥） </h1>

<div _ngcontent-rhy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>在保证用户数据安全性前提下，保证用户数据的健壮性，用于加密硬盘数据的安全解密。</p>    <p>仅供企业安全管控类MDM应用申请权限后使用。</p>    <p><strong>起始版本：</strong>5.0.3(15)</p>    <div class="tiledSection">     <h2 id="section15980317111716" device-type="2in1">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15980317111716" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-rhy-c106="" class="highlight-div"><div _ngcontent-rhy-c106="" class="highlight-div-header"><div _ngcontent-rhy-c106="" class="highlight-div-header-left"><div _ngcontent-rhy-c106="" class="handle-button expand-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rhy-c106="" class="highlight-div-header-right"><div _ngcontent-rhy-c106="" class="handle-button ai-button"></div><div _ngcontent-rhy-c106="" class="handle-button line-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rhy-c106="" class="handle-button theme-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rhy-c106="" class="handle-button copy-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rhy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { recoveryKey } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.EnterpriseDataGuardKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section35870815206" device-type="2in1">EnterpriseRecoveryKeyInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section35870815206" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>企业恢复密钥及相关加密参数。</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.RecoveryKeyService</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="20%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="20%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="20%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="20%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="20%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">          <p>enterpriseRecoveryKey</p></td>         <td class="cellrowborder" width="20%">          <p>Uint8Array</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>AES-GCM-256加密后的企业恢复密钥。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>exportPublicKey</p></td>         <td class="cellrowborder" width="20%">          <p>Uint8Array</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>AES-GCM-256加密时使用的临时公钥。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>iv</p></td>         <td class="cellrowborder" width="20%">          <p>Uint8Array</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>AES-GCM-256加密时使用的iv。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">          <p>tag</p></td>         <td class="cellrowborder" width="20%">          <p>Uint8Array</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>否</p></td>         <td class="cellrowborder" width="20%">          <p>AES-GCM-256加密时使用的tag。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section169300420817" device-type="2in1">getEnterpriseRecoveryKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section169300420817" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>getEnterpriseRecoveryKey(userId: number): Promise&lt;EnterpriseRecoveryKeyInfo&gt;</p>     <p>获取企业恢复密钥。</p>     <p><strong>需要权限：</strong>ohos.permission.ENTERPRISE_RECOVERY_KEY</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.RecoveryKeyService</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>userId</p></td>         <td class="cellrowborder" width="30.8%">          <p>number</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>需要获取企业恢复密钥的用户ID。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/dataguard-recoverykey#section35870815206">EnterpriseRecoveryKeyInfo</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回企业恢复密钥及相关加密参数的对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400001</p></td>         <td class="cellrowborder" width="50%">          <p>System service exception.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400201</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid device type, current device is not enterprise device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400202</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid userId.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400203</p></td>         <td class="cellrowborder" width="50%">          <p>Enterprise recovery key is already existed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rhy-c106="" class="highlight-div"><div _ngcontent-rhy-c106="" class="highlight-div-header"><div _ngcontent-rhy-c106="" class="highlight-div-header-left"><div _ngcontent-rhy-c106="" class="handle-button expand-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rhy-c106="" class="highlight-div-header-right"><div _ngcontent-rhy-c106="" class="handle-button ai-button"></div><div _ngcontent-rhy-c106="" class="handle-button line-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rhy-c106="" class="handle-button theme-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rhy-c106="" class="handle-button copy-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rhy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { buffer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>recoveryKey.<span class="hljs-title function_">getEnterpriseRecoveryKey</span>(userId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">info: recoveryKey.EnterpriseRecoveryKeyInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting enterprise recovery key.`</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`EnterpriseRecoveryKeyInfo enterpriseRecoveryKey: <span class="hljs-subst">${buffer.<span class="hljs-keyword">from</span>(info.enterpriseRecoveryKey).toString(<span class="hljs-string">'hex'</span>)}</span>`</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`EnterpriseRecoveryKeyInfo exportPublicKey: <span class="hljs-subst">${buffer.<span class="hljs-keyword">from</span>(info.exportPublicKey).toString(<span class="hljs-string">'hex'</span>)}</span>`</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`EnterpriseRecoveryKeyInfo iv: <span class="hljs-subst">${buffer.<span class="hljs-keyword">from</span>(info.iv).toString(<span class="hljs-string">'hex'</span>)}</span>`</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`EnterpriseRecoveryKeyInfo tag: <span class="hljs-subst">${buffer.<span class="hljs-keyword">from</span>(info.tag).toString(<span class="hljs-string">'hex'</span>)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get enterprise recovery key. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section41041418113717" device-type="2in1">getAuthChallenge<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section41041418113717" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>getAuthChallenge(): Promise&lt;Uint8Array&gt;</p>     <p>获取挑战值，在发起更新企业公钥证书、删除企业恢复密钥数据流程前，需要先获取挑战值。</p>     <p><strong>需要权限：</strong>ohos.permission.ENTERPRISE_RECOVERY_KEY</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.RecoveryKeyService</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;Uint8Array&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>在发起更新企业公钥证书、清理企业恢复密钥数据流程前，获取到的挑战值。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400001</p></td>         <td class="cellrowborder" width="50%">          <p>System service exception.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400201</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid device type, current device is not enterprise device.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rhy-c106="" class="highlight-div"><div _ngcontent-rhy-c106="" class="highlight-div-header"><div _ngcontent-rhy-c106="" class="highlight-div-header-left"><div _ngcontent-rhy-c106="" class="handle-button expand-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rhy-c106="" class="highlight-div-header-right"><div _ngcontent-rhy-c106="" class="handle-button ai-button"></div><div _ngcontent-rhy-c106="" class="handle-button line-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rhy-c106="" class="handle-button theme-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rhy-c106="" class="handle-button copy-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rhy-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { buffer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>recoveryKey.<span class="hljs-title function_">getAuthChallenge</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">challenge: <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting challenge. challenge is: <span class="hljs-subst">${buffer.<span class="hljs-keyword">from</span>(challenge).toString(<span class="hljs-string">'hex'</span>)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get challenge. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1483871653813" device-type="2in1">updateEnterpriseCertificate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1483871653813" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>updateEnterpriseCertificate(signature: Uint8Array, cert: Uint8Array): Promise&lt;number&gt;</p>     <p>更新企业公钥证书流程，需要先调<a href="/consumer/cn/doc/harmonyos-references/dataguard-recoverykey#section41041418113717">getAuthChallenge</a>接口获取挑战值并<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/recoverykey-signature" target="_blank">签名</a>。</p>     <p><strong>需要权限：</strong>ohos.permission.ENTERPRISE_RECOVERY_KEY</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.RecoveryKeyService</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>signature</p></td>         <td class="cellrowborder" width="25%">          <p>Uint8Array</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>挑战值的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/recoverykey-signature" target="_blank">签名</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>cert</p></td>         <td class="cellrowborder" width="25%">          <p>Uint8Array</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>PEM格式的公钥证书，以二进制的格式完整传递。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;number&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。成功返回0，失败无返回。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400001</p></td>         <td class="cellrowborder" width="50%">          <p>System service exception.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400201</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid device type, current device is not enterprise device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400204</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid signature.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400205</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid cert.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-rhy-c106="" class="highlight-div"><div _ngcontent-rhy-c106="" class="highlight-div-header"><div _ngcontent-rhy-c106="" class="highlight-div-header-left"><div _ngcontent-rhy-c106="" class="handle-button expand-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rhy-c106="" class="highlight-div-header-right"><div _ngcontent-rhy-c106="" class="handle-button ai-button"></div><div _ngcontent-rhy-c106="" class="handle-button line-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rhy-c106="" class="handle-button theme-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rhy-c106="" class="handle-button copy-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rhy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">signature</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0</span>]);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cert</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0</span>]);</li><li>recoveryKey.<span class="hljs-title function_">updateEnterpriseCertificate</span>(signature, cert).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">ret: <span class="hljs-built_in">number</span></span>)=&gt;</span>{</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in updating certificate. result is: <span class="hljs-subst">${ret}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1927015514386" device-type="2in1">deleteEnterpriseRecoveryKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1927015514386" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>deleteEnterpriseRecoveryKey(userId: number, signature: Uint8Array): Promise&lt;number&gt;</p>     <p>删除企业恢复密钥相关数据，需要先调<a href="/consumer/cn/doc/harmonyos-references/dataguard-recoverykey#section41041418113717">getAuthChallenge</a>接口获取挑战值并<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/recoverykey-signature" target="_blank">签名</a>。</p>     <p><strong>需要权限：</strong>ohos.permission.ENTERPRISE_RECOVERY_KEY</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.RecoveryKeyService</p>     <p><strong>起始版本：</strong>5.0.3(15)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>userId</p></td>         <td class="cellrowborder" width="25%">          <p>number</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>需要删除企业恢复密钥的用户ID。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>signature</p></td>         <td class="cellrowborder" width="25%">          <p>Uint8Array</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>挑战值的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/recoverykey-signature" target="_blank">签名</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;number&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。成功返回0，失败无返回。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400001</p></td>         <td class="cellrowborder" width="50%">          <p>System service exception.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400201</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid device type, current device is not enterprise device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400202</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid userId.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400204</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid signature.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rhy-c106="" class="highlight-div"><div _ngcontent-rhy-c106="" class="highlight-div-header"><div _ngcontent-rhy-c106="" class="highlight-div-header-left"><div _ngcontent-rhy-c106="" class="handle-button expand-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rhy-c106="" class="highlight-div-header-right"><div _ngcontent-rhy-c106="" class="handle-button ai-button"></div><div _ngcontent-rhy-c106="" class="handle-button line-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rhy-c106="" class="handle-button theme-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rhy-c106="" class="handle-button copy-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rhy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">signature</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0</span>]);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>recoveryKey.<span class="hljs-title function_">deleteEnterpriseRecoveryKey</span>(userId, signature).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">ret: <span class="hljs-built_in">number</span></span>)=&gt;</span>{</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in deleting enterprise recovery key. result is: <span class="hljs-subst">${ret}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>)=&gt;</span>{</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete enterprise recovery key. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1894251193414" device-type="2in1">verifyUserIdentityEnterprise<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1894251193414" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>verifyUserIdentityEnterprise(userId: number, userType: number, pinCode: string): Promise&lt;void&gt;</p>     <p>验证企业用户身份。在导出企业恢复密钥以重置锁屏密码之前，请先验证用户的锁屏密码。</p>     <p><strong>需要权限：</strong>ohos.permission.ENTERPRISE_RECOVERY_KEY</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.RecoveryKeyService</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>userId</p></td>         <td class="cellrowborder" width="25%">          <p>number</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>需要导出企业恢复密钥的用户ID。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>userType</p></td>         <td class="cellrowborder" width="25%">          <p>number</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#osaccounttype" target="_blank">用户类型</a> 。可以通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccounttype9" target="_blank">getOsAccountType</a>获取。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>pinCode</p></td>         <td class="cellrowborder" width="25%">          <p>string</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>用户锁屏密码，字符长度不超过64位。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。无返回结果的Promise对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400001</p></td>         <td class="cellrowborder" width="50%">          <p>System service exception.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400103</p></td>         <td class="cellrowborder" width="50%">          <p>Authentication is failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400201</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid device type, current device is not enterprise device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400202</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid userId.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rhy-c106="" class="highlight-div"><div _ngcontent-rhy-c106="" class="highlight-div-header"><div _ngcontent-rhy-c106="" class="highlight-div-header-left"><div _ngcontent-rhy-c106="" class="handle-button expand-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rhy-c106="" class="highlight-div-header-right"><div _ngcontent-rhy-c106="" class="handle-button ai-button"></div><div _ngcontent-rhy-c106="" class="handle-button line-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rhy-c106="" class="handle-button theme-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rhy-c106="" class="handle-button copy-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rhy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, osAccount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">verifyUserIdentityEnterprise</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">accountManager</span>: osAccount.<span class="hljs-property">AccountManager</span> = osAccount.<span class="hljs-title function_">getAccountManager</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">accountType</span>: osAccount.<span class="hljs-property">OsAccountType</span> = <span class="hljs-keyword">await</span> accountManager.<span class="hljs-title function_">getOsAccountType</span>();</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-keyword">await</span> accountManager.<span class="hljs-title function_">getOsAccountLocalId</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">userType</span>: <span class="hljs-built_in">number</span> = accountType.<span class="hljs-title function_">valueOf</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">pinCode</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'111111'</span>;</li><li>    recoveryKey.<span class="hljs-title function_">verifyUserIdentityEnterprise</span>(userId, userType, pinCode).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in verifying user identity.`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to verified user identity. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to verifyUserIdentityEnterprise. Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section391875210343" device-type="2in1">getEnterpriseRecoveryKeyForResettingPin<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section391875210343" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>getEnterpriseRecoveryKeyForResettingPin(userId: number, userType: number): Promise&lt;EnterpriseRecoveryKeyInfo&gt;</p>     <p>导出用于重置锁屏密码的企业恢复密钥。先需要调用<a href="/consumer/cn/doc/harmonyos-references/dataguard-recoverykey#section1894251193414">verifyUserIdentityEnterprise</a>接口验证身份，并在30秒内调用此接口。</p>     <p><strong>需要权限：</strong>ohos.permission.ENTERPRISE_RECOVERY_KEY</p>     <p><strong>系统能力：</strong>SystemCapability.PCService.RecoveryKeyService</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">          <p>userId</p></td>         <td class="cellrowborder" width="25%">          <p>number</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p>需要导出企业恢复密钥的用户ID。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">          <p>userType</p></td>         <td class="cellrowborder" width="25%">          <p>number</p></td>         <td class="cellrowborder" width="25%">          <p>是</p></td>         <td class="cellrowborder" width="25%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#osaccounttype" target="_blank">用户类型</a> 。可以通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccounttype9" target="_blank">getOsAccountType</a>获取。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/dataguard-recoverykey#section35870815206">EnterpriseRecoveryKeyInfo</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回企业恢复密钥及相关加密参数的对象。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataguard-error-code">ArkTS API 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>201</p></td>         <td class="cellrowborder" width="50%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400001</p></td>         <td class="cellrowborder" width="50%">          <p>System service exception.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400201</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid device type, current device is not enterprise device.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1014400202</p></td>         <td class="cellrowborder" width="50%">          <p>Invalid userId.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rhy-c106="" class="highlight-div"><div _ngcontent-rhy-c106="" class="highlight-div-header"><div _ngcontent-rhy-c106="" class="highlight-div-header-left"><div _ngcontent-rhy-c106="" class="handle-button expand-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rhy-c106="" class="highlight-div-header-right"><div _ngcontent-rhy-c106="" class="handle-button ai-button"></div><div _ngcontent-rhy-c106="" class="handle-button line-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rhy-c106="" class="handle-button theme-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rhy-c106="" class="handle-button copy-button"><div _ngcontent-rhy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rhy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { buffer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, osAccount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getEnterpriseRecoveryKeyForResettingPin</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">accountManager</span>: osAccount.<span class="hljs-property">AccountManager</span> = osAccount.<span class="hljs-title function_">getAccountManager</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">accountType</span>: osAccount.<span class="hljs-property">OsAccountType</span> = <span class="hljs-keyword">await</span> accountManager.<span class="hljs-title function_">getOsAccountType</span>();</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-keyword">await</span> accountManager.<span class="hljs-title function_">getOsAccountLocalId</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">userType</span>: <span class="hljs-built_in">number</span> = accountType.<span class="hljs-title function_">valueOf</span>();</li><li>    recoveryKey.<span class="hljs-title function_">getEnterpriseRecoveryKeyForResettingPin</span>(userId, userType)</li><li>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">info: recoveryKey.EnterpriseRecoveryKeyInfo</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting enterprise recovery key for resetting pin.`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`EnterpriseRecoveryKeyInfo enterpriseRecoveryKey: <span class="hljs-subst">${buffer.<span class="hljs-keyword">from</span>(info.enterpriseRecoveryKey)</span></span></li><li><span class="hljs-string">          .toString(<span class="hljs-string">'hex'</span>)}</span>`);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`EnterpriseRecoveryKeyInfo exportPublicKey: <span class="hljs-subst">${buffer.<span class="hljs-keyword">from</span>(info.exportPublicKey)</span></span></li><li><span class="hljs-string">          .toString(<span class="hljs-string">'hex'</span>)}</span>`);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`EnterpriseRecoveryKeyInfo iv: <span class="hljs-subst">${buffer.<span class="hljs-keyword">from</span>(info.iv).toString(<span class="hljs-string">'hex'</span>)}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`EnterpriseRecoveryKeyInfo tag: <span class="hljs-subst">${buffer.<span class="hljs-keyword">from</span>(info.tag).toString(<span class="hljs-string">'hex'</span>)}</span>`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get enterprise recovery key for resetting pin. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to getEnterpriseRecoveryKeyForResettingPin. Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>