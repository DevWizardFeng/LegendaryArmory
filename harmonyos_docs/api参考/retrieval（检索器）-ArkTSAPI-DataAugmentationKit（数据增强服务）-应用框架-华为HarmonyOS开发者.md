<h1 _ngcontent-ouy-c119="" class="doc-title ng-star-inserted" title="retrieval（检索器）"> retrieval（检索器） </h1>

<div _ngcontent-ouy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>智慧数据平台（ArkData Intelligence Platform，AIP）提供端侧的数据智慧化能力，实现数据和AI智能在端侧闭环。作为端侧智慧化能力底座，将支持以下能力：</p> <ul><li>多模态嵌入模型：使用嵌入模型（Embedding Model）对多模态数据生成向量表征，将文本、图片等数据映射到同一向量空间，支撑基于语义的多模态知识检索。</li><li>多模态数据存储：支持端侧向量、倒排索引等多模态数据存储，避免将原始数据发送到服务器进行处理，减少了数据泄露的风险。</li><li>知识检索：逐步构建语义索引、知识图谱、召回、重排等功能，支持用户知识的语义化检索。</li><li>知识生成与整理：基于用户文档、消息、电子邮件、照片、视频、日历事件、屏幕上下文等数据，支持高效数据整理与知识生成，实现数据到知识的转换。<p><strong>起始版本：</strong>6.0.0(20)</p> </li></ul> <div class="tiledSection"><h2 id="section10914338105311" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10914338105311" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ouy-c106="" class="highlight-div"><div _ngcontent-ouy-c106="" class="highlight-div-header"><div _ngcontent-ouy-c106="" class="highlight-div-header-left"><div _ngcontent-ouy-c106="" class="handle-button expand-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ouy-c106="" class="highlight-div-header-right"><div _ngcontent-ouy-c106="" class="handle-button ai-button"></div><div _ngcontent-ouy-c106="" class="handle-button line-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ouy-c106="" class="handle-button theme-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ouy-c106="" class="handle-button copy-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ouy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { retrieval } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DataAugmentationKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section48951613820" device-type="phone,2in1,tablet">getRetriever<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section48951613820" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getRetriever(config: RetrievalConfig): Promise&lt;Retriever&gt;</p> <p>获取检索器，进行多路检索召回。使用promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>config</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section95236010016">RetrievalConfig</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>检索器的配置信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section11926161314172">Retriever</a>&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回检索器对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ouy-c106="" class="highlight-div"><div _ngcontent-ouy-c106="" class="highlight-div-header"><div _ngcontent-ouy-c106="" class="highlight-div-header-left"><div _ngcontent-ouy-c106="" class="handle-button expand-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ouy-c106="" class="highlight-div-header-right"><div _ngcontent-ouy-c106="" class="handle-button ai-button"></div><div _ngcontent-ouy-c106="" class="handle-button line-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ouy-c106="" class="handle-button theme-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ouy-c106="" class="handle-button copy-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ouy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { retrieval } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DataAugmentationKit'</span>;</li><li><span class="hljs-keyword">import</span> { relationalStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">retrieve</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">vectorDBConfig</span>:retrieval.<span class="hljs-property">DbConfig</span> = {</li><li>      <span class="hljs-attr">name</span>:<span class="hljs-string">"vector_store_test.db"</span>,</li><li>      <span class="hljs-attr">securityLevel</span>:relationalStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">invidxDBConfig</span>:retrieval.<span class="hljs-property">DbConfig</span> = {</li><li>      <span class="hljs-attr">name</span>:<span class="hljs-string">"invidx_store_test.db"</span>,</li><li>      <span class="hljs-attr">securityLevel</span>:relationalStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>    }</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>();</li><li>    <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getHostContext failed."</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">channelConfigVector</span>:retrieval.<span class="hljs-property">ChannelConfig</span> = {</li><li>      <span class="hljs-attr">channelType</span>:retrieval.<span class="hljs-property">ChannelType</span>.<span class="hljs-property">VECTOR_DATABASE</span>,</li><li>      <span class="hljs-attr">context</span>:context,</li><li>      <span class="hljs-attr">dbConfig</span>:vectorDBConfig</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">channelConfigInvIdx</span>:retrieval.<span class="hljs-property">ChannelConfig</span> = {</li><li>      <span class="hljs-attr">channelType</span>:retrieval.<span class="hljs-property">ChannelType</span>.<span class="hljs-property">INVERTED_INDEX_DATABASE</span>,</li><li>      <span class="hljs-attr">context</span>:context,</li><li>      <span class="hljs-attr">dbConfig</span>:invidxDBConfig</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">retrievalConfig</span>:retrieval.<span class="hljs-property">RetrievalConfig</span> = {</li><li>      <span class="hljs-attr">channelConfigs</span>:[channelConfigInvIdx, channelConfigVector]</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">globalRetriever</span>:retrieval.<span class="hljs-property">Retriever</span> | <span class="hljs-literal">undefined</span>;</li><li>    <span class="hljs-comment">// 获取检索器</span></li><li>    <span class="hljs-keyword">await</span> retrieval.<span class="hljs-title function_">getRetriever</span>(retrievalConfig)</li><li>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">retriever:retrieval.Retriever</span>) =&gt;</span> {</li><li>        globalRetriever = retriever;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"globalRetriever is success"</span>);</li><li>      })</li><li>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err:BusinessError</span>) =&gt;</span> {</li><li>        globalRetriever = <span class="hljs-literal">undefined</span>;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get Retriever and code is "</span> + err.<span class="hljs-property">code</span>);</li><li>      })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div> <p></p> </div> <div class="tiledSection"><h2 id="section95236010016" device-type="phone,2in1,tablet">RetrievalConfig<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section95236010016" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>管理召回的配置</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.1" width="25%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>channelConfigs</p> </td> <td class="cellrowborder" width="25%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section14132649320">ChannelConfig</a>&gt;</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>不同检索回路的配置信息数组。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section14132649320" device-type="phone,2in1,tablet">ChannelConfig<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14132649320" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>管理每个检索回路的配置信息。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="23.06%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="23.18%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="23.119999999999997%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="23.119999999999997%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.06%"><p>channelType</p> </td> <td class="cellrowborder" width="23.18%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section15391712641">ChannelType</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>当前检索回路的数据库类型。</p> </td> </tr> <tr><td class="cellrowborder" width="23.06%"><p>context</p> </td> <td class="cellrowborder" width="23.18%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext" target="_blank">common.BaseContext</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>应用的上下文。</p> <p>FA模型的应用Context定义。</p> <p>Stage模型的应用Context定义。</p> </td> </tr> <tr><td class="cellrowborder" width="23.06%"><p>dbConfig</p> </td> <td class="cellrowborder" width="23.18%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section175721121461">DbConfig</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>否</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>当前检索回路的数据库配置。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section15391712641" device-type="phone,2in1,tablet">ChannelType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15391712641" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>数据库类型枚举。</p> <p><strong>系统能力：</strong>SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.1.4.1.1" width="33.333333333333336%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.4.1.2" width="33.333333333333336%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.4.1.3" width="33.333333333333336%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.333333333333336%"><p>VECTOR_DATABASE</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>0</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>向量数据库。</p> </td> </tr> <tr><td class="cellrowborder" width="33.333333333333336%"><p>INVERTED_INDEX_DATABASE</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>1</p> </td> <td class="cellrowborder" width="33.333333333333336%"><p>倒排数据库。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section175721121461" device-type="phone,2in1,tablet">DbConfig<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section175721121461" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>type DbConfig = relationalStore.StoreConfig</p> <p>数据库配置。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-i#storeconfig" target="_blank">relationalStore.StoreConfig</a></p> </td> <td class="cellrowborder" width="50%"><p>数据库配置。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section11926161314172" device-type="phone,2in1,tablet">Retriever<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11926161314172" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>检索器，用于多路检索召回。</p> <p>下列接口都需先使用<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section48951613820">retrieval.getRetriever</a>获取到检索器实例，再通过此实例调用对应接口。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p> </div> <div class="tiledSection"><h3 id="section773821016184" device-type="phone,2in1,tablet" class="firsth2">retrieveRdb<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section773821016184" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>retrieveRdb(query: string, condition: RetrievalCondition): Promise&lt;RdbRecords&gt;</p> <p>给定检索条件（包含查询词分词、召回条件），从一个关系型数据库检索召回满足条件的数据，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="24.97%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25.03%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="24.97%"><p>query</p> </td> <td class="cellrowborder" width="25.03%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>当前检索的查询词。</p> </td> </tr> <tr><td class="cellrowborder" width="24.97%"><p>condition</p> </td> <td class="cellrowborder" width="25.03%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section4881955192413">RetrievalCondition</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>检索条件。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7831184215917">RdbRecords</a>&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，返回检索召回数据。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section1695152585411">1021200001</a></p> </td> <td class="cellrowborder" width="50%"><p>The database is corrupted.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section18285155115599">1021200002</a></p> </td> <td class="cellrowborder" width="50%"><p>The database is closed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section10228950523">1021200003</a></p> </td> <td class="cellrowborder" width="50%"><p>The database is busy.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section1512434117512">1021200004</a></p> </td> <td class="cellrowborder" width="50%"><p>The database is out of memory.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section20133860106">1021200100</a></p> </td> <td class="cellrowborder" width="50%"><p>SQLite: Generic error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section6749146131611">1021200101</a></p> </td> <td class="cellrowborder" width="50%"><p>SQLite: Access permission denied.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section17536341132517">1021200102</a></p> </td> <td class="cellrowborder" width="50%"><p>SQLite: The database file is locked.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section81851635102918">1021200103</a></p> </td> <td class="cellrowborder" width="50%"><p>SQLite: Some kind of disk I/O error occurred.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section0489154433217">1021200104</a></p> </td> <td class="cellrowborder" width="50%"><p>SQLite: The WAL file size exceeds the default limit.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section193661963369">1021200105</a></p> </td> <td class="cellrowborder" width="50%"><p>SQLite: Unable to open the database file.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section4447164716181">1021201000</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: An error occurred during the reacall phase.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section6203196115413">1021201001</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: An error occurred during the re-ranking phase.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section68301510501">1021201002</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: The value of the numerical parameter is outside the constrained range.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section113966140913">1021201003</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: There are invalid primary keys.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section1917152417155">1021201004</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: A re-ranking algorithm that does not support composite primary keys was used.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section168621258121819">1021201005</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: There are fields with empty strings.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section15711102132214">1021201006</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: The filter input is invalid.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section151721752182519">1021201007</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: There are invalid recall names in RecallCondition.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section2545133262914">1021201008</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: The vector similarity threshold in VectorQuery is higher than the tiered threshold in VectorRerankParameter.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section17815414203313">1021201009</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: RerankMethod parameters do not match the channel type.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section18940016203611">1021201010</a></p> </td> <td class="cellrowborder" width="50%"><p>Retrieval: There exists a parameter value that should not be empty but is actually empty</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-error-code#section2851182812325">1021200012</a></p> </td> <td class="cellrowborder" width="50%"><p>Unable to generate embeddings.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ouy-c106="" class="highlight-div"><div _ngcontent-ouy-c106="" class="highlight-div-header"><div _ngcontent-ouy-c106="" class="highlight-div-header-left"><div _ngcontent-ouy-c106="" class="handle-button expand-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ouy-c106="" class="highlight-div-header-right"><div _ngcontent-ouy-c106="" class="handle-button ai-button"></div><div _ngcontent-ouy-c106="" class="handle-button line-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ouy-c106="" class="handle-button theme-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ouy-c106="" class="handle-button copy-button"><div _ngcontent-ouy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ouy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { retrieval } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DataAugmentationKit'</span>;</li><li><span class="hljs-keyword">import</span> { relationalStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li> </li><li><span class="hljs-keyword">async</span> <span class="hljs-title function_">retrieve</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">vectorDBConfig</span>:retrieval.<span class="hljs-property">DbConfig</span> = {</li><li>      <span class="hljs-attr">name</span>:<span class="hljs-string">"vector_test.db"</span>,</li><li>      <span class="hljs-attr">securityLevel</span>:relationalStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">invidxDBConfig</span>:retrieval.<span class="hljs-property">DbConfig</span> = {</li><li>      <span class="hljs-attr">name</span>:<span class="hljs-string">"files_test.db"</span>,</li><li>      <span class="hljs-attr">securityLevel</span>:relationalStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>    }</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>();</li><li>    <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getHostContext failed."</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">channelConfigVector</span>:retrieval.<span class="hljs-property">ChannelConfig</span> = {</li><li>      <span class="hljs-attr">channelType</span>:retrieval.<span class="hljs-property">ChannelType</span>.<span class="hljs-property">VECTOR_DATABASE</span>,</li><li>      <span class="hljs-attr">context</span>:context,</li><li>      <span class="hljs-attr">dbConfig</span>:vectorDBConfig</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">channelConfigInvIdx</span>:retrieval.<span class="hljs-property">ChannelConfig</span> = {</li><li>      <span class="hljs-attr">channelType</span>:retrieval.<span class="hljs-property">ChannelType</span>.<span class="hljs-property">INVERTED_INDEX_DATABASE</span>,</li><li>      <span class="hljs-attr">context</span>:context,</li><li>      <span class="hljs-attr">dbConfig</span>:invidxDBConfig</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">retrievalConfig</span>:retrieval.<span class="hljs-property">RetrievalConfig</span> = {</li><li>      <span class="hljs-attr">channelConfigs</span>:[channelConfigInvIdx, channelConfigVector]</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">globalRetriever</span>:retrieval.<span class="hljs-property">Retriever</span> | <span class="hljs-literal">undefined</span>;</li><li>    <span class="hljs-keyword">await</span> retrieval.<span class="hljs-title function_">getRetriever</span>(retrievalConfig)</li><li>      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">retriever:retrieval.Retriever</span>) =&gt;</span> {</li><li>        globalRetriever = retriever;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"globalRetriever is success"</span>);</li><li>      })</li><li>      .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err:BusinessError</span>) =&gt;</span> {</li><li>        globalRetriever = <span class="hljs-literal">undefined</span>;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get Retriever and code is "</span> + err.<span class="hljs-property">code</span>);</li><li>      })</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fieldWeight</span>:<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = {</li><li>      <span class="hljs-string">"filename"</span>:<span class="hljs-number">4.0</span></li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">fieldSlops</span>:<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = {</li><li>      <span class="hljs-string">"filename"</span>:<span class="hljs-number">5</span></li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">bm25Strategy</span>:retrieval.<span class="hljs-property">Bm25Strategy</span> = {</li><li>      <span class="hljs-attr">bm25Weight</span>:<span class="hljs-number">1.5</span>,</li><li>      <span class="hljs-attr">columnWeight</span>:fieldWeight</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">exactStrategy</span>:retrieval.<span class="hljs-property">ExactMatchingStrategy</span> = {</li><li>      <span class="hljs-attr">exactMatchingWeight</span>:<span class="hljs-number">1.2</span>,</li><li>      <span class="hljs-attr">columnWeight</span>:fieldWeight</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">outOfOrderStrategy</span>:retrieval.<span class="hljs-property">ProximityStrategy</span> = {</li><li>      <span class="hljs-attr">proximityWeight</span>:<span class="hljs-number">1.0</span>,</li><li>      <span class="hljs-attr">columnWeight</span>:fieldWeight,</li><li>      <span class="hljs-attr">columnSlops</span>:fieldSlops</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">invertedIndexStrategies</span>:<span class="hljs-title class_">Array</span>&lt;retrieval.<span class="hljs-property">InvertedIndexStrategy</span>&gt; = [bm25Strategy, exactStrategy, outOfOrderStrategy]</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">recallConditionInvIdx</span>:retrieval.<span class="hljs-property">InvertedIndexRecallCondition</span> ={</li><li>      <span class="hljs-attr">ftsTableName</span>:<span class="hljs-string">"files"</span>,</li><li>      <span class="hljs-attr">primaryKey</span>:[<span class="hljs-string">"fileid"</span>],</li><li>      <span class="hljs-attr">fromClause</span>:<span class="hljs-string">"files"</span>,</li><li>      <span class="hljs-attr">responseColumns</span>:[<span class="hljs-string">"fileid"</span>, <span class="hljs-string">"filename"</span>, <span class="hljs-string">"keywords"</span>],</li><li>      <span class="hljs-attr">deepSize</span>:<span class="hljs-number">2</span>,</li><li>      <span class="hljs-attr">invertedIndexStrategies</span>:invertedIndexStrategies,</li><li>      <span class="hljs-attr">recallName</span>:<span class="hljs-string">"invIdxRecall"</span></li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 这里 floatArray 时输入的 query 的表征向量，根据实际情况需要修改</span></li><li>    <span class="hljs-keyword">let</span> floatArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>([<span class="hljs-number">0.006954</span>, -<span class="hljs-number">0.079041</span>, <span class="hljs-number">0.046173</span>, <span class="hljs-number">0.157959</span>, -<span class="hljs-number">0.017212</span>, <span class="hljs-number">0.037018</span>, -<span class="hljs-number">0.072083</span>, -<span class="hljs-number">0.028488</span>, -<span class="hljs-number">0.099854</span>, <span class="hljs-number">0.044037</span>, -<span class="hljs-number">0.008911</span>, -<span class="hljs-number">0.063049</span>, <span class="hljs-number">0.035950</span>, -<span class="hljs-number">0.105835</span>, <span class="hljs-number">0.057739</span>, <span class="hljs-number">0.060364</span>, -<span class="hljs-number">0.062042</span>, <span class="hljs-number">0.044159</span>, <span class="hljs-number">0.143188</span>, <span class="hljs-number">0.123901</span>, -<span class="hljs-number">0.069641</span>, -<span class="hljs-number">0.061920</span>, -<span class="hljs-number">0.086731</span>, -<span class="hljs-number">0.092468</span>, <span class="hljs-number">0.092957</span>, -<span class="hljs-number">0.027649</span>, -<span class="hljs-number">0.005497</span>, -<span class="hljs-number">0.039276</span>, <span class="hljs-number">0.017502</span>, -<span class="hljs-number">0.046570</span>, -<span class="hljs-number">0.115906</span>, <span class="hljs-number">0.081177</span>, -<span class="hljs-number">0.153931</span>, -<span class="hljs-number">0.040588</span>, <span class="hljs-number">0.123474</span>, -<span class="hljs-number">0.099060</span>, <span class="hljs-number">0.062042</span>, <span class="hljs-number">0.026352</span>, -<span class="hljs-number">0.041382</span>, -<span class="hljs-number">0.099548</span>, <span class="hljs-number">0.071167</span>, -<span class="hljs-number">0.120850</span>, <span class="hljs-number">0.082642</span>, <span class="hljs-number">0.026398</span>, -<span class="hljs-number">0.035614</span>, -<span class="hljs-number">0.008545</span>, -<span class="hljs-number">0.076660</span>, -<span class="hljs-number">0.031067</span>, <span class="hljs-number">0.192017</span>, -<span class="hljs-number">0.052582</span>, <span class="hljs-number">0.005310</span>, <span class="hljs-number">0.052734</span>, <span class="hljs-number">0.199463</span>, <span class="hljs-number">0.075195</span>, -<span class="hljs-number">0.070740</span>, -<span class="hljs-number">0.035950</span>, <span class="hljs-number">0.073120</span>, <span class="hljs-number">0.089172</span>, <span class="hljs-number">0.075989</span>, <span class="hljs-number">0.003582</span>, <span class="hljs-number">0.050201</span>, -<span class="hljs-number">0.012787</span>, <span class="hljs-number">0.016647</span>, -<span class="hljs-number">0.053619</span>, <span class="hljs-number">0.001906</span>, -<span class="hljs-number">0.060181</span>, -<span class="hljs-number">0.068359</span>, -<span class="hljs-number">0.114502</span>, -<span class="hljs-number">0.045013</span>, <span class="hljs-number">0.004547</span>, -<span class="hljs-number">0.004673</span>, -<span class="hljs-number">0.148071</span>, <span class="hljs-number">0.126343</span>, <span class="hljs-number">0.019394</span>, -<span class="hljs-number">0.063110</span>, -<span class="hljs-number">0.055908</span>, <span class="hljs-number">0.071228</span>, <span class="hljs-number">0.002369</span>, <span class="hljs-number">0.041412</span>, <span class="hljs-number">0.126709</span>, -<span class="hljs-number">0.053467</span>, <span class="hljs-number">0.127808</span>, <span class="hljs-number">0.055420</span>, <span class="hljs-number">0.206177</span>, <span class="hljs-number">0.002169</span>, -<span class="hljs-number">0.001452</span>, <span class="hljs-number">0.095520</span>, -<span class="hljs-number">0.042511</span>, <span class="hljs-number">0.099243</span>, -<span class="hljs-number">0.164185</span>, <span class="hljs-number">0.093384</span>, -<span class="hljs-number">0.014618</span>, -<span class="hljs-number">0.129150</span>, -<span class="hljs-number">0.238770</span>, -<span class="hljs-number">0.085327</span>, <span class="hljs-number">0.051300</span>, -<span class="hljs-number">0.020004</span>, <span class="hljs-number">0.010063</span>, -<span class="hljs-number">0.084351</span>, -<span class="hljs-number">0.003567</span>, <span class="hljs-number">0.064941</span>, -<span class="hljs-number">0.205322</span>, -<span class="hljs-number">0.158936</span>, -<span class="hljs-number">0.074768</span>, <span class="hljs-number">0.104370</span>, <span class="hljs-number">0.197021</span>, -<span class="hljs-number">0.080688</span>, -<span class="hljs-number">0.066772</span>, -<span class="hljs-number">0.036346</span>, <span class="hljs-number">0.034912</span>, -<span class="hljs-number">0.019760</span>, <span class="hljs-number">0.110474</span>, <span class="hljs-number">0.128662</span>, <span class="hljs-number">0.094727</span>, <span class="hljs-number">0.024948</span>, -<span class="hljs-number">0.033356</span>, -<span class="hljs-number">0.081848</span>, <span class="hljs-number">0.054474</span>, -<span class="hljs-number">0.065857</span>, -<span class="hljs-number">0.156494</span>, <span class="hljs-number">0.002527</span>, <span class="hljs-number">0.097595</span>, -<span class="hljs-number">0.027420</span>, <span class="hljs-number">0.039185</span>, <span class="hljs-number">0.063965</span>, <span class="hljs-number">0.220093</span>, <span class="hljs-number">0.029556</span>, -<span class="hljs-number">0.115417</span>]);</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">vectorQuery</span>:retrieval.<span class="hljs-property">VectorQuery</span> = {</li><li>      <span class="hljs-attr">column</span>:<span class="hljs-string">"keywords"</span>,</li><li>      <span class="hljs-attr">value</span>:floatArray,</li><li>      <span class="hljs-attr">similarityThreshold</span>:<span class="hljs-number">0.35</span></li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">recallConditionVector</span>:retrieval.<span class="hljs-property">VectorRecallCondition</span> = {</li><li>      <span class="hljs-attr">vectorQuery</span>:vectorQuery,</li><li>      <span class="hljs-attr">fromClause</span>:<span class="hljs-string">"vector"</span>,</li><li>      <span class="hljs-attr">primaryKey</span>:[<span class="hljs-string">"fileid"</span>],</li><li>      <span class="hljs-attr">responseColumns</span>:[<span class="hljs-string">"filename_text"</span>, <span class="hljs-string">"filename"</span>, <span class="hljs-string">"int64_value"</span>, <span class="hljs-string">"double_value"</span>, <span class="hljs-string">"bool_value"</span>, <span class="hljs-string">"blob_value"</span>],</li><li>      <span class="hljs-attr">recallName</span>:<span class="hljs-string">"vectorRecall"</span>,</li><li>      <span class="hljs-attr">deepSize</span>:<span class="hljs-number">2</span></li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">vectorWeights</span>:<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = {</li><li>      <span class="hljs-string">"vectorRecall"</span>:<span class="hljs-number">0.5</span></li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">invidxWeights</span>:<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = {</li><li>      <span class="hljs-string">"vectorRecall"</span>:<span class="hljs-number">0.5</span></li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">vectorRerankParameter</span>:retrieval.<span class="hljs-property">VectorRerankParameter</span> = {</li><li>      <span class="hljs-attr">vectorWeights</span>:vectorWeights,</li><li>      <span class="hljs-attr">thresholds</span>:[<span class="hljs-number">0.55</span>, <span class="hljs-number">0.45</span>]</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">invidxRerankParameter</span>:retrieval.<span class="hljs-property">InvertedIndexRerankParameter</span> = {</li><li>      <span class="hljs-attr">invertedIndexWeights</span>:invidxWeights,</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">parameters</span>:<span class="hljs-title class_">Record</span>&lt;retrieval.<span class="hljs-property">ChannelType</span>, retrieval.<span class="hljs-property">RerankParameter</span>&gt; = {</li><li>      <span class="hljs-number">0</span>:vectorRerankParameter,</li><li>      <span class="hljs-number">1</span>:invidxRerankParameter</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">rerankMethod</span>:retrieval.<span class="hljs-property">RerankMethod</span> = {</li><li>      <span class="hljs-attr">rerankType</span>:retrieval.<span class="hljs-property">RerankType</span>.<span class="hljs-property">RRF</span>,</li><li>      <span class="hljs-attr">parameters</span>:parameters,</li><li>      <span class="hljs-attr">isSoftmaxNormalized</span>:<span class="hljs-literal">true</span></li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">groundTruthIds</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">'1'</span>,<span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>];</li><li>    <span class="hljs-keyword">let</span> explain : retrieval.<span class="hljs-property">ExplanationConfig</span> ={</li><li>      <span class="hljs-attr">groundTruths</span>: groundTruthIds</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">retrievalCondition</span>:retrieval.<span class="hljs-property">RetrievalCondition</span> = {</li><li>      <span class="hljs-attr">rerankMethod</span>:rerankMethod,</li><li>      <span class="hljs-attr">recallConditions</span>:[recallConditionInvIdx, recallConditionVector],</li><li>      <span class="hljs-attr">resultCount</span>:<span class="hljs-number">2</span>,</li><li>      <span class="hljs-attr">explanation</span>:explain</li><li>    }</li><li>
</li><li>
</li><li>    <span class="hljs-keyword">if</span> (globalRetriever != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>:<span class="hljs-built_in">string</span> = <span class="hljs-string">"运动直播场景"</span>;</li><li>      <span class="hljs-comment">// 执行检索</span></li><li>      globalRetriever.<span class="hljs-title function_">retrieveRdb</span>(query, retrievalCondition)</li><li>        .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">rdbdata:retrieval.RdbRecords</span>) =&gt;</span> {</li><li>
</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`#########  retrieval result ############`</span>);</li><li>          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; rdbdata.<span class="hljs-property">records</span>.<span class="hljs-property">length</span>; i++) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">` primaryKey is <span class="hljs-subst">${rdbdata.records[i].primaryKey}</span>`</span>);</li><li>            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(rdbdata.<span class="hljs-property">records</span>[i].<span class="hljs-property">columns</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (rdbdata.<span class="hljs-property">records</span> &amp;&amp; rdbdata.<span class="hljs-property">records</span>[i]) {</li><li>                <span class="hljs-keyword">let</span> value = rdbdata.<span class="hljs-property">records</span>[i].<span class="hljs-property">columns</span>[key];</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`recall Scores Key: <span class="hljs-subst">${key}</span>, Value: <span class="hljs-subst">${value}</span>`</span>);</li><li>              }</li><li>            });</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`score is <span class="hljs-subst">${rdbdata.records[i].score}</span>`</span>);</li><li>
</li><li>            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(rdbdata.<span class="hljs-property">records</span>[i].<span class="hljs-property">recallScores</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">channelType</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (rdbdata.<span class="hljs-property">records</span>) {</li><li>                <span class="hljs-keyword">let</span> <span class="hljs-attr">scores</span>:<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, retrieval.<span class="hljs-property">RecallScore</span>&gt;  = rdbdata.<span class="hljs-property">records</span>[i].<span class="hljs-property">recallScores</span>[channelType];</li><li>                <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(scores).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>)=&gt;</span>{</li><li>                  <span class="hljs-keyword">let</span> value = scores[key];</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`recall Scores channelType is <span class="hljs-subst">${channelType}</span>, Key: <span class="hljs-subst">${key}</span>, score: <span class="hljs-subst">${value.score}</span>`</span>);</li><li>                });</li><li>              }</li><li>            });</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"recall Scores"</span>, rdbdata.<span class="hljs-property">records</span>[i].<span class="hljs-property">recallScores</span>.<span class="hljs-title function_">toString</span>());</li><li>            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(rdbdata.<span class="hljs-property">records</span>[i].<span class="hljs-property">features</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (rdbdata.<span class="hljs-property">records</span> &amp;&amp; rdbdata.<span class="hljs-property">records</span>[i]) {</li><li>                <span class="hljs-keyword">let</span> value = rdbdata.<span class="hljs-property">records</span>[i].<span class="hljs-property">features</span>[key];</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`features Key: <span class="hljs-subst">${key}</span>, Value: <span class="hljs-subst">${value}</span>`</span>);</li><li>              }</li><li>            });</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`similarityLevel is <span class="hljs-subst">${rdbdata.records[i].similarityLevel}</span>`</span>);</li><li>
</li><li>          }</li><li>
</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`#########  missdGroundTruthsPrimaryKey ############`</span>);</li><li>          <span class="hljs-keyword">if</span>(rdbdata.<span class="hljs-property">missedGroundTruths</span> != <span class="hljs-literal">undefined</span> &amp;&amp; rdbdata.<span class="hljs-property">missedGroundTruths</span>.<span class="hljs-property">length</span> != <span class="hljs-number">0</span>){</li><li>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; rdbdata.<span class="hljs-property">missedGroundTruths</span>.<span class="hljs-property">length</span>; i++) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`missdGroundTruthsPrimaryKey is <span class="hljs-subst">${rdbdata.missedGroundTruths[i].primaryKey}</span>`</span>);</li><li>              <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(rdbdata.<span class="hljs-property">missedGroundTruths</span>[i].<span class="hljs-property">columns</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (rdbdata.<span class="hljs-property">missedGroundTruths</span> &amp;&amp; rdbdata.<span class="hljs-property">missedGroundTruths</span>[i]) {</li><li>                  <span class="hljs-keyword">let</span> value = rdbdata.<span class="hljs-property">missedGroundTruths</span>[i].<span class="hljs-property">columns</span>[key];</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`missdGroundTruths recall Scores Key: <span class="hljs-subst">${key}</span>, Value: <span class="hljs-subst">${value}</span>`</span>);</li><li>                }</li><li>              });</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">` missdGroundTruths score is <span class="hljs-subst">${rdbdata.missedGroundTruths[i].score}</span>`</span>);</li><li>
</li><li>              <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(rdbdata.<span class="hljs-property">missedGroundTruths</span>[i].<span class="hljs-property">recallScores</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">channelType</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (rdbdata.<span class="hljs-property">missedGroundTruths</span>) {</li><li>                  <span class="hljs-keyword">let</span> <span class="hljs-attr">scores</span>:<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, retrieval.<span class="hljs-property">RecallScore</span>&gt;  = rdbdata.<span class="hljs-property">missedGroundTruths</span>[i].<span class="hljs-property">recallScores</span>[channelType];</li><li>                  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(scores).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>)=&gt;</span>{</li><li>                    <span class="hljs-keyword">let</span> value = scores[key];</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`missdGroundTruths recall Scores channelType is <span class="hljs-subst">${channelType}</span>, Key: <span class="hljs-subst">${key}</span>, score: <span class="hljs-subst">${value.score}</span>`</span>);</li><li>                  });</li><li>                }</li><li>              });</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"missdGroundTruths recall Scores"</span>, rdbdata.<span class="hljs-property">missedGroundTruths</span>[i].<span class="hljs-property">recallScores</span>.<span class="hljs-title function_">toString</span>());</li><li>              <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(rdbdata.<span class="hljs-property">missedGroundTruths</span>[i].<span class="hljs-property">features</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (rdbdata.<span class="hljs-property">missedGroundTruths</span> &amp;&amp; rdbdata.<span class="hljs-property">missedGroundTruths</span>[i]) {</li><li>                  <span class="hljs-keyword">let</span> value = rdbdata.<span class="hljs-property">missedGroundTruths</span>[i].<span class="hljs-property">features</span>[key];</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`missdGroundTruths features Key: <span class="hljs-subst">${key}</span>, Value: <span class="hljs-subst">${value}</span>`</span>);</li><li>                }</li><li>              });</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`missdGroundTruths similarityLevel is <span class="hljs-subst">${rdbdata.missedGroundTruths[i].similarityLevel}</span>`</span>);</li><li>            }</li><li>          }</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"retrieval success."</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err:BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failure in retrieveRdb and code is "</span> + err.<span class="hljs-property">code</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div> <p></p> </div> <div class="tiledSection"><h2 id="section4881955192413" device-type="phone,2in1,tablet">RetrievalCondition<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section4881955192413" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>检索条件。</p> <p><strong>系统能力：</strong>SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.1" width="17.599999999999998%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.2" width="24.43%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.3" width="7.06%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.4" width="6.65%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.5" width="44.26%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="17.599999999999998%"><p>recallConditions</p> </td> <td class="cellrowborder" width="24.43%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section2068311124267">RecallCondition</a>&gt;</p> </td> <td class="cellrowborder" width="7.06%"><p>否</p> </td> <td class="cellrowborder" width="6.65%"><p>否</p> </td> <td class="cellrowborder" width="44.26%"><p>召回的条件，数组中的每个元素对应一个召回操作。</p> </td> </tr> <tr><td class="cellrowborder" width="17.599999999999998%"><p>rerankMethod</p> </td> <td class="cellrowborder" width="24.43%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section17423103217511">RerankMethod</a></p> </td> <td class="cellrowborder" width="7.06%"><p>否</p> </td> <td class="cellrowborder" width="6.65%"><p>是</p> </td> <td class="cellrowborder" width="44.26%"><p>重排方法。其参数rerankType默认值为RRF算法，参数parameters默认值遵循<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section2068311124267">RecallCondition</a>中相应检索回路的参数。</p> </td> </tr> <tr><td class="cellrowborder" width="17.599999999999998%"><p>resultCount</p> </td> <td class="cellrowborder" width="24.43%"><p>number</p> </td> <td class="cellrowborder" width="7.06%"><p>否</p> </td> <td class="cellrowborder" width="6.65%"><p>是</p> </td> <td class="cellrowborder" width="44.26%"><p>重排后允许返回结果的最大数量。默认值为500。必须为正整数。</p> </td> </tr> <tr><td class="cellrowborder" width="17.599999999999998%"><p>explanation</p> </td> <td class="cellrowborder" width="24.43%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section942016410511">ExplanationConfig</a></p> </td> <td class="cellrowborder" width="7.06%"><p>否</p> </td> <td class="cellrowborder" width="6.65%"><p>是</p> </td> <td class="cellrowborder" width="44.26%"><p>检索解释</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section942016410511" device-type="phone,2in1,tablet">ExplanationConfig<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section942016410511" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>检索解释配置</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.1" width="23.119999999999997%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.2" width="23.09%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.4" width="6.4%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.5" width="39.87%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>groundTruths</p> </td> <td class="cellrowborder" width="23.09%"><p>Array&lt;string&gt;</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="6.4%"><p>否</p> </td> <td class="cellrowborder" width="39.87%"><p>待解释的文档id，为字符串类型可取任意值。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section2068311124267" device-type="phone,2in1,tablet">Recallcondition<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2068311124267" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>type RecallCondition = InvertedIndexRecallCondition | VectorRecallCondition</p> <p>召回操作的条件。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.6.1.3.1.1" width="46.94%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.3.1.2" width="53.059999999999995%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="46.94%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section0840134782711">InvertedIndexRecallCondition</a></p> </td> <td class="cellrowborder" width="53.059999999999995%"><p>倒排召回条件。</p> </td> </tr> <tr><td class="cellrowborder" width="46.94%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section570264064815">VectorRecallCondition</a></p> </td> <td class="cellrowborder" width="53.059999999999995%"><p>向量召回条件。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section0840134782711" device-type="phone,2in1,tablet">InvertedIndexRecallCondition<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section0840134782711" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>倒排检索的召回条件。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.1" width="22.78%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.2" width="18.490000000000002%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.3" width="6.1899999999999995%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.4" width="6.17%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.5" width="46.37%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="22.78%"><p>ftsTableName</p> </td> <td class="cellrowborder" width="18.490000000000002%"><p>string</p> </td> <td class="cellrowborder" width="6.1899999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.17%"><p>否</p> </td> <td class="cellrowborder" width="46.37%"><p>倒排检索所用的fts（Full-Text Search）数据表的名称，用于执行bm25函数输入。必须为存在的表名且不能为空字符串。</p> </td> </tr> <tr><td class="cellrowborder" width="22.78%"><p>fromClause</p> </td> <td class="cellrowborder" width="18.490000000000002%"><p>string</p> </td> <td class="cellrowborder" width="6.1899999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.17%"><p>否</p> </td> <td class="cellrowborder" width="46.37%"><p>查询目标索引名。不能为空字符串。</p> <p>fromClause指定的表中包含filters中涉及的所有字段，允许两种输入：</p> <ol><li>和ftsTableName填一样的值，则倒排检索将仅局限在倒排表内进行检索。</li><li>提供完整select...join语句的方式，来连接fts表之外的元素表，作为检索表（注意，使用此模式时，该select语句中必须有rowid字段且必须是fts表的rowid。例如当ftsTableName为“files”时，存在一个元素表metadata需要参与filters过滤，则应如下定义fromClause："SELECT files.rowid as rowid, * FROM metadata JOIN files ON metadata.fileid = files.fileid"。）</li></ol> </td> </tr> <tr><td class="cellrowborder" width="22.78%"><p>primaryKey</p> </td> <td class="cellrowborder" width="18.490000000000002%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>&gt;</p> </td> <td class="cellrowborder" width="6.1899999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.17%"><p>否</p> </td> <td class="cellrowborder" width="46.37%"><p>召回结果主键字段，会作为召回字段之一，作为多路召回文档聚合依据。一次查询中所有召回操作的主键字段数量必须相等且不能为空。</p> </td> </tr> <tr><td class="cellrowborder" width="22.78%"><p>responseColumns</p> </td> <td class="cellrowborder" width="18.490000000000002%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>&gt;</p> </td> <td class="cellrowborder" width="6.1899999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.17%"><p>否</p> </td> <td class="cellrowborder" width="46.37%"><p>需要额外召回的字段集合。Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>&gt;中<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>不得为空。</p> </td> </tr> <tr><td class="cellrowborder" width="22.78%"><p>invertedIndexStrategies</p> </td> <td class="cellrowborder" width="18.490000000000002%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section5878123034110">InvertedIndexStrategy</a>&gt;</p> </td> <td class="cellrowborder" width="6.1899999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.17%"><p>是</p> </td> <td class="cellrowborder" width="46.37%"><p>召回策略列表，决定了倒排表应当如何打分。如果为空，则默认执行全表匹配。</p> </td> </tr> <tr><td class="cellrowborder" width="22.78%"><p>recallName</p> </td> <td class="cellrowborder" width="18.490000000000002%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section191097472303">RecallName</a></p> </td> <td class="cellrowborder" width="6.1899999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.17%"><p>是</p> </td> <td class="cellrowborder" width="46.37%"><p>当前检索回路的名称，作为重排阶段识别依据。默认值为随机字符串。构造方法中可以不构建该参数，如果有这个参数则值不能为空字符串。</p> </td> </tr> <tr><td class="cellrowborder" width="22.78%"><p>filters</p> </td> <td class="cellrowborder" width="18.490000000000002%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section994821153216">FilterInfo</a>&gt;</p> </td> <td class="cellrowborder" width="6.1899999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.17%"><p>是</p> </td> <td class="cellrowborder" width="46.37%"><p>附加的过滤条件。</p> </td> </tr> <tr><td class="cellrowborder" width="22.78%"><p>deepSize</p> </td> <td class="cellrowborder" width="18.490000000000002%"><p>number</p> </td> <td class="cellrowborder" width="6.1899999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.17%"><p>是</p> </td> <td class="cellrowborder" width="46.37%"><p>重排阶段包含当前召回过程的最大结果数。默认值500，必须为正整数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section7132115012719" device-type="phone,2in1,tablet">ColumnName<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7132115012719" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>type ColumnName = string</p> <p>数据表的列名，类型为字符串。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.6.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>string</p> </td> <td class="cellrowborder" width="50%"><p>数据表列名对应的类型，为字符串类型可取任意值。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section191097472303" device-type="phone,2in1,tablet">RecallName<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section191097472303" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>type RecallName = string</p> <p>召回回路名称，类型为字符串，用于给倒排和向量两路召回取名。例如出现两路向量召回时，给两路向量取名做区分。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.6.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>string</p> </td> <td class="cellrowborder" width="50%"><p>召回路径名称对应的类型，类型为字符串，可取任意值。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section994821153216" device-type="phone,2in1,tablet">FilterInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section994821153216" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>过滤器信息。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.1" width="13.86%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.2" width="23.549999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.3" width="7.84%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.4" width="6.88%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.5.1.6.1.5" width="47.870000000000005%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.86%"><p>columns</p> </td> <td class="cellrowborder" width="23.549999999999997%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>&gt;</p> </td> <td class="cellrowborder" width="7.84%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>否</p> </td> <td class="cellrowborder" width="47.870000000000005%"><p>被过滤的列名称。</p> </td> </tr> <tr><td class="cellrowborder" width="13.86%"><p>operator</p> </td> <td class="cellrowborder" width="23.549999999999997%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section145251311409">Operator</a></p> </td> <td class="cellrowborder" width="7.84%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>是</p> </td> <td class="cellrowborder" width="47.870000000000005%"><p>过滤条件中的操作算子。operator和filterValue、operator和filterRange至少有一组同时设置，过滤功能才能生效。</p> </td> </tr> <tr><td class="cellrowborder" width="13.86%"><p>filterValue</p> </td> <td class="cellrowborder" width="23.549999999999997%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section11277358123613">FilterValue</a></p> </td> <td class="cellrowborder" width="7.84%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>是</p> </td> <td class="cellrowborder" width="47.870000000000005%"><p>过滤条件中的过滤值。</p> </td> </tr> <tr><td class="cellrowborder" width="13.86%"><p>filterRange</p> </td> <td class="cellrowborder" width="23.549999999999997%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section1283752213396">FilterRange</a></p> </td> <td class="cellrowborder" width="7.84%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>是</p> </td> <td class="cellrowborder" width="47.870000000000005%"><p>过滤条件中的过滤范围。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section11277358123613" device-type="phone,2in1,tablet">FilterValue<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11277358123613" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>type FilterValue = number | string | bigint</p> <p>过滤条件中的过滤值。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.1" width="44.95%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.2" width="55.05%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="44.95%"><p>number</p> </td> <td class="cellrowborder" width="55.05%"><p>FilterValue 收到的类型为number则过滤条件为数字类型</p> </td> </tr> <tr><td class="cellrowborder" width="44.95%"><p>string</p> </td> <td class="cellrowborder" width="55.05%"><p>FilterValue 收到的类型为string则过滤条件为字符串类型</p> </td> </tr> <tr><td class="cellrowborder" width="44.95%"><p>bigint</p> </td> <td class="cellrowborder" width="55.05%"><p>FilterValue 收到的类型为bigint则过滤条件为int64类型</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1283752213396" device-type="phone,2in1,tablet">FilterRange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1283752213396" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>过滤条件中的过滤值范围。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.5.1.5.1.1" width="25%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.5.1.2" width="14.860000000000001%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.5.1.3" width="9.139999999999999%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.5.1.4" width="51%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>max</p> </td> <td class="cellrowborder" width="14.860000000000001%"><p>number</p> </td> <td class="cellrowborder" width="9.139999999999999%"><p>是</p> </td> <td class="cellrowborder" width="51%"><p>最大过滤值。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>min</p> </td> <td class="cellrowborder" width="14.860000000000001%"><p>number</p> </td> <td class="cellrowborder" width="9.139999999999999%"><p>是</p> </td> <td class="cellrowborder" width="51%"><p>最小过滤值，取值需小于最大过滤值。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section145251311409" device-type="phone,2in1,tablet">Operator<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section145251311409" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>过滤条件中的操作算子。column为数据库表中的字段名，filterValue为该字段的取值。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.5.1.3.1.1" width="28.32%"><p>操作</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.3.1.2" width="71.67999999999999%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="28.32%"><p>OP_EQ = '='</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>&lt;column&gt;等于&lt;filterValue&gt;。</p> </td> </tr> <tr><td class="cellrowborder" width="28.32%"><p>OP_NE = '!='</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>&lt;column&gt;不等于&lt;filterValue&gt;。</p> </td> </tr> <tr><td class="cellrowborder" width="28.32%"><p>OP_LT = '&lt;'</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>&lt;column&gt;小于&lt;filterValue&gt;，其中&lt;filterValue&gt;为数值。</p> </td> </tr> <tr><td class="cellrowborder" width="28.32%"><p>OP_LE = '&lt;='</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>&lt;column&gt;小于等于&lt;filterValue&gt;，其中&lt;filterValue&gt;为数值。</p> </td> </tr> <tr><td class="cellrowborder" width="28.32%"><p>OP_GT = '&gt;'</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>&lt;column&gt;大于&lt;filterValue&gt;，其中&lt;filterValue&gt;为数值。</p> </td> </tr> <tr><td class="cellrowborder" width="28.32%"><p>OP_GE = '&gt;='</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>&lt;column&gt;大于等于&lt;filterValue&gt;，其中&lt;filterValue&gt;为数值。</p> </td> </tr> <tr><td class="cellrowborder" width="28.32%"><p>OP_IN = 'IN'</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>&lt;column&gt; IN &lt;filterValue&gt;，其中&lt;filterValue&gt;为string且通过','组合。</p> </td> </tr> <tr><td class="cellrowborder" width="28.32%"><p>OP_NOT_IN = 'NOT_IN'</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>&lt;column&gt; NOT IN &lt;filterValue&gt;，其中&lt;filterValue&gt;为string且通过','拼接。</p> </td> </tr> <tr><td class="cellrowborder" width="28.32%"><p>OP_BETWEEN = 'BETWEEN'</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>&lt;column&gt;的值在 &lt;filterRange.min&gt; 和 &lt;filterRange.max&gt;之间。</p> </td> </tr> <tr><td class="cellrowborder" width="28.32%"><p>OP_LIKE = 'LIKE'</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>通过LIKE匹配含有&lt;filterValue&gt;的&lt;column&gt; ,其中&lt;filterValue&gt;为string。</p> </td> </tr> <tr><td class="cellrowborder" width="28.32%"><p>OP_NOT_LIKE = 'NOT_LIKE'</p> </td> <td class="cellrowborder" width="71.67999999999999%"><p>&lt;column&gt; NOT LIKE &lt;filterValue&gt;，其中&lt;filterValue&gt;为string。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section5878123034110" device-type="phone,2in1,tablet">InvertedIndexStrategy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5878123034110" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>type InvertedIndexStrategy = Bm25Strategy | ExactMatchingStrategy | ProximityStrategy</p> <p>倒排召回策略。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.6.1.3.1.1" width="29.849999999999998%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.3.1.2" width="70.15%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="29.849999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section8677153210421">Bm25Strategy</a></p> </td> <td class="cellrowborder" width="70.15%"><p>部分命中策略，检索目标只要命中查询词中的80%核心词就可以被召回，召回结果基于bm25算法进行评分，适用于对检索目标匹配要求较宽松的场景。</p> </td> </tr> <tr><td class="cellrowborder" width="29.849999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section337414149441">ExactMatchingStrategy</a></p> </td> <td class="cellrowborder" width="70.15%"><p>精确命中策略，要求检索目标和查询词完全匹配才能被召回，适用于对检索目标匹配要求较严格的场景。</p> </td> </tr> <tr><td class="cellrowborder" width="29.849999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section661392414468">ProximityStrategy</a></p> </td> <td class="cellrowborder" width="70.15%"><p>乱序命中策略，查询词的分词结果在检索目标中不必严格按照原本顺序出现，各个分词结果在指定间隔内都出现即可召回，适用于对检索目标匹配要求中等的场景。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section8677153210421" device-type="phone,2in1,tablet">Bm25Strategy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section8677153210421" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>倒排检索所用的bm25策略。</p> <p><strong>系统能力：</strong>SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.1" width="15.340000000000002%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.2" width="17.45%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.3" width="7.07%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.4" width="6.41%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.5" width="53.73%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15.340000000000002%"><p>bm25Weight</p> </td> <td class="cellrowborder" width="17.45%"><p>number</p> </td> <td class="cellrowborder" width="7.07%"><p>否</p> </td> <td class="cellrowborder" width="6.41%"><p>否</p> </td> <td class="cellrowborder" width="53.73%"><p>bm25策略的打分权重，在多种倒排策略并存的情况下，控制该策略对最终召回结果的评分影响程度。</p> </td> </tr> <tr><td class="cellrowborder" width="15.340000000000002%"><p>columnWeight</p> </td> <td class="cellrowborder" width="17.45%"><p>Record&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>, number&gt;</p> </td> <td class="cellrowborder" width="7.07%"><p>否</p> </td> <td class="cellrowborder" width="6.41%"><p>是</p> </td> <td class="cellrowborder" width="53.73%"><p>指定该策略运用于倒排表的哪些字段，以及这些字段对应的权重（用于控制字段匹配情况对最终结果的影响程度）</p> <p>如果字段为空，则默认该策略运用于倒排表的全部字段，会默认增加1个配置，字段名为倒排表名，权重值为1.0。</p> <p>如果不为空，则字段名不为空字符串，权重值为非负数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section337414149441" device-type="phone,2in1,tablet">ExactMatchingStrategy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section337414149441" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>倒排检索所用的精确场景匹配策略。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.1" width="21.22%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.2" width="13.389999999999999%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.3" width="7.02%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.4" width="6.76%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.5" width="51.61%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.22%"><p>exactMatchingWeight</p> </td> <td class="cellrowborder" width="13.389999999999999%"><p>number</p> </td> <td class="cellrowborder" width="7.02%"><p>否</p> </td> <td class="cellrowborder" width="6.76%"><p>否</p> </td> <td class="cellrowborder" width="51.61%"><p>精确场景匹配策略的打分权重，在多种倒排策略并存的情况下，控制该策略对最终召回结果的评分影响程度。</p> </td> </tr> <tr><td class="cellrowborder" width="21.22%"><p>columnWeight</p> </td> <td class="cellrowborder" width="13.389999999999999%"><p>Record&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>, number&gt;</p> </td> <td class="cellrowborder" width="7.02%"><p>否</p> </td> <td class="cellrowborder" width="6.76%"><p>是</p> </td> <td class="cellrowborder" width="51.61%"><p>指定该策略运用于倒排表的哪些字段，以及这些字段对应的权重（用于控制字段匹配情况对最终结果的影响程度）</p> <p>如果字段为空，则默认该策略运用于倒排表的全部字段，会默认增加1个配置，字段名为倒排表名，权重值为1.0。</p> <p>如果不为空，则字段名不为空字符串，权重值为非负数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section661392414468" device-type="phone,2in1,tablet">ProximityStrategy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section661392414468" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>倒排检索所用的乱序匹配策略。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.1" width="18.6%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.2" width="18.33%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.3" width="6.569999999999999%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.4" width="6.140000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.5" width="50.36000000000001%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18.6%"><p>proximityWeight</p> </td> <td class="cellrowborder" width="18.33%"><p>number</p> </td> <td class="cellrowborder" width="6.569999999999999%"><p>否</p> </td> <td class="cellrowborder" width="6.140000000000001%"><p>否</p> </td> <td class="cellrowborder" width="50.36000000000001%"><p>乱序匹配策略的打分权重，在多种倒排策略并存的情况下，控制该策略对最终召回结果的评分影响程度。</p> </td> </tr> <tr><td class="cellrowborder" width="18.6%"><p>columnWeight</p> </td> <td class="cellrowborder" width="18.33%"><p>Record&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>, number&gt;</p> </td> <td class="cellrowborder" width="6.569999999999999%"><p>否</p> </td> <td class="cellrowborder" width="6.140000000000001%"><p>是</p> </td> <td class="cellrowborder" width="50.36000000000001%"><p>指定该策略运用于倒排表的哪些字段，以及这些字段对应的权重（用于控制字段匹配情况对最终结果的影响程度）</p> <p>如果字段为空，则默认该策略运用于倒排表的全部字段，会默认增加1个配置，字段名为倒排表名，权重值为1.0。</p> <p>如果不为空，则字段名不为空字符串，权重值为非负数。</p> </td> </tr> <tr><td class="cellrowborder" width="18.6%"><p>columnSlops</p> </td> <td class="cellrowborder" width="18.33%"><p>Record&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>, number&gt;</p> </td> <td class="cellrowborder" width="6.569999999999999%"><p>否</p> </td> <td class="cellrowborder" width="6.140000000000001%"><p>是</p> </td> <td class="cellrowborder" width="50.36000000000001%"><p>每个字段使用的偏移量配置。字段名的默认值是与columnWeight相同的字段名，值为10。字段不能为空，对应值必须为非负数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section570264064815" device-type="phone,2in1,tablet">VectorRecallCondition<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section570264064815" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>向量检索的召回条件。</p> <p><strong>系统能力：</strong>SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.1" width="14.979999999999999%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.2" width="22%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.3" width="6.4799999999999995%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.4" width="6.88%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.5" width="49.66%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.979999999999999%"><p>vectorQuery</p> </td> <td class="cellrowborder" width="22%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section4902165514919">VectorQuery</a></p> </td> <td class="cellrowborder" width="6.4799999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>否</p> </td> <td class="cellrowborder" width="49.66%"><p>用于向量检索的查询词向量。</p> </td> </tr> <tr><td class="cellrowborder" width="14.979999999999999%"><p>fromClause</p> </td> <td class="cellrowborder" width="22%"><p>string</p> </td> <td class="cellrowborder" width="6.4799999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>否</p> </td> <td class="cellrowborder" width="49.66%"><p>用于指定向量数据表的名称。</p> </td> </tr> <tr><td class="cellrowborder" width="14.979999999999999%"><p>primaryKey</p> </td> <td class="cellrowborder" width="22%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>&gt;</p> </td> <td class="cellrowborder" width="6.4799999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>否</p> </td> <td class="cellrowborder" width="49.66%"><p>召回结果主键字段，会作为召回字段之一，作为多路召回文档聚合依据。一次查询中所有召回操作的主键字段数量必须相等且不能为空。</p> </td> </tr> <tr><td class="cellrowborder" width="14.979999999999999%"><p>responseColumns</p> </td> <td class="cellrowborder" width="22%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>&gt;</p> </td> <td class="cellrowborder" width="6.4799999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>否</p> </td> <td class="cellrowborder" width="49.66%"><p>需要额外召回的字段集合。ColumnName不得为空。</p> </td> </tr> <tr><td class="cellrowborder" width="14.979999999999999%"><p>recallName</p> </td> <td class="cellrowborder" width="22%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section191097472303">RecallName</a></p> </td> <td class="cellrowborder" width="6.4799999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>是</p> </td> <td class="cellrowborder" width="49.66%"><p>当前检索回路的名称，作为重排阶段识别依据。默认值为随机字符串，不能为空字符串</p> </td> </tr> <tr><td class="cellrowborder" width="14.979999999999999%"><p>filters</p> </td> <td class="cellrowborder" width="22%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section994821153216">FilterInfo</a>&gt;</p> </td> <td class="cellrowborder" width="6.4799999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>是</p> </td> <td class="cellrowborder" width="49.66%"><p>额外的过滤条件。</p> </td> </tr> <tr><td class="cellrowborder" width="14.979999999999999%"><p>deepSize</p> </td> <td class="cellrowborder" width="22%"><p>number</p> </td> <td class="cellrowborder" width="6.4799999999999995%"><p>否</p> </td> <td class="cellrowborder" width="6.88%"><p>是</p> </td> <td class="cellrowborder" width="49.66%"><p>当前召回过程给重排阶段返回的最大结果数。默认值500，必须为正整数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section4902165514919" device-type="phone,2in1,tablet">VectorQuery<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section4902165514919" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>根据查询词生成的向量。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.1" width="20.220000000000002%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.2" width="14.990000000000004%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.3" width="6.050000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.4" width="5.870000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.5" width="52.870000000000005%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.220000000000002%"><p>column</p> </td> <td class="cellrowborder" width="14.990000000000004%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a></p> </td> <td class="cellrowborder" width="6.050000000000001%"><p>否</p> </td> <td class="cellrowborder" width="5.870000000000001%"><p>否</p> </td> <td class="cellrowborder" width="52.870000000000005%"><p>待匹配向量字段名。必须为指定的向量数据库中存在的向量类型字段。</p> </td> </tr> <tr><td class="cellrowborder" width="20.220000000000002%"><p>value</p> </td> <td class="cellrowborder" width="14.990000000000004%"><p>Float32Array</p> </td> <td class="cellrowborder" width="6.050000000000001%"><p>否</p> </td> <td class="cellrowborder" width="5.870000000000001%"><p>是</p> </td> <td class="cellrowborder" width="52.870000000000005%"><p>向量列的向量值。</p> <p>如果未定义value字段，系统将尝试将原始query生成向量。目前在PC上支持自动生成。</p> <p>从HarmonyOS 6.0.0 Beta2版本开始，此参数由“必填”变更为“可选”。</p> </td> </tr> <tr><td class="cellrowborder" width="20.220000000000002%"><p>similarityThreshold</p> </td> <td class="cellrowborder" width="14.990000000000004%"><p>number</p> </td> <td class="cellrowborder" width="6.050000000000001%"><p>否</p> </td> <td class="cellrowborder" width="5.870000000000001%"><p>是</p> </td> <td class="cellrowborder" width="52.870000000000005%"><p>向量阈值，用于过滤不相似向量的阈值。默认值为1，取值范围最小值为0，最大值为<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section2019282155815">VectorRerankParameter</a>中有效thresholds的最小值。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section17423103217511" device-type="phone,2in1,tablet">RerankMethod<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17423103217511" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>重排策略的参数。</p> <p><strong>系统能力：</strong>SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.1" width="20.94%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.2" width="22.52%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.3" width="7.17%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.4" width="6.619999999999999%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.5" width="42.75%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.94%"><p>rerankType</p> </td> <td class="cellrowborder" width="22.52%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7916104025215">RerankType</a></p> </td> <td class="cellrowborder" width="7.17%"><p>否</p> </td> <td class="cellrowborder" width="6.619999999999999%"><p>否</p> </td> <td class="cellrowborder" width="42.75%"><p>重排算法，取值类型为枚举类<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7916104025215">RerankType</a>，可选项为RRF、FUSION_SCORE，分别指向rrf排序算法以及分数融合排序算法。默认值为RRF。</p> </td> </tr> <tr><td class="cellrowborder" width="20.94%"><p>parameters</p> </td> <td class="cellrowborder" width="22.52%"><p>Record&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section15391712641">ChannelType</a>, <a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section16017065412">RerankParameter</a>&gt;</p> </td> <td class="cellrowborder" width="7.17%"><p>否</p> </td> <td class="cellrowborder" width="6.619999999999999%"><p>是</p> </td> <td class="cellrowborder" width="42.75%"><p>每个召回回路对应的重排参数。如果上述检索参数RetrievalCondition中的存在的channelType未在parameters中配置重排参数，则会自动填充该channelType对应的重排参数默认值。倒排的重排参数默认值参考<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7927313135618">InvertedIndexRerankParameter</a>，向量的重排参数默认值参考<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section2019282155815">VectorRerankParameter</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="20.94%"><p>isSoftmaxNormalized</p> </td> <td class="cellrowborder" width="22.52%"><p>boolean</p> </td> <td class="cellrowborder" width="7.17%"><p>否</p> </td> <td class="cellrowborder" width="6.619999999999999%"><p>是</p> </td> <td class="cellrowborder" width="42.75%"><p>FUSION_SCORE模式下，是否使用softmax函数归一化计算重排最终得分。默认为false。true表示使用softmax函数归一化计算重排最终得分，false表示不使用。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section7916104025215" device-type="phone,2in1,tablet">RerankType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7916104025215" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>重排算法的类型。</p> <p><strong>系统能力：</strong>SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.5.1.4.1.1" width="21.656565656565657%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.5.1.4.1.2" width="9.84848484848485%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.28.5.1.4.1.3" width="68.4949494949495%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.656565656565657%"><p>RRF</p> </td> <td class="cellrowborder" width="9.84848484848485%"><p>0</p> </td> <td class="cellrowborder" width="68.4949494949495%"><p>Reciprocal Rank Fusion(RRF)方法。根据各路召回位置信息进行分档排序。</p> <p>适用场景：对结果多样性要求较高的场景，希望每路结果平等输出。</p> </td> </tr> <tr><td class="cellrowborder" width="21.656565656565657%"><p>FUSION_SCORE</p> </td> <td class="cellrowborder" width="9.84848484848485%"><p>1</p> </td> <td class="cellrowborder" width="68.4949494949495%"><p>基于得分的召回融合方法。根据各路相关性分数进行分档排序。适用场景：对相关性准确性要求高、召回分数可靠且注重结果的排序稳定性的场景。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section16017065412" device-type="phone,2in1,tablet">RerankParameter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16017065412" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>type RerankParameter = InvertedIndexRerankParameter| VectorRerankParameter</p> <p>重排算法的参数配置。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.6.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7927313135618">InvertedIndexRerankParameter</a></p> </td> <td class="cellrowborder" width="50%"><p>重排参数为InvertedIndexRerankParameter。</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section2019282155815">VectorRerankParameter</a></p> </td> <td class="cellrowborder" width="50%"><p>重排参数为VectorRerankParameter。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section7927313135618" device-type="phone,2in1,tablet">InvertedIndexRerankParameter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7927313135618" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>用于倒排索引的重排算法的参数。</p> <p><strong>系统能力：</strong>SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.5.1.6.1.1" width="21.82%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.6.1.2" width="20.02%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.6.1.3" width="7.04%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.6.1.4" width="5.88%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.30.5.1.6.1.5" width="45.24%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="21.82%"><p>invertedIndexWeights</p> </td> <td class="cellrowborder" width="20.02%"><p>Record&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section191097472303">RecallName</a>, number&gt;</p> </td> <td class="cellrowborder" width="7.04%"><p>否</p> </td> <td class="cellrowborder" width="5.88%"><p>否</p> </td> <td class="cellrowborder" width="45.24%"><p>每路召回的重排权重，体现各路召回在重排过程中的重要性。key为各路召回RecallCondition的<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section191097472303">RecallName</a>，value为对应那一路召回的权重。</p> <p>权重值必须为非负数。如果未定义某一路召回的权重，则默认值为1。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section2019282155815" device-type="phone,2in1,tablet">VectorRerankParameter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2019282155815" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>用于向量数据的重排算法的参数。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.5.1.6.1.1" width="17.16%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.5.1.6.1.2" width="16.27%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.5.1.6.1.3" width="6.69%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.5.1.6.1.4" width="6.64%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.31.5.1.6.1.5" width="53.239999999999995%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="17.16%"><p>vectorWeights</p> </td> <td class="cellrowborder" width="16.27%"><p>Record&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section191097472303">RecallName</a>, number&gt;</p> </td> <td class="cellrowborder" width="6.69%"><p>否</p> </td> <td class="cellrowborder" width="6.64%"><p>否</p> </td> <td class="cellrowborder" width="53.239999999999995%"><p>每路召回的重排权重，体现各路召回在重排过程中的重要性。key为各路召回RecallCondition的<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section191097472303">RecallName</a>，value为对应那一路召回的权重。权重值必须为非负数。如果未定义某一路召回的权重，则默认值为1。</p> </td> </tr> <tr><td class="cellrowborder" width="17.16%"><p>thresholds</p> </td> <td class="cellrowborder" width="16.27%"><p>Array&lt;number&gt;</p> </td> <td class="cellrowborder" width="6.69%"><p>否</p> </td> <td class="cellrowborder" width="6.64%"><p>是</p> </td> <td class="cellrowborder" width="53.239999999999995%"><p>向量召回的分档阈值，用户应当从[0, 1]范围内给3个值，高、中、低档最低分，赋值对应cosine()相似度得分，越高越相关；</p> <p>如果是2个值，则分出高、中两档，剩下结果都是低档；</p> <p>如果是1个值，则除了高档剩下结果都是低档。</p> <p>当给出多于3个值，则使用从大到小排序后前3个数值，后面忽略。如果未定义，默认值为[0.6, 0.45, 0.4]。</p> </td> </tr> <tr><td class="cellrowborder" width="17.16%"><p>numberInspector</p> </td> <td class="cellrowborder" width="16.27%"><p>Record&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section191097472303">RecallName</a>, <a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7132115012719">ColumnName</a>&gt;</p> </td> <td class="cellrowborder" width="6.69%"><p>否</p> </td> <td class="cellrowborder" width="6.64%"><p>是</p> </td> <td class="cellrowborder" width="53.239999999999995%"><p>向量召回数字匹配降档策略配置，如果查询中存在数字，但是对应目标字段中的数字和查询数字不匹配，则将该检索结果的相关性降低。key为对应向量召回条件中的<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section191097472303">RecallName</a>，value为对应模式匹配字段名。默认值为空。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section7831184215917" device-type="phone,2in1,tablet">RdbRecords<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7831184215917" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>检索结果。</p> <p><strong>系统能力：</strong>SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.5.1.6.1.1" width="23.12%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.6.1.2" width="23.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.6.1.3" width="7.520000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.6.1.4" width="23.12%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.6.1.5" width="23.12%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.12%"><p>records</p> </td> <td class="cellrowborder" width="23.12%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section17768581101">ItemInfo</a>&gt;</p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>检索结果</p> </td> </tr> <tr><td class="cellrowborder" width="23.12%"><p>missedGroundTruths</p> </td> <td class="cellrowborder" width="23.12%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section17768581101">ItemInfo</a>&gt;</p> </td> <td class="cellrowborder" width="7.520000000000001%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>是</p> </td> <td class="cellrowborder" width="23.12%"><p>未检索到指定文档的信息</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section17768581101" device-type="phone,2in1,tablet">ItemInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17768581101" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>检索结果中每条数据的特定内容。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.33.5.1.6.1.1" width="14.01%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.5.1.6.1.2" width="26.340000000000003%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.5.1.6.1.3" width="6.140000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.5.1.6.1.4" width="6.329999999999999%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.33.5.1.6.1.5" width="47.18%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.01%"><p>primaryKey</p> </td> <td class="cellrowborder" width="26.340000000000003%"><p>string</p> </td> <td class="cellrowborder" width="6.140000000000001%"><p>否</p> </td> <td class="cellrowborder" width="6.329999999999999%"><p>否</p> </td> <td class="cellrowborder" width="47.18%"><p>检索结果的主键。</p> </td> </tr> <tr><td class="cellrowborder" width="14.01%"><p>columns</p> </td> <td class="cellrowborder" width="26.340000000000003%"><p>Record&lt;string, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-t#valuetype" target="_blank">relationalStore.ValueType</a>&gt;</p> </td> <td class="cellrowborder" width="6.140000000000001%"><p>否</p> </td> <td class="cellrowborder" width="6.329999999999999%"><p>否</p> </td> <td class="cellrowborder" width="47.18%"><p>召回列及其内容。</p> </td> </tr> <tr><td class="cellrowborder" width="14.01%"><p>score</p> </td> <td class="cellrowborder" width="26.340000000000003%"><p>number</p> </td> <td class="cellrowborder" width="6.140000000000001%"><p>否</p> </td> <td class="cellrowborder" width="6.329999999999999%"><p>否</p> </td> <td class="cellrowborder" width="47.18%"><p>检索重排后的最终得分，其反映了重排记录与查询词之间的相似度。score取值大于等于0。</p> </td> </tr> <tr><td class="cellrowborder" width="14.01%"><p>recallScores</p> </td> <td class="cellrowborder" width="26.340000000000003%"><p>Record&lt;<a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section15391712641">ChannelType</a>, Record&lt;string, <a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section646415415210">RecallScore</a>&gt;&gt;</p> </td> <td class="cellrowborder" width="6.140000000000001%"><p>否</p> </td> <td class="cellrowborder" width="6.329999999999999%"><p>否</p> </td> <td class="cellrowborder" width="47.18%"><p>每路召回的得分，其反映了每路召回对该结果的相关性评估。key为该路RecallCondition的scoreKey；</p> <ul><li>如果这里没有体现RetrievalCondition中的某一路RecallCondition的scoreKey，则代表该路召回认为该结果相关性过低不予召回。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="14.01%"><p>features</p> </td> <td class="cellrowborder" width="26.340000000000003%"><p>Record&lt;string, number&gt;</p> </td> <td class="cellrowborder" width="6.140000000000001%"><p>否</p> </td> <td class="cellrowborder" width="6.329999999999999%"><p>否</p> </td> <td class="cellrowborder" width="47.18%"><p>不同倒排策略的得分。目前支持的倒排策略及得分为：</p> <ul><li>"exact_phase"：文档字段精确命中查询语句的得分。</li><li>"out_of_order_phase"：文档字段命中近似乱序匹配策略的得分。</li><li>"token_bm25"：文档字段bm25策略得分。</li><li>"core_count"：文档单个匹配字段内核心词总数。用于控制三种策略内部的定档逻辑，表示文本匹配程度。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="14.01%"><p>similarityLevel</p> </td> <td class="cellrowborder" width="26.340000000000003%"><p><a href="/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section336811595811">SimilarityLevel</a></p> </td> <td class="cellrowborder" width="6.140000000000001%"><p>否</p> </td> <td class="cellrowborder" width="6.329999999999999%"><p>否</p> </td> <td class="cellrowborder" width="47.18%"><p>根据语义向量距离以及文本匹配程度，对检索结果按照相关性分档，方便对结果进行进一步筛选并且过滤。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section646415415210" device-type="phone,2in1,tablet">RecallScore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section646415415210" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>召回过程的得分。</p> <p><strong>系统能力：</strong>SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.34.5.1.6.1.1" width="23.119999999999997%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.5.1.6.1.2" width="23.119999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.5.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.5.1.6.1.4" width="7.249999999999999%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.34.5.1.6.1.5" width="38.99%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>score</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.249999999999999%"><p>否</p> </td> <td class="cellrowborder" width="38.99%"><p>召回得分。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>isReverseQuery</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>boolean</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="7.249999999999999%"><p>否</p> </td> <td class="cellrowborder" width="38.99%"><p>表示得分是否来自反查过程。true表示来自反查过程，false表示来自原始召回过程。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section336811595811" device-type="phone,2in1,tablet">SimilarityLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section336811595811" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>根据语义向量距离以及文本匹配程度，对检索结果按照相关性的高中低分档，方便对结果进行进一步筛选并且过滤。</p> <p><strong>系统能力：</strong> SystemCapability.DataAugmentation.Retrieval</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.35.5.1.4.1.1" width="31.686868686868685%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.4.1.2" width="31.28282828282828%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.35.5.1.4.1.3" width="37.03030303030303%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="31.686868686868685%"><p>NONE</p> </td> <td class="cellrowborder" width="31.28282828282828%"><p>0</p> </td> <td class="cellrowborder" width="37.03030303030303%"><p>保留值，暂无特定含义。</p> </td> </tr> <tr><td class="cellrowborder" width="31.686868686868685%"><p>LOW</p> </td> <td class="cellrowborder" width="31.28282828282828%"><p>1</p> </td> <td class="cellrowborder" width="37.03030303030303%"><p>结果和Query的语义向量距离小，表示语义更相似。</p> </td> </tr> <tr><td class="cellrowborder" width="31.686868686868685%"><p>MEDIUM</p> </td> <td class="cellrowborder" width="31.28282828282828%"><p>2</p> </td> <td class="cellrowborder" width="37.03030303030303%"><p>结果和Query的语义向量距离中等，表示语义相似性中等。</p> </td> </tr> <tr><td class="cellrowborder" width="31.686868686868685%"><p>HIGH</p> </td> <td class="cellrowborder" width="31.28282828282828%"><p>3</p> </td> <td class="cellrowborder" width="37.03030303030303%"><p>结果和Query的语义向量距离大，表示语义差异较大，相关性低。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>