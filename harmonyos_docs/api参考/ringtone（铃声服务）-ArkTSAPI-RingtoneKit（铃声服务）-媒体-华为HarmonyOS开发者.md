<h1 _ngcontent-ffa-c119="" class="doc-title ng-star-inserted" title="ringtone（铃声服务）"> ringtone（铃声服务） </h1>

<div _ngcontent-ffa-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>ringtone提供铃声设置的功能。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section82301618122011" device-type="phone,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section82301618122011" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><div _ngcontent-ffa-c106="" class="highlight-div"><div _ngcontent-ffa-c106="" class="highlight-div-header"><div _ngcontent-ffa-c106="" class="highlight-div-header-left"><div _ngcontent-ffa-c106="" class="handle-button expand-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffa-c106="" class="highlight-div-header-right"><div _ngcontent-ffa-c106="" class="handle-button ai-button"></div><div _ngcontent-ffa-c106="" class="handle-button line-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffa-c106="" class="handle-button theme-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffa-c106="" class="handle-button copy-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { ringtone } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RingtoneKit'</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section18108304244" device-type="phone,tablet">RingtoneType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18108304244" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>描述铃声的类型枚举。</p> <p>系统能力：SystemCapability.Ringtone.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.1" width="33.33333333333333%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.2" width="33.33333333333333%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.3" width="33.33333333333333%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><p>CALL</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>0</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>来电铃声。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>MESSAGE</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>1</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>信息铃声。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>NOTIFICATION</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>2</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>通知铃声。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>ALARM</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>3</p> </td> <td class="cellrowborder" width="33.33333333333333%"><p>闹钟铃声。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1246319818201" device-type="phone,tablet">RingtoneErrors<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1246319818201" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>该枚举为设置铃声，获取铃声支持类型和获取铃声支持文件类型等接口的错误码。</p> <p><strong>系统能力：</strong>SystemCapability.Ringtone.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.1" width="38.7%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.2" width="28.49%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.3" width="32.81%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="38.7%"><p>ERROR_INVALID_PARAM</p> </td> <td class="cellrowborder" width="28.49%"><p>401</p> </td> <td class="cellrowborder" width="32.81%"><p>参数非法。</p> </td> </tr> <tr><td class="cellrowborder" width="38.7%"><p>ERROR_USER_CANCELED</p> </td> <td class="cellrowborder" width="28.49%"><p>1011600001</p> </td> <td class="cellrowborder" width="32.81%"><p>用户取消。</p> </td> </tr> <tr><td class="cellrowborder" width="38.7%"><p>ERROR_FILE_NOT_FOUND</p> </td> <td class="cellrowborder" width="28.49%"><p>1011600002</p> </td> <td class="cellrowborder" width="32.81%"><p>文件不存在。</p> </td> </tr> <tr><td class="cellrowborder" width="38.7%"><p>ERROR_SHOW_FAILED</p> </td> <td class="cellrowborder" width="28.49%"><p>1011600003</p> </td> <td class="cellrowborder" width="32.81%"><p>铃声弹框失败。</p> </td> </tr> <tr><td class="cellrowborder" width="38.7%"><p>ERROR_CALL_SYSTEM_API_FAILED</p> </td> <td class="cellrowborder" width="28.49%"><p>1011600004</p> </td> <td class="cellrowborder" width="32.81%"><p>调用系统接口失败。</p> </td> </tr> <tr><td class="cellrowborder" width="38.7%"><p>ERROR_SYSTEM</p> </td> <td class="cellrowborder" width="28.49%"><p>1011699999</p> </td> <td class="cellrowborder" width="32.81%"><p>系统内部错误。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section81796536265" device-type="phone,tablet">ringtone.getSupportedRingtoneTypes<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section81796536265" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>getSupportedRingtoneTypes(): Array&lt;RingtoneType&gt;</p> <p>查询当前系统支持自定义的铃声类型。</p> <p><strong>系统能力：</strong>SystemCapability.Ringtone.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.1" width="32.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.2" width="67.84%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.16%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/ringtone-ringtone#section18108304244">RingtoneType</a>&gt;</p> </td> <td class="cellrowborder" width="67.84%"><p>当前系统支持自定义的铃声类型。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ffa-c106="" class="highlight-div"><div _ngcontent-ffa-c106="" class="highlight-div-header"><div _ngcontent-ffa-c106="" class="highlight-div-header-left"><div _ngcontent-ffa-c106="" class="handle-button expand-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffa-c106="" class="highlight-div-header-right"><div _ngcontent-ffa-c106="" class="handle-button ai-button"></div><div _ngcontent-ffa-c106="" class="handle-button line-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffa-c106="" class="handle-button theme-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffa-c106="" class="handle-button copy-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { ringtone } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RingtoneKit'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">APP_TAG</span> = <span class="hljs-string">"Msc_Demo"</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DOMAIN</span> = <span class="hljs-number">0x0001</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"查询当前系统支持自定义的铃声类型"</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">typeList</span>: <span class="hljs-title class_">Array</span>&lt;ringtone.<span class="hljs-property">RingtoneType</span>&gt; = ringtone.<span class="hljs-title function_">getSupportedRingtoneTypes</span>()</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>, <span class="hljs-string">'getSupportedRingtoneTypes : '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(typeList));</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1858041418291" device-type="phone,tablet">ringtone.getSupportedDataTypes<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1858041418291" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>getSupportedDataTypes(ringtoneType: RingtoneType): Array&lt;uniformTypeDescriptor.UniformDataType&gt;</p> <p>查询对应铃声类型支持的文件类型。</p> <p><strong>系统能力</strong>：SystemCapability.Ringtone.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>ringtoneType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/ringtone-ringtone#section18108304244">RingtoneType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>待查询的铃声类型。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="43.39%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="56.61000000000001%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="43.39%"><p>Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-uniformtypedescriptor#uniformdatatype" target="_blank">uniformTypeDescriptor.UniformDataType</a>&gt;</p> </td> <td class="cellrowborder" width="56.61000000000001%"><p>返回对应铃声类型支持的文件类型。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见铃声服务<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ringtone-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p>401</p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter invalid.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ffa-c106="" class="highlight-div"><div _ngcontent-ffa-c106="" class="highlight-div-header"><div _ngcontent-ffa-c106="" class="highlight-div-header-left"><div _ngcontent-ffa-c106="" class="handle-button expand-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffa-c106="" class="highlight-div-header-right"><div _ngcontent-ffa-c106="" class="handle-button ai-button"></div><div _ngcontent-ffa-c106="" class="handle-button line-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffa-c106="" class="handle-button theme-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffa-c106="" class="handle-button copy-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { ringtone } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RingtoneKit'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { uniformTypeDescriptor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">APP_TAG</span> = <span class="hljs-string">"Msc_Demo"</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DOMAIN</span> = <span class="hljs-number">0x0001</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"查询支持的文件类型"</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">typeList</span>: <span class="hljs-title class_">Array</span>&lt;uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>&gt; =</li><li>                ringtone.<span class="hljs-title function_">getSupportedDataTypes</span>(ringtone.<span class="hljs-property">RingtoneType</span>.<span class="hljs-property">NOTIFICATION</span>)</li><li>              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>, <span class="hljs-string">'getSupportedDataTypes3----- : '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(typeList));</li><li>            } <span class="hljs-keyword">catch</span> (error) {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>,</li><li>                <span class="hljs-string">'getSupportedDataType error message: '</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">', error code: '</span> + err.<span class="hljs-property">code</span>);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section759192934316" device-type="phone,tablet">ringtone.getSupportedMaxDuration<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section759192934316" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>getSupportedMaxDuration(ringtoneType: RingtoneType, dataType: uniformTypeDescriptor.UniformDataType): number</p> <p>查询对应铃声类型以及文件类型支持的时长。</p> <p><strong>系统能力</strong>：SystemCapability.Ringtone.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.6.2.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.2.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.2.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.2.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>ringtoneType</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/ringtone-ringtone#section18108304244">RingtoneType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>待查询的铃声类型。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>dataType</p> </td> <td class="cellrowborder" width="25%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-uniformtypedescriptor#uniformdatatype" target="_blank">uniformTypeDescriptor.UniformDataType</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>待查询的文件类型。</p> </td> </tr>  </tbody></table></div> </div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="43.39%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="56.61000000000001%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="43.39%"><p>number</p> </td> <td class="cellrowborder" width="56.61000000000001%"><p>返回对应类型的铃声和文件支持的最大时长（单位：秒），其中闹钟铃声时长为300s，短信铃声和通知铃声时长为7s，来电铃声时长为60s。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见铃声服务<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ringtone-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p>401</p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter invalid.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ffa-c106="" class="highlight-div"><div _ngcontent-ffa-c106="" class="highlight-div-header"><div _ngcontent-ffa-c106="" class="highlight-div-header-left"><div _ngcontent-ffa-c106="" class="handle-button expand-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffa-c106="" class="highlight-div-header-right"><div _ngcontent-ffa-c106="" class="handle-button ai-button"></div><div _ngcontent-ffa-c106="" class="handle-button line-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffa-c106="" class="handle-button theme-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffa-c106="" class="handle-button copy-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { ringtone } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RingtoneKit'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { uniformTypeDescriptor } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">APP_TAG</span> = <span class="hljs-string">"Msc_Demo"</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DOMAIN</span> = <span class="hljs-number">0x0001</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"查询最大时长"</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">maxDuration</span>: <span class="hljs-built_in">number</span> =</li><li>                ringtone.<span class="hljs-title function_">getSupportedMaxDuration</span>(ringtone.<span class="hljs-property">RingtoneType</span>.<span class="hljs-property">MESSAGE</span>,</li><li>                  uniformTypeDescriptor.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">MP3</span>)</li><li>              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>, <span class="hljs-string">'getSupportedMaxDuration: '</span> + maxDuration);</li><li>            } <span class="hljs-keyword">catch</span> (error) {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>,</li><li>                <span class="hljs-string">'getSupportedMaxDuration error message: '</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">', error code: '</span> + err.<span class="hljs-property">code</span>);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section5949453189" device-type="phone,tablet">ringtone.startRingtoneSetting<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5949453189" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>startRingtoneSetting(context: common.UIAbilityContext, path: string, name: string, callback: AsyncCallback&lt;RingtoneType&gt;): void</p> <p>拉起设置铃声弹窗，并返回点击的铃声类型，使用Callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ringtone.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="7.57%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="42.43%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>context</p> </td> <td class="cellrowborder" width="25%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="7.57%"><p>是</p> </td> <td class="cellrowborder" width="42.43%"><p>UIAbility上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>path</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="7.57%"><p>是</p> </td> <td class="cellrowborder" width="42.43%"><p>具有访问权限的文件路径。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>name</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="7.57%"><p>是</p> </td> <td class="cellrowborder" width="42.43%"><p>文件名，限制长度1000。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/ringtone-ringtone#section18108304244">RingtoneType</a>&gt;</p> </td> <td class="cellrowborder" width="7.57%"><p>是</p> </td> <td class="cellrowborder" width="42.43%"><p>Callback对象。返回用户选择设置的铃声类型。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见铃声服务<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ringtone-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p>401</p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter invalid.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1011600001</p> </td> <td class="cellrowborder" width="66.28%"><p>User canceled.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1011600002</p> </td> <td class="cellrowborder" width="66.28%"><p>The media file is not found.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1011600003</p> </td> <td class="cellrowborder" width="66.28%"><p>Failed to show the dialog box.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1011600004</p> </td> <td class="cellrowborder" width="66.28%"><p>Failed to call the system API.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1011699999</p> </td> <td class="cellrowborder" width="66.28%"><p>System exception.</p> </td> </tr>  </tbody></table></div> </div> <div _ngcontent-ffa-c106="" class="highlight-div"><div _ngcontent-ffa-c106="" class="highlight-div-header"><div _ngcontent-ffa-c106="" class="highlight-div-header-left"><div _ngcontent-ffa-c106="" class="handle-button expand-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffa-c106="" class="highlight-div-header-right"><div _ngcontent-ffa-c106="" class="handle-button ai-button"></div><div _ngcontent-ffa-c106="" class="handle-button line-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffa-c106="" class="handle-button theme-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffa-c106="" class="handle-button copy-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { ringtone } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RingtoneKit'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">APP_TAG</span> = <span class="hljs-string">"Msc_Demo"</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DOMAIN</span> = <span class="hljs-number">0x0001</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"设为铃声OGG格式"</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">audioPath</span>: <span class="hljs-built_in">string</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">filesDir</span> + <span class="hljs-string">'/test.ogg'</span></li><li>            <span class="hljs-keyword">let</span> splitList = audioPath.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>)</li><li>            <span class="hljs-keyword">let</span> fileName = splitList[splitList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>, <span class="hljs-string">'audioPath:'</span> + audioPath)</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>, <span class="hljs-string">'fileName:'</span> + fileName)</li><li>
</li><li>            <span class="hljs-keyword">try</span> {</li><li>              ringtone.<span class="hljs-title function_">startRingtoneSetting</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, audioPath, fileName, <span class="hljs-function">(<span class="hljs-params">err, res</span>) =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>, <span class="hljs-string">'返回值：'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(res))</li><li>              })</li><li>            } <span class="hljs-keyword">catch</span> (error) {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>,</li><li>                <span class="hljs-string">'accessSync failed with error message: '</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">', error code: '</span> + err.<span class="hljs-property">code</span>);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section19688930124318" device-type="phone,tablet">ringtone.startRingtoneSetting<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19688930124318" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>startRingtoneSetting(context: common.UIAbilityContext, path: string, name: string): Promise&lt;RingtoneType&gt;</p> <p>拉起设置铃声弹窗，并返回点击的铃声类型，使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ringtone.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>context</p> </td> <td class="cellrowborder" width="25%"><p>common.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext" target="_blank">UIAbilityContext</a></p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>UIAbility上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>path</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>具有访问权限的文件路径。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>name</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>文件名，限制长度1000。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="43.39%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="56.61000000000001%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="43.39%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/ringtone-ringtone#section18108304244">RingtoneType</a>&gt;</p> </td> <td class="cellrowborder" width="56.61000000000001%"><p>Promise对象。返回用户选择设置的铃声类型。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见铃声服务<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ringtone-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="33.72%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="66.28%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="33.72%"><p>401</p> </td> <td class="cellrowborder" width="66.28%"><p>Parameter invalid.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1011600001</p> </td> <td class="cellrowborder" width="66.28%"><p>User canceled.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1011600002</p> </td> <td class="cellrowborder" width="66.28%"><p>The media file is not found.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1011600003</p> </td> <td class="cellrowborder" width="66.28%"><p>Failed to show the dialog box.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1011600004</p> </td> <td class="cellrowborder" width="66.28%"><p>Failed to call the system API.</p> </td> </tr> <tr><td class="cellrowborder" width="33.72%"><p>1011699999</p> </td> <td class="cellrowborder" width="66.28%"><p>System exception.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ffa-c106="" class="highlight-div"><div _ngcontent-ffa-c106="" class="highlight-div-header"><div _ngcontent-ffa-c106="" class="highlight-div-header-left"><div _ngcontent-ffa-c106="" class="handle-button expand-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ffa-c106="" class="highlight-div-header-right"><div _ngcontent-ffa-c106="" class="handle-button ai-button"></div><div _ngcontent-ffa-c106="" class="handle-button line-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ffa-c106="" class="handle-button theme-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ffa-c106="" class="handle-button copy-button"><div _ngcontent-ffa-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ffa-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { ringtone } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.RingtoneKit'</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">APP_TAG</span> = <span class="hljs-string">"Msc_Demo"</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DOMAIN</span> = <span class="hljs-number">0x0001</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Stack</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"设为铃声OGG格式"</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">audioPath</span>: <span class="hljs-built_in">string</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">filesDir</span> + <span class="hljs-string">'/test.ogg'</span></li><li>            <span class="hljs-keyword">let</span> splitList = audioPath.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>)</li><li>            <span class="hljs-keyword">let</span> fileName = splitList[splitList.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>, <span class="hljs-string">'audioPath:'</span> + audioPath)</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>, <span class="hljs-string">'fileName:'</span> + fileName)</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-keyword">await</span> ringtone.<span class="hljs-title function_">startRingtoneSetting</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, audioPath, fileName).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>, <span class="hljs-string">'返回值：'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(res))</li><li>              })</li><li>            } <span class="hljs-keyword">catch</span> (error) {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN</span>, <span class="hljs-variable constant_">APP_TAG</span>,</li><li>                <span class="hljs-string">'accessSync failed with error message: '</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">', error code: '</span> + err.<span class="hljs-property">code</span>);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>