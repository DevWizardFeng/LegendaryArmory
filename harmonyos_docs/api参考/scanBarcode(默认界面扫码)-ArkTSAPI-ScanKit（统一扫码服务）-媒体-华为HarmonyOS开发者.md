<h1 _ngcontent-kge-c119="" class="doc-title ng-star-inserted" title="scanBarcode (默认界面扫码)"> scanBarcode (默认界面扫码) </h1>

<div _ngcontent-kge-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供默认界面扫码能力。</p> <p>为了方便开发者接入，我们提供了详细的样例工程供参考，推荐参考<a href="https://gitcode.com/HarmonyOS_Samples/scan-kit_-sample-code_-clientdemo_-arkts" target="_blank">示例工程</a>接入。</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="tiledSection"><h2 id="section164051883419" device-type="phone,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section164051883419" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><div _ngcontent-kge-c106="" class="highlight-div"><div _ngcontent-kge-c106="" class="highlight-div-header"><div _ngcontent-kge-c106="" class="highlight-div-header-left"><div _ngcontent-kge-c106="" class="handle-button expand-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kge-c106="" class="highlight-div-header-right"><div _ngcontent-kge-c106="" class="handle-button ai-button"></div><div _ngcontent-kge-c106="" class="handle-button line-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kge-c106="" class="handle-button theme-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kge-c106="" class="handle-button copy-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kge-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { scanBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section10614317162112" device-type="phone,tablet">ScanResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10614317162112" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>扫码结果。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.ScanBarcode</p> <p><strong>起始版本：</strong>4.0.0(10)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="20.26%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="23.66%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="8.02%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="7.960000000000001%"><p><strong>可选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="40.1%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20.26%"><p>scanType</p> </td> <td class="cellrowborder" width="23.66%"><p>scanCore.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-scancore#section113371139123212">ScanType</a></p> </td> <td class="cellrowborder" width="8.02%"><p>否</p> </td> <td class="cellrowborder" width="7.960000000000001%"><p>否</p> </td> <td class="cellrowborder" width="40.1%"><p>码类型。</p> <p><strong>元服务API：</strong>从版本4.1.0(11)开始，该接口支持在元服务中使用。</p> </td> </tr> <tr><td class="cellrowborder" width="20.26%"><p>originalValue</p> </td> <td class="cellrowborder" width="23.66%"><p>string</p> </td> <td class="cellrowborder" width="8.02%"><p>否</p> </td> <td class="cellrowborder" width="7.960000000000001%"><p>否</p> </td> <td class="cellrowborder" width="40.1%"><p>码识别内容结果。</p> <p><strong>元服务API：</strong>从版本4.1.0(11)开始，该接口支持在元服务中使用。</p> </td> </tr> <tr><td class="cellrowborder" width="20.26%"><p>scanCodeRect</p> </td> <td class="cellrowborder" width="23.66%"><p><a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section1456184716188">ScanCodeRect</a></p> </td> <td class="cellrowborder" width="8.02%"><p>否</p> </td> <td class="cellrowborder" width="7.960000000000001%"><p>是</p> </td> <td class="cellrowborder" width="40.1%"><p>码识别位置信息。</p> <p><strong>起始版本：</strong>4.1.0(11)</p> </td> </tr> <tr><td class="cellrowborder" width="20.26%"><p>cornerPoints</p> </td> <td class="cellrowborder" width="23.66%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section9634457911">Point</a>&gt;</p> </td> <td class="cellrowborder" width="8.02%"><p>否</p> </td> <td class="cellrowborder" width="7.960000000000001%"><p>是</p> </td> <td class="cellrowborder" width="40.1%"><p>码识别角点位置信息，返回QR Code四个角点。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>此参数仅图像识码接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-imagedecode#section387381185013">detectBarcode.decodeImage</a>返回。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1456184716188" device-type="phone,tablet">ScanCodeRect<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1456184716188" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>码的位置信息。使用默认扫码接口（startScan和startScanForResult）不返回码位置。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.ScanBarcode</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="23.119999999999997%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="23.119999999999997%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="9.610000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="8.84%"><p><strong>可选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="35.31%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>left</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>number</p> </td> <td class="cellrowborder" width="9.610000000000001%"><p>否</p> </td> <td class="cellrowborder" width="8.84%"><p>否</p> </td> <td class="cellrowborder" width="35.31%"><p>码外接矩形左上角的x坐标。单位：px。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>top</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>number</p> </td> <td class="cellrowborder" width="9.610000000000001%"><p>否</p> </td> <td class="cellrowborder" width="8.84%"><p>否</p> </td> <td class="cellrowborder" width="35.31%"><p>码外接矩形左上角的y坐标。单位：px。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>right</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>number</p> </td> <td class="cellrowborder" width="9.610000000000001%"><p>否</p> </td> <td class="cellrowborder" width="8.84%"><p>否</p> </td> <td class="cellrowborder" width="35.31%"><p>码外接矩形右下角的x坐标。单位：px。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>bottom</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>number</p> </td> <td class="cellrowborder" width="9.610000000000001%"><p>否</p> </td> <td class="cellrowborder" width="8.84%"><p>否</p> </td> <td class="cellrowborder" width="35.31%"><p>码外接矩形右下角的y坐标。单位：px。</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>自定义界面扫码返回的坐标单位与传入参数<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-customscan-api#section8604949165313">ViewControl</a>中width、height单位一致。</p> </div></div></div> </div> <div class="tiledSection"><h2 id="section9634457911" device-type="phone,tablet">Point<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9634457911" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>点坐标，该坐标系左上角为{0，0}，此坐标系是以设备充电口在右侧时的横向设备方向为基准的。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.ScanBarcode</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="23.12%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="23.12%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="15.100000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="15.540000000000004%"><p><strong>可选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="23.12%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.12%"><p>x</p> </td> <td class="cellrowborder" width="23.12%"><p>number</p> </td> <td class="cellrowborder" width="15.100000000000001%"><p>否</p> </td> <td class="cellrowborder" width="15.540000000000004%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>X轴坐标，单位：px。</p> </td> </tr> <tr><td class="cellrowborder" width="23.12%"><p>y</p> </td> <td class="cellrowborder" width="23.12%"><p>number</p> </td> <td class="cellrowborder" width="15.100000000000001%"><p>否</p> </td> <td class="cellrowborder" width="15.540000000000004%"><p>否</p> </td> <td class="cellrowborder" width="23.12%"><p>Y轴坐标，单位：px。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1285191073117" device-type="phone,tablet">ScanOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1285191073117" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>扫码、识码参数。</p> <p><strong>元服务API：</strong>从版本4.1.0(11)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.ScanBarcode</p> <p><strong>起始版本：</strong>4.0.0(10)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.1" width="17.568243175682433%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.2" width="30.246975302469753%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.3" width="6.799320067993202%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.4" width="6.359364063593641%"><p><strong>可选</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.5" width="39.02609739026097%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="17.568243175682433%"><p>scanTypes</p> </td> <td class="cellrowborder" width="30.246975302469753%"><p>Array&lt;scanCore.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-scancore#section113371139123212">ScanType</a>&gt;</p> </td> <td class="cellrowborder" width="6.799320067993202%"><p>否</p> </td> <td class="cellrowborder" width="6.359364063593641%"><p>是</p> </td> <td class="cellrowborder" width="39.02609739026097%"><p>设置扫码类型，默认扫码ALL（全部码类型）。</p> </td> </tr> <tr><td class="cellrowborder" width="17.568243175682433%"><p>enableMultiMode</p> </td> <td class="cellrowborder" width="30.246975302469753%"><p>boolean</p> </td> <td class="cellrowborder" width="6.799320067993202%"><p>否</p> </td> <td class="cellrowborder" width="6.359364063593641%"><p>是</p> </td> <td class="cellrowborder" width="39.02609739026097%"><p>是否开启多码识别，默认false。</p> <ul><li>true：多码识别。</li><li>false：单码识别。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="17.568243175682433%"><p>enableAlbum</p> </td> <td class="cellrowborder" width="30.246975302469753%"><p>boolean</p> </td> <td class="cellrowborder" width="6.799320067993202%"><p>否</p> </td> <td class="cellrowborder" width="6.359364063593641%"><p>是</p> </td> <td class="cellrowborder" width="39.02609739026097%"><p>是否开启相册，默认true。</p> <ul><li>true：开启相册扫码。</li><li>false：关闭相册扫码。</li></ul> <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content"><p>此参数只控制默认界面扫码能力中的相册识码且相册识码只支持单码识别。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-kge-c106="" class="highlight-div"><div _ngcontent-kge-c106="" class="highlight-div-header"><div _ngcontent-kge-c106="" class="highlight-div-header-left"><div _ngcontent-kge-c106="" class="handle-button expand-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kge-c106="" class="highlight-div-header-right"><div _ngcontent-kge-c106="" class="handle-button ai-button"></div><div _ngcontent-kge-c106="" class="handle-button line-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kge-c106="" class="handle-button theme-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kge-c106="" class="handle-button copy-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kge-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { scanBarcode, scanCore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 定义扫码参数options</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: scanBarcode.<span class="hljs-property">ScanOptions</span> = { <span class="hljs-attr">scanTypes</span>: [scanCore.<span class="hljs-property">ScanType</span>.<span class="hljs-property">ALL</span>], <span class="hljs-attr">enableMultiMode</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">enableAlbum</span>: <span class="hljs-literal">true</span> };</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">loadPage</span>(<span class="hljs-params">uiContext : UIContext</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    scanBarcode.<span class="hljs-title function_">startScanForResult</span>(uiContext.<span class="hljs-title function_">getHostContext</span>(), options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: scanBarcode.ScanResult</span>) =&gt;</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>        <span class="hljs-string">`Succeeded in getting ScanResult by promise with options, result is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>        <span class="hljs-string">`Failed to get ScanResult by promise with options. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>      <span class="hljs-string">`Failed to startScanForResult. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section829511911349" device-type="phone,tablet">scanBarcode.startScanForResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section829511911349" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>startScanForResult(context: common.Context, options?: ScanOptions): Promise&lt;ScanResult&gt;</p> <p>通过配置参数调用默认界面扫码，使用Promise异步回调返回解码结果。需要在页面和组件的生命周期内调用。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong> 从版本4.1.0(11)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.ScanBarcode</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.8.2.1.5.1.1" width="18.001800180018%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.2.1.5.1.2" width="20.49204920492049%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.2.1.5.1.3" width="11.511151115111511%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.2.1.5.1.4" width="49.99499949994999%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18.001800180018%"><p>context</p> </td> <td class="cellrowborder" width="20.49204920492049%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-common#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="11.511151115111511%"><p>是</p> </td> <td class="cellrowborder" width="49.99499949994999%"><p>应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="18.001800180018%"><p>options</p> </td> <td class="cellrowborder" width="20.49204920492049%"><p><a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section1285191073117">ScanOptions</a></p> </td> <td class="cellrowborder" width="11.511151115111511%"><p>否</p> </td> <td class="cellrowborder" width="49.99499949994999%"><p>启动扫码参数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.2.1.3.1.1" width="30%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.2.1.3.1.2" width="70%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section10614317162112">ScanResult</a>&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象，返回扫码结果对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1000500001</p> </td> <td class="cellrowborder" width="70%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1000500002</p> </td> <td class="cellrowborder" width="70%"><p>The user canceled the barcode scanning.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kge-c106="" class="highlight-div"><div _ngcontent-kge-c106="" class="highlight-div-header"><div _ngcontent-kge-c106="" class="highlight-div-header-left"><div _ngcontent-kge-c106="" class="handle-button expand-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kge-c106="" class="highlight-div-header-right"><div _ngcontent-kge-c106="" class="handle-button ai-button"></div><div _ngcontent-kge-c106="" class="handle-button line-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kge-c106="" class="handle-button theme-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kge-c106="" class="handle-button copy-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kge-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { scanBarcode, scanCore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 定义扫码参数options</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: scanBarcode.<span class="hljs-property">ScanOptions</span> = { <span class="hljs-attr">scanTypes</span>: [scanCore.<span class="hljs-property">ScanType</span>.<span class="hljs-property">ALL</span>], <span class="hljs-attr">enableMultiMode</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">enableAlbum</span>: <span class="hljs-literal">true</span> };</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">loadPage</span>(<span class="hljs-params">uiContext : UIContext</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    scanBarcode.<span class="hljs-title function_">startScanForResult</span>(uiContext.<span class="hljs-title function_">getHostContext</span>(), options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: scanBarcode.ScanResult</span>) =&gt;</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>        <span class="hljs-string">`Succeeded in getting ScanResult by promise with options, result is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>        <span class="hljs-string">`Failed to get ScanResult by promise with options. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>      <span class="hljs-string">`Failed to startScanForResult. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section399311216327" device-type="phone,tablet">scanBarcode.startScanForResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section399311216327" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>startScanForResult(context: common.Context, callback: AsyncCallback&lt;ScanResult&gt;): void</p> <p>启动默认界面扫码，使用Callback异步回调返回解码结果。需要在页面和组件的生命周期内调用。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong> 从版本4.1.0(11)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.ScanBarcode</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.2.1.5.1.1" width="13.51%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.1.5.1.2" width="28.78%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.1.5.1.3" width="7.71%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="13.51%"><p>context</p> </td> <td class="cellrowborder" width="28.78%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-common#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="7.71%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="13.51%"><p>callback</p> </td> <td class="cellrowborder" width="28.78%"><p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section10614317162112">ScanResult</a>&gt;</p> </td> <td class="cellrowborder" width="7.71%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>回调函数。当扫码返回成功，err为undefined，data为获取到的扫码结果对象<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section10614317162112">ScanResult</a>；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1000500001</p> </td> <td class="cellrowborder" width="70%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1000500002</p> </td> <td class="cellrowborder" width="70%"><p>The user canceled the barcode scanning.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kge-c106="" class="highlight-div"><div _ngcontent-kge-c106="" class="highlight-div-header"><div _ngcontent-kge-c106="" class="highlight-div-header-left"><div _ngcontent-kge-c106="" class="handle-button expand-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kge-c106="" class="highlight-div-header-right"><div _ngcontent-kge-c106="" class="handle-button ai-button"></div><div _ngcontent-kge-c106="" class="handle-button line-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kge-c106="" class="handle-button theme-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kge-c106="" class="handle-button copy-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kge-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { scanBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 启动扫码，拉起扫码界面</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">loadPage</span>(<span class="hljs-params">uiContext : UIContext</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    scanBarcode.<span class="hljs-title function_">startScanForResult</span>(uiContext.<span class="hljs-title function_">getHostContext</span>(), <span class="hljs-function">(<span class="hljs-params">error: BusinessError, result: scanBarcode.ScanResult</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>          <span class="hljs-string">`Failed to get ScanResult by callback. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>        <span class="hljs-string">`Succeeded in getting ScanResult by callback, result is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>, <span class="hljs-string">`Failed to startScanForResult. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1738211373353" device-type="phone,tablet">scanBarcode.startScanForResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1738211373353" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>startScanForResult(context: common.Context, options: ScanOptions, callback: AsyncCallback&lt;ScanResult&gt;): void</p> <p>通过配置参数调用默认界面扫码，使用Callback异步回调返回解码结果。需要在页面和组件的生命周期内调用。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本4.1.0(11)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.ScanBarcode</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.8.2.1.5.1.1" width="11.48%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.2.1.5.1.2" width="30.009999999999998%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.2.1.5.1.3" width="8.51%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="11.48%"><p>context</p> </td> <td class="cellrowborder" width="30.009999999999998%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-common#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="8.51%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>应用上下文。</p> </td> </tr> <tr><td class="cellrowborder" width="11.48%"><p>options</p> </td> <td class="cellrowborder" width="30.009999999999998%"><p><a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section1285191073117">ScanOptions</a></p> </td> <td class="cellrowborder" width="8.51%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>启动扫码参数。</p> </td> </tr> <tr><td class="cellrowborder" width="11.48%"><p>callback</p> </td> <td class="cellrowborder" width="30.009999999999998%"><p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section10614317162112">ScanResult</a>&gt;</p> </td> <td class="cellrowborder" width="8.51%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>回调函数。当扫码返回成功，err为undefined，data为获取到的扫码结果对象<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section10614317162112">ScanResult</a>；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1000500001</p> </td> <td class="cellrowborder" width="70%"><p>Internal error.</p> </td> </tr> <tr><td class="cellrowborder" width="30%"><p>1000500002</p> </td> <td class="cellrowborder" width="70%"><p>The user canceled the barcode scanning.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kge-c106="" class="highlight-div"><div _ngcontent-kge-c106="" class="highlight-div-header"><div _ngcontent-kge-c106="" class="highlight-div-header-left"><div _ngcontent-kge-c106="" class="handle-button expand-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kge-c106="" class="highlight-div-header-right"><div _ngcontent-kge-c106="" class="handle-button ai-button"></div><div _ngcontent-kge-c106="" class="handle-button line-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kge-c106="" class="handle-button theme-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kge-c106="" class="handle-button copy-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kge-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { scanCore, scanBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 定义扫码参数options</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: scanBarcode.<span class="hljs-property">ScanOptions</span> = { <span class="hljs-attr">scanTypes</span>: [scanCore.<span class="hljs-property">ScanType</span>.<span class="hljs-property">ALL</span>], <span class="hljs-attr">enableMultiMode</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">enableAlbum</span>: <span class="hljs-literal">true</span> };</li><li><span class="hljs-comment">// 启动扫码，拉起扫码界面</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">loadPage</span>(<span class="hljs-params">uiContext : UIContext</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    scanBarcode.<span class="hljs-title function_">startScanForResult</span>(uiContext.<span class="hljs-title function_">getHostContext</span>(), options, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, result: scanBarcode.ScanResult</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>          <span class="hljs-string">`Failed to get ScanResult by callback with options. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>        <span class="hljs-string">`Succeeded in getting ScanResult by callback with options, result is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>, <span class="hljs-string">`Failed to startScanForResult. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section17782171410233" device-type="phone,tablet">scanBarcode.startScan<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section17782171410233" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>startScan(options?: ScanOptions): Promise&lt;ScanResult&gt;</p> <p>通过配置参数调用默认界面扫码，使用Promise异步回调返回扫码结果。</p> <p><strong>废弃说明：</strong>从版本4.1.0(11)开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section829511911349">startScanForResult</a>替代。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.ScanBarcode</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.1" width="18.001800180018%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.2" width="22.69226922692269%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.3" width="9.31093109310931%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.2.1.5.1.4" width="49.99499949994999%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18.001800180018%"><p>options</p> </td> <td class="cellrowborder" width="22.69226922692269%"><p><a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section1285191073117">ScanOptions</a></p> </td> <td class="cellrowborder" width="9.31093109310931%"><p>否</p> </td> <td class="cellrowborder" width="49.99499949994999%"><p>启动扫码参数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>返回值：</strong> <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.8.2.1.3.1.1" width="30%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.2.1.3.1.2" width="70%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section10614317162112">ScanResult</a>&gt;</p> </td> <td class="cellrowborder" width="70%"><p>Promise对象，返回扫码结果对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kge-c106="" class="highlight-div"><div _ngcontent-kge-c106="" class="highlight-div-header"><div _ngcontent-kge-c106="" class="highlight-div-header-left"><div _ngcontent-kge-c106="" class="handle-button expand-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kge-c106="" class="highlight-div-header-right"><div _ngcontent-kge-c106="" class="handle-button ai-button"></div><div _ngcontent-kge-c106="" class="handle-button line-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kge-c106="" class="handle-button theme-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kge-c106="" class="handle-button copy-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kge-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { scanCore, scanBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 构造启动扫码的入参options</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: scanBarcode.<span class="hljs-property">ScanOptions</span> = { <span class="hljs-attr">scanTypes</span>: [scanCore.<span class="hljs-property">ScanType</span>.<span class="hljs-property">ALL</span>], <span class="hljs-attr">enableMultiMode</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">enableAlbum</span>: <span class="hljs-literal">true</span> };</li><li><span class="hljs-keyword">try</span> {</li><li>  scanBarcode.<span class="hljs-title function_">startScan</span>(options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: scanBarcode.ScanResult</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>      <span class="hljs-string">`Succeeded in getting ScanResult by promise with options, result is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// 当扫码过程中出现错误打印报错并返回</span></li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>      <span class="hljs-string">`Failed to get ScanResult by promise with options. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>, <span class="hljs-string">`Failed to startScan. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1740411931712" device-type="phone,tablet">scanBarcode.startScan<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1740411931712" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>startScan(callback: AsyncCallback&lt;ScanResult&gt;): void</p> <p>启动默认界面扫码，使用Callback异步回调返回扫码结果。</p> <p><strong>废弃说明：</strong>从版本4.1.0(11)开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section399311216327">startScanForResult</a>替代。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.ScanBarcode</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.1" width="12.86%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.2" width="29.37%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.3" width="7.7700000000000005%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="12.86%"><p>callback</p> </td> <td class="cellrowborder" width="29.37%"><p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section10614317162112">ScanResult</a>&gt;</p> </td> <td class="cellrowborder" width="7.7700000000000005%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>回调函数。当扫码返回成功，err为undefined，data为获取到的扫码结果对象<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section10614317162112">ScanResult</a>；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kge-c106="" class="highlight-div"><div _ngcontent-kge-c106="" class="highlight-div-header"><div _ngcontent-kge-c106="" class="highlight-div-header-left"><div _ngcontent-kge-c106="" class="handle-button expand-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kge-c106="" class="highlight-div-header-right"><div _ngcontent-kge-c106="" class="handle-button ai-button"></div><div _ngcontent-kge-c106="" class="handle-button line-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kge-c106="" class="handle-button theme-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kge-c106="" class="handle-button copy-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kge-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { scanBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  scanBarcode.<span class="hljs-title function_">startScan</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, result: scanBarcode.ScanResult</span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// error回调监听，当扫码过程中出现错误打印报错并返回</span></li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>        <span class="hljs-string">`Failed to get ScanResult by callback. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>      <span class="hljs-string">`Succeeded in getting ScanResult by callback, result is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>, <span class="hljs-string">`Failed to startScan. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section5306221101516" device-type="phone,tablet">scanBarcode.startScan<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5306221101516" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>startScan(options: ScanOptions, callback: AsyncCallback&lt;ScanResult&gt;): void</p> <p>通过配置参数调用默认界面扫码，使用Callback异步回调返回扫码结果。</p> <p><strong>废弃说明：</strong>从版本4.1.0(11)开始废弃，建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section1738211373353">startScanForResult</a>替代。</p> <p><strong>系统能力：</strong>SystemCapability.Multimedia.Scan.ScanBarcode</p> <p><strong>起始版本：</strong>4.0.0(10)</p> <div class="p"><strong>参数：</strong> <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.1" width="14.249999999999998%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.2" width="27.92%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.3" width="7.829999999999999%"><p><strong>必填</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.2.1.5.1.4" width="50%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="14.249999999999998%"><p>options</p> </td> <td class="cellrowborder" width="27.92%"><p><a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section1285191073117">ScanOptions</a></p> </td> <td class="cellrowborder" width="7.829999999999999%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>启动扫码参数。</p> </td> </tr> <tr><td class="cellrowborder" width="14.249999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="27.92%"><p>AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section10614317162112">ScanResult</a>&gt;</p> </td> <td class="cellrowborder" width="7.829999999999999%"><p>是</p> </td> <td class="cellrowborder" width="50%"><p>回调函数，当扫码返回成功，err为undefined，data为获取到的扫码结果对象<a href="/consumer/cn/doc/harmonyos-references/scan-scanbarcode-api#section10614317162112">ScanResult</a>；否则为错误对象。</p> </td> </tr>  </tbody></table></div> </div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/scan-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="30%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="70%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30%"><p>401</p> </td> <td class="cellrowborder" width="70%"><p>Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kge-c106="" class="highlight-div"><div _ngcontent-kge-c106="" class="highlight-div-header"><div _ngcontent-kge-c106="" class="highlight-div-header-left"><div _ngcontent-kge-c106="" class="handle-button expand-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kge-c106="" class="highlight-div-header-right"><div _ngcontent-kge-c106="" class="handle-button ai-button"></div><div _ngcontent-kge-c106="" class="handle-button line-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kge-c106="" class="handle-button theme-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kge-c106="" class="handle-button copy-button"><div _ngcontent-kge-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kge-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { scanCore, scanBarcode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ScanKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 构造启动扫码的入参options</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: scanBarcode.<span class="hljs-property">ScanOptions</span> = { <span class="hljs-attr">scanTypes</span>: [scanCore.<span class="hljs-property">ScanType</span>.<span class="hljs-property">ALL</span>], <span class="hljs-attr">enableMultiMode</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">enableAlbum</span>: <span class="hljs-literal">true</span> };</li><li><span class="hljs-keyword">try</span> {</li><li>  scanBarcode.<span class="hljs-title function_">startScan</span>(options, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, result: scanBarcode.ScanResult</span>) =&gt;</span> {</li><li>    <span class="hljs-comment">// error回调监听，当扫码过程中出现错误打印报错并返回</span></li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>        <span class="hljs-string">`Failed to get ScanResult by callback with options. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>,</li><li>      <span class="hljs-string">`Succeeded in getting ScanResult by callback with options, result is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'[Scan Sample]'</span>, <span class="hljs-string">`Failed to startScan. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> </div> <div></div></div>