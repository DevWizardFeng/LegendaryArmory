<h1 _ngcontent-rxk-c119="" class="doc-title ng-star-inserted" title="sceneManager （生态查询服务）"> sceneManager （生态查询服务） </h1>

<div _ngcontent-rxk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>对场景值进行管理，提供查询自身场景值，获取广告验签版本功能。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>调用接口需捕获异常。</p> </div></div></div> <p><strong>起始版本：</strong>4.1.0(11)</p> <div class="tiledSection"><h2 id="section16609101116259" device-type="phone,2in1,tablet,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-rxk-c106="" class="highlight-div"><div _ngcontent-rxk-c106="" class="highlight-div-header"><div _ngcontent-rxk-c106="" class="highlight-div-header-left"><div _ngcontent-rxk-c106="" class="handle-button expand-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rxk-c106="" class="highlight-div-header-right"><div _ngcontent-rxk-c106="" class="handle-button ai-button"></div><div _ngcontent-rxk-c106="" class="handle-button line-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rxk-c106="" class="handle-button theme-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rxk-c106="" class="handle-button copy-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rxk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sceneManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppGalleryKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section145261628122720" device-type="phone,2in1,tablet,tv">sceneManager.getSelfSceneCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section145261628122720" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getSelfSceneCode(): string</p> <p>查询自身场景值。调用此接口需捕获异常。</p> <p><strong>元服务API：</strong>从版本4.1.0(11)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.BundleManager.EcologicalRuleManager.SceneManager</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>string</p> </td> <td class="cellrowborder" width="50%"><p>自身场景值。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-rxk-c106="" class="highlight-div"><div _ngcontent-rxk-c106="" class="highlight-div-header"><div _ngcontent-rxk-c106="" class="highlight-div-header-left"><div _ngcontent-rxk-c106="" class="handle-button expand-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rxk-c106="" class="highlight-div-header-right"><div _ngcontent-rxk-c106="" class="handle-button ai-button"></div><div _ngcontent-rxk-c106="" class="handle-button line-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rxk-c106="" class="handle-button theme-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rxk-c106="" class="handle-button copy-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rxk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sceneManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppGalleryKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">selfSceneCode</span>: <span class="hljs-built_in">string</span> = sceneManager.<span class="hljs-title function_">getSelfSceneCode</span>();</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-string">"Succeeded in getting SelfSceneCode res = "</span> + selfSceneCode);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-string">`get self sceneCode failed.code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section552702811279" device-type="phone,2in1,tablet,tv">sceneManager.getAdsVerificationVersion<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section552702811279" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getAdsVerificationVersion(): number</p> <p>获取广告验签版本。调用此接口需捕获异常。</p> <p><strong>系统能力：</strong>SystemCapability.BundleManager.EcologicalRuleManager.SceneManager</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>number</p> </td> <td class="cellrowborder" width="50%"><p>广告验签版本。当前返回值为1。</p> <p>广告场景中开发者需要在want参数中携带以下参数：ohos.market.param.signature、ohos.market.param.ad_networkid、ohos.market.param.timestamp、ohos.market.param.verify_version、ohos.market.param.ad_nonce，验签时会根据want中这些字段值使用公钥进行验签。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-rxk-c106="" class="highlight-div"><div _ngcontent-rxk-c106="" class="highlight-div-header"><div _ngcontent-rxk-c106="" class="highlight-div-header-left"><div _ngcontent-rxk-c106="" class="handle-button expand-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rxk-c106="" class="highlight-div-header-right"><div _ngcontent-rxk-c106="" class="handle-button ai-button"></div><div _ngcontent-rxk-c106="" class="handle-button line-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rxk-c106="" class="handle-button theme-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rxk-c106="" class="handle-button copy-button"><div _ngcontent-rxk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rxk-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sceneManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AppGalleryKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">version</span>: <span class="hljs-built_in">number</span> = sceneManager.<span class="hljs-title function_">getAdsVerificationVersion</span>();</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-string">"Succeeded in getting AdsVerificationVersion res = "</span> + version);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0</span>, <span class="hljs-string">'TAG'</span>, <span class="hljs-string">`get ads verification version failed.code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>