<h1 _ngcontent-xqq-c119="" class="doc-title ng-star-inserted" title="scsi_peripheral_api.h"> scsi_peripheral_api.h </h1>

<div _ngcontent-xqq-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div> <div class="tiledSection"><h2 id="概述" device-type="2in1">概述<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="概述" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>声明用于主机侧访问SCSI设备的SCSI Peripheral DDK接口。</p> <p><strong>引用文件：</strong> &lt;scsi_peripheral/scsi_peripheral_api.h&gt;</p> <p><strong>系统能力：</strong> SystemCapability.Driver.SCSI.Extension</p> <p><strong>起始版本：</strong> 18</p> <p><strong>相关模块：</strong> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk">SCSIPeripheralDDK</a></p> </div>  <div class="tiledSection"><h2 id="汇总" device-type="2in1">汇总<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="汇总" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div></div>  <div class="tiledSection"><h3 id="函数" device-type="2in1" class="firsth2">函数<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数" tips="复制节点链接"></i></h3> <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.1" width="50%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.2.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_init">int32_t OH_ScsiPeripheral_Init(void)</a></td> <td class="cellrowborder" width="50%">初始化SCSI Peripheral DDK。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_release">int32_t OH_ScsiPeripheral_Release(void)</a></td> <td class="cellrowborder" width="50%">释放SCSI Peripheral DDK。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_open">int32_t OH_ScsiPeripheral_Open(uint64_t deviceId, uint8_t interfaceIndex, ScsiPeripheral_Device **dev)</a></td> <td class="cellrowborder" width="50%">打开deviceId和interfaceIndex指定的SCSI设备。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_close">int32_t OH_ScsiPeripheral_Close(ScsiPeripheral_Device **dev)</a></td> <td class="cellrowborder" width="50%">关闭SCSI设备。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_testunitready">int32_t OH_ScsiPeripheral_TestUnitReady(ScsiPeripheral_Device *dev, ScsiPeripheral_TestUnitReadyRequest *request,ScsiPeripheral_Response *response)</a></td> <td class="cellrowborder" width="50%">检查逻辑单元是否已经准备好。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_inquiry">int32_t OH_ScsiPeripheral_Inquiry(ScsiPeripheral_Device *dev, ScsiPeripheral_InquiryRequest *request,ScsiPeripheral_InquiryInfo *inquiryInfo, ScsiPeripheral_Response *response)</a></td> <td class="cellrowborder" width="50%">查询SCSI设备的基本信息。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_readcapacity10">int32_t OH_ScsiPeripheral_ReadCapacity10(ScsiPeripheral_Device *dev, ScsiPeripheral_ReadCapacityRequest *request,ScsiPeripheral_CapacityInfo *capacityInfo, ScsiPeripheral_Response *response)</a></td> <td class="cellrowborder" width="50%">获取SCSI设备的容量信息。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_requestsense">int32_t OH_ScsiPeripheral_RequestSense(ScsiPeripheral_Device *dev, ScsiPeripheral_RequestSenseRequest *request,ScsiPeripheral_Response *response)</a></td> <td class="cellrowborder" width="50%">获取sense data（SCSI设备返回给主机的信息，用于报告设备的状态、错误信息以及诊断信息）。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_read10">int32_t OH_ScsiPeripheral_Read10(ScsiPeripheral_Device *dev, ScsiPeripheral_IORequest *request,ScsiPeripheral_Response *response)</a></td> <td class="cellrowborder" width="50%">从指定逻辑块读取数据。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_write10">int32_t OH_ScsiPeripheral_Write10(ScsiPeripheral_Device *dev, ScsiPeripheral_IORequest *request,ScsiPeripheral_Response *response)</a></td> <td class="cellrowborder" width="50%">写数据到设备的指定逻辑块。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_verify10">int32_t OH_ScsiPeripheral_Verify10(ScsiPeripheral_Device *dev, ScsiPeripheral_VerifyRequest *request,ScsiPeripheral_Response *response)</a></td> <td class="cellrowborder" width="50%">校验指定逻辑块。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_sendrequestbycdb">int32_t OH_ScsiPeripheral_SendRequestByCdb(ScsiPeripheral_Device *dev, ScsiPeripheral_Request *request,ScsiPeripheral_Response *response)</a></td> <td class="cellrowborder" width="50%">以CDB（Command Descriptor Block）方式发送SCSI命令。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_createdevicememmap">int32_t OH_ScsiPeripheral_CreateDeviceMemMap(ScsiPeripheral_Device *dev, size_t size,ScsiPeripheral_DeviceMemMap **devMmap)</a></td> <td class="cellrowborder" width="50%">创建缓冲区。请在缓冲区使用完后，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_destroydevicememmap">OH_ScsiPeripheral_DestroyDeviceMemMap</a>销毁缓冲区，否则会造成资源泄露。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_destroydevicememmap">int32_t OH_ScsiPeripheral_DestroyDeviceMemMap(ScsiPeripheral_DeviceMemMap *devMmap)</a></td> <td class="cellrowborder" width="50%">销毁缓冲区。请在缓冲区使用完后及时销毁缓冲区，否则会造成资源泄露。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_parsebasicsenseinfo">int32_t OH_ScsiPeripheral_ParseBasicSenseInfo(uint8_t *senseData, uint8_t senseDataLen,ScsiPeripheral_BasicSenseInfo *senseInfo)</a></td> <td class="cellrowborder" width="50%">解析基本的sense data，包括Information、Command specific information、Sense key specific字段。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="函数说明" device-type="2in1">函数说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="函数说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div></div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_init" device-type="2in1" class="firsth2">OH_ScsiPeripheral_Init()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_init" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_ScsiPeripheral_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>初始化SCSI Peripheral DDK。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 初始化DDK失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_release" device-type="2in1">OH_ScsiPeripheral_Release()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_release" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_ScsiPeripheral_Release</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>释放SCSI Peripheral DDK。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_open" device-type="2in1">OH_ScsiPeripheral_Open()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_open" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_ScsiPeripheral_Open</span><span class="hljs-params">(<span class="hljs-type">uint64_t</span> deviceId, <span class="hljs-type">uint8_t</span> interfaceIndex, ScsiPeripheral_Device **dev)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>打开deviceId和interfaceIndex指定的SCSI设备。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">uint64_t deviceId</td> <td class="cellrowborder" width="50%">设备ID，代表要操作的设备。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t interfaceIndex</td> <td class="cellrowborder" width="50%">接口索引，对应SCSI设备的接口。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> **dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_IO_ERROR</a> DDK发生IO错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_DEVICE_NOT_FOUND</a> 通过deviceId和interfaceIndex找不到设备。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_OPERATION</a> 不支持该操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_close" device-type="2in1">OH_ScsiPeripheral_Close()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_close" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_ScsiPeripheral_Close</span>(ScsiPeripheral_Device **dev)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>关闭SCSI设备。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> **dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_testunitready" device-type="2in1">OH_ScsiPeripheral_TestUnitReady()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_testunitready" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_ScsiPeripheral_TestUnitReady</span>(ScsiPeripheral_Device *dev, ScsiPeripheral_TestUnitReadyRequest *request,ScsiPeripheral_Response *response)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>检查逻辑单元是否已经准备好。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iperipheralddk-scsiperipheral-testunitreadyrequest">ScsiPeripheral_TestUnitReadyRequest</a> *request</td> <td class="cellrowborder" width="50%">逻辑单元检查命令（test unit ready）的请求信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/iperipheralddk-scsiperipheral-testunitreadyrequest">ScsiPeripheral_TestUnitReadyRequest</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a> *response</td> <td class="cellrowborder" width="50%">逻辑单元检查命令（test unit ready）的响应信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空、request为空或者response为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_TIMEOUT</a> 传输超时。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_OPERATION</a> 不支持该操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_inquiry" device-type="2in1">OH_ScsiPeripheral_Inquiry()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_inquiry" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_ScsiPeripheral_Inquiry</span>(ScsiPeripheral_Device *dev, ScsiPeripheral_InquiryRequest *request,ScsiPeripheral_InquiryInfo *inquiryInfo, ScsiPeripheral_Response *response)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>查询SCSI设备的基本信息。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pi-scsiperipheralddk-scsiperipheral-inquiryrequest">ScsiPeripheral_InquiryRequest</a> *request</td> <td class="cellrowborder" width="50%">inquiry命令的请求信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pi-scsiperipheralddk-scsiperipheral-inquiryrequest">ScsiPeripheral_InquiryRequest</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-inquiryinfo">ScsiPeripheral_InquiryInfo</a> *inquiryInfo</td> <td class="cellrowborder" width="50%">inquiry命令返回的查询信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-inquiryinfo">ScsiPeripheral_InquiryInfo</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a> *response</td> <td class="cellrowborder" width="50%">inquiry命令返回的原始响应信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空、 request为空、inquiryInfo 为空、inquiryInfo-&gt;data或者response为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_TIMEOUT</a> 传输超时。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_OPERATION</a> 不支持该操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_readcapacity10" device-type="2in1">OH_ScsiPeripheral_ReadCapacity10()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_readcapacity10" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_ScsiPeripheral_ReadCapacity10</span>(ScsiPeripheral_Device *dev, ScsiPeripheral_ReadCapacityRequest *request,ScsiPeripheral_CapacityInfo *capacityInfo, ScsiPeripheral_Response *response)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取SCSI设备的容量信息。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/siperipheralddk-scsiperipheral-readcapacityrequest">ScsiPeripheral_ReadCapacityRequest</a> *request</td> <td class="cellrowborder" width="50%">read capacity命令的请求信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/siperipheralddk-scsiperipheral-readcapacityrequest">ScsiPeripheral_ReadCapacityRequest</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-capacityinfo">ScsiPeripheral_CapacityInfo</a> *capacityInfo</td> <td class="cellrowborder" width="50%">read capacity命令返回的容量信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-capacityinfo">ScsiPeripheral_CapacityInfo</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a> *response</td> <td class="cellrowborder" width="50%">read capacity命令返回的原始响应信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空、 request为空、capacityInfo为空或者response为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_TIMEOUT</a> 传输超时。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_OPERATION</a> 不支持该操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_requestsense" device-type="2in1">OH_ScsiPeripheral_RequestSense()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_requestsense" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_ScsiPeripheral_RequestSense</span>(ScsiPeripheral_Device *dev, ScsiPeripheral_RequestSenseRequest *request,ScsiPeripheral_Response *response)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>获取sense data（SCSI设备返回给主机的信息，用于报告设备的状态、错误信息以及诊断信息）。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/siperipheralddk-scsiperipheral-requestsenserequest">ScsiPeripheral_RequestSenseRequest</a> *request</td> <td class="cellrowborder" width="50%">request sense命令的请求信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/siperipheralddk-scsiperipheral-requestsenserequest">ScsiPeripheral_RequestSenseRequest</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a> *response</td> <td class="cellrowborder" width="50%">request sense命令返回的响应信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空、 request为空或者response为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_TIMEOUT</a> 传输超时。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_OPERATION</a> 不支持该操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_read10" device-type="2in1">OH_ScsiPeripheral_Read10()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_read10" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_ScsiPeripheral_Read10</span>(ScsiPeripheral_Device *dev, ScsiPeripheral_IORequest *request,ScsiPeripheral_Response *response)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>从指定逻辑块读取数据。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-iorequest">ScsiPeripheral_IORequest</a> *request</td> <td class="cellrowborder" width="50%">read命令的请求信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-iorequest">ScsiPeripheral_IORequest</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a> *response</td> <td class="cellrowborder" width="50%">read命令返回的响应信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空、 request为空、request-&gt;data或者response为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_TIMEOUT</a> 传输超时。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_OPERATION</a> 不支持该操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_write10" device-type="2in1">OH_ScsiPeripheral_Write10()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_write10" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_ScsiPeripheral_Write10</span>(ScsiPeripheral_Device *dev, ScsiPeripheral_IORequest *request,ScsiPeripheral_Response *response)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>写数据到设备的指定逻辑块。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-iorequest">ScsiPeripheral_IORequest</a> *request</td> <td class="cellrowborder" width="50%">write命令的请求信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-iorequest">ScsiPeripheral_IORequest</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a> *response</td> <td class="cellrowborder" width="50%">write命令返回的响应信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空、 request为空、request-&gt;data为空或者response为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_TIMEOUT</a> 传输超时。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_OPERATION</a> 不支持该操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_verify10" device-type="2in1">OH_ScsiPeripheral_Verify10()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_verify10" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_ScsiPeripheral_Verify10</span>(ScsiPeripheral_Device *dev, ScsiPeripheral_VerifyRequest *request,ScsiPeripheral_Response *response)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>校验指定逻辑块。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/api-scsiperipheralddk-scsiperipheral-verifyrequest">ScsiPeripheral_VerifyRequest</a> *request</td> <td class="cellrowborder" width="50%">verify命令的请求信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/api-scsiperipheralddk-scsiperipheral-verifyrequest">ScsiPeripheral_VerifyRequest</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a> *response</td> <td class="cellrowborder" width="50%">verify命令返回的响应信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空、request为空或者response为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_TIMEOUT</a> 传输超时。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_OPERATION</a> 不支持该操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_sendrequestbycdb" device-type="2in1">OH_ScsiPeripheral_SendRequestByCdb()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_sendrequestbycdb" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_ScsiPeripheral_SendRequestByCdb</span>(ScsiPeripheral_Device *dev, ScsiPeripheral_Request *request,ScsiPeripheral_Response *response)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>以CDB（Command Descriptor Block）方式发送SCSI命令。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-request">ScsiPeripheral_Request</a> *request</td> <td class="cellrowborder" width="50%">请求，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-request">ScsiPeripheral_Request</a>。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a> *response</td> <td class="cellrowborder" width="50%">响应，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-response">ScsiPeripheral_Response</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_NO_PERM</a> 权限校验失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INIT_ERROR</a> 未初始化DDK。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空、 request为空、request-&gt;data为</p> <p> 空、request-&gt;cdbLength为0或者response为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SERVICE_ERROR</a> 与DDK服务通信失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_IO_ERROR</a> DDK发生I/O错误。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_TIMEOUT</a> 传输超时。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_OPERATION</a> 不支持该操作。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_createdevicememmap" device-type="2in1">OH_ScsiPeripheral_CreateDeviceMemMap()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_createdevicememmap" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_ScsiPeripheral_CreateDeviceMemMap</span><span class="hljs-params">(ScsiPeripheral_Device *dev, <span class="hljs-type">size_t</span> size,ScsiPeripheral_DeviceMemMap **devMmap)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>创建缓冲区。请在缓冲区使用完后，调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_destroydevicememmap">OH_ScsiPeripheral_DestroyDeviceMemMap</a>销毁缓冲区，否则会造成资源泄露。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a> *dev</td> <td class="cellrowborder" width="50%">设备句柄，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-device">ScsiPeripheral_Device</a>。</td> </tr> <tr><td class="cellrowborder" width="50%">size_t size</td> <td class="cellrowborder" width="50%">缓冲区的大小。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-devicememmap">ScsiPeripheral_DeviceMemMap</a> **devMmap</td> <td class="cellrowborder" width="50%">创建的缓冲区通过该参数返回给调用者，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-devicememmap">ScsiPeripheral_DeviceMemMap</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> dev为空或devMmap为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_destroydevicememmap" device-type="2in1">OH_ScsiPeripheral_DestroyDeviceMemMap()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_destroydevicememmap" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-scss" data-highlighted="yes"><ol class="linenums"><li>int32_t <span class="hljs-built_in">OH_ScsiPeripheral_DestroyDeviceMemMap</span>(ScsiPeripheral_DeviceMemMap *devMmap)</li></ol></pre></div></div> <p><strong>描述</strong></p> <p>销毁缓冲区。请在缓冲区使用完后及时销毁缓冲区，否则会造成资源泄露。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-devicememmap">ScsiPeripheral_DeviceMemMap</a> *devMmap</td> <td class="cellrowborder" width="50%">待销毁的由<a href="/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-api-h#oh_scsiperipheral_createdevicememmap">OH_ScsiPeripheral_CreateDeviceMemMap</a>创建的缓冲区，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsiperipheralddk-scsiperipheral-devicememmap">ScsiPeripheral_DeviceMemMap</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> devMmap为空。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_MEMORY_ERROR</a> 内存操作失败。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h3 id="oh_scsiperipheral_parsebasicsenseinfo" device-type="2in1">OH_ScsiPeripheral_ParseBasicSenseInfo()<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oh_scsiperipheral_parsebasicsenseinfo" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-xqq-c106="" class="highlight-div"><div _ngcontent-xqq-c106="" class="highlight-div-header"><div _ngcontent-xqq-c106="" class="highlight-div-header-left"><div _ngcontent-xqq-c106="" class="handle-button expand-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-xqq-c106="" class="highlight-div-header-right"><div _ngcontent-xqq-c106="" class="handle-button ai-button"></div><div _ngcontent-xqq-c106="" class="handle-button line-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-xqq-c106="" class="handle-button theme-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-xqq-c106="" class="handle-button copy-button"><div _ngcontent-xqq-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-xqq-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-cpp" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-function"><span class="hljs-type">int32_t</span> <span class="hljs-title">OH_ScsiPeripheral_ParseBasicSenseInfo</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> *senseData, <span class="hljs-type">uint8_t</span> senseDataLen,ScsiPeripheral_BasicSenseInfo *senseInfo)</span></span></li></ol></pre></div></div> <p><strong>描述</strong></p> <p>解析基本的sense data，包括Information、Command specific information、Sense key specific字段。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_DDK_SCSI_PERIPHERAL</p> <p><strong>起始版本：</strong> 18</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">参数项</th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">描述</th> </tr><tr><td class="cellrowborder" width="50%">uint8_t *senseData</td> <td class="cellrowborder" width="50%">待解析的sense data。</td> </tr> <tr><td class="cellrowborder" width="50%">uint8_t senseDataLen</td> <td class="cellrowborder" width="50%">sense data长度。</td> </tr> <tr><td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pi-scsiperipheralddk-scsiperipheral-basicsenseinfo">ScsiPeripheral_BasicSenseInfo</a> *senseInfo</td> <td class="cellrowborder" width="50%">用于保存解析后的基本信息，详情参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/pi-scsiperipheralddk-scsiperipheral-basicsenseinfo">ScsiPeripheral_BasicSenseInfo</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">int32_t</td> <td class="cellrowborder" width="50%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_SUCCESS</a> 调用接口成功。</p> <p> <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-scsi-peripheral-types-h#scsiperipheral_ddkerrcode">SCSIPERIPHERAL_DDK_INVALID_PARAMETER</a> senseData格式不是描述符或固定格式、senseDataLen小于</p> <p> SCSIPERIPHERAL_MIN_DESCRIPTOR_FORMAT_SENSE或者senseDataLen小于SCSIPERIPHERAL_MIN_FIXED_FORMAT_SENSE。</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>