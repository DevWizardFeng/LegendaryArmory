<h1 _ngcontent-fet-c119="" class="doc-title ng-star-inserted" title="skeletonDetection（骨骼点检测）"> skeletonDetection（骨骼点检测） </h1>

<div _ngcontent-fet-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>骨骼点检测可以从图像中检测出人体的关键骨骼点，如头部、肩部、手肘、手腕、髋部、膝盖、脚踝等，并给出它们的位置坐标和置信度。同时，骨骼点检测是一项底层的AI能力，还可以与Core Vision Kit中其他AI能力如人脸识别、文字识别等组合使用，开发出更加智能化的应用。</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tiledSection">     <h2 id="section16609101116259" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-fet-c106="" class="highlight-div"><div _ngcontent-fet-c106="" class="highlight-div-header"><div _ngcontent-fet-c106="" class="highlight-div-header-left"><div _ngcontent-fet-c106="" class="handle-button expand-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fet-c106="" class="highlight-div-header-right"><div _ngcontent-fet-c106="" class="handle-button ai-button"></div><div _ngcontent-fet-c106="" class="handle-button line-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fet-c106="" class="handle-button theme-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fet-c106="" class="handle-button copy-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fet-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { visionBase, skeletonDetection } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section4298938144913" device-type="phone,2in1,tablet">SkeletonPointType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section4298938144913" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>骨骼点类型的枚举类。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.Vision.SkeletonDetection</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.1" width="29.959999999999997%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.2" width="39.37%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.3" width="30.669999999999998%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>NOSE</p></td>         <td class="cellrowborder" width="39.37%">          <p>0</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>鼻子。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>LEFT_EYE</p></td>         <td class="cellrowborder" width="39.37%">          <p>1</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>左眼。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>RIGHT_EYE</p></td>         <td class="cellrowborder" width="39.37%">          <p>2</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>右眼。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>LEFT_EAR</p></td>         <td class="cellrowborder" width="39.37%">          <p>3</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>左耳。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>RIGHT_EAR</p></td>         <td class="cellrowborder" width="39.37%">          <p>4</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>右耳。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>LEFT_SHOULDER</p></td>         <td class="cellrowborder" width="39.37%">          <p>5</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>左肩。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>RIGHT_SHOULDER</p></td>         <td class="cellrowborder" width="39.37%">          <p>6</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>右肩。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>LEFT_ELBOW</p></td>         <td class="cellrowborder" width="39.37%">          <p>7</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>左肘。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>RIGHT_ELBOW</p></td>         <td class="cellrowborder" width="39.37%">          <p>8</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>右肘。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>LEFT_WRIST</p></td>         <td class="cellrowborder" width="39.37%">          <p>9</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>左腕。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>RIGHT_WRIST</p></td>         <td class="cellrowborder" width="39.37%">          <p>10</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>右腕。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>LEFT_HIP</p></td>         <td class="cellrowborder" width="39.37%">          <p>11</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>左髋。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>RIGHT_HIP</p></td>         <td class="cellrowborder" width="39.37%">          <p>12</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>右髋。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>LEFT_KNEE</p></td>         <td class="cellrowborder" width="39.37%">          <p>13</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>左膝。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>RIGHT_KNEE</p></td>         <td class="cellrowborder" width="39.37%">          <p>14</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>右膝。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>LEFT_ANKLE</p></td>         <td class="cellrowborder" width="39.37%">          <p>15</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>左脚踝。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="29.959999999999997%">          <p>RIGHT_ANKLE</p></td>         <td class="cellrowborder" width="39.37%">          <p>16</p></td>         <td class="cellrowborder" width="30.669999999999998%">          <p>右脚踝。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section674171818172" device-type="phone,2in1,tablet">SkeletonPoint<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section674171818172" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>详细的骨骼点信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.Vision.SkeletonDetection</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="12.479999999999999%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="22.02%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="11.450000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="15.920000000000002%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="38.129999999999995%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.479999999999999%">          <p>point</p></td>         <td class="cellrowborder" width="22.02%">          <p>visionBase.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-vision-base-api#section1465431712919">Point</a></p></td>         <td class="cellrowborder" width="11.450000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="15.920000000000002%">          <p>否</p></td>         <td class="cellrowborder" width="38.129999999999995%">          <p>骨骼点的图像坐标，即它在图像中的x和y位置。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.479999999999999%">          <p>score</p></td>         <td class="cellrowborder" width="22.02%">          <p>number</p></td>         <td class="cellrowborder" width="11.450000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="15.920000000000002%">          <p>否</p></td>         <td class="cellrowborder" width="38.129999999999995%">          <p>骨骼点的置信度。取值范围是(0,1)。0表示置信度最低，1表示置信度最高，置信度越高，说明这个点的位置越可靠。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.479999999999999%">          <p>type</p></td>         <td class="cellrowborder" width="22.02%">          <p><a href="/consumer/cn/doc/harmonyos-references/core-vision-skeleton-detection-api#section4298938144913">SkeletonPointType</a></p></td>         <td class="cellrowborder" width="11.450000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="15.920000000000002%">          <p>否</p></td>         <td class="cellrowborder" width="38.129999999999995%">          <p>骨骼点的类型，即它在人体骨骼模型中的位置。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section49341529125412" device-type="phone,2in1,tablet">Skeleton<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section49341529125412" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>用于描述一个完整的人体骨骼检测结果。包括总体置信度和人体在图像中的大致位置，还详细列出了各个关键点的位置和类型。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.Vision.SkeletonDetection</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="12.479999999999999%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="25.2%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="8.27%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="15.920000000000002%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="38.129999999999995%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.479999999999999%">          <p>boundingBox</p></td>         <td class="cellrowborder" width="25.2%">          <p>visionBase.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-vision-base-api#section789716171126">BoundingBox</a></p></td>         <td class="cellrowborder" width="8.27%">          <p>否</p></td>         <td class="cellrowborder" width="15.920000000000002%">          <p>否</p></td>         <td class="cellrowborder" width="38.129999999999995%">          <p>骨骼的边界框，也就是所有骨骼点加一起的矩形框。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.479999999999999%">          <p>score</p></td>         <td class="cellrowborder" width="25.2%">          <p>number</p></td>         <td class="cellrowborder" width="8.27%">          <p>否</p></td>         <td class="cellrowborder" width="15.920000000000002%">          <p>否</p></td>         <td class="cellrowborder" width="38.129999999999995%">          <p>表示骨骼点的总体置信度,取值范围是(0,1)，0表示置信度最低，1表示置信度最高。反映了这个骨骼整体的可信程度。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="12.479999999999999%">          <p>points</p></td>         <td class="cellrowborder" width="25.2%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-skeleton-detection-api#section674171818172">SkeletonPoint</a>&gt;</p></td>         <td class="cellrowborder" width="8.27%">          <p>否</p></td>         <td class="cellrowborder" width="15.920000000000002%">          <p>否</p></td>         <td class="cellrowborder" width="38.129999999999995%">          <p>返回包含骨骼点详情的对象数组。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1565918285820" device-type="phone,2in1,tablet">SkeletonDetectionResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1565918285820" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>用于表示一次骨骼点检测的完整结果。作为骨骼点检测的顶层输出，封装了一次检测的全部结果。继承自visionBase的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-vision-base-api#section13793135121418">Response</a>。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.Vision.SkeletonDetection</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="12.479999999999999%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="22.02%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="11.450000000000001%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="15.920000000000002%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="38.129999999999995%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="12.479999999999999%">          <p>skeletons</p></td>         <td class="cellrowborder" width="22.02%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-skeleton-detection-api#section49341529125412">Skeleton</a>&gt;</p></td>         <td class="cellrowborder" width="11.450000000000001%">          <p>否</p></td>         <td class="cellrowborder" width="15.920000000000002%">          <p>否</p></td>         <td class="cellrowborder" width="38.129999999999995%">          <p>包含图片内所有人的人体骨骼点结果集合。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1372216360530" device-type="phone,2in1,tablet">SkeletonDetector<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1372216360530" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>定义骨骼点检测的接口和基本结构。继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-vision-base-api#section6867321337">visionBase.Analyzer</a>类。它有以下功能函数：</p>     <ul>      <li>private constructor()：这是一个私有构造函数，意味着不能直接通过 new 关键字实例化SkeletonDetector。必须通过 create() 静态方法来创建实例。</li>      <li>static create(): Promise&lt;SkeletonDetector&gt;：这是一个静态方法，用于创建SkeletonDetector的实例。使用Promise异步回调。它返回一个 Promise，解析为创建的SkeletonDetector实例。</li>      <li>process(request: visionBase.Request): Promise&lt;SkeletonDetectionResponse&gt;：这是一个实例方法，用于处理骨骼点检测请求。使用Promise异步回调。</li>      <li>destroy(): Promise&lt;void&gt;：这是一个实例方法，用于销毁骨骼点检测的进程，使用Promise异步回调。</li>     </ul>     <p><strong>系统能力：</strong>SystemCapability.AI.Vision.SkeletonDetection</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.1" width="24.560000000000002%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.2" width="75.44%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="24.560000000000002%">          <p>constructor</p></td>         <td class="cellrowborder" width="75.44%">          <p>强制开发者必须使用static create()方法来创建SkeletonDetector的实例。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.560000000000002%">          <p>create</p></td>         <td class="cellrowborder" width="75.44%">          <p>初始化骨骼点检测接口。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.560000000000002%">          <p>process</p></td>         <td class="cellrowborder" width="75.44%">          <p>骨骼点检测的实际执行接口。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="24.560000000000002%">          <p>destroy</p></td>         <td class="cellrowborder" width="75.44%">          <p>骨骼点检测的销毁接口。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section4492525163415" device-type="phone,2in1,tablet" class="firsth2">create<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section4492525163415" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div></div>    <p>static create(): Promise&lt;SkeletonDetector&gt;</p>    <p>骨骼点检测的初始化接口。使用Promise异步回调。</p>    <p><strong>系统能力：</strong>SystemCapability.AI.Vision.SkeletonDetection</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.15.1.3.1.1" width="45.36%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.15.1.3.1.2" width="54.64%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="45.36%">         <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-skeleton-detection-api#section1372216360530">SkeletonDetector</a>&gt;</p></td>        <td class="cellrowborder" width="54.64%">         <p>Promise对象，返回<a href="/consumer/cn/doc/harmonyos-references/core-vision-skeleton-detection-api#section1372216360530">SkeletonDetector</a>实例。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-error-code">Core Vision Kit错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.18.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.18.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>1011000001</p></td>        <td class="cellrowborder" width="50%">         <p>Failed to run, please try again.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p>1011000002</p></td>        <td class="cellrowborder" width="50%">         <p>The service is abnormal.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-fet-c106="" class="highlight-div"><div _ngcontent-fet-c106="" class="highlight-div-header"><div _ngcontent-fet-c106="" class="highlight-div-header-left"><div _ngcontent-fet-c106="" class="handle-button expand-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fet-c106="" class="highlight-div-header-right"><div _ngcontent-fet-c106="" class="handle-button ai-button"></div><div _ngcontent-fet-c106="" class="handle-button line-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fet-c106="" class="handle-button theme-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fet-c106="" class="handle-button copy-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fet-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { skeletonDetection } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createAndDestroyDetector</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> detector = <span class="hljs-keyword">await</span> skeletonDetection.<span class="hljs-property">SkeletonDetector</span>.<span class="hljs-title function_">create</span>();</li><li>  <span class="hljs-keyword">if</span> (detector) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">'Skeleton detector created successfully'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>,<span class="hljs-string">'skeletonDetectionSample'</span>,<span class="hljs-string">'Failed to create Skeleton detector'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 使用 detector 进行一些操作</span></li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-comment">// 完成后销毁 detector</span></li><li>  <span class="hljs-keyword">if</span> (detector) {</li><li>    <span class="hljs-keyword">await</span> detector.<span class="hljs-title function_">destroy</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">'Skeleton detector destroyed successfully'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>,<span class="hljs-string">'skeletonDetectionSample'</span>,<span class="hljs-string">'Failed to destroy Skeleton detector'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'createAndDestroyDetector'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-title function_">createAndDestroyDetector</span>()</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    <div class="tiledSection">     <h3 id="section20133916183415" device-type="phone,2in1,tablet">destroy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section20133916183415" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div></div>    <p>destroy(): Promise&lt;void&gt;</p>    <p>销毁骨骼点检测能力。使用Promise异步回调。</p>    <p><strong>系统能力：</strong>SystemCapability.AI.Vision.SkeletonDetection</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.27.1.3.1.1" width="45.36%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.27.1.3.1.2" width="54.64%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="45.36%">         <p>Promise&lt;void&gt;</p></td>        <td class="cellrowborder" width="54.64%">         <p>无返回结果的Promise对象。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-fet-c106="" class="highlight-div"><div _ngcontent-fet-c106="" class="highlight-div-header"><div _ngcontent-fet-c106="" class="highlight-div-header-left"><div _ngcontent-fet-c106="" class="handle-button expand-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fet-c106="" class="highlight-div-header-right"><div _ngcontent-fet-c106="" class="handle-button ai-button"></div><div _ngcontent-fet-c106="" class="handle-button line-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fet-c106="" class="handle-button theme-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fet-c106="" class="handle-button copy-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fet-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { skeletonDetection } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createAndDestroyDetector</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> detector = <span class="hljs-keyword">await</span> skeletonDetection.<span class="hljs-property">SkeletonDetector</span>.<span class="hljs-title function_">create</span>();</li><li>  <span class="hljs-keyword">if</span> (detector) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">'Skeleton detector created successfully'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>,<span class="hljs-string">'skeletonDetectionSample'</span>,<span class="hljs-string">'Failed to create Skeleton detector'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 使用 detector 进行一些操作</span></li><li>  <span class="hljs-comment">// ...</span></li><li>
</li><li>  <span class="hljs-comment">// 完成后销毁 detector</span></li><li>  <span class="hljs-keyword">if</span> (detector) {</li><li>    <span class="hljs-keyword">await</span> detector.<span class="hljs-title function_">destroy</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">'Skeleton detector destroyed successfully'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>,<span class="hljs-string">'skeletonDetectionSample'</span>,<span class="hljs-string">'Failed to destroy Skeleton detector'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'createAndDestroyDetector'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-title function_">createAndDestroyDetector</span>()</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    <div class="tiledSection">     <h3 id="section3285147203414" device-type="phone,2in1,tablet">process<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3285147203414" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div></div>    <p>process(request: visionBase.Request): Promise&lt;SkeletonDetectionResponse&gt;</p>    <p>创建骨骼点检测实例并执行骨骼点检测。使用Promise异步回调。</p>    <p><strong>系统能力：</strong>SystemCapability.AI.Vision.SkeletonDetection</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>参数：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table>      <thead>       <tr>        <th align="left" class="cellrowborder" id="mcps1.3.36.1.5.1.1" width="19.2%">         <p>参数名</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.36.1.5.1.2" width="22.07%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.36.1.5.1.3" width="11.27%">         <p>必填</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.36.1.5.1.4" width="47.46%">         <p>说明</p></th>       </tr>      </thead>             <tbody><tr>        <td class="cellrowborder" width="19.2%">         <p>request</p></td>        <td class="cellrowborder" width="22.07%">         <p>visionBase.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-vision-base-api#section6430105121211">Request</a></p></td>        <td class="cellrowborder" width="11.27%">         <p>是</p></td>        <td class="cellrowborder" width="47.46%">         <p>图片实例。骨骼点检测接口仅支持传入一张图片，不支持传入多张图片。</p>         <p>具体规格请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/core-vision-introduction#section625292610522" target="_blank">约束与限制</a>。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.38.1.3.1.1" width="45.32%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.38.1.3.1.2" width="54.67999999999999%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="45.32%">         <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/core-vision-skeleton-detection-api#section1565918285820">SkeletonDetectionResponse</a>&gt;</p></td>        <td class="cellrowborder" width="54.67999999999999%">         <p>返回骨骼点识别的结果。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/core-vision-error-code">Core Vision Kit错误码</a>。</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.41.1.3.1.1" width="50%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.41.1.3.1.2" width="50%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="50%">         <p>401</p></td>        <td class="cellrowborder" width="50%">         <p>The parameter check failed.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p>1011000001</p></td>        <td class="cellrowborder" width="50%">         <p>Failed to run, please try again.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p>1011000003</p></td>        <td class="cellrowborder" width="50%">         <p>Failed to run the model, please try again.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="50%">         <p>1011000004</p></td>        <td class="cellrowborder" width="50%">         <p>Running the model timed out. Try again later.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-fet-c106="" class="highlight-div"><div _ngcontent-fet-c106="" class="highlight-div-header"><div _ngcontent-fet-c106="" class="highlight-div-header-left"><div _ngcontent-fet-c106="" class="handle-button expand-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fet-c106="" class="highlight-div-header-right"><div _ngcontent-fet-c106="" class="handle-button ai-button"></div><div _ngcontent-fet-c106="" class="handle-button line-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fet-c106="" class="handle-button theme-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fet-c106="" class="handle-button copy-button"><div _ngcontent-fet-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fet-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { skeletonDetection, visionBase } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreVisionKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">imageSource</span>: image.<span class="hljs-property">ImageSource</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">chooseImage</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li><span class="hljs-comment">// 创建骨骼检测器</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">detector</span>: skeletonDetection.<span class="hljs-property">SkeletonDetector</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createDetector</span>(<span class="hljs-params"></span>) {</li><li>  detector = <span class="hljs-keyword">await</span> skeletonDetection.<span class="hljs-property">SkeletonDetector</span>.<span class="hljs-title function_">create</span>();</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">'Skeleton detector created successfully'</span>);</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Button'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 将图片转换为PixelMap，可以通过图库获取</span></li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">photoPicker</span>: photoAccessHelper.<span class="hljs-property">PhotoViewPicker</span> = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoViewPicker</span>();</li><li>        photoPicker.<span class="hljs-title function_">select</span>({</li><li>          <span class="hljs-title class_">MIMEType</span>: photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_TYPE</span>,</li><li>          <span class="hljs-attr">maxSelectNumber</span>: <span class="hljs-number">1</span></li><li>        }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: photoAccessHelper.PhotoSelectResult</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> uri = res.<span class="hljs-property">photoUris</span>[<span class="hljs-number">0</span>];</li><li>          <span class="hljs-keyword">if</span> (uri === <span class="hljs-literal">undefined</span>) {</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">'uri is undefined'</span>);</li><li>            <span class="hljs-keyword">return</span></li><li>          }</li><li>          <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>            <span class="hljs-keyword">let</span> file = <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">open</span>(uri, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>            imageSource = image.<span class="hljs-title function_">createImageSource</span>(file.<span class="hljs-property">fd</span>);</li><li>            chooseImage = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">'chooseImage:'</span>, chooseImage);</li><li>            <span class="hljs-keyword">if</span> (!chooseImage) {</li><li>              <span class="hljs-keyword">return</span></li><li>            }</li><li>
</li><li>            <span class="hljs-comment">// 创建检测器</span></li><li>            <span class="hljs-keyword">await</span> <span class="hljs-title function_">createDetector</span>();</li><li>
</li><li>            <span class="hljs-keyword">if</span> (!detector) {</li><li>              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">'Detector is not initialized'</span>);</li><li>              <span class="hljs-keyword">return</span>;</li><li>            }</li><li>
</li><li>            <span class="hljs-comment">// 调用骨骼检测接口</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">request</span>: visionBase.<span class="hljs-property">Request</span> = {</li><li>              <span class="hljs-attr">inputData</span>: { <span class="hljs-attr">pixelMap</span>: chooseImage },</li><li>              <span class="hljs-attr">scene</span>: visionBase.<span class="hljs-property">SceneMode</span>.<span class="hljs-property">FOREGROUND</span></li><li>            };</li><li>
</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">response</span>: skeletonDetection.<span class="hljs-property">SkeletonDetectionResponse</span> = <span class="hljs-keyword">await</span> detector.<span class="hljs-title function_">process</span>(request);</li><li>
</li><li>            <span class="hljs-keyword">if</span> (response.<span class="hljs-property">skeletons</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">'No skeletons detected in the image.'</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">`Detected <span class="hljs-subst">${response.skeletons.length}</span> skeletons.`</span>);</li><li>              response.<span class="hljs-property">skeletons</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">skeleton, index</span>) =&gt;</span> {</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">`  Score: <span class="hljs-subst">${skeleton.score}</span>`</span>);</li><li>                hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">`  Number of points: <span class="hljs-subst">${skeleton.points.length}</span>`</span>);</li><li>                skeleton.<span class="hljs-property">points</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">point</span> =&gt;</span> {</li><li>                  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">`    <span class="hljs-subst">${skeletonDetection.SkeletonPointType[point.<span class="hljs-keyword">type</span>]}</span>: (<span class="hljs-subst">${point.point.x}</span>, <span class="hljs-subst">${point.point.y}</span>), Score: <span class="hljs-subst">${point.score}</span>`</span>);</li><li>                });</li><li>              });</li><li>            }</li><li>
</li><li>            <span class="hljs-comment">// 清理资源</span></li><li>            <span class="hljs-keyword">if</span> (chooseImage &amp;&amp; imageSource) {</li><li>              chooseImage.<span class="hljs-title function_">release</span>();</li><li>              imageSource.<span class="hljs-title function_">release</span>();</li><li>            }</li><li>            <span class="hljs-keyword">if</span> (file) {</li><li>              <span class="hljs-keyword">try</span> {</li><li>                <span class="hljs-keyword">await</span> fileIo.<span class="hljs-title function_">close</span>(file);</li><li>              } <span class="hljs-keyword">catch</span> (err) {</li><li>                hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">`Failed to close fileSource. Code: <span class="hljs-subst">${err.code}</span>，message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>              }</li><li>            }</li><li>            <span class="hljs-keyword">if</span> (detector) {</li><li>              <span class="hljs-keyword">await</span> detector.<span class="hljs-title function_">destroy</span>();</li><li>              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">'Skeleton detector destroyed successfully'</span>);</li><li>            }</li><li>          }, <span class="hljs-number">100</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>          hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'skeletonDetectionSample'</span>, <span class="hljs-string">`Failed to get photo image uri. code: <span class="hljs-subst">${err.code}</span>，message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>   </div>   <div></div></div>