<h1 _ngcontent-kjr-c119="" class="doc-title ng-star-inserted" title="speechRecognizer（语音识别）"> speechRecognizer（语音识别） </h1>

<div _ngcontent-kjr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>语音识别服务提供将音频信息转换为文本的能力，便于用户与设备进行互动，实现实时语音交互、语音识别。</p>    <p>目前本服务支持的语种为中文，支持的模型为离线。</p>    <p><strong>起始版本：</strong>4.1.0(11)</p>    <div class="tiledSection">     <h2 id="section16609101116259" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section53411946183318" device-type="phone,2in1,tablet">speechRecognizer.createEngine<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section53411946183318" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>createEngine(createEngineParams: CreateEngineParams, callback: AsyncCallback&lt;SpeechRecognitionEngine&gt;): void</p>     <p>创建SpeechRecognitionEngine实例，并初始化引擎。使用callback异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="36.6%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="10.36%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="33.839999999999996%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>createEngineParams</p></td>         <td class="cellrowborder" width="36.6%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section1638144844811">CreateEngineParams</a></p></td>         <td class="cellrowborder" width="10.36%">          <p>是</p></td>         <td class="cellrowborder" width="33.839999999999996%">          <p>创建引擎实例的配置项。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="36.6%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#asynccallback" target="_blank">AsyncCallback</a>&lt;<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section153101728203110">SpeechRecognitionEngine</a>&gt;</p></td>         <td class="cellrowborder" width="10.36%">          <p>是</p></td>         <td class="cellrowborder" width="33.839999999999996%">          <p>回调函数。返回创建的引擎实例。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>1002200001</p></td>         <td class="cellrowborder" width="50%">          <p>Create engine failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200006</p></td>         <td class="cellrowborder" width="50%">          <p>The engine of SpeechRecognition is busy.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200008</p></td>         <td class="cellrowborder" width="50%">          <p>The engine of SpeechRecognition is being destroyed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200009</p></td>         <td class="cellrowborder" width="50%">          <p>Internal Service Error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li>
</li><li><span class="hljs-comment">// 设置创建引擎参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParams</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = { <span class="hljs-string">"locate"</span>: <span class="hljs-string">"CN"</span>, <span class="hljs-string">"recognizerMode"</span>: <span class="hljs-string">"short"</span> }</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">initParamsInfo</span>: speechRecognizer.<span class="hljs-property">CreateEngineParams</span> = {</li><li>  <span class="hljs-attr">language</span>: <span class="hljs-string">'zh-CN'</span>,</li><li>  <span class="hljs-attr">online</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">extraParams</span>: extraParams</li><li>};</li><li>
</li><li><span class="hljs-comment">// 调用createEngine方法</span></li><li>speechRecognizer.<span class="hljs-title function_">createEngine</span>(initParamsInfo, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, speechRecognitionEngine: </span></span></li><li><span class="hljs-function">speechRecognizer.SpeechRecognitionEngine</span>) =&gt; {</li><li>  <span class="hljs-keyword">if</span> (!err) {</li><li>    <span class="hljs-comment">// 接收创建引擎的实例</span></li><li>    asrEngine = speechRecognitionEngine;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-comment">// 无法创建引擎时返回错误码1002200001，原因：语种不支持、模式不支持、初始化超时、资源不存在等导致创建引擎失败</span></li><li>      <span class="hljs-comment">// 无法创建引擎时返回错误码1002200006，原因：引擎正在忙碌中，一般多个应用同时调用语音识别引擎时触发</span></li><li>      <span class="hljs-comment">// 无法创建引擎时返回错误码1002200008，原因：引擎已被销毁</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create engine. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  }</li><li>});</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section184134193313" device-type="phone,2in1,tablet">speechRecognizer.createEngine<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section184134193313" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>createEngine(createEngineParams: CreateEngineParams): Promise&lt;SpeechRecognitionEngine&gt;</p>     <p>创建SpeechRecognitionEngine实例，并初始化引擎。使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>createEngineParams</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section1638144844811">CreateEngineParams</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>创建引擎实例的配置项。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section153101728203110">SpeechRecognitionEngine</a>&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。返回创建的引擎实例。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>1002200001</p></td>         <td class="cellrowborder" width="50%">          <p>Create engine failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200006</p></td>         <td class="cellrowborder" width="50%">          <p>The engine of SpeechRecognition is busy.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200008</p></td>         <td class="cellrowborder" width="50%">          <p>The engine of SpeechRecognition is being destroyed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200009</p></td>         <td class="cellrowborder" width="50%">          <p>Internal Service Error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li>
</li><li><span class="hljs-comment">// 设置创建引擎参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">extraParams</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt; = { <span class="hljs-string">"locate"</span>: <span class="hljs-string">"CN"</span>, <span class="hljs-string">"recognizerMode"</span>: <span class="hljs-string">"short"</span> }</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">initParamsInfo</span>: speechRecognizer.<span class="hljs-property">CreateEngineParams</span> = {</li><li>  <span class="hljs-attr">language</span>: <span class="hljs-string">'zh-CN'</span>,</li><li>  <span class="hljs-attr">online</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">extraParams</span>: extraParams</li><li>};</li><li>
</li><li><span class="hljs-comment">// 调用createEngine方法</span></li><li>speechRecognizer.<span class="hljs-title function_">createEngine</span>(initParamsInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">speechRecognitionEngine: speechRecognizer.SpeechRecognitionEngine</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 接收引擎实例 </span></li><li>  asrEngine = speechRecognitionEngine;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating engine.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create engine. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>});</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section153101728203110" device-type="phone,2in1,tablet">SpeechRecognitionEngine<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section153101728203110" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>语音识别类，用于执行语音识别过程中的相关操作。在调用SpeechRecognitionEngine的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section53411946183318">createEngine</a>方法创建一个<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section153101728203110">SpeechRecognitionEngine</a>实例。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>    </div>    <div class="tiledSection">     <h3 id="section813761871119" device-type="phone,2in1,tablet" class="firsth2">listLanguages<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section813761871119" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>listLanguages(params: LanguageQuery, callback: AsyncCallback&lt;Array&lt;string&gt;&gt;): void</p>     <p>查询支持的语种信息，使用callback异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>params</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section235272615215">LanguageQuery</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>查询语种信息请求参数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>callback</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#asynccallback" target="_blank">AsyncCallback</a>&lt;Array&lt;string&gt;&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调函数。返回查询结果。</p>          <p>当前仅支持中文，返回结果为：["zh-CN"]。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200007</p></td>         <td class="cellrowborder" width="50%">          <p>The engine is not initialized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200009</p></td>         <td class="cellrowborder" width="50%">          <p>Internal Service Error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-comment">// 查询语种信息，以callback形式返回</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">queryLanguagesCallback</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 设置查询相关参数</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">languageQuery</span>: speechRecognizer.<span class="hljs-property">LanguageQuery</span> = {</li><li>      <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'123456'</span></li><li>    };</li><li>    <span class="hljs-comment">// 调用listLanguages方法</span></li><li>    asrEngine.<span class="hljs-title function_">listLanguages</span>(languageQuery, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, languages: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!err) {</li><li>        <span class="hljs-comment">// 接收目前支持的语种信息</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in listing languages, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(languages)}</span>.`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to list languages. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>      }</li><li>    });</li><li>  };</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section125219451411" device-type="phone,2in1,tablet">listLanguages<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section125219451411" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>listLanguages(params: LanguageQuery): Promise&lt;Array&lt;string&gt;&gt;</p>     <p>查询支持的语种信息，使用Promise异步回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>params</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section235272615215">LanguageQuery</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>查询语种信息请求参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>Promise&lt;Array&lt;string&gt;&gt;</p></td>         <td class="cellrowborder" width="50%">          <p>Promise对象。返回查询的结果。</p>          <p>当前仅支持中文，返回结果为：["zh-CN"]。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200007</p></td>         <td class="cellrowborder" width="50%">          <p>The engine is not initialized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200009</p></td>         <td class="cellrowborder" width="50%">          <p>Internal Service Error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-comment">// 设置查询相关的参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">languageQuery</span>: speechRecognizer.<span class="hljs-property">LanguageQuery</span> = {</li><li>  <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'123456'</span></li><li>};</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用listLanguages方法，查询引擎目前支持的语种信息，以Promise返回</span></li><li>        asrEngine.<span class="hljs-title function_">listLanguages</span>(languageQuery).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in listing languages, result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(res)}</span>.`</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to list languages. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>        });</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section1745872517348" device-type="phone,2in1,tablet">setListener<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1745872517348" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setListener(listener: RecognitionListener): void</p>     <p>设置语音识别回调。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>listener</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section845815011389">RecognitionListener</a></p></td>         <td class="cellrowborder" width="9.24%">          <p class="subsection">是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>回调对象，识别过程中所有回调信息均通过此对象返回。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-comment">// 创建回调对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">setListener</span>: speechRecognizer.<span class="hljs-property">RecognitionListener</span> = {</li><li>  <span class="hljs-comment">// 开始识别成功回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 事件回调</span></li><li>  <span class="hljs-title function_">onEvent</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventCode: <span class="hljs-built_in">number</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onEvent, sessionId: <span class="hljs-subst">${sessionId}</span> eventCode: <span class="hljs-subst">${eventCode}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别结果回调，包括中间结果和最终结果</span></li><li>  <span class="hljs-title function_">onResult</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, result: speechRecognizer.SpeechRecognitionResult</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onResult, sessionId: <span class="hljs-subst">${sessionId}</span> sessionId: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调，错误码通过本方法返回</span></li><li>  <span class="hljs-comment">// 返回错误码1002200002，开始识别失败，重复启动startListening方法时触发</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, sessionId: <span class="hljs-subst">${sessionId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  },</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        asrEngine.<span class="hljs-title function_">setListener</span>(setListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section140216144119" device-type="phone,2in1,tablet">startListening<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section140216144119" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>startListening(params: StartParams): void</p>     <p>启动语音识别。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>params</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section7843122735210">StartParams</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>启动语音识别的相关参数，用于设置会话ID、音频配置信息等。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200002</p></td>         <td class="cellrowborder" width="50%">          <p>Start listening failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200007</p></td>         <td class="cellrowborder" width="50%">          <p>The engine is not initialized.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-comment">// 设置开始识别相关参数</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">recognizerParams</span>: speechRecognizer.<span class="hljs-property">StartParams</span> = {</li><li>  <span class="hljs-attr">sessionId</span>: <span class="hljs-string">'123456'</span>,</li><li>  <span class="hljs-attr">audioInfo</span>: { <span class="hljs-attr">audioType</span>: <span class="hljs-string">'pcm'</span>, <span class="hljs-attr">sampleRate</span>: <span class="hljs-number">16000</span>, <span class="hljs-attr">soundChannel</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">sampleBit</span>: <span class="hljs-number">16</span> }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用开始识别方法</span></li><li>        asrEngine.<span class="hljs-title function_">startListening</span>(recognizerParams);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section72131731149" device-type="phone,2in1,tablet">writeAudio<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section72131731149" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>writeAudio(sessionId: string, audio: Uint8Array): void</p>     <p>写音频流，最大音频长度为60000ms。为了确保收到识别结果，请优先调用<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section1745872517348">setListener</a>和<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section140216144119">startListening</a>。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>sessionId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>会话ID。</p>          <p>由字母、数字、下划线和短横线组成。</p>          <p>区分不同会话，无长度限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>audio</p></td>         <td class="cellrowborder" width="30.8%">          <p>Uint8Array</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>待识别的音频数据，当前仅支持音频数据长度为640字节或1280字节。每次发送音频调用间隔必须为20ms（传输音频长度为640字节）或40ms（传输音频长度为1280字节）。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200003</p></td>         <td class="cellrowborder" width="50%">          <p>Exceeded the maximum audio length supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200007</p></td>         <td class="cellrowborder" width="50%">          <p>The engine is not initialized.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200010</p></td>         <td class="cellrowborder" width="50%">          <p>Write audio failed because the start listening is failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'123456'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>();</li><li><span class="hljs-comment">// 可以通过如下方式获取音频流：1、通过录音获取音频流；2、从音频文件中读取音频流</span></li><li><span class="hljs-comment">// 2、从音频文件中读取音频流:</span><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/speechrecognizer-guide#section56481271497" target="_blank"><span class="hljs-comment">demo参考</span></a></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 写入音频流，音频流长度仅支持640字节或1280字节</span></li><li>        asrEngine.<span class="hljs-title function_">writeAudio</span>(sessionId, uint8Array);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section14433919171116" device-type="phone,2in1,tablet">finish<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14433919171116" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>finish(sessionId: string): void</p>     <p>结束识别。为了确保事件回调，请优先调用<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section1745872517348">setListener</a>。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>sessionId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>会话ID。</p>          <p>由字母、数字、下划线和短横线组成。</p>          <p>区分不同会话，无长度限制。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200004</p></td>         <td class="cellrowborder" width="50%">          <p>Finish recognition failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200007</p></td>         <td class="cellrowborder" width="50%">          <p>The engine is not initialized.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'123456'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>();</li><li><span class="hljs-comment">// 可以通过如下方式获取音频流：1、通过录音获取音频流；2、从音频文件中读取音频流</span></li><li><span class="hljs-comment">// 2、从音频文件中读取音频流:demo参考</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>()</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 写入音频流，音频流长度仅支持640字节或1280字节</span></li><li>          asrEngine.<span class="hljs-title function_">writeAudio</span>(sessionId, uint8Array);</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"finish"</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">"#0x317AE7"</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">"80%"</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 结束识别</span></li><li>        asrEngine.<span class="hljs-title function_">finish</span>(sessionId);</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section3235541759" device-type="phone,2in1,tablet">cancel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3235541759" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>cancel(sessionId: string): void</p>     <p>取消识别。为了确保事件回调，请优先调用<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section1745872517348">setListener</a>。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>sessionId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>会话ID。</p>          <p>由字母、数字、下划线和短横线组成。</p>          <p>区分不同会话，无长度限制。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>401</p></td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200005</p></td>         <td class="cellrowborder" width="50%">          <p>Cancel recognition failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1002200007</p></td>         <td class="cellrowborder" width="50%">          <p>The engine is not initialized.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'123456'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>();</li><li><span class="hljs-comment">// 可以通过如下方式获取音频流：1、通过录音获取音频流；2、从音频文件中读取音频流</span></li><li><span class="hljs-comment">// 2、从音频文件中读取音频流:demo参考</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>()</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 写入音频流，音频流长度仅支持640字节或1280字节</span></li><li>          asrEngine.<span class="hljs-title function_">writeAudio</span>(sessionId, uint8Array);</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"cancel"</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">"#0x317AE7"</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">"80%"</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用cancel方法</span></li><li>        asrEngine.<span class="hljs-title function_">cancel</span>(<span class="hljs-string">'123456'</span>);</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section35361720111113" device-type="phone,2in1,tablet">isBusy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section35361720111113" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>isBusy(): boolean</p>     <p>判断引擎是否繁忙。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>boolean</p></td>         <td class="cellrowborder" width="50%">          <p>服务是否处于繁忙状态的返回值。</p>          <ul>           <li>true：引擎正处于繁忙状态。</li>           <li>false：引擎没有处于繁忙状态。</li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>1002200007</p></td>         <td class="cellrowborder" width="50%">          <p>The engine is not initialized.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'123456'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>();</li><li><span class="hljs-comment">// 可以通过如下方式获取音频流：1、通过录音获取音频流；2、从音频文件中读取音频流</span></li><li><span class="hljs-comment">// 2、从音频文件中读取音频流:demo参考</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>()</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 写入音频流，音频流长度仅支持640字节或1280字节</span></li><li>          asrEngine.<span class="hljs-title function_">writeAudio</span>(sessionId, uint8Array);</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"cancel"</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">"#0x317AE7"</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">"80%"</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用isBusy方法</span></li><li>        <span class="hljs-keyword">let</span> isBusy = asrEngine.<span class="hljs-title function_">isBusy</span>();</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`isBusy: <span class="hljs-subst">${isBusy}</span>`</span>);</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section444415855615" device-type="phone,2in1,tablet">shutdown<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section444415855615" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>shutdown(): void</p>     <p>关闭引擎，释放资源。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'123456'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uint8Array</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>();</li><li><span class="hljs-comment">// 可以通过如下方式获取音频流：1、通过录音获取音频流；2、从音频文件中读取音频流</span></li><li><span class="hljs-comment">// 2、从音频文件中读取音频流:demo参考</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>()</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 写入音频流，音频流长度仅支持640字节或1280字节</span></li><li>          asrEngine.<span class="hljs-title function_">writeAudio</span>(sessionId, uint8Array);</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">"cancel"</span>)</li><li>          .<span class="hljs-title function_">fontColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">White</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">"#0x317AE7"</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">"80%"</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 调用shutdown方法</span></li><li>        asrEngine.<span class="hljs-title function_">shutdown</span>();</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section845815011389" device-type="phone,2in1,tablet">RecognitionListener<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section845815011389" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>语音识别的回调对象，通过此对象可返回识别过程的相关状态，例如识别开始、识别完成、音频开始、音频结束等。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>    </div>    <div class="tiledSection">     <h3 id="section1691519526562" device-type="phone,2in1,tablet" class="firsth2">onStart<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1691519526562" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onStart(sessionId: string, eventMessage: string): void</p>     <p>开始识别时，回调此方法。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>sessionId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>会话ID。</p>          <p>由字母、数字、下划线和短横线组成。</p>          <p>区分不同会话，无长度限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>eventMessage</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>开始识别信息描述。</p>          <p>返回值为一个句子，描述开始识别结果的状态信息，开始识别成功则返回：startListening success.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-comment">// 创建回调对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">setListener</span>: speechRecognizer.<span class="hljs-property">RecognitionListener</span> = {</li><li>  <span class="hljs-comment">// 开始识别成功回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 事件回调</span></li><li>  <span class="hljs-title function_">onEvent</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventCode: <span class="hljs-built_in">number</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onEvent, sessionId: <span class="hljs-subst">${sessionId}</span> eventCode: <span class="hljs-subst">${eventCode}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别结果回调，包括中间结果和最终结果</span></li><li>  <span class="hljs-title function_">onResult</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, result: speechRecognizer.SpeechRecognitionResult</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onResult, sessionId: <span class="hljs-subst">${sessionId}</span> sessionId: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调，错误码通过本方法返回</span></li><li>  <span class="hljs-comment">// 返回错误码1002200002，开始识别失败，重复启动startListening方法时触发</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, sessionId: <span class="hljs-subst">${sessionId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  },</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        asrEngine.<span class="hljs-title function_">setListener</span>(setListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section19202141555610" device-type="phone,2in1,tablet">onEvent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19202141555610" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onEvent(sessionId: string, eventCode: number, eventMessage: string): void</p>     <p>识别过程中的事件都通过此方法回调，例如音频开始、音频结束。vadBegin或vadEnd时触发。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>sessionId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>会话ID。</p>          <p>由字母、数字、下划线和短横线组成。</p>          <p>区分不同会话，无长度限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>eventCode</p></td>         <td class="cellrowborder" width="30.8%">          <p>number</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>事件标识。</p>          <ul>           <li>1：音频开始标识。</li>           <li>3：音频结束标识。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>eventMessage</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>事件信息描述。</p>          <p>返回值为一个句子，描述识别过程的事件信息。</p>          <ul>           <li>音频开始：speech started.</li>           <li>音频结束：speech stopped.</li>          </ul></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-comment">// 创建回调对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">setListener</span>: speechRecognizer.<span class="hljs-property">RecognitionListener</span> = {</li><li>  <span class="hljs-comment">// 开始识别成功回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 事件回调</span></li><li>  <span class="hljs-title function_">onEvent</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventCode: <span class="hljs-built_in">number</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onEvent, sessionId: <span class="hljs-subst">${sessionId}</span> eventCode: <span class="hljs-subst">${eventCode}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别结果回调，包括中间结果和最终结果</span></li><li>  <span class="hljs-title function_">onResult</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, result: speechRecognizer.SpeechRecognitionResult</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onResult, sessionId: <span class="hljs-subst">${sessionId}</span> sessionId: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调，错误码通过本方法返回</span></li><li>  <span class="hljs-comment">// 返回错误码1002200002，开始识别失败，重复启动startListening方法时触发</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, sessionId: <span class="hljs-subst">${sessionId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  },</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        asrEngine.<span class="hljs-title function_">setListener</span>(setListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section37697105613" device-type="phone,2in1,tablet">onResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section37697105613" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onResult(sessionId: string, result: SpeechRecognitionResult): void</p>     <p>识别的中间结果和最终结果都通过此方法返回。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>sessionId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>会话ID。</p>          <p>由字母、数字、下划线和短横线组成。</p>          <p>区分不同会话，无长度限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>result</p></td>         <td class="cellrowborder" width="30.8%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section270311282525">SpeechRecognitionResult</a></p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>识别结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-comment">// 创建回调对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">setListener</span>: speechRecognizer.<span class="hljs-property">RecognitionListener</span> = {</li><li>  <span class="hljs-comment">// 开始识别成功回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 事件回调</span></li><li>  <span class="hljs-title function_">onEvent</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventCode: <span class="hljs-built_in">number</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onEvent, sessionId: <span class="hljs-subst">${sessionId}</span> eventCode: <span class="hljs-subst">${eventCode}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别结果回调，包括中间结果和最终结果</span></li><li>  <span class="hljs-title function_">onResult</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, result: speechRecognizer.SpeechRecognitionResult</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onResult, sessionId: <span class="hljs-subst">${sessionId}</span> sessionId: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调，错误码通过本方法返回</span></li><li>  <span class="hljs-comment">// 返回错误码1002200002，开始识别失败，重复启动startListening方法时触发</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, sessionId: <span class="hljs-subst">${sessionId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  },</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        asrEngine.<span class="hljs-title function_">setListener</span>(setListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section2023291912560" device-type="phone,2in1,tablet">onComplete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2023291912560" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onComplete(sessionId: string, eventMessage: string): void</p>     <p>识别结束或者调用<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section14433919171116">finish</a>方法主动结束识别时回调此方法，返回会话ID、识别完成的相关描述信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>sessionId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>会话ID。</p>          <p>由字母、数字、下划线和短横线组成。</p>          <p>区分不同会话，无长度限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>eventMessage</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>识别完成的相关信息。</p>          <p>返回值为一个句子，描述识别结束的状态信息：recognize complete</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-comment">// 创建回调对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">setListener</span>: speechRecognizer.<span class="hljs-property">RecognitionListener</span> = {</li><li>  <span class="hljs-comment">// 开始识别成功回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 事件回调</span></li><li>  <span class="hljs-title function_">onEvent</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventCode: <span class="hljs-built_in">number</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onEvent, sessionId: <span class="hljs-subst">${sessionId}</span> eventCode: <span class="hljs-subst">${eventCode}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别结果回调，包括中间结果和最终结果</span></li><li>  <span class="hljs-title function_">onResult</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, result: speechRecognizer.SpeechRecognitionResult</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onResult, sessionId: <span class="hljs-subst">${sessionId}</span> sessionId: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调，错误码通过本方法返回</span></li><li>  <span class="hljs-comment">// 返回错误码1002200002，开始识别失败，重复启动startListening方法时触发</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, sessionId: <span class="hljs-subst">${sessionId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  },</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        asrEngine.<span class="hljs-title function_">setListener</span>(setListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="section19604102215562" device-type="phone,2in1,tablet">onError<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section19604102215562" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>onError(sessionId: string, errorCode: number, errorMessage: string): void</p>     <p>识别过程中，出现错误时回调，返回会话ID、错误码及错误信息描述。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>sessionId</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>会话ID。</p>          <p>由字母、数字、下划线和短横线组成。</p>          <p>区分不同会话，无长度限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>errorCode</p></td>         <td class="cellrowborder" width="30.8%">          <p>number</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-corespeech">Core Speech Kit错误码</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>errorMessage</p></td>         <td class="cellrowborder" width="30.8%">          <p>string</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>错误信息描述。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-kjr-c106="" class="highlight-div"><div _ngcontent-kjr-c106="" class="highlight-div-header"><div _ngcontent-kjr-c106="" class="highlight-div-header-left"><div _ngcontent-kjr-c106="" class="handle-button expand-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kjr-c106="" class="highlight-div-header-right"><div _ngcontent-kjr-c106="" class="handle-button ai-button"></div><div _ngcontent-kjr-c106="" class="handle-button line-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kjr-c106="" class="handle-button theme-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kjr-c106="" class="handle-button copy-button"><div _ngcontent-kjr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kjr-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { speechRecognizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreSpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">asrEngine</span>: speechRecognizer.<span class="hljs-property">SpeechRecognitionEngine</span>;</li><li><span class="hljs-comment">// 创建回调对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">setListener</span>: speechRecognizer.<span class="hljs-property">RecognitionListener</span> = {</li><li>  <span class="hljs-comment">// 开始识别成功回调</span></li><li>  <span class="hljs-title function_">onStart</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onStart, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 事件回调</span></li><li>  <span class="hljs-title function_">onEvent</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventCode: <span class="hljs-built_in">number</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onEvent, sessionId: <span class="hljs-subst">${sessionId}</span> eventCode: <span class="hljs-subst">${eventCode}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别结果回调，包括中间结果和最终结果</span></li><li>  <span class="hljs-title function_">onResult</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, result: speechRecognizer.SpeechRecognitionResult</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onResult, sessionId: <span class="hljs-subst">${sessionId}</span> sessionId: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 识别完成回调</span></li><li>  <span class="hljs-title function_">onComplete</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, eventMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onComplete, sessionId: <span class="hljs-subst">${sessionId}</span> eventMessage: <span class="hljs-subst">${eventMessage}</span>`</span>);</li><li>  },</li><li>  <span class="hljs-comment">// 错误回调，错误码通过本方法返回</span></li><li>  <span class="hljs-comment">// 返回错误码1002200002，开始识别失败，重复启动startListening方法时触发</span></li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">sessionId: <span class="hljs-built_in">string</span>, errorCode: <span class="hljs-built_in">number</span>, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`onError, sessionId: <span class="hljs-subst">${sessionId}</span> errorCode: <span class="hljs-subst">${errorCode}</span> errorMessage: <span class="hljs-subst">${errorMessage}</span>`</span>);</li><li>  },</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Page</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Button</span>()</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'Button'</span>)</li><li>      .<span class="hljs-title function_">onClick</span>( <span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 设置回调</span></li><li>        asrEngine.<span class="hljs-title function_">setListener</span>(setListener);</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1638144844811" device-type="phone,2in1,tablet">CreateEngineParams<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1638144844811" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>创建引擎实例的相关参数，用于配置语种、模式、区域信息等。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.1" width="14.64%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.2" width="22.36%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.4" width="11.4%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.6.1.5" width="44.080000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="14.64%">          <p>language</p></td>         <td class="cellrowborder" width="22.36%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="11.4%">          <p>否</p></td>         <td class="cellrowborder" width="44.080000000000005%">          <p>语种，当前仅支持“zh-CN”中文。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.64%">          <p>online</p></td>         <td class="cellrowborder" width="22.36%">          <p>number</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="11.4%">          <p>否</p></td>         <td class="cellrowborder" width="44.080000000000005%">          <p>模式。</p>          <p>1为离线，当前仅支持离线模式。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.64%">          <p>extraParams</p></td>         <td class="cellrowborder" width="22.36%">          <p>Record&lt;string, Object&gt;</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="11.4%">          <p>是</p></td>         <td class="cellrowborder" width="44.080000000000005%">          <ul>           <li>&lt;'locate', string&gt; 区域信息。</li>          </ul>          <p>可选，不设置时默认为“CN”，当前仅支持“CN”。</p>          <ul>           <li>&lt;'recognizerMode', Object&gt; 语言模式。</li>          </ul>          <p>可选，不设置时默认为“short”，当前支持“short“和“long”。</p>          <ul>           <li>&lt;'sysGeneralLexicon, string[]&gt; 系统热词。支持配置热词提高识别率。系统热词针对应用，在整个识别过程中都生效。</li>          </ul>          <p>可选，不设置时默认为空。热词总数不超过200，每个热词长度范围为[2, 20]。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section235272615215" device-type="phone,2in1,tablet">LanguageQuery<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section235272615215" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>查询语种信息时的相关参数，例如查询离线模式下服务支持的语种信息，需将online参数设置为1。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.1" width="15.97%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.2" width="25.95%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.4" width="11.28%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.5" width="39.28%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="15.97%">          <p>sessionId</p></td>         <td class="cellrowborder" width="25.95%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="11.28%">          <p>否</p></td>         <td class="cellrowborder" width="39.28%">          <p>会话ID。</p>          <p>由字母、数字、下划线和短横线组成。</p>          <p>区分不同会话，无长度限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15.97%">          <p>extraParams</p></td>         <td class="cellrowborder" width="25.95%">          <p>Record&lt;string, Object&gt;</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="11.28%">          <p>是</p></td>         <td class="cellrowborder" width="39.28%">          <ul>           <li>&lt;'online', number&gt; 模式。</li>          </ul>          <p>可选，1为离线，当前仅支持离线。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section7843122735210" device-type="phone,2in1,tablet">StartParams<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7843122735210" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>启动语音识别的相关参数，用于设置会话ID、音频配置信息等。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.1" width="15.17%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.2" width="22.09%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.3" width="7.5200000000000005%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.4" width="9.55%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.5.1.6.1.5" width="45.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="15.17%">          <p>sessionId</p></td>         <td class="cellrowborder" width="22.09%">          <p>string</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="9.55%">          <p>否</p></td>         <td class="cellrowborder" width="45.67%">          <p>会话ID。</p>          <p>由字母、数字、下划线和短横线组成。</p>          <p>区分不同会话，无长度限制。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15.17%">          <p>audioInfo</p></td>         <td class="cellrowborder" width="22.09%">          <p><a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section85771521101910">AudioInfo</a></p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="9.55%">          <p>否</p></td>         <td class="cellrowborder" width="45.67%">          <p>音频配置信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15.17%">          <p>extraParams</p></td>         <td class="cellrowborder" width="22.09%">          <p>Record&lt;string, Object&gt;</p></td>         <td class="cellrowborder" width="7.5200000000000005%">          <p>否</p></td>         <td class="cellrowborder" width="9.55%">          <p>是</p></td>         <td class="cellrowborder" width="45.67%">          <ul>           <li>&lt;'recognitionMode', number&gt;实时语音识别模式。</li>          </ul>          <p>0：实时录音识别（需应用开启录音权限：ohos.permission.MICROPHONE），若需结束录音，则调用<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section14433919171116">finish</a>方法；</p>          <p>1：实时音频转文字识别，开启此模式时需要额外调用<a href="/consumer/cn/doc/harmonyos-references/hms-ai-speechrecognizer#section72131731149">writeAudio</a>方法，传入待识别音频流；</p>          <p>可选，不传参时默认为1。</p>          <ul>           <li>&lt;'vadBegin', number&gt;</li>          </ul>          <p>Voice Activity Detection(VAD)前端点设置。参数范围是[500,10000]。</p>          <p>可选，不传参时默认为10000ms。</p>          <ul>           <li>&lt;'vadEnd', number&gt;</li>          </ul>          <p>Voice Activity Detection(VAD)后端点设置。参数范围是[500,10000]。</p>          <p>可选，不传参时默认为800ms。</p>          <ul>           <li>&lt;'maxAudioDuration', number&gt;最大支持音频时长，不传参时默认20000ms。</li>          </ul>          <p>短语音模式支持范围[20000-60000]，单位ms。</p>          <p>长语音模式支持范围[20000 - 8 * 60 * 60 * 1000]，单位ms。</p>          <ul>           <li>&lt;'recognizerOption', &lt;'enablePartialResult', boolean&gt;&gt;</li>          </ul>          <p>蹦字模式。（只支持长语音模式下进行配置）</p>          <p>可选，不传参时默认为开启。</p>          <p>开启蹦字模式：</p>          <p>"recognizerOption": recognizerOption = {</p>          <p>"enablePartialResult": true</p>          <p>}</p>          <p>关闭蹦字模式：</p>          <p>"recognizerOption": recognizerOption = {</p>          <p>"enablePartialResult": false</p>          <p>}</p>          <ul>           <li>&lt;'sessionGeneralLexicon': string[]&gt;</li>          </ul>          <p>会话热词。支持配置热词提高识别率。会话热词优先级比系统热词更高，会话结束时释放。</p>          <p>可选，不设置时默认为空。热词总数不超过200，每个热词长度范围为[2, 20]。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section85771521101910" device-type="phone,2in1,tablet">AudioInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section85771521101910" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>音频配置信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.1" width="15.818418158184183%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.2" width="22.897710228977104%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.3" width="7.519248075192481%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.4" width="9.149085091490852%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.5" width="44.615538446155384%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="15.818418158184183%">          <p>audioType</p></td>         <td class="cellrowborder" width="22.897710228977104%">          <p>string</p></td>         <td class="cellrowborder" width="7.519248075192481%">          <p>否</p></td>         <td class="cellrowborder" width="9.149085091490852%">          <p>否</p></td>         <td class="cellrowborder" width="44.615538446155384%">          <p>音频类型。</p>          <p>当前仅支持“pcm”。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15.818418158184183%">          <p>sampleRate</p></td>         <td class="cellrowborder" width="22.897710228977104%">          <p>number</p></td>         <td class="cellrowborder" width="7.519248075192481%">          <p>否</p></td>         <td class="cellrowborder" width="9.149085091490852%">          <p>否</p></td>         <td class="cellrowborder" width="44.615538446155384%">          <p>音频的采样率。</p>          <p>当前仅支持16000采样率。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15.818418158184183%">          <p>sampleBit</p></td>         <td class="cellrowborder" width="22.897710228977104%">          <p>number</p></td>         <td class="cellrowborder" width="7.519248075192481%">          <p>否</p></td>         <td class="cellrowborder" width="9.149085091490852%">          <p>否</p></td>         <td class="cellrowborder" width="44.615538446155384%">          <p>音频返回的采样位数。</p>          <p>当前仅支持16位。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15.818418158184183%">          <p>soundChannel</p></td>         <td class="cellrowborder" width="22.897710228977104%">          <p>number</p></td>         <td class="cellrowborder" width="7.519248075192481%">          <p>否</p></td>         <td class="cellrowborder" width="9.149085091490852%">          <p>否</p></td>         <td class="cellrowborder" width="44.615538446155384%">          <p>音频返回的通道数信息。</p>          <p>当前仅支持通道1。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="15.818418158184183%">          <p>extraParams</p></td>         <td class="cellrowborder" width="22.897710228977104%">          <p>Record&lt;string, Object&gt;</p></td>         <td class="cellrowborder" width="7.519248075192481%">          <p>否</p></td>         <td class="cellrowborder" width="9.149085091490852%">          <p>是</p></td>         <td class="cellrowborder" width="44.615538446155384%">          <ul>           <li>&lt;'compressRate', number&gt; 音频的压缩率。</li>          </ul>          <p>可选，pcm格式音频默认为0。预留参数，当前无实际使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section270311282525" device-type="phone,2in1,tablet">SpeechRecognitionResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section270311282525" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>音频识别结果信息。</p>     <p><strong>系统能力：</strong>SystemCapability.AI.SpeechRecognizer</p>     <p><strong>起始版本：</strong>4.1.0(11)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.1" width="17.301730173017297%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.2" width="15.69156915691569%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.3" width="7.520752075207521%">          <p>只读</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.4" width="6.950695069506951%">          <p>可选</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.5" width="52.53525352535253%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="17.301730173017297%">          <p>isFinal</p></td>         <td class="cellrowborder" width="15.69156915691569%">          <p>boolean</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>否</p></td>         <td class="cellrowborder" width="52.53525352535253%">          <p>是否为本条子句最终结果的判断。</p>          <ul>           <li>true：是本条子句的最终结果。</li>           <li>false：是本条子句的中间结果。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="17.301730173017297%">          <p>isLast</p></td>         <td class="cellrowborder" width="15.69156915691569%">          <p>boolean</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>否</p></td>         <td class="cellrowborder" width="52.53525352535253%">          <p>是否为最后一条句子的判断。</p>          <ul>           <li>true：是最后一条句子。</li>           <li>false：不是最后一条句子。</li>          </ul></td>        </tr>        <tr>         <td class="cellrowborder" width="17.301730173017297%">          <p>result</p></td>         <td class="cellrowborder" width="15.69156915691569%">          <p>string</p></td>         <td class="cellrowborder" width="7.520752075207521%">          <p>否</p></td>         <td class="cellrowborder" width="6.950695069506951%">          <p>否</p></td>         <td class="cellrowborder" width="52.53525352535253%">          <p>最优识别结果。</p></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>