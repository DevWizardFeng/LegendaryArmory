<h1 _ngcontent-hcx-c119="" class="doc-title ng-star-inserted" title="statusBarManager（状态栏管理服务）"> statusBarManager（状态栏管理服务） </h1>

<div _ngcontent-hcx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块为应用提供接入状态栏的能力。应用可以通过接入相应的API，可快速在状态栏显示应用及下拉面板，实现对应用的管理；用户可以通过直接操作状态栏图标完成一些应用操作。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section1047820461499" device-type="2in1">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1047820461499" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section105181855219" device-type="2in1">statusBarManager.StatusBarItem<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section105181855219" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>状态栏图标详细参数。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.1" width="20%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.2" width="23.61%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.3" width="7.17%"><p><strong>只读</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.4" width="7.08%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.5" width="42.14%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>icons</p> </td> <td class="cellrowborder" width="23.61%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section1844717231113">StatusBarIcon</a></p> </td> <td class="cellrowborder" width="7.17%"><p>否</p> </td> <td class="cellrowborder" width="7.08%"><p>否</p> </td> <td class="cellrowborder" width="42.14%"><p>状态栏应用图标的图片信息。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>quickOperation</p> </td> <td class="cellrowborder" width="23.61%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section1139214183436">QuickOperation</a></p> </td> <td class="cellrowborder" width="7.17%"><p>否</p> </td> <td class="cellrowborder" width="7.08%"><p>否</p> </td> <td class="cellrowborder" width="42.14%"><p>状态栏应用图标的左键业务弹窗相关信息。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>statusBarGroupMenu</p> </td> <td class="cellrowborder" width="23.61%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section8291353172219">StatusBarGroupMenu</a>[]</p> </td> <td class="cellrowborder" width="7.17%"><p>否</p> </td> <td class="cellrowborder" width="7.08%"><p>是</p> </td> <td class="cellrowborder" width="42.14%"><p>状态栏图标的右键分组菜单相关信息。</p> <p>默认值：undefined</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前所有分组下一级菜单项的总和不可超过20个。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1844717231113" device-type="2in1">statusBarManager.StatusBarIcon<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1844717231113" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>状态栏图标的图片信息。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="20%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="22.900000000000002%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="7.630000000000001%"><p><strong>只读</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="7.22%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="42.25%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>white</p> </td> <td class="cellrowborder" width="22.900000000000002%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="7.630000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.22%"><p>否</p> </td> <td class="cellrowborder" width="42.25%"><p>深色壁纸下展示的图标，建议采用纯白色图标，支持JPEG、PNG、GIF、WebP、BMP、SVG、ICO、DNG等图片类型。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>建议使用24<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-pixel-units" target="_blank">vp</a> * 24vp的图片。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>black</p> </td> <td class="cellrowborder" width="22.900000000000002%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap" target="_blank">image.PixelMap</a></p> </td> <td class="cellrowborder" width="7.630000000000001%"><p>否</p> </td> <td class="cellrowborder" width="7.22%"><p>否</p> </td> <td class="cellrowborder" width="42.25%"><p>浅色壁纸下展示的图标，建议采用纯黑色图标，支持JPEG、PNG、GIF、WebP、BMP、SVG、ICO、DNG等图片类型。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>建议使用24vp * 24vp的图片。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1139214183436" device-type="2in1">statusBarManager.QuickOperation<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1139214183436" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>状态栏图标左键业务弹窗的详细信息。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.1" width="20%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.2" width="22.33%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.3" width="7.84%"><p><strong>只读</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.4" width="7.61%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.6.1.5" width="42.22%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>title</p> </td> <td class="cellrowborder" width="22.33%"><p>string</p> </td> <td class="cellrowborder" width="7.84%"><p>否</p> </td> <td class="cellrowborder" width="7.61%"><p>否</p> </td> <td class="cellrowborder" width="42.22%"><p>状态栏图标的左键业务弹窗的标题。</p> <p>取值范围：无限制，超长显示省略号。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>height</p> </td> <td class="cellrowborder" width="22.33%"><p>number</p> </td> <td class="cellrowborder" width="7.84%"><p>否</p> </td> <td class="cellrowborder" width="7.61%"><p>否</p> </td> <td class="cellrowborder" width="42.22%"><p>状态栏图标的左键业务弹窗的自定义区域高度，单位：vp。</p> <p>取值范围：大于0。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>abilityName</p> </td> <td class="cellrowborder" width="22.33%"><p>string</p> </td> <td class="cellrowborder" width="7.84%"><p>否</p> </td> <td class="cellrowborder" width="7.61%"><p>否</p> </td> <td class="cellrowborder" width="42.22%"><p>状态栏图标左键业务弹窗的应用定制区域对应的自定义<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-ability">StatusBarViewExtensionAbility</a>的名称。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当传空字符串时，支持通过监听<a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section18493519506">statusBarIconClick</a>事件处理点击业务。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>moduleName</p> </td> <td class="cellrowborder" width="22.33%"><p>string</p> </td> <td class="cellrowborder" width="7.84%"><p>否</p> </td> <td class="cellrowborder" width="7.61%"><p>是</p> </td> <td class="cellrowborder" width="42.22%"><p>状态栏图标左键业务弹窗的应用定制区域对应的自定义<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-ability">StatusBarViewExtensionAbility</a>所在的模块名称。</p> <p>默认值：''</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>loadingStatus</p> </td> <td class="cellrowborder" width="22.33%"><p>boolean</p> </td> <td class="cellrowborder" width="7.84%"><p>否</p> </td> <td class="cellrowborder" width="7.61%"><p>是</p> </td> <td class="cellrowborder" width="42.22%"><p>点击状态栏图标展开二级菜单场景下是否加载动效。</p> <p>默认值：false</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p><strong>起始版本：</strong>6.0.0(20)</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section8291353172219" device-type="2in1">statusBarManager.StatusBarGroupMenu<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section8291353172219" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>type StatusBarGroupMenu = StatusBarMenuItem[]</p> <p>状态栏图标右键菜单的分组菜单信息。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.1" width="45.129999999999995%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.3.1.2" width="54.87%"><p><strong>说明</strong></p> </th> </tr><tr><td class="cellrowborder" width="45.129999999999995%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section3627115133810">StatusBarMenuItem</a>[]</p> </td> <td class="cellrowborder" width="54.87%"><p>菜单组的信息，可以包含多个一级菜单项。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section3627115133810" device-type="2in1">statusBarManager.StatusBarMenuItem<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3627115133810" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>状态栏图标右键菜单的一级菜单项信息。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.1" width="15.840000000000002%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.2" width="26.47%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.3" width="9.06%"><p><strong>只读</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.4" width="7.7%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.5.1.6.1.5" width="40.93%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15.840000000000002%"><p>title</p> </td> <td class="cellrowborder" width="26.47%"><p>string</p> </td> <td class="cellrowborder" width="9.06%"><p>否</p> </td> <td class="cellrowborder" width="7.7%"><p>否</p> </td> <td class="cellrowborder" width="40.93%"><p>菜单项标题。</p> <p>取值范围：无限制，超长显示省略号。</p> </td> </tr> <tr><td class="cellrowborder" width="15.840000000000002%"><p>menuAction</p> </td> <td class="cellrowborder" width="26.47%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section1196811528487">StatusBarMenuAction</a></p> </td> <td class="cellrowborder" width="9.06%"><p>否</p> </td> <td class="cellrowborder" width="7.7%"><p>是</p> </td> <td class="cellrowborder" width="40.93%"><p>菜单项行为信息。</p> <p>默认值：undefined</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前菜单行为仅支持打开应用内定义的UIAbility，且menuAction和subMenu两个参数不可同时缺省。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="15.840000000000002%"><p>subMenu</p> </td> <td class="cellrowborder" width="26.47%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section18651641195110">StatusBarSubMenuItem</a>[]</p> </td> <td class="cellrowborder" width="9.06%"><p>否</p> </td> <td class="cellrowborder" width="7.7%"><p>是</p> </td> <td class="cellrowborder" width="40.93%"><p>一级菜单项的子菜单项。</p> <p>默认值：undefined</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前单个一级菜单项最多支持20个子菜单项。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1196811528487" device-type="2in1">statusBarManager.StatusBarMenuAction<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1196811528487" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>状态栏图标右键菜单的菜单项点击行为信息。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.1" width="15.839999999999998%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.2" width="27.359999999999996%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.3" width="7.509999999999999%"><p><strong>只读</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.4" width="7.619999999999999%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.5.1.6.1.5" width="41.66999999999999%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15.839999999999998%"><p>abilityName</p> </td> <td class="cellrowborder" width="27.359999999999996%"><p>string</p> </td> <td class="cellrowborder" width="7.509999999999999%"><p>否</p> </td> <td class="cellrowborder" width="7.619999999999999%"><p>否</p> </td> <td class="cellrowborder" width="41.66999999999999%"><p>点击菜单项拉起的应用的Ability名称。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前仅支持拉起UIAbility。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="15.839999999999998%"><p>moduleName</p> </td> <td class="cellrowborder" width="27.359999999999996%"><p>string</p> </td> <td class="cellrowborder" width="7.509999999999999%"><p>否</p> </td> <td class="cellrowborder" width="7.619999999999999%"><p>是</p> </td> <td class="cellrowborder" width="41.66999999999999%"><p>点击菜单项拉起的应用的Ability所在的模块名称。</p> <p>默认值：''</p> </td> </tr> <tr><td class="cellrowborder" width="15.839999999999998%"><p>notifyOnly</p> </td> <td class="cellrowborder" width="27.359999999999996%"><p>boolean</p> </td> <td class="cellrowborder" width="7.509999999999999%"><p>否</p> </td> <td class="cellrowborder" width="7.619999999999999%"><p>是</p> </td> <td class="cellrowborder" width="41.66999999999999%"><p>图标右键菜单点击事件使能。</p> <p>取值范围：</p> <p>false：不使能，此时点击右键菜单无事件通知</p> <p>true：使能，此时点击右键菜单有事件通知</p> <p>默认值：false - 无右键菜单点击事件触发</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当使能和提供菜单menuCode时，支持通过监听<a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section10893144462716">rightMenuClick</a>事件处理图标右键菜单点击业务。</p> <p><strong>起始版本：</strong>5.0.2(14)</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="15.839999999999998%"><p>menuCode</p> </td> <td class="cellrowborder" width="27.359999999999996%"><p>string</p> </td> <td class="cellrowborder" width="7.509999999999999%"><p>否</p> </td> <td class="cellrowborder" width="7.619999999999999%"><p>是</p> </td> <td class="cellrowborder" width="41.66999999999999%"><p>图标右键菜单唯一标识。</p> <p>默认值：''</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>需保证菜单标识的唯一性，用于区分不同菜单项。</p> <p><strong>起始版本：</strong>5.0.2(14)</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section18651641195110" device-type="2in1">statusBarManager.StatusBarSubMenuItem<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18651641195110" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>状态栏图标的右键菜单的二级菜单项信息</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.1" width="15.840000000000002%"><p><strong>名称</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.2" width="26.88%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.3" width="7.86%"><p><strong>只读</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.4" width="7.28%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.5" width="42.14%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="15.840000000000002%"><p>subTitle</p> </td> <td class="cellrowborder" width="26.88%"><p>string</p> </td> <td class="cellrowborder" width="7.86%"><p>否</p> </td> <td class="cellrowborder" width="7.28%"><p>否</p> </td> <td class="cellrowborder" width="42.14%"><p>二级菜单项标题。</p> <p>取值范围：无限制，超长显示省略号。</p> </td> </tr> <tr><td class="cellrowborder" width="15.840000000000002%"><p>menuAction</p> </td> <td class="cellrowborder" width="26.88%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section1196811528487">StatusBarMenuAction</a></p> </td> <td class="cellrowborder" width="7.86%"><p>否</p> </td> <td class="cellrowborder" width="7.28%"><p>否</p> </td> <td class="cellrowborder" width="42.14%"><p>菜单项行为信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前菜单行为仅支持打开应用内定义的UIAbility。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section665018220561" device-type="2in1">statusBarManager.addToStatusBar<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section665018220561" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>addToStatusBar(context: common.Context, statusBarItem: StatusBarItem): void</p> <p>应用接入状态栏方法，当前同一个应用仅支持添加一个图标，重复添加无效。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="8.260000000000002%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="41.74%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>context</p> </td> <td class="cellrowborder" width="25%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="8.260000000000002%"><p>是</p> </td> <td class="cellrowborder" width="41.74%"><p>上下文信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前context仅支持传入Context的子类UIAbilityContext、ServiceExtensionContext、FormExtensionContext。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>statusBarItem</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section105181855219">StatusBarItem</a></p> </td> <td class="cellrowborder" width="8.260000000000002%"><p>是</p> </td> <td class="cellrowborder" width="41.74%"><p>应用自定义接入状态栏的图标的详细信息。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="22.040000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="77.96%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="22.040000000000003%"><p>401</p> </td> <td class="cellrowborder" width="77.96%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710001</p> </td> <td class="cellrowborder" width="77.96%"><p>The size of the pixelmap exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710002</p> </td> <td class="cellrowborder" width="77.96%"><p>The number of menu items or submenu items exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710003</p> </td> <td class="cellrowborder" width="77.96%"><p>The API is being called too frequently.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010720001</p> </td> <td class="cellrowborder" width="77.96%"><p>A menu item contains neither submenu nor menuAction.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> </div> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 可以通过自定义组件的内置方法获取Context信息</span></li><li><span class="hljs-comment"> * 具体方法：this.getUIContext().getHostContext();</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">addToStatusBar</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">if</span> (!context) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getHostContext failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 获取resourceManager资源管理器</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li>
</li><li>  <span class="hljs-comment">// 创建white pixelMap，需在资源rawfile文件夹中预置testWhite.png图片，图片大小为24vp * 24vp</span></li><li>  <span class="hljs-keyword">const</span> whiteFileData = resourceMgr.<span class="hljs-title function_">getRawFileContentSync</span>(<span class="hljs-string">'testWhite.png'</span>);</li><li>  <span class="hljs-keyword">const</span> whiteBuffer = whiteFileData.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">const</span> whiteImageSource = image.<span class="hljs-title function_">createImageSource</span>(whiteBuffer);</li><li>  <span class="hljs-keyword">let</span> whitePixelMap = <span class="hljs-keyword">await</span> whiteImageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>
</li><li>  <span class="hljs-comment">// 创建black pixelMap，需在资源rawfile文件夹中预置testBlack.png图片，图片大小为24vp * 24vp</span></li><li>  <span class="hljs-keyword">const</span> blackFileData = resourceMgr.<span class="hljs-title function_">getRawFileContentSync</span>(<span class="hljs-string">'testBlack.png'</span>);</li><li>  <span class="hljs-keyword">const</span> blackBuffer = blackFileData.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">const</span> blackImageSource = image.<span class="hljs-title function_">createImageSource</span>(blackBuffer);</li><li>  <span class="hljs-keyword">let</span> blackPixelMap = <span class="hljs-keyword">await</span> blackImageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>
</li><li>  <span class="hljs-comment">// 构建图标信息</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">icon</span>: statusBarManager.<span class="hljs-property">StatusBarIcon</span> = {</li><li>    <span class="hljs-attr">white</span>: whitePixelMap,</li><li>    <span class="hljs-attr">black</span>: blackPixelMap</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 构建右键菜单项内容</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenus</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarSubMenuItem</span>&gt; = [];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenuItemAction</span>: statusBarManager.<span class="hljs-property">StatusBarMenuAction</span> = {</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenu</span>: statusBarManager.<span class="hljs-property">StatusBarSubMenuItem</span> = {</li><li>    <span class="hljs-attr">subTitle</span>: <span class="hljs-string">"子菜单项"</span>,</li><li>    <span class="hljs-attr">menuAction</span>: subMenuItemAction</li><li>  }</li><li>  subMenus.<span class="hljs-title function_">push</span>(subMenu);</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">statusBarMenuItems</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarMenuItem</span>&gt; = [];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">menuItem</span>: statusBarManager.<span class="hljs-property">StatusBarMenuItem</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">"一级菜单项"</span>,</li><li>    <span class="hljs-comment">// 一级menuAction和subMenu两项不可都缺省</span></li><li>    <span class="hljs-attr">subMenu</span>: subMenus</li><li>  };</li><li>  statusBarMenuItems.<span class="hljs-title function_">push</span>(menuItem);</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">statusBarGroupMenus</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarGroupMenu</span>&gt; = [];</li><li>  statusBarGroupMenus.<span class="hljs-title function_">push</span>(statusBarMenuItems);</li><li>
</li><li>  <span class="hljs-comment">// 构建左键业务弹窗信息</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">operation</span>: statusBarManager.<span class="hljs-property">QuickOperation</span> = {</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"MyStatusBarViewAbility"</span>,</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">"测试Demo"</span>,</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>,</li><li>    <span class="hljs-comment">// 可缺省</span></li><li>    <span class="hljs-attr">moduleName</span>: <span class="hljs-string">'entry'</span></li><li>  };</li><li>
</li><li>  <span class="hljs-comment">// 构建添加到状态栏的图标详细信息</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">item</span>: statusBarManager.<span class="hljs-property">StatusBarItem</span> = {</li><li>    <span class="hljs-attr">icons</span>: icon,</li><li>    <span class="hljs-attr">quickOperation</span>: operation,</li><li>    <span class="hljs-attr">statusBarGroupMenu</span>: statusBarGroupMenus</li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    statusBarManager.<span class="hljs-title function_">addToStatusBar</span>(context, item);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`addToStatusBar failed. error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> <div class="tiledSection"><h2 id="section1914013315368" device-type="2in1">statusBarManager.addToStatusBar<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1914013315368" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>addToStatusBar(context: common.Context, statusBarItem: StatusBarItem, callback: AsyncCallback&lt;void&gt;): void</p> <p>应用接入状态栏方法，使用callback异步回调，当前同一个应用仅支持添加一个图标，重复添加无效。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.2(14)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="8.260000000000002%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="41.74%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>context</p> </td> <td class="cellrowborder" width="25%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="8.260000000000002%"><p>是</p> </td> <td class="cellrowborder" width="41.74%"><p>上下文信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前context仅支持传入Context的子类UIAbilityContext、ServiceExtensionContext、FormExtensionContext。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>statusBarItem</p> </td> <td class="cellrowborder" width="25%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section105181855219">StatusBarItem</a></p> </td> <td class="cellrowborder" width="8.260000000000002%"><p>是</p> </td> <td class="cellrowborder" width="41.74%"><p>应用自定义接入状态栏的图标的详细信息。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="8.260000000000002%"><p>是</p> </td> <td class="cellrowborder" width="41.74%"><p>表示应用添加图标到状态栏回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="22.040000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="77.96%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="22.040000000000003%"><p>401</p> </td> <td class="cellrowborder" width="77.96%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710001</p> </td> <td class="cellrowborder" width="77.96%"><p>The size of the pixelmap exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710002</p> </td> <td class="cellrowborder" width="77.96%"><p>The number of menu items or submenu items exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710003</p> </td> <td class="cellrowborder" width="77.96%"><p>The API is being called too frequently.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010720001</p> </td> <td class="cellrowborder" width="77.96%"><p>A menu item contains neither submenu nor menuAction.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 可以通过自定义组件的内置方法获取Context信息</span></li><li><span class="hljs-comment"> * 具体方法：this.getUIContext().getHostContext();</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">addToStatusBar</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">if</span> (!context) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getHostContext failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 获取resourceManager资源管理器</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li>
</li><li>  <span class="hljs-comment">// 创建white pixelMap，需在资源rawfile文件夹中预置testWhite.png图片，图片大小为24vp * 24vp</span></li><li>  <span class="hljs-keyword">const</span> whiteFileData = resourceMgr.<span class="hljs-title function_">getRawFileContentSync</span>(<span class="hljs-string">'testWhite.png'</span>);</li><li>  <span class="hljs-keyword">const</span> whiteBuffer = whiteFileData.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">const</span> whiteImageSource = image.<span class="hljs-title function_">createImageSource</span>(whiteBuffer);</li><li>  <span class="hljs-keyword">let</span> whitePixelMap = <span class="hljs-keyword">await</span> whiteImageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>
</li><li>  <span class="hljs-comment">// 创建black pixelMap，需在资源rawfile文件夹中预置testBlack.png图片，图片大小为24vp * 24vp</span></li><li>  <span class="hljs-keyword">const</span> blackFileData = resourceMgr.<span class="hljs-title function_">getRawFileContentSync</span>(<span class="hljs-string">'testBlack.png'</span>);</li><li>  <span class="hljs-keyword">const</span> blackBuffer = blackFileData.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">const</span> blackImageSource = image.<span class="hljs-title function_">createImageSource</span>(blackBuffer);</li><li>  <span class="hljs-keyword">let</span> blackPixelMap = <span class="hljs-keyword">await</span> blackImageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>
</li><li>  <span class="hljs-comment">// 构建图标信息</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">icon</span>: statusBarManager.<span class="hljs-property">StatusBarIcon</span> = {</li><li>    <span class="hljs-attr">white</span>: whitePixelMap,</li><li>    <span class="hljs-attr">black</span>: blackPixelMap</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 构建右键菜单项内容</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenus</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarSubMenuItem</span>&gt; = [];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenuItemAction</span>: statusBarManager.<span class="hljs-property">StatusBarMenuAction</span> = {</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenu</span>: statusBarManager.<span class="hljs-property">StatusBarSubMenuItem</span> = {</li><li>    <span class="hljs-attr">subTitle</span>: <span class="hljs-string">"子菜单项"</span>,</li><li>    <span class="hljs-attr">menuAction</span>: subMenuItemAction</li><li>  }</li><li>  subMenus.<span class="hljs-title function_">push</span>(subMenu);</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">statusBarMenuItems</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarMenuItem</span>&gt; = [];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">menuItem</span>: statusBarManager.<span class="hljs-property">StatusBarMenuItem</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">"一级菜单项"</span>,</li><li>    <span class="hljs-comment">// 一级menuAction和subMenu两项不可都缺省</span></li><li>    <span class="hljs-attr">subMenu</span>: subMenus</li><li>  };</li><li>  statusBarMenuItems.<span class="hljs-title function_">push</span>(menuItem);</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">statusBarGroupMenus</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarGroupMenu</span>&gt; = [];</li><li>  statusBarGroupMenus.<span class="hljs-title function_">push</span>(statusBarMenuItems);</li><li>
</li><li>  <span class="hljs-comment">// 构建左键业务弹窗信息</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">operation</span>: statusBarManager.<span class="hljs-property">QuickOperation</span> = {</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"MyStatusBarViewAbility"</span>,</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">"测试Demo"</span>,</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">300</span>,</li><li>    <span class="hljs-comment">// 可缺省</span></li><li>    <span class="hljs-attr">moduleName</span>: <span class="hljs-string">'entry'</span></li><li>  };</li><li>
</li><li>  <span class="hljs-comment">// 构建添加到状态栏的图标详细信息</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">item</span>: statusBarManager.<span class="hljs-property">StatusBarItem</span> = {</li><li>    <span class="hljs-attr">icons</span>: icon,</li><li>    <span class="hljs-attr">quickOperation</span>: operation,</li><li>    <span class="hljs-attr">statusBarGroupMenu</span>: statusBarGroupMenus</li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    statusBarManager.<span class="hljs-title function_">addToStatusBar</span>(context, item, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'addToStatusBar success'</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`addToStatusBar failed. error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section8931134111810" device-type="2in1">statusBarManager.removeFromStatusBar<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section8931134111810" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>removeFromStatusBar(context: common.Context): void</p> <p>应用移除状态栏对应图标方法。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="29.21%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="9.48%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="36.309999999999995%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>context</p> </td> <td class="cellrowborder" width="29.21%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="9.48%"><p>是</p> </td> <td class="cellrowborder" width="36.309999999999995%"><p>上下文信息</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前context仅支持传入Context的子类UIAbilityContext、ServiceExtensionContext、FormExtensionContext。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="22.040000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="77.96%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="22.040000000000003%"><p>401</p> </td> <td class="cellrowborder" width="77.96%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710003</p> </td> <td class="cellrowborder" width="77.96%"><p>The API is being called too frequently.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710004</p> </td> <td class="cellrowborder" width="77.96%"><p>there are no foreground-windows, not allow to delete icon</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 可以通过自定义组件的内置方法获取Context信息</span></li><li><span class="hljs-comment"> * 具体方法：this.getUIContext().getHostContext();</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">removeFromStatusBar</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">if</span> (!context) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getHostContext failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    statusBarManager.<span class="hljs-title function_">removeFromStatusBar</span>(context);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`removeFromStatusBar failed. error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section3698135610463" device-type="2in1">statusBarManager.removeFromStatusBar<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section3698135610463" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>removeFromStatusBar(context: common.Context, callback: AsyncCallback&lt;void&gt;): void</p> <p>应用移除状态栏对应图标方法，使用callback异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.2(14)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="29.21%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="9.48%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="36.309999999999995%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>context</p> </td> <td class="cellrowborder" width="29.21%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="9.48%"><p>是</p> </td> <td class="cellrowborder" width="36.309999999999995%"><p>上下文信息</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前context仅支持传入Context的子类UIAbilityContext、ServiceExtensionContext、FormExtensionContext。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="29.21%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="9.48%"><p>是</p> </td> <td class="cellrowborder" width="36.309999999999995%"><p>表示应用移除状态栏图标回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="22.040000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="77.96%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="22.040000000000003%"><p>401</p> </td> <td class="cellrowborder" width="77.96%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710003</p> </td> <td class="cellrowborder" width="77.96%"><p>The API is being called too frequently.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710004</p> </td> <td class="cellrowborder" width="77.96%"><p>there are no foreground-windows, not allow to delete icon</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 可以通过自定义组件的内置方法获取Context信息</span></li><li><span class="hljs-comment"> * 具体方法：this.getUIContext().getHostContext();</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">removeFromStatusBar</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">if</span> (!context) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getHostContext failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    statusBarManager.<span class="hljs-title function_">removeFromStatusBar</span>(context, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'removeFromStatusBar success'</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`removeFromStatusBar failed. error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1797215174100" device-type="2in1">statusBarManager.updateQuickOperationHeight<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1797215174100" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>updateQuickOperationHeight(context: common.Context, height: number): void</p> <p>应用更新状态栏图标的左键弹窗应用定制区域高度。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="17.1%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="28.58%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="7.53%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="46.79%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="17.1%"><p>context</p> </td> <td class="cellrowborder" width="28.58%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="7.53%"><p>是</p> </td> <td class="cellrowborder" width="46.79%"><p>上下文信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前context仅支持传入Context的子类UIAbilityContext、ServiceExtensionContext、FormExtensionContext。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="17.1%"><p>height</p> </td> <td class="cellrowborder" width="28.58%"><p>number</p> </td> <td class="cellrowborder" width="7.53%"><p>是</p> </td> <td class="cellrowborder" width="46.79%"><p>状态栏图标左键的应用面板自定义区域高度，单位：vp。</p> <p>取值范围：大于0。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="22.040000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="77.96%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="22.040000000000003%"><p>401</p> </td> <td class="cellrowborder" width="77.96%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710003</p> </td> <td class="cellrowborder" width="77.96%"><p>The API is being called too frequently.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 可以通过自定义组件的内置方法获取Context信息</span></li><li><span class="hljs-comment"> * 具体方法：this.getUIContext().getHostContext();</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateQuickOperationHeight</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">if</span> (!context) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getHostContext failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> height = <span class="hljs-number">200</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    statusBarManager.<span class="hljs-title function_">updateQuickOperationHeight</span>(context, height);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`updateQuickOperationHeight failed. error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section45211138194917" device-type="2in1">statusBarManager.updateQuickOperationHeight<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section45211138194917" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>updateQuickOperationHeight(context: common.Context, height: number, callback: AsyncCallback&lt;void&gt;): void</p> <p>应用更新状态栏图标的左键弹窗应用定制区域高度，使用callback异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.2(14)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="17.1%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="28.58%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="7.53%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="46.79%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="17.1%"><p>context</p> </td> <td class="cellrowborder" width="28.58%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="7.53%"><p>是</p> </td> <td class="cellrowborder" width="46.79%"><p>上下文信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前context仅支持传入Context的子类UIAbilityContext、ServiceExtensionContext、FormExtensionContext。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="17.1%"><p>height</p> </td> <td class="cellrowborder" width="28.58%"><p>number</p> </td> <td class="cellrowborder" width="7.53%"><p>是</p> </td> <td class="cellrowborder" width="46.79%"><p>状态栏图标左键的应用面板自定义区域高度，单位：vp。</p> <p>取值范围：大于0。</p> </td> </tr> <tr><td class="cellrowborder" width="17.1%"><p>callback</p> </td> <td class="cellrowborder" width="28.58%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="7.53%"><p>是</p> </td> <td class="cellrowborder" width="46.79%"><p>表示应用更新状态栏图标的左键弹窗应用定制区域高度回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="22.040000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="77.96%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="22.040000000000003%"><p>401</p> </td> <td class="cellrowborder" width="77.96%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710003</p> </td> <td class="cellrowborder" width="77.96%"><p>The API is being called too frequently.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 可以通过自定义组件的内置方法获取Context信息</span></li><li><span class="hljs-comment"> * 具体方法：this.getUIContext().getHostContext();</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateQuickOperationHeight</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">if</span> (!context) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getHostContext failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> height = <span class="hljs-number">200</span>;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    statusBarManager.<span class="hljs-title function_">updateQuickOperationHeight</span>(context, height, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'updateQuickOperationHeight success'</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`updateQuickOperationHeight failed. error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section188071452172811" device-type="2in1">statusBarManager.updateStatusBarMenu<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section188071452172811" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>updateStatusBarMenu(context: common.Context, statusBarGroupMenus: StatusBarGroupMenu[]): void</p> <p>应用更新状态栏图标的右键菜单内容。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="23.849999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="24.62%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="14.6%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="36.93%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.849999999999998%"><p>context</p> </td> <td class="cellrowborder" width="24.62%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="14.6%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>上下文信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前context仅支持传入Context的子类UIAbilityContext、ServiceExtensionContext、FormExtensionContext。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.849999999999998%"><p>statusBarGroupMenus</p> </td> <td class="cellrowborder" width="24.62%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section8291353172219">StatusBarGroupMenu</a>[]</p> </td> <td class="cellrowborder" width="14.6%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>更新后的应用右键菜单栏相关信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前所有分组下一级菜单项的总和不可超过20个。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="22.040000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="77.96%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="22.040000000000003%"><p>401</p> </td> <td class="cellrowborder" width="77.96%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710002</p> </td> <td class="cellrowborder" width="77.96%"><p>The number of menu items or submenu items exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710003</p> </td> <td class="cellrowborder" width="77.96%"><p>The API is being called too frequently.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010720001</p> </td> <td class="cellrowborder" width="77.96%"><p>A menu item contains neither submenu nor menuAction.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 可以通过自定义组件的内置方法获取Context信息</span></li><li><span class="hljs-comment"> * 具体方法：this.getUIContext().getHostContext();</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateStatusBarMenu</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-comment">// 构建右键菜单项内容</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenus</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarSubMenuItem</span>&gt; = [];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenuItemAction</span>: statusBarManager.<span class="hljs-property">StatusBarMenuAction</span> = {</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenu</span>: statusBarManager.<span class="hljs-property">StatusBarSubMenuItem</span> = {</li><li>    <span class="hljs-attr">subTitle</span>: <span class="hljs-string">"二级菜单项"</span>,</li><li>    <span class="hljs-attr">menuAction</span>: subMenuItemAction</li><li>  }</li><li>  subMenus.<span class="hljs-title function_">push</span>(subMenu);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">statusBarMenuItems</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarMenuItem</span>&gt; = [];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">menuItem</span>: statusBarManager.<span class="hljs-property">StatusBarMenuItem</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">"一级菜单项"</span>,</li><li>    <span class="hljs-comment">// 一级menuAction和subMenu两项不可都缺省</span></li><li>    <span class="hljs-attr">subMenu</span>: subMenus</li><li>  };</li><li>  statusBarMenuItems.<span class="hljs-title function_">push</span>(menuItem);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">statusBarGroupMenus</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarGroupMenu</span>&gt; = [];</li><li>  statusBarGroupMenus.<span class="hljs-title function_">push</span>(statusBarMenuItems);</li><li>  <span class="hljs-keyword">if</span> (!context) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getHostContext failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    statusBarManager.<span class="hljs-title function_">updateStatusBarMenu</span>(context, statusBarGroupMenus);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`updateStatusBarMenu failed. error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section4350148145214" device-type="2in1">statusBarManager.updateStatusBarMenu<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section4350148145214" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>updateStatusBarMenu(context: common.Context, statusBarGroupMenus: StatusBarGroupMenu[], callback: AsyncCallback&lt;void&gt;): void</p> <p>应用更新状态栏图标的右键菜单内容，使用callback异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.2(14)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="23.849999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="24.62%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="14.6%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="36.93%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.849999999999998%"><p>context</p> </td> <td class="cellrowborder" width="24.62%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="14.6%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>上下文信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前context仅支持传入Context的子类UIAbilityContext、ServiceExtensionContext、FormExtensionContext。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.849999999999998%"><p>statusBarGroupMenus</p> </td> <td class="cellrowborder" width="24.62%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section8291353172219">StatusBarGroupMenu</a>[]</p> </td> <td class="cellrowborder" width="14.6%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>更新后的应用右键菜单栏相关信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前所有分组下一级菜单项的总和不可超过20个。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.849999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="24.62%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="14.6%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>表示应用更新状态栏图标的右键菜单内容回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="22.040000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="77.96%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="22.040000000000003%"><p>401</p> </td> <td class="cellrowborder" width="77.96%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710002</p> </td> <td class="cellrowborder" width="77.96%"><p>The number of menu items or submenu items exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710003</p> </td> <td class="cellrowborder" width="77.96%"><p>The API is being called too frequently.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010720001</p> </td> <td class="cellrowborder" width="77.96%"><p>A menu item contains neither submenu nor menuAction.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 可以通过自定义组件的内置方法获取Context信息</span></li><li><span class="hljs-comment"> * 具体方法：this.getUIContext().getHostContext();</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateStatusBarMenu</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-comment">// 构建右键菜单项内容</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenus</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarSubMenuItem</span>&gt; = [];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenuItemAction</span>: statusBarManager.<span class="hljs-property">StatusBarMenuAction</span> = {</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">subMenu</span>: statusBarManager.<span class="hljs-property">StatusBarSubMenuItem</span> = {</li><li>    <span class="hljs-attr">subTitle</span>: <span class="hljs-string">"二级菜单项"</span>,</li><li>    <span class="hljs-attr">menuAction</span>: subMenuItemAction</li><li>  }</li><li>  subMenus.<span class="hljs-title function_">push</span>(subMenu);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">statusBarMenuItems</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarMenuItem</span>&gt; = [];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">menuItem</span>: statusBarManager.<span class="hljs-property">StatusBarMenuItem</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">"一级菜单项"</span>,</li><li>    <span class="hljs-comment">// 一级menuAction和subMenu两项不可都缺省</span></li><li>    <span class="hljs-attr">subMenu</span>: subMenus</li><li>  };</li><li>  statusBarMenuItems.<span class="hljs-title function_">push</span>(menuItem);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">statusBarGroupMenus</span>: <span class="hljs-title class_">Array</span>&lt;statusBarManager.<span class="hljs-property">StatusBarGroupMenu</span>&gt; = [];</li><li>  statusBarGroupMenus.<span class="hljs-title function_">push</span>(statusBarMenuItems);</li><li>  <span class="hljs-keyword">if</span> (!context) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getHostContext failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    statusBarManager.<span class="hljs-title function_">updateStatusBarMenu</span>(context, statusBarGroupMenus, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'updateStatusBarMenu success'</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`updateStatusBarMenu failed. error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section1728610265620" device-type="2in1">statusBarManager.updateStatusBarIcon<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1728610265620" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>updateStatusBarIcon(context: common.Context, statusBarIcon: StatusBarIcon): void</p> <p>应用更新接入状态栏的图标。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="23.849999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="24.62%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="14.6%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="36.93%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.849999999999998%"><p>context</p> </td> <td class="cellrowborder" width="24.62%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="14.6%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>上下文信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前context仅支持传入Context的子类UIAbilityContext、ServiceExtensionContext、FormExtensionContext。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.849999999999998%"><p>statusBarIcon</p> </td> <td class="cellrowborder" width="24.62%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section1844717231113">StatusBarIcon</a></p> </td> <td class="cellrowborder" width="14.6%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>更新的图标。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="22.040000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="77.96%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="22.040000000000003%"><p>401</p> </td> <td class="cellrowborder" width="77.96%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710001</p> </td> <td class="cellrowborder" width="77.96%"><p>The size of the pixelmap exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710003</p> </td> <td class="cellrowborder" width="77.96%"><p>The API is being called too frequently.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 可以通过自定义组件的内置方法获取Context信息</span></li><li><span class="hljs-comment"> * 具体方法：this.getUIContext().getHostContext();</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateStatusBarIcon</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">if</span> (!context) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getHostContext failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 获取resourceManager资源管理器</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li>
</li><li>  <span class="hljs-comment">// 创建white pixelMap，需在资源rawfile文件夹中预置testWhite.png图片，图片大小为24vp * 24vp</span></li><li>  <span class="hljs-keyword">const</span> whiteFileData = resourceMgr.<span class="hljs-title function_">getRawFileContentSync</span>(<span class="hljs-string">'testWhite.png'</span>);</li><li>  <span class="hljs-keyword">const</span> whiteBuffer = whiteFileData.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">const</span> whiteImageSource = image.<span class="hljs-title function_">createImageSource</span>(whiteBuffer);</li><li>  <span class="hljs-keyword">let</span> whitePixelMap = <span class="hljs-keyword">await</span> whiteImageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>
</li><li>  <span class="hljs-comment">// 创建black pixelMap，需在资源rawfile文件夹中预置testBlack.png图片，图片大小为24vp * 24vp</span></li><li>  <span class="hljs-keyword">const</span> blackFileData = resourceMgr.<span class="hljs-title function_">getRawFileContentSync</span>(<span class="hljs-string">'testBlack.png'</span>);</li><li>  <span class="hljs-keyword">const</span> blackBuffer = blackFileData.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">const</span> blackImageSource = image.<span class="hljs-title function_">createImageSource</span>(blackBuffer);</li><li>  <span class="hljs-keyword">let</span> blackPixelMap = <span class="hljs-keyword">await</span> blackImageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>
</li><li>  <span class="hljs-comment">// 构建图标信息</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">icons</span>: statusBarManager.<span class="hljs-property">StatusBarIcon</span> = {</li><li>    <span class="hljs-attr">white</span>: whitePixelMap,</li><li>    <span class="hljs-attr">black</span>: blackPixelMap</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    statusBarManager.<span class="hljs-title function_">updateStatusBarIcon</span>(context, icons);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`updateStatusBarIcon failed. error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section12758191175414" device-type="2in1">statusBarManager.updateStatusBarIcon<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12758191175414" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>updateStatusBarIcon(context: common.Context, statusBarIcon: StatusBarIcon, callback: AsyncCallback&lt;void&gt;): void</p> <p>应用更新接入状态栏的图标，使用callback异步回调。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.2(14)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="23.849999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="24.62%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="14.6%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="36.93%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.849999999999998%"><p>context</p> </td> <td class="cellrowborder" width="24.62%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="14.6%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>上下文信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前context仅支持传入Context的子类UIAbilityContext、ServiceExtensionContext、FormExtensionContext。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.849999999999998%"><p>statusBarIcon</p> </td> <td class="cellrowborder" width="24.62%"><p><a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section1844717231113">StatusBarIcon</a></p> </td> <td class="cellrowborder" width="14.6%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>更新的图标。</p> </td> </tr> <tr><td class="cellrowborder" width="23.849999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="24.62%"><p>AsyncCallback&lt;void&gt;</p> </td> <td class="cellrowborder" width="14.6%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>表示应用更新接入状态栏的图标回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal" target="_blank">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/statusbar-extension-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="22.040000000000003%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="77.96%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="22.040000000000003%"><p>401</p> </td> <td class="cellrowborder" width="77.96%"><p>The parameter check failed.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710001</p> </td> <td class="cellrowborder" width="77.96%"><p>The size of the pixelmap exceeds the limit.</p> </td> </tr> <tr><td class="cellrowborder" width="22.040000000000003%"><p>1010710003</p> </td> <td class="cellrowborder" width="77.96%"><p>The API is being called too frequently.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { statusBarManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeskTopExtensionKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li>
</li><li><span class="hljs-comment">/**</span></li><li><span class="hljs-comment"> * 可以通过自定义组件的内置方法获取Context信息</span></li><li><span class="hljs-comment"> * 具体方法：this.getUIContext().getHostContext();</span></li><li><span class="hljs-comment"> */</span></li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateStatusBarIcon</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">if</span> (!context) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getHostContext failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 获取resourceManager资源管理器</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li>
</li><li>  <span class="hljs-comment">// 创建white pixelMap，需在资源rawfile文件夹中预置testWhite.png图片，图片大小为24vp * 24vp</span></li><li>  <span class="hljs-keyword">const</span> whiteFileData = resourceMgr.<span class="hljs-title function_">getRawFileContentSync</span>(<span class="hljs-string">'testWhite.png'</span>);</li><li>  <span class="hljs-keyword">const</span> whiteBuffer = whiteFileData.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">const</span> whiteImageSource = image.<span class="hljs-title function_">createImageSource</span>(whiteBuffer);</li><li>  <span class="hljs-keyword">let</span> whitePixelMap = <span class="hljs-keyword">await</span> whiteImageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>
</li><li>  <span class="hljs-comment">// 创建black pixelMap，需在资源rawfile文件夹中预置testBlack.png图片，图片大小为24vp * 24vp</span></li><li>  <span class="hljs-keyword">const</span> blackFileData = resourceMgr.<span class="hljs-title function_">getRawFileContentSync</span>(<span class="hljs-string">'testBlack.png'</span>);</li><li>  <span class="hljs-keyword">const</span> blackBuffer = blackFileData.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">const</span> blackImageSource = image.<span class="hljs-title function_">createImageSource</span>(blackBuffer);</li><li>  <span class="hljs-keyword">let</span> blackPixelMap = <span class="hljs-keyword">await</span> blackImageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>
</li><li>  <span class="hljs-comment">// 构建图标信息</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">icons</span>: statusBarManager.<span class="hljs-property">StatusBarIcon</span> = {</li><li>    <span class="hljs-attr">white</span>: whitePixelMap,</li><li>    <span class="hljs-attr">black</span>: blackPixelMap</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    statusBarManager.<span class="hljs-title function_">updateStatusBarIcon</span>(context, icons, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-comment">// ...</span></li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'updateStatusBarIcon success'</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`updateStatusBarIcon failed. error code: <span class="hljs-subst">${error.code}</span>, error message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section18493519506" device-type="2in1">statusBarManager.on('statusBarIconClick')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18493519506" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>on(type: 'statusBarIconClick', callback: Callback&lt;emitter.EventData&gt;): void</p> <p>监听状态栏图标点击事件。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.2(14)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="23.849999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="24.6%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="14.62%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="36.93%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.849999999999998%"><p>type</p> </td> <td class="cellrowborder" width="24.6%"><p>string</p> </td> <td class="cellrowborder" width="14.62%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>事件回调类型，支持的事件为'statusBarIconClick'，当点击应用图标时，触发该事件。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当调用<a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section665018220561">addToStatusBar</a>，入参<a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section1139214183436">quickOperation</a>未指定abilityName时，支持通过监听statusBarIconClick事件处理点击业务。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.849999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="24.6%"><p>Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-emitter#eventdata" target="_blank">emitter.EventData</a>&gt;</p> </td> <td class="cellrowborder" width="14.62%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>需要注册的回调函数，返回信息为图标点击相关信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前返回信息：</p> <p>- iconClickType：点击事件类型，当前仅支持左键(leftClick)。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> onStatusBarIconClick = <span class="hljs-function">(<span class="hljs-params">eventData: emitter.EventData</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 自定义图标点击业务</span></li><li>  <span class="hljs-keyword">let</span> data = eventData.<span class="hljs-property">data</span>;</li><li>  <span class="hljs-keyword">if</span> (data) {</li><li>    <span class="hljs-keyword">switch</span> (data[<span class="hljs-string">'iconClickType'</span>]) {</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'leftClickType'</span>:</li><li>        <span class="hljs-comment">// 自定义左键点击业务</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-attr">default</span>:</li><li>        <span class="hljs-keyword">break</span>;</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 监听状态栏图标点击事件</span></li><li>statusBarManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'statusBarIconClick'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onStatusBarIconClick</span>);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section896154419154" device-type="2in1">statusBarManager.off('statusBarIconClick')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section896154419154" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>off(type: 'statusBarIconClick', callback?: Callback&lt;emitter.EventData&gt;): void</p> <p>注销状态栏图标点击事件。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.2(14)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="23.849999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="24.6%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="14.62%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="36.93%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.849999999999998%"><p>type</p> </td> <td class="cellrowborder" width="24.6%"><p>string</p> </td> <td class="cellrowborder" width="14.62%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>取消事件回调类型，支持的事件为'statusBarIconClick'</p> </td> </tr> <tr><td class="cellrowborder" width="23.849999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="24.6%"><p>Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-emitter#eventdata" target="_blank">emitter.EventData</a>&gt;</p> </td> <td class="cellrowborder" width="14.62%"><p>否</p> </td> <td class="cellrowborder" width="36.93%"><p>取消该事件的回调处理函数。</p> <p>默认值：undefined</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>若不传入callback，会取消该事件的所有回调函数</p> <p>若传入callback，需要传入对应on方法相同的对象，否则会导致回调函数未成功注销，导致内存泄露。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> onStatusBarIconClick = <span class="hljs-function">(<span class="hljs-params">eventData: emitter.EventData</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 自定义图标点击业务</span></li><li>  <span class="hljs-keyword">let</span> data = eventData.<span class="hljs-property">data</span>;</li><li>  <span class="hljs-keyword">if</span> (data) {</li><li>    <span class="hljs-keyword">switch</span> (data[<span class="hljs-string">'iconClickType'</span>]) {</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-string">'leftClickType'</span>:</li><li>        <span class="hljs-comment">// 自定义左键点击业务</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-attr">default</span>:</li><li>        <span class="hljs-keyword">break</span>;</li><li>    }</li><li>  }</li><li>}</li><li><span class="hljs-comment">// 取消事件回调处理函数</span></li><li>statusBarManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'statusBarIconClick'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onStatusBarIconClick</span>);</li><li>
</li><li><span class="hljs-comment">// 注销事件监听</span></li><li>statusBarManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'statusBarIconClick'</span>);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section10893144462716" device-type="2in1">statusBarManager.on('rightMenuClick')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10893144462716" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>on(type: 'rightMenuClick', callback: Callback&lt;emitter.EventData&gt;): void</p> <p>监听状态栏图标右键菜单点击事件。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.2(14)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="23.849999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="24.6%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="14.62%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="36.93%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.849999999999998%"><p>type</p> </td> <td class="cellrowborder" width="24.6%"><p>string</p> </td> <td class="cellrowborder" width="14.62%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>事件回调类型，支持的事件为'rightMenuClick'，当点击应用图标右键菜单时，触发该事件。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当调用<a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section188071452172811">updateStatusBarMenu</a>，添加菜单项时，指定<a href="/consumer/cn/doc/harmonyos-references/statusbar-extension-manager#section1196811528487">menuAction</a>的notifyOnly使能和菜单项menuCode时生效。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="23.849999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="24.6%"><p>Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-emitter#eventdata" target="_blank">emitter.EventData</a>&gt;</p> </td> <td class="cellrowborder" width="14.62%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>需要注册的回调函数，返回信息为图标右键菜单点击相关信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>当前返回信息：</p> <p>- menuCode：点击菜单项唯一标识。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> onRightMenuClick = <span class="hljs-function">(<span class="hljs-params">eventData: emitter.EventData</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 自定义图标右键菜单点击业务</span></li><li>  <span class="hljs-keyword">let</span> data = eventData.<span class="hljs-property">data</span>;</li><li>  <span class="hljs-keyword">if</span> (data) {</li><li>    <span class="hljs-keyword">let</span> menuCode = data[<span class="hljs-string">'menuCode'</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;</li><li>    <span class="hljs-comment">// 处理点击菜单项业务</span></li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 监听右键菜单点击事件</span></li><li>statusBarManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'rightMenuClick'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRightMenuClick</span>);</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section5394166163416" device-type="2in1">statusBarManager.off('rightMenuClick')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section5394166163416" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>off(type: 'rightMenuClick', callback?: Callback&lt;emitter.EventData&gt;): void</p> <p>注销状态栏图标右键菜单点击事件。</p> <p><strong>系统能力：</strong>SystemCapability.PCService.StatusBarManager</p> <p><strong>起始版本：</strong>5.0.2(14)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.1" width="23.849999999999998%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.2" width="24.6%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.3" width="14.62%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.4" width="36.93%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.849999999999998%"><p>type</p> </td> <td class="cellrowborder" width="24.6%"><p>string</p> </td> <td class="cellrowborder" width="14.62%"><p>是</p> </td> <td class="cellrowborder" width="36.93%"><p>取消事件回调类型，支持的事件为'rightMenuClick'。</p> </td> </tr> <tr><td class="cellrowborder" width="23.849999999999998%"><p>callback</p> </td> <td class="cellrowborder" width="24.6%"><p>Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-emitter#eventdata" target="_blank">emitter.EventData</a>&gt;</p> </td> <td class="cellrowborder" width="14.62%"><p>否</p> </td> <td class="cellrowborder" width="36.93%"><p>取消该事件的回调处理函数。</p> <p>默认值：undefined</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>若不传入callback，会取消该事件的所有回调函数</p> <p>若传入callback，需要传入对应on方法相同的对象，否则会导致回调函数未成功注销，导致内存泄露。</p> </div></div></div> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hcx-c106="" class="highlight-div"><div _ngcontent-hcx-c106="" class="highlight-div-header"><div _ngcontent-hcx-c106="" class="highlight-div-header-left"><div _ngcontent-hcx-c106="" class="handle-button expand-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hcx-c106="" class="highlight-div-header-right"><div _ngcontent-hcx-c106="" class="handle-button ai-button"></div><div _ngcontent-hcx-c106="" class="handle-button line-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hcx-c106="" class="handle-button theme-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hcx-c106="" class="handle-button copy-button"><div _ngcontent-hcx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hcx-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">private</span> onRightMenuClick = <span class="hljs-function">(<span class="hljs-params">eventData: emitter.EventData</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 自定义图标右键菜单点击业务</span></li><li>  <span class="hljs-keyword">let</span> data = eventData.<span class="hljs-property">data</span>;</li><li>  <span class="hljs-keyword">if</span> (data) {</li><li>    <span class="hljs-keyword">let</span> menuCode = data[<span class="hljs-string">'menuCode'</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;</li><li>    <span class="hljs-comment">// 处理点击菜单项业务</span></li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 取消事件回调处理函数</span></li><li>statusBarManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'rightMenuClick'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRightMenuClick</span>);</li><li>
</li><li><span class="hljs-comment">// 注销事件监听</span></li><li>statusBarManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'rightMenuClick'</span>);</li></ol></pre></div></div> </div> </div> <div></div></div>